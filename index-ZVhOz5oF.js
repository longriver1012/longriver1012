var Vc=Object.defineProperty;var Kc=(e,t,n)=>t in e?Vc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E=(e,t,n)=>Kc(e,typeof t!="symbol"?t+"":t,n);import{r as l,_ as me,W as F,c as be,a as K,b as pe,u as Sn,d as Ks,e as Fs,f as mn,g as Ws,C as vo,h as Fc,i as lt,j as Gs,k as Wc,l as on,K as Ne,w as Gc,m as $r,p as cr,F as Uc,n as Wt,T as qc,o as Xc,q as at,s as nn,t as Us,v as Yc,x as sn,R as qs,y as Bt,z as Oo,A as $o,B as Zc,D as ha,E as fa,G as hr,H as Qc,I as Aa,J as Io,L as Fr,M as or,N as In,O as rn,P as Ir,Q as Un,S as mi,U as vi,V as fn,X as Jc,Y as eu,Z as tu,$ as nu,a0 as yo,a1 as ve,a2 as Pa,a3 as Ra,a4 as qn,a5 as ru,a6 as ou,a7 as Xs,a8 as Ys,a9 as Ao,aa as ur,ab as Wr,ac as Gr,ad as Ar,ae as Zs,af as bo,ag as Da,ah as au,ai as iu,aj as su,ak as lu,al as cu,am as uu,an as Qs,ao as ga,ap as Ta,aq as du,ar as hu,as as Js,at as fu,au as gu,av as wn,aw as Ho,ax as pa,ay as pu,az as _a,aA as ao,aB as Vo,aC as mu,aD as el,aE as Dn,aF as go,aG as vu,aH as yu,aI as bu,aJ as Su,aK as gt,aL as Cu,aM as xu,aN as U,aO as ka,aP as La,aQ as wu,aR as Eu,aS as Mu,aT as Nu}from"./index-Bp_0-BiI.js";import{g as tl,a as Ou,b as $u,d as Iu,u as Au,O as yi,V as Ht,C as io,R as za,c as So,e as Pu,f as Ru,M as Ko,S as vr,h as Du,Q as Fo,E as yr,i as nl,j as Tu,k as _u,l as ku,m as st,n as Jt,o as so,p as Lu,P as Pr,q as rl,B as Po,r as jn,s as ma,t as ja,v as zu,w as ju,T as Pt,x as bi,y as Co,z as Bu,A as fr,D as ol,F as Rr,G as pt,H as Tn,I as ne,J as gn,K as _t,L as yt,N as bt,U as St,W as Ct,X as _n,Y as $t,Z as pn,_ as Hu,$ as kt,a0 as Lt,a1 as zt,a2 as jt,a3 as Gn,a4 as Vu,a5 as Nr,a6 as Ku,a7 as Fu,a8 as Wu,a9 as Gu,aa as Ba,ab as Dr,ac as al,ad as Et,ae as Uu,af as qu,ag as Wo,ah as Xu,ai as Yu,aj as kr,ak as Si,al as Zu,am as il,an as Qu,ao as Go,ap as Ju,aq as ed,ar as td,as as nd,at as rd,au as od,av as ad,aw as id,ax as sd,ay as ld,az as cd,aA as ud,aB as dd,aC as hd,aD as Ha,aE as Or,aF as po,aG as fd,aH as gd,aI as pd,aJ as md,aK as vd,aL as yd}from"./useSize-CatyPhPh.js";import{R as bd,u as Va,g as Vr,a as Ka,B as Sd,t as Cd,i as xd,b as wd,c as sl,d as Ed,e as Md,f as Nd,h as Od,j as $d,k as Id,l as Ad,m as Pd,I as Rd,n as Fa,F as Tr,M as ll,o as Wa,C as ar}from"./index-9QeoOVDf.js";import{n as Dd,g as Td,u as _d}from"./project-qH34_UML.js";function kd(e){var t="touches"in e?e.touches[0]:e,n=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-n,pageY:t.pageY-r}}function cl(e){var t=e.targetRef,n=e.containerRef,r=e.direction,o=e.onDragChange,a=e.onDragChangeComplete,s=e.calculate,i=e.color,c=e.disabledDrag,u=l.useState({x:0,y:0}),d=me(u,2),h=d[0],p=d[1],f=l.useRef(null),v=l.useRef(null);l.useEffect(function(){p(s())},[i]),l.useEffect(function(){return function(){document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",f.current),document.removeEventListener("touchend",v.current),f.current=null,v.current=null}},[]);var y=function(C){var N=kd(C),O=N.pageX,x=N.pageY,$=n.current.getBoundingClientRect(),w=$.x,R=$.y,T=$.width,_=$.height,z=t.current.getBoundingClientRect(),A=z.width,I=z.height,k=A/2,L=I/2,B=Math.max(0,Math.min(O-w,T))-k,H=Math.max(0,Math.min(x-R,_))-L,q={x:B,y:r==="x"?h.y:H};if(A===0&&I===0||A!==I)return!1;o==null||o(q)},g=function(C){C.preventDefault(),y(C)},m=function(C){C.preventDefault(),document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",v.current),document.removeEventListener("touchmove",f.current),document.removeEventListener("touchend",v.current),f.current=null,v.current=null,a==null||a()},b=function(C){document.removeEventListener("mousemove",f.current),document.removeEventListener("mouseup",v.current),!c&&(y(C),document.addEventListener("mousemove",g),document.addEventListener("mouseup",m),document.addEventListener("touchmove",g),document.addEventListener("touchend",m),f.current=g,v.current=m)};return[h,b]}var ul=function(t){var n=t.size,r=n===void 0?"default":n,o=t.color,a=t.prefixCls;return F.createElement("div",{className:be("".concat(a,"-handler"),K({},"".concat(a,"-handler-sm"),r==="small")),style:{backgroundColor:o}})},dl=function(t){var n=t.children,r=t.style,o=t.prefixCls;return F.createElement("div",{className:"".concat(o,"-palette"),style:pe({position:"relative"},r)},n)},hl=l.forwardRef(function(e,t){var n=e.children,r=e.x,o=e.y;return F.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(o,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},n)}),Ld=function(t){var n=t.color,r=t.onChange,o=t.prefixCls,a=t.onChangeComplete,s=t.disabled,i=l.useRef(),c=l.useRef(),u=l.useRef(n),d=Sn(function(y){var g=Ks({offset:y,targetRef:c,containerRef:i,color:n});u.current=g,r(g)}),h=cl({color:n,containerRef:i,targetRef:c,calculate:function(){return Fs(n)},onDragChange:d,onDragChangeComplete:function(){return a==null?void 0:a(u.current)},disabledDrag:s}),p=me(h,2),f=p[0],v=p[1];return F.createElement("div",{ref:i,className:"".concat(o,"-select"),onMouseDown:v,onTouchStart:v},F.createElement(dl,{prefixCls:o},F.createElement(hl,{x:f.x,y:f.y,ref:c},F.createElement(ul,{color:n.toRgbString(),prefixCls:o})),F.createElement("div",{className:"".concat(o,"-saturation"),style:{backgroundColor:"hsl(".concat(n.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},zd=function(t,n){var r=mn(t,{value:n}),o=me(r,2),a=o[0],s=o[1],i=l.useMemo(function(){return Ws(a)},[a]);return[i,s]},jd=function(t){var n=t.colors,r=t.children,o=t.direction,a=o===void 0?"to right":o,s=t.type,i=t.prefixCls,c=l.useMemo(function(){return n.map(function(u,d){var h=Ws(u);return s==="alpha"&&d===n.length-1&&(h=new vo(h.setA(1))),h.toRgbString()}).join(",")},[n,s]);return F.createElement("div",{className:"".concat(i,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(a,", ").concat(c,")")}},r)},Bd=function(t){var n=t.prefixCls,r=t.colors,o=t.disabled,a=t.onChange,s=t.onChangeComplete,i=t.color,c=t.type,u=l.useRef(),d=l.useRef(),h=l.useRef(i),p=function(N){return c==="hue"?N.getHue():N.a*100},f=Sn(function(C){var N=Ks({offset:C,targetRef:d,containerRef:u,color:i,type:c});h.current=N,a(p(N))}),v=cl({color:i,targetRef:d,containerRef:u,calculate:function(){return Fs(i,c)},onDragChange:f,onDragChangeComplete:function(){s(p(h.current))},direction:"x",disabledDrag:o}),y=me(v,2),g=y[0],m=y[1],b=F.useMemo(function(){if(c==="hue"){var C=i.toHsb();C.s=1,C.b=1,C.a=1;var N=new vo(C);return N}return i},[i,c]),S=F.useMemo(function(){return r.map(function(C){return"".concat(C.color," ").concat(C.percent,"%")})},[r]);return F.createElement("div",{ref:u,className:be("".concat(n,"-slider"),"".concat(n,"-slider-").concat(c)),onMouseDown:m,onTouchStart:m},F.createElement(dl,{prefixCls:n},F.createElement(hl,{x:g.x,y:g.y,ref:d},F.createElement(ul,{size:"small",color:b.toHexString(),prefixCls:n})),F.createElement(jd,{colors:S,type:c,prefixCls:n})))};function Hd(e){return l.useMemo(function(){var t=e||{},n=t.slider;return[n||Bd]},[e])}var Vd=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],Kd=l.forwardRef(function(e,t){var n=e.value,r=e.defaultValue,o=e.prefixCls,a=o===void 0?Fc:o,s=e.onChange,i=e.onChangeComplete,c=e.className,u=e.style,d=e.panelRender,h=e.disabledAlpha,p=h===void 0?!1:h,f=e.disabled,v=f===void 0?!1:f,y=e.components,g=Hd(y),m=me(g,1),b=m[0],S=zd(r||Wc,n),C=me(S,2),N=C[0],O=C[1],x=l.useMemo(function(){return N.setA(1).toRgbString()},[N]),$=function(H,q){n||O(H),s==null||s(H,q)},w=function(H){return new vo(N.setHue(H))},R=function(H){return new vo(N.setA(H/100))},T=function(H){$(w(H),{type:"hue",value:H})},_=function(H){$(R(H),{type:"alpha",value:H})},z=function(H){i&&i(w(H))},A=function(H){i&&i(R(H))},I=be("".concat(a,"-panel"),c,K({},"".concat(a,"-panel-disabled"),v)),k={prefixCls:a,disabled:v,color:N},L=F.createElement(F.Fragment,null,F.createElement(Ld,lt({onChange:$},k,{onChangeComplete:i})),F.createElement("div",{className:"".concat(a,"-slider-container")},F.createElement("div",{className:be("".concat(a,"-slider-group"),K({},"".concat(a,"-slider-group-disabled-alpha"),p))},F.createElement(b,lt({},k,{type:"hue",colors:Vd,min:0,max:359,value:N.getHue(),onChange:T,onChangeComplete:z})),!p&&F.createElement(b,lt({},k,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:x}],min:0,max:100,value:N.a*100,onChange:_,onChangeComplete:A}))),F.createElement(Gs,{color:N.toRgbString(),prefixCls:a})));return F.createElement("div",{className:I,style:u,ref:t},typeof d=="function"?d(L):L)}),Ro=function(t){var n=t.className,r=t.customizeIcon,o=t.customizeIconProps,a=t.children,s=t.onMouseDown,i=t.onClick,c=typeof r=="function"?r(o):r;return l.createElement("span",{className:n,onMouseDown:function(d){d.preventDefault(),s==null||s(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:i,"aria-hidden":!0},c!==void 0?c:l.createElement("span",{className:be(n.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},a))},Fd=function(t,n,r,o,a){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,i=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,u=F.useMemo(function(){if(on(o)==="object")return o.clearIcon;if(a)return a},[o,a]),d=F.useMemo(function(){return!!(!s&&o&&(r.length||i)&&!(c==="combobox"&&i===""))},[o,s,r.length,i,c]);return{allowClear:d,clearIcon:F.createElement(Ro,{className:"".concat(t,"-clear"),onMouseDown:n,customizeIcon:u},"×")}},fl=l.createContext(null);function gl(){return l.useContext(fl)}function Wd(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=l.useState(!1),n=me(t,2),r=n[0],o=n[1],a=l.useRef(null),s=function(){window.clearTimeout(a.current)};l.useEffect(function(){return s},[]);var i=function(u,d){s(),a.current=window.setTimeout(function(){o(u),d&&d()},e)};return[r,i,s]}function pl(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=l.useRef(null),n=l.useRef(null);l.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(o){(o||t.current===null)&&(t.current=o),window.clearTimeout(n.current),n.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},r]}function Gd(e,t,n,r){var o=l.useRef(null);o.current={open:t,triggerOpen:n,customizedTrigger:r},l.useEffect(function(){function a(s){var i;if(!((i=o.current)!==null&&i!==void 0&&i.customizedTrigger)){var c=s.target;c.shadowRoot&&s.composed&&(c=s.composedPath()[0]||c),o.current.open&&e().filter(function(u){return u}).every(function(u){return!u.contains(c)&&u!==c})&&o.current.triggerOpen(!1)}}return window.addEventListener("mousedown",a),function(){return window.removeEventListener("mousedown",a)}},[])}function Ud(e){return e&&![Ne.ESC,Ne.SHIFT,Ne.BACKSPACE,Ne.TAB,Ne.WIN_KEY,Ne.ALT,Ne.META,Ne.WIN_KEY_RIGHT,Ne.CTRL,Ne.SEMICOLON,Ne.EQUALS,Ne.CAPS_LOCK,Ne.CONTEXT_MENU,Ne.F1,Ne.F2,Ne.F3,Ne.F4,Ne.F5,Ne.F6,Ne.F7,Ne.F8,Ne.F9,Ne.F10,Ne.F11,Ne.F12].includes(e)}var qd=function(t,n){var r,o=t.prefixCls,a=t.id,s=t.inputElement,i=t.disabled,c=t.tabIndex,u=t.autoFocus,d=t.autoComplete,h=t.editable,p=t.activeDescendantId,f=t.value,v=t.maxLength,y=t.onKeyDown,g=t.onMouseDown,m=t.onChange,b=t.onPaste,S=t.onCompositionStart,C=t.onCompositionEnd,N=t.onBlur,O=t.open,x=t.attrs,$=s||l.createElement("input",null),w=$,R=w.ref,T=w.props,_=T.onKeyDown,z=T.onChange,A=T.onMouseDown,I=T.onCompositionStart,k=T.onCompositionEnd,L=T.onBlur,B=T.style;return Gc(!("maxLength"in $.props)),$=l.cloneElement($,pe(pe(pe({type:"search"},T),{},{id:a,ref:$r(n,R),disabled:i,tabIndex:c,autoComplete:d||"off",autoFocus:u,className:be("".concat(o,"-selection-search-input"),(r=$)===null||r===void 0||(r=r.props)===null||r===void 0?void 0:r.className),role:"combobox","aria-expanded":O||!1,"aria-haspopup":"listbox","aria-owns":"".concat(a,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(a,"_list"),"aria-activedescendant":O?p:void 0},x),{},{value:h?f:"",maxLength:v,readOnly:!h,unselectable:h?null:"on",style:pe(pe({},B),{},{opacity:h?null:0}),onKeyDown:function(q){y(q),_&&_(q)},onMouseDown:function(q){g(q),A&&A(q)},onChange:function(q){m(q),z&&z(q)},onCompositionStart:function(q){S(q),I&&I(q)},onCompositionEnd:function(q){C(q),k&&k(q)},onPaste:b,onBlur:function(q){N(q),L&&L(q)}})),$},ml=l.forwardRef(qd);function vl(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var Xd=typeof window<"u"&&window.document&&window.document.documentElement,Yd=Xd;function Zd(e){return e!=null}function Qd(e){return!e&&e!==0}function Ci(e){return["string","number"].includes(on(e))}function yl(e){var t=void 0;return e&&(Ci(e.title)?t=e.title.toString():Ci(e.label)&&(t=e.label.toString())),t}function Jd(e,t){Yd?l.useLayoutEffect(e,t):l.useEffect(e,t)}function eh(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var xi=function(t){t.preventDefault(),t.stopPropagation()},th=function(t){var n=t.id,r=t.prefixCls,o=t.values,a=t.open,s=t.searchValue,i=t.autoClearSearchValue,c=t.inputRef,u=t.placeholder,d=t.disabled,h=t.mode,p=t.showSearch,f=t.autoFocus,v=t.autoComplete,y=t.activeDescendantId,g=t.tabIndex,m=t.removeIcon,b=t.maxTagCount,S=t.maxTagTextLength,C=t.maxTagPlaceholder,N=C===void 0?function(Se){return"+ ".concat(Se.length," ...")}:C,O=t.tagRender,x=t.onToggleOpen,$=t.onRemove,w=t.onInputChange,R=t.onInputPaste,T=t.onInputKeyDown,_=t.onInputMouseDown,z=t.onInputCompositionStart,A=t.onInputCompositionEnd,I=t.onInputBlur,k=l.useRef(null),L=l.useState(0),B=me(L,2),H=B[0],q=B[1],j=l.useState(!1),Y=me(j,2),Z=Y[0],J=Y[1],te="".concat(r,"-selection"),re=a||h==="multiple"&&i===!1||h==="tags"?s:"",le=h==="tags"||h==="multiple"&&i===!1||p&&(a||Z);Jd(function(){q(k.current.scrollWidth)},[re]);var G=function(oe,he,Oe,Re,$e){return l.createElement("span",{title:yl(oe),className:be("".concat(te,"-item"),K({},"".concat(te,"-item-disabled"),Oe))},l.createElement("span",{className:"".concat(te,"-item-content")},he),Re&&l.createElement(Ro,{className:"".concat(te,"-item-remove"),onMouseDown:xi,onClick:$e,customizeIcon:m},"×"))},Q=function(oe,he,Oe,Re,$e,Ae){var we=function(De){xi(De),x(!a)};return l.createElement("span",{onMouseDown:we},O({label:he,value:oe,disabled:Oe,closable:Re,onClose:$e,isMaxTag:!!Ae}))},ee=function(oe){var he=oe.disabled,Oe=oe.label,Re=oe.value,$e=!d&&!he,Ae=Oe;if(typeof S=="number"&&(typeof Oe=="string"||typeof Oe=="number")){var we=String(Ae);we.length>S&&(Ae="".concat(we.slice(0,S),"..."))}var je=function(ye){ye&&ye.stopPropagation(),$(oe)};return typeof O=="function"?Q(Re,Ae,he,$e,je):G(oe,Ae,he,$e,je)},V=function(oe){if(!o.length)return null;var he=typeof N=="function"?N(oe):N;return typeof O=="function"?Q(void 0,he,!1,!1,void 0,!0):G({title:he},he,!1)},W=l.createElement("div",{className:"".concat(te,"-search"),style:{width:H},onFocus:function(){J(!0)},onBlur:function(){J(!1)}},l.createElement(ml,{ref:c,open:a,prefixCls:r,id:n,inputElement:null,disabled:d,autoFocus:f,autoComplete:v,editable:le,activeDescendantId:y,value:re,onKeyDown:T,onMouseDown:_,onChange:w,onPaste:R,onCompositionStart:z,onCompositionEnd:A,onBlur:I,tabIndex:g,attrs:cr(t,!0)}),l.createElement("span",{ref:k,className:"".concat(te,"-search-mirror"),"aria-hidden":!0},re," ")),ie=l.createElement(Uc,{prefixCls:"".concat(te,"-overflow"),data:o,renderItem:ee,renderRest:V,suffix:W,itemKey:eh,maxCount:b});return l.createElement("span",{className:"".concat(te,"-wrap")},ie,!o.length&&!re&&l.createElement("span",{className:"".concat(te,"-placeholder")},u))},nh=function(t){var n=t.inputElement,r=t.prefixCls,o=t.id,a=t.inputRef,s=t.disabled,i=t.autoFocus,c=t.autoComplete,u=t.activeDescendantId,d=t.mode,h=t.open,p=t.values,f=t.placeholder,v=t.tabIndex,y=t.showSearch,g=t.searchValue,m=t.activeValue,b=t.maxLength,S=t.onInputKeyDown,C=t.onInputMouseDown,N=t.onInputChange,O=t.onInputPaste,x=t.onInputCompositionStart,$=t.onInputCompositionEnd,w=t.onInputBlur,R=t.title,T=l.useState(!1),_=me(T,2),z=_[0],A=_[1],I=d==="combobox",k=I||y,L=p[0],B=g||"";I&&m&&!z&&(B=m),l.useEffect(function(){I&&A(!1)},[I,m]);var H=d!=="combobox"&&!h&&!y?!1:!!B,q=R===void 0?yl(L):R,j=l.useMemo(function(){return L?null:l.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:H?{visibility:"hidden"}:void 0},f)},[L,H,f,r]);return l.createElement("span",{className:"".concat(r,"-selection-wrap")},l.createElement("span",{className:"".concat(r,"-selection-search")},l.createElement(ml,{ref:a,prefixCls:r,id:o,open:h,inputElement:n,disabled:s,autoFocus:i,autoComplete:c,editable:k,activeDescendantId:u,value:B,onKeyDown:S,onMouseDown:C,onChange:function(Z){A(!0),N(Z)},onPaste:O,onCompositionStart:x,onCompositionEnd:$,onBlur:w,tabIndex:v,attrs:cr(t,!0),maxLength:I?b:void 0})),!I&&L?l.createElement("span",{className:"".concat(r,"-selection-item"),title:q,style:H?{visibility:"hidden"}:void 0},L.label):null,j)},rh=function(t,n){var r=l.useRef(null),o=l.useRef(!1),a=t.prefixCls,s=t.open,i=t.mode,c=t.showSearch,u=t.tokenWithEnter,d=t.disabled,h=t.prefix,p=t.autoClearSearchValue,f=t.onSearch,v=t.onSearchSubmit,y=t.onToggleOpen,g=t.onInputKeyDown,m=t.onInputBlur,b=t.domRef;l.useImperativeHandle(n,function(){return{focus:function(q){r.current.focus(q)},blur:function(){r.current.blur()}}});var S=pl(0),C=me(S,2),N=C[0],O=C[1],x=function(q){var j=q.which,Y=r.current instanceof HTMLTextAreaElement;!Y&&s&&(j===Ne.UP||j===Ne.DOWN)&&q.preventDefault(),g&&g(q),j===Ne.ENTER&&i==="tags"&&!o.current&&!s&&(v==null||v(q.target.value)),!(Y&&!s&&~[Ne.UP,Ne.DOWN,Ne.LEFT,Ne.RIGHT].indexOf(j))&&Ud(j)&&y(!0)},$=function(){O(!0)},w=l.useRef(null),R=function(q){f(q,!0,o.current)!==!1&&y(!0)},T=function(){o.current=!0},_=function(q){o.current=!1,i!=="combobox"&&R(q.target.value)},z=function(q){var j=q.target.value;if(u&&w.current&&/[\r\n]/.test(w.current)){var Y=w.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");j=j.replace(Y,w.current)}w.current=null,R(j)},A=function(q){var j=q.clipboardData,Y=j==null?void 0:j.getData("text");w.current=Y||""},I=function(q){var j=q.target;if(j!==r.current){var Y=document.body.style.msTouchAction!==void 0;Y?setTimeout(function(){r.current.focus()}):r.current.focus()}},k=function(q){var j=N();q.target!==r.current&&!j&&!(i==="combobox"&&d)&&q.preventDefault(),(i!=="combobox"&&(!c||!j)||!s)&&(s&&p!==!1&&f("",!0,!1),y())},L={inputRef:r,onInputKeyDown:x,onInputMouseDown:$,onInputChange:z,onInputPaste:A,onInputCompositionStart:T,onInputCompositionEnd:_,onInputBlur:m},B=i==="multiple"||i==="tags"?l.createElement(th,lt({},t,L)):l.createElement(nh,lt({},t,L));return l.createElement("div",{ref:b,className:"".concat(a,"-selector"),onClick:I,onMouseDown:k},h&&l.createElement("div",{className:"".concat(a,"-prefix")},h),B)},oh=l.forwardRef(rh),ah=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],ih=function(t){var n=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},sh=function(t,n){var r=t.prefixCls;t.disabled;var o=t.visible,a=t.children,s=t.popupElement,i=t.animation,c=t.transitionName,u=t.dropdownStyle,d=t.dropdownClassName,h=t.direction,p=h===void 0?"ltr":h,f=t.placement,v=t.builtinPlacements,y=t.dropdownMatchSelectWidth,g=t.dropdownRender,m=t.dropdownAlign,b=t.getPopupContainer,S=t.empty,C=t.getTriggerDOMNode,N=t.onPopupVisibleChange,O=t.onPopupMouseEnter,x=Wt(t,ah),$="".concat(r,"-dropdown"),w=s;g&&(w=g(s));var R=l.useMemo(function(){return v||ih(y)},[v,y]),T=i?"".concat($,"-").concat(i):c,_=typeof y=="number",z=l.useMemo(function(){return _?null:y===!1?"minWidth":"width"},[y,_]),A=u;_&&(A=pe(pe({},A),{},{width:y}));var I=l.useRef(null);return l.useImperativeHandle(n,function(){return{getPopupElement:function(){var L;return(L=I.current)===null||L===void 0?void 0:L.popupElement}}}),l.createElement(qc,lt({},x,{showAction:N?["click"]:[],hideAction:N?["click"]:[],popupPlacement:f||(p==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:R,prefixCls:$,popupTransitionName:T,popup:l.createElement("div",{onMouseEnter:O},w),ref:I,stretch:z,popupAlign:m,popupVisible:o,getPopupContainer:b,popupClassName:be(d,K({},"".concat($,"-empty"),S)),popupStyle:A,getTriggerDOMNode:C,onPopupVisibleChange:N}),a)},lh=l.forwardRef(sh);function wi(e,t){var n=e.key,r;return"value"in e&&(r=e.value),n??(r!==void 0?r:"rc-index-key-".concat(t))}function va(e){return typeof e<"u"&&!Number.isNaN(e)}function bl(e,t){var n=e||{},r=n.label,o=n.value,a=n.options,s=n.groupLabel,i=r||(t?"children":"label");return{label:i,value:o||"value",options:a||"options",groupLabel:s||i}}function ch(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,o=[],a=bl(n,!1),s=a.label,i=a.value,c=a.options,u=a.groupLabel;function d(h,p){Array.isArray(h)&&h.forEach(function(f){if(p||!(c in f)){var v=f[i];o.push({key:wi(f,o.length),groupOption:p,data:f,label:f[s],value:v})}else{var y=f[u];y===void 0&&r&&(y=f.label),o.push({key:wi(f,o.length),group:!0,data:f,label:y}),d(f[c],!0)}})}return d(e,!1),o}function ya(e){var t=pe({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return nn(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}var uh=function(t,n,r){if(!n||!n.length)return null;var o=!1,a=function i(c,u){var d=Xc(u),h=d[0],p=d.slice(1);if(!h)return[c];var f=c.split(h);return o=o||f.length>1,f.reduce(function(v,y){return[].concat(at(v),at(i(y,p)))},[]).filter(Boolean)},s=a(t,n);return o?typeof r<"u"?s.slice(0,r):s:null},Ga=l.createContext(null);function dh(e){var t=e.visible,n=e.values;if(!t)return null;var r=50;return l.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(o){var a=o.label,s=o.value;return["number","string"].includes(on(a))?a:s}).join(", ")),n.length>r?", ...":null)}var hh=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],fh=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],ba=function(t){return t==="tags"||t==="multiple"},Sl=l.forwardRef(function(e,t){var n,r=e.id,o=e.prefixCls,a=e.className,s=e.showSearch,i=e.tagRender,c=e.direction,u=e.omitDomProps,d=e.displayValues,h=e.onDisplayValuesChange,p=e.emptyOptions,f=e.notFoundContent,v=f===void 0?"Not Found":f,y=e.onClear,g=e.mode,m=e.disabled,b=e.loading,S=e.getInputElement,C=e.getRawInputElement,N=e.open,O=e.defaultOpen,x=e.onDropdownVisibleChange,$=e.activeValue,w=e.onActiveValueChange,R=e.activeDescendantId,T=e.searchValue,_=e.autoClearSearchValue,z=e.onSearch,A=e.onSearchSplit,I=e.tokenSeparators,k=e.allowClear,L=e.prefix,B=e.suffixIcon,H=e.clearIcon,q=e.OptionList,j=e.animation,Y=e.transitionName,Z=e.dropdownStyle,J=e.dropdownClassName,te=e.dropdownMatchSelectWidth,re=e.dropdownRender,le=e.dropdownAlign,G=e.placement,Q=e.builtinPlacements,ee=e.getPopupContainer,V=e.showAction,W=V===void 0?[]:V,ie=e.onFocus,Se=e.onBlur,oe=e.onKeyUp,he=e.onKeyDown,Oe=e.onMouseDown,Re=Wt(e,hh),$e=ba(g),Ae=(s!==void 0?s:$e)||g==="combobox",we=pe({},Re);fh.forEach(function(dt){delete we[dt]}),u==null||u.forEach(function(dt){delete we[dt]});var je=l.useState(!1),De=me(je,2),ye=De[0],We=De[1];l.useEffect(function(){We(Us())},[]);var qe=l.useRef(null),He=l.useRef(null),Pe=l.useRef(null),Ce=l.useRef(null),Ue=l.useRef(null),Ee=l.useRef(!1),ce=Wd(),_e=me(ce,3),mt=_e[0],Fe=_e[1],Xe=_e[2];l.useImperativeHandle(t,function(){var dt,ot;return{focus:(dt=Ce.current)===null||dt===void 0?void 0:dt.focus,blur:(ot=Ce.current)===null||ot===void 0?void 0:ot.blur,scrollTo:function(tn){var Qe;return(Qe=Ue.current)===null||Qe===void 0?void 0:Qe.scrollTo(tn)},nativeElement:qe.current||He.current}});var Ve=l.useMemo(function(){var dt;if(g!=="combobox")return T;var ot=(dt=d[0])===null||dt===void 0?void 0:dt.value;return typeof ot=="string"||typeof ot=="number"?String(ot):""},[T,g,d]),Je=g==="combobox"&&typeof S=="function"&&S()||null,ke=typeof C=="function"&&C(),Ge=Yc(He,ke==null||(n=ke.props)===null||n===void 0?void 0:n.ref),ht=l.useState(!1),se=me(ht,2),de=se[0],Le=se[1];sn(function(){Le(!0)},[]);var Me=mn(!1,{defaultValue:O,value:N}),xt=me(Me,2),wt=xt[0],Mt=xt[1],Nt=de?wt:!1,an=!v&&p;(m||an&&Nt&&g==="combobox")&&(Nt=!1);var Xt=an?!1:Nt,Ie=l.useCallback(function(dt){var ot=dt!==void 0?dt:!Nt;m||(Mt(ot),Nt!==ot&&(x==null||x(ot)))},[m,Nt,Mt,x]),Be=l.useMemo(function(){return(I||[]).some(function(dt){return[`
`,`\r
`].includes(dt)})},[I]),ze=l.useContext(Ga)||{},Te=ze.maxCount,nt=ze.rawValues,vt=function(ot,en,tn){if(!($e&&va(Te)&&(nt==null?void 0:nt.size)>=Te)){var Qe=!0,tt=ot;w==null||w(null);var un=uh(ot,I,va(Te)?Te-nt.size:void 0),Kt=tn?null:un;return g!=="combobox"&&Kt&&(tt="",A==null||A(Kt),Ie(!1),Qe=!1),z&&Ve!==tt&&z(tt,{source:en?"typing":"effect"}),Qe}},Ot=function(ot){!ot||!ot.trim()||z(ot,{source:"submit"})};l.useEffect(function(){!Nt&&!$e&&g!=="combobox"&&vt("",!1,!1)},[Nt]),l.useEffect(function(){wt&&m&&Mt(!1),m&&!Ee.current&&Fe(!1)},[m]);var Tt=pl(),Rt=me(Tt,2),It=Rt[0],Gt=Rt[1],Ut=l.useRef(!1),Yt=function(ot){var en=It(),tn=ot.key,Qe=tn==="Enter";if(Qe&&(g!=="combobox"&&ot.preventDefault(),Nt||Ie(!0)),Gt(!!Ve),tn==="Backspace"&&!en&&$e&&!Ve&&d.length){for(var tt=at(d),un=null,Kt=tt.length-1;Kt>=0;Kt-=1){var Mn=tt[Kt];if(!Mn.disabled){tt.splice(Kt,1),un=Mn;break}}un&&h(tt,{type:"remove",values:[un]})}for(var Ft=arguments.length,Qt=new Array(Ft>1?Ft-1:0),vn=1;vn<Ft;vn++)Qt[vn-1]=arguments[vn];if(Nt&&(!Qe||!Ut.current)){var Pn;Qe&&(Ut.current=!0),(Pn=Ue.current)===null||Pn===void 0||Pn.onKeyDown.apply(Pn,[ot].concat(Qt))}he==null||he.apply(void 0,[ot].concat(Qt))},ct=function(ot){for(var en=arguments.length,tn=new Array(en>1?en-1:0),Qe=1;Qe<en;Qe++)tn[Qe-1]=arguments[Qe];if(Nt){var tt;(tt=Ue.current)===null||tt===void 0||tt.onKeyUp.apply(tt,[ot].concat(tn))}ot.key==="Enter"&&(Ut.current=!1),oe==null||oe.apply(void 0,[ot].concat(tn))},Ye=function(ot){var en=d.filter(function(tn){return tn!==ot});h(en,{type:"remove",values:[ot]})},Ze=function(){Ut.current=!1},ge=l.useRef(!1),xe=function(){Fe(!0),m||(ie&&!ge.current&&ie.apply(void 0,arguments),W.includes("focus")&&Ie(!0)),ge.current=!0},fe=function(){Ee.current=!0,Fe(!1,function(){ge.current=!1,Ee.current=!1,Ie(!1)}),!m&&(Ve&&(g==="tags"?z(Ve,{source:"submit"}):g==="multiple"&&z("",{source:"blur"})),Se&&Se.apply(void 0,arguments))},M=[];l.useEffect(function(){return function(){M.forEach(function(dt){return clearTimeout(dt)}),M.splice(0,M.length)}},[]);var P=function(ot){var en,tn=ot.target,Qe=(en=Pe.current)===null||en===void 0?void 0:en.getPopupElement();if(Qe&&Qe.contains(tn)){var tt=setTimeout(function(){var Ft=M.indexOf(tt);if(Ft!==-1&&M.splice(Ft,1),Xe(),!ye&&!Qe.contains(document.activeElement)){var Qt;(Qt=Ce.current)===null||Qt===void 0||Qt.focus()}});M.push(tt)}for(var un=arguments.length,Kt=new Array(un>1?un-1:0),Mn=1;Mn<un;Mn++)Kt[Mn-1]=arguments[Mn];Oe==null||Oe.apply(void 0,[ot].concat(Kt))},X=l.useState({}),ue=me(X,2),rt=ue[1];function Ke(){rt({})}var et;ke&&(et=function(ot){Ie(ot)}),Gd(function(){var dt;return[qe.current,(dt=Pe.current)===null||dt===void 0?void 0:dt.getPopupElement()]},Xt,Ie,!!ke);var it=l.useMemo(function(){return pe(pe({},e),{},{notFoundContent:v,open:Nt,triggerOpen:Xt,id:r,showSearch:Ae,multiple:$e,toggleOpen:Ie})},[e,v,Xt,Nt,r,Ae,$e,Ie]),At=!!B||b,ut;At&&(ut=l.createElement(Ro,{className:be("".concat(o,"-arrow"),K({},"".concat(o,"-arrow-loading"),b)),customizeIcon:B,customizeIconProps:{loading:b,searchValue:Ve,open:Nt,focused:mt,showSearch:Ae}}));var ft=function(){var ot;y==null||y(),(ot=Ce.current)===null||ot===void 0||ot.focus(),h([],{type:"clear",values:d}),vt("",!1,!1)},qt=Fd(o,ft,d,k,H,m,Ve,g),cn=qt.allowClear,Zt=qt.clearIcon,En=l.createElement(q,{ref:Ue}),Hn=be(o,a,K(K(K(K(K(K(K(K(K(K({},"".concat(o,"-focused"),mt),"".concat(o,"-multiple"),$e),"".concat(o,"-single"),!$e),"".concat(o,"-allow-clear"),k),"".concat(o,"-show-arrow"),At),"".concat(o,"-disabled"),m),"".concat(o,"-loading"),b),"".concat(o,"-open"),Nt),"".concat(o,"-customize-input"),Je),"".concat(o,"-show-search"),Ae)),Yn=l.createElement(lh,{ref:Pe,disabled:m,prefixCls:o,visible:Xt,popupElement:En,animation:j,transitionName:Y,dropdownStyle:Z,dropdownClassName:J,direction:c,dropdownMatchSelectWidth:te,dropdownRender:re,dropdownAlign:le,placement:G,builtinPlacements:Q,getPopupContainer:ee,empty:p,getTriggerDOMNode:function(ot){return He.current||ot},onPopupVisibleChange:et,onPopupMouseEnter:Ke},ke?l.cloneElement(ke,{ref:Ge}):l.createElement(oh,lt({},e,{domRef:He,prefixCls:o,inputElement:Je,ref:Ce,id:r,prefix:L,showSearch:Ae,autoClearSearchValue:_,mode:g,activeDescendantId:R,tagRender:i,values:d,open:Nt,onToggleOpen:Ie,activeValue:$,searchValue:Ve,onSearch:vt,onSearchSubmit:Ot,onRemove:Ye,tokenWithEnter:Be,onInputBlur:Ze}))),An;return ke?An=Yn:An=l.createElement("div",lt({className:Hn},we,{ref:qe,onMouseDown:P,onKeyDown:Yt,onKeyUp:ct,onFocus:xe,onBlur:fe}),l.createElement(dh,{visible:mt&&!Nt,values:d}),Yn,ut,cn&&Zt),l.createElement(fl.Provider,{value:it},An)}),Ua=function(){return null};Ua.isSelectOptGroup=!0;var qa=function(){return null};qa.isSelectOption=!0;var Cl=l.forwardRef(function(e,t){var n=e.height,r=e.offsetY,o=e.offsetX,a=e.children,s=e.prefixCls,i=e.onInnerResize,c=e.innerProps,u=e.rtl,d=e.extra,h={},p={display:"flex",flexDirection:"column"};return r!==void 0&&(h={height:n,position:"relative",overflow:"hidden"},p=pe(pe({},p),{},K(K(K(K(K({transform:"translateY(".concat(r,"px)")},u?"marginRight":"marginLeft",-o),"position","absolute"),"left",0),"right",0),"top",0))),l.createElement("div",{style:h},l.createElement(qs,{onResize:function(v){var y=v.offsetHeight;y&&i&&i()}},l.createElement("div",lt({style:p,className:be(K({},"".concat(s,"-holder-inner"),s)),ref:t},c),a,d)))});Cl.displayName="Filler";function gh(e){var t=e.children,n=e.setRef,r=l.useCallback(function(o){n(o)},[]);return l.cloneElement(t,{ref:r})}function ph(e,t,n,r,o,a,s,i){var c=i.getKey;return e.slice(t,n+1).map(function(u,d){var h=t+d,p=s(u,h,{style:{width:r},offsetX:o}),f=c(u);return l.createElement(gh,{key:f,setRef:function(y){return a(u,y)}},p)})}function mh(e,t,n){var r=e.length,o=t.length,a,s;if(r===0&&o===0)return null;r<o?(a=e,s=t):(a=t,s=e);var i={__EMPTY_ITEM__:!0};function c(v){return v!==void 0?n(v):i}for(var u=null,d=Math.abs(r-o)!==1,h=0;h<s.length;h+=1){var p=c(a[h]),f=c(s[h]);if(p!==f){u=h,d=d||p!==c(s[h+1]);break}}return u===null?null:{index:u,multiple:d}}function vh(e,t,n){var r=l.useState(e),o=me(r,2),a=o[0],s=o[1],i=l.useState(null),c=me(i,2),u=c[0],d=c[1];return l.useEffect(function(){var h=mh(a||[],e||[],t);(h==null?void 0:h.index)!==void 0&&d(e[h.index]),s(e)},[e]),[u]}var Ei=(typeof navigator>"u"?"undefined":on(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const xl=function(e,t,n,r){var o=l.useRef(!1),a=l.useRef(null);function s(){clearTimeout(a.current),o.current=!0,a.current=setTimeout(function(){o.current=!1},50)}var i=l.useRef({top:e,bottom:t,left:n,right:r});return i.current.top=e,i.current.bottom=t,i.current.left=n,i.current.right=r,function(c,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=c?u<0&&i.current.left||u>0&&i.current.right:u<0&&i.current.top||u>0&&i.current.bottom;return d&&h?(clearTimeout(a.current),o.current=!1):(!h||o.current)&&s(),!o.current&&h}};function yh(e,t,n,r,o,a,s){var i=l.useRef(0),c=l.useRef(null),u=l.useRef(null),d=l.useRef(!1),h=xl(t,n,r,o);function p(b,S){if(Bt.cancel(c.current),!h(!1,S)){var C=b;if(!C._virtualHandled)C._virtualHandled=!0;else return;i.current+=S,u.current=S,Ei||C.preventDefault(),c.current=Bt(function(){var N=d.current?10:1;s(i.current*N,!1),i.current=0})}}function f(b,S){s(S,!0),Ei||b.preventDefault()}var v=l.useRef(null),y=l.useRef(null);function g(b){if(e){Bt.cancel(y.current),y.current=Bt(function(){v.current=null},2);var S=b.deltaX,C=b.deltaY,N=b.shiftKey,O=S,x=C;(v.current==="sx"||!v.current&&N&&C&&!S)&&(O=C,x=0,v.current="sx");var $=Math.abs(O),w=Math.abs(x);v.current===null&&(v.current=a&&$>w?"x":"y"),v.current==="y"?p(b,x):f(b,O)}}function m(b){e&&(d.current=b.detail===u.current)}return[g,m]}function bh(e,t,n,r){var o=l.useMemo(function(){return[new Map,[]]},[e,n.id,r]),a=me(o,2),s=a[0],i=a[1],c=function(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,p=s.get(d),f=s.get(h);if(p===void 0||f===void 0)for(var v=e.length,y=i.length;y<v;y+=1){var g,m=e[y],b=t(m);s.set(b,y);var S=(g=n.get(b))!==null&&g!==void 0?g:r;if(i[y]=(i[y-1]||0)+S,b===d&&(p=y),b===h&&(f=y),p!==void 0&&f!==void 0)break}return{top:i[p-1]||0,bottom:i[f]}};return c}var Sh=function(){function e(){$o(this,e),K(this,"maps",void 0),K(this,"id",0),K(this,"diffKeys",new Set),this.maps=Object.create(null)}return Oo(e,[{key:"set",value:function(n,r){this.maps[n]=r,this.id+=1,this.diffKeys.add(n)}},{key:"get",value:function(n){return this.maps[n]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),e}();function Mi(e){var t=parseFloat(e);return isNaN(t)?0:t}function Ch(e,t,n){var r=l.useState(0),o=me(r,2),a=o[0],s=o[1],i=l.useRef(new Map),c=l.useRef(new Sh),u=l.useRef(0);function d(){u.current+=1}function h(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var v=function(){var m=!1;i.current.forEach(function(b,S){if(b&&b.offsetParent){var C=Zc(b),N=C.offsetHeight,O=getComputedStyle(C),x=O.marginTop,$=O.marginBottom,w=Mi(x),R=Mi($),T=N+w+R;c.current.get(S)!==T&&(c.current.set(S,T),m=!0)}}),m&&s(function(b){return b+1})};if(f)v();else{u.current+=1;var y=u.current;Promise.resolve().then(function(){y===u.current&&v()})}}function p(f,v){var y=e(f);i.current.get(y),v?(i.current.set(y,v),h()):i.current.delete(y)}return l.useEffect(function(){return d},[]),[p,h,c.current,a]}var Ni=14/15;function xh(e,t,n){var r=l.useRef(!1),o=l.useRef(0),a=l.useRef(0),s=l.useRef(null),i=l.useRef(null),c,u=function(f){if(r.current){var v=Math.ceil(f.touches[0].pageX),y=Math.ceil(f.touches[0].pageY),g=o.current-v,m=a.current-y,b=Math.abs(g)>Math.abs(m);b?o.current=v:a.current=y;var S=n(b,b?g:m,!1,f);S&&f.preventDefault(),clearInterval(i.current),S&&(i.current=setInterval(function(){b?g*=Ni:m*=Ni;var C=Math.floor(b?g:m);(!n(b,C,!0)||Math.abs(C)<=.1)&&clearInterval(i.current)},16))}},d=function(){r.current=!1,c()},h=function(f){c(),f.touches.length===1&&!r.current&&(r.current=!0,o.current=Math.ceil(f.touches[0].pageX),a.current=Math.ceil(f.touches[0].pageY),s.current=f.target,s.current.addEventListener("touchmove",u,{passive:!1}),s.current.addEventListener("touchend",d,{passive:!0}))};c=function(){s.current&&(s.current.removeEventListener("touchmove",u),s.current.removeEventListener("touchend",d))},sn(function(){return e&&t.current.addEventListener("touchstart",h,{passive:!0}),function(){var p;(p=t.current)===null||p===void 0||p.removeEventListener("touchstart",h),c(),clearInterval(i.current)}},[e])}function Oi(e){return Math.floor(Math.pow(e,.5))}function Sa(e,t){var n="touches"in e?e.touches[0]:e;return n[t?"pageX":"pageY"]-window[t?"scrollX":"scrollY"]}function wh(e,t,n){l.useEffect(function(){var r=t.current;if(e&&r){var o=!1,a,s,i=function(){Bt.cancel(a)},c=function p(){i(),a=Bt(function(){n(s),p()})},u=function(f){if(!f.target.draggable){var v=f;v._virtualHandled||(v._virtualHandled=!0,o=!0)}},d=function(){o=!1,i()},h=function(f){if(o){var v=Sa(f,!1),y=r.getBoundingClientRect(),g=y.top,m=y.bottom;if(v<=g){var b=g-v;s=-Oi(b),c()}else if(v>=m){var S=v-m;s=Oi(S),c()}else i()}};return r.addEventListener("mousedown",u),r.ownerDocument.addEventListener("mouseup",d),r.ownerDocument.addEventListener("mousemove",h),function(){r.removeEventListener("mousedown",u),r.ownerDocument.removeEventListener("mouseup",d),r.ownerDocument.removeEventListener("mousemove",h),i()}}},[e])}var Eh=10;function Mh(e,t,n,r,o,a,s,i){var c=l.useRef(),u=l.useState(null),d=me(u,2),h=d[0],p=d[1];return sn(function(){if(h&&h.times<Eh){if(!e.current){p(function(H){return pe({},H)});return}a();var f=h.targetAlign,v=h.originAlign,y=h.index,g=h.offset,m=e.current.clientHeight,b=!1,S=f,C=null;if(m){for(var N=f||v,O=0,x=0,$=0,w=Math.min(t.length-1,y),R=0;R<=w;R+=1){var T=o(t[R]);x=O;var _=n.get(T);$=x+(_===void 0?r:_),O=$}for(var z=N==="top"?g:m-g,A=w;A>=0;A-=1){var I=o(t[A]),k=n.get(I);if(k===void 0){b=!0;break}if(z-=k,z<=0)break}switch(N){case"top":C=x-g;break;case"bottom":C=$-m+g;break;default:{var L=e.current.scrollTop,B=L+m;x<L?S="top":$>B&&(S="bottom")}}C!==null&&s(C),C!==h.lastTop&&(b=!0)}b&&p(pe(pe({},h),{},{times:h.times+1,targetAlign:S,lastTop:C}))}},[h,e.current]),function(f){if(f==null){i();return}if(Bt.cancel(c.current),typeof f=="number")s(f);else if(f&&on(f)==="object"){var v,y=f.align;"index"in f?v=f.index:v=t.findIndex(function(b){return o(b)===f.key});var g=f.offset,m=g===void 0?0:g;p({times:0,index:v,offset:m,originAlign:y})}}}var $i=l.forwardRef(function(e,t){var n=e.prefixCls,r=e.rtl,o=e.scrollOffset,a=e.scrollRange,s=e.onStartMove,i=e.onStopMove,c=e.onScroll,u=e.horizontal,d=e.spinSize,h=e.containerSize,p=e.style,f=e.thumbStyle,v=e.showScrollBar,y=l.useState(!1),g=me(y,2),m=g[0],b=g[1],S=l.useState(null),C=me(S,2),N=C[0],O=C[1],x=l.useState(null),$=me(x,2),w=$[0],R=$[1],T=!r,_=l.useRef(),z=l.useRef(),A=l.useState(v),I=me(A,2),k=I[0],L=I[1],B=l.useRef(),H=function(){v===!0||v===!1||(clearTimeout(B.current),L(!0),B.current=setTimeout(function(){L(!1)},3e3))},q=a-h||0,j=h-d||0,Y=l.useMemo(function(){if(o===0||q===0)return 0;var V=o/q;return V*j},[o,q,j]),Z=function(W){W.stopPropagation(),W.preventDefault()},J=l.useRef({top:Y,dragging:m,pageY:N,startTop:w});J.current={top:Y,dragging:m,pageY:N,startTop:w};var te=function(W){b(!0),O(Sa(W,u)),R(J.current.top),s(),W.stopPropagation(),W.preventDefault()};l.useEffect(function(){var V=function(oe){oe.preventDefault()},W=_.current,ie=z.current;return W.addEventListener("touchstart",V,{passive:!1}),ie.addEventListener("touchstart",te,{passive:!1}),function(){W.removeEventListener("touchstart",V),ie.removeEventListener("touchstart",te)}},[]);var re=l.useRef();re.current=q;var le=l.useRef();le.current=j,l.useEffect(function(){if(m){var V,W=function(oe){var he=J.current,Oe=he.dragging,Re=he.pageY,$e=he.startTop;Bt.cancel(V);var Ae=_.current.getBoundingClientRect(),we=h/(u?Ae.width:Ae.height);if(Oe){var je=(Sa(oe,u)-Re)*we,De=$e;!T&&u?De-=je:De+=je;var ye=re.current,We=le.current,qe=We?De/We:0,He=Math.ceil(qe*ye);He=Math.max(He,0),He=Math.min(He,ye),V=Bt(function(){c(He,u)})}},ie=function(){b(!1),i()};return window.addEventListener("mousemove",W,{passive:!0}),window.addEventListener("touchmove",W,{passive:!0}),window.addEventListener("mouseup",ie,{passive:!0}),window.addEventListener("touchend",ie,{passive:!0}),function(){window.removeEventListener("mousemove",W),window.removeEventListener("touchmove",W),window.removeEventListener("mouseup",ie),window.removeEventListener("touchend",ie),Bt.cancel(V)}}},[m]),l.useEffect(function(){return H(),function(){clearTimeout(B.current)}},[o]),l.useImperativeHandle(t,function(){return{delayHidden:H}});var G="".concat(n,"-scrollbar"),Q={position:"absolute",visibility:k?null:"hidden"},ee={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(Q.height=8,Q.left=0,Q.right=0,Q.bottom=0,ee.height="100%",ee.width=d,T?ee.left=Y:ee.right=Y):(Q.width=8,Q.top=0,Q.bottom=0,T?Q.right=0:Q.left=0,ee.width="100%",ee.height=d,ee.top=Y),l.createElement("div",{ref:_,className:be(G,K(K(K({},"".concat(G,"-horizontal"),u),"".concat(G,"-vertical"),!u),"".concat(G,"-visible"),k)),style:pe(pe({},Q),p),onMouseDown:Z,onMouseMove:H},l.createElement("div",{ref:z,className:be("".concat(G,"-thumb"),K({},"".concat(G,"-thumb-moving"),m)),style:pe(pe({},ee),f),onMouseDown:te}))}),Nh=20;function Ii(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=e/t*e;return isNaN(n)&&(n=0),n=Math.max(n,Nh),Math.floor(n)}var Oh=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],$h=[],Ih={overflowY:"auto",overflowAnchor:"none"};function Ah(e,t){var n=e.prefixCls,r=n===void 0?"rc-virtual-list":n,o=e.className,a=e.height,s=e.itemHeight,i=e.fullHeight,c=i===void 0?!0:i,u=e.style,d=e.data,h=e.children,p=e.itemKey,f=e.virtual,v=e.direction,y=e.scrollWidth,g=e.component,m=g===void 0?"div":g,b=e.onScroll,S=e.onVirtualScroll,C=e.onVisibleChange,N=e.innerProps,O=e.extraRender,x=e.styles,$=e.showScrollBar,w=$===void 0?"optional":$,R=Wt(e,Oh),T=l.useCallback(function(ge){return typeof p=="function"?p(ge):ge==null?void 0:ge[p]},[p]),_=Ch(T),z=me(_,4),A=z[0],I=z[1],k=z[2],L=z[3],B=!!(f!==!1&&a&&s),H=l.useMemo(function(){return Object.values(k.maps).reduce(function(ge,xe){return ge+xe},0)},[k.id,k.maps]),q=B&&d&&(Math.max(s*d.length,H)>a||!!y),j=v==="rtl",Y=be(r,K({},"".concat(r,"-rtl"),j),o),Z=d||$h,J=l.useRef(),te=l.useRef(),re=l.useRef(),le=l.useState(0),G=me(le,2),Q=G[0],ee=G[1],V=l.useState(0),W=me(V,2),ie=W[0],Se=W[1],oe=l.useState(!1),he=me(oe,2),Oe=he[0],Re=he[1],$e=function(){Re(!0)},Ae=function(){Re(!1)},we={getKey:T};function je(ge){ee(function(xe){var fe;typeof ge=="function"?fe=ge(xe):fe=ge;var M=Le(fe);return J.current.scrollTop=M,M})}var De=l.useRef({start:0,end:Z.length}),ye=l.useRef(),We=vh(Z,T),qe=me(We,1),He=qe[0];ye.current=He;var Pe=l.useMemo(function(){if(!B)return{scrollHeight:void 0,start:0,end:Z.length-1,offset:void 0};if(!q){var ge;return{scrollHeight:((ge=te.current)===null||ge===void 0?void 0:ge.offsetHeight)||0,start:0,end:Z.length-1,offset:void 0}}for(var xe=0,fe,M,P,X=Z.length,ue=0;ue<X;ue+=1){var rt=Z[ue],Ke=T(rt),et=k.get(Ke),it=xe+(et===void 0?s:et);it>=Q&&fe===void 0&&(fe=ue,M=xe),it>Q+a&&P===void 0&&(P=ue),xe=it}return fe===void 0&&(fe=0,M=0,P=Math.ceil(a/s)),P===void 0&&(P=Z.length-1),P=Math.min(P+1,Z.length-1),{scrollHeight:xe,start:fe,end:P,offset:M}},[q,B,Q,Z,L,a]),Ce=Pe.scrollHeight,Ue=Pe.start,Ee=Pe.end,ce=Pe.offset;De.current.start=Ue,De.current.end=Ee,l.useLayoutEffect(function(){var ge=k.getRecord();if(ge.size===1){var xe=Array.from(ge)[0],fe=Z[Ue];if(fe){var M=T(fe);if(M===xe){var P=k.get(xe),X=P-s;je(function(ue){return ue+X})}}}k.resetRecord()},[Ce]);var _e=l.useState({width:0,height:a}),mt=me(_e,2),Fe=mt[0],Xe=mt[1],Ve=function(xe){Xe({width:xe.offsetWidth,height:xe.offsetHeight})},Je=l.useRef(),ke=l.useRef(),Ge=l.useMemo(function(){return Ii(Fe.width,y)},[Fe.width,y]),ht=l.useMemo(function(){return Ii(Fe.height,Ce)},[Fe.height,Ce]),se=Ce-a,de=l.useRef(se);de.current=se;function Le(ge){var xe=ge;return Number.isNaN(de.current)||(xe=Math.min(xe,de.current)),xe=Math.max(xe,0),xe}var Me=Q<=0,xt=Q>=se,wt=ie<=0,Mt=ie>=y,Nt=xl(Me,xt,wt,Mt),an=function(){return{x:j?-ie:ie,y:Q}},Xt=l.useRef(an()),Ie=Sn(function(ge){if(S){var xe=pe(pe({},an()),ge);(Xt.current.x!==xe.x||Xt.current.y!==xe.y)&&(S(xe),Xt.current=xe)}});function Be(ge,xe){var fe=ge;xe?(ha.flushSync(function(){Se(fe)}),Ie()):je(fe)}function ze(ge){var xe=ge.currentTarget.scrollTop;xe!==Q&&je(xe),b==null||b(ge),Ie()}var Te=function(xe){var fe=xe,M=y?y-Fe.width:0;return fe=Math.max(fe,0),fe=Math.min(fe,M),fe},nt=Sn(function(ge,xe){xe?(ha.flushSync(function(){Se(function(fe){var M=fe+(j?-ge:ge);return Te(M)})}),Ie()):je(function(fe){var M=fe+ge;return M})}),vt=yh(B,Me,xt,wt,Mt,!!y,nt),Ot=me(vt,2),Tt=Ot[0],Rt=Ot[1];xh(B,J,function(ge,xe,fe,M){var P=M;return Nt(ge,xe,fe)?!1:!P||!P._virtualHandled?(P&&(P._virtualHandled=!0),Tt({preventDefault:function(){},deltaX:ge?xe:0,deltaY:ge?0:xe}),!0):!1}),wh(q,J,function(ge){je(function(xe){return xe+ge})}),sn(function(){function ge(fe){var M=Me&&fe.detail<0,P=xt&&fe.detail>0;B&&!M&&!P&&fe.preventDefault()}var xe=J.current;return xe.addEventListener("wheel",Tt,{passive:!1}),xe.addEventListener("DOMMouseScroll",Rt,{passive:!0}),xe.addEventListener("MozMousePixelScroll",ge,{passive:!1}),function(){xe.removeEventListener("wheel",Tt),xe.removeEventListener("DOMMouseScroll",Rt),xe.removeEventListener("MozMousePixelScroll",ge)}},[B,Me,xt]),sn(function(){if(y){var ge=Te(ie);Se(ge),Ie({x:ge})}},[Fe.width,y]);var It=function(){var xe,fe;(xe=Je.current)===null||xe===void 0||xe.delayHidden(),(fe=ke.current)===null||fe===void 0||fe.delayHidden()},Gt=Mh(J,Z,k,s,T,function(){return I(!0)},je,It);l.useImperativeHandle(t,function(){return{nativeElement:re.current,getScrollInfo:an,scrollTo:function(xe){function fe(M){return M&&on(M)==="object"&&("left"in M||"top"in M)}fe(xe)?(xe.left!==void 0&&Se(Te(xe.left)),Gt(xe.top)):Gt(xe)}}}),sn(function(){if(C){var ge=Z.slice(Ue,Ee+1);C(ge,Z)}},[Ue,Ee,Z]);var Ut=bh(Z,T,k,s),Yt=O==null?void 0:O({start:Ue,end:Ee,virtual:q,offsetX:ie,offsetY:ce,rtl:j,getSize:Ut}),ct=ph(Z,Ue,Ee,y,ie,A,h,we),Ye=null;a&&(Ye=pe(K({},c?"height":"maxHeight",a),Ih),B&&(Ye.overflowY="hidden",y&&(Ye.overflowX="hidden"),Oe&&(Ye.pointerEvents="none")));var Ze={};return j&&(Ze.dir="rtl"),l.createElement("div",lt({ref:re,style:pe(pe({},u),{},{position:"relative"}),className:Y},Ze,R),l.createElement(qs,{onResize:Ve},l.createElement(m,{className:"".concat(r,"-holder"),style:Ye,ref:J,onScroll:ze,onMouseEnter:It},l.createElement(Cl,{prefixCls:r,height:Ce,offsetX:ie,offsetY:ce,scrollWidth:y,onInnerResize:I,ref:te,innerProps:N,rtl:j,extra:Yt},ct))),q&&Ce>a&&l.createElement($i,{ref:Je,prefixCls:r,scrollOffset:Q,scrollRange:Ce,rtl:j,onScroll:Be,onStartMove:$e,onStopMove:Ae,spinSize:ht,containerSize:Fe.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb,showScrollBar:w}),q&&y>Fe.width&&l.createElement($i,{ref:ke,prefixCls:r,scrollOffset:ie,scrollRange:y,rtl:j,onScroll:Be,onStartMove:$e,onStopMove:Ae,spinSize:Ge,containerSize:Fe.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb,showScrollBar:w}))}var Xa=l.forwardRef(Ah);Xa.displayName="List";function Ph(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var Rh=["disabled","title","children","style","className"];function Ai(e){return typeof e=="string"||typeof e=="number"}var Dh=function(t,n){var r=gl(),o=r.prefixCls,a=r.id,s=r.open,i=r.multiple,c=r.mode,u=r.searchValue,d=r.toggleOpen,h=r.notFoundContent,p=r.onPopupScroll,f=l.useContext(Ga),v=f.maxCount,y=f.flattenOptions,g=f.onActiveValue,m=f.defaultActiveFirstOption,b=f.onSelect,S=f.menuItemSelectedIcon,C=f.rawValues,N=f.fieldNames,O=f.virtual,x=f.direction,$=f.listHeight,w=f.listItemHeight,R=f.optionRender,T="".concat(o,"-item"),_=fa(function(){return y},[s,y],function(V,W){return W[0]&&V[1]!==W[1]}),z=l.useRef(null),A=l.useMemo(function(){return i&&va(v)&&(C==null?void 0:C.size)>=v},[i,v,C==null?void 0:C.size]),I=function(W){W.preventDefault()},k=function(W){var ie;(ie=z.current)===null||ie===void 0||ie.scrollTo(typeof W=="number"?{index:W}:W)},L=l.useCallback(function(V){return c==="combobox"?!1:C.has(V)},[c,at(C).toString(),C.size]),B=function(W){for(var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Se=_.length,oe=0;oe<Se;oe+=1){var he=(W+oe*ie+Se)%Se,Oe=_[he]||{},Re=Oe.group,$e=Oe.data;if(!Re&&!($e!=null&&$e.disabled)&&(L($e.value)||!A))return he}return-1},H=l.useState(function(){return B(0)}),q=me(H,2),j=q[0],Y=q[1],Z=function(W){var ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Y(W);var Se={source:ie?"keyboard":"mouse"},oe=_[W];if(!oe){g(null,-1,Se);return}g(oe.value,W,Se)};l.useEffect(function(){Z(m!==!1?B(0):-1)},[_.length,u]);var J=l.useCallback(function(V){return c==="combobox"?String(V).toLowerCase()===u.toLowerCase():C.has(V)},[c,u,at(C).toString(),C.size]);l.useEffect(function(){var V=setTimeout(function(){if(!i&&s&&C.size===1){var ie=Array.from(C)[0],Se=_.findIndex(function(oe){var he=oe.data;return he.value===ie});Se!==-1&&(Z(Se),k(Se))}});if(s){var W;(W=z.current)===null||W===void 0||W.scrollTo(void 0)}return function(){return clearTimeout(V)}},[s,u]);var te=function(W){W!==void 0&&b(W,{selected:!C.has(W)}),i||d(!1)};if(l.useImperativeHandle(n,function(){return{onKeyDown:function(W){var ie=W.which,Se=W.ctrlKey;switch(ie){case Ne.N:case Ne.P:case Ne.UP:case Ne.DOWN:{var oe=0;if(ie===Ne.UP?oe=-1:ie===Ne.DOWN?oe=1:Ph()&&Se&&(ie===Ne.N?oe=1:ie===Ne.P&&(oe=-1)),oe!==0){var he=B(j+oe,oe);k(he),Z(he,!0)}break}case Ne.TAB:case Ne.ENTER:{var Oe,Re=_[j];Re&&!(Re!=null&&(Oe=Re.data)!==null&&Oe!==void 0&&Oe.disabled)&&!A?te(Re.value):te(void 0),s&&W.preventDefault();break}case Ne.ESC:d(!1),s&&W.stopPropagation()}},onKeyUp:function(){},scrollTo:function(W){k(W)}}}),_.length===0)return l.createElement("div",{role:"listbox",id:"".concat(a,"_list"),className:"".concat(T,"-empty"),onMouseDown:I},h);var re=Object.keys(N).map(function(V){return N[V]}),le=function(W){return W.label};function G(V,W){var ie=V.group;return{role:ie?"presentation":"option",id:"".concat(a,"_list_").concat(W)}}var Q=function(W){var ie=_[W];if(!ie)return null;var Se=ie.data||{},oe=Se.value,he=ie.group,Oe=cr(Se,!0),Re=le(ie);return ie?l.createElement("div",lt({"aria-label":typeof Re=="string"&&!he?Re:null},Oe,{key:W},G(ie,W),{"aria-selected":J(oe)}),oe):null},ee={role:"listbox",id:"".concat(a,"_list")};return l.createElement(l.Fragment,null,O&&l.createElement("div",lt({},ee,{style:{height:0,width:0,overflow:"hidden"}}),Q(j-1),Q(j),Q(j+1)),l.createElement(Xa,{itemKey:"key",ref:z,data:_,height:$,itemHeight:w,fullHeight:!1,onMouseDown:I,onScroll:p,virtual:O,direction:x,innerProps:O?null:ee},function(V,W){var ie=V.group,Se=V.groupOption,oe=V.data,he=V.label,Oe=V.value,Re=oe.key;if(ie){var $e,Ae=($e=oe.title)!==null&&$e!==void 0?$e:Ai(he)?he.toString():void 0;return l.createElement("div",{className:be(T,"".concat(T,"-group"),oe.className),title:Ae},he!==void 0?he:Re)}var we=oe.disabled,je=oe.title;oe.children;var De=oe.style,ye=oe.className,We=Wt(oe,Rh),qe=hr(We,re),He=L(Oe),Pe=we||!He&&A,Ce="".concat(T,"-option"),Ue=be(T,Ce,ye,K(K(K(K({},"".concat(Ce,"-grouped"),Se),"".concat(Ce,"-active"),j===W&&!Pe),"".concat(Ce,"-disabled"),Pe),"".concat(Ce,"-selected"),He)),Ee=le(V),ce=!S||typeof S=="function"||He,_e=typeof Ee=="number"?Ee:Ee||Oe,mt=Ai(_e)?_e.toString():void 0;return je!==void 0&&(mt=je),l.createElement("div",lt({},cr(qe),O?{}:G(V,W),{"aria-selected":J(Oe),className:Ue,title:mt,onMouseMove:function(){j===W||Pe||Z(W)},onClick:function(){Pe||te(Oe)},style:De}),l.createElement("div",{className:"".concat(Ce,"-content")},typeof R=="function"?R(V,{index:W}):_e),l.isValidElement(S)||He,ce&&l.createElement(Ro,{className:"".concat(T,"-option-state"),customizeIcon:S,customizeIconProps:{value:Oe,disabled:Pe,isSelected:He}},He?"✓":null))}))},Th=l.forwardRef(Dh);const _h=function(e,t){var n=l.useRef({values:new Map,options:new Map}),r=l.useMemo(function(){var a=n.current,s=a.values,i=a.options,c=e.map(function(h){if(h.label===void 0){var p;return pe(pe({},h),{},{label:(p=s.get(h.value))===null||p===void 0?void 0:p.label})}return h}),u=new Map,d=new Map;return c.forEach(function(h){u.set(h.value,h),d.set(h.value,t.get(h.value)||i.get(h.value))}),n.current.values=u,n.current.options=d,c},[e,t]),o=l.useCallback(function(a){return t.get(a)||n.current.options.get(a)},[t]);return[r,o]};function Uo(e,t){return vl(e).join("").toUpperCase().includes(t)}const kh=function(e,t,n,r,o){return l.useMemo(function(){if(!n||r===!1)return e;var a=t.options,s=t.label,i=t.value,c=[],u=typeof r=="function",d=n.toUpperCase(),h=u?r:function(f,v){return o?Uo(v[o],d):v[a]?Uo(v[s!=="children"?s:"label"],d):Uo(v[i],d)},p=u?function(f){return ya(f)}:function(f){return f};return e.forEach(function(f){if(f[a]){var v=h(n,p(f));if(v)c.push(f);else{var y=f[a].filter(function(g){return h(n,p(g))});y.length&&c.push(pe(pe({},f),{},K({},a,y)))}return}h(n,p(f))&&c.push(f)}),c},[e,r,o,n,t])};var Pi=0,Lh=Qc();function zh(){var e;return Lh?(e=Pi,Pi+=1):e="TEST_OR_SSR",e}function wl(e){var t=l.useState(),n=me(t,2),r=n[0],o=n[1];return l.useEffect(function(){o("rc_select_".concat(zh()))},[]),e||r}var jh=["children","value"],Bh=["children"];function Hh(e){var t=e,n=t.key,r=t.props,o=r.children,a=r.value,s=Wt(r,jh);return pe({key:n,value:a!==void 0?a:n,children:o},s)}function El(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Aa(e).map(function(n,r){if(!l.isValidElement(n)||!n.type)return null;var o=n,a=o.type.isSelectOptGroup,s=o.key,i=o.props,c=i.children,u=Wt(i,Bh);return t||!a?Hh(n):pe(pe({key:"__RC_SELECT_GRP__".concat(s===null?r:s,"__"),label:s},u),{},{options:El(c)})}).filter(function(n){return n})}var Vh=function(t,n,r,o,a){return l.useMemo(function(){var s=t,i=!t;i&&(s=El(n));var c=new Map,u=new Map,d=function(f,v,y){y&&typeof y=="string"&&f.set(v[y],v)},h=function p(f){for(var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=0;y<f.length;y+=1){var g=f[y];!g[r.options]||v?(c.set(g[r.value],g),d(u,g,r.label),d(u,g,o),d(u,g,a)):p(g[r.options],!0)}};return h(s),{options:s,valueOptions:c,labelOptions:u}},[t,n,r,o,a])};function Ri(e){var t=l.useRef();t.current=e;var n=l.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}var Kh=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],Fh=["inputValue"];function Wh(e){return!e||on(e)!=="object"}var Gh=l.forwardRef(function(e,t){var n=e.id,r=e.mode,o=e.prefixCls,a=o===void 0?"rc-select":o,s=e.backfill,i=e.fieldNames,c=e.inputValue,u=e.searchValue,d=e.onSearch,h=e.autoClearSearchValue,p=h===void 0?!0:h,f=e.onSelect,v=e.onDeselect,y=e.dropdownMatchSelectWidth,g=y===void 0?!0:y,m=e.filterOption,b=e.filterSort,S=e.optionFilterProp,C=e.optionLabelProp,N=e.options,O=e.optionRender,x=e.children,$=e.defaultActiveFirstOption,w=e.menuItemSelectedIcon,R=e.virtual,T=e.direction,_=e.listHeight,z=_===void 0?200:_,A=e.listItemHeight,I=A===void 0?20:A,k=e.labelRender,L=e.value,B=e.defaultValue,H=e.labelInValue,q=e.onChange,j=e.maxCount,Y=Wt(e,Kh),Z=wl(n),J=ba(r),te=!!(!N&&x),re=l.useMemo(function(){return m===void 0&&r==="combobox"?!1:m},[m,r]),le=l.useMemo(function(){return bl(i,te)},[JSON.stringify(i),te]),G=mn("",{value:u!==void 0?u:c,postState:function(Be){return Be||""}}),Q=me(G,2),ee=Q[0],V=Q[1],W=Vh(N,x,le,S,C),ie=W.valueOptions,Se=W.labelOptions,oe=W.options,he=l.useCallback(function(Ie){var Be=vl(Ie);return Be.map(function(ze){var Te,nt,vt,Ot,Tt;if(Wh(ze))Te=ze;else{var Rt;vt=ze.key,nt=ze.label,Te=(Rt=ze.value)!==null&&Rt!==void 0?Rt:vt}var It=ie.get(Te);if(It){var Gt;nt===void 0&&(nt=It==null?void 0:It[C||le.label]),vt===void 0&&(vt=(Gt=It==null?void 0:It.key)!==null&&Gt!==void 0?Gt:Te),Ot=It==null?void 0:It.disabled,Tt=It==null?void 0:It.title}return{label:nt,value:Te,key:vt,disabled:Ot,title:Tt}})},[le,C,ie]),Oe=mn(B,{value:L}),Re=me(Oe,2),$e=Re[0],Ae=Re[1],we=l.useMemo(function(){var Ie,Be=J&&$e===null?[]:$e,ze=he(Be);return r==="combobox"&&Qd((Ie=ze[0])===null||Ie===void 0?void 0:Ie.value)?[]:ze},[$e,he,r,J]),je=_h(we,ie),De=me(je,2),ye=De[0],We=De[1],qe=l.useMemo(function(){if(!r&&ye.length===1){var Ie=ye[0];if(Ie.value===null&&(Ie.label===null||Ie.label===void 0))return[]}return ye.map(function(Be){var ze;return pe(pe({},Be),{},{label:(ze=typeof k=="function"?k(Be):Be.label)!==null&&ze!==void 0?ze:Be.value})})},[r,ye,k]),He=l.useMemo(function(){return new Set(ye.map(function(Ie){return Ie.value}))},[ye]);l.useEffect(function(){if(r==="combobox"){var Ie,Be=(Ie=ye[0])===null||Ie===void 0?void 0:Ie.value;V(Zd(Be)?String(Be):"")}},[ye]);var Pe=Ri(function(Ie,Be){var ze=Be??Ie;return K(K({},le.value,Ie),le.label,ze)}),Ce=l.useMemo(function(){if(r!=="tags")return oe;var Ie=at(oe),Be=function(Te){return ie.has(Te)};return at(ye).sort(function(ze,Te){return ze.value<Te.value?-1:1}).forEach(function(ze){var Te=ze.value;Be(Te)||Ie.push(Pe(Te,ze.label))}),Ie},[Pe,oe,ie,ye,r]),Ue=kh(Ce,le,ee,re,S),Ee=l.useMemo(function(){return r!=="tags"||!ee||Ue.some(function(Ie){return Ie[S||"value"]===ee})||Ue.some(function(Ie){return Ie[le.value]===ee})?Ue:[Pe(ee)].concat(at(Ue))},[Pe,S,r,Ue,ee,le]),ce=function Ie(Be){var ze=at(Be).sort(function(Te,nt){return b(Te,nt,{searchValue:ee})});return ze.map(function(Te){return Array.isArray(Te.options)?pe(pe({},Te),{},{options:Te.options.length>0?Ie(Te.options):Te.options}):Te})},_e=l.useMemo(function(){return b?ce(Ee):Ee},[Ee,b,ee]),mt=l.useMemo(function(){return ch(_e,{fieldNames:le,childrenAsData:te})},[_e,le,te]),Fe=function(Be){var ze=he(Be);if(Ae(ze),q&&(ze.length!==ye.length||ze.some(function(vt,Ot){var Tt;return((Tt=ye[Ot])===null||Tt===void 0?void 0:Tt.value)!==(vt==null?void 0:vt.value)}))){var Te=H?ze:ze.map(function(vt){return vt.value}),nt=ze.map(function(vt){return ya(We(vt.value))});q(J?Te:Te[0],J?nt:nt[0])}},Xe=l.useState(null),Ve=me(Xe,2),Je=Ve[0],ke=Ve[1],Ge=l.useState(0),ht=me(Ge,2),se=ht[0],de=ht[1],Le=$!==void 0?$:r!=="combobox",Me=l.useCallback(function(Ie,Be){var ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=ze.source,nt=Te===void 0?"keyboard":Te;de(Be),s&&r==="combobox"&&Ie!==null&&nt==="keyboard"&&ke(String(Ie))},[s,r]),xt=function(Be,ze,Te){var nt=function(){var Ye,Ze=We(Be);return[H?{label:Ze==null?void 0:Ze[le.label],value:Be,key:(Ye=Ze==null?void 0:Ze.key)!==null&&Ye!==void 0?Ye:Be}:Be,ya(Ze)]};if(ze&&f){var vt=nt(),Ot=me(vt,2),Tt=Ot[0],Rt=Ot[1];f(Tt,Rt)}else if(!ze&&v&&Te!=="clear"){var It=nt(),Gt=me(It,2),Ut=Gt[0],Yt=Gt[1];v(Ut,Yt)}},wt=Ri(function(Ie,Be){var ze,Te=J?Be.selected:!0;Te?ze=J?[].concat(at(ye),[Ie]):[Ie]:ze=ye.filter(function(nt){return nt.value!==Ie}),Fe(ze),xt(Ie,Te),r==="combobox"?ke(""):(!ba||p)&&(V(""),ke(""))}),Mt=function(Be,ze){Fe(Be);var Te=ze.type,nt=ze.values;(Te==="remove"||Te==="clear")&&nt.forEach(function(vt){xt(vt.value,!1,Te)})},Nt=function(Be,ze){if(V(Be),ke(null),ze.source==="submit"){var Te=(Be||"").trim();if(Te){var nt=Array.from(new Set([].concat(at(He),[Te])));Fe(nt),xt(Te,!0),V("")}return}ze.source!=="blur"&&(r==="combobox"&&Fe(Be),d==null||d(Be))},an=function(Be){var ze=Be;r!=="tags"&&(ze=Be.map(function(nt){var vt=Se.get(nt);return vt==null?void 0:vt.value}).filter(function(nt){return nt!==void 0}));var Te=Array.from(new Set([].concat(at(He),at(ze))));Fe(Te),Te.forEach(function(nt){xt(nt,!0)})},Xt=l.useMemo(function(){var Ie=R!==!1&&g!==!1;return pe(pe({},W),{},{flattenOptions:mt,onActiveValue:Me,defaultActiveFirstOption:Le,onSelect:wt,menuItemSelectedIcon:w,rawValues:He,fieldNames:le,virtual:Ie,direction:T,listHeight:z,listItemHeight:I,childrenAsData:te,maxCount:j,optionRender:O})},[j,W,mt,Me,Le,wt,w,He,le,R,g,T,z,I,te,O]);return l.createElement(Ga.Provider,{value:Xt},l.createElement(Sl,lt({},Y,{id:Z,prefixCls:a,ref:t,omitDomProps:Fh,mode:r,displayValues:qe,onDisplayValuesChange:Mt,direction:T,searchValue:ee,onSearch:Nt,autoClearSearchValue:p,onSearchSplit:an,dropdownMatchSelectWidth:g,OptionList:Th,emptyOptions:!mt.length,activeValue:Je,activeDescendantId:"".concat(Z,"_list_").concat(se)})))}),Ya=Gh;Ya.Option=qa;Ya.OptGroup=Ua;const Uh=()=>{const[,e]=Io(),[t]=Fr("Empty"),r=new or(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return l.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},l.createElement("title",null,(t==null?void 0:t.description)||"Empty"),l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("g",{transform:"translate(24 31.67)"},l.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),l.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),l.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),l.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),l.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),l.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),l.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},l.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),l.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},qh=()=>{const[,e]=Io(),[t]=Fr("Empty"),{colorFill:n,colorFillTertiary:r,colorFillQuaternary:o,colorBgContainer:a}=e,{borderColor:s,shadowColor:i,contentColor:c}=l.useMemo(()=>({borderColor:new or(n).onBackground(a).toHexString(),shadowColor:new or(r).onBackground(a).toHexString(),contentColor:new or(o).onBackground(a).toHexString()}),[n,r,o,a]);return l.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},l.createElement("title",null,(t==null?void 0:t.description)||"Empty"),l.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},l.createElement("ellipse",{fill:i,cx:"32",cy:"33",rx:"32",ry:"7"}),l.createElement("g",{fillRule:"nonzero",stroke:s},l.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),l.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:c}))))},Xh=e=>{const{componentCls:t,margin:n,marginXS:r,marginXL:o,fontSize:a,lineHeight:s}=e;return{[t]:{marginInline:r,fontSize:a,lineHeight:s,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorTextDescription},[`${t}-footer`]:{marginTop:n},"&-normal":{marginBlock:o,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},Yh=In("Empty",e=>{const{componentCls:t,controlHeightLG:n,calc:r}=e,o=rn(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[Xh(o)]});var Zh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Ml=l.createElement(Uh,null),Nl=l.createElement(qh,null),tr=e=>{const{className:t,rootClassName:n,prefixCls:r,image:o=Ml,description:a,children:s,imageStyle:i,style:c,classNames:u,styles:d}=e,h=Zh(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:p,direction:f,className:v,style:y,classNames:g,styles:m}=Ir("empty"),b=p("empty",r),[S,C,N]=Yh(b),[O]=Fr("Empty"),x=typeof a<"u"?a:O==null?void 0:O.description,$=typeof x=="string"?x:"empty";let w=null;return typeof o=="string"?w=l.createElement("img",{alt:$,src:o}):w=o,S(l.createElement("div",Object.assign({className:be(C,N,b,v,{[`${b}-normal`]:o===Nl,[`${b}-rtl`]:f==="rtl"},t,n,g.root,u==null?void 0:u.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},m.root),y),d==null?void 0:d.root),c)},h),l.createElement("div",{className:be(`${b}-image`,g.image,u==null?void 0:u.image),style:Object.assign(Object.assign(Object.assign({},i),m.image),d==null?void 0:d.image)},w),x&&l.createElement("div",{className:be(`${b}-description`,g.description,u==null?void 0:u.description),style:Object.assign(Object.assign({},m.description),d==null?void 0:d.description)},x),s&&l.createElement("div",{className:be(`${b}-footer`,g.footer,u==null?void 0:u.footer),style:Object.assign(Object.assign({},m.footer),d==null?void 0:d.footer)},s)))};tr.PRESENTED_IMAGE_DEFAULT=Ml;tr.PRESENTED_IMAGE_SIMPLE=Nl;const Ol=e=>{const{componentName:t}=e,{getPrefixCls:n}=l.useContext(Un),r=n("empty");switch(t){case"Table":case"List":return F.createElement(tr,{image:tr.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return F.createElement(tr,{image:tr.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return F.createElement(tr,null)}},Qh=e=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function $l(e,t){return e||Qh(t)}const Di=e=>{const{optionHeight:t,optionFontSize:n,optionLineHeight:r,optionPadding:o}=e;return{position:"relative",display:"block",minHeight:t,padding:o,color:e.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},Jh=e=>{const{antCls:t,componentCls:n}=e,r=`${n}-item`,o=`&${t}-slide-up-enter${t}-slide-up-enter-active`,a=`&${t}-slide-up-appear${t}-slide-up-appear-active`,s=`&${t}-slide-up-leave${t}-slide-up-leave-active`,i=`${n}-dropdown-placement-`,c=`${r}-option-selected`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},fn(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${o}${i}bottomLeft,
          ${a}${i}bottomLeft
        `]:{animationName:nu},[`
          ${o}${i}topLeft,
          ${a}${i}topLeft,
          ${o}${i}topRight,
          ${a}${i}topRight
        `]:{animationName:tu},[`${s}${i}bottomLeft`]:{animationName:eu},[`
          ${s}${i}topLeft,
          ${s}${i}topRight
        `]:{animationName:Jc},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},Di(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},yo),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},Di(e)),{color:e.colorTextDisabled})}),[`${c}:has(+ ${c})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${c}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},mi(e,"slide-up"),mi(e,"slide-down"),vi(e,"move-up"),vi(e,"move-down")]},ef=e=>{const{multipleSelectItemHeight:t,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:o}=e,a=e.max(e.calc(n).sub(r).equal(),0),s=e.max(e.calc(a).sub(o).equal(),0);return{basePadding:a,containerPadding:s,itemHeight:ve(t),itemLineHeight:ve(e.calc(t).sub(e.calc(e.lineWidth).mul(2)).equal())}},tf=e=>{const{multipleSelectItemHeight:t,selectHeight:n,lineWidth:r}=e;return e.calc(n).sub(t).div(2).sub(r).equal()},nf=e=>{const{componentCls:t,iconCls:n,borderRadiusSM:r,motionDurationSlow:o,paddingXS:a,multipleItemColorDisabled:s,multipleItemBorderColorDisabled:i,colorIcon:c,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:d}=e;return{[`${t}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${t}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:d,borderRadius:r,cursor:"default",transition:`font-size ${o}, line-height ${o}, height ${o}`,marginInlineEnd:e.calc(d).mul(2).equal(),paddingInlineStart:a,paddingInlineEnd:e.calc(a).div(2).equal(),[`${t}-disabled&`]:{color:s,borderColor:i,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(a).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},Pa()),{display:"inline-flex",alignItems:"center",color:c,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},rf=(e,t)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=e,o=`${n}-selection-overflow`,a=e.multipleSelectItemHeight,s=tf(e),i=t?`${n}-${t}`:"",c=ef(e);return{[`${n}-multiple${i}`]:Object.assign(Object.assign({},nf(e)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:c.basePadding,paddingBlock:c.containerPadding,borderRadius:e.borderRadius,[`${n}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${ve(r)} 0`,lineHeight:ve(a),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:c.itemHeight,lineHeight:ve(c.itemLineHeight)},[`${n}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:ve(a),marginBlock:r}},[`${n}-prefix`]:{marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(c.basePadding).equal()},[`${o}-item + ${o}-item,
        ${n}-prefix + ${n}-selection-wrap
      `]:{[`${n}-selection-search`]:{marginInlineStart:0},[`${n}-selection-placeholder`]:{insetInlineStart:0}},[`${o}-item-suffix`]:{minHeight:c.itemHeight,marginBlock:r},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(s).equal(),"\n          &-input,\n          &-mirror\n        ":{height:a,fontFamily:e.fontFamily,lineHeight:ve(a),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(c.basePadding).equal(),insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function qo(e,t){const{componentCls:n}=e,r=t?`${n}-${t}`:"",o={[`${n}-multiple${r}`]:{fontSize:e.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[rf(e,t),o]}const of=e=>{const{componentCls:t}=e,n=rn(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),r=rn(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[qo(e),qo(n,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${t}-selection-search`]:{marginInlineStart:2}}},qo(r,"lg")]};function Xo(e,t){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:o}=e,a=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),s=t?`${n}-${t}`:"";return{[`${n}-single${s}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},fn(e,!0)),{display:"flex",borderRadius:o,flex:"1 1 auto",[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:ve(a),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-search,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${ve(r)}`,[`${n}-selection-search-input`]:{height:a},"&:after":{lineHeight:ve(a)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${ve(r)}`,"&:after":{display:"none"}}}}}}}function af(e){const{componentCls:t}=e,n=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[Xo(e),Xo(rn(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selector`]:{padding:`0 ${ve(n)}`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:e.calc(n).add(e.calc(e.fontSize).mul(1.5)).equal()},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},Xo(rn(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const sf=e=>{const{fontSize:t,lineHeight:n,lineWidth:r,controlHeight:o,controlHeightSM:a,controlHeightLG:s,paddingXXS:i,controlPaddingHorizontal:c,zIndexPopupBase:u,colorText:d,fontWeightStrong:h,controlItemBgActive:p,controlItemBgHover:f,colorBgContainer:v,colorFillSecondary:y,colorBgContainerDisabled:g,colorTextDisabled:m,colorPrimaryHover:b,colorPrimary:S,controlOutline:C}=e,N=i*2,O=r*2,x=Math.min(o-N,o-O),$=Math.min(a-N,a-O),w=Math.min(s-N,s-O);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(i/2),zIndexPopup:u+50,optionSelectedColor:d,optionSelectedFontWeight:h,optionSelectedBg:p,optionActiveBg:f,optionPadding:`${(o-t*n)/2}px ${c}px`,optionFontSize:t,optionLineHeight:n,optionHeight:o,selectorBg:v,clearBg:v,singleItemHeightLG:s,multipleItemBg:y,multipleItemBorderColor:"transparent",multipleItemHeight:x,multipleItemHeightSM:$,multipleItemHeightLG:w,multipleSelectorBgDisabled:g,multipleItemColorDisabled:m,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(e.fontSize*1.25),hoverBorderColor:b,activeBorderColor:S,activeOutlineColor:C,selectAffixPadding:i}},Il=(e,t)=>{const{componentCls:n,antCls:r,controlOutlineWidth:o}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${ve(e.lineWidth)} ${e.lineType} ${t.borderColor}`,background:e.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,boxShadow:`0 0 0 ${ve(o)} ${t.activeOutlineColor}`,outline:0},[`${n}-prefix`]:{color:t.color}}}},Ti=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},Il(e,t))}),lf=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},Il(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor,color:e.colorText})),Ti(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline,color:e.colorError})),Ti(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),Al=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:t.bg,border:`${ve(e.lineWidth)} ${e.lineType} transparent`,color:t.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:t.hoverBg},[`${n}-focused& ${n}-selector`]:{background:e.selectorBg,borderColor:t.activeBorderColor,outline:0}}}},_i=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},Al(e,t))}),cf=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},Al(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,color:e.colorText})),_i(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),_i(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),uf=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",border:`${ve(e.lineWidth)} ${e.lineType} transparent`},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`},[`&${e.componentCls}-status-error`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorError}},[`&${e.componentCls}-status-warning`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorWarning}}}}),Pl=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{borderWidth:`0 0 ${ve(e.lineWidth)} 0`,borderStyle:`none none ${e.lineType} none`,borderColor:t.borderColor,background:e.selectorBg,borderRadius:0},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,outline:0},[`${n}-prefix`]:{color:t.color}}}},ki=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},Pl(e,t))}),df=e=>({"&-underlined":Object.assign(Object.assign(Object.assign(Object.assign({},Pl(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor,color:e.colorText})),ki(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline,color:e.colorError})),ki(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),hf=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign(Object.assign({},lf(e)),cf(e)),uf(e)),df(e))}),ff=e=>{const{componentCls:t}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},gf=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},pf=e=>{const{antCls:t,componentCls:n,inputPaddingHorizontalBase:r,iconCls:o}=e;return{[n]:Object.assign(Object.assign({},fn(e)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},ff(e)),gf(e)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},yo),{[`> ${t}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},yo),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},Pa()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[o]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${n}-prefix`]:{flex:"none",marginInlineEnd:e.selectAffixPadding},[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},[`&:hover ${n}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}}),[`${n}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}}}},mf=e=>{const{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},pf(e),af(e),of(e),Jh(e),{[`${t}-rtl`]:{direction:"rtl"}},Ra(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},Rl=In("Select",(e,t)=>{let{rootPrefixCls:n}=t;const r=rn(e,{rootPrefixCls:n,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[mf(r),hf(r)]},sf,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var vf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},yf=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:vf}))},bf=l.forwardRef(yf);function Dl(e){let{suffixIcon:t,clearIcon:n,menuItemSelectedIcon:r,removeIcon:o,loading:a,multiple:s,hasFeedback:i,prefixCls:c,showSuffixIcon:u,feedbackIcon:d,showArrow:h,componentName:p}=e;const f=n??l.createElement(ru,null),v=b=>t===null&&!i&&!h?null:l.createElement(l.Fragment,null,u!==!1&&b,i&&d);let y=null;if(t!==void 0)y=v(t);else if(a)y=v(l.createElement(Xs,{spin:!0}));else{const b=`${c}-suffix`;y=S=>{let{open:C,showSearch:N}=S;return v(C&&N?l.createElement(bd,{className:b}):l.createElement(Ys,{className:b}))}}let g=null;r!==void 0?g=r:s?g=l.createElement(bf,null):g=null;let m=null;return o!==void 0?m=o:m=l.createElement(ou,null),{clearIcon:f,suffixIcon:y,itemIcon:g,removeIcon:m}}function Tl(e,t){return t!==void 0?t:e!==null}var Sf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const _l="SECRET_COMBOBOX_MODE_DO_NOT_USE",Cf=(e,t)=>{var n;const{prefixCls:r,bordered:o,className:a,rootClassName:s,getPopupContainer:i,popupClassName:c,dropdownClassName:u,listHeight:d=256,placement:h,listItemHeight:p,size:f,disabled:v,notFoundContent:y,status:g,builtinPlacements:m,dropdownMatchSelectWidth:b,popupMatchSelectWidth:S,direction:C,style:N,allowClear:O,variant:x,dropdownStyle:$,transitionName:w,tagRender:R,maxCount:T,prefix:_}=e,z=Sf(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:A,getPrefixCls:I,renderEmpty:k,direction:L,virtual:B,popupMatchSelectWidth:H,popupOverflow:q}=l.useContext(Un),j=Ir("select"),[,Y]=Io(),Z=p??(Y==null?void 0:Y.controlHeight),J=I("select",r),te=I(),re=C??L,{compactSize:le,compactItemClassnames:G}=Ao(J,re),[Q,ee]=Va("select",x,o),V=ur(J),[W,ie,Se]=Rl(J,V),oe=l.useMemo(()=>{const{mode:Je}=e;if(Je!=="combobox")return Je===_l?"combobox":Je},[e.mode]),he=oe==="multiple"||oe==="tags",Oe=Tl(e.suffixIcon,e.showArrow),Re=(n=S??b)!==null&&n!==void 0?n:H,{status:$e,hasFeedback:Ae,isFormItemInput:we,feedbackIcon:je}=l.useContext(Wr),De=Ka($e,g);let ye;y!==void 0?ye=y:oe==="combobox"?ye=null:ye=(k==null?void 0:k("Select"))||l.createElement(Ol,{componentName:"Select"});const{suffixIcon:We,itemIcon:qe,removeIcon:He,clearIcon:Pe}=Dl(Object.assign(Object.assign({},z),{multiple:he,hasFeedback:Ae,feedbackIcon:je,showSuffixIcon:Oe,prefixCls:J,componentName:"Select"})),Ce=O===!0?{clearIcon:Pe}:O,Ue=hr(z,["suffixIcon","itemIcon"]),Ee=be(c||u,{[`${J}-dropdown-${re}`]:re==="rtl"},s,Se,V,ie),ce=Gr(Je=>{var ke;return(ke=f??le)!==null&&ke!==void 0?ke:Je}),_e=l.useContext(Ar),mt=v??_e,Fe=be({[`${J}-lg`]:ce==="large",[`${J}-sm`]:ce==="small",[`${J}-rtl`]:re==="rtl",[`${J}-${Q}`]:ee,[`${J}-in-form-item`]:we},Vr(J,De,Ae),G,j.className,a,s,Se,V,ie),Xe=l.useMemo(()=>h!==void 0?h:re==="rtl"?"bottomRight":"bottomLeft",[h,re]),[Ve]=Zs("SelectLike",$==null?void 0:$.zIndex);return W(l.createElement(Ya,Object.assign({ref:t,virtual:B,showSearch:j.showSearch},Ue,{style:Object.assign(Object.assign({},j.style),N),dropdownMatchSelectWidth:Re,transitionName:bo(te,"slide-up",w),builtinPlacements:$l(m,q),listHeight:d,listItemHeight:Z,mode:oe,prefixCls:J,placement:Xe,direction:re,prefix:_,suffixIcon:We,menuItemSelectedIcon:qe,removeIcon:He,allowClear:Ce,notFoundContent:ye,className:Fe,getPopupContainer:i||A,dropdownClassName:Ee,disabled:mt,dropdownStyle:Object.assign(Object.assign({},$),{zIndex:Ve}),maxCount:he?T:void 0,tagRender:he?R:void 0})))},gr=l.forwardRef(Cf),xf=Da(gr,"dropdownAlign");gr.SECRET_COMBOBOX_MODE_DO_NOT_USE=_l;gr.Option=qa;gr.OptGroup=Ua;gr._InternalPanelDoNotUseOrYouWillBeFired=xf;const xo=e=>e?typeof e=="function"?e():e:null,wf=e=>{const{componentCls:t,popoverColor:n,titleMinWidth:r,fontWeightStrong:o,innerPadding:a,boxShadowSecondary:s,colorTextHeading:i,borderRadiusLG:c,zIndexPopup:u,titleMarginBottom:d,colorBgElevated:h,popoverBg:p,titleBorderBottom:f,innerContentPadding:v,titlePadding:y}=e;return[{[t]:Object.assign(Object.assign({},fn(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":h,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:p,backgroundClip:"padding-box",borderRadius:c,boxShadow:s,padding:a},[`${t}-title`]:{minWidth:r,marginBottom:d,color:i,fontWeight:o,borderBottom:f,padding:y},[`${t}-inner-content`]:{color:n,padding:v}})},iu(e,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},Ef=e=>{const{componentCls:t}=e;return{[t]:su.map(n=>{const r=e[`${n}6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":r,[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{background:"transparent"}}}})}},Mf=e=>{const{lineWidth:t,controlHeight:n,fontHeight:r,padding:o,wireframe:a,zIndexPopupBase:s,borderRadiusLG:i,marginXS:c,lineType:u,colorSplit:d,paddingSM:h}=e,p=n-r,f=p/2,v=p/2-t,y=o;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:s+30},lu(e)),cu({contentRadius:i,limitVerticalRadius:!0})),{innerPadding:a?0:12,titleMarginBottom:a?0:c,titlePadding:a?`${f}px ${y}px ${v}px`:0,titleBorderBottom:a?`${t}px ${u} ${d}`:"none",innerContentPadding:a?`${h}px ${y}px`:0})},kl=In("Popover",e=>{const{colorBgElevated:t,colorText:n}=e,r=rn(e,{popoverBg:t,popoverColor:n});return[wf(r),Ef(r),au(r,"zoom-big")]},Mf,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Nf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Ll=e=>{let{title:t,content:n,prefixCls:r}=e;return!t&&!n?null:l.createElement(l.Fragment,null,t&&l.createElement("div",{className:`${r}-title`},t),n&&l.createElement("div",{className:`${r}-inner-content`},n))},Of=e=>{const{hashId:t,prefixCls:n,className:r,style:o,placement:a="top",title:s,content:i,children:c}=e,u=xo(s),d=xo(i),h=be(t,n,`${n}-pure`,`${n}-placement-${a}`,r);return l.createElement("div",{className:h,style:o},l.createElement("div",{className:`${n}-arrow`}),l.createElement(uu,Object.assign({},e,{className:t,prefixCls:n}),c||l.createElement(Ll,{prefixCls:n,title:u,content:d})))},$f=e=>{const{prefixCls:t,className:n}=e,r=Nf(e,["prefixCls","className"]),{getPrefixCls:o}=l.useContext(Un),a=o("popover",t),[s,i,c]=kl(a);return s(l.createElement(Of,Object.assign({},r,{prefixCls:a,hashId:i,className:be(n,c)})))};var If=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Af=l.forwardRef((e,t)=>{var n,r;const{prefixCls:o,title:a,content:s,overlayClassName:i,placement:c="top",trigger:u="hover",children:d,mouseEnterDelay:h=.1,mouseLeaveDelay:p=.1,onOpenChange:f,overlayStyle:v={},styles:y,classNames:g}=e,m=If(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle","styles","classNames"]),{getPrefixCls:b,className:S,style:C,classNames:N,styles:O}=Ir("popover"),x=b("popover",o),[$,w,R]=kl(x),T=b(),_=be(i,w,R,S,N.root,g==null?void 0:g.root),z=be(N.body,g==null?void 0:g.body),[A,I]=mn(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),k=(j,Y)=>{I(j,!0),f==null||f(j,Y)},L=j=>{j.keyCode===Ne.ESC&&k(!1,j)},B=j=>{k(j)},H=xo(a),q=xo(s);return $(l.createElement(Qs,Object.assign({placement:c,trigger:u,mouseEnterDelay:h,mouseLeaveDelay:p},m,{prefixCls:x,classNames:{root:_,body:z},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign({},O.root),C),v),y==null?void 0:y.root),body:Object.assign(Object.assign({},O.body),y==null?void 0:y.body)},ref:t,open:A,onOpenChange:B,overlay:H||q?l.createElement(Ll,{prefixCls:x,title:H,content:q}):null,transitionName:bo(T,"zoom-big",m.transitionName),"data-popover-inject":!0}),ga(d,{onKeyDown:j=>{var Y,Z;l.isValidElement(d)&&((Z=d==null?void 0:(Y=d.props).onKeyDown)===null||Z===void 0||Z.call(Y,j)),L(j)}})))}),zl=Af;zl._InternalPanelDoNotUseOrYouWillBeFired=$f;var Pf=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],Rf=l.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-checkbox":n,o=e.className,a=e.style,s=e.checked,i=e.disabled,c=e.defaultChecked,u=c===void 0?!1:c,d=e.type,h=d===void 0?"checkbox":d,p=e.title,f=e.onChange,v=Wt(e,Pf),y=l.useRef(null),g=l.useRef(null),m=mn(u,{value:s}),b=me(m,2),S=b[0],C=b[1];l.useImperativeHandle(t,function(){return{focus:function($){var w;(w=y.current)===null||w===void 0||w.focus($)},blur:function(){var $;($=y.current)===null||$===void 0||$.blur()},input:y.current,nativeElement:g.current}});var N=be(r,o,K(K({},"".concat(r,"-checked"),S),"".concat(r,"-disabled"),i)),O=function($){i||("checked"in e||C($.target.checked),f==null||f({target:pe(pe({},e),{},{type:h,checked:$.target.checked}),stopPropagation:function(){$.stopPropagation()},preventDefault:function(){$.preventDefault()},nativeEvent:$.nativeEvent}))};return l.createElement("span",{className:N,title:p,style:a,ref:g},l.createElement("input",lt({},v,{className:"".concat(r,"-input"),ref:y,onChange:O,disabled:i,checked:!!S,type:h})),l.createElement("span",{className:"".concat(r,"-inner")}))});function Df(e){const t=F.useRef(null),n=()=>{Bt.cancel(t.current),t.current=null};return[()=>{n(),t.current=Bt(()=>{t.current=null})},a=>{t.current&&(a.stopPropagation(),n()),e==null||e(a)}]}var Tf={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},_f=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:Tf}))},kf=l.forwardRef(_f);function hn(e,t){return e[t]}var Lf=["children"];function jl(e,t){return"".concat(e,"-").concat(t)}function zf(e){return e&&e.type&&e.type.isTreeNode}function Ur(e,t){return e??t}function wo(e){var t=e||{},n=t.title,r=t._title,o=t.key,a=t.children,s=n||"title";return{title:s,_title:r||[s],key:o||"key",children:a||"children"}}function jf(e){function t(n){var r=Aa(n);return r.map(function(o){if(!zf(o))return nn(!o,"Tree/TreeNode can only accept TreeNode as children."),null;var a=o.key,s=o.props,i=s.children,c=Wt(s,Lf),u=pe({key:a},c),d=t(i);return d.length&&(u.children=d),u}).filter(function(o){return o})}return t(e)}function Yo(e,t,n){var r=wo(n),o=r._title,a=r.key,s=r.children,i=new Set(t===!0?[]:t),c=[];function u(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return d.map(function(p,f){for(var v=jl(h?h.pos:"0",f),y=Ur(p[a],v),g,m=0;m<o.length;m+=1){var b=o[m];if(p[b]!==void 0){g=p[b];break}}var S=Object.assign(hr(p,[].concat(at(o),[a,s])),{title:g,key:y,parent:h,pos:v,children:null,data:p,isStart:[].concat(at(h?h.isStart:[]),[f===0]),isEnd:[].concat(at(h?h.isEnd:[]),[f===d.length-1])});return c.push(S),t===!0||i.has(y)?S.children=u(p[s]||[],S):S.children=[],S})}return u(e),c}function Bf(e,t,n){var r={};on(n)==="object"?r=n:r={externalGetKey:n},r=r||{};var o=r,a=o.childrenPropName,s=o.externalGetKey,i=o.fieldNames,c=wo(i),u=c.key,d=c.children,h=a||d,p;s?typeof s=="string"?p=function(y){return y[s]}:typeof s=="function"&&(p=function(y){return s(y)}):p=function(y,g){return Ur(y[u],g)};function f(v,y,g,m){var b=v?v[h]:e,S=v?jl(g.pos,y):"0",C=v?[].concat(at(m),[v]):[];if(v){var N=p(v,S),O={node:v,index:y,pos:S,key:N,parentPos:g.node?g.pos:null,level:g.level+1,nodes:C};t(O)}b&&b.forEach(function(x,$){f(x,$,{node:v,pos:S,level:g?g.level+1:-1},C)})}f(null)}function Bl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.initWrapper,r=t.processEntity,o=t.onProcessFinished,a=t.externalGetKey,s=t.childrenPropName,i=t.fieldNames,c=arguments.length>2?arguments[2]:void 0,u=a||c,d={},h={},p={posEntities:d,keyEntities:h};return n&&(p=n(p)||p),Bf(e,function(f){var v=f.node,y=f.index,g=f.pos,m=f.key,b=f.parentPos,S=f.level,C=f.nodes,N={node:v,nodes:C,index:y,key:m,pos:g,level:S},O=Ur(m,g);d[g]=N,h[O]=N,N.parent=d[b],N.parent&&(N.parent.children=N.parent.children||[],N.parent.children.push(N)),r&&r(N,p)},{externalGetKey:u,childrenPropName:s,fieldNames:i}),o&&o(p),p}function zr(e,t){var n=t.expandedKeys,r=t.selectedKeys,o=t.loadedKeys,a=t.loadingKeys,s=t.checkedKeys,i=t.halfCheckedKeys,c=t.dragOverNodeKey,u=t.dropPosition,d=t.keyEntities,h=hn(d,e),p={eventKey:e,expanded:n.indexOf(e)!==-1,selected:r.indexOf(e)!==-1,loaded:o.indexOf(e)!==-1,loading:a.indexOf(e)!==-1,checked:s.indexOf(e)!==-1,halfChecked:i.indexOf(e)!==-1,pos:String(h?h.pos:""),dragOver:c===e&&u===0,dragOverGapTop:c===e&&u===-1,dragOverGapBottom:c===e&&u===1};return p}function Vt(e){var t=e.data,n=e.expanded,r=e.selected,o=e.checked,a=e.loaded,s=e.loading,i=e.halfChecked,c=e.dragOver,u=e.dragOverGapTop,d=e.dragOverGapBottom,h=e.pos,p=e.active,f=e.eventKey,v=pe(pe({},t),{},{expanded:n,selected:r,checked:o,loaded:a,loading:s,halfChecked:i,dragOver:c,dragOverGapTop:u,dragOverGapBottom:d,pos:h,active:p,key:f});return"props"in v||Object.defineProperty(v,"props",{get:function(){return nn(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),e}}),v}function Hl(e,t){var n=new Set;return e.forEach(function(r){t.has(r)||n.add(r)}),n}function Hf(e){var t=e||{},n=t.disabled,r=t.disableCheckbox,o=t.checkable;return!!(n||r)||o===!1}function Vf(e,t,n,r){for(var o=new Set(e),a=new Set,s=0;s<=n;s+=1){var i=t.get(s)||new Set;i.forEach(function(h){var p=h.key,f=h.node,v=h.children,y=v===void 0?[]:v;o.has(p)&&!r(f)&&y.filter(function(g){return!r(g.node)}).forEach(function(g){o.add(g.key)})})}for(var c=new Set,u=n;u>=0;u-=1){var d=t.get(u)||new Set;d.forEach(function(h){var p=h.parent,f=h.node;if(!(r(f)||!h.parent||c.has(h.parent.key))){if(r(h.parent.node)){c.add(p.key);return}var v=!0,y=!1;(p.children||[]).filter(function(g){return!r(g.node)}).forEach(function(g){var m=g.key,b=o.has(m);v&&!b&&(v=!1),!y&&(b||a.has(m))&&(y=!0)}),v&&o.add(p.key),y&&a.add(p.key),c.add(p.key)}})}return{checkedKeys:Array.from(o),halfCheckedKeys:Array.from(Hl(a,o))}}function Kf(e,t,n,r,o){for(var a=new Set(e),s=new Set(t),i=0;i<=r;i+=1){var c=n.get(i)||new Set;c.forEach(function(p){var f=p.key,v=p.node,y=p.children,g=y===void 0?[]:y;!a.has(f)&&!s.has(f)&&!o(v)&&g.filter(function(m){return!o(m.node)}).forEach(function(m){a.delete(m.key)})})}s=new Set;for(var u=new Set,d=r;d>=0;d-=1){var h=n.get(d)||new Set;h.forEach(function(p){var f=p.parent,v=p.node;if(!(o(v)||!p.parent||u.has(p.parent.key))){if(o(p.parent.node)){u.add(f.key);return}var y=!0,g=!1;(f.children||[]).filter(function(m){return!o(m.node)}).forEach(function(m){var b=m.key,S=a.has(b);y&&!S&&(y=!1),!g&&(S||s.has(b))&&(g=!0)}),y||a.delete(f.key),g&&s.add(f.key),u.add(f.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Hl(s,a))}}function Er(e,t,n,r){var o=[],a;a=Hf;var s=new Set(e.filter(function(d){var h=!!hn(n,d);return h||o.push(d),h})),i=new Map,c=0;Object.keys(n).forEach(function(d){var h=n[d],p=h.level,f=i.get(p);f||(f=new Set,i.set(p,f)),f.add(h),c=Math.max(c,p)}),nn(!o.length,"Tree missing follow keys: ".concat(o.slice(0,100).map(function(d){return"'".concat(d,"'")}).join(", ")));var u;return t===!0?u=Vf(s,i,c,a):u=Kf(s,t.halfCheckedKeys,i,c,a),u}const Ff=e=>{const{checkboxCls:t}=e,n=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},fn(e)),{display:"inline-flex",flexWrap:"wrap",columnGap:e.marginXS,[`> ${e.antCls}-row`]:{flex:1}}),[n]:Object.assign(Object.assign({},fn(e)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${n}`]:{marginInlineStart:0},[`&${n}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},fn(e)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:e.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},Ta(e))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:e.checkboxSize,height:e.checkboxSize,direction:"ltr",backgroundColor:e.colorBgContainer,border:`${ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,borderCollapse:"separate",transition:`all ${e.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:e.calc(e.checkboxSize).div(14).mul(5).equal(),height:e.calc(e.checkboxSize).div(14).mul(8).equal(),border:`${ve(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`}},"& + span":{paddingInlineStart:e.paddingXS,paddingInlineEnd:e.paddingXS}})},{[`
        ${n}:not(${n}-disabled),
        ${t}:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{borderColor:e.colorPrimary}},[`${n}:not(${n}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:e.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:e.colorPrimary,borderColor:e.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`}}},[`
        ${n}-checked:not(${n}-disabled),
        ${t}-checked:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{backgroundColor:e.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:e.calc(e.fontSizeLG).div(2).equal(),height:e.calc(e.fontSizeLG).div(2).equal(),backgroundColor:e.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${e.colorBgContainer} !important`,borderColor:`${e.colorPrimary} !important`}}}},{[`${n}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:e.colorBgContainerDisabled,borderColor:e.colorBorder,"&:after":{borderColor:e.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:e.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:e.colorTextDisabled}}}]};function Za(e,t){const n=rn(t,{checkboxCls:`.${e}`,checkboxSize:t.controlInteractiveSize});return[Ff(n)]}const Vl=In("Checkbox",(e,t)=>{let{prefixCls:n}=t;return[Za(n,e)]}),Kl=F.createContext(null);var Wf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Gf=(e,t)=>{var n;const{prefixCls:r,className:o,rootClassName:a,children:s,indeterminate:i=!1,style:c,onMouseEnter:u,onMouseLeave:d,skipGroup:h=!1,disabled:p}=e,f=Wf(e,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:v,direction:y,checkbox:g}=l.useContext(Un),m=l.useContext(Kl),{isFormItemInput:b}=l.useContext(Wr),S=l.useContext(Ar),C=(n=(m==null?void 0:m.disabled)||p)!==null&&n!==void 0?n:S,N=l.useRef(f.value),O=l.useRef(null),x=$r(t,O);l.useEffect(()=>{m==null||m.registerValue(f.value)},[]),l.useEffect(()=>{if(!h)return f.value!==N.current&&(m==null||m.cancelValue(N.current),m==null||m.registerValue(f.value),N.current=f.value),()=>m==null?void 0:m.cancelValue(f.value)},[f.value]),l.useEffect(()=>{var B;!((B=O.current)===null||B===void 0)&&B.input&&(O.current.input.indeterminate=i)},[i]);const $=v("checkbox",r),w=ur($),[R,T,_]=Vl($,w),z=Object.assign({},f);m&&!h&&(z.onChange=function(){f.onChange&&f.onChange.apply(f,arguments),m.toggleOption&&m.toggleOption({label:s,value:f.value})},z.name=m.name,z.checked=m.value.includes(f.value));const A=be(`${$}-wrapper`,{[`${$}-rtl`]:y==="rtl",[`${$}-wrapper-checked`]:z.checked,[`${$}-wrapper-disabled`]:C,[`${$}-wrapper-in-form-item`]:b},g==null?void 0:g.className,o,a,_,w,T),I=be({[`${$}-indeterminate`]:i},du,T),[k,L]=Df(z.onClick);return R(l.createElement(hu,{component:"Checkbox",disabled:C},l.createElement("label",{className:A,style:Object.assign(Object.assign({},g==null?void 0:g.style),c),onMouseEnter:u,onMouseLeave:d,onClick:k},l.createElement(Rf,Object.assign({},z,{onClick:L,prefixCls:$,className:I,disabled:C,ref:x})),s!==void 0&&l.createElement("span",{className:`${$}-label`},s))))},Fl=l.forwardRef(Gf);var Uf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const qf=l.forwardRef((e,t)=>{const{defaultValue:n,children:r,options:o=[],prefixCls:a,className:s,rootClassName:i,style:c,onChange:u}=e,d=Uf(e,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:h,direction:p}=l.useContext(Un),[f,v]=l.useState(d.value||n||[]),[y,g]=l.useState([]);l.useEffect(()=>{"value"in d&&v(d.value||[])},[d.value]);const m=l.useMemo(()=>o.map(I=>typeof I=="string"||typeof I=="number"?{label:I,value:I}:I),[o]),b=I=>{g(k=>k.filter(L=>L!==I))},S=I=>{g(k=>[].concat(at(k),[I]))},C=I=>{const k=f.indexOf(I.value),L=at(f);k===-1?L.push(I.value):L.splice(k,1),"value"in d||v(L),u==null||u(L.filter(B=>y.includes(B)).sort((B,H)=>{const q=m.findIndex(Y=>Y.value===B),j=m.findIndex(Y=>Y.value===H);return q-j}))},N=h("checkbox",a),O=`${N}-group`,x=ur(N),[$,w,R]=Vl(N,x),T=hr(d,["value","disabled"]),_=o.length?m.map(I=>l.createElement(Fl,{prefixCls:N,key:I.value.toString(),disabled:"disabled"in I?I.disabled:d.disabled,value:I.value,checked:f.includes(I.value),onChange:I.onChange,className:`${O}-item`,style:I.style,title:I.title,id:I.id,required:I.required},I.label)):r,z={toggleOption:C,value:f,disabled:d.disabled,name:d.name,registerValue:S,cancelValue:b},A=be(O,{[`${O}-rtl`]:p==="rtl"},s,i,R,x,w);return $(l.createElement("div",Object.assign({className:A,style:c},T,{ref:t}),l.createElement(Kl.Provider,{value:z},_)))}),Qa=Fl;Qa.Group=qf;Qa.__ANT_CHECKBOX=!0;const Xf=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:r,lineWidth:o,textPaddingInline:a,orientationMargin:s,verticalMarginInline:i}=e;return{[t]:Object.assign(Object.assign({},fn(e)),{borderBlockStart:`${ve(o)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:i,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${ve(o)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${ve(e.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${ve(e.dividerHorizontalWithTextGutterMargin)} 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${ve(o)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-start`]:{"&::before":{width:`calc(${s} * 100%)`},"&::after":{width:`calc(100% - ${s} * 100%)`}},[`&-horizontal${t}-with-text-end`]:{"&::before":{width:`calc(100% - ${s} * 100%)`},"&::after":{width:`calc(${s} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:a},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${ve(o)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:o,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:r,borderStyle:"dotted",borderWidth:`${ve(o)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:o,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-start${t}-no-default-orientation-margin-start`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-end${t}-no-default-orientation-margin-end`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}},Yf=e=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:e.marginXS}),Zf=In("Divider",e=>{const t=rn(e,{dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG,sizePaddingEdgeHorizontal:0});return[Xf(t)]},Yf,{unitless:{orientationMargin:!0}});var Qf=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Jf=e=>{const{getPrefixCls:t,direction:n,className:r,style:o}=Ir("divider"),{prefixCls:a,type:s="horizontal",orientation:i="center",orientationMargin:c,className:u,rootClassName:d,children:h,dashed:p,variant:f="solid",plain:v,style:y}=e,g=Qf(e,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),m=t("divider",a),[b,S,C]=Zf(m),N=!!h,O=l.useMemo(()=>i==="left"?n==="rtl"?"end":"start":i==="right"?n==="rtl"?"start":"end":i,[n,i]),x=O==="start"&&c!=null,$=O==="end"&&c!=null,w=be(m,r,S,C,`${m}-${s}`,{[`${m}-with-text`]:N,[`${m}-with-text-${O}`]:N,[`${m}-dashed`]:!!p,[`${m}-${f}`]:f!=="solid",[`${m}-plain`]:!!v,[`${m}-rtl`]:n==="rtl",[`${m}-no-default-orientation-margin-start`]:x,[`${m}-no-default-orientation-margin-end`]:$},u,d),R=l.useMemo(()=>typeof c=="number"?c:/^\d+$/.test(c)?Number(c):c,[c]),T={marginInlineStart:x?R:void 0,marginInlineEnd:$?R:void 0};return b(l.createElement("div",Object.assign({className:w,style:Object.assign(Object.assign({},o),y)},g,{role:"separator"}),h&&s!=="vertical"&&l.createElement("span",{className:`${m}-inner-text`,style:T},h)))};var Li=function(t,n){if(!t)return null;var r={left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth,top:t.offsetTop,bottom:t.parentElement.clientHeight-t.clientHeight-t.offsetTop,height:t.clientHeight};return n?{left:0,right:0,width:0,top:r.top,bottom:r.bottom,height:r.height}:{left:r.left,right:r.right,width:r.width,top:0,bottom:0,height:0}},Rn=function(t){return t!==void 0?"".concat(t,"px"):void 0};function eg(e){var t=e.prefixCls,n=e.containerRef,r=e.value,o=e.getValueIndex,a=e.motionName,s=e.onMotionStart,i=e.onMotionEnd,c=e.direction,u=e.vertical,d=u===void 0?!1:u,h=l.useRef(null),p=l.useState(r),f=me(p,2),v=f[0],y=f[1],g=function(I){var k,L=o(I),B=(k=n.current)===null||k===void 0?void 0:k.querySelectorAll(".".concat(t,"-item"))[L];return(B==null?void 0:B.offsetParent)&&B},m=l.useState(null),b=me(m,2),S=b[0],C=b[1],N=l.useState(null),O=me(N,2),x=O[0],$=O[1];sn(function(){if(v!==r){var A=g(v),I=g(r),k=Li(A,d),L=Li(I,d);y(r),C(k),$(L),A&&I?s():i()}},[r]);var w=l.useMemo(function(){if(d){var A;return Rn((A=S==null?void 0:S.top)!==null&&A!==void 0?A:0)}return Rn(c==="rtl"?-(S==null?void 0:S.right):S==null?void 0:S.left)},[d,c,S]),R=l.useMemo(function(){if(d){var A;return Rn((A=x==null?void 0:x.top)!==null&&A!==void 0?A:0)}return Rn(c==="rtl"?-(x==null?void 0:x.right):x==null?void 0:x.left)},[d,c,x]),T=function(){return d?{transform:"translateY(var(--thumb-start-top))",height:"var(--thumb-start-height)"}:{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},_=function(){return d?{transform:"translateY(var(--thumb-active-top))",height:"var(--thumb-active-height)"}:{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},z=function(){C(null),$(null),i()};return!S||!x?null:l.createElement(Js,{visible:!0,motionName:a,motionAppear:!0,onAppearStart:T,onAppearActive:_,onVisibleChanged:z},function(A,I){var k=A.className,L=A.style,B=pe(pe({},L),{},{"--thumb-start-left":w,"--thumb-start-width":Rn(S==null?void 0:S.width),"--thumb-active-left":R,"--thumb-active-width":Rn(x==null?void 0:x.width),"--thumb-start-top":w,"--thumb-start-height":Rn(S==null?void 0:S.height),"--thumb-active-top":R,"--thumb-active-height":Rn(x==null?void 0:x.height)}),H={ref:$r(h,I),style:B,className:be("".concat(t,"-thumb"),k)};return l.createElement("div",H)})}var tg=["prefixCls","direction","vertical","options","disabled","defaultValue","value","name","onChange","className","motionName"];function ng(e){if(typeof e.title<"u")return e.title;if(on(e.label)!=="object"){var t;return(t=e.label)===null||t===void 0?void 0:t.toString()}}function rg(e){return e.map(function(t){if(on(t)==="object"&&t!==null){var n=ng(t);return pe(pe({},t),{},{title:n})}return{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t}})}var og=function(t){var n=t.prefixCls,r=t.className,o=t.disabled,a=t.checked,s=t.label,i=t.title,c=t.value,u=t.name,d=t.onChange,h=t.onFocus,p=t.onBlur,f=t.onKeyDown,v=t.onKeyUp,y=t.onMouseDown,g=function(b){o||d(b,c)};return l.createElement("label",{className:be(r,K({},"".concat(n,"-item-disabled"),o)),onMouseDown:y},l.createElement("input",{name:u,className:"".concat(n,"-item-input"),type:"radio",disabled:o,checked:a,onChange:g,onFocus:h,onBlur:p,onKeyDown:f,onKeyUp:v}),l.createElement("div",{className:"".concat(n,"-item-label"),title:i,"aria-selected":a},s))},ag=l.forwardRef(function(e,t){var n,r,o=e.prefixCls,a=o===void 0?"rc-segmented":o,s=e.direction,i=e.vertical,c=e.options,u=c===void 0?[]:c,d=e.disabled,h=e.defaultValue,p=e.value,f=e.name,v=e.onChange,y=e.className,g=y===void 0?"":y,m=e.motionName,b=m===void 0?"thumb-motion":m,S=Wt(e,tg),C=l.useRef(null),N=l.useMemo(function(){return $r(C,t)},[C,t]),O=l.useMemo(function(){return rg(u)},[u]),x=mn((n=O[0])===null||n===void 0?void 0:n.value,{value:p,defaultValue:h}),$=me(x,2),w=$[0],R=$[1],T=l.useState(!1),_=me(T,2),z=_[0],A=_[1],I=function(W,ie){R(ie),v==null||v(ie)},k=hr(S,["children"]),L=l.useState(!1),B=me(L,2),H=B[0],q=B[1],j=l.useState(!1),Y=me(j,2),Z=Y[0],J=Y[1],te=function(){J(!0)},re=function(){J(!1)},le=function(){q(!1)},G=function(W){W.key==="Tab"&&q(!0)},Q=function(W){var ie=O.findIndex(function(Oe){return Oe.value===w}),Se=O.length,oe=(ie+W+Se)%Se,he=O[oe];he&&(R(he.value),v==null||v(he.value))},ee=function(W){switch(W.key){case"ArrowLeft":case"ArrowUp":Q(-1);break;case"ArrowRight":case"ArrowDown":Q(1);break}};return l.createElement("div",lt({role:"radiogroup","aria-label":"segmented control",tabIndex:d?void 0:0},k,{className:be(a,(r={},K(r,"".concat(a,"-rtl"),s==="rtl"),K(r,"".concat(a,"-disabled"),d),K(r,"".concat(a,"-vertical"),i),r),g),ref:N}),l.createElement("div",{className:"".concat(a,"-group")},l.createElement(eg,{vertical:i,prefixCls:a,value:w,containerRef:C,motionName:"".concat(a,"-").concat(b),direction:s,getValueIndex:function(W){return O.findIndex(function(ie){return ie.value===W})},onMotionStart:function(){A(!0)},onMotionEnd:function(){A(!1)}}),O.map(function(V){var W;return l.createElement(og,lt({},V,{name:f,key:V.value,prefixCls:a,className:be(V.className,"".concat(a,"-item"),(W={},K(W,"".concat(a,"-item-selected"),V.value===w&&!z),K(W,"".concat(a,"-item-focused"),Z&&H&&V.value===w),W)),checked:V.value===w,onChange:I,onFocus:te,onBlur:re,onKeyDown:ee,onKeyUp:G,onMouseDown:le,disabled:!!d||!!V.disabled}))})))}),ig=ag;function zi(e,t){return{[`${e}, ${e}:hover, ${e}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function ji(e){return{backgroundColor:e.itemSelectedBg,boxShadow:e.boxShadowTertiary}}const sg=Object.assign({overflow:"hidden"},yo),lg=e=>{const{componentCls:t}=e,n=e.calc(e.controlHeight).sub(e.calc(e.trackPadding).mul(2)).equal(),r=e.calc(e.controlHeightLG).sub(e.calc(e.trackPadding).mul(2)).equal(),o=e.calc(e.controlHeightSM).sub(e.calc(e.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fn(e)),{display:"inline-block",padding:e.trackPadding,color:e.itemColor,background:e.trackBg,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`}),fu(e)),{[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",flexDirection:"row",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-vertical`]:{[`${t}-group`]:{flexDirection:"column"},[`${t}-thumb`]:{width:"100%",height:0,padding:`0 ${ve(e.paddingXXS)}`}},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${e.motionDurationMid} ${e.motionEaseInOut}`,borderRadius:e.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},ji(e)),{color:e.itemSelectedColor}),"&-focused":Object.assign({},Ta(e)),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",opacity:0,transition:`opacity ${e.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemHoverBg}},[`&:active:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:e.itemHoverColor,"&::after":{opacity:1,backgroundColor:e.itemActiveBg}},"&-label":Object.assign({minHeight:n,lineHeight:ve(n),padding:`0 ${ve(e.segmentedPaddingHorizontal)}`},sg),"&-icon + *":{marginInlineStart:e.calc(e.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},ji(e)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${ve(e.paddingXXS)} 0`,borderRadius:e.borderRadiusSM,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, height ${e.motionDurationSlow} ${e.motionEaseInOut}`,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:e.borderRadiusLG,[`${t}-item-label`]:{minHeight:r,lineHeight:ve(r),padding:`0 ${ve(e.segmentedPaddingHorizontal)}`,fontSize:e.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadius}},[`&${t}-sm`]:{borderRadius:e.borderRadiusSM,[`${t}-item-label`]:{minHeight:o,lineHeight:ve(o),padding:`0 ${ve(e.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:e.borderRadiusXS}}}),zi(`&-disabled ${t}-item`,e)),zi(`${t}-item-disabled`,e)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOut}, width ${e.motionDurationSlow} ${e.motionEaseInOut}`,willChange:"transform, width"},[`&${t}-shape-round`]:{borderRadius:9999,[`${t}-item, ${t}-thumb`]:{borderRadius:9999}}})}},cg=e=>{const{colorTextLabel:t,colorText:n,colorFillSecondary:r,colorBgElevated:o,colorFill:a,lineWidthBold:s,colorBgLayout:i}=e;return{trackPadding:s,trackBg:i,itemColor:t,itemHoverColor:n,itemHoverBg:r,itemSelectedBg:o,itemActiveBg:a,itemSelectedColor:n}},ug=In("Segmented",e=>{const{lineWidth:t,calc:n}=e,r=rn(e,{segmentedPaddingHorizontal:n(e.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:n(e.controlPaddingHorizontalSM).sub(t).equal()});return[lg(r)]},cg);var Bi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function dg(e){return typeof e=="object"&&!!(e!=null&&e.icon)}const hg=l.forwardRef((e,t)=>{const n=gu(),{prefixCls:r,className:o,rootClassName:a,block:s,options:i=[],size:c="middle",style:u,vertical:d,shape:h="default",name:p=n}=e,f=Bi(e,["prefixCls","className","rootClassName","block","options","size","style","vertical","shape","name"]),{getPrefixCls:v,direction:y,className:g,style:m}=Ir("segmented"),b=v("segmented",r),[S,C,N]=ug(b),O=Gr(c),x=l.useMemo(()=>i.map(R=>{if(dg(R)){const{icon:T,label:_}=R,z=Bi(R,["icon","label"]);return Object.assign(Object.assign({},z),{label:l.createElement(l.Fragment,null,l.createElement("span",{className:`${b}-item-icon`},T),_&&l.createElement("span",null,_))})}return R}),[i,b]),$=be(o,a,g,{[`${b}-block`]:s,[`${b}-sm`]:O==="small",[`${b}-lg`]:O==="large",[`${b}-vertical`]:d,[`${b}-shape-${h}`]:h==="round"},C,N),w=Object.assign(Object.assign({},m),u);return S(l.createElement(ig,Object.assign({},f,{name:p,className:$,style:w,options:x,ref:t,prefixCls:b,direction:y,vertical:d})))}),fg=hg,Wl=F.createContext({}),Gl=F.createContext({}),Ul=e=>{let{prefixCls:t,value:n,onChange:r}=e;const o=()=>{if(r&&n&&!n.cleared){const a=n.toHsb();a.a=0;const s=wn(a);s.cleared=!0,r(s)}};return F.createElement("div",{className:`${t}-clear`,onClick:o})},ql="hex",Xl="rgb",Yl="hsb";var gg={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},pg=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:gg}))},mg=l.forwardRef(pg);function Ca(){return typeof BigInt=="function"}function Zl(e){return!e&&e!==0&&!Number.isNaN(e)||!String(e).trim()}function ir(e){var t=e.trim(),n=t.startsWith("-");n&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var r=t||"0",o=r.split("."),a=o[0]||"0",s=o[1]||"0";a==="0"&&s==="0"&&(n=!1);var i=n?"-":"";return{negative:n,negativeStr:i,trimStr:r,integerStr:a,decimalStr:s,fullStr:"".concat(i).concat(r)}}function Ja(e){var t=String(e);return!Number.isNaN(Number(t))&&t.includes("e")}function rr(e){var t=String(e);if(Ja(e)){var n=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return r!=null&&r[1]&&(n+=r[1].length),n}return t.includes(".")&&ei(t)?t.length-t.indexOf(".")-1:0}function Do(e){var t=String(e);if(Ja(e)){if(e>Number.MAX_SAFE_INTEGER)return String(Ca()?BigInt(e).toString():Number.MAX_SAFE_INTEGER);if(e<Number.MIN_SAFE_INTEGER)return String(Ca()?BigInt(e).toString():Number.MIN_SAFE_INTEGER);t=e.toFixed(rr(t))}return ir(t).fullStr}function ei(e){return typeof e=="number"?!Number.isNaN(e):e?/^\s*-?\d+(\.\d+)?\s*$/.test(e)||/^\s*-?\d+\.\s*$/.test(e)||/^\s*-?\.\d+\s*$/.test(e):!1}var vg=function(){function e(t){if($o(this,e),K(this,"origin",""),K(this,"negative",void 0),K(this,"integer",void 0),K(this,"decimal",void 0),K(this,"decimalLen",void 0),K(this,"empty",void 0),K(this,"nan",void 0),Zl(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var n=t;if(Ja(n)&&(n=Number(n)),n=typeof n=="string"?n:Do(n),ei(n)){var r=ir(n);this.negative=r.negative;var o=r.trimStr.split(".");this.integer=BigInt(o[0]);var a=o[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}return Oo(e,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(n){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(n,"0"));return BigInt(r)}},{key:"negate",value:function(){var n=new e(this.toString());return n.negative=!n.negative,n}},{key:"cal",value:function(n,r,o){var a=Math.max(this.getDecimalStr().length,n.getDecimalStr().length),s=this.alignDecimal(a),i=n.alignDecimal(a),c=r(s,i).toString(),u=o(a),d=ir(c),h=d.negativeStr,p=d.trimStr,f="".concat(h).concat(p.padStart(u+1,"0"));return new e("".concat(f.slice(0,-u),".").concat(f.slice(-u)))}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var r=new e(n);return r.isInvalidate()?this:this.cal(r,function(o,a){return o+a},function(o){return o})}},{key:"multi",value:function(n){var r=new e(n);return this.isInvalidate()||r.isInvalidate()?new e(NaN):this.cal(r,function(o,a){return o*a},function(o){return o*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toString()===(n==null?void 0:n.toString())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":ir("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),e}(),yg=function(){function e(t){if($o(this,e),K(this,"origin",""),K(this,"number",void 0),K(this,"empty",void 0),Zl(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return Oo(e,[{key:"negate",value:function(){return new e(-this.toNumber())}},{key:"add",value:function(n){if(this.isInvalidate())return new e(n);var r=Number(n);if(Number.isNaN(r))return this;var o=this.number+r;if(o>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(o<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var a=Math.max(rr(this.number),rr(r));return new e(o.toFixed(a))}},{key:"multi",value:function(n){var r=Number(n);if(this.isInvalidate()||Number.isNaN(r))return new e(NaN);var o=this.number*r;if(o>Number.MAX_SAFE_INTEGER)return new e(Number.MAX_SAFE_INTEGER);if(o<Number.MIN_SAFE_INTEGER)return new e(Number.MIN_SAFE_INTEGER);var a=Math.max(rr(this.number),rr(r));return new e(o.toFixed(a))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(n){return this.toNumber()===(n==null?void 0:n.toNumber())}},{key:"lessEquals",value:function(n){return this.add(n.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return n?this.isInvalidate()?"":Do(this.number):this.origin}}]),e}();function On(e){return Ca()?new vg(e):new yg(e)}function mo(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e==="")return"";var o=ir(e),a=o.negativeStr,s=o.integerStr,i=o.decimalStr,c="".concat(t).concat(i),u="".concat(a).concat(s);if(n>=0){var d=Number(i[n]);if(d>=5&&!r){var h=On(e).add("".concat(a,"0.").concat("0".repeat(n)).concat(10-d));return mo(h.toString(),t,n,r)}return n===0?u:"".concat(u).concat(t).concat(i.padEnd(n,"0").slice(0,n))}return c===".0"?u:"".concat(u).concat(c)}function bg(e,t){return typeof Proxy<"u"&&e?new Proxy(e,{get:function(r,o){if(t[o])return t[o];var a=r[o];return typeof a=="function"?a.bind(r):a}}):e}function Sg(e,t){var n=l.useRef(null);function r(){try{var a=e.selectionStart,s=e.selectionEnd,i=e.value,c=i.substring(0,a),u=i.substring(s);n.current={start:a,end:s,value:i,beforeTxt:c,afterTxt:u}}catch{}}function o(){if(e&&n.current&&t)try{var a=e.value,s=n.current,i=s.beforeTxt,c=s.afterTxt,u=s.start,d=a.length;if(a.startsWith(i))d=i.length;else if(a.endsWith(c))d=a.length-n.current.afterTxt.length;else{var h=i[u-1],p=a.indexOf(h,u-1);p!==-1&&(d=p+1)}e.setSelectionRange(d,d)}catch(f){nn(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(f.message))}}return[r,o]}var Cg=function(){var t=l.useState(!1),n=me(t,2),r=n[0],o=n[1];return sn(function(){o(Us())},[]),r},xg=200,wg=600;function Eg(e){var t=e.prefixCls,n=e.upNode,r=e.downNode,o=e.upDisabled,a=e.downDisabled,s=e.onStep,i=l.useRef(),c=l.useRef([]),u=l.useRef();u.current=s;var d=function(){clearTimeout(i.current)},h=function(S,C){S.preventDefault(),d(),u.current(C);function N(){u.current(C),i.current=setTimeout(N,xg)}i.current=setTimeout(N,wg)};l.useEffect(function(){return function(){d(),c.current.forEach(function(b){return Bt.cancel(b)})}},[]);var p=Cg();if(p)return null;var f="".concat(t,"-handler"),v=be(f,"".concat(f,"-up"),K({},"".concat(f,"-up-disabled"),o)),y=be(f,"".concat(f,"-down"),K({},"".concat(f,"-down-disabled"),a)),g=function(){return c.current.push(Bt(d))},m={unselectable:"on",role:"button",onMouseUp:g,onMouseLeave:g};return l.createElement("div",{className:"".concat(f,"-wrap")},l.createElement("span",lt({},m,{onMouseDown:function(S){h(S,!0)},"aria-label":"Increase Value","aria-disabled":o,className:v}),n||l.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),l.createElement("span",lt({},m,{onMouseDown:function(S){h(S,!1)},"aria-label":"Decrease Value","aria-disabled":a,className:y}),r||l.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Hi(e){var t=typeof e=="number"?Do(e):ir(e).fullStr,n=t.includes(".");return n?ir(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:e+"0"}const Mg=function(){var e=l.useRef(0),t=function(){Bt.cancel(e.current)};return l.useEffect(function(){return t},[]),function(n){t(),e.current=Bt(function(){n()})}};var Ng=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],Og=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Vi=function(t,n){return t||n.isEmpty()?n.toString():n.toNumber()},Ki=function(t){var n=On(t);return n.isInvalidate()?null:n},$g=l.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,o=e.style,a=e.min,s=e.max,i=e.step,c=i===void 0?1:i,u=e.defaultValue,d=e.value,h=e.disabled,p=e.readOnly,f=e.upHandler,v=e.downHandler,y=e.keyboard,g=e.changeOnWheel,m=g===void 0?!1:g,b=e.controls,S=b===void 0?!0:b;e.classNames;var C=e.stringMode,N=e.parser,O=e.formatter,x=e.precision,$=e.decimalSeparator,w=e.onChange,R=e.onInput,T=e.onPressEnter,_=e.onStep,z=e.changeOnBlur,A=z===void 0?!0:z,I=e.domRef,k=Wt(e,Ng),L="".concat(n,"-input"),B=l.useRef(null),H=l.useState(!1),q=me(H,2),j=q[0],Y=q[1],Z=l.useRef(!1),J=l.useRef(!1),te=l.useRef(!1),re=l.useState(function(){return On(d??u)}),le=me(re,2),G=le[0],Q=le[1];function ee(se){d===void 0&&Q(se)}var V=l.useCallback(function(se,de){if(!de)return x>=0?x:Math.max(rr(se),rr(c))},[x,c]),W=l.useCallback(function(se){var de=String(se);if(N)return N(de);var Le=de;return $&&(Le=Le.replace($,".")),Le.replace(/[^\w.-]+/g,"")},[N,$]),ie=l.useRef(""),Se=l.useCallback(function(se,de){if(O)return O(se,{userTyping:de,input:String(ie.current)});var Le=typeof se=="number"?Do(se):se;if(!de){var Me=V(Le,de);if(ei(Le)&&($||Me>=0)){var xt=$||".";Le=mo(Le,xt,Me)}}return Le},[O,V,$]),oe=l.useState(function(){var se=u??d;return G.isInvalidate()&&["string","number"].includes(on(se))?Number.isNaN(se)?"":se:Se(G.toString(),!1)}),he=me(oe,2),Oe=he[0],Re=he[1];ie.current=Oe;function $e(se,de){Re(Se(se.isInvalidate()?se.toString(!1):se.toString(!de),de))}var Ae=l.useMemo(function(){return Ki(s)},[s,x]),we=l.useMemo(function(){return Ki(a)},[a,x]),je=l.useMemo(function(){return!Ae||!G||G.isInvalidate()?!1:Ae.lessEquals(G)},[Ae,G]),De=l.useMemo(function(){return!we||!G||G.isInvalidate()?!1:G.lessEquals(we)},[we,G]),ye=Sg(B.current,j),We=me(ye,2),qe=We[0],He=We[1],Pe=function(de){return Ae&&!de.lessEquals(Ae)?Ae:we&&!we.lessEquals(de)?we:null},Ce=function(de){return!Pe(de)},Ue=function(de,Le){var Me=de,xt=Ce(Me)||Me.isEmpty();if(!Me.isEmpty()&&!Le&&(Me=Pe(Me)||Me,xt=!0),!p&&!h&&xt){var wt=Me.toString(),Mt=V(wt,Le);return Mt>=0&&(Me=On(mo(wt,".",Mt)),Ce(Me)||(Me=On(mo(wt,".",Mt,!0)))),Me.equals(G)||(ee(Me),w==null||w(Me.isEmpty()?null:Vi(C,Me)),d===void 0&&$e(Me,Le)),Me}return G},Ee=Mg(),ce=function se(de){if(qe(),ie.current=de,Re(de),!J.current){var Le=W(de),Me=On(Le);Me.isNaN()||Ue(Me,!0)}R==null||R(de),Ee(function(){var xt=de;N||(xt=de.replace(/。/g,".")),xt!==de&&se(xt)})},_e=function(){J.current=!0},mt=function(){J.current=!1,ce(B.current.value)},Fe=function(de){ce(de.target.value)},Xe=function(de){var Le;if(!(de&&je||!de&&De)){Z.current=!1;var Me=On(te.current?Hi(c):c);de||(Me=Me.negate());var xt=(G||On(0)).add(Me.toString()),wt=Ue(xt,!1);_==null||_(Vi(C,wt),{offset:te.current?Hi(c):c,type:de?"up":"down"}),(Le=B.current)===null||Le===void 0||Le.focus()}},Ve=function(de){var Le=On(W(Oe)),Me;Le.isNaN()?Me=Ue(G,de):Me=Ue(Le,de),d!==void 0?$e(G,!1):Me.isNaN()||$e(Me,!1)},Je=function(){Z.current=!0},ke=function(de){var Le=de.key,Me=de.shiftKey;Z.current=!0,te.current=Me,Le==="Enter"&&(J.current||(Z.current=!1),Ve(!1),T==null||T(de)),y!==!1&&!J.current&&["Up","ArrowUp","Down","ArrowDown"].includes(Le)&&(Xe(Le==="Up"||Le==="ArrowUp"),de.preventDefault())},Ge=function(){Z.current=!1,te.current=!1};l.useEffect(function(){if(m&&j){var se=function(Me){Xe(Me.deltaY<0),Me.preventDefault()},de=B.current;if(de)return de.addEventListener("wheel",se,{passive:!1}),function(){return de.removeEventListener("wheel",se)}}});var ht=function(){A&&Ve(!1),Y(!1),Z.current=!1};return Ho(function(){G.isInvalidate()||$e(G,!1)},[x,O]),Ho(function(){var se=On(d);Q(se);var de=On(W(Oe));(!se.equals(de)||!Z.current||O)&&$e(se,Z.current)},[d]),Ho(function(){O&&He()},[Oe]),l.createElement("div",{ref:I,className:be(n,r,K(K(K(K(K({},"".concat(n,"-focused"),j),"".concat(n,"-disabled"),h),"".concat(n,"-readonly"),p),"".concat(n,"-not-a-number"),G.isNaN()),"".concat(n,"-out-of-range"),!G.isInvalidate()&&!Ce(G))),style:o,onFocus:function(){Y(!0)},onBlur:ht,onKeyDown:ke,onKeyUp:Ge,onCompositionStart:_e,onCompositionEnd:mt,onBeforeInput:Je},S&&l.createElement(Eg,{prefixCls:n,upNode:f,downNode:v,upDisabled:je,downDisabled:De,onStep:Xe}),l.createElement("div",{className:"".concat(L,"-wrap")},l.createElement("input",lt({autoComplete:"off",role:"spinbutton","aria-valuemin":a,"aria-valuemax":s,"aria-valuenow":G.isInvalidate()?null:G.toString(),step:c},k,{ref:$r(B,t),className:L,value:Oe,onChange:Fe,disabled:h,readOnly:p}))))}),Ig=l.forwardRef(function(e,t){var n=e.disabled,r=e.style,o=e.prefixCls,a=o===void 0?"rc-input-number":o,s=e.value,i=e.prefix,c=e.suffix,u=e.addonBefore,d=e.addonAfter,h=e.className,p=e.classNames,f=Wt(e,Og),v=l.useRef(null),y=l.useRef(null),g=l.useRef(null),m=function(S){g.current&&Cd(g.current,S)};return l.useImperativeHandle(t,function(){return bg(g.current,{focus:m,nativeElement:v.current.nativeElement||y.current})}),l.createElement(Sd,{className:h,triggerFocus:m,prefixCls:a,value:s,disabled:n,style:r,prefix:i,suffix:c,addonAfter:d,addonBefore:u,classNames:p,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:v},l.createElement($g,lt({prefixCls:a,disabled:n,ref:g,domRef:y,className:p==null?void 0:p.input},f)))});const Ag=e=>{var t;const n=(t=e.handleVisible)!==null&&t!==void 0?t:"auto",r=e.controlHeightSM-e.lineWidth*2;return Object.assign(Object.assign({},xd(e)),{controlWidth:90,handleWidth:r,handleFontSize:e.fontSize/2,handleVisible:n,handleActiveBg:e.colorFillAlter,handleBg:e.colorBgContainer,filledHandleBg:new or(e.colorFillSecondary).onBackground(e.colorBgContainer).toHexString(),handleHoverColor:e.colorPrimary,handleBorderColor:e.colorBorder,handleOpacity:n===!0?1:0,handleVisibleWidth:n===!0?r:0})},Fi=(e,t)=>{let{componentCls:n,borderRadiusSM:r,borderRadiusLG:o}=e;const a=t==="lg"?o:r;return{[`&-${t}`]:{[`${n}-handler-wrap`]:{borderStartEndRadius:a,borderEndEndRadius:a},[`${n}-handler-up`]:{borderStartEndRadius:a},[`${n}-handler-down`]:{borderEndEndRadius:a}}}},Pg=e=>{const{componentCls:t,lineWidth:n,lineType:r,borderRadius:o,inputFontSizeSM:a,inputFontSizeLG:s,controlHeightLG:i,controlHeightSM:c,colorError:u,paddingInlineSM:d,paddingBlockSM:h,paddingBlockLG:p,paddingInlineLG:f,colorTextDescription:v,motionDurationMid:y,handleHoverColor:g,handleOpacity:m,paddingInline:b,paddingBlock:S,handleBg:C,handleActiveBg:N,colorTextDisabled:O,borderRadiusSM:x,borderRadiusLG:$,controlWidth:w,handleBorderColor:R,filledHandleBg:T,lineHeightLG:_,calc:z}=e;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},fn(e)),sl(e)),{display:"inline-block",width:w,margin:0,padding:0,borderRadius:o}),Ed(e,{[`${t}-handler-wrap`]:{background:C,[`${t}-handler-down`]:{borderBlockStart:`${ve(n)} ${r} ${R}`}}})),Md(e,{[`${t}-handler-wrap`]:{background:T,[`${t}-handler-down`]:{borderBlockStart:`${ve(n)} ${r} ${R}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:C}}})),Nd(e,{[`${t}-handler-wrap`]:{background:C,[`${t}-handler-down`]:{borderBlockStart:`${ve(n)} ${r} ${R}`}}})),Od(e)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:s,lineHeight:_,borderRadius:$,[`input${t}-input`]:{height:z(i).sub(z(n).mul(2)).equal(),padding:`${ve(p)} ${ve(f)}`}},"&-sm":{padding:0,fontSize:a,borderRadius:x,[`input${t}-input`]:{height:z(c).sub(z(n).mul(2)).equal(),padding:`${ve(h)} ${ve(d)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:u}}},"&-group":Object.assign(Object.assign(Object.assign({},fn(e)),Id(e)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:$,fontSize:e.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:x}}},Ad(e)),Pd(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},fn(e)),{width:"100%",padding:`${ve(S)} ${ve(b)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:o,outline:0,transition:`all ${y} linear`,appearance:"textfield",fontSize:"inherit"}),$d(e.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:e.handleVisibleWidth,opacity:m,height:"100%",borderStartStartRadius:0,borderStartEndRadius:o,borderEndEndRadius:o,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${y}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:e.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:v,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${ve(n)} ${r} ${R}`,transition:`all ${y} linear`,"&:active":{background:N},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:g}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},Pa()),{color:v,transition:`all ${y} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:o},[`${t}-handler-down`]:{borderEndEndRadius:o}},Fi(e,"lg")),Fi(e,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:O}})}]},Rg=e=>{const{componentCls:t,paddingBlock:n,paddingInline:r,inputAffixPadding:o,controlWidth:a,borderRadiusLG:s,borderRadiusSM:i,paddingInlineLG:c,paddingInlineSM:u,paddingBlockLG:d,paddingBlockSM:h,motionDurationMid:p}=e;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${ve(n)} 0`}},sl(e)),{position:"relative",display:"inline-flex",alignItems:"center",width:a,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:s,paddingInlineStart:c,[`input${t}-input`]:{padding:`${ve(d)} 0`}},"&-sm":{borderRadius:i,paddingInlineStart:u,[`input${t}-input`]:{padding:`${ve(h)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:o},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:o,transition:`margin ${p}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:e.handleWidth,opacity:1},[`&:not(${t}-affix-wrapper-without-controls):hover ${t}-suffix`]:{marginInlineEnd:e.calc(e.handleWidth).add(r).equal()}})}},Dg=In("InputNumber",e=>{const t=rn(e,wd(e));return[Pg(t),Rg(t),Ra(t)]},Ag,{unitless:{handleOpacity:!0}});var Tg=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const Ql=l.forwardRef((e,t)=>{const{getPrefixCls:n,direction:r}=l.useContext(Un),o=l.useRef(null);l.useImperativeHandle(t,()=>o.current);const{className:a,rootClassName:s,size:i,disabled:c,prefixCls:u,addonBefore:d,addonAfter:h,prefix:p,suffix:f,bordered:v,readOnly:y,status:g,controls:m,variant:b}=e,S=Tg(e,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),C=n("input-number",u),N=ur(C),[O,x,$]=Dg(C,N),{compactSize:w,compactItemClassnames:R}=Ao(C,r);let T=l.createElement(mg,{className:`${C}-handler-up-inner`}),_=l.createElement(Ys,{className:`${C}-handler-down-inner`});const z=typeof m=="boolean"?m:void 0;typeof m=="object"&&(T=typeof m.upIcon>"u"?T:l.createElement("span",{className:`${C}-handler-up-inner`},m.upIcon),_=typeof m.downIcon>"u"?_:l.createElement("span",{className:`${C}-handler-down-inner`},m.downIcon));const{hasFeedback:A,status:I,isFormItemInput:k,feedbackIcon:L}=l.useContext(Wr),B=Ka(I,g),H=Gr(G=>{var Q;return(Q=i??w)!==null&&Q!==void 0?Q:G}),q=l.useContext(Ar),j=c??q,[Y,Z]=Va("inputNumber",b,v),J=A&&l.createElement(l.Fragment,null,L),te=be({[`${C}-lg`]:H==="large",[`${C}-sm`]:H==="small",[`${C}-rtl`]:r==="rtl",[`${C}-in-form-item`]:k},x),re=`${C}-group`,le=l.createElement(Ig,Object.assign({ref:o,disabled:j,className:be($,N,a,s,R),upHandler:T,downHandler:_,prefixCls:C,readOnly:y,controls:z,prefix:p,suffix:J||f,addonBefore:d&&l.createElement(pa,{form:!0,space:!0},d),addonAfter:h&&l.createElement(pa,{form:!0,space:!0},h),classNames:{input:te,variant:be({[`${C}-${Y}`]:Z},Vr(C,B,A)),affixWrapper:be({[`${C}-affix-wrapper-sm`]:H==="small",[`${C}-affix-wrapper-lg`]:H==="large",[`${C}-affix-wrapper-rtl`]:r==="rtl",[`${C}-affix-wrapper-without-controls`]:m===!1},x),wrapper:be({[`${re}-rtl`]:r==="rtl"},x),groupWrapper:be({[`${C}-group-wrapper-sm`]:H==="small",[`${C}-group-wrapper-lg`]:H==="large",[`${C}-group-wrapper-rtl`]:r==="rtl",[`${C}-group-wrapper-${Y}`]:Z},Vr(`${C}-group-wrapper`,B,A),x)}},S));return O(le)}),ti=Ql,_g=e=>l.createElement(pu,{theme:{components:{InputNumber:{handleVisible:!0}}}},l.createElement(Ql,Object.assign({},e)));ti._InternalPanelDoNotUseOrYouWillBeFired=_g;const sr=e=>{let{prefixCls:t,min:n=0,max:r=100,value:o,onChange:a,className:s,formatter:i}=e;const c=`${t}-steppers`,[u,d]=l.useState(o);return l.useEffect(()=>{Number.isNaN(o)||d(o)},[o]),F.createElement(ti,{className:be(c,s),min:n,max:r,value:u,formatter:i,size:"small",onChange:h=>{o||d(h||0),a==null||a(h)}})},kg=e=>{let{prefixCls:t,value:n,onChange:r}=e;const o=`${t}-alpha-input`,[a,s]=l.useState(wn(n||"#000"));l.useEffect(()=>{n&&s(n)},[n]);const i=c=>{const u=a.toHsb();u.a=(c||0)/100;const d=wn(u);n||s(d),r==null||r(d)};return F.createElement(sr,{value:_a(a),prefixCls:t,formatter:c=>`${c}%`,className:o,onChange:i})},Lg=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,zg=e=>Lg.test(`#${e}`),jg=e=>{let{prefixCls:t,value:n,onChange:r}=e;const o=`${t}-hex-input`,[a,s]=l.useState(()=>n?ao(n.toHexString()):void 0);l.useEffect(()=>{n&&s(ao(n.toHexString()))},[n]);const i=c=>{const u=c.target.value;s(ao(u)),zg(ao(u,!0))&&(r==null||r(wn(u)))};return F.createElement(Rd,{className:o,value:a,prefix:"#",onChange:i,size:"small"})},Bg=e=>{let{prefixCls:t,value:n,onChange:r}=e;const o=`${t}-hsb-input`,[a,s]=l.useState(wn(n||"#000"));l.useEffect(()=>{n&&s(n)},[n]);const i=(c,u)=>{const d=a.toHsb();d[u]=u==="h"?c:(c||0)/100;const h=wn(d);n||s(h),r==null||r(h)};return F.createElement("div",{className:o},F.createElement(sr,{max:360,min:0,value:Number(a.toHsb().h),prefixCls:t,className:o,formatter:c=>Vo(c||0).toString(),onChange:c=>i(Number(c),"h")}),F.createElement(sr,{max:100,min:0,value:Number(a.toHsb().s)*100,prefixCls:t,className:o,formatter:c=>`${Vo(c||0)}%`,onChange:c=>i(Number(c),"s")}),F.createElement(sr,{max:100,min:0,value:Number(a.toHsb().b)*100,prefixCls:t,className:o,formatter:c=>`${Vo(c||0)}%`,onChange:c=>i(Number(c),"b")}))},Hg=e=>{let{prefixCls:t,value:n,onChange:r}=e;const o=`${t}-rgb-input`,[a,s]=l.useState(wn(n||"#000"));l.useEffect(()=>{n&&s(n)},[n]);const i=(c,u)=>{const d=a.toRgb();d[u]=c||0;const h=wn(d);n||s(h),r==null||r(h)};return F.createElement("div",{className:o},F.createElement(sr,{max:255,min:0,value:Number(a.toRgb().r),prefixCls:t,className:o,onChange:c=>i(Number(c),"r")}),F.createElement(sr,{max:255,min:0,value:Number(a.toRgb().g),prefixCls:t,className:o,onChange:c=>i(Number(c),"g")}),F.createElement(sr,{max:255,min:0,value:Number(a.toRgb().b),prefixCls:t,className:o,onChange:c=>i(Number(c),"b")}))},Vg=[ql,Yl,Xl].map(e=>({value:e,label:e.toUpperCase()})),Kg=e=>{const{prefixCls:t,format:n,value:r,disabledAlpha:o,onFormatChange:a,onChange:s,disabledFormat:i}=e,[c,u]=mn(ql,{value:n,onChange:a}),d=`${t}-input`,h=f=>{u(f)},p=l.useMemo(()=>{const f={value:r,prefixCls:t,onChange:s};switch(c){case Yl:return F.createElement(Bg,Object.assign({},f));case Xl:return F.createElement(Hg,Object.assign({},f));default:return F.createElement(jg,Object.assign({},f))}},[c,t,r,s]);return F.createElement("div",{className:`${d}-container`},!i&&F.createElement(gr,{value:c,variant:"borderless",getPopupContainer:f=>f,popupMatchSelectWidth:68,placement:"bottomRight",onChange:h,className:`${t}-format-select`,size:"small",options:Vg}),F.createElement("div",{className:d},p),!o&&F.createElement(kg,{prefixCls:t,value:r,onChange:s}))};function xa(e,t,n){return(e-t)/(n-t)}function ni(e,t,n,r){var o=xa(t,n,r),a={};switch(e){case"rtl":a.right="".concat(o*100,"%"),a.transform="translateX(50%)";break;case"btt":a.bottom="".concat(o*100,"%"),a.transform="translateY(50%)";break;case"ttb":a.top="".concat(o*100,"%"),a.transform="translateY(-50%)";break;default:a.left="".concat(o*100,"%"),a.transform="translateX(-50%)";break}return a}function nr(e,t){return Array.isArray(e)?e[t]:e}var pr=l.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),Jl=l.createContext({}),Fg=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Wi=l.forwardRef(function(e,t){var n=e.prefixCls,r=e.value,o=e.valueIndex,a=e.onStartMove,s=e.onDelete,i=e.style,c=e.render,u=e.dragging,d=e.draggingDelete,h=e.onOffsetChange,p=e.onChangeComplete,f=e.onFocus,v=e.onMouseEnter,y=Wt(e,Fg),g=l.useContext(pr),m=g.min,b=g.max,S=g.direction,C=g.disabled,N=g.keyboard,O=g.range,x=g.tabIndex,$=g.ariaLabelForHandle,w=g.ariaLabelledByForHandle,R=g.ariaRequired,T=g.ariaValueTextFormatterForHandle,_=g.styles,z=g.classNames,A="".concat(n,"-handle"),I=function(te){C||a(te,o)},k=function(te){f==null||f(te,o)},L=function(te){v(te,o)},B=function(te){if(!C&&N){var re=null;switch(te.which||te.keyCode){case Ne.LEFT:re=S==="ltr"||S==="btt"?-1:1;break;case Ne.RIGHT:re=S==="ltr"||S==="btt"?1:-1;break;case Ne.UP:re=S!=="ttb"?1:-1;break;case Ne.DOWN:re=S!=="ttb"?-1:1;break;case Ne.HOME:re="min";break;case Ne.END:re="max";break;case Ne.PAGE_UP:re=2;break;case Ne.PAGE_DOWN:re=-2;break;case Ne.BACKSPACE:case Ne.DELETE:s(o);break}re!==null&&(te.preventDefault(),h(re,o))}},H=function(te){switch(te.which||te.keyCode){case Ne.LEFT:case Ne.RIGHT:case Ne.UP:case Ne.DOWN:case Ne.HOME:case Ne.END:case Ne.PAGE_UP:case Ne.PAGE_DOWN:p==null||p();break}},q=ni(S,r,m,b),j={};if(o!==null){var Y;j={tabIndex:C?null:nr(x,o),role:"slider","aria-valuemin":m,"aria-valuemax":b,"aria-valuenow":r,"aria-disabled":C,"aria-label":nr($,o),"aria-labelledby":nr(w,o),"aria-required":nr(R,o),"aria-valuetext":(Y=nr(T,o))===null||Y===void 0?void 0:Y(r),"aria-orientation":S==="ltr"||S==="rtl"?"horizontal":"vertical",onMouseDown:I,onTouchStart:I,onFocus:k,onMouseEnter:L,onKeyDown:B,onKeyUp:H}}var Z=l.createElement("div",lt({ref:t,className:be(A,K(K(K({},"".concat(A,"-").concat(o+1),o!==null&&O),"".concat(A,"-dragging"),u),"".concat(A,"-dragging-delete"),d),z.handle),style:pe(pe(pe({},q),i),_.handle)},j,y));return c&&(Z=c(Z,{index:o,prefixCls:n,value:r,dragging:u,draggingDelete:d})),Z}),Wg=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Gg=l.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,o=e.onStartMove,a=e.onOffsetChange,s=e.values,i=e.handleRender,c=e.activeHandleRender,u=e.draggingIndex,d=e.draggingDelete,h=e.onFocus,p=Wt(e,Wg),f=l.useRef({}),v=l.useState(!1),y=me(v,2),g=y[0],m=y[1],b=l.useState(-1),S=me(b,2),C=S[0],N=S[1],O=function(T){N(T),m(!0)},x=function(T,_){O(_),h==null||h(T)},$=function(T,_){O(_)};l.useImperativeHandle(t,function(){return{focus:function(T){var _;(_=f.current[T])===null||_===void 0||_.focus()},hideHelp:function(){ha.flushSync(function(){m(!1)})}}});var w=pe({prefixCls:n,onStartMove:o,onOffsetChange:a,render:i,onFocus:x,onMouseEnter:$},p);return l.createElement(l.Fragment,null,s.map(function(R,T){var _=u===T;return l.createElement(Wi,lt({ref:function(A){A?f.current[T]=A:delete f.current[T]},dragging:_,draggingDelete:_&&d,style:nr(r,T),key:T,value:R,valueIndex:T},w))}),c&&g&&l.createElement(Wi,lt({key:"a11y"},w,{value:s[C],valueIndex:null,dragging:u!==-1,draggingDelete:d,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),Ug=function(t){var n=t.prefixCls,r=t.style,o=t.children,a=t.value,s=t.onClick,i=l.useContext(pr),c=i.min,u=i.max,d=i.direction,h=i.includedStart,p=i.includedEnd,f=i.included,v="".concat(n,"-text"),y=ni(d,a,c,u);return l.createElement("span",{className:be(v,K({},"".concat(v,"-active"),f&&h<=a&&a<=p)),style:pe(pe({},y),r),onMouseDown:function(m){m.stopPropagation()},onClick:function(){s(a)}},o)},qg=function(t){var n=t.prefixCls,r=t.marks,o=t.onClick,a="".concat(n,"-mark");return r.length?l.createElement("div",{className:a},r.map(function(s){var i=s.value,c=s.style,u=s.label;return l.createElement(Ug,{key:i,prefixCls:a,style:c,value:i,onClick:o},u)})):null},Xg=function(t){var n=t.prefixCls,r=t.value,o=t.style,a=t.activeStyle,s=l.useContext(pr),i=s.min,c=s.max,u=s.direction,d=s.included,h=s.includedStart,p=s.includedEnd,f="".concat(n,"-dot"),v=d&&h<=r&&r<=p,y=pe(pe({},ni(u,r,i,c)),typeof o=="function"?o(r):o);return v&&(y=pe(pe({},y),typeof a=="function"?a(r):a)),l.createElement("span",{className:be(f,K({},"".concat(f,"-active"),v)),style:y})},Yg=function(t){var n=t.prefixCls,r=t.marks,o=t.dots,a=t.style,s=t.activeStyle,i=l.useContext(pr),c=i.min,u=i.max,d=i.step,h=l.useMemo(function(){var p=new Set;if(r.forEach(function(v){p.add(v.value)}),o&&d!==null)for(var f=c;f<=u;)p.add(f),f+=d;return Array.from(p)},[c,u,d,o,r]);return l.createElement("div",{className:"".concat(n,"-step")},h.map(function(p){return l.createElement(Xg,{prefixCls:n,key:p,value:p,style:a,activeStyle:s})}))},Gi=function(t){var n=t.prefixCls,r=t.style,o=t.start,a=t.end,s=t.index,i=t.onStartMove,c=t.replaceCls,u=l.useContext(pr),d=u.direction,h=u.min,p=u.max,f=u.disabled,v=u.range,y=u.classNames,g="".concat(n,"-track"),m=xa(o,h,p),b=xa(a,h,p),S=function(x){!f&&i&&i(x,-1)},C={};switch(d){case"rtl":C.right="".concat(m*100,"%"),C.width="".concat(b*100-m*100,"%");break;case"btt":C.bottom="".concat(m*100,"%"),C.height="".concat(b*100-m*100,"%");break;case"ttb":C.top="".concat(m*100,"%"),C.height="".concat(b*100-m*100,"%");break;default:C.left="".concat(m*100,"%"),C.width="".concat(b*100-m*100,"%")}var N=c||be(g,K(K({},"".concat(g,"-").concat(s+1),s!==null&&v),"".concat(n,"-track-draggable"),i),y.track);return l.createElement("div",{className:N,style:pe(pe({},C),r),onMouseDown:S,onTouchStart:S})},Zg=function(t){var n=t.prefixCls,r=t.style,o=t.values,a=t.startPoint,s=t.onStartMove,i=l.useContext(pr),c=i.included,u=i.range,d=i.min,h=i.styles,p=i.classNames,f=l.useMemo(function(){if(!u){if(o.length===0)return[];var y=a??d,g=o[0];return[{start:Math.min(y,g),end:Math.max(y,g)}]}for(var m=[],b=0;b<o.length-1;b+=1)m.push({start:o[b],end:o[b+1]});return m},[o,u,a,d]);if(!c)return null;var v=f!=null&&f.length&&(p.tracks||h.tracks)?l.createElement(Gi,{index:null,prefixCls:n,start:f[0].start,end:f[f.length-1].end,replaceCls:be(p.tracks,"".concat(n,"-tracks")),style:h.tracks}):null;return l.createElement(l.Fragment,null,v,f.map(function(y,g){var m=y.start,b=y.end;return l.createElement(Gi,{index:g,prefixCls:n,style:pe(pe({},nr(r,g)),h.track),start:m,end:b,key:g,onStartMove:s})}))},Qg=130;function Ui(e){var t="targetTouches"in e?e.targetTouches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function Jg(e,t,n,r,o,a,s,i,c,u,d){var h=l.useState(null),p=me(h,2),f=p[0],v=p[1],y=l.useState(-1),g=me(y,2),m=g[0],b=g[1],S=l.useState(!1),C=me(S,2),N=C[0],O=C[1],x=l.useState(n),$=me(x,2),w=$[0],R=$[1],T=l.useState(n),_=me(T,2),z=_[0],A=_[1],I=l.useRef(null),k=l.useRef(null),L=l.useRef(null),B=l.useContext(Jl),H=B.onDragStart,q=B.onDragChange;sn(function(){m===-1&&R(n)},[n,m]),l.useEffect(function(){return function(){document.removeEventListener("mousemove",I.current),document.removeEventListener("mouseup",k.current),L.current&&(L.current.removeEventListener("touchmove",I.current),L.current.removeEventListener("touchend",k.current))}},[]);var j=function(re,le,G){le!==void 0&&v(le),R(re);var Q=re;G&&(Q=re.filter(function(ee,V){return V!==m})),s(Q),q&&q({rawValues:re,deleteIndex:G?m:-1,draggingIndex:m,draggingValue:le})},Y=Sn(function(te,re,le){if(te===-1){var G=z[0],Q=z[z.length-1],ee=r-G,V=o-Q,W=re*(o-r);W=Math.max(W,ee),W=Math.min(W,V);var ie=a(G+W);W=ie-G;var Se=z.map(function(Re){return Re+W});j(Se)}else{var oe=(o-r)*re,he=at(w);he[te]=z[te];var Oe=c(he,oe,te,"dist");j(Oe.values,Oe.value,le)}}),Z=function(re,le,G){re.stopPropagation();var Q=G||n,ee=Q[le];b(le),v(ee),A(Q),R(Q),O(!1);var V=Ui(re),W=V.pageX,ie=V.pageY,Se=!1;H&&H({rawValues:Q,draggingIndex:le,draggingValue:ee});var oe=function(Re){Re.preventDefault();var $e=Ui(Re),Ae=$e.pageX,we=$e.pageY,je=Ae-W,De=we-ie,ye=e.current.getBoundingClientRect(),We=ye.width,qe=ye.height,He,Pe;switch(t){case"btt":He=-De/qe,Pe=je;break;case"ttb":He=De/qe,Pe=je;break;case"rtl":He=-je/We,Pe=De;break;default:He=je/We,Pe=De}Se=u?Math.abs(Pe)>Qg&&d<w.length:!1,O(Se),Y(le,He,Se)},he=function Oe(Re){Re.preventDefault(),document.removeEventListener("mouseup",Oe),document.removeEventListener("mousemove",oe),L.current&&(L.current.removeEventListener("touchmove",I.current),L.current.removeEventListener("touchend",k.current)),I.current=null,k.current=null,L.current=null,i(Se),b(-1),O(!1)};document.addEventListener("mouseup",he),document.addEventListener("mousemove",oe),re.currentTarget.addEventListener("touchend",he),re.currentTarget.addEventListener("touchmove",oe),I.current=oe,k.current=he,L.current=re.currentTarget},J=l.useMemo(function(){var te=at(n).sort(function(ee,V){return ee-V}),re=at(w).sort(function(ee,V){return ee-V}),le={};re.forEach(function(ee){le[ee]=(le[ee]||0)+1}),te.forEach(function(ee){le[ee]=(le[ee]||0)-1});var G=u?1:0,Q=Object.values(le).reduce(function(ee,V){return ee+Math.abs(V)},0);return Q<=G?w:n},[n,w,u]);return[m,f,N,J,Z]}function ep(e,t,n,r,o,a){var s=l.useCallback(function(f){return Math.max(e,Math.min(t,f))},[e,t]),i=l.useCallback(function(f){if(n!==null){var v=e+Math.round((s(f)-e)/n)*n,y=function(S){return(String(S).split(".")[1]||"").length},g=Math.max(y(n),y(t),y(e)),m=Number(v.toFixed(g));return e<=m&&m<=t?m:null}return null},[n,e,t,s]),c=l.useCallback(function(f){var v=s(f),y=r.map(function(b){return b.value});n!==null&&y.push(i(f)),y.push(e,t);var g=y[0],m=t-e;return y.forEach(function(b){var S=Math.abs(v-b);S<=m&&(g=b,m=S)}),g},[e,t,r,n,s,i]),u=function f(v,y,g){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof y=="number"){var b,S=v[g],C=S+y,N=[];r.forEach(function(R){N.push(R.value)}),N.push(e,t),N.push(i(S));var O=y>0?1:-1;m==="unit"?N.push(i(S+O*n)):N.push(i(C)),N=N.filter(function(R){return R!==null}).filter(function(R){return y<0?R<=S:R>=S}),m==="unit"&&(N=N.filter(function(R){return R!==S}));var x=m==="unit"?S:C;b=N[0];var $=Math.abs(b-x);if(N.forEach(function(R){var T=Math.abs(R-x);T<$&&(b=R,$=T)}),b===void 0)return y<0?e:t;if(m==="dist")return b;if(Math.abs(y)>1){var w=at(v);return w[g]=b,f(w,y-O,g,m)}return b}else{if(y==="min")return e;if(y==="max")return t}},d=function(v,y,g){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",b=v[g],S=u(v,y,g,m);return{value:S,changed:S!==b}},h=function(v){return a===null&&v===0||typeof a=="number"&&v<a},p=function(v,y,g){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",b=v.map(c),S=b[g],C=u(b,y,g,m);if(b[g]=C,o===!1){var N=a||0;g>0&&b[g-1]!==S&&(b[g]=Math.max(b[g],b[g-1]+N)),g<b.length-1&&b[g+1]!==S&&(b[g]=Math.min(b[g],b[g+1]-N))}else if(typeof a=="number"||a===null){for(var O=g+1;O<b.length;O+=1)for(var x=!0;h(b[O]-b[O-1])&&x;){var $=d(b,1,O);b[O]=$.value,x=$.changed}for(var w=g;w>0;w-=1)for(var R=!0;h(b[w]-b[w-1])&&R;){var T=d(b,-1,w-1);b[w-1]=T.value,R=T.changed}for(var _=b.length-1;_>0;_-=1)for(var z=!0;h(b[_]-b[_-1])&&z;){var A=d(b,-1,_-1);b[_-1]=A.value,z=A.changed}for(var I=0;I<b.length-1;I+=1)for(var k=!0;h(b[I+1]-b[I])&&k;){var L=d(b,1,I+1);b[I+1]=L.value,k=L.changed}}return{value:b[g],values:b}};return[c,p]}function tp(e){return l.useMemo(function(){if(e===!0||!e)return[!!e,!1,!1,0];var t=e.editable,n=e.draggableTrack,r=e.minCount,o=e.maxCount;return[!0,t,!t&&n,r||0,o]},[e])}var np=l.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-slider":n,o=e.className,a=e.style,s=e.classNames,i=e.styles,c=e.id,u=e.disabled,d=u===void 0?!1:u,h=e.keyboard,p=h===void 0?!0:h,f=e.autoFocus,v=e.onFocus,y=e.onBlur,g=e.min,m=g===void 0?0:g,b=e.max,S=b===void 0?100:b,C=e.step,N=C===void 0?1:C,O=e.value,x=e.defaultValue,$=e.range,w=e.count,R=e.onChange,T=e.onBeforeChange,_=e.onAfterChange,z=e.onChangeComplete,A=e.allowCross,I=A===void 0?!0:A,k=e.pushable,L=k===void 0?!1:k,B=e.reverse,H=e.vertical,q=e.included,j=q===void 0?!0:q,Y=e.startPoint,Z=e.trackStyle,J=e.handleStyle,te=e.railStyle,re=e.dotStyle,le=e.activeDotStyle,G=e.marks,Q=e.dots,ee=e.handleRender,V=e.activeHandleRender,W=e.track,ie=e.tabIndex,Se=ie===void 0?0:ie,oe=e.ariaLabelForHandle,he=e.ariaLabelledByForHandle,Oe=e.ariaRequired,Re=e.ariaValueTextFormatterForHandle,$e=l.useRef(null),Ae=l.useRef(null),we=l.useMemo(function(){return H?B?"ttb":"btt":B?"rtl":"ltr"},[B,H]),je=tp($),De=me(je,5),ye=De[0],We=De[1],qe=De[2],He=De[3],Pe=De[4],Ce=l.useMemo(function(){return isFinite(m)?m:0},[m]),Ue=l.useMemo(function(){return isFinite(S)?S:100},[S]),Ee=l.useMemo(function(){return N!==null&&N<=0?1:N},[N]),ce=l.useMemo(function(){return typeof L=="boolean"?L?Ee:!1:L>=0?L:!1},[L,Ee]),_e=l.useMemo(function(){return Object.keys(G||{}).map(function(fe){var M=G[fe],P={value:Number(fe)};return M&&on(M)==="object"&&!l.isValidElement(M)&&("label"in M||"style"in M)?(P.style=M.style,P.label=M.label):P.label=M,P}).filter(function(fe){var M=fe.label;return M||typeof M=="number"}).sort(function(fe,M){return fe.value-M.value})},[G]),mt=ep(Ce,Ue,Ee,_e,I,ce),Fe=me(mt,2),Xe=Fe[0],Ve=Fe[1],Je=mn(x,{value:O}),ke=me(Je,2),Ge=ke[0],ht=ke[1],se=l.useMemo(function(){var fe=Ge==null?[]:Array.isArray(Ge)?Ge:[Ge],M=me(fe,1),P=M[0],X=P===void 0?Ce:P,ue=Ge===null?[]:[X];if(ye){if(ue=at(fe),w||Ge===void 0){var rt=w>=0?w+1:2;for(ue=ue.slice(0,rt);ue.length<rt;){var Ke;ue.push((Ke=ue[ue.length-1])!==null&&Ke!==void 0?Ke:Ce)}}ue.sort(function(et,it){return et-it})}return ue.forEach(function(et,it){ue[it]=Xe(et)}),ue},[Ge,ye,Ce,w,Xe]),de=function(M){return ye?M:M[0]},Le=Sn(function(fe){var M=at(fe).sort(function(P,X){return P-X});R&&!mu(M,se,!0)&&R(de(M)),ht(M)}),Me=Sn(function(fe){fe&&$e.current.hideHelp();var M=de(se);_==null||_(M),nn(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),z==null||z(M)}),xt=function(M){if(!(d||!We||se.length<=He)){var P=at(se);P.splice(M,1),T==null||T(de(P)),Le(P);var X=Math.max(0,M-1);$e.current.hideHelp(),$e.current.focus(X)}},wt=Jg(Ae,we,se,Ce,Ue,Xe,Le,Me,Ve,We,He),Mt=me(wt,5),Nt=Mt[0],an=Mt[1],Xt=Mt[2],Ie=Mt[3],Be=Mt[4],ze=function(M,P){if(!d){var X=at(se),ue=0,rt=0,Ke=Ue-Ce;se.forEach(function(ft,qt){var cn=Math.abs(M-ft);cn<=Ke&&(Ke=cn,ue=qt),ft<M&&(rt=qt)});var et=ue;We&&Ke!==0&&(!Pe||se.length<Pe)?(X.splice(rt+1,0,M),et=rt+1):X[ue]=M,ye&&!se.length&&w===void 0&&X.push(M);var it=de(X);if(T==null||T(it),Le(X),P){var At,ut;(At=document.activeElement)===null||At===void 0||(ut=At.blur)===null||ut===void 0||ut.call(At),$e.current.focus(et),Be(P,et,X)}else _==null||_(it),nn(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),z==null||z(it)}},Te=function(M){M.preventDefault();var P=Ae.current.getBoundingClientRect(),X=P.width,ue=P.height,rt=P.left,Ke=P.top,et=P.bottom,it=P.right,At=M.clientX,ut=M.clientY,ft;switch(we){case"btt":ft=(et-ut)/ue;break;case"ttb":ft=(ut-Ke)/ue;break;case"rtl":ft=(it-At)/X;break;default:ft=(At-rt)/X}var qt=Ce+ft*(Ue-Ce);ze(Xe(qt),M)},nt=l.useState(null),vt=me(nt,2),Ot=vt[0],Tt=vt[1],Rt=function(M,P){if(!d){var X=Ve(se,M,P);T==null||T(de(se)),Le(X.values),Tt(X.value)}};l.useEffect(function(){if(Ot!==null){var fe=se.indexOf(Ot);fe>=0&&$e.current.focus(fe)}Tt(null)},[Ot]);var It=l.useMemo(function(){return qe&&Ee===null?!1:qe},[qe,Ee]),Gt=Sn(function(fe,M){Be(fe,M),T==null||T(de(se))}),Ut=Nt!==-1;l.useEffect(function(){if(!Ut){var fe=se.lastIndexOf(an);$e.current.focus(fe)}},[Ut]);var Yt=l.useMemo(function(){return at(Ie).sort(function(fe,M){return fe-M})},[Ie]),ct=l.useMemo(function(){return ye?[Yt[0],Yt[Yt.length-1]]:[Ce,Yt[0]]},[Yt,ye,Ce]),Ye=me(ct,2),Ze=Ye[0],ge=Ye[1];l.useImperativeHandle(t,function(){return{focus:function(){$e.current.focus(0)},blur:function(){var M,P=document,X=P.activeElement;(M=Ae.current)!==null&&M!==void 0&&M.contains(X)&&(X==null||X.blur())}}}),l.useEffect(function(){f&&$e.current.focus(0)},[]);var xe=l.useMemo(function(){return{min:Ce,max:Ue,direction:we,disabled:d,keyboard:p,step:Ee,included:j,includedStart:Ze,includedEnd:ge,range:ye,tabIndex:Se,ariaLabelForHandle:oe,ariaLabelledByForHandle:he,ariaRequired:Oe,ariaValueTextFormatterForHandle:Re,styles:i||{},classNames:s||{}}},[Ce,Ue,we,d,p,Ee,j,Ze,ge,ye,Se,oe,he,Oe,Re,i,s]);return l.createElement(pr.Provider,{value:xe},l.createElement("div",{ref:Ae,className:be(r,o,K(K(K(K({},"".concat(r,"-disabled"),d),"".concat(r,"-vertical"),H),"".concat(r,"-horizontal"),!H),"".concat(r,"-with-marks"),_e.length)),style:a,onMouseDown:Te,id:c},l.createElement("div",{className:be("".concat(r,"-rail"),s==null?void 0:s.rail),style:pe(pe({},te),i==null?void 0:i.rail)}),W!==!1&&l.createElement(Zg,{prefixCls:r,style:Z,values:se,startPoint:Y,onStartMove:It?Gt:void 0}),l.createElement(Yg,{prefixCls:r,marks:_e,dots:Q,style:re,activeStyle:le}),l.createElement(Gg,{ref:$e,prefixCls:r,style:J,values:Ie,draggingIndex:Nt,draggingDelete:Xt,onStartMove:Gt,onOffsetChange:Rt,onFocus:v,onBlur:y,handleRender:ee,activeHandleRender:V,onChangeComplete:Me,onDelete:We?xt:void 0}),l.createElement(qg,{prefixCls:r,marks:_e,onClick:ze})))});const ec=l.createContext({}),qi=l.forwardRef((e,t)=>{const{open:n,draggingDelete:r}=e,o=l.useRef(null),a=n&&!r,s=l.useRef(null);function i(){Bt.cancel(s.current),s.current=null}function c(){s.current=Bt(()=>{var u;(u=o.current)===null||u===void 0||u.forceAlign(),s.current=null})}return l.useEffect(()=>(a?c():i(),i),[a,e.title]),l.createElement(Qs,Object.assign({ref:$r(o,t)},e,{open:a}))}),rp=e=>{const{componentCls:t,antCls:n,controlSize:r,dotSize:o,marginFull:a,marginPart:s,colorFillContentHover:i,handleColorDisabled:c,calc:u,handleSize:d,handleSizeHover:h,handleActiveColor:p,handleActiveOutlineColor:f,handleLineWidth:v,handleLineWidthHover:y,motionDurationMid:g}=e;return{[t]:Object.assign(Object.assign({},fn(e)),{position:"relative",height:r,margin:`${ve(s)} ${ve(a)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${ve(a)} ${ve(s)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:e.railBg,borderRadius:e.borderRadiusXS,transition:`background-color ${g}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${g}`},[`${t}-track`]:{backgroundColor:e.trackBg,borderRadius:e.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:e.railHoverBg},[`${t}-track`]:{backgroundColor:e.trackHoverBg},[`${t}-dot`]:{borderColor:i},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${ve(v)} ${e.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:e.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:d,height:d,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:u(v).mul(-1).equal(),insetBlockStart:u(v).mul(-1).equal(),width:u(d).add(u(v).mul(2)).equal(),height:u(d).add(u(v).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:d,height:d,backgroundColor:e.colorBgElevated,boxShadow:`0 0 0 ${ve(v)} ${e.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${g},
            inset-block-start ${g},
            width ${g},
            height ${g},
            box-shadow ${g},
            outline ${g}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(h).sub(d).div(2).add(y).mul(-1).equal(),insetBlockStart:u(h).sub(d).div(2).add(y).mul(-1).equal(),width:u(h).add(u(y).mul(2)).equal(),height:u(h).add(u(y).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${ve(y)} ${p}`,outline:`6px solid ${f}`,width:h,height:h,insetInlineStart:e.calc(d).sub(h).div(2).equal(),insetBlockStart:e.calc(d).sub(h).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:e.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:o,height:o,backgroundColor:e.colorBgElevated,border:`${ve(v)} solid ${e.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${e.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:e.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${e.railBg} !important`},[`${t}-track`]:{backgroundColor:`${e.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:e.colorBgElevated,borderColor:e.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:d,height:d,boxShadow:`0 0 0 ${ve(v)} ${c}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${n}-tooltip-inner`]:{minWidth:"unset"}})}},tc=(e,t)=>{const{componentCls:n,railSize:r,handleSize:o,dotSize:a,marginFull:s,calc:i}=e,c=t?"paddingBlock":"paddingInline",u=t?"width":"height",d=t?"height":"width",h=t?"insetBlockStart":"insetInlineStart",p=t?"top":"insetInlineStart",f=i(r).mul(3).sub(o).div(2).equal(),v=i(o).sub(r).div(2).equal(),y=t?{borderWidth:`${ve(v)} 0`,transform:`translateY(${ve(i(v).mul(-1).equal())})`}:{borderWidth:`0 ${ve(v)}`,transform:`translateX(${ve(e.calc(v).mul(-1).equal())})`};return{[c]:r,[d]:i(r).mul(3).equal(),[`${n}-rail`]:{[u]:"100%",[d]:r},[`${n}-track,${n}-tracks`]:{[d]:r},[`${n}-track-draggable`]:Object.assign({},y),[`${n}-handle`]:{[h]:f},[`${n}-mark`]:{insetInlineStart:0,top:0,[p]:i(r).mul(3).add(t?0:s).equal(),[u]:"100%"},[`${n}-step`]:{insetInlineStart:0,top:0,[p]:r,[u]:"100%",[d]:r},[`${n}-dot`]:{position:"absolute",[h]:i(r).sub(a).div(2).equal()}}},op=e=>{const{componentCls:t,marginPartWithMark:n}=e;return{[`${t}-horizontal`]:Object.assign(Object.assign({},tc(e,!0)),{[`&${t}-with-marks`]:{marginBottom:n}})}},ap=e=>{const{componentCls:t}=e;return{[`${t}-vertical`]:Object.assign(Object.assign({},tc(e,!1)),{height:"100%"})}},ip=e=>{const n=e.controlHeightLG/4,r=e.controlHeightSM/2,o=e.lineWidth+1,a=e.lineWidth+1*1.5,s=e.colorPrimary,i=new or(s).setA(.2).toRgbString();return{controlSize:n,railSize:4,handleSize:n,handleSizeHover:r,dotSize:8,handleLineWidth:o,handleLineWidthHover:a,railBg:e.colorFillTertiary,railHoverBg:e.colorFillSecondary,trackBg:e.colorPrimaryBorder,trackHoverBg:e.colorPrimaryBorderHover,handleColor:e.colorPrimaryBorder,handleActiveColor:s,handleActiveOutlineColor:i,handleColorDisabled:new or(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexString(),dotBorderColor:e.colorBorderSecondary,dotActiveBorderColor:e.colorPrimaryBorder,trackBgDisabled:e.colorBgContainerDisabled}},sp=In("Slider",e=>{const t=rn(e,{marginPart:e.calc(e.controlHeight).sub(e.controlSize).div(2).equal(),marginFull:e.calc(e.controlSize).div(2).equal(),marginPartWithMark:e.calc(e.controlHeightLG).sub(e.controlSize).equal()});return[rp(t),op(t),ap(t)]},ip);function Zo(){const[e,t]=l.useState(!1),n=l.useRef(null),r=()=>{Bt.cancel(n.current)},o=a=>{r(),a?t(a):n.current=Bt(()=>{t(a)})};return l.useEffect(()=>r,[]),[e,o]}var lp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};function cp(e,t){return e||e===null?e:t||t===null?t:n=>typeof n=="number"?n.toString():""}const up=F.forwardRef((e,t)=>{const{prefixCls:n,range:r,className:o,rootClassName:a,style:s,disabled:i,tooltipPrefixCls:c,tipFormatter:u,tooltipVisible:d,getTooltipPopupContainer:h,tooltipPlacement:p,tooltip:f={},onChangeComplete:v,classNames:y,styles:g}=e,m=lp(e,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete","classNames","styles"]),{vertical:b}=e,{getPrefixCls:S,direction:C,className:N,style:O,classNames:x,styles:$,getPopupContainer:w}=Ir("slider"),R=F.useContext(Ar),T=i??R,{handleRender:_,direction:z}=F.useContext(ec),I=(z||C)==="rtl",[k,L]=Zo(),[B,H]=Zo(),q=Object.assign({},f),{open:j,placement:Y,getPopupContainer:Z,prefixCls:J,formatter:te}=q,re=j??d,le=(k||B)&&re!==!1,G=cp(te,u),[Q,ee]=Zo(),V=ye=>{v==null||v(ye),ee(!1)},W=(ye,We)=>ye||(We?I?"left":"right":"top"),ie=S("slider",n),[Se,oe,he]=sp(ie),Oe=be(o,N,x.root,y==null?void 0:y.root,a,{[`${ie}-rtl`]:I,[`${ie}-lock`]:Q},oe,he);I&&!m.vertical&&(m.reverse=!m.reverse),F.useEffect(()=>{const ye=()=>{Bt(()=>{H(!1)},1)};return document.addEventListener("mouseup",ye),()=>{document.removeEventListener("mouseup",ye)}},[]);const Re=r&&!re,$e=_||((ye,We)=>{const{index:qe}=We,He=ye.props;function Pe(ce,_e,mt){var Fe,Xe,Ve,Je;mt&&((Xe=(Fe=m)[ce])===null||Xe===void 0||Xe.call(Fe,_e)),(Je=(Ve=He)[ce])===null||Je===void 0||Je.call(Ve,_e)}const Ce=Object.assign(Object.assign({},He),{onMouseEnter:ce=>{L(!0),Pe("onMouseEnter",ce)},onMouseLeave:ce=>{L(!1),Pe("onMouseLeave",ce)},onMouseDown:ce=>{H(!0),ee(!0),Pe("onMouseDown",ce)},onFocus:ce=>{var _e;H(!0),(_e=m.onFocus)===null||_e===void 0||_e.call(m,ce),Pe("onFocus",ce,!0)},onBlur:ce=>{var _e;H(!1),(_e=m.onBlur)===null||_e===void 0||_e.call(m,ce),Pe("onBlur",ce,!0)}}),Ue=F.cloneElement(ye,Ce),Ee=(!!re||le)&&G!==null;return Re?Ue:F.createElement(qi,Object.assign({},q,{prefixCls:S("tooltip",J??c),title:G?G(We.value):"",open:Ee,placement:W(Y??p,b),key:qe,classNames:{root:`${ie}-tooltip`},getPopupContainer:Z||h||w}),Ue)}),Ae=Re?(ye,We)=>{const qe=F.cloneElement(ye,{style:Object.assign(Object.assign({},ye.props.style),{visibility:"hidden"})});return F.createElement(qi,Object.assign({},q,{prefixCls:S("tooltip",J??c),title:G?G(We.value):"",open:G!==null&&le,placement:W(Y??p,b),key:"tooltip",classNames:{root:`${ie}-tooltip`},getPopupContainer:Z||h||w,draggingDelete:We.draggingDelete}),qe)}:void 0,we=Object.assign(Object.assign(Object.assign(Object.assign({},$.root),O),g==null?void 0:g.root),s),je=Object.assign(Object.assign({},$.tracks),g==null?void 0:g.tracks),De=be(x.tracks,y==null?void 0:y.tracks);return Se(F.createElement(np,Object.assign({},m,{classNames:Object.assign({handle:be(x.handle,y==null?void 0:y.handle),rail:be(x.rail,y==null?void 0:y.rail),track:be(x.track,y==null?void 0:y.track)},De?{tracks:De}:{}),styles:Object.assign({handle:Object.assign(Object.assign({},$.handle),g==null?void 0:g.handle),rail:Object.assign(Object.assign({},$.rail),g==null?void 0:g.rail),track:Object.assign(Object.assign({},$.track),g==null?void 0:g.track)},Object.keys(je).length?{tracks:je}:{}),step:m.step,range:r,className:Oe,style:we,disabled:T,ref:t,prefixCls:ie,handleRender:$e,activeHandleRender:Ae,onChangeComplete:V})))});var dp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const nc=e=>{const{prefixCls:t,colors:n,type:r,color:o,range:a=!1,className:s,activeIndex:i,onActive:c,onDragStart:u,onDragChange:d,onKeyDelete:h}=e,p=dp(e,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),f=Object.assign(Object.assign({},p),{track:!1}),v=l.useMemo(()=>`linear-gradient(90deg, ${n.map(O=>`${O.color} ${O.percent}%`).join(", ")})`,[n]),y=l.useMemo(()=>!o||!r?null:r==="alpha"?o.toRgbString():`hsl(${o.toHsb().h}, 100%, 50%)`,[o,r]),g=Sn(u),m=Sn(d),b=l.useMemo(()=>({onDragStart:g,onDragChange:m}),[]),S=Sn((N,O)=>{const{onFocus:x,style:$,className:w,onKeyDown:R}=N.props,T=Object.assign({},$);return r==="gradient"&&(T.background=el(n,O.value)),l.cloneElement(N,{onFocus:_=>{c==null||c(O.index),x==null||x(_)},style:T,className:be(w,{[`${t}-slider-handle-active`]:i===O.index}),onKeyDown:_=>{(_.key==="Delete"||_.key==="Backspace")&&h&&h(O.index),R==null||R(_)}})}),C=l.useMemo(()=>({direction:"ltr",handleRender:S}),[]);return l.createElement(ec.Provider,{value:C},l.createElement(Jl.Provider,{value:b},l.createElement(up,Object.assign({},f,{className:be(s,`${t}-slider`),tooltip:{open:!1},range:{editable:a,minCount:2},styles:{rail:{background:v},handle:y?{background:y}:{}},classNames:{rail:`${t}-slider-rail`,handle:`${t}-slider-handle`}}))))},hp=e=>{const{value:t,onChange:n,onChangeComplete:r}=e,o=s=>n(s[0]),a=s=>r(s[0]);return l.createElement(nc,Object.assign({},e,{value:[t],onChange:o,onChangeComplete:a}))};function Xi(e){return at(e).sort((t,n)=>t.percent-n.percent)}const fp=e=>{const{prefixCls:t,mode:n,onChange:r,onChangeComplete:o,onActive:a,activeIndex:s,onGradientDragging:i,colors:c}=e,u=n==="gradient",d=l.useMemo(()=>c.map(m=>({percent:m.percent,color:m.color.toRgbString()})),[c]),h=l.useMemo(()=>d.map(m=>m.percent),[d]),p=l.useRef(d),f=m=>{let{rawValues:b,draggingIndex:S,draggingValue:C}=m;if(b.length>d.length){const N=el(d,C),O=at(d);O.splice(S,0,{percent:C,color:N}),p.current=O}else p.current=d;i(!0),r(new Dn(Xi(p.current)),!0)},v=m=>{let{deleteIndex:b,draggingIndex:S,draggingValue:C}=m,N=at(p.current);b!==-1?N.splice(b,1):(N[S]=Object.assign(Object.assign({},N[S]),{percent:C}),N=Xi(N)),r(new Dn(N),!0)},y=m=>{const b=at(d);b.splice(m,1);const S=new Dn(b);r(S),o(S)},g=m=>{o(new Dn(d)),s>=m.length&&a(m.length-1),i(!1)};return u?l.createElement(nc,{min:0,max:100,prefixCls:t,className:`${t}-gradient-slider`,colors:d,color:null,value:h,range:!0,onChangeComplete:g,disabled:!1,type:"gradient",activeIndex:s,onActive:a,onDragStart:f,onDragChange:v,onKeyDelete:y}):null},gp=l.memo(fp);var pp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const mp={slider:hp},Yi=()=>{const e=l.useContext(Wl),{mode:t,onModeChange:n,modeOptions:r,prefixCls:o,allowClear:a,value:s,disabledAlpha:i,onChange:c,onClear:u,onChangeComplete:d,activeIndex:h,gradientDragging:p}=e,f=pp(e,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),v=F.useMemo(()=>s.cleared?[{percent:0,color:new Dn("")},{percent:100,color:new Dn("")}]:s.getColors(),[s]),y=!s.isGradient(),[g,m]=F.useState(s);sn(()=>{var A;y||m((A=v[h])===null||A===void 0?void 0:A.color)},[p,h]);const b=F.useMemo(()=>{var A;return y?s:p?g:(A=v[h])===null||A===void 0?void 0:A.color},[s,h,y,g,p]),[S,C]=F.useState(b),[N,O]=F.useState(0),x=S!=null&&S.equals(b)?b:S;sn(()=>{C(b)},[N,b==null?void 0:b.toHexString()]);const $=(A,I)=>{let k=wn(A);if(s.cleared){const B=k.toRgb();if(!B.r&&!B.g&&!B.b&&I){const{type:H,value:q=0}=I;k=new Dn({h:H==="hue"?q:0,s:1,b:1,a:H==="alpha"?q/100:1})}else k=go(k)}if(t==="single")return k;const L=at(v);return L[h]=Object.assign(Object.assign({},L[h]),{color:k}),new Dn(L)},w=(A,I,k)=>{const L=$(A,k);C(L.isGradient()?L.getColors()[h].color:L),c(L,I)},R=(A,I)=>{d($(A,I)),O(k=>k+1)},T=A=>{c($(A))};let _=null;const z=r.length>1;return(a||z)&&(_=F.createElement("div",{className:`${o}-operation`},z&&F.createElement(fg,{size:"small",options:r,value:t,onChange:n}),F.createElement(Ul,Object.assign({prefixCls:o,value:s,onChange:A=>{c(A),u==null||u()}},f)))),F.createElement(F.Fragment,null,_,F.createElement(gp,Object.assign({},e,{colors:v})),F.createElement(Kd,{prefixCls:o,value:x==null?void 0:x.toHsb(),disabledAlpha:i,onChange:(A,I)=>{w(A,!0,I)},onChangeComplete:(A,I)=>{R(A,I)},components:mp}),F.createElement(Kg,Object.assign({value:b,onChange:T,prefixCls:o,disabledAlpha:i},f)))},Zi=()=>{const{prefixCls:e,value:t,presets:n,onChange:r}=l.useContext(Gl);return Array.isArray(n)?F.createElement(vu,{value:t,presets:n,prefixCls:e,onChange:r}):null},vp=e=>{const{prefixCls:t,presets:n,panelRender:r,value:o,onChange:a,onClear:s,allowClear:i,disabledAlpha:c,mode:u,onModeChange:d,modeOptions:h,onChangeComplete:p,activeIndex:f,onActive:v,format:y,onFormatChange:g,gradientDragging:m,onGradientDragging:b,disabledFormat:S}=e,C=`${t}-inner`,N=F.useMemo(()=>({prefixCls:t,value:o,onChange:a,onClear:s,allowClear:i,disabledAlpha:c,mode:u,onModeChange:d,modeOptions:h,onChangeComplete:p,activeIndex:f,onActive:v,format:y,onFormatChange:g,gradientDragging:m,onGradientDragging:b,disabledFormat:S}),[t,o,a,s,i,c,u,d,h,p,f,v,y,g,m,b,S]),O=F.useMemo(()=>({prefixCls:t,value:o,presets:n,onChange:a}),[t,o,n,a]),x=F.createElement("div",{className:`${C}-content`},F.createElement(Yi,null),Array.isArray(n)&&F.createElement(Jf,null),F.createElement(Zi,null));return F.createElement(Wl.Provider,{value:N},F.createElement(Gl.Provider,{value:O},F.createElement("div",{className:C},typeof r=="function"?r(x,{components:{Picker:Yi,Presets:Zi}}):x)))};var yp=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const bp=l.forwardRef((e,t)=>{const{color:n,prefixCls:r,open:o,disabled:a,format:s,className:i,showText:c,activeIndex:u}=e,d=yp(e,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),h=`${r}-trigger`,p=`${h}-text`,f=`${p}-cell`,[v]=Fr("ColorPicker"),y=F.useMemo(()=>{if(!c)return"";if(typeof c=="function")return c(n);if(n.cleared)return v.transparent;if(n.isGradient())return n.getColors().map((S,C)=>{const N=u!==-1&&u!==C;return F.createElement("span",{key:C,className:be(f,N&&`${f}-inactive`)},S.color.toRgbString()," ",S.percent,"%")});const m=n.toHexString().toUpperCase(),b=_a(n);switch(s){case"rgb":return n.toRgbString();case"hsb":return n.toHsbString();default:return b<100?`${m.slice(0,7)},${b}%`:m}},[n,s,c,u]),g=l.useMemo(()=>n.cleared?F.createElement(Ul,{prefixCls:r}):F.createElement(Gs,{prefixCls:r,color:n.toCssString()}),[n,r]);return F.createElement("div",Object.assign({ref:t,className:be(h,i,{[`${h}-active`]:o,[`${h}-disabled`]:a})},cr(d)),g,c&&F.createElement("div",{className:p},y))});function Sp(e,t,n){const[r]=Fr("ColorPicker"),[o,a]=mn(e,{value:t}),[s,i]=l.useState("single"),[c,u]=l.useMemo(()=>{const y=(Array.isArray(n)?n:[n]).filter(S=>S);y.length||y.push("single");const g=new Set(y),m=[],b=(S,C)=>{g.has(S)&&m.push({label:C,value:S})};return b("single",r.singleColor),b("gradient",r.gradientColor),[m,g]},[n]),[d,h]=l.useState(null),p=Sn(y=>{h(y),a(y)}),f=l.useMemo(()=>{const y=wn(o||"");return y.equals(d)?d:y},[o,d]),v=l.useMemo(()=>{var y;return u.has(s)?s:(y=c[0])===null||y===void 0?void 0:y.value},[u,s,c]);return l.useEffect(()=>{i(f.isGradient()?"gradient":"single")},[f]),[f,p,v,i,c]}const rc=(e,t)=>({backgroundImage:`conic-gradient(${t} 0 25%, transparent 0 50%, ${t} 0 75%, transparent 0)`,backgroundSize:`${e} ${e}`}),Qi=(e,t)=>{const{componentCls:n,borderRadiusSM:r,colorPickerInsetShadow:o,lineWidth:a,colorFillSecondary:s}=e;return{[`${n}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:r,width:t,height:t,boxShadow:o,flex:"none"},rc("50%",e.colorFillSecondary)),{[`${n}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${ve(a)} ${s}`,borderRadius:"inherit"}})}},Cp=e=>{const{componentCls:t,antCls:n,fontSizeSM:r,lineHeightSM:o,colorPickerAlphaInputWidth:a,marginXXS:s,paddingXXS:i,controlHeightSM:c,marginXS:u,fontSizeIcon:d,paddingXS:h,colorTextPlaceholder:p,colorPickerInputNumberHandleWidth:f,lineWidth:v}=e;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${n}-input-number`]:{fontSize:r,lineHeight:o,[`${n}-input-number-input`]:{paddingInlineStart:i,paddingInlineEnd:0},[`${n}-input-number-handler-wrap`]:{width:f}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${ve(a)}`,marginInlineStart:s},[`${t}-format-select${n}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${n}-select-selector`]:{padding:0,border:0},[`${n}-select-arrow`]:{insetInlineEnd:0},[`${n}-select-selection-item`]:{paddingInlineEnd:e.calc(d).add(s).equal(),fontSize:r,lineHeight:ve(c)},[`${n}-select-item-option-content`]:{fontSize:r,lineHeight:o},[`${n}-select-dropdown`]:{[`${n}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:s,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{display:"flex",gap:s,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${n}-input-affix-wrapper`]:{flex:1,padding:`0 ${ve(h)}`,[`${n}-input`]:{fontSize:r,textTransform:"uppercase",lineHeight:ve(e.calc(c).sub(e.calc(v).mul(2)).equal())},[`${n}-input-prefix`]:{color:p}}}}}},xp=e=>{const{componentCls:t,controlHeightLG:n,borderRadiusSM:r,colorPickerInsetShadow:o,marginSM:a,colorBgElevated:s,colorFillSecondary:i,lineWidthBold:c,colorPickerHandlerSize:u}=e;return{userSelect:"none",[`${t}-select`]:{[`${t}-palette`]:{minHeight:e.calc(n).mul(4).equal(),overflow:"hidden",borderRadius:r},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:o,inset:0},marginBottom:a},[`${t}-handler`]:{width:u,height:u,border:`${ve(c)} solid ${s}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${o}, 0 0 0 1px ${i}`}}},wp=e=>{const{componentCls:t,antCls:n,colorTextQuaternary:r,paddingXXS:o,colorPickerPresetColorSize:a,fontSizeSM:s,colorText:i,lineHeightSM:c,lineWidth:u,borderRadius:d,colorFill:h,colorWhite:p,marginXXS:f,paddingXS:v,fontHeightSM:y}=e;return{[`${t}-presets`]:{[`${n}-collapse-item > ${n}-collapse-header`]:{padding:0,[`${n}-collapse-expand-icon`]:{height:y,color:r,paddingInlineEnd:o}},[`${n}-collapse`]:{display:"flex",flexDirection:"column",gap:f},[`${n}-collapse-item > ${n}-collapse-content > ${n}-collapse-content-box`]:{padding:`${ve(v)} 0`},"&-label":{fontSize:s,color:i,lineHeight:c},"&-items":{display:"flex",flexWrap:"wrap",gap:e.calc(f).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:a,height:a,"&::before":{content:'""',pointerEvents:"none",width:e.calc(a).add(e.calc(u).mul(4)).equal(),height:e.calc(a).add(e.calc(u).mul(4)).equal(),position:"absolute",top:e.calc(u).mul(-2).equal(),insetInlineStart:e.calc(u).mul(-2).equal(),borderRadius:d,border:`${ve(u)} solid transparent`,transition:`border-color ${e.motionDurationMid} ${e.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:e.calc(a).div(13).mul(5).equal(),height:e.calc(a).div(13).mul(8).equal(),border:`${ve(e.lineWidthBold)} solid ${e.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${e.motionDurationFast} ${e.motionEaseInBack}, opacity ${e.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:p,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${e.motionDurationMid} ${e.motionEaseOutBack} ${e.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:s,color:r}}}},Ep=e=>{const{componentCls:t,colorPickerInsetShadow:n,colorBgElevated:r,colorFillSecondary:o,lineWidthBold:a,colorPickerHandlerSizeSM:s,colorPickerSliderHeight:i,marginSM:c,marginXS:u}=e,d=e.calc(s).sub(e.calc(a).mul(2).equal()).equal(),h=e.calc(s).add(e.calc(a).mul(2).equal()).equal(),p={"&:after":{transform:"scale(1)",boxShadow:`${n}, 0 0 0 1px ${e.colorPrimaryActive}`}};return{[`${t}-slider`]:[rc(ve(i),e.colorFillSecondary),{margin:0,padding:0,height:i,borderRadius:e.calc(i).div(2).equal(),"&-rail":{height:i,borderRadius:e.calc(i).div(2).equal(),boxShadow:n},[`& ${t}-slider-handle`]:{width:d,height:d,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:s,height:s,border:`${ve(a)} solid ${r}`,boxShadow:`${n}, 0 0 0 1px ${o}`,outline:"none",insetInlineStart:e.calc(a).mul(-1).equal(),top:e.calc(a).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":p}}],[`${t}-slider-container`]:{display:"flex",gap:c,marginBottom:c,[`${t}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${t}-gradient-slider`]:{marginBottom:u,[`& ${t}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":p}}}},wa=(e,t,n)=>({borderInlineEndWidth:e.lineWidth,borderColor:t,boxShadow:`0 0 0 ${ve(e.controlOutlineWidth)} ${n}`,outline:0}),Mp=e=>{const{componentCls:t}=e;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},Ji=(e,t,n)=>{const{componentCls:r,borderRadiusSM:o,lineWidth:a,colorSplit:s,colorBorder:i,red6:c}=e;return{[`${r}-clear`]:Object.assign(Object.assign({width:t,height:t,borderRadius:o,border:`${ve(a)} solid ${s}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${e.motionDurationFast}`},n),{"&::after":{content:'""',position:"absolute",insetInlineEnd:e.calc(a).mul(-1).equal(),top:e.calc(a).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:c},"&:hover":{borderColor:i}})}},Np=e=>{const{componentCls:t,colorError:n,colorWarning:r,colorErrorHover:o,colorWarningHover:a,colorErrorOutline:s,colorWarningOutline:i}=e;return{[`&${t}-status-error`]:{borderColor:n,"&:hover":{borderColor:o},[`&${t}-trigger-active`]:Object.assign({},wa(e,n,s))},[`&${t}-status-warning`]:{borderColor:r,"&:hover":{borderColor:a},[`&${t}-trigger-active`]:Object.assign({},wa(e,r,i))}}},Op=e=>{const{componentCls:t,controlHeightLG:n,controlHeightSM:r,controlHeight:o,controlHeightXS:a,borderRadius:s,borderRadiusSM:i,borderRadiusXS:c,borderRadiusLG:u,fontSizeLG:d}=e;return{[`&${t}-lg`]:{minWidth:n,minHeight:n,borderRadius:u,[`${t}-color-block, ${t}-clear`]:{width:o,height:o,borderRadius:s},[`${t}-trigger-text`]:{fontSize:d}},[`&${t}-sm`]:{minWidth:r,minHeight:r,borderRadius:i,[`${t}-color-block, ${t}-clear`]:{width:a,height:a,borderRadius:c},[`${t}-trigger-text`]:{lineHeight:ve(a)}}}},$p=e=>{const{antCls:t,componentCls:n,colorPickerWidth:r,colorPrimary:o,motionDurationMid:a,colorBgElevated:s,colorTextDisabled:i,colorText:c,colorBgContainerDisabled:u,borderRadius:d,marginXS:h,marginSM:p,controlHeight:f,controlHeightSM:v,colorBgTextActive:y,colorPickerPresetColorSize:g,colorPickerPreviewSize:m,lineWidth:b,colorBorder:S,paddingXXS:C,fontSize:N,colorPrimaryHover:O,controlOutline:x}=e;return[{[n]:Object.assign({[`${n}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:r,[`& > ${t}-divider`]:{margin:`${ve(p)} 0 ${ve(h)}`}},[`${n}-panel`]:Object.assign({},xp(e))},Ep(e)),Qi(e,m)),Cp(e)),wp(e)),Ji(e,g,{marginInlineStart:"auto"})),{[`${n}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:f,minHeight:f,borderRadius:d,border:`${ve(b)} solid ${S}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${a}`,background:s,padding:e.calc(C).sub(b).equal(),[`${n}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:e.calc(h).sub(e.calc(C).sub(b)).equal(),fontSize:N,color:c,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:i}}},"&:hover":{borderColor:O},[`&${n}-trigger-active`]:Object.assign({},wa(e,o,x)),"&-disabled":{color:i,background:u,cursor:"not-allowed","&:hover":{borderColor:y},[`${n}-trigger-text`]:{color:i}}},Ji(e,v)),Qi(e,v)),Np(e)),Op(e))},Mp(e))},Ra(e,{focusElCls:`${n}-trigger-active`})]},Ip=In("ColorPicker",e=>{const{colorTextQuaternary:t,marginSM:n}=e,r=8,o=rn(e,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:r,colorPickerPreviewSize:e.calc(r).mul(2).add(n).equal()});return[$p(o)]});var Ap=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const ri=e=>{const{mode:t,value:n,defaultValue:r,format:o,defaultFormat:a,allowClear:s=!1,presets:i,children:c,trigger:u="click",open:d,disabled:h,placement:p="bottomLeft",arrow:f=!0,panelRender:v,showText:y,style:g,className:m,size:b,rootClassName:S,prefixCls:C,styles:N,disabledAlpha:O=!1,onFormatChange:x,onChange:$,onClear:w,onOpenChange:R,onChangeComplete:T,getPopupContainer:_,autoAdjustOverflow:z=!0,destroyTooltipOnHide:A,disabledFormat:I}=e,k=Ap(e,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide","disabledFormat"]),{getPrefixCls:L,direction:B,colorPicker:H}=l.useContext(Un),q=l.useContext(Ar),j=h??q,[Y,Z]=mn(!1,{value:d,postState:Xe=>!j&&Xe,onChange:R}),[J,te]=mn(o,{value:o,defaultValue:a,onChange:x}),re=L("color-picker",C),[le,G,Q,ee,V]=Sp(r,n,t),W=l.useMemo(()=>_a(le)<100,[le]),[ie,Se]=F.useState(null),oe=Xe=>{if(T){let Ve=wn(Xe);O&&W&&(Ve=go(Xe)),T(Ve)}},he=(Xe,Ve)=>{let Je=wn(Xe);O&&W&&(Je=go(Je)),G(Je),Se(null),$&&$(Je,Je.toCssString()),Ve||oe(Je)},[Oe,Re]=F.useState(0),[$e,Ae]=F.useState(!1),we=Xe=>{if(ee(Xe),Xe==="single"&&le.isGradient())Re(0),he(new Dn(le.getColors()[0].color)),Se(le);else if(Xe==="gradient"&&!le.isGradient()){const Ve=W?go(le):le;he(new Dn(ie||[{percent:0,color:Ve},{percent:100,color:Ve}]))}},{status:je}=F.useContext(Wr),{compactSize:De,compactItemClassnames:ye}=Ao(re,B),We=Gr(Xe=>{var Ve;return(Ve=b??De)!==null&&Ve!==void 0?Ve:Xe}),qe=ur(re),[He,Pe,Ce]=Ip(re,qe),Ue={[`${re}-rtl`]:B},Ee=be(S,Ce,qe,Ue),ce=be(Vr(re,je),{[`${re}-sm`]:We==="small",[`${re}-lg`]:We==="large"},ye,H==null?void 0:H.className,Ee,m,Pe),_e=be(re,Ee),mt={open:Y,trigger:u,placement:p,arrow:f,rootClassName:S,getPopupContainer:_,autoAdjustOverflow:z,destroyTooltipOnHide:A},Fe=Object.assign(Object.assign({},H==null?void 0:H.style),g);return He(F.createElement(zl,Object.assign({style:N==null?void 0:N.popup,styles:{body:N==null?void 0:N.popupOverlayInner},onOpenChange:Xe=>{(!Xe||!j)&&Z(Xe)},content:F.createElement(pa,{form:!0},F.createElement(vp,{mode:Q,onModeChange:we,modeOptions:V,prefixCls:re,value:le,allowClear:s,disabled:j,disabledAlpha:O,presets:i,panelRender:v,format:J,onFormatChange:te,onChange:he,onChangeComplete:oe,onClear:w,activeIndex:Oe,onActive:Re,gradientDragging:$e,onGradientDragging:Ae,disabledFormat:I})),classNames:{root:_e}},mt),c||F.createElement(bp,Object.assign({activeIndex:Y?Oe:-1,open:Y,className:ce,style:Fe,prefixCls:re,disabled:j,showText:y,format:J},k,{color:le}))))},Pp=Da(ri,void 0,e=>Object.assign(Object.assign({},e),{placement:"bottom",autoAdjustOverflow:!1}),"color-picker",e=>e);ri._InternalPanelDoNotUseOrYouWillBeFired=Pp;function Rp(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yu(e))||t){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return s=u.done,u},e:function(u){i=!0,a=u},f:function(){try{s||n.return==null||n.return()}finally{if(i)throw a}}}}var Dp={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},Tp=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:Dp}))},_p=l.forwardRef(Tp),kp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Lp=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:kp}))},zp=l.forwardRef(Lp),jp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},Bp=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:jp}))},Hp=l.forwardRef(Bp),Vp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},Kp=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:Vp}))},Fp=l.forwardRef(Kp),Wp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Gp=function(t,n){return l.createElement(qn,lt({},t,{ref:n,icon:Wp}))},Up=l.forwardRef(Gp),oi=l.createContext(null),oc=l.createContext({}),qp=function(t){for(var n=t.prefixCls,r=t.level,o=t.isStart,a=t.isEnd,s="".concat(n,"-indent-unit"),i=[],c=0;c<r;c+=1)i.push(l.createElement("span",{key:c,className:be(s,K(K({},"".concat(s,"-start"),o[c]),"".concat(s,"-end"),a[c]))}));return l.createElement("span",{"aria-hidden":"true",className:"".concat(n,"-indent")},i)};const Xp=l.memo(qp);var Yp=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],es="open",ts="close",Zp="---",Eo=function(t){var n,r,o,a=t.eventKey,s=t.className,i=t.style,c=t.dragOver,u=t.dragOverGapTop,d=t.dragOverGapBottom,h=t.isLeaf,p=t.isStart,f=t.isEnd,v=t.expanded,y=t.selected,g=t.checked,m=t.halfChecked,b=t.loading,S=t.domRef,C=t.active,N=t.data,O=t.onMouseMove,x=t.selectable,$=Wt(t,Yp),w=F.useContext(oi),R=F.useContext(oc),T=F.useRef(null),_=F.useState(!1),z=me(_,2),A=z[0],I=z[1],k=!!(w.disabled||t.disabled||(n=R.nodeDisabled)!==null&&n!==void 0&&n.call(R,N)),L=F.useMemo(function(){return!w.checkable||t.checkable===!1?!1:w.checkable},[w.checkable,t.checkable]),B=function(ce){k||w.onNodeSelect(ce,Vt(t))},H=function(ce){k||!L||t.disableCheckbox||w.onNodeCheck(ce,Vt(t),!g)},q=F.useMemo(function(){return typeof x=="boolean"?x:w.selectable},[x,w.selectable]),j=function(ce){w.onNodeClick(ce,Vt(t)),q?B(ce):H(ce)},Y=function(ce){w.onNodeDoubleClick(ce,Vt(t))},Z=function(ce){w.onNodeMouseEnter(ce,Vt(t))},J=function(ce){w.onNodeMouseLeave(ce,Vt(t))},te=function(ce){w.onNodeContextMenu(ce,Vt(t))},re=F.useMemo(function(){return!!(w.draggable&&(!w.draggable.nodeDraggable||w.draggable.nodeDraggable(N)))},[w.draggable,N]),le=function(ce){ce.stopPropagation(),I(!0),w.onNodeDragStart(ce,t);try{ce.dataTransfer.setData("text/plain","")}catch{}},G=function(ce){ce.preventDefault(),ce.stopPropagation(),w.onNodeDragEnter(ce,t)},Q=function(ce){ce.preventDefault(),ce.stopPropagation(),w.onNodeDragOver(ce,t)},ee=function(ce){ce.stopPropagation(),w.onNodeDragLeave(ce,t)},V=function(ce){ce.stopPropagation(),I(!1),w.onNodeDragEnd(ce,t)},W=function(ce){ce.preventDefault(),ce.stopPropagation(),I(!1),w.onNodeDrop(ce,t)},ie=function(ce){b||w.onNodeExpand(ce,Vt(t))},Se=F.useMemo(function(){var Ee=hn(w.keyEntities,a)||{},ce=Ee.children;return!!(ce||[]).length},[w.keyEntities,a]),oe=F.useMemo(function(){return h===!1?!1:h||!w.loadData&&!Se||w.loadData&&t.loaded&&!Se},[h,w.loadData,Se,t.loaded]);F.useEffect(function(){b||typeof w.loadData=="function"&&v&&!oe&&!t.loaded&&w.onNodeLoad(Vt(t))},[b,w.loadData,w.onNodeLoad,v,oe,t]);var he=F.useMemo(function(){var Ee;return(Ee=w.draggable)!==null&&Ee!==void 0&&Ee.icon?F.createElement("span",{className:"".concat(w.prefixCls,"-draggable-icon")},w.draggable.icon):null},[w.draggable]),Oe=function(ce){var _e=t.switcherIcon||w.switcherIcon;return typeof _e=="function"?_e(pe(pe({},t),{},{isLeaf:ce})):_e},Re=function(){if(oe){var ce=Oe(!0);return ce!==!1?F.createElement("span",{className:be("".concat(w.prefixCls,"-switcher"),"".concat(w.prefixCls,"-switcher-noop"))},ce):null}var _e=Oe(!1);return _e!==!1?F.createElement("span",{onClick:ie,className:be("".concat(w.prefixCls,"-switcher"),"".concat(w.prefixCls,"-switcher_").concat(v?es:ts))},_e):null},$e=F.useMemo(function(){if(!L)return null;var Ee=typeof L!="boolean"?L:null;return F.createElement("span",{className:be("".concat(w.prefixCls,"-checkbox"),K(K(K({},"".concat(w.prefixCls,"-checkbox-checked"),g),"".concat(w.prefixCls,"-checkbox-indeterminate"),!g&&m),"".concat(w.prefixCls,"-checkbox-disabled"),k||t.disableCheckbox)),onClick:H,role:"checkbox","aria-checked":m?"mixed":g,"aria-disabled":k||t.disableCheckbox,"aria-label":"Select ".concat(typeof t.title=="string"?t.title:"tree node")},Ee)},[L,g,m,k,t.disableCheckbox,t.title]),Ae=F.useMemo(function(){return oe?null:v?es:ts},[oe,v]),we=F.useMemo(function(){return F.createElement("span",{className:be("".concat(w.prefixCls,"-iconEle"),"".concat(w.prefixCls,"-icon__").concat(Ae||"docu"),K({},"".concat(w.prefixCls,"-icon_loading"),b))})},[w.prefixCls,Ae,b]),je=F.useMemo(function(){var Ee=!!w.draggable,ce=!t.disabled&&Ee&&w.dragOverNodeKey===a;return ce?w.dropIndicatorRender({dropPosition:w.dropPosition,dropLevelOffset:w.dropLevelOffset,indent:w.indent,prefixCls:w.prefixCls,direction:w.direction}):null},[w.dropPosition,w.dropLevelOffset,w.indent,w.prefixCls,w.direction,w.draggable,w.dragOverNodeKey,w.dropIndicatorRender]),De=F.useMemo(function(){var Ee=t.title,ce=Ee===void 0?Zp:Ee,_e="".concat(w.prefixCls,"-node-content-wrapper"),mt;if(w.showIcon){var Fe=t.icon||w.icon;mt=Fe?F.createElement("span",{className:be("".concat(w.prefixCls,"-iconEle"),"".concat(w.prefixCls,"-icon__customize"))},typeof Fe=="function"?Fe(t):Fe):we}else w.loadData&&b&&(mt=we);var Xe;return typeof ce=="function"?Xe=ce(N):w.titleRender?Xe=w.titleRender(N):Xe=ce,F.createElement("span",{ref:T,title:typeof ce=="string"?ce:"",className:be(_e,"".concat(_e,"-").concat(Ae||"normal"),K({},"".concat(w.prefixCls,"-node-selected"),!k&&(y||A))),onMouseEnter:Z,onMouseLeave:J,onContextMenu:te,onClick:j,onDoubleClick:Y},mt,F.createElement("span",{className:"".concat(w.prefixCls,"-title")},Xe),je)},[w.prefixCls,w.showIcon,t,w.icon,we,w.titleRender,N,Ae,Z,J,te,j,Y]),ye=cr($,{aria:!0,data:!0}),We=hn(w.keyEntities,a)||{},qe=We.level,He=f[f.length-1],Pe=!k&&re,Ce=w.draggingNodeKey===a,Ue=x!==void 0?{"aria-selected":!!x}:void 0;return F.createElement("div",lt({ref:S,role:"treeitem","aria-expanded":h?void 0:v,className:be(s,"".concat(w.prefixCls,"-treenode"),(o={},K(K(K(K(K(K(K(K(K(K(o,"".concat(w.prefixCls,"-treenode-disabled"),k),"".concat(w.prefixCls,"-treenode-switcher-").concat(v?"open":"close"),!h),"".concat(w.prefixCls,"-treenode-checkbox-checked"),g),"".concat(w.prefixCls,"-treenode-checkbox-indeterminate"),m),"".concat(w.prefixCls,"-treenode-selected"),y),"".concat(w.prefixCls,"-treenode-loading"),b),"".concat(w.prefixCls,"-treenode-active"),C),"".concat(w.prefixCls,"-treenode-leaf-last"),He),"".concat(w.prefixCls,"-treenode-draggable"),re),"dragging",Ce),K(K(K(K(K(K(K(o,"drop-target",w.dropTargetKey===a),"drop-container",w.dropContainerKey===a),"drag-over",!k&&c),"drag-over-gap-top",!k&&u),"drag-over-gap-bottom",!k&&d),"filter-node",(r=w.filterTreeNode)===null||r===void 0?void 0:r.call(w,Vt(t))),"".concat(w.prefixCls,"-treenode-leaf"),oe))),style:i,draggable:Pe,onDragStart:Pe?le:void 0,onDragEnter:re?G:void 0,onDragOver:re?Q:void 0,onDragLeave:re?ee:void 0,onDrop:re?W:void 0,onDragEnd:re?V:void 0,onMouseMove:O},Ue,ye),F.createElement(Xp,{prefixCls:w.prefixCls,level:qe,isStart:p,isEnd:f}),he,Re(),$e,De)};Eo.isTreeNode=1;function kn(e,t){if(!e)return[];var n=e.slice(),r=n.indexOf(t);return r>=0&&n.splice(r,1),n}function Vn(e,t){var n=(e||[]).slice();return n.indexOf(t)===-1&&n.push(t),n}function ai(e){return e.split("-")}function Qp(e,t){var n=[],r=hn(t,e);function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];a.forEach(function(s){var i=s.key,c=s.children;n.push(i),o(c)})}return o(r.children),n}function Jp(e){if(e.parent){var t=ai(e.pos);return Number(t[t.length-1])===e.parent.children.length-1}return!1}function em(e){var t=ai(e.pos);return Number(t[t.length-1])===0}function ns(e,t,n,r,o,a,s,i,c,u){var d,h=e.clientX,p=e.clientY,f=e.target.getBoundingClientRect(),v=f.top,y=f.height,g=(u==="rtl"?-1:1)*(((o==null?void 0:o.x)||0)-h),m=(g-12)/r,b=c.filter(function(k){var L;return(L=i[k])===null||L===void 0||(L=L.children)===null||L===void 0?void 0:L.length}),S=hn(i,n.eventKey);if(p<v+y/2){var C=s.findIndex(function(k){return k.key===S.key}),N=C<=0?0:C-1,O=s[N].key;S=hn(i,O)}var x=S.key,$=S,w=S.key,R=0,T=0;if(!b.includes(x))for(var _=0;_<m&&Jp(S);_+=1)S=S.parent,T+=1;var z=t.data,A=S.node,I=!0;return em(S)&&S.level===0&&p<v+y/2&&a({dragNode:z,dropNode:A,dropPosition:-1})&&S.key===n.eventKey?R=-1:($.children||[]).length&&b.includes(w)?a({dragNode:z,dropNode:A,dropPosition:0})?R=0:I=!1:T===0?m>-1.5?a({dragNode:z,dropNode:A,dropPosition:1})?R=1:I=!1:a({dragNode:z,dropNode:A,dropPosition:0})?R=0:a({dragNode:z,dropNode:A,dropPosition:1})?R=1:I=!1:a({dragNode:z,dropNode:A,dropPosition:1})?R=1:I=!1,{dropPosition:R,dropLevelOffset:T,dropTargetKey:S.key,dropTargetPos:S.pos,dragOverNodeKey:w,dropContainerKey:R===0?null:((d=S.parent)===null||d===void 0?void 0:d.key)||null,dropAllowed:I}}function rs(e,t){if(e){var n=t.multiple;return n?e.slice():e.length?[e[0]]:e}}function Qo(e){if(!e)return null;var t;if(Array.isArray(e))t={checkedKeys:e,halfCheckedKeys:void 0};else if(on(e)==="object")t={checkedKeys:e.checked||void 0,halfCheckedKeys:e.halfChecked||void 0};else return nn(!1,"`checkedKeys` is not an array or an object"),null;return t}function os(e,t){var n=new Set;function r(o){if(!n.has(o)){var a=hn(t,o);if(a){n.add(o);var s=a.parent,i=a.node;i.disabled||s&&r(s.key)}}}return(e||[]).forEach(function(o){r(o)}),at(n)}var tm=function(t){var n=t.dropPosition,r=t.dropLevelOffset,o=t.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(n){case-1:a.top=0,a.left=-r*o;break;case 1:a.bottom=0,a.left=-r*o;break;case 0:a.bottom=0,a.left=o;break}return F.createElement("div",{style:a})};function ac(e){if(e==null)throw new TypeError("Cannot destructure "+e)}function nm(e,t){var n=l.useState(!1),r=me(n,2),o=r[0],a=r[1];sn(function(){if(o)return e(),function(){t()}},[o]),sn(function(){return a(!0),function(){a(!1)}},[])}var rm=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],om=l.forwardRef(function(e,t){var n=e.className,r=e.style,o=e.motion,a=e.motionNodes,s=e.motionType,i=e.onMotionStart,c=e.onMotionEnd,u=e.active,d=e.treeNodeRequiredProps,h=Wt(e,rm),p=l.useState(!0),f=me(p,2),v=f[0],y=f[1],g=l.useContext(oi),m=g.prefixCls,b=a&&s!=="hide";sn(function(){a&&b!==v&&y(b)},[a]);var S=function(){a&&i()},C=l.useRef(!1),N=function(){a&&!C.current&&(C.current=!0,c())};nm(S,N);var O=function($){b===$&&N()};return a?l.createElement(Js,lt({ref:t,visible:v},o,{motionAppear:s==="show",onVisibleChanged:O}),function(x,$){var w=x.className,R=x.style;return l.createElement("div",{ref:$,className:be("".concat(m,"-treenode-motion"),w),style:R},a.map(function(T){var _=Object.assign({},(ac(T.data),T.data)),z=T.title,A=T.key,I=T.isStart,k=T.isEnd;delete _.children;var L=zr(A,d);return l.createElement(Eo,lt({},_,L,{title:z,active:u,data:T.data,key:A,isStart:I,isEnd:k}))}))}):l.createElement(Eo,lt({domRef:t,className:n,style:r},h,{active:u}))});function am(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e.length,r=t.length;if(Math.abs(n-r)!==1)return{add:!1,key:null};function o(a,s){var i=new Map;a.forEach(function(u){i.set(u,!0)});var c=s.filter(function(u){return!i.has(u)});return c.length===1?c[0]:null}return n<r?{add:!0,key:o(e,t)}:{add:!1,key:o(t,e)}}function as(e,t,n){var r=e.findIndex(function(i){return i.key===n}),o=e[r+1],a=t.findIndex(function(i){return i.key===n});if(o){var s=t.findIndex(function(i){return i.key===o.key});return t.slice(a+1,s)}return t.slice(a+1)}var im=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","scrollWidth","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],is={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},sm=function(){},dr="RC_TREE_MOTION_".concat(Math.random()),Ea={key:dr},ic={key:dr,level:0,index:0,pos:"0",node:Ea,nodes:[Ea]},ss={parent:null,children:[],pos:ic.pos,data:Ea,title:null,key:dr,isStart:[],isEnd:[]};function ls(e,t,n,r){return t===!1||!n?e:e.slice(0,Math.ceil(n/r)+1)}function cs(e){var t=e.key,n=e.pos;return Ur(t,n)}function lm(e){for(var t=String(e.data.key),n=e;n.parent;)n=n.parent,t="".concat(n.data.key," > ").concat(t);return t}var cm=l.forwardRef(function(e,t){var n=e.prefixCls,r=e.data;e.selectable,e.checkable;var o=e.expandedKeys,a=e.selectedKeys,s=e.checkedKeys,i=e.loadedKeys,c=e.loadingKeys,u=e.halfCheckedKeys,d=e.keyEntities,h=e.disabled,p=e.dragging,f=e.dragOverNodeKey,v=e.dropPosition,y=e.motion,g=e.height,m=e.itemHeight,b=e.virtual,S=e.scrollWidth,C=e.focusable,N=e.activeItem,O=e.focused,x=e.tabIndex,$=e.onKeyDown,w=e.onFocus,R=e.onBlur,T=e.onActiveChange,_=e.onListChangeStart,z=e.onListChangeEnd,A=Wt(e,im),I=l.useRef(null),k=l.useRef(null);l.useImperativeHandle(t,function(){return{scrollTo:function(je){I.current.scrollTo(je)},getIndentWidth:function(){return k.current.offsetWidth}}});var L=l.useState(o),B=me(L,2),H=B[0],q=B[1],j=l.useState(r),Y=me(j,2),Z=Y[0],J=Y[1],te=l.useState(r),re=me(te,2),le=re[0],G=re[1],Q=l.useState([]),ee=me(Q,2),V=ee[0],W=ee[1],ie=l.useState(null),Se=me(ie,2),oe=Se[0],he=Se[1],Oe=l.useRef(r);Oe.current=r;function Re(){var we=Oe.current;J(we),G(we),W([]),he(null),z()}sn(function(){q(o);var we=am(H,o);if(we.key!==null)if(we.add){var je=Z.findIndex(function(Pe){var Ce=Pe.key;return Ce===we.key}),De=ls(as(Z,r,we.key),b,g,m),ye=Z.slice();ye.splice(je+1,0,ss),G(ye),W(De),he("show")}else{var We=r.findIndex(function(Pe){var Ce=Pe.key;return Ce===we.key}),qe=ls(as(r,Z,we.key),b,g,m),He=r.slice();He.splice(We+1,0,ss),G(He),W(qe),he("hide")}else Z!==r&&(J(r),G(r))},[o,r]),l.useEffect(function(){p||Re()},[p]);var $e=y?le:r,Ae={expandedKeys:o,selectedKeys:a,loadedKeys:i,loadingKeys:c,checkedKeys:s,halfCheckedKeys:u,dragOverNodeKey:f,dropPosition:v,keyEntities:d};return l.createElement(l.Fragment,null,O&&N&&l.createElement("span",{style:is,"aria-live":"assertive"},lm(N)),l.createElement("div",null,l.createElement("input",{style:is,disabled:C===!1||h,tabIndex:C!==!1?x:null,onKeyDown:$,onFocus:w,onBlur:R,value:"",onChange:sm,"aria-label":"for screen reader"})),l.createElement("div",{className:"".concat(n,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},l.createElement("div",{className:"".concat(n,"-indent")},l.createElement("div",{ref:k,className:"".concat(n,"-indent-unit")}))),l.createElement(Xa,lt({},A,{data:$e,itemKey:cs,height:g,fullHeight:!1,virtual:b,itemHeight:m,scrollWidth:S,prefixCls:"".concat(n,"-list"),ref:I,role:"tree",onVisibleChange:function(je){je.every(function(De){return cs(De)!==dr})&&Re()}}),function(we){var je=we.pos,De=Object.assign({},(ac(we.data),we.data)),ye=we.title,We=we.key,qe=we.isStart,He=we.isEnd,Pe=Ur(We,je);delete De.key,delete De.children;var Ce=zr(Pe,Ae);return l.createElement(om,lt({},De,Ce,{title:ye,active:!!N&&We===N.key,pos:je,data:we.data,isStart:qe,isEnd:He,motion:y,motionNodes:We===dr?V:null,motionType:oe,onMotionStart:_,onMotionEnd:Re,treeNodeRequiredProps:Ae,onMouseMove:function(){T(null)}}))}))}),um=10,ii=function(e){bu(n,e);var t=Su(n);function n(){var r;$o(this,n);for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];return r=t.call.apply(t,[this].concat(a)),K(gt(r),"destroyed",!1),K(gt(r),"delayedDragEnterLogic",void 0),K(gt(r),"loadingRetryTimes",{}),K(gt(r),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:wo()}),K(gt(r),"dragStartMousePosition",null),K(gt(r),"dragNodeProps",null),K(gt(r),"currentMouseOverDroppableNodeKey",null),K(gt(r),"listRef",l.createRef()),K(gt(r),"onNodeDragStart",function(i,c){var u=r.state,d=u.expandedKeys,h=u.keyEntities,p=r.props.onDragStart,f=c.eventKey;r.dragNodeProps=c,r.dragStartMousePosition={x:i.clientX,y:i.clientY};var v=kn(d,f);r.setState({draggingNodeKey:f,dragChildrenKeys:Qp(f,h),indent:r.listRef.current.getIndentWidth()}),r.setExpandedKeys(v),window.addEventListener("dragend",r.onWindowDragEnd),p==null||p({event:i,node:Vt(c)})}),K(gt(r),"onNodeDragEnter",function(i,c){var u=r.state,d=u.expandedKeys,h=u.keyEntities,p=u.dragChildrenKeys,f=u.flattenNodes,v=u.indent,y=r.props,g=y.onDragEnter,m=y.onExpand,b=y.allowDrop,S=y.direction,C=c.pos,N=c.eventKey;if(r.currentMouseOverDroppableNodeKey!==N&&(r.currentMouseOverDroppableNodeKey=N),!r.dragNodeProps){r.resetDragState();return}var O=ns(i,r.dragNodeProps,c,v,r.dragStartMousePosition,b,f,h,d,S),x=O.dropPosition,$=O.dropLevelOffset,w=O.dropTargetKey,R=O.dropContainerKey,T=O.dropTargetPos,_=O.dropAllowed,z=O.dragOverNodeKey;if(p.includes(w)||!_){r.resetDragState();return}if(r.delayedDragEnterLogic||(r.delayedDragEnterLogic={}),Object.keys(r.delayedDragEnterLogic).forEach(function(A){clearTimeout(r.delayedDragEnterLogic[A])}),r.dragNodeProps.eventKey!==c.eventKey&&(i.persist(),r.delayedDragEnterLogic[C]=window.setTimeout(function(){if(r.state.draggingNodeKey!==null){var A=at(d),I=hn(h,c.eventKey);I&&(I.children||[]).length&&(A=Vn(d,c.eventKey)),r.props.hasOwnProperty("expandedKeys")||r.setExpandedKeys(A),m==null||m(A,{node:Vt(c),expanded:!0,nativeEvent:i.nativeEvent})}},800)),r.dragNodeProps.eventKey===w&&$===0){r.resetDragState();return}r.setState({dragOverNodeKey:z,dropPosition:x,dropLevelOffset:$,dropTargetKey:w,dropContainerKey:R,dropTargetPos:T,dropAllowed:_}),g==null||g({event:i,node:Vt(c),expandedKeys:d})}),K(gt(r),"onNodeDragOver",function(i,c){var u=r.state,d=u.dragChildrenKeys,h=u.flattenNodes,p=u.keyEntities,f=u.expandedKeys,v=u.indent,y=r.props,g=y.onDragOver,m=y.allowDrop,b=y.direction;if(r.dragNodeProps){var S=ns(i,r.dragNodeProps,c,v,r.dragStartMousePosition,m,h,p,f,b),C=S.dropPosition,N=S.dropLevelOffset,O=S.dropTargetKey,x=S.dropContainerKey,$=S.dropTargetPos,w=S.dropAllowed,R=S.dragOverNodeKey;d.includes(O)||!w||(r.dragNodeProps.eventKey===O&&N===0?r.state.dropPosition===null&&r.state.dropLevelOffset===null&&r.state.dropTargetKey===null&&r.state.dropContainerKey===null&&r.state.dropTargetPos===null&&r.state.dropAllowed===!1&&r.state.dragOverNodeKey===null||r.resetDragState():C===r.state.dropPosition&&N===r.state.dropLevelOffset&&O===r.state.dropTargetKey&&x===r.state.dropContainerKey&&$===r.state.dropTargetPos&&w===r.state.dropAllowed&&R===r.state.dragOverNodeKey||r.setState({dropPosition:C,dropLevelOffset:N,dropTargetKey:O,dropContainerKey:x,dropTargetPos:$,dropAllowed:w,dragOverNodeKey:R}),g==null||g({event:i,node:Vt(c)}))}}),K(gt(r),"onNodeDragLeave",function(i,c){r.currentMouseOverDroppableNodeKey===c.eventKey&&!i.currentTarget.contains(i.relatedTarget)&&(r.resetDragState(),r.currentMouseOverDroppableNodeKey=null);var u=r.props.onDragLeave;u==null||u({event:i,node:Vt(c)})}),K(gt(r),"onWindowDragEnd",function(i){r.onNodeDragEnd(i,null,!0),window.removeEventListener("dragend",r.onWindowDragEnd)}),K(gt(r),"onNodeDragEnd",function(i,c){var u=r.props.onDragEnd;r.setState({dragOverNodeKey:null}),r.cleanDragState(),u==null||u({event:i,node:Vt(c)}),r.dragNodeProps=null,window.removeEventListener("dragend",r.onWindowDragEnd)}),K(gt(r),"onNodeDrop",function(i,c){var u,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=r.state,p=h.dragChildrenKeys,f=h.dropPosition,v=h.dropTargetKey,y=h.dropTargetPos,g=h.dropAllowed;if(g){var m=r.props.onDrop;if(r.setState({dragOverNodeKey:null}),r.cleanDragState(),v!==null){var b=pe(pe({},zr(v,r.getTreeNodeRequiredProps())),{},{active:((u=r.getActiveItem())===null||u===void 0?void 0:u.key)===v,data:hn(r.state.keyEntities,v).node}),S=p.includes(v);nn(!S,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var C=ai(y),N={event:i,node:Vt(b),dragNode:r.dragNodeProps?Vt(r.dragNodeProps):null,dragNodesKeys:[r.dragNodeProps.eventKey].concat(p),dropToGap:f!==0,dropPosition:f+Number(C[C.length-1])};d||m==null||m(N),r.dragNodeProps=null}}}),K(gt(r),"cleanDragState",function(){var i=r.state.draggingNodeKey;i!==null&&r.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),r.dragStartMousePosition=null,r.currentMouseOverDroppableNodeKey=null}),K(gt(r),"triggerExpandActionExpand",function(i,c){var u=r.state,d=u.expandedKeys,h=u.flattenNodes,p=c.expanded,f=c.key,v=c.isLeaf;if(!(v||i.shiftKey||i.metaKey||i.ctrlKey)){var y=h.filter(function(m){return m.key===f})[0],g=Vt(pe(pe({},zr(f,r.getTreeNodeRequiredProps())),{},{data:y.data}));r.setExpandedKeys(p?kn(d,f):Vn(d,f)),r.onNodeExpand(i,g)}}),K(gt(r),"onNodeClick",function(i,c){var u=r.props,d=u.onClick,h=u.expandAction;h==="click"&&r.triggerExpandActionExpand(i,c),d==null||d(i,c)}),K(gt(r),"onNodeDoubleClick",function(i,c){var u=r.props,d=u.onDoubleClick,h=u.expandAction;h==="doubleClick"&&r.triggerExpandActionExpand(i,c),d==null||d(i,c)}),K(gt(r),"onNodeSelect",function(i,c){var u=r.state.selectedKeys,d=r.state,h=d.keyEntities,p=d.fieldNames,f=r.props,v=f.onSelect,y=f.multiple,g=c.selected,m=c[p.key],b=!g;b?y?u=Vn(u,m):u=[m]:u=kn(u,m);var S=u.map(function(C){var N=hn(h,C);return N?N.node:null}).filter(Boolean);r.setUncontrolledState({selectedKeys:u}),v==null||v(u,{event:"select",selected:b,node:c,selectedNodes:S,nativeEvent:i.nativeEvent})}),K(gt(r),"onNodeCheck",function(i,c,u){var d=r.state,h=d.keyEntities,p=d.checkedKeys,f=d.halfCheckedKeys,v=r.props,y=v.checkStrictly,g=v.onCheck,m=c.key,b,S={event:"check",node:c,checked:u,nativeEvent:i.nativeEvent};if(y){var C=u?Vn(p,m):kn(p,m),N=kn(f,m);b={checked:C,halfChecked:N},S.checkedNodes=C.map(function(T){return hn(h,T)}).filter(Boolean).map(function(T){return T.node}),r.setUncontrolledState({checkedKeys:C})}else{var O=Er([].concat(at(p),[m]),!0,h),x=O.checkedKeys,$=O.halfCheckedKeys;if(!u){var w=new Set(x);w.delete(m);var R=Er(Array.from(w),{halfCheckedKeys:$},h);x=R.checkedKeys,$=R.halfCheckedKeys}b=x,S.checkedNodes=[],S.checkedNodesPositions=[],S.halfCheckedKeys=$,x.forEach(function(T){var _=hn(h,T);if(_){var z=_.node,A=_.pos;S.checkedNodes.push(z),S.checkedNodesPositions.push({node:z,pos:A})}}),r.setUncontrolledState({checkedKeys:x},!1,{halfCheckedKeys:$})}g==null||g(b,S)}),K(gt(r),"onNodeLoad",function(i){var c,u=i.key,d=r.state.keyEntities,h=hn(d,u);if(!(h!=null&&(c=h.children)!==null&&c!==void 0&&c.length)){var p=new Promise(function(f,v){r.setState(function(y){var g=y.loadedKeys,m=g===void 0?[]:g,b=y.loadingKeys,S=b===void 0?[]:b,C=r.props,N=C.loadData,O=C.onLoad;if(!N||m.includes(u)||S.includes(u))return null;var x=N(i);return x.then(function(){var $=r.state.loadedKeys,w=Vn($,u);O==null||O(w,{event:"load",node:i}),r.setUncontrolledState({loadedKeys:w}),r.setState(function(R){return{loadingKeys:kn(R.loadingKeys,u)}}),f()}).catch(function($){if(r.setState(function(R){return{loadingKeys:kn(R.loadingKeys,u)}}),r.loadingRetryTimes[u]=(r.loadingRetryTimes[u]||0)+1,r.loadingRetryTimes[u]>=um){var w=r.state.loadedKeys;nn(!1,"Retry for `loadData` many times but still failed. No more retry."),r.setUncontrolledState({loadedKeys:Vn(w,u)}),f()}v($)}),{loadingKeys:Vn(S,u)}})});return p.catch(function(){}),p}}),K(gt(r),"onNodeMouseEnter",function(i,c){var u=r.props.onMouseEnter;u==null||u({event:i,node:c})}),K(gt(r),"onNodeMouseLeave",function(i,c){var u=r.props.onMouseLeave;u==null||u({event:i,node:c})}),K(gt(r),"onNodeContextMenu",function(i,c){var u=r.props.onRightClick;u&&(i.preventDefault(),u({event:i,node:c}))}),K(gt(r),"onFocus",function(){var i=r.props.onFocus;r.setState({focused:!0});for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];i==null||i.apply(void 0,u)}),K(gt(r),"onBlur",function(){var i=r.props.onBlur;r.setState({focused:!1}),r.onActiveChange(null);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];i==null||i.apply(void 0,u)}),K(gt(r),"getTreeNodeRequiredProps",function(){var i=r.state,c=i.expandedKeys,u=i.selectedKeys,d=i.loadedKeys,h=i.loadingKeys,p=i.checkedKeys,f=i.halfCheckedKeys,v=i.dragOverNodeKey,y=i.dropPosition,g=i.keyEntities;return{expandedKeys:c||[],selectedKeys:u||[],loadedKeys:d||[],loadingKeys:h||[],checkedKeys:p||[],halfCheckedKeys:f||[],dragOverNodeKey:v,dropPosition:y,keyEntities:g}}),K(gt(r),"setExpandedKeys",function(i){var c=r.state,u=c.treeData,d=c.fieldNames,h=Yo(u,i,d);r.setUncontrolledState({expandedKeys:i,flattenNodes:h},!0)}),K(gt(r),"onNodeExpand",function(i,c){var u=r.state.expandedKeys,d=r.state,h=d.listChanging,p=d.fieldNames,f=r.props,v=f.onExpand,y=f.loadData,g=c.expanded,m=c[p.key];if(!h){var b=u.includes(m),S=!g;if(nn(g&&b||!g&&!b,"Expand state not sync with index check"),u=S?Vn(u,m):kn(u,m),r.setExpandedKeys(u),v==null||v(u,{node:c,expanded:S,nativeEvent:i.nativeEvent}),S&&y){var C=r.onNodeLoad(c);C&&C.then(function(){var N=Yo(r.state.treeData,u,p);r.setUncontrolledState({flattenNodes:N})}).catch(function(){var N=r.state.expandedKeys,O=kn(N,m);r.setExpandedKeys(O)})}}}),K(gt(r),"onListChangeStart",function(){r.setUncontrolledState({listChanging:!0})}),K(gt(r),"onListChangeEnd",function(){setTimeout(function(){r.setUncontrolledState({listChanging:!1})})}),K(gt(r),"onActiveChange",function(i){var c=r.state.activeKey,u=r.props,d=u.onActiveChange,h=u.itemScrollOffset,p=h===void 0?0:h;c!==i&&(r.setState({activeKey:i}),i!==null&&r.scrollTo({key:i,offset:p}),d==null||d(i))}),K(gt(r),"getActiveItem",function(){var i=r.state,c=i.activeKey,u=i.flattenNodes;return c===null?null:u.find(function(d){var h=d.key;return h===c})||null}),K(gt(r),"offsetActiveKey",function(i){var c=r.state,u=c.flattenNodes,d=c.activeKey,h=u.findIndex(function(v){var y=v.key;return y===d});h===-1&&i<0&&(h=u.length),h=(h+i+u.length)%u.length;var p=u[h];if(p){var f=p.key;r.onActiveChange(f)}else r.onActiveChange(null)}),K(gt(r),"onKeyDown",function(i){var c=r.state,u=c.activeKey,d=c.expandedKeys,h=c.checkedKeys,p=c.fieldNames,f=r.props,v=f.onKeyDown,y=f.checkable,g=f.selectable;switch(i.which){case Ne.UP:{r.offsetActiveKey(-1),i.preventDefault();break}case Ne.DOWN:{r.offsetActiveKey(1),i.preventDefault();break}}var m=r.getActiveItem();if(m&&m.data){var b=r.getTreeNodeRequiredProps(),S=m.data.isLeaf===!1||!!(m.data[p.children]||[]).length,C=Vt(pe(pe({},zr(u,b)),{},{data:m.data,active:!0}));switch(i.which){case Ne.LEFT:{S&&d.includes(u)?r.onNodeExpand({},C):m.parent&&r.onActiveChange(m.parent.key),i.preventDefault();break}case Ne.RIGHT:{S&&!d.includes(u)?r.onNodeExpand({},C):m.children&&m.children.length&&r.onActiveChange(m.children[0].key),i.preventDefault();break}case Ne.ENTER:case Ne.SPACE:{y&&!C.disabled&&C.checkable!==!1&&!C.disableCheckbox?r.onNodeCheck({},C,!h.includes(u)):!y&&g&&!C.disabled&&C.selectable!==!1&&r.onNodeSelect({},C);break}}}v==null||v(i)}),K(gt(r),"setUncontrolledState",function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!r.destroyed){var d=!1,h=!0,p={};Object.keys(i).forEach(function(f){if(r.props.hasOwnProperty(f)){h=!1;return}d=!0,p[f]=i[f]}),d&&(!c||h)&&r.setState(pe(pe({},p),u))}}),K(gt(r),"scrollTo",function(i){r.listRef.current.scrollTo(i)}),r}return Oo(n,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var o=this.props,a=o.activeKey,s=o.itemScrollOffset,i=s===void 0?0:s;a!==void 0&&a!==this.state.activeKey&&(this.setState({activeKey:a}),a!==null&&this.scrollTo({key:a,offset:i}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var o=this.state,a=o.focused,s=o.flattenNodes,i=o.keyEntities,c=o.draggingNodeKey,u=o.activeKey,d=o.dropLevelOffset,h=o.dropContainerKey,p=o.dropTargetKey,f=o.dropPosition,v=o.dragOverNodeKey,y=o.indent,g=this.props,m=g.prefixCls,b=g.className,S=g.style,C=g.showLine,N=g.focusable,O=g.tabIndex,x=O===void 0?0:O,$=g.selectable,w=g.showIcon,R=g.icon,T=g.switcherIcon,_=g.draggable,z=g.checkable,A=g.checkStrictly,I=g.disabled,k=g.motion,L=g.loadData,B=g.filterTreeNode,H=g.height,q=g.itemHeight,j=g.scrollWidth,Y=g.virtual,Z=g.titleRender,J=g.dropIndicatorRender,te=g.onContextMenu,re=g.onScroll,le=g.direction,G=g.rootClassName,Q=g.rootStyle,ee=cr(this.props,{aria:!0,data:!0}),V;_&&(on(_)==="object"?V=_:typeof _=="function"?V={nodeDraggable:_}:V={});var W={prefixCls:m,selectable:$,showIcon:w,icon:R,switcherIcon:T,draggable:V,draggingNodeKey:c,checkable:z,checkStrictly:A,disabled:I,keyEntities:i,dropLevelOffset:d,dropContainerKey:h,dropTargetKey:p,dropPosition:f,dragOverNodeKey:v,indent:y,direction:le,dropIndicatorRender:J,loadData:L,filterTreeNode:B,titleRender:Z,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop};return l.createElement(oi.Provider,{value:W},l.createElement("div",{className:be(m,b,G,K(K(K({},"".concat(m,"-show-line"),C),"".concat(m,"-focused"),a),"".concat(m,"-active-focused"),u!==null)),style:Q},l.createElement(cm,lt({ref:this.listRef,prefixCls:m,style:S,data:s,disabled:I,selectable:$,checkable:!!z,motion:k,dragging:c!==null,height:H,itemHeight:q,virtual:Y,focusable:N,focused:a,tabIndex:x,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:te,onScroll:re,scrollWidth:j},this.getTreeNodeRequiredProps(),ee))))}}],[{key:"getDerivedStateFromProps",value:function(o,a){var s=a.prevProps,i={prevProps:o};function c(x){return!s&&o.hasOwnProperty(x)||s&&s[x]!==o[x]}var u,d=a.fieldNames;if(c("fieldNames")&&(d=wo(o.fieldNames),i.fieldNames=d),c("treeData")?u=o.treeData:c("children")&&(nn(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),u=jf(o.children)),u){i.treeData=u;var h=Bl(u,{fieldNames:d});i.keyEntities=pe(K({},dr,ic),h.keyEntities)}var p=i.keyEntities||a.keyEntities;if(c("expandedKeys")||s&&c("autoExpandParent"))i.expandedKeys=o.autoExpandParent||!s&&o.defaultExpandParent?os(o.expandedKeys,p):o.expandedKeys;else if(!s&&o.defaultExpandAll){var f=pe({},p);delete f[dr];var v=[];Object.keys(f).forEach(function(x){var $=f[x];$.children&&$.children.length&&v.push($.key)}),i.expandedKeys=v}else!s&&o.defaultExpandedKeys&&(i.expandedKeys=o.autoExpandParent||o.defaultExpandParent?os(o.defaultExpandedKeys,p):o.defaultExpandedKeys);if(i.expandedKeys||delete i.expandedKeys,u||i.expandedKeys){var y=Yo(u||a.treeData,i.expandedKeys||a.expandedKeys,d);i.flattenNodes=y}if(o.selectable&&(c("selectedKeys")?i.selectedKeys=rs(o.selectedKeys,o):!s&&o.defaultSelectedKeys&&(i.selectedKeys=rs(o.defaultSelectedKeys,o))),o.checkable){var g;if(c("checkedKeys")?g=Qo(o.checkedKeys)||{}:!s&&o.defaultCheckedKeys?g=Qo(o.defaultCheckedKeys)||{}:u&&(g=Qo(o.checkedKeys)||{checkedKeys:a.checkedKeys,halfCheckedKeys:a.halfCheckedKeys}),g){var m=g,b=m.checkedKeys,S=b===void 0?[]:b,C=m.halfCheckedKeys,N=C===void 0?[]:C;if(!o.checkStrictly){var O=Er(S,!0,p);S=O.checkedKeys,N=O.halfCheckedKeys}i.checkedKeys=S,i.halfCheckedKeys=N}}return c("loadedKeys")&&(i.loadedKeys=o.loadedKeys),i}}]),n}(l.Component);K(ii,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:tm,allowDrop:function(){return!0},expandAction:!1});K(ii,"TreeNode",Eo);const dm=e=>{let{treeCls:t,treeNodeCls:n,directoryNodeSelectedBg:r,directoryNodeSelectedColor:o,motionDurationMid:a,borderRadius:s,controlItemBgHover:i}=e;return{[`${t}${t}-directory ${n}`]:{[`${t}-node-content-wrapper`]:{position:"static",[`> *:not(${t}-drop-indicator)`]:{position:"relative"},"&:hover":{background:"transparent"},"&:before":{position:"absolute",inset:0,transition:`background-color ${a}`,content:'""',borderRadius:s},"&:hover:before":{background:i}},[`${t}-switcher, ${t}-checkbox, ${t}-draggable-icon`]:{zIndex:1},"&-selected":{[`${t}-switcher, ${t}-draggable-icon`]:{color:o},[`${t}-node-content-wrapper`]:{color:o,background:"transparent","&:before, &:hover:before":{background:r}}}}}},hm=new Cu("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),fm=(e,t)=>({[`.${e}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${t.motionDurationSlow}`}}}),gm=(e,t)=>({[`.${e}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:t.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${ve(t.lineWidthBold)} solid ${t.colorPrimary}`,borderRadius:"50%",content:'""'}}}),pm=(e,t)=>{const{treeCls:n,treeNodeCls:r,treeNodePadding:o,titleHeight:a,indentSize:s,nodeSelectedBg:i,nodeHoverBg:c,colorTextQuaternary:u,controlItemBgActiveDisabled:d}=t;return{[n]:Object.assign(Object.assign({},fn(t)),{background:t.colorBgContainer,borderRadius:t.borderRadius,transition:`background-color ${t.motionDurationSlow}`,"&-rtl":{direction:"rtl"},[`&${n}-rtl ${n}-switcher_close ${n}-switcher-icon svg`]:{transform:"rotate(90deg)"},[`&-focused:not(:hover):not(${n}-active-focused)`]:Object.assign({},Ta(t)),[`${n}-list-holder-inner`]:{alignItems:"flex-start"},[`&${n}-block-node`]:{[`${n}-list-holder-inner`]:{alignItems:"stretch",[`${n}-node-content-wrapper`]:{flex:"auto"},[`${r}.dragging:after`]:{position:"absolute",inset:0,border:`1px solid ${t.colorPrimary}`,opacity:0,animationName:hm,animationDuration:t.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none",borderRadius:t.borderRadius}}},[r]:{display:"flex",alignItems:"flex-start",marginBottom:o,lineHeight:ve(a),position:"relative","&:before":{content:'""',position:"absolute",zIndex:1,insetInlineStart:0,width:"100%",top:"100%",height:o},[`&-disabled ${n}-node-content-wrapper`]:{color:t.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}},[`${n}-checkbox-disabled + ${n}-node-selected,&${r}-disabled${r}-selected ${n}-node-content-wrapper`]:{backgroundColor:d},[`${n}-checkbox-disabled`]:{pointerEvents:"unset"},[`&:not(${r}-disabled)`]:{[`${n}-node-content-wrapper`]:{"&:hover":{color:t.nodeHoverColor}}},[`&-active ${n}-node-content-wrapper`]:{background:t.controlItemBgHover},[`&:not(${r}-disabled).filter-node ${n}-title`]:{color:t.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${n}-draggable-icon`]:{flexShrink:0,width:a,textAlign:"center",visibility:"visible",color:u},[`&${r}-disabled ${n}-draggable-icon`]:{visibility:"hidden"}}},[`${n}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:s}},[`${n}-draggable-icon`]:{visibility:"hidden"},[`${n}-switcher, ${n}-checkbox`]:{marginInlineEnd:t.calc(t.calc(a).sub(t.controlInteractiveSize)).div(2).equal()},[`${n}-switcher`]:Object.assign(Object.assign({},fm(e,t)),{position:"relative",flex:"none",alignSelf:"stretch",width:a,textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${t.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:a,height:a,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:t.borderRadius,transition:`all ${t.motionDurationSlow}`},[`&:not(${n}-switcher-noop):hover:before`]:{backgroundColor:t.colorBgTextHover},[`&_close ${n}-switcher-icon svg`]:{transform:"rotate(-90deg)"},"&-loading-icon":{color:t.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(a).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:t.calc(t.calc(a).div(2).equal()).mul(.8).equal(),height:t.calc(a).div(2).equal(),borderBottom:`1px solid ${t.colorBorder}`,content:'""'}}}),[`${n}-node-content-wrapper`]:Object.assign(Object.assign({position:"relative",minHeight:a,paddingBlock:0,paddingInline:t.paddingXS,background:"transparent",borderRadius:t.borderRadius,cursor:"pointer",transition:`all ${t.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`},gm(e,t)),{"&:hover":{backgroundColor:c},[`&${n}-node-selected`]:{color:t.nodeSelectedColor,backgroundColor:i},[`${n}-iconEle`]:{display:"inline-block",width:a,height:a,textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}}),[`${n}-unselectable ${n}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${r}.drop-container > [draggable]`]:{boxShadow:`0 0 0 2px ${t.colorPrimary}`},"&-show-line":{[`${n}-indent-unit`]:{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:t.calc(a).div(2).equal(),bottom:t.calc(o).mul(-1).equal(),borderInlineEnd:`1px solid ${t.colorBorder}`,content:'""'},"&-end:before":{display:"none"}},[`${n}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${r}-leaf-last ${n}-switcher-leaf-line:before`]:{top:"auto !important",bottom:"auto !important",height:`${ve(t.calc(a).div(2).equal())} !important`}})}},sc=(e,t)=>{const n=`.${e}`,r=`${n}-treenode`,o=t.calc(t.paddingXS).div(2).equal(),a=rn(t,{treeCls:n,treeNodeCls:r,treeNodePadding:o});return[pm(e,a),dm(a)]},lc=e=>{const{controlHeightSM:t,controlItemBgHover:n,controlItemBgActive:r}=e,o=t;return{titleHeight:o,indentSize:o,nodeHoverBg:n,nodeHoverColor:e.colorText,nodeSelectedBg:r,nodeSelectedColor:e.colorText}},mm=e=>{const{colorTextLightSolid:t,colorPrimary:n}=e;return Object.assign(Object.assign({},lc(e)),{directoryNodeSelectedColor:t,directoryNodeSelectedBg:n})};In("Tree",(e,t)=>{let{prefixCls:n}=t;return[{[e.componentCls]:Za(`${n}-checkbox`,e)},sc(n,e),xu(e)]},mm);const vm=e=>{const{prefixCls:t,switcherIcon:n,treeNodeProps:r,showLine:o,switcherLoadingIcon:a}=e,{isLeaf:s,expanded:i,loading:c}=r;if(c)return l.isValidElement(a)?a:l.createElement(Xs,{className:`${t}-switcher-loading-icon`});let u;if(o&&typeof o=="object"&&(u=o.showLeafIcon),s){if(!o)return null;if(typeof u!="boolean"&&u){const p=typeof u=="function"?u(r):u,f=`${t}-switcher-line-custom-icon`;return l.isValidElement(p)?ga(p,{className:be(p.props.className||"",f)}):p}return u?l.createElement(zp,{className:`${t}-switcher-line-icon`}):l.createElement("span",{className:`${t}-switcher-leaf-line`})}const d=`${t}-switcher-icon`,h=typeof n=="function"?n(r):n;return l.isValidElement(h)?ga(h,{className:be(h.props.className||"",d)}):h!==void 0?h:o?i?l.createElement(Fp,{className:`${t}-switcher-line-icon`}):l.createElement(Up,{className:`${t}-switcher-line-icon`}):l.createElement(_p,{className:d})},ym=function(e){var t=l.useRef({valueLabels:new Map});return l.useMemo(function(){var n=t.current.valueLabels,r=new Map,o=e.map(function(a){var s=a.value,i=a.label,c=i??n.get(s);return r.set(s,c),pe(pe({},a),{},{label:c})});return t.current.valueLabels=r,[o]},[e])};var bm=function(t,n,r,o){return l.useMemo(function(){var a=function(f){return f.map(function(v){var y=v.value;return y})},s=a(t),i=a(n),c=s.filter(function(p){return!o[p]}),u=s,d=i;if(r){var h=Er(s,!0,o);u=h.checkedKeys,d=h.halfCheckedKeys}return[Array.from(new Set([].concat(at(c),at(u)))),d]},[t,n,r,o])},Sm=function(t){return Array.isArray(t)?t:t!==void 0?[t]:[]},Cm=function(t){var n=t||{},r=n.label,o=n.value,a=n.children;return{_title:r?[r]:["title","label"],value:o||"value",key:o||"value",children:a||"children"}},Ma=function(t){return!t||t.disabled||t.disableCheckbox||t.checkable===!1},xm=function(t,n){var r=[],o=function a(s){s.forEach(function(i){var c=i[n.children];c&&(r.push(i[n.value]),a(c))})};return o(t),r},us=function(t){return t==null};const wm=function(e,t){return l.useMemo(function(){var n=Bl(e,{fieldNames:t,initWrapper:function(o){return pe(pe({},o),{},{valueEntities:new Map})},processEntity:function(o,a){var s=o.node[t.value];a.valueEntities.set(s,o)}});return n},[e,t])};var si=function(){return null},Em=["children","value"];function cc(e){return Aa(e).map(function(t){if(!l.isValidElement(t)||!t.type)return null;var n=t,r=n.key,o=n.props,a=o.children,s=o.value,i=Wt(o,Em),c=pe({key:r,value:s},i),u=cc(a);return u.length&&(c.children=u),c}).filter(function(t){return t})}function Na(e){if(!e)return e;var t=pe({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return nn(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function Mm(e,t,n,r,o,a){var s=null,i=null;function c(){function u(d){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(f,v){var y="".concat(h,"-").concat(v),g=f[a.value],m=n.includes(g),b=u(f[a.children]||[],y,m),S=l.createElement(si,f,b.map(function(N){return N.node}));if(t===g&&(s=S),m){var C={pos:y,node:S,children:b};return p||i.push(C),C}return null}).filter(function(f){return f})}i||(i=[],u(r),i.sort(function(d,h){var p=d.node.props.value,f=h.node.props.value,v=n.indexOf(p),y=n.indexOf(f);return v-y}))}Object.defineProperty(e,"triggerNode",{get:function(){return nn(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),c(),s}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return nn(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),c(),o?i:i.map(function(d){var h=d.node;return h})}})}var Nm=function(t,n,r){var o=r.fieldNames,a=r.treeNodeFilterProp,s=r.filterTreeNode,i=o.children;return l.useMemo(function(){if(!n||s===!1)return t;var c=typeof s=="function"?s:function(d,h){return String(h[a]).toUpperCase().includes(n.toUpperCase())},u=function d(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return h.reduce(function(f,v){var y=v[i],g=p||c(n,Na(v)),m=d(y||[],g);return(g||m.length)&&f.push(pe(pe({},v),{},K({isLeaf:void 0},i,m))),f},[])};return u(t)},[t,n,i,a,s])};function ds(e){var t=l.useRef();t.current=e;var n=l.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}function Om(e,t){var n=t.id,r=t.pId,o=t.rootPId,a=new Map,s=[];return e.forEach(function(i){var c=i[n],u=pe(pe({},i),{},{key:i.key||c});a.set(c,u)}),a.forEach(function(i){var c=i[r],u=a.get(c);u?(u.children=u.children||[],u.children.push(i)):(c===o||o===null)&&s.push(i)}),s}function $m(e,t,n){return l.useMemo(function(){if(e){if(n){var r=pe({id:"id",pId:"pId",rootPId:null},on(n)==="object"?n:{});return Om(e,r)}return e}return cc(t)},[t,n,e])}var uc=l.createContext(null),dc=l.createContext(null),Im={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Am=function(t,n){var r=gl(),o=r.prefixCls,a=r.multiple,s=r.searchValue,i=r.toggleOpen,c=r.open,u=r.notFoundContent,d=l.useContext(dc),h=d.virtual,p=d.listHeight,f=d.listItemHeight,v=d.listItemScrollOffset,y=d.treeData,g=d.fieldNames,m=d.onSelect,b=d.dropdownMatchSelectWidth,S=d.treeExpandAction,C=d.treeTitleRender,N=d.onPopupScroll,O=d.leftMaxCount,x=d.leafCountOnly,$=d.valueEntities,w=l.useContext(uc),R=w.checkable,T=w.checkedKeys,_=w.halfCheckedKeys,z=w.treeExpandedKeys,A=w.treeDefaultExpandAll,I=w.treeDefaultExpandedKeys,k=w.onTreeExpand,L=w.treeIcon,B=w.showTreeIcon,H=w.switcherIcon,q=w.treeLine,j=w.treeNodeFilterProp,Y=w.loadData,Z=w.treeLoadedKeys,J=w.treeMotion,te=w.onTreeLoad,re=w.keyEntities,le=l.useRef(),G=fa(function(){return y},[c,y],function(ke,Ge){return Ge[0]&&ke[1]!==Ge[1]}),Q=l.useMemo(function(){return R?{checked:T,halfChecked:_}:null},[R,T,_]);l.useEffect(function(){if(c&&!a&&T.length){var ke;(ke=le.current)===null||ke===void 0||ke.scrollTo({key:T[0]})}},[c]);var ee=function(Ge){Ge.preventDefault()},V=function(Ge,ht){var se=ht.node;R&&Ma(se)||(m(se.key,{selected:!T.includes(se.key)}),a||i(!1))},W=l.useState(I),ie=me(W,2),Se=ie[0],oe=ie[1],he=l.useState(null),Oe=me(he,2),Re=Oe[0],$e=Oe[1],Ae=l.useMemo(function(){return z?at(z):s?Re:Se},[Se,Re,z,s]),we=function(Ge){oe(Ge),$e(Ge),k&&k(Ge)},je=String(s).toLowerCase(),De=function(Ge){return je?String(Ge[j]).toLowerCase().includes(je):!1};l.useEffect(function(){s&&$e(xm(y,g))},[s]);var ye=l.useState(function(){return new Map}),We=me(ye,2),qe=We[0],He=We[1];l.useEffect(function(){O&&He(new Map)},[O]);function Pe(ke){var Ge=ke[g.value];if(!qe.has(Ge)){var ht=$.get(Ge),se=(ht.children||[]).length===0;if(se)qe.set(Ge,!1);else{var de=ht.children.filter(function(Me){return!Me.node.disabled&&!Me.node.disableCheckbox&&!T.includes(Me.node[g.value])}),Le=de.length;qe.set(Ge,Le>O)}}return qe.get(Ge)}var Ce=Sn(function(ke){var Ge=ke[g.value];return T.includes(Ge)||O===null?!1:O<=0?!0:x&&O?Pe(ke):!1}),Ue=function ke(Ge){var ht=Rp(Ge),se;try{for(ht.s();!(se=ht.n()).done;){var de=se.value;if(!(de.disabled||de.selectable===!1)){if(s){if(De(de))return de}else return de;if(de[g.children]){var Le=ke(de[g.children]);if(Le)return Le}}}}catch(Me){ht.e(Me)}finally{ht.f()}return null},Ee=l.useState(null),ce=me(Ee,2),_e=ce[0],mt=ce[1],Fe=re[_e];l.useEffect(function(){if(c){var ke=null,Ge=function(){var se=Ue(G);return se?se[g.value]:null};!a&&T.length&&!s?ke=T[0]:ke=Ge(),mt(ke)}},[c,s]),l.useImperativeHandle(n,function(){var ke;return{scrollTo:(ke=le.current)===null||ke===void 0?void 0:ke.scrollTo,onKeyDown:function(ht){var se,de=ht.which;switch(de){case Ne.UP:case Ne.DOWN:case Ne.LEFT:case Ne.RIGHT:(se=le.current)===null||se===void 0||se.onKeyDown(ht);break;case Ne.ENTER:{if(Fe){var Le=Ce(Fe.node),Me=(Fe==null?void 0:Fe.node)||{},xt=Me.selectable,wt=Me.value,Mt=Me.disabled;xt!==!1&&!Mt&&!Le&&V(null,{node:{key:_e},selected:!T.includes(wt)})}break}case Ne.ESC:i(!1)}},onKeyUp:function(){}}});var Xe=fa(function(){return!s},[s,z||Se],function(ke,Ge){var ht=me(ke,1),se=ht[0],de=me(Ge,2),Le=de[0],Me=de[1];return se!==Le&&!!(Le||Me)}),Ve=Xe?Y:null;if(G.length===0)return l.createElement("div",{role:"listbox",className:"".concat(o,"-empty"),onMouseDown:ee},u);var Je={fieldNames:g};return Z&&(Je.loadedKeys=Z),Ae&&(Je.expandedKeys=Ae),l.createElement("div",{onMouseDown:ee},Fe&&c&&l.createElement("span",{style:Im,"aria-live":"assertive"},Fe.node.value),l.createElement(oc.Provider,{value:{nodeDisabled:Ce}},l.createElement(ii,lt({ref:le,focusable:!1,prefixCls:"".concat(o,"-tree"),treeData:G,height:p,itemHeight:f,itemScrollOffset:v,virtual:h!==!1&&b!==!1,multiple:a,icon:L,showIcon:B,switcherIcon:H,showLine:q,loadData:Ve,motion:J,activeKey:_e,checkable:R,checkStrictly:!0,checkedKeys:Q,selectedKeys:R?[]:T,defaultExpandAll:A,titleRender:C},Je,{onActiveChange:mt,onSelect:V,onCheck:V,onExpand:we,onLoad:te,filterTreeNode:De,expandAction:S,onScroll:N}))))},Pm=l.forwardRef(Am),li="SHOW_ALL",ci="SHOW_PARENT",To="SHOW_CHILD";function hs(e,t,n,r){var o=new Set(e);return t===To?e.filter(function(a){var s=n[a];return!s||!s.children||!s.children.some(function(i){var c=i.node;return o.has(c[r.value])})||!s.children.every(function(i){var c=i.node;return Ma(c)||o.has(c[r.value])})}):t===ci?e.filter(function(a){var s=n[a],i=s?s.parent:null;return!i||Ma(i.node)||!o.has(i.key)}):e}var Rm=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","maxCount","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function Dm(e){return!e||on(e)!=="object"}var Tm=l.forwardRef(function(e,t){var n=e.id,r=e.prefixCls,o=r===void 0?"rc-tree-select":r,a=e.value,s=e.defaultValue,i=e.onChange,c=e.onSelect,u=e.onDeselect,d=e.searchValue,h=e.inputValue,p=e.onSearch,f=e.autoClearSearchValue,v=f===void 0?!0:f,y=e.filterTreeNode,g=e.treeNodeFilterProp,m=g===void 0?"value":g,b=e.showCheckedStrategy,S=e.treeNodeLabelProp,C=e.multiple,N=e.treeCheckable,O=e.treeCheckStrictly,x=e.labelInValue,$=e.maxCount,w=e.fieldNames,R=e.treeDataSimpleMode,T=e.treeData,_=e.children,z=e.loadData,A=e.treeLoadedKeys,I=e.onTreeLoad,k=e.treeDefaultExpandAll,L=e.treeExpandedKeys,B=e.treeDefaultExpandedKeys,H=e.onTreeExpand,q=e.treeExpandAction,j=e.virtual,Y=e.listHeight,Z=Y===void 0?200:Y,J=e.listItemHeight,te=J===void 0?20:J,re=e.listItemScrollOffset,le=re===void 0?0:re,G=e.onDropdownVisibleChange,Q=e.dropdownMatchSelectWidth,ee=Q===void 0?!0:Q,V=e.treeLine,W=e.treeIcon,ie=e.showTreeIcon,Se=e.switcherIcon,oe=e.treeMotion,he=e.treeTitleRender,Oe=e.onPopupScroll,Re=Wt(e,Rm),$e=wl(n),Ae=N&&!O,we=N||O,je=O||x,De=we||C,ye=mn(s,{value:a}),We=me(ye,2),qe=We[0],He=We[1],Pe=l.useMemo(function(){return N?b||To:li},[b,N]),Ce=l.useMemo(function(){return Cm(w)},[JSON.stringify(w)]),Ue=mn("",{value:d!==void 0?d:h,postState:function(Ye){return Ye||""}}),Ee=me(Ue,2),ce=Ee[0],_e=Ee[1],mt=function(Ye){_e(Ye),p==null||p(Ye)},Fe=$m(T,_,R),Xe=wm(Fe,Ce),Ve=Xe.keyEntities,Je=Xe.valueEntities,ke=l.useCallback(function(ct){var Ye=[],Ze=[];return ct.forEach(function(ge){Je.has(ge)?Ze.push(ge):Ye.push(ge)}),{missingRawValues:Ye,existRawValues:Ze}},[Je]),Ge=Nm(Fe,ce,{fieldNames:Ce,treeNodeFilterProp:m,filterTreeNode:y}),ht=l.useCallback(function(ct){if(ct){if(S)return ct[S];for(var Ye=Ce._title,Ze=0;Ze<Ye.length;Ze+=1){var ge=ct[Ye[Ze]];if(ge!==void 0)return ge}}},[Ce,S]),se=l.useCallback(function(ct){var Ye=Sm(ct);return Ye.map(function(Ze){return Dm(Ze)?{value:Ze}:Ze})},[]),de=l.useCallback(function(ct){var Ye=se(ct);return Ye.map(function(Ze){var ge=Ze.label,xe=Ze.value,fe=Ze.halfChecked,M,P=Je.get(xe);if(P){var X;ge=he?he(P.node):(X=ge)!==null&&X!==void 0?X:ht(P.node),M=P.node.disabled}else if(ge===void 0){var ue=se(qe).find(function(rt){return rt.value===xe});ge=ue.label}return{label:ge,value:xe,halfChecked:fe,disabled:M}})},[Je,ht,se,qe]),Le=l.useMemo(function(){return se(qe===null?[]:qe)},[se,qe]),Me=l.useMemo(function(){var ct=[],Ye=[];return Le.forEach(function(Ze){Ze.halfChecked?Ye.push(Ze):ct.push(Ze)}),[ct,Ye]},[Le]),xt=me(Me,2),wt=xt[0],Mt=xt[1],Nt=l.useMemo(function(){return wt.map(function(ct){return ct.value})},[wt]),an=bm(wt,Mt,Ae,Ve),Xt=me(an,2),Ie=Xt[0],Be=Xt[1],ze=l.useMemo(function(){var ct=hs(Ie,Pe,Ve,Ce),Ye=ct.map(function(fe){var M,P;return(M=(P=Ve[fe])===null||P===void 0||(P=P.node)===null||P===void 0?void 0:P[Ce.value])!==null&&M!==void 0?M:fe}),Ze=Ye.map(function(fe){var M=wt.find(function(X){return X.value===fe}),P=x?M==null?void 0:M.label:he==null?void 0:he(M);return{value:fe,label:P}}),ge=de(Ze),xe=ge[0];return!De&&xe&&us(xe.value)&&us(xe.label)?[]:ge.map(function(fe){var M;return pe(pe({},fe),{},{label:(M=fe.label)!==null&&M!==void 0?M:fe.value})})},[Ce,De,Ie,wt,de,Pe,Ve]),Te=ym(ze),nt=me(Te,1),vt=nt[0],Ot=l.useMemo(function(){return De&&(Pe==="SHOW_CHILD"||O||!N)?$:null},[$,De,O,Pe,N]),Tt=ds(function(ct,Ye,Ze){var ge=hs(ct,Pe,Ve,Ce);if(!(Ot&&ge.length>Ot)){var xe=de(ct);if(He(xe),v&&_e(""),i){var fe=ct;Ae&&(fe=ge.map(function(ut){var ft=Je.get(ut);return ft?ft.node[Ce.value]:ut}));var M=Ye||{triggerValue:void 0,selected:void 0},P=M.triggerValue,X=M.selected,ue=fe;if(O){var rt=Mt.filter(function(ut){return!fe.includes(ut.value)});ue=[].concat(at(ue),at(rt))}var Ke=de(ue),et={preValue:wt,triggerValue:P},it=!0;(O||Ze==="selection"&&!X)&&(it=!1),Mm(et,P,ct,Fe,it,Ce),we?et.checked=X:et.selected=X;var At=je?Ke:Ke.map(function(ut){return ut.value});i(De?At:At[0],je?null:Ke.map(function(ut){return ut.label}),et)}}}),Rt=l.useCallback(function(ct,Ye){var Ze,ge=Ye.selected,xe=Ye.source,fe=Ve[ct],M=fe==null?void 0:fe.node,P=(Ze=M==null?void 0:M[Ce.value])!==null&&Ze!==void 0?Ze:ct;if(!De)Tt([P],{selected:!0,triggerValue:P},"option");else{var X=ge?[].concat(at(Nt),[P]):Ie.filter(function(ft){return ft!==P});if(Ae){var ue=ke(X),rt=ue.missingRawValues,Ke=ue.existRawValues,et=Ke.map(function(ft){return Je.get(ft).key}),it;if(ge){var At=Er(et,!0,Ve);it=At.checkedKeys}else{var ut=Er(et,{halfCheckedKeys:Be},Ve);it=ut.checkedKeys}X=[].concat(at(rt),at(it.map(function(ft){return Ve[ft].node[Ce.value]})))}Tt(X,{selected:ge,triggerValue:P},xe||"option")}ge||!De?c==null||c(P,Na(M)):u==null||u(P,Na(M))},[ke,Je,Ve,Ce,De,Nt,Tt,Ae,c,u,Ie,Be,$]),It=l.useCallback(function(ct){if(G){var Ye={};Object.defineProperty(Ye,"documentClickClose",{get:function(){return nn(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),G(ct,Ye)}},[G]),Gt=ds(function(ct,Ye){var Ze=ct.map(function(ge){return ge.value});if(Ye.type==="clear"){Tt(Ze,{},"selection");return}Ye.values.length&&Rt(Ye.values[0].value,{selected:!1,source:"selection"})}),Ut=l.useMemo(function(){return{virtual:j,dropdownMatchSelectWidth:ee,listHeight:Z,listItemHeight:te,listItemScrollOffset:le,treeData:Ge,fieldNames:Ce,onSelect:Rt,treeExpandAction:q,treeTitleRender:he,onPopupScroll:Oe,leftMaxCount:$===void 0?null:$-vt.length,leafCountOnly:Pe==="SHOW_CHILD"&&!O&&!!N,valueEntities:Je}},[j,ee,Z,te,le,Ge,Ce,Rt,q,he,Oe,$,vt.length,Pe,O,N,Je]),Yt=l.useMemo(function(){return{checkable:we,loadData:z,treeLoadedKeys:A,onTreeLoad:I,checkedKeys:Ie,halfCheckedKeys:Be,treeDefaultExpandAll:k,treeExpandedKeys:L,treeDefaultExpandedKeys:B,onTreeExpand:H,treeIcon:W,treeMotion:oe,showTreeIcon:ie,switcherIcon:Se,treeLine:V,treeNodeFilterProp:m,keyEntities:Ve}},[we,z,A,I,Ie,Be,k,L,B,H,W,oe,ie,Se,V,m,Ve]);return l.createElement(dc.Provider,{value:Ut},l.createElement(uc.Provider,{value:Yt},l.createElement(Sl,lt({ref:t},Re,{id:$e,prefixCls:o,mode:De?"multiple":void 0,displayValues:vt,onDisplayValuesChange:Gt,searchValue:ce,onSearch:mt,OptionList:Pm,emptyOptions:!Fe.length,onDropdownVisibleChange:It,dropdownMatchSelectWidth:ee}))))}),qr=Tm;qr.TreeNode=si;qr.SHOW_ALL=li;qr.SHOW_PARENT=ci;qr.SHOW_CHILD=To;const _m=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:r}=e,o=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${ve(e.paddingXS)} ${ve(e.calc(e.paddingXS).div(2).equal())}`},sc(n,rn(e,{colorBgContainer:r})),{[o]:{borderRadius:0,[`${o}-list-holder-inner`]:{alignItems:"stretch",[`${o}-treenode`]:{[`${o}-node-content-wrapper`]:{flex:"auto"}}}}},Za(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${o}-switcher${o}-switcher_close`]:{[`${o}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function km(e,t,n){return In("TreeSelect",r=>{const o=rn(r,{treePrefixCls:t});return[_m(o)]},lc)(e,n)}var Lm=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const zm=(e,t)=>{var n;const{prefixCls:r,size:o,disabled:a,bordered:s=!0,className:i,rootClassName:c,treeCheckable:u,multiple:d,listHeight:h=256,listItemHeight:p,placement:f,notFoundContent:v,switcherIcon:y,treeLine:g,getPopupContainer:m,popupClassName:b,dropdownClassName:S,treeIcon:C=!1,transitionName:N,choiceTransitionName:O="",status:x,treeExpandAction:$,builtinPlacements:w,dropdownMatchSelectWidth:R,popupMatchSelectWidth:T,allowClear:_,variant:z,dropdownStyle:A,tagRender:I,maxCount:k,showCheckedStrategy:L,treeCheckStrictly:B}=e,H=Lm(e,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender","maxCount","showCheckedStrategy","treeCheckStrictly"]),{getPopupContainer:q,getPrefixCls:j,renderEmpty:Y,direction:Z,virtual:J,popupMatchSelectWidth:te,popupOverflow:re}=l.useContext(Un),[,le]=Io(),G=p??(le==null?void 0:le.controlHeightSM)+(le==null?void 0:le.paddingXXS),Q=j(),ee=j("select",r),V=j("select-tree",r),W=j("tree-select",r),{compactSize:ie,compactItemClassnames:Se}=Ao(ee,Z),oe=ur(ee),he=ur(W),[Oe,Re,$e]=Rl(ee,oe),[Ae]=km(W,V,he),[we,je]=Va("treeSelect",z,s),De=be(b||S,`${W}-dropdown`,{[`${W}-dropdown-rtl`]:Z==="rtl"},c,$e,oe,he,Re),ye=!!(u||d),We=l.useMemo(()=>{if(!(k&&(L==="SHOW_ALL"&&!B||L==="SHOW_PARENT")))return k},[k,L,B]),qe=Tl(e.suffixIcon,e.showArrow),He=(n=T??R)!==null&&n!==void 0?n:te,{status:Pe,hasFeedback:Ce,isFormItemInput:Ue,feedbackIcon:Ee}=l.useContext(Wr),ce=Ka(Pe,x),{suffixIcon:_e,removeIcon:mt,clearIcon:Fe}=Dl(Object.assign(Object.assign({},H),{multiple:ye,showSuffixIcon:qe,hasFeedback:Ce,feedbackIcon:Ee,prefixCls:ee,componentName:"TreeSelect"})),Xe=_===!0?{clearIcon:Fe}:_;let Ve;v!==void 0?Ve=v:Ve=(Y==null?void 0:Y("Select"))||l.createElement(Ol,{componentName:"Select"});const Je=hr(H,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),ke=l.useMemo(()=>f!==void 0?f:Z==="rtl"?"bottomRight":"bottomLeft",[f,Z]),Ge=Gr(wt=>{var Mt;return(Mt=o??ie)!==null&&Mt!==void 0?Mt:wt}),ht=l.useContext(Ar),se=a??ht,de=be(!r&&W,{[`${ee}-lg`]:Ge==="large",[`${ee}-sm`]:Ge==="small",[`${ee}-rtl`]:Z==="rtl",[`${ee}-${we}`]:je,[`${ee}-in-form-item`]:Ue},Vr(ee,ce,Ce),Se,i,c,$e,oe,he,Re),Le=wt=>l.createElement(vm,{prefixCls:V,switcherIcon:y,treeNodeProps:wt,showLine:g}),[Me]=Zs("SelectLike",A==null?void 0:A.zIndex),xt=l.createElement(qr,Object.assign({virtual:J,disabled:se},Je,{dropdownMatchSelectWidth:He,builtinPlacements:$l(w,re),ref:t,prefixCls:ee,className:de,listHeight:h,listItemHeight:G,treeCheckable:u&&l.createElement("span",{className:`${ee}-tree-checkbox-inner`}),treeLine:!!g,suffixIcon:_e,multiple:ye,placement:ke,removeIcon:mt,allowClear:Xe,switcherIcon:Le,showTreeIcon:C,notFoundContent:Ve,getPopupContainer:m||q,treeMotion:null,dropdownClassName:De,dropdownStyle:Object.assign(Object.assign({},A),{zIndex:Me}),choiceTransitionName:bo(Q,"",O),transitionName:bo(Q,"slide-up",N),treeExpandAction:$,tagRender:ye?I:void 0,maxCount:We,showCheckedStrategy:L,treeCheckStrictly:B}));return Oe(Ae(xt))},jm=l.forwardRef(zm),mr=jm,Bm=Da(mr,"dropdownAlign",e=>hr(e,["visible"]));mr.TreeNode=si;mr.SHOW_ALL=li;mr.SHOW_PARENT=ci;mr.SHOW_CHILD=To;mr._InternalPanelDoNotUseOrYouWillBeFired=Bm;function Hm(e){return e?!e.trim():!0}const hc=e=>{const n=e.split("/").pop();if(n===void 0||Hm(n))return"";const r=n.lastIndexOf(".");return r&&r!=-1?n.slice(r+1,n.length):""},Vm=["jpg","jpeg","png"],Km=e=>Vm.includes(e),Oa=e=>{const{type:t,value:n,onChange:r,...o}=e,[a,s]=l.useState([]),i=l.useMemo(()=>t==null?void 0:t.split(","),[t]),c=h=>{if(h.type==="folder")return!0;const p=hc(h.title);return i?i.includes(p):!0},u=async h=>(await tl(h)).map(v=>{const{code:y,type:g,name:m}=v;return{id:y,pId:h,value:y,title:m,isLeaf:g==="file",type:g,selectable:g==="file"}}).filter(c);l.useEffect(()=>{(async()=>{const p=await u("");s(p)})()},[]);const d=async({id:h})=>{const p=await u(h);s(a.concat(p))};return U.jsx(mr,{treeDataSimpleMode:!0,style:{width:"100%"},value:n,dropdownStyle:{maxHeight:400,overflow:"auto"},onChange:r,loadData:d,treeData:a,...o})},Fm="_container_1bqyu_1",Wm="_view_1bqyu_9",fs={container:Fm,view:Wm};function jr(){return jr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jr.apply(null,arguments)}var Kn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gs,ps={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/var Jo,ms,vs,Gm=(gs||(gs=1,Jo=ps,function(){var e={}.hasOwnProperty;function t(){for(var n=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a=typeof o;if(a==="string"||a==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var s=t.apply(null,o);s&&n.push(s)}}else if(a==="object")if(o.toString===Object.prototype.toString)for(var i in o)e.call(o,i)&&o[i]&&n.push(i);else n.push(o.toString())}}return n.join(" ")}Jo.exports?(t.default=t,Jo.exports=t):window.classNames=t}()),ps.exports),$a=Xr(Gm),ys,$n=Xr(function(){if(vs)return ms;vs=1;var e=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,i=Object.prototype.toString;function c(d){var h=typeof d;return!!d&&(h=="object"||h=="function")}function u(d){if(typeof d=="number")return d;if(function(f){return typeof f=="symbol"||function(v){return!!v&&typeof v=="object"}(f)&&i.call(f)==t}(d))return e;if(c(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=c(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=d.replace(n,"");var p=o.test(d);return p||a.test(d)?s(d.slice(2),p?2:8):r.test(d)?e:+d}return ms=function(d,h,p){return p===void 0&&(p=h,h=void 0),p!==void 0&&(p=(p=u(p))==p?p:0),h!==void 0&&(h=(h=u(h))==h?h:0),function(f,v,y){return f==f&&(y!==void 0&&(f=f<=y?f:y),v!==void 0&&(f=f>=v?f:v)),f}(u(d),h,p)}}()),ea={exports:{}},Um=(ys||(ys=1,function(e,t){var n="__lodash_hash_undefined__",r=1,o=2,a=9007199254740991,s="[object Arguments]",i="[object Array]",c="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Function]",f="[object GeneratorFunction]",v="[object Map]",y="[object Number]",g="[object Null]",m="[object Object]",b="[object Promise]",S="[object Proxy]",C="[object RegExp]",N="[object Set]",O="[object String]",x="[object Symbol]",$="[object Undefined]",w="[object WeakMap]",R="[object ArrayBuffer]",T="[object DataView]",_=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[s]=A[i]=A[R]=A[u]=A[T]=A[d]=A[h]=A[p]=A[v]=A[y]=A[m]=A[C]=A[N]=A[O]=A[w]=!1;var I=typeof Kn=="object"&&Kn&&Kn.Object===Object&&Kn,k=typeof self=="object"&&self&&self.Object===Object&&self,L=I||k||Function("return this")(),B=t&&!t.nodeType&&t,H=B&&e&&!e.nodeType&&e,q=H&&H.exports===B,j=q&&I.process,Y=function(){try{return j&&j.binding&&j.binding("util")}catch{}}(),Z=Y&&Y.isTypedArray;function J(M,P){for(var X=-1,ue=M==null?0:M.length;++X<ue;)if(P(M[X],X,M))return!0;return!1}function te(M){var P=-1,X=Array(M.size);return M.forEach(function(ue,rt){X[++P]=[rt,ue]}),X}function re(M){var P=-1,X=Array(M.size);return M.forEach(function(ue){X[++P]=ue}),X}var le,G,Q,ee=Array.prototype,V=Function.prototype,W=Object.prototype,ie=L["__core-js_shared__"],Se=V.toString,oe=W.hasOwnProperty,he=(le=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"",Oe=W.toString,Re=RegExp("^"+Se.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=q?L.Buffer:void 0,Ae=L.Symbol,we=L.Uint8Array,je=W.propertyIsEnumerable,De=ee.splice,ye=Ae?Ae.toStringTag:void 0,We=Object.getOwnPropertySymbols,qe=$e?$e.isBuffer:void 0,He=(G=Object.keys,Q=Object,function(M){return G(Q(M))}),Pe=nt(L,"DataView"),Ce=nt(L,"Map"),Ue=nt(L,"Promise"),Ee=nt(L,"Set"),ce=nt(L,"WeakMap"),_e=nt(Object,"create"),mt=Rt(Pe),Fe=Rt(Ce),Xe=Rt(Ue),Ve=Rt(Ee),Je=Rt(ce),ke=Ae?Ae.prototype:void 0,Ge=ke?ke.valueOf:void 0;function ht(M){var P=-1,X=M==null?0:M.length;for(this.clear();++P<X;){var ue=M[P];this.set(ue[0],ue[1])}}function se(M){var P=-1,X=M==null?0:M.length;for(this.clear();++P<X;){var ue=M[P];this.set(ue[0],ue[1])}}function de(M){var P=-1,X=M==null?0:M.length;for(this.clear();++P<X;){var ue=M[P];this.set(ue[0],ue[1])}}function Le(M){var P=-1,X=M==null?0:M.length;for(this.__data__=new de;++P<X;)this.add(M[P])}function Me(M){var P=this.__data__=new se(M);this.size=P.size}function xt(M,P){var X=Ut(M),ue=!X&&Gt(M),rt=!X&&!ue&&Yt(M),Ke=!X&&!ue&&!rt&&xe(M),et=X||ue||rt||Ke,it=et?function(ft,qt){for(var cn=-1,Zt=Array(ft);++cn<ft;)Zt[cn]=qt(cn);return Zt}(M.length,String):[],At=it.length;for(var ut in M)!oe.call(M,ut)||et&&(ut=="length"||rt&&(ut=="offset"||ut=="parent")||Ke&&(ut=="buffer"||ut=="byteLength"||ut=="byteOffset")||Tt(ut,At))||it.push(ut);return it}function wt(M,P){for(var X=M.length;X--;)if(It(M[X][0],P))return X;return-1}function Mt(M){return M==null?M===void 0?$:g:ye&&ye in Object(M)?function(P){var X=oe.call(P,ye),ue=P[ye];try{P[ye]=void 0;var rt=!0}catch{}var Ke=Oe.call(P);return rt&&(X?P[ye]=ue:delete P[ye]),Ke}(M):function(P){return Oe.call(P)}(M)}function Nt(M){return ge(M)&&Mt(M)==s}function an(M,P,X,ue,rt){return M===P||(M==null||P==null||!ge(M)&&!ge(P)?M!=M&&P!=P:function(Ke,et,it,At,ut,ft){var qt=Ut(Ke),cn=Ut(et),Zt=qt?i:Ot(Ke),En=cn?i:Ot(et),Hn=(Zt=Zt==s?m:Zt)==m,Yn=(En=En==s?m:En)==m,An=Zt==En;if(An&&Yt(Ke)){if(!Yt(et))return!1;qt=!0,Hn=!1}if(An&&!Hn)return ft||(ft=new Me),qt||xe(Ke)?Be(Ke,et,it,At,ut,ft):function(Qe,tt,un,Kt,Mn,Ft,Qt){switch(un){case T:if(Qe.byteLength!=tt.byteLength||Qe.byteOffset!=tt.byteOffset)return!1;Qe=Qe.buffer,tt=tt.buffer;case R:return!(Qe.byteLength!=tt.byteLength||!Ft(new we(Qe),new we(tt)));case u:case d:case y:return It(+Qe,+tt);case h:return Qe.name==tt.name&&Qe.message==tt.message;case C:case O:return Qe==tt+"";case v:var vn=te;case N:var Pn=Kt&r;if(vn||(vn=re),Qe.size!=tt.size&&!Pn)return!1;var Qr=Qt.get(Qe);if(Qr)return Qr==tt;Kt|=o,Qt.set(Qe,tt);var jo=Be(vn(Qe),vn(tt),Kt,Mn,Ft,Qt);return Qt.delete(Qe),jo;case x:if(Ge)return Ge.call(Qe)==Ge.call(tt)}return!1}(Ke,et,Zt,it,At,ut,ft);if(!(it&r)){var dt=Hn&&oe.call(Ke,"__wrapped__"),ot=Yn&&oe.call(et,"__wrapped__");if(dt||ot){var en=dt?Ke.value():Ke,tn=ot?et.value():et;return ft||(ft=new Me),ut(en,tn,it,At,ft)}}return!!An&&(ft||(ft=new Me),function(Qe,tt,un,Kt,Mn,Ft){var Qt=un&r,vn=ze(Qe),Pn=vn.length,Qr=ze(tt),jo=Qr.length;if(Pn!=jo&&!Qt)return!1;for(var Jr=Pn;Jr--;){var Zn=vn[Jr];if(!(Qt?Zn in tt:oe.call(tt,Zn)))return!1}var gi=Ft.get(Qe);if(gi&&Ft.get(tt))return gi==tt;var eo=!0;Ft.set(Qe,tt),Ft.set(tt,Qe);for(var Bo=Qt;++Jr<Pn;){var to=Qe[Zn=vn[Jr]],no=tt[Zn];if(Kt)var pi=Qt?Kt(no,to,Zn,tt,Qe,Ft):Kt(to,no,Zn,Qe,tt,Ft);if(!(pi===void 0?to===no||Mn(to,no,un,Kt,Ft):pi)){eo=!1;break}Bo||(Bo=Zn=="constructor")}if(eo&&!Bo){var ro=Qe.constructor,oo=tt.constructor;ro==oo||!("constructor"in Qe)||!("constructor"in tt)||typeof ro=="function"&&ro instanceof ro&&typeof oo=="function"&&oo instanceof oo||(eo=!1)}return Ft.delete(Qe),Ft.delete(tt),eo}(Ke,et,it,At,ut,ft))}(M,P,X,ue,an,rt))}function Xt(M){return!(!Ze(M)||function(P){return!!he&&he in P}(M))&&(ct(M)?Re:_).test(Rt(M))}function Ie(M){if(X=(P=M)&&P.constructor,ue=typeof X=="function"&&X.prototype||W,P!==ue)return He(M);var P,X,ue,rt=[];for(var Ke in Object(M))oe.call(M,Ke)&&Ke!="constructor"&&rt.push(Ke);return rt}function Be(M,P,X,ue,rt,Ke){var et=X&r,it=M.length,At=P.length;if(it!=At&&!(et&&At>it))return!1;var ut=Ke.get(M);if(ut&&Ke.get(P))return ut==P;var ft=-1,qt=!0,cn=X&o?new Le:void 0;for(Ke.set(M,P),Ke.set(P,M);++ft<it;){var Zt=M[ft],En=P[ft];if(ue)var Hn=et?ue(En,Zt,ft,P,M,Ke):ue(Zt,En,ft,M,P,Ke);if(Hn!==void 0){if(Hn)continue;qt=!1;break}if(cn){if(!J(P,function(Yn,An){if(dt=An,!cn.has(dt)&&(Zt===Yn||rt(Zt,Yn,X,ue,Ke)))return cn.push(An);var dt})){qt=!1;break}}else if(Zt!==En&&!rt(Zt,En,X,ue,Ke)){qt=!1;break}}return Ke.delete(M),Ke.delete(P),qt}function ze(M){return function(P,X,ue){var rt=X(P);return Ut(P)?rt:function(Ke,et){for(var it=-1,At=et.length,ut=Ke.length;++it<At;)Ke[ut+it]=et[it];return Ke}(rt,ue(P))}(M,fe,vt)}function Te(M,P){var X,ue,rt=M.__data__;return((ue=typeof(X=P))=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?X!=="__proto__":X===null)?rt[typeof P=="string"?"string":"hash"]:rt.map}function nt(M,P){var X=function(ue,rt){return ue==null?void 0:ue[rt]}(M,P);return Xt(X)?X:void 0}ht.prototype.clear=function(){this.__data__=_e?_e(null):{},this.size=0},ht.prototype.delete=function(M){var P=this.has(M)&&delete this.__data__[M];return this.size-=P?1:0,P},ht.prototype.get=function(M){var P=this.__data__;if(_e){var X=P[M];return X===n?void 0:X}return oe.call(P,M)?P[M]:void 0},ht.prototype.has=function(M){var P=this.__data__;return _e?P[M]!==void 0:oe.call(P,M)},ht.prototype.set=function(M,P){var X=this.__data__;return this.size+=this.has(M)?0:1,X[M]=_e&&P===void 0?n:P,this},se.prototype.clear=function(){this.__data__=[],this.size=0},se.prototype.delete=function(M){var P=this.__data__,X=wt(P,M);return!(X<0||(X==P.length-1?P.pop():De.call(P,X,1),--this.size,0))},se.prototype.get=function(M){var P=this.__data__,X=wt(P,M);return X<0?void 0:P[X][1]},se.prototype.has=function(M){return wt(this.__data__,M)>-1},se.prototype.set=function(M,P){var X=this.__data__,ue=wt(X,M);return ue<0?(++this.size,X.push([M,P])):X[ue][1]=P,this},de.prototype.clear=function(){this.size=0,this.__data__={hash:new ht,map:new(Ce||se),string:new ht}},de.prototype.delete=function(M){var P=Te(this,M).delete(M);return this.size-=P?1:0,P},de.prototype.get=function(M){return Te(this,M).get(M)},de.prototype.has=function(M){return Te(this,M).has(M)},de.prototype.set=function(M,P){var X=Te(this,M),ue=X.size;return X.set(M,P),this.size+=X.size==ue?0:1,this},Le.prototype.add=Le.prototype.push=function(M){return this.__data__.set(M,n),this},Le.prototype.has=function(M){return this.__data__.has(M)},Me.prototype.clear=function(){this.__data__=new se,this.size=0},Me.prototype.delete=function(M){var P=this.__data__,X=P.delete(M);return this.size=P.size,X},Me.prototype.get=function(M){return this.__data__.get(M)},Me.prototype.has=function(M){return this.__data__.has(M)},Me.prototype.set=function(M,P){var X=this.__data__;if(X instanceof se){var ue=X.__data__;if(!Ce||ue.length<199)return ue.push([M,P]),this.size=++X.size,this;X=this.__data__=new de(ue)}return X.set(M,P),this.size=X.size,this};var vt=We?function(M){return M==null?[]:(M=Object(M),function(P,X){for(var ue=-1,rt=P==null?0:P.length,Ke=0,et=[];++ue<rt;){var it=P[ue];X(it,ue,P)&&(et[Ke++]=it)}return et}(We(M),function(P){return je.call(M,P)}))}:function(){return[]},Ot=Mt;function Tt(M,P){return!!(P=P??a)&&(typeof M=="number"||z.test(M))&&M>-1&&M%1==0&&M<P}function Rt(M){if(M!=null){try{return Se.call(M)}catch{}try{return M+""}catch{}}return""}function It(M,P){return M===P||M!=M&&P!=P}(Pe&&Ot(new Pe(new ArrayBuffer(1)))!=T||Ce&&Ot(new Ce)!=v||Ue&&Ot(Ue.resolve())!=b||Ee&&Ot(new Ee)!=N||ce&&Ot(new ce)!=w)&&(Ot=function(M){var P=Mt(M),X=P==m?M.constructor:void 0,ue=X?Rt(X):"";if(ue)switch(ue){case mt:return T;case Fe:return v;case Xe:return b;case Ve:return N;case Je:return w}return P});var Gt=Nt(function(){return arguments}())?Nt:function(M){return ge(M)&&oe.call(M,"callee")&&!je.call(M,"callee")},Ut=Array.isArray,Yt=qe||function(){return!1};function ct(M){if(!Ze(M))return!1;var P=Mt(M);return P==p||P==f||P==c||P==S}function Ye(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=a}function Ze(M){var P=typeof M;return M!=null&&(P=="object"||P=="function")}function ge(M){return M!=null&&typeof M=="object"}var xe=Z?function(M){return function(P){return M(P)}}(Z):function(M){return ge(M)&&Ye(M.length)&&!!A[Mt(M)]};function fe(M){return(P=M)!=null&&Ye(P.length)&&!ct(P)?xt(M):Ie(M);var P}e.exports=function(M,P){return an(M,P)}}(ea,ea.exports)),ea.exports),qm=Xr(Um);function bs(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}function Xm(e){e===void 0&&(e={});var t=e.onResize,n=l.useRef(void 0);n.current=t;var r=e.round||Math.round,o=l.useRef(),a=l.useState({width:void 0,height:void 0}),s=a[0],i=a[1],c=l.useRef(!1);l.useEffect(function(){return c.current=!1,function(){c.current=!0}},[]);var u=l.useRef({width:void 0,height:void 0}),d=function(h,p){var f=l.useRef(null),v=l.useRef(null);v.current=p;var y=l.useRef(null);l.useEffect(function(){g()});var g=l.useCallback(function(){var m=y.current,b=v.current,S=m||(b?b instanceof Element?b:b.current:null);f.current&&f.current.element===S&&f.current.subscriber===h||(f.current&&f.current.cleanup&&f.current.cleanup(),f.current={element:S,subscriber:h,cleanup:S?h(S):void 0})},[h]);return l.useEffect(function(){return function(){f.current&&f.current.cleanup&&(f.current.cleanup(),f.current=null)}},[]),l.useCallback(function(m){y.current=m,g()},[g])}(l.useCallback(function(h){return o.current&&o.current.box===e.box&&o.current.round===r||(o.current={box:e.box,round:r,instance:new ResizeObserver(function(p){var f=p[0],v=e.box==="border-box"?"borderBoxSize":e.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",y=bs(f,v,"inlineSize"),g=bs(f,v,"blockSize"),m=y?r(y):void 0,b=g?r(g):void 0;if(u.current.width!==m||u.current.height!==b){var S={width:m,height:b};u.current.width=m,u.current.height=b,n.current?n.current(S):c.current||i(S)}})}),o.current.instance.observe(h,{box:e.box}),function(){o.current&&o.current.instance.unobserve(h)}},[e.box,r]),e.ref);return l.useMemo(function(){return{ref:d,width:s.width,height:s.height}},[d,s.width,s.height])}var Ym="allotment-module_splitView__L-yRc",Zm="allotment-module_sashContainer__fzwJF",Qm="allotment-module_splitViewContainer__rQnVa",fc="allotment-module_splitViewView__MGZ6O",Jm="allotment-module_vertical__WSwwa",ev="allotment-module_horizontal__7doS8",tv="allotment-module_separatorBorder__x-rDS";let _r,gc=!1,pc=!1;typeof navigator=="object"&&(_r=navigator.userAgent,pc=_r.indexOf("Macintosh")>=0,gc=(_r.indexOf("Macintosh")>=0||_r.indexOf("iPad")>=0||_r.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const mc=gc,nv=pc,Ss=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?l.useLayoutEffect:l.useEffect;class rv{constructor(){this._size=void 0}getSize(){return this._size}setSize(t){this._size=t}}function lo(e,t){const n=e.length,r=n-t.length;return r>=0&&e.slice(r,n)===t}var Cs,xs={exports:{}},ws,Es,ov=(Cs||(Cs=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function o(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function a(c,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var f=new o(d,h||c,p),v=n?n+u:u;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],f]:c._events[v].push(f):(c._events[v]=f,c._eventsCount++),c}function s(c,u){--c._eventsCount==0?c._events=new r:delete c._events[u]}function i(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1)),i.prototype.eventNames=function(){var c,u,d=[];if(this._eventsCount===0)return d;for(u in c=this._events)t.call(c,u)&&d.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},i.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,p=d.length,f=new Array(p);h<p;h++)f[h]=d[h].fn;return f},i.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},i.prototype.emit=function(c,u,d,h,p,f){var v=n?n+c:c;if(!this._events[v])return!1;var y,g,m=this._events[v],b=arguments.length;if(m.fn){switch(m.once&&this.removeListener(c,m.fn,void 0,!0),b){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,d),!0;case 4:return m.fn.call(m.context,u,d,h),!0;case 5:return m.fn.call(m.context,u,d,h,p),!0;case 6:return m.fn.call(m.context,u,d,h,p,f),!0}for(g=1,y=new Array(b-1);g<b;g++)y[g-1]=arguments[g];m.fn.apply(m.context,y)}else{var S,C=m.length;for(g=0;g<C;g++)switch(m[g].once&&this.removeListener(c,m[g].fn,void 0,!0),b){case 1:m[g].fn.call(m[g].context);break;case 2:m[g].fn.call(m[g].context,u);break;case 3:m[g].fn.call(m[g].context,u,d);break;case 4:m[g].fn.call(m[g].context,u,d,h);break;default:if(!y)for(S=1,y=new Array(b-1);S<b;S++)y[S-1]=arguments[S];m[g].fn.apply(m[g].context,y)}}return!0},i.prototype.on=function(c,u,d){return a(this,c,u,d,!1)},i.prototype.once=function(c,u,d){return a(this,c,u,d,!0)},i.prototype.removeListener=function(c,u,d,h){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return s(this,p),this;var f=this._events[p];if(f.fn)f.fn!==u||h&&!f.once||d&&f.context!==d||s(this,p);else{for(var v=0,y=[],g=f.length;v<g;v++)(f[v].fn!==u||h&&!f[v].once||d&&f[v].context!==d)&&y.push(f[v]);y.length?this._events[p]=y.length===1?y[0]:y:s(this,p)}return this},i.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=n,i.EventEmitter=i,e.exports=i}(xs)),xs.exports),ui=Xr(ov);function Ms(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.unshift(t))}function ta(e,t){const n=e.indexOf(t);n>-1&&(e.splice(n,1),e.push(t))}function Cn(e,t,n=1){const r=Math.max(0,Math.ceil((t-e)/n)),o=new Array(r);let a=-1;for(;++a<r;)o[a]=e+a*n;return o}var av=Xr(function(){if(Es)return ws;Es=1;var e=NaN,t="[object Symbol]",n=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt,i=typeof Kn=="object"&&Kn&&Kn.Object===Object&&Kn,c=typeof self=="object"&&self&&self.Object===Object&&self,u=i||c||Function("return this")(),d=Object.prototype.toString,h=Math.max,p=Math.min,f=function(){return u.Date.now()};function v(g){var m=typeof g;return!!g&&(m=="object"||m=="function")}function y(g){if(typeof g=="number")return g;if(function(S){return typeof S=="symbol"||function(C){return!!C&&typeof C=="object"}(S)&&d.call(S)==t}(g))return e;if(v(g)){var m=typeof g.valueOf=="function"?g.valueOf():g;g=v(m)?m+"":m}if(typeof g!="string")return g===0?g:+g;g=g.replace(n,"");var b=o.test(g);return b||a.test(g)?s(g.slice(2),b?2:8):r.test(g)?e:+g}return ws=function(g,m,b){var S,C,N,O,x,$,w=0,R=!1,T=!1,_=!0;if(typeof g!="function")throw new TypeError("Expected a function");function z(B){var H=S,q=C;return S=C=void 0,w=B,O=g.apply(q,H)}function A(B){var H=B-$;return $===void 0||H>=m||H<0||T&&B-w>=N}function I(){var B=f();if(A(B))return k(B);x=setTimeout(I,function(H){var q=m-(H-$);return T?p(q,N-(H-w)):q}(B))}function k(B){return x=void 0,_&&S?z(B):(S=C=void 0,O)}function L(){var B=f(),H=A(B);if(S=arguments,C=this,$=B,H){if(x===void 0)return function(q){return w=q,x=setTimeout(I,m),R?z(q):O}($);if(T)return x=setTimeout(I,m),z($)}return x===void 0&&(x=setTimeout(I,m)),O}return m=y(m)||0,v(b)&&(R=!!b.leading,N=(T="maxWait"in b)?h(y(b.maxWait)||0,m):N,_="trailing"in b?!!b.trailing:_),L.cancel=function(){x!==void 0&&clearTimeout(x),w=0,S=$=C=x=void 0},L.flush=function(){return x===void 0?O:k(f())},L}}()),iv="sash-module_sash__K-9lB",sv="sash-module_disabled__Hm-wx",lv="sash-module_mac__Jf6OJ",Ns="sash-module_vertical__pB-rs",cv="sash-module_minimum__-UKxp",uv="sash-module_maximum__TCWxD",Os="sash-module_horizontal__kFbiw",na="sash-module_hover__80W6I",ra="sash-module_active__bJspD";let xn=function(e){return e.Vertical="VERTICAL",e.Horizontal="HORIZONTAL",e}({}),yn=function(e){return e.Disabled="DISABLED",e.Minimum="MINIMUM",e.Maximum="MAXIMUM",e.Enabled="ENABLED",e}({}),vc=mc?20:8;const yc=new ui;class $s extends ui{get state(){return this._state}set state(t){this._state!==t&&(this.el.classList.toggle(sv,t===yn.Disabled),this.el.classList.toggle("sash-disabled",t===yn.Disabled),this.el.classList.toggle(cv,t===yn.Minimum),this.el.classList.toggle("sash-minimum",t===yn.Minimum),this.el.classList.toggle(uv,t===yn.Maximum),this.el.classList.toggle("sash-maximum",t===yn.Maximum),this._state=t,this.emit("enablementChange",t))}constructor(t,n,r){var o;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=av(a=>a.classList.add("sash-hover",na),this.hoverDelay),this._state=yn.Enabled,this.onPointerStart=a=>{const s=a.pageX,i=a.pageY,c={startX:s,currentX:s,startY:i,currentY:i};this.el.classList.add("sash-active",ra),this.emit("start",c),this.el.setPointerCapture(a.pointerId);const u=h=>{h.preventDefault();const p={startX:s,currentX:h.pageX,startY:i,currentY:h.pageY};this.emit("change",p)},d=h=>{h.preventDefault(),this.el.classList.remove("sash-active",ra),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(h.pointerId),window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",d)};window.addEventListener("pointermove",u),window.addEventListener("pointerup",d)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(ra)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",na)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",na)},this.el=document.createElement("div"),this.el.classList.add("sash",iv),this.el.dataset.testid="sash",t.append(this.el),nv&&this.el.classList.add("sash-mac",lv),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===xn.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=vc,yc.on("onDidChangeGlobalSize",a=>{this.size=a,this.layout()})),this.layoutProvider=n,this.orientation=(o=r.orientation)!=null?o:xn.Vertical,this.orientation===xn.Horizontal?(this.el.classList.add("sash-horizontal",Os),this.el.classList.remove("sash-vertical",Ns)):(this.el.classList.remove("sash-horizontal",Os),this.el.classList.add("sash-vertical",Ns)),this.layout()}layout(){if(this.orientation===xn.Vertical){const t=this.layoutProvider;this.el.style.left=t.getVerticalSashLeft(this)-this.size/2+"px",t.getVerticalSashTop&&(this.el.style.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(this.el.style.height=t.getVerticalSashHeight(this)+"px")}else{const t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let Mo;var oa;(oa=Mo||(Mo={})).Distribute={type:"distribute"},oa.Split=function(e){return{type:"split",index:e}},oa.Invisible=function(e){return{type:"invisible",cachedVisibleSize:e}};let Ln=function(e){return e.Normal="NORMAL",e.Low="LOW",e.High="HIGH",e}({});class bc{constructor(t,n,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=t,this.view=n,this.container.classList.add("split-view-view",fc),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,t.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(t){this._size=t}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(t,n){t!==this.visible&&(t?(this.size=$n(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof n=="number"?n:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",t),this.view.setVisible&&this.view.setVisible(t))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(t){this.container.style.pointerEvents=t?"":"none"}layout(t){this.layoutContainer(t),this.view.layout(this.size,t)}}let dv=class extends bc{layoutContainer(t){this.container.style.left=`${t}px`,this.container.style.width=`${this.size}px`}};class hv extends bc{layoutContainer(t){this.container.style.top=`${t}px`,this.container.style.height=`${this.size}px`}}class fv extends ui{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(t){this._startSnappingEnabled!==t&&(this._startSnappingEnabled=t,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(t){this._endSnappingEnabled!==t&&(this._endSnappingEnabled=t,this.updateSashEnablement())}constructor(t,n={},r,o,a){var s,i;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=c=>{this.emit("sashchange",c),this.saveProportions();for(const u of this.viewItems)u.enabled=!0},this.orientation=(s=n.orientation)!=null?s:xn.Vertical,this.proportionalLayout=(i=n.proportionalLayout)!=null?i:!0,this.getSashOrthogonalSize=n.getSashOrthogonalSize,r&&(this.onDidChange=r),o&&(this.onDidDragStart=o),a&&(this.onDidDragEnd=a),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",Zm),t.prepend(this.sashContainer),n.descriptor){this.size=n.descriptor.size;for(const[c,u]of n.descriptor.views.entries()){const d=u.size,h=u.container,p=u.view;this.addView(h,p,d,c,!0)}this.contentSize=this.viewItems.reduce((c,u)=>c+u.size,0),this.saveProportions()}}addView(t,n,r,o=this.viewItems.length,a){let s;s=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:n.minimumSize;const i=this.orientation===xn.Vertical?new hv(t,n,s):new dv(t,n,s);if(this.viewItems.splice(o,0,i),this.viewItems.length>1){const c=this.orientation===xn.Vertical?new $s(this.sashContainer,{getHorizontalSashTop:h=>this.getSashPosition(h),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:xn.Horizontal}):new $s(this.sashContainer,{getVerticalSashLeft:h=>this.getSashPosition(h),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:xn.Vertical}),u=this.orientation===xn.Vertical?h=>({sash:c,start:h.startY,current:h.currentY}):h=>({sash:c,start:h.startX,current:h.currentX});c.on("start",h=>{var p;this.emit("sashDragStart"),this.onSashStart(u(h));const f=this.viewItems.map(v=>v.size);(p=this.onDidDragStart)==null||p.call(this,f)}),c.on("change",h=>this.onSashChange(u(h))),c.on("end",()=>{var h;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(f=>f.sash===c));const p=this.viewItems.map(f=>f.size);(h=this.onDidDragEnd)==null||h.call(this,p)}),c.on("reset",()=>{const h=this.sashItems.findIndex(g=>g.sash===c),p=Cn(h,-1,-1),f=Cn(h+1,this.viewItems.length),v=this.findFirstSnapIndex(p),y=this.findFirstSnapIndex(f);(typeof v!="number"||this.viewItems[v].visible)&&(typeof y!="number"||this.viewItems[y].visible)&&this.emit("sashreset",h)});const d={sash:c};this.sashItems.splice(o-1,0,d)}a||this.relayout(),a||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(t,n){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(t,1)[0].view;if(this.viewItems.length>=1){const o=Math.max(t-1,0);this.sashItems.splice(o,1)[0].sash.dispose()}return this.relayout(),n&&n.type==="distribute"&&this.distributeViewSizes(),r}moveView(t,n,r){const o=this.getViewCachedVisibleSize(n),a=o===void 0?this.getViewSize(n):Mo.Invisible(o),s=this.removeView(n);this.addView(t,s,a,r)}getViewCachedVisibleSize(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].cachedVisibleSize}layout(t=this.size){const n=Math.max(this.size,this.contentSize);if(this.size=t,this.proportions)for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r];o.size=$n(Math.round(this.proportions[r]*t),o.minimumSize,o.maximumSize)}else{const r=Cn(0,this.viewItems.length),o=r.filter(s=>this.viewItems[s].priority===Ln.Low),a=r.filter(s=>this.viewItems[s].priority===Ln.High);this.resize(this.viewItems.length-1,t-n,void 0,o,a)}this.distributeEmptySpace(),this.layoutViews()}resizeView(t,n){if(t<0||t>=this.viewItems.length)return;const r=Cn(0,this.viewItems.length).filter(i=>i!==t),o=[...r.filter(i=>this.viewItems[i].priority===Ln.Low),t],a=r.filter(i=>this.viewItems[i].priority===Ln.High),s=this.viewItems[t];n=Math.round(n),n=$n(n,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=n,this.relayout(o,a)}resizeViews(t){for(let n=0;n<t.length;n++){const r=this.viewItems[n];let o=t[n];o=Math.round(o),o=$n(o,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=o}this.contentSize=this.viewItems.reduce((n,r)=>n+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size}isViewVisible(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].visible}setViewVisible(t,n){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[t].setVisible(n),this.distributeEmptySpace(t),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const t=[];let n=0;for(const i of this.viewItems)i.maximumSize-i.minimumSize>0&&(t.push(i),n+=i.size);const r=Math.floor(n/t.length);for(const i of t)i.size=$n(r,i.minimumSize,i.maximumSize);const o=Cn(0,this.viewItems.length),a=o.filter(i=>this.viewItems[i].priority===Ln.Low),s=o.filter(i=>this.viewItems[i].priority===Ln.High);this.relayout(a,s)}dispose(){this.sashItems.forEach(t=>t.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(t,n){const r=this.viewItems.reduce((o,a)=>o+a.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,t,n),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:t,start:n}){const r=this.sashItems.findIndex(o=>o.sash===t);(o=>{const a=this.viewItems.map(b=>b.size);let s,i,c=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;const d=Cn(r,-1,-1),h=Cn(r+1,this.viewItems.length),p=d.reduce((b,S)=>b+(this.viewItems[S].minimumSize-a[S]),0),f=d.reduce((b,S)=>b+(this.viewItems[S].viewMaximumSize-a[S]),0),v=h.length===0?Number.POSITIVE_INFINITY:h.reduce((b,S)=>b+(a[S]-this.viewItems[S].minimumSize),0),y=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((b,S)=>b+(a[S]-this.viewItems[S].viewMaximumSize),0);c=Math.max(p,y),u=Math.min(v,f);const g=this.findFirstSnapIndex(d),m=this.findFirstSnapIndex(h);if(typeof g=="number"){const b=this.viewItems[g],S=Math.floor(b.viewMinimumSize/2);s={index:g,limitDelta:b.visible?c-S:c+S,size:b.size}}if(typeof m=="number"){const b=this.viewItems[m],S=Math.floor(b.viewMinimumSize/2);i={index:m,limitDelta:b.visible?u+S:u-S,size:b.size}}this.sashDragState={start:o,current:o,index:r,sizes:a,minDelta:c,maxDelta:u,snapBefore:s,snapAfter:i}})(n)}onSashChange({current:t}){const{index:n,start:r,sizes:o,minDelta:a,maxDelta:s,snapBefore:i,snapAfter:c}=this.sashDragState;this.sashDragState.current=t;const u=t-r;this.resize(n,u,o,void 0,void 0,a,s,i,c),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(t){let n=0;for(let r=0;r<this.sashItems.length;r++)if(n+=this.viewItems[r].size,this.sashItems[r].sash===t)return n;return 0}resize(t,n,r=this.viewItems.map(d=>d.size),o,a,s=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,c,u){if(t<0||t>=this.viewItems.length)return 0;const d=Cn(t,-1,-1),h=Cn(t+1,this.viewItems.length);if(a)for(const x of a)Ms(d,x),Ms(h,x);if(o)for(const x of o)ta(d,x),ta(h,x);const p=d.map(x=>this.viewItems[x]),f=d.map(x=>r[x]),v=h.map(x=>this.viewItems[x]),y=h.map(x=>r[x]),g=d.reduce((x,$)=>x+(this.viewItems[$].minimumSize-r[$]),0),m=d.reduce((x,$)=>x+(this.viewItems[$].maximumSize-r[$]),0),b=h.length===0?Number.POSITIVE_INFINITY:h.reduce((x,$)=>x+(r[$]-this.viewItems[$].minimumSize),0),S=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((x,$)=>x+(r[$]-this.viewItems[$].maximumSize),0),C=Math.max(g,S,s),N=Math.min(b,m,i);let O=!1;if(c){const x=this.viewItems[c.index],$=n>=c.limitDelta;O=$!==x.visible,x.setVisible($,c.size)}if(!O&&u){const x=this.viewItems[u.index],$=n<u.limitDelta;O=$!==x.visible,x.setVisible($,u.size)}if(O)return this.resize(t,n,r,o,a,s,i);for(let x=0,$=n=$n(n,C,N);x<p.length;x++){const w=p[x],R=$n(f[x]+$,w.minimumSize,w.maximumSize);$-=R-f[x],w.size=R}for(let x=0,$=n;x<v.length;x++){const w=v[x],R=$n(y[x]-$,w.minimumSize,w.maximumSize);$+=R-y[x],w.size=R}return n}distributeEmptySpace(t){const n=this.viewItems.reduce((a,s)=>a+s.size,0);let r=this.size-n;const o=Cn(this.viewItems.length-1,-1,-1);typeof t=="number"&&ta(o,t);for(let a=0;r!==0&&a<o.length;a++){const s=this.viewItems[o[a]],i=$n(s.size+r,s.minimumSize,s.maximumSize);r-=i-s.size,s.size=i}}layoutViews(){var t;this.contentSize=this.viewItems.reduce((r,o)=>r+o.size,0);let n=0;for(const r of this.viewItems)r.layout(n),n+=r.size;(t=this.onDidChange)!=null&&t.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(t=>t.size/this.contentSize))}updateSashEnablement(){let t=!1;const n=this.viewItems.map(c=>t=c.size-c.minimumSize>0||t);t=!1;const r=this.viewItems.map(c=>t=c.maximumSize-c.size>0||t),o=[...this.viewItems].reverse();t=!1;const a=o.map(c=>t=c.size-c.minimumSize>0||t).reverse();t=!1;const s=o.map(c=>t=c.maximumSize-c.size>0||t).reverse();let i=0;for(let c=0;c<this.sashItems.length;c++){const{sash:u}=this.sashItems[c];i+=this.viewItems[c].size;const d=!(n[c]&&s[c+1]),h=!(r[c]&&a[c+1]);if(d&&h){const p=Cn(c,-1,-1),f=Cn(c+1,this.viewItems.length),v=this.findFirstSnapIndex(p),y=this.findFirstSnapIndex(f),g=typeof v=="number"&&!this.viewItems[v].visible,m=typeof y=="number"&&!this.viewItems[y].visible;g&&a[c]&&(i>0||this.startSnappingEnabled)?u.state=yn.Minimum:m&&n[c]&&(i<this.contentSize||this.endSnappingEnabled)?u.state=yn.Maximum:u.state=yn.Disabled}else u.state=d&&!h?yn.Minimum:!d&&h?yn.Maximum:yn.Enabled}}findFirstSnapIndex(t){for(const n of t){const r=this.viewItems[n];if(r.visible&&r.snap)return n}for(const n of t){const r=this.viewItems[n];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return n}}}class br{constructor(t){this.size=void 0,this.size=t}getPreferredSize(){return this.size}}let Is=class{constructor(t,n){this.proportion=void 0,this.layoutService=void 0,this.proportion=t,this.layoutService=n}getPreferredSize(){return this.proportion*this.layoutService.getSize()}};class co{getPreferredSize(){}}class As{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(t){if(typeof t=="number")this.layoutStrategy=new br(t);else if(typeof t=="string"){const n=t.trim();if(lo(n,"%")){const r=Number(n.slice(0,-1))/100;this.layoutStrategy=new Is(r,this.layoutService)}else if(lo(n,"px")){const r=Number(n.slice(0,-2))/100;this.layoutStrategy=new br(r)}else if(typeof Number.parseFloat(n)=="number"){const r=Number.parseFloat(n);this.layoutStrategy=new br(r)}else this.layoutStrategy=new co}else this.layoutStrategy=new co}constructor(t,n){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=t,this.element=n.element,this.minimumSize=typeof n.minimumSize=="number"?n.minimumSize:30,this.maximumSize=typeof n.maximumSize=="number"?n.maximumSize:Number.POSITIVE_INFINITY,typeof n.preferredSize=="number")this.layoutStrategy=new br(n.preferredSize);else if(typeof n.preferredSize=="string"){const o=n.preferredSize.trim();if(lo(o,"%")){const a=Number(o.slice(0,-1))/100;this.layoutStrategy=new Is(a,this.layoutService)}else if(lo(o,"px")){const a=Number(o.slice(0,-2));this.layoutStrategy=new br(a)}else if(typeof Number.parseFloat(o)=="number"){const a=Number.parseFloat(o);this.layoutStrategy=new br(a)}else this.layoutStrategy=new co}else this.layoutStrategy=new co;this.priority=(r=n.priority)!=null?r:Ln.Normal,this.snap=typeof n.snap=="boolean"&&n.snap}layout(t){}}function Ps(e){return e.minSize!==void 0||e.maxSize!==void 0||e.preferredSize!==void 0||e.priority!==void 0||e.visible!==void 0}const di=l.forwardRef(({className:e,children:t},n)=>F.createElement("div",{ref:n,className:$a("split-view-view",fc,e)},t));di.displayName="Allotment.Pane";const Sc=l.forwardRef(({children:e,className:t,id:n,maxSize:r=1/0,minSize:o=30,proportionalLayout:a=!0,separator:s=!0,sizes:i,defaultSizes:c=i,snap:u=!1,vertical:d=!1,onChange:h,onReset:p,onVisibleChange:f,onDragStart:v,onDragEnd:y},g)=>{const m=l.useRef(null),b=l.useRef([]),S=l.useRef(new Map),C=l.useRef(null),N=l.useRef(new Map),O=l.useRef(new rv),x=l.useRef([]),[$,w]=l.useState(!1),R=l.useMemo(()=>F.Children.toArray(e).filter(F.isValidElement),[e]),T=l.useCallback(_=>{var z,A;const I=(z=x.current)==null?void 0:z[_];return typeof(I==null?void 0:I.preferredSize)=="number"&&((A=C.current)!=null&&A.resizeView(_,Math.round(I.preferredSize)),!0)},[]);return l.useImperativeHandle(g,()=>({reset:()=>{if(p)p();else{var _;(_=C.current)==null||_.distributeViewSizes();for(let z=0;z<x.current.length;z++)T(z)}},resize:_=>{var z;(z=C.current)==null||z.resizeViews(_)}})),Ss(()=>{let _=!0;c&&N.current.size!==c.length&&(_=!1,console.warn(`Expected ${c.length} children based on defaultSizes but found ${N.current.size}`)),_&&c&&(b.current=R.map(I=>I.key));const z=jr({orientation:d?xn.Vertical:xn.Horizontal,proportionalLayout:a},_&&c&&{descriptor:{size:c.reduce((I,k)=>I+k,0),views:c.map((I,k)=>{var L,B,H,q;const j=S.current.get(b.current[k]),Y=new As(O.current,jr({element:document.createElement("div"),minimumSize:(L=j==null?void 0:j.minSize)!=null?L:o,maximumSize:(B=j==null?void 0:j.maxSize)!=null?B:r,priority:(H=j==null?void 0:j.priority)!=null?H:Ln.Normal},(j==null?void 0:j.preferredSize)&&{preferredSize:j==null?void 0:j.preferredSize},{snap:(q=j==null?void 0:j.snap)!=null?q:u}));return x.current.push(Y),{container:[...N.current.values()][k],size:I,view:Y}})}});C.current=new fv(m.current,z,h,v,y),C.current.on("sashDragStart",()=>{var I;(I=m.current)==null||I.classList.add("split-view-sash-dragging")}),C.current.on("sashDragEnd",()=>{var I;(I=m.current)==null||I.classList.remove("split-view-sash-dragging")}),C.current.on("sashchange",I=>{if(f&&C.current){const k=R.map(L=>L.key);for(let L=0;L<k.length;L++){const B=S.current.get(k[L]);(B==null?void 0:B.visible)!==void 0&&B.visible!==C.current.isViewVisible(L)&&f(L,C.current.isViewVisible(L))}}}),C.current.on("sashreset",I=>{if(p)p();else{var k;if(T(I)||T(I+1))return;(k=C.current)==null||k.distributeViewSizes()}});const A=C.current;return()=>{A.dispose()}},[]),Ss(()=>{if($){const Z=R.map(G=>G.key),J=[...b.current],te=Z.filter(G=>!b.current.includes(G)),re=Z.filter(G=>b.current.includes(G)),le=b.current.map(G=>!Z.includes(G));for(let G=le.length-1;G>=0;G--){var _;le[G]&&((_=C.current)!=null&&_.removeView(G),J.splice(G,1),x.current.splice(G,1))}for(const G of te){var z,A,I,k,L;const Q=S.current.get(G),ee=new As(O.current,jr({element:document.createElement("div"),minimumSize:(z=Q==null?void 0:Q.minSize)!=null?z:o,maximumSize:(A=Q==null?void 0:Q.maxSize)!=null?A:r,priority:(I=Q==null?void 0:Q.priority)!=null?I:Ln.Normal},(Q==null?void 0:Q.preferredSize)&&{preferredSize:Q==null?void 0:Q.preferredSize},{snap:(k=Q==null?void 0:Q.snap)!=null?k:u}));(L=C.current)!=null&&L.addView(N.current.get(G),ee,Mo.Distribute,Z.findIndex(V=>V===G)),J.splice(Z.findIndex(V=>V===G),0,G),x.current.splice(Z.findIndex(V=>V===G),0,ee)}for(;!qm(Z,J);)for(const[G,Q]of Z.entries()){const ee=J.findIndex(V=>V===Q);if(ee!==G){var B;(B=C.current)==null||B.moveView(N.current.get(Q),ee,G);const V=J[ee];J.splice(ee,1),J.splice(G,0,V);break}}for(const G of te){var H;const Q=Z.findIndex(V=>V===G),ee=x.current[Q].preferredSize;ee!==void 0&&((H=C.current)==null||H.resizeView(Q,ee))}for(const G of[...te,...re]){var q,j;const Q=S.current.get(G),ee=Z.findIndex(V=>V===G);Q&&Ps(Q)&&Q.visible!==void 0&&((q=C.current)==null?void 0:q.isViewVisible(ee))!==Q.visible&&((j=C.current)==null||j.setViewVisible(ee,Q.visible))}for(const G of re){const Q=S.current.get(G),ee=Z.findIndex(V=>V===G);if(Q&&Ps(Q)){var Y;Q.preferredSize!==void 0&&x.current[ee].preferredSize!==Q.preferredSize&&(x.current[ee].preferredSize=Q.preferredSize);let V=!1;Q.minSize!==void 0&&x.current[ee].minimumSize!==Q.minSize&&(x.current[ee].minimumSize=Q.minSize,V=!0),Q.maxSize!==void 0&&x.current[ee].maximumSize!==Q.maxSize&&(x.current[ee].maximumSize=Q.maxSize,V=!0),V&&((Y=C.current)==null||Y.layout())}}(te.length>0||le.length>0)&&(b.current=Z)}},[R,$,r,o,u]),l.useEffect(()=>{C.current&&(C.current.onDidChange=h)},[h]),l.useEffect(()=>{C.current&&(C.current.onDidDragStart=v)},[v]),l.useEffect(()=>{C.current&&(C.current.onDidDragEnd=y)},[y]),Xm({ref:m,onResize:({width:_,height:z})=>{var A;_&&z&&((A=C.current)!=null&&A.layout(d?z:_),O.current.setSize(d?z:_),w(!0))}}),l.useEffect(()=>{mc&&gv(20)},[]),F.createElement("div",{ref:m,className:$a("split-view",d?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":s},Ym,d?Jm:ev,{[tv]:s},t),id:n},F.createElement("div",{className:$a("split-view-container",Qm)},F.Children.toArray(e).map(_=>{if(!F.isValidElement(_))return null;const z=_.key;return _.type.displayName==="Allotment.Pane"?(S.current.set(z,_.props),F.cloneElement(_,{key:z,ref:A=>{const I=_.ref;I&&(I.current=A),A?N.current.set(z,A):N.current.delete(z)}})):F.createElement(di,{key:z,ref:A=>{A?N.current.set(z,A):N.current.delete(z)}},_)})))});function gv(e){const t=$n(e,4,20),n=$n(e,1,8);document.documentElement.style.setProperty("--sash-size",t+"px"),document.documentElement.style.setProperty("--sash-hover-size",n+"px"),function(r){vc=r,yc.emit("onDidChangeGlobalSize",r)}(t)}Sc.displayName="Allotment";var Qn=Object.assign(Sc,{Pane:di});const pv="_container_jgx61_1",mv="_title_jgx61_12",vv="_body_jgx61_18",yv="_left_jgx61_25",bv="_right_jgx61_44",Sv="_tag_jgx61_55",Cv="_selected_jgx61_65",xv="_tag-name_jgx61_69",dn={container:pv,title:mv,body:vv,left:yv,right:bv,tag:Sv,selected:Cv,tagName:xv},wv="_container_21aji_1",Ev="_content_21aji_19",Rs={container:wv,content:Ev},Mv="_container_17mrb_1",Nv="_item_17mrb_8",Ov="_active_17mrb_21",$v="_item-slash_17mrb_24",Jn={container:Mv,item:Nv,active:Ov,itemSlash:$v},Cc=e=>{const{parent:t,parents:n,onClick:r}=e;return U.jsxs("div",{className:Jn.container,children:[U.jsxs("div",{className:be(Jn.item,{[Jn.active]:t===""}),onClick:()=>r(""),children:[U.jsx("span",{children:"Root"}),n.length>0&&U.jsx("span",{className:Jn.itemSlash,children:"/"})]}),n.map((o,a)=>U.jsxs("div",{className:be(Jn.item,{[Jn.active]:t===o.code}),onClick:()=>r(o.code),children:[U.jsx("span",{children:o.name}),a!=n.length-1&&U.jsx("span",{className:Jn.itemSlash,children:"/"})]},o.code))]})},Iv="_item_4xjdi_1",Av="_item-cover_4xjdi_10",Pv="_item-cover-active_4xjdi_26",Rv="_item-image_4xjdi_29",Dv="_item-name_4xjdi_36",Tv="_item-name-active_4xjdi_52",Sr={item:Iv,itemCover:Av,itemCoverActive:Pv,itemImage:Rv,itemName:Dv,itemNameActive:Tv},_v="data:image/svg+xml,%3csvg%20width='597'%20height='478'%20viewBox='0%200%20597%20478'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2046.286V431.014C0%20456.47%2020.682%20477.297%2045.96%20477.297H550.658C575.936%20477.297%20596.618%20456.47%20596.618%20431.014V122.364C596.618%2096.9081%20575.936%2076.0808%20550.658%2076.0808H324.592C310.804%2076.0808%20297.591%2069.7168%20288.686%2058.7246L256.514%2018.5162C247.897%207.81324%20234.97%201.44932%20221.182%201.16005L46.2472%200.00297717C20.682%20-0.286292%200%2020.5411%200%2046.286Z'%20fill='%230091FF'/%3e%3cpath%20d='M0%20212.783V425.707C0%20454.097%2020.682%20477.325%2045.96%20477.325H550.658C575.936%20477.325%20596.618%20454.097%20596.618%20425.707V81.4798C596.618%2053.0899%20575.936%2029.8618%20550.658%2029.8618H369.116C358.488%2029.8618%20347.859%2034.0558%20339.816%2041.7985L223.48%20150.519C215.15%20158.262%20204.522%20162.456%20193.606%20162.456L46.2472%20160.842C20.682%20160.842%200%20184.071%200%20212.783Z'%20fill='%23B7D9F8'/%3e%3c/svg%3e",kv="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886943620'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='12284'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M534%20352V136H232v752h560V394H576a42%2042%200%200%201-42-42z'%20fill='%23D9D9D9'%20p-id='12285'%3e%3c/path%3e%3cpath%20d='M854.6%20288.6L639.4%2073.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7%200-32%2014.3-32%2032v832c0%2017.7%2014.3%2032%2032%2032h640c17.7%200%2032-14.3%2032-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602%20137.8L790.2%20326H602V137.8zM792%20888H232V136h302v216a42%2042%200%200%200%2042%2042h216v494z'%20p-id='12286'%3e%3c/path%3e%3c/svg%3e",Lv="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887095606'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='17156'%20width='170'%20height='170'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M648.76544%200c24.40704%200%2047.8208%209.68704%2065.09568%2026.9312l187.61728%20187.21792a92.16%2092.16%200%200%201%2027.05408%2065.2288v120.6272c44.2368%200%2080.09728%2035.85536%2080.10752%2080.08704v319.7952c0%2043.24864-34.3296%2078.6944-77.55776%2080.06656l-2.54976%200.03072v48.00512c0%2053.02272-43.02848%2096-96.12288%2096H191.5904c-53.0944%200-96.12288-42.97728-96.12288-96v-48.00512c-44.2368%200-80.09728-35.85536-80.10752-80.08704V480.1024c0-43.24864%2034.3296-78.6944%2077.55776-80.06656l2.54976-0.04096V96C95.46752%2042.97728%20138.496%200%20191.5904%200h457.17504z%20m183.64416%20879.99488H191.5904v17.28512a30.72%2030.72%200%200%200%2030.72%2030.72h579.3792a30.72%2030.72%200%200%200%2030.72-30.72v-17.28512z%20m-409.088-329.86112H297.984L267.75552%20721.92h38.33856l10.81344-61.68576h81.59232l6.144-34.16064H323.05152l7.12704-40.79616H417.1776l6.144-35.14368z%20m114.03264-0.24576h-84.7872L422.33856%20721.92h87.73632c36.864%200%2059.22816-12.288%2068.32128-40.30464%206.144-19.16928%200.49152-42.02496-19.90656-49.88928%2021.62688-9.33888%2029.98272-25.31328%2029.98272-42.27072%200-26.78784-21.38112-39.56736-51.11808-39.56736z%20m115.75296%200h-42.02496l-0.24576%201.72032%2043.74528%2083.06688-75.44832%2086.016-0.24576%201.2288h46.6944l48.16896-57.01632L703.73376%20721.92h42.51648l0.24576-1.2288-45.21984-83.31264%2075.44832-85.77024%200.24576-1.72032h-44.2368l-49.88928%2059.22816-29.73696-59.22816z%20m-133.44768%2098.79552c14.99136%200%2022.60992%206.88128%2022.60992%2016.95744%200%2013.5168-9.58464%2022.85568-29.24544%2022.85568h-47.18592l7.12704-39.81312h46.6944z%20m12.04224-65.61792c12.288%200%2017.44896%206.144%2017.44896%2013.5168%200%209.09312-8.35584%2020.15232-24.08448%2020.15232h-46.6944l6.144-33.66912h47.18592z%20m71.51616-494.7456H222.3104a30.72%2030.72%200%200%200-30.72%2030.72v280.95488h640.8192v-81.5616h-137.00096c-50.8928-0.01024-92.14976-41.2672-92.16-92.16l-0.03072-137.95328z%20m96.12288%2059.84256v58.91072a15.36%2015.36%200%200%200%2015.36%2015.36h59.0848l-74.4448-74.27072z'%20fill='%238a8a8a'%20p-id='17157'%3e%3c/path%3e%3c/svg%3e",zv="/glb-CHfdM5il.svg",jv="/obj-BlhbR6Kx.svg",Bv="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886774681'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='11289'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M881.503769%201009.728009a47.58397%2047.58397%200%200%201-33.919979%2014.271991H175.90421c-12.703992%200-24.895984-5.119997-33.919979-14.271991A49.183969%2049.183969%200%200%201%20128.00024%20975.23203V48.76861c0-12.927992%205.023997-25.343984%2014.047991-34.495979A47.58397%2047.58397%200%200%201%20175.93621%200.00064h412.095742c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l259.519838%20263.807835c8.991994%209.183994%2014.015991%2021.663986%2013.951991%2034.623979v662.655585c0%2012.927992-5.055997%2025.343984-14.079991%2034.495979z'%20fill='%23DCF3D1'%20p-id='11290'%3e%3c/path%3e%3cpath%20d='M32.0003%20544.0003h959.9994v319.9998c0%2016.959989-5.055997%2033.279979-14.079991%2045.247972-8.959994%2011.999993-21.183987%2018.751988-33.919979%2018.751988h-863.99946c-12.735992%200-24.959984-6.719996-33.919979-18.751988C37.024297%20897.280079%2032.0003%20880.960089%2032.0003%20864.0001V544.0003z'%20fill='%2352C41A'%20p-id='11291'%3e%3c/path%3e%3cpath%20d='M127.96824%20536.384305v-97.535939L32.0003%20536.384305h95.96794z%20m767.61552%200l0.96-97.535939L991.9997%20536.384305h-96.41594z'%20fill='%23389E0D'%20p-id='11292'%3e%3c/path%3e%3cpath%20d='M895.58376%20319.39244h-259.551838c-26.495983%200-47.99997-21.823986-47.99997-48.767969V0.00064c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l260.031838%20263.807835c8.799995%209.279994%2013.631991%2021.727986%2013.439991%2034.623979v6.815995z'%20fill='%2352C41A'%20opacity='.4'%20p-id='11293'%3e%3c/path%3e%3cpath%20d='M280.000145%20848.00011l4.479997-151.039906%2050.879968%20151.039906h37.759977l50.239968-150.399906%204.799997%20150.399906h43.199973l-14.71999-228.479857h-46.079972l-56.319964%20167.999895-56.319965-167.999895H251.520163L236.800172%20848.00011h43.199973z%20m313.919804%200v-186.879883h62.079961v-41.599974h-168.319895v41.599974h62.079961v186.879883h44.159973z%20m211.519868%200v-41.599974h-84.479948v-186.879883h-44.159972v228.479857h128.63992z'%20fill='%23FFFFFF'%20p-id='11294'%3e%3c/path%3e%3c/svg%3e",Hv="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887007250'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='14135'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M120%20334a40%2040%200%200%201%2040%2040V476h80V374a40%2040%200%201%201%2080%200v284a40%2040%200%201%201-80%200V556H160v102a40%2040%200%201%201-80%200v-284a40%2040%200%200%201%2040-40zM984%20760a40%2040%200%200%201%2040%2040v64c0%2088.224-71.776%20160-160%20160H160c-88.224%200-160-71.776-160-160v-64a40%2040%200%201%201%2080%200v64c0%2044.112%2035.888%2080%2080%2080h704c44.112%200%2080-35.888%2080-80v-64a40%2040%200%200%201%2040-40zM864%200c88.224%200%20160%2071.776%20160%20160v72a40%2040%200%201%201-80%200v-72c0-44.112-35.888-80-80-80H160c-44.112%200-80%2035.888-80%2080v72a40%2040%200%201%201-80%200v-72C0%2071.776%2071.776%200%20160%200h704z%20m78%20460c0%2043.52-22.552%2081.84-56.56%20103.976l49.424%2071.224a40%2040%200%201%201-65.728%2045.6L801.968%20584H780v74a40%2040%200%201%201-80%200V376a40%2040%200%200%201%2040-40h78c68.376%200%20124%2055.624%20124%20124z%20m-124%2044c24.264%200%2044-19.736%2044-44s-19.736-44-44-44H780v88h38zM503%20698H430a40%2040%200%200%201-40-40v-284a40%2040%200%200%201%2040-40h73C574.128%20334%20632%20391.872%20632%20463v106c0%2071.128-57.872%20129-129%20129z%20m-33-284v204h33A49.056%2049.056%200%200%200%20552%20569v-106a49.056%2049.056%200%200%200-49-49H470z'%20fill='%234A90E2'%20p-id='14136'%3e%3c/path%3e%3c/svg%3e",Vv=[{label:"删除",key:"delete"}],xc=e=>{const{draggable:t,asset:n,active:r,onClick:o,onDoubleClick:a,onRename:s,onDelete:i,onDragStart:c}=e,u=l.useRef(null),[d,h]=l.useState(!1),[p,f]=l.useState(""),v=l.useMemo(()=>{const b=hc(n.name);return n.cover?n.cover:n.type==="folder"?_v:Km(b)?URL.createObjectURL(n.file):b==="fbx"?Lv:b==="glb"?zv:b==="obj"?jv:b==="mtl"?Bv:b==="hdr"?Hv:kv},[n]);l.useEffect(()=>{f(n.name)},[n]);const y=()=>{r&&h(!0),setTimeout(()=>{var b;(b=u.current)==null||b.focus()},0)},g=()=>{h(!1),!(!p||p===n.name)&&s(n,p)},m=async({key:b})=>{b==="delete"&&i(n)};return U.jsx(ka,{menu:{items:Vv,onClick:m},trigger:["contextMenu"],children:U.jsxs("div",{className:Sr.item,draggable:t,onClick:()=>o(n),onDoubleClick:()=>a(n),onDragStart:c,onContextMenu:b=>b.stopPropagation(),children:[U.jsx("div",{className:be(Sr.itemCover,{[Sr.itemCoverActive]:r}),children:U.jsx("img",{draggable:!1,className:Sr.itemImage,src:v,alt:"cover"})}),U.jsx(Fa,{ref:u,value:p,style:{display:d?"block":"none"},onChange:b=>f(b.target.value),onBlur:g,onPressEnter:g}),U.jsx("div",{title:n.name,style:{display:d?"none":"block"},className:be(Sr.itemName,{[Sr.itemNameActive]:r}),onClick:y,children:n.name})]})})},Kv=[{label:"新建文件夹",key:"folder"}],Fv=()=>{const[e,t]=La.useMessage(),[n,r]=l.useState([]),[o,a]=l.useState(""),[s,i]=l.useState(""),[c,u]=l.useState([]),d=async S=>{const C=await tl(S);r(C)};l.useEffect(()=>{d("")},[]);const h=S=>{if(S!==s)if(!S)u([]),i(""),d("");else{const C=c.findIndex(N=>N.code===S);c.splice(C+1,c.length-1-C),u([...c]),i(S),d(S)}},p=async({key:S})=>{S==="folder"&&(await Ou(s,"文件夹"),await d(s),e.info("添加成功"))},f=S=>{S.preventDefault(),S.dataTransfer.dropEffect="copy"},v=async S=>{S.preventDefault();const C=Array.from(S.dataTransfer.files);await $u(C,s),await d(s),e.info("添加成功")},y=S=>a(S.code),g=async S=>{S.type==="folder"&&(await d(S.code),c.push(S),u([...c]),i(S.code))},m=async(S,C)=>{await Au(S.code,C),await d(s)},b=async S=>{await Iu(S.code),await d(s)};return U.jsxs(U.Fragment,{children:[t,U.jsx(Cc,{parent:s,parents:c,onClick:h}),U.jsx(ka,{menu:{items:Kv,onClick:p},trigger:["contextMenu"],children:U.jsx("div",{className:Rs.container,onDragOver:f,onDrop:v,children:U.jsx("div",{className:Rs.content,children:n.map(S=>U.jsx(xc,{asset:S,active:o===S.code,onClick:y,onDoubleClick:g,onRename:m,onDelete:b},S.code))})})})]})},Wv=()=>U.jsx("div",{children:"MaterialList"}),Gv="_container_21aji_1",Uv="_content_21aji_19",Ds={container:Gv,content:Uv};class qv extends yi{constructor(t,n){super(),this.isViewHelper=!0,this.animating=!1,this.center=new Ht;const r=new io("#ff4466"),o=new io("#88ff44"),a=new io("#4488ff"),s=new io("#000000"),i={},c=[],u=new za,d=new So,h=new yi,p=new Pu(-2,2,2,-2,0,4);p.position.set(0,0,2);const f=new Ru(.04,.04,.8,5).rotateZ(-Math.PI/2).translate(.4,0,0),v=new Ko(f,j(r)),y=new Ko(f,j(o)),g=new Ko(f,j(a));y.rotation.z=Math.PI/2,g.rotation.y=-Math.PI/2,this.add(v),this.add(g),this.add(y);const m=Y(r),b=Y(o),S=Y(a),C=Y(s),N=new vr(m),O=new vr(b),x=new vr(S),$=new vr(C),w=new vr(C),R=new vr(C);N.position.x=1,O.position.y=1,x.position.z=1,$.position.x=-1,w.position.y=-1,R.position.z=-1,$.material.opacity=.2,w.material.opacity=.2,R.material.opacity=.2,N.userData.type="posX",O.userData.type="posY",x.userData.type="posZ",$.userData.type="negX",w.userData.type="negY",R.userData.type="negZ",this.add(N),this.add(O),this.add(x),this.add($),this.add(w),this.add(R),c.push(N),c.push(O),c.push(x),c.push($),c.push(w),c.push(R);const T=new Ht,_=128,z=2*Math.PI;this.render=function(J){this.quaternion.copy(t.quaternion).invert(),this.updateMatrixWorld(),T.set(0,0,1),T.applyQuaternion(t.quaternion);const te=n.offsetWidth-_;J.clearDepth(),J.getViewport(B),J.setViewport(te,0,_,_),J.render(this,p),J.setViewport(B.x,B.y,B.z,B.w)};const A=new Ht,I=new Fo,k=new Fo,L=new Fo,B=new Du;let H=0;this.handleClick=function(J){if(this.animating===!0)return!1;const te=n.getBoundingClientRect(),re=te.left+(n.offsetWidth-_),le=te.top+(n.offsetHeight-_);d.x=(J.clientX-re)/(te.right-re)*2-1,d.y=-((J.clientY-le)/(te.bottom-le))*2+1,u.setFromCamera(d,p);const G=u.intersectObjects(c);if(G.length>0){const ee=G[0].object;return q(ee,this.center),this.animating=!0,!0}else return!1},this.setLabels=function(J,te,re){i.labelX=J,i.labelY=te,i.labelZ=re,Z()},this.setLabelStyle=function(J,te,re){i.font=J,i.color=te,i.radius=re,Z()},this.update=function(J){const te=J*z;k.rotateTowards(L,te),t.position.set(0,0,1).applyQuaternion(k).multiplyScalar(H).add(this.center),t.quaternion.rotateTowards(I,te),k.angleTo(L)===0&&(this.animating=!1)},this.dispose=function(){f.dispose(),v.material.dispose(),y.material.dispose(),g.material.dispose(),N.material.map.dispose(),O.material.map.dispose(),x.material.map.dispose(),$.material.map.dispose(),w.material.map.dispose(),R.material.map.dispose(),N.material.dispose(),O.material.dispose(),x.material.dispose(),$.material.dispose(),w.material.dispose(),R.material.dispose()};function q(J,te){switch(J.userData.type){case"posX":A.set(1,0,0),I.setFromEuler(new yr(0,Math.PI*.5,0));break;case"posY":A.set(0,1,0),I.setFromEuler(new yr(-Math.PI*.5,0,0));break;case"posZ":A.set(0,0,1),I.setFromEuler(new yr);break;case"negX":A.set(-1,0,0),I.setFromEuler(new yr(0,-Math.PI*.5,0));break;case"negY":A.set(0,-1,0),I.setFromEuler(new yr(Math.PI*.5,0,0));break;case"negZ":A.set(0,0,-1),I.setFromEuler(new yr(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}H=t.position.distanceTo(te),A.multiplyScalar(H).add(te),h.position.copy(te),h.lookAt(t.position),k.copy(h.quaternion),h.lookAt(A),L.copy(h.quaternion)}function j(J){return new nl({color:J,toneMapped:!1})}function Y(J,te){const{font:re="24px Arial",color:le="#000000",radius:G=14}=i,Q=document.createElement("canvas");Q.width=64,Q.height=64;const ee=Q.getContext("2d");ee.beginPath(),ee.arc(32,32,G,0,2*Math.PI),ee.closePath(),ee.fillStyle=J.getStyle(),ee.fill(),te&&(ee.font=re,ee.textAlign="center",ee.fillStyle=le,ee.fillText(te,32,41));const V=new Tu(Q);return V.colorSpace=_u,new ku({map:V,toneMapped:!1})}function Z(){N.material.map.dispose(),O.material.map.dispose(),x.material.map.dispose(),N.material.dispose(),O.material.dispose(),x.material.dispose(),N.material=Y(r,i.labelX),O.material=Y(o,i.labelY),x.material=Y(a,i.labelZ)}}}const lr=e=>{switch(e){case st.SimpleScript:return{id:so(),enabled:!0,name:Jt[st.SimpleScript],type:st.SimpleScript,script:Lu};case st.Animator:return{id:so(),enabled:!0,name:Jt[st.Animator],type:st.Animator};case st.OrbitControls:return{id:so(),enabled:!0,name:Jt[st.OrbitControls],type:st.OrbitControls};case st.PointerLockControls:return{id:so(),enabled:!0,name:Jt[st.PointerLockControls],type:st.PointerLockControls};default:throw new Error(`未知组件类型: ${e}`)}};class wc extends Pr{constructor(n){super(n);E(this,"raycaster");E(this,"mouse");E(this,"point");E(this,"plane");E(this,"box");E(this,"center");E(this,"normal");E(this,"position");E(this,"offset");E(this,"camera");E(this,"onPointerMove",n=>{const{clientX:r,clientY:o}=n;this.point.set(r,o)});this.raycaster=new za,this.mouse=new So,this.point=new So,this.plane=new rl,this.box=new Po,this.center=new Ht,this.normal=new Ht,this.position=new Ht,this.offset=new Ht;const r=n.getPlugin(jn);this.camera=r.camera,document.addEventListener("pointermove",this.onPointerMove,!1)}getOffset(n){const{x:r,y:o}=this.point,[a,s]=ma(this.core.container,r,o);this.mouse.set(a*2-1,-(s*2)+1);const i=n.map(c=>c.object3d);return this.box.makeEmpty(),ja(i,this.box),this.box.getCenter(this.center),this.normal.set(0,1,0),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.ray.intersectPlane(this.plane,this.position),this.offset.copy(this.position).sub(this.center),this.offset.toArray()}paste(n,r){const o=n.map(a=>a.clone());o.forEach(a=>{let[s,i,c]=a.position;s+=r[0],i+=r[1],c+=r[2],this.replaceName(a),a.position.set(s,i,c),this.core.addEntity(a)}),this.core.select(o)}unmount(){document.removeEventListener("pointermove",this.onPointerMove)}replaceName(n){const r=n.name.lastIndexOf("-");r>=0&&(n.name=n.name.slice(0,r)),n.name=`${n.name}-${n.id}`,n.children.forEach(o=>this.replaceName(o))}}class Ec extends Pr{constructor(n){super(n);E(this,"raycaster");E(this,"mouse");E(this,"plane");E(this,"center");E(this,"normal");E(this,"position");E(this,"direction");E(this,"camera");this.raycaster=new za,this.plane=new rl,this.mouse=new So,this.center=new Ht,this.normal=new Ht(0,1,0),this.position=new Ht,this.direction=new Ht;const r=n.getPlugin(jn);this.camera=r.camera}async drop(n,r,o){const{clientX:a,clientY:s}=o,[i,c]=ma(this.core.container,a,s);this.mouse.set(i*2-1,-(c*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.ray.intersectPlane(this.plane,this.position),this.core.modelManager.modelCache.delete(n);const u=await this.core.modelManager.getModel(n),d=await this.core.modelManager.loadModel(u),h=zu(d).map(v=>({name:v})),p={name:r,position:this.position.toArray(),modelCode:n,modelPath:"",materials:h},f=ju(this.core,p);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(f),this.core.select([f]),this.core.bus.emit("TRANSACTION_END")}async dropSymbol(n,r,o){const{clientX:a,clientY:s}=o,[i,c]=ma(this.core.container,a,s);this.mouse.set(i*2-1,-(c*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera);const u=this.getObjects(),d=this.raycaster.intersectObjects(u,!1);if(d.length){const b=d[0];this.position.copy(b.point),this.direction.copy(b.normal)}else this.raycaster.ray.intersectPlane(this.plane,this.position),this.direction.set(0,0,1);this.direction.normalize(),Pt.set(0,0,1),bi.setFromUnitVectors(Pt,this.direction),Co.setFromQuaternion(bi);const[h,p,f]=Co.toArray(),v=r.lastIndexOf("/"),y=r.slice(v+1);this.core.symbolManager.symbolCache.delete(`${n}-${r}`);const g={name:y,position:this.position.toArray(),rotation:[h,p,f].map(fr.radToDeg),symbolCode:n,symbolPath:r},m=Bu(this.core,g);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(m),this.core.select([m]),this.core.bus.emit("TRANSACTION_END")}getObjects(){const{scene:n}=this.core.render,r=[];return n.traverseVisible(o=>r.push(o)),r}}class Mc extends Pr{constructor(n){super(n);E(this,"camera");E(this,"box");E(this,"sphere");E(this,"center");E(this,"delta");E(this,"controls");const r=n.getPlugin(jn);this.camera=r.camera,this.controls=r.controls,this.box=new Po,this.sphere=new ol,this.center=new Ht,this.delta=new Ht}focus(n){let r;const o=n.map(a=>a.object3d);if(this.box.makeEmpty(),ja(o,this.box),this.box.isEmpty()){const a=o[o.length-1];this.center.setFromMatrixPosition(a.matrixWorld),r=1}else this.box.getCenter(this.center),r=this.box.getBoundingSphere(this.sphere).radius;this.delta.set(0,0,1),this.delta.applyQuaternion(this.camera.quaternion),this.delta.multiplyScalar(r*4),this.controls.target.copy(this.center),this.camera.position.copy(this.center).add(this.delta)}}class Xv extends Rr{constructor(n){super(n);E(this,"onMouseUpPhase1",n=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.moving=!1,this.updateMouse(n),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core)})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(n,r){pt.setFromUnitVectors(Tn,this.normal),ne.compose(n,pt,gn),_t.copy(ne).invert();let{x:o,y:a}=Pt.copy(r).applyMatrix4(_t);const s=Math.max(Math.abs(o),Math.abs(a));this.isSquare&&(o=o>0?s:-s,a=a>0?s:-s),yt.set(0,0,0).applyMatrix4(ne),bt.set(o,0,0).applyMatrix4(ne),St.set(o,a,0).applyMatrix4(ne),Ct.set(0,a,0).applyMatrix4(ne);const i=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()];this.box.geometry.setAttribute("position",new _n(i,3)),this.box.visible=!0,this.width=$t(Math.abs(o),2),this.height=$t(Math.abs(a),2),this.center.set(o,a,0).multiplyScalar(.5).applyMatrix4(ne),this.middlePosition.copy(Pt.setX(o).setY(a).applyMatrix4(ne))}createEntity(){const{x:n,y:r,z:o}=pn.setFromQuaternion(pt),a={position:this.center.toArray(),rotation:[n,r,o].map(fr.radToDeg),size:[this.width,this.height]},s=Hu(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(s),this.core.select([s]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class Yv extends Rr{constructor(t){super(t)}drawPlane(t,n){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();let{x:r,y:o}=Pt.copy(n).applyMatrix4(_t);const a=Math.max(Math.abs(r),Math.abs(o));this.isSquare&&(r=r>0?a:-a,o=o>0?a:-a),yt.set(0,0,0).applyMatrix4(ne),bt.set(r,0,0).applyMatrix4(ne),St.set(r,o,0).applyMatrix4(ne),Ct.set(0,o,0).applyMatrix4(ne);const s=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()];this.box.geometry.setAttribute("position",new _n(s,3)),this.box.visible=!0,this.width=$t(Math.abs(r),2),this.height=$t(Math.abs(o),2),this.center.set(r,o,0).multiplyScalar(.5).applyMatrix4(ne),this.middlePosition.copy(Pt.setX(r).setY(o).applyMatrix4(ne))}drawBox(t,n,r){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();const{x:o,y:a}=Pt.copy(n).applyMatrix4(_t),{z:s}=Pt.copy(r).applyMatrix4(_t);yt.set(0,0,0).applyMatrix4(ne),bt.set(o,0,0).applyMatrix4(ne),St.set(o,a,0).applyMatrix4(ne),Ct.set(0,a,0).applyMatrix4(ne),kt.set(0,0,s).applyMatrix4(ne),Lt.set(o,0,s).applyMatrix4(ne),zt.set(o,a,s).applyMatrix4(ne),jt.set(0,a,s).applyMatrix4(ne);const i=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray(),...yt.toArray(),...kt.toArray(),...bt.toArray(),...Lt.toArray(),...St.toArray(),...zt.toArray(),...Ct.toArray(),...jt.toArray(),...kt.toArray(),...Lt.toArray(),...Lt.toArray(),...zt.toArray(),...zt.toArray(),...jt.toArray(),...jt.toArray(),...kt.toArray()];this.box.geometry.setAttribute("position",new _n(i,3)),this.box.visible=!0,this.width=$t(Math.abs(o),2),this.height=$t(Math.abs(a),2),this.depth=$t(Math.abs(s),2),this.center.set(o,a,s).multiplyScalar(.5),pn.set(Math.PI*.5,0,0),pt.setFromEuler(pn),Gn.compose(this.center,pt,gn).premultiply(ne)}createEntity(){Gn.decompose(this.center,pt,Pt);const{x:t,y:n,z:r}=pn.setFromQuaternion(pt),o={position:this.center.toArray(),rotation:[t,n,r].map(fr.radToDeg),size:[this.width,this.depth,this.height]},a=Vu(this.core,o);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class Zv extends Rr{constructor(t){super(t)}drawPlane(t,n){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();let{x:r,y:o}=Pt.copy(n).applyMatrix4(_t);const a=Math.max(Math.abs(r),Math.abs(o));r=r>0?a:-a,o=o>0?a:-a,yt.set(0,0,0).applyMatrix4(ne),bt.set(r,0,0).applyMatrix4(ne),St.set(r,o,0).applyMatrix4(ne),Ct.set(0,o,0).applyMatrix4(ne);const s=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()],i=r*.5,c=o*.5,u=new Nr;u.moveTo(i,c),u.arc(0,0,i,0,Math.PI*2);const d=u.getPoints().map(h=>{const p=new Ht(h.x,h.y,0);return p.applyMatrix4(ne),p});this.circle.geometry.setFromPoints(d),this.circle.visible=!0,kt.set(i,0,0).applyMatrix4(ne),Lt.set(i,o,0).applyMatrix4(ne),zt.set(0,c,0).applyMatrix4(ne),jt.set(r,c,0).applyMatrix4(ne),s.push(...kt.toArray(),...Lt.toArray(),...zt.toArray(),...jt.toArray()),this.box.geometry.setAttribute("position",new _n(s,3)),this.box.visible=!0,this.width=$t(Math.abs(r),2),this.height=$t(Math.abs(o),2),this.center.set(r,o,0).multiplyScalar(.5).applyMatrix4(ne),this.middlePosition.copy(Pt.setX(r).setY(o).applyMatrix4(ne))}drawBox(t,n,r){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();const{x:o,y:a}=Pt.copy(n).applyMatrix4(_t),{z:s}=Pt.copy(r).applyMatrix4(_t);yt.set(0,0,0).applyMatrix4(ne),bt.set(o,0,0).applyMatrix4(ne),St.set(o,a,0).applyMatrix4(ne),Ct.set(0,a,0).applyMatrix4(ne),kt.set(0,0,s).applyMatrix4(ne),Lt.set(o,0,s).applyMatrix4(ne),zt.set(o,a,s).applyMatrix4(ne),jt.set(0,a,s).applyMatrix4(ne);const i=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray(),...yt.toArray(),...kt.toArray(),...bt.toArray(),...Lt.toArray(),...St.toArray(),...zt.toArray(),...Ct.toArray(),...jt.toArray(),...kt.toArray(),...Lt.toArray(),...Lt.toArray(),...zt.toArray(),...zt.toArray(),...jt.toArray(),...jt.toArray(),...kt.toArray()],c=o*.5,u=a*.5,d=new Nr;d.moveTo(c,u),d.arc(0,0,c,0,Math.PI*2);const h=d.getPoints().map(p=>{const f=new Ht(p.x,p.y,0);return f.applyMatrix4(ne),f});this.circle.geometry.setFromPoints(h),this.circle.visible=!0,yt.set(c,0,0).applyMatrix4(ne),bt.set(c,u,s).applyMatrix4(ne),St.set(o,u,0).applyMatrix4(ne),Ct.set(c,u,s).applyMatrix4(ne),kt.set(c,a,0).applyMatrix4(ne),Lt.set(c,u,s).applyMatrix4(ne),zt.set(0,u,0).applyMatrix4(ne),jt.set(c,u,s).applyMatrix4(ne),i.push(...yt.toArray(),...bt.toArray(),...St.toArray(),...Ct.toArray(),...kt.toArray(),...Lt.toArray(),...zt.toArray(),...jt.toArray()),this.box.geometry.setAttribute("position",new _n(i,3)),this.box.visible=!0,this.width=$t(Math.abs(o),2),this.height=$t(Math.abs(a),2),this.depth=$t(Math.abs(s),2),this.center.set(o,a,s).multiplyScalar(.5),pn.set(Math.PI*.5,0,0),pt.setFromEuler(pn),Gn.compose(this.center,pt,gn).premultiply(ne)}createEntity(){Gn.decompose(this.center,pt,Pt);const{x:t,y:n,z:r}=pn.setFromQuaternion(pt),o={position:this.center.toArray(),rotation:[t,n,r].map(fr.radToDeg),radius:$t(this.width*.5,2),height:this.depth},a=Ku(this.core,o);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class Qv extends Rr{constructor(t){super(t)}drawPlane(t,n){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();let{x:r,y:o}=Pt.copy(n).applyMatrix4(_t);const a=Math.max(Math.abs(r),Math.abs(o));r=r>0?a:-a,o=o>0?a:-a,yt.set(0,0,0).applyMatrix4(ne),bt.set(r,0,0).applyMatrix4(ne),St.set(r,o,0).applyMatrix4(ne),Ct.set(0,o,0).applyMatrix4(ne);const s=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()],i=r*.5,c=o*.5,u=new Nr;u.moveTo(i,c),u.arc(0,0,i,0,Math.PI*2);const d=u.getPoints().map(h=>{const p=new Ht(h.x,h.y,0);return p.applyMatrix4(ne),p});this.circle.geometry.setFromPoints(d),this.circle.visible=!0,this.box.geometry.setAttribute("position",new _n(s,3)),this.box.visible=!0,this.width=$t(Math.abs(r),2),this.height=$t(Math.abs(o),2),this.center.set(r,o,0).multiplyScalar(.5).applyMatrix4(ne),this.middlePosition.copy(Pt.setX(r).setY(o).applyMatrix4(ne))}drawBox(t,n,r){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();const{x:o,y:a}=Pt.copy(n).applyMatrix4(_t),{z:s}=Pt.copy(r).applyMatrix4(_t);yt.set(0,0,0).applyMatrix4(ne),bt.set(o,0,0).applyMatrix4(ne),St.set(o,a,0).applyMatrix4(ne),Ct.set(0,a,0).applyMatrix4(ne),kt.set(0,0,s).applyMatrix4(ne),Lt.set(o,0,s).applyMatrix4(ne),zt.set(o,a,s).applyMatrix4(ne),jt.set(0,a,s).applyMatrix4(ne);const i=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray(),...yt.toArray(),...kt.toArray(),...bt.toArray(),...Lt.toArray(),...St.toArray(),...zt.toArray(),...Ct.toArray(),...jt.toArray(),...kt.toArray(),...Lt.toArray(),...Lt.toArray(),...zt.toArray(),...zt.toArray(),...jt.toArray(),...jt.toArray(),...kt.toArray()],c=o*.5,u=a*.5,d=new Nr;d.moveTo(c,u),d.arc(0,0,c,0,Math.PI*2);const h=d.getPoints().map(y=>{const g=new Ht(y.x,y.y,0);return g.applyMatrix4(ne),g}),[p,f,v]=this.center.set(c,u,s).applyMatrix4(ne).toArray();this.circle.geometry.setFromPoints(h),this.circle.visible=!0,this.circle1.geometry.setFromPoints(h),this.circle1.geometry.center().translate(p,f,v),this.circle1.visible=!0,this.box.geometry.setAttribute("position",new _n(i,3)),this.box.visible=!0,this.width=$t(Math.abs(o),2),this.height=$t(Math.abs(a),2),this.depth=$t(Math.abs(s),2),this.center.set(o,a,s).multiplyScalar(.5),pn.set(Math.PI*.5,0,0),pt.setFromEuler(pn),Gn.compose(this.center,pt,gn).premultiply(ne)}createEntity(){Gn.decompose(this.center,pt,Pt);const{x:t,y:n,z:r}=pn.setFromQuaternion(pt),o={position:this.center.toArray(),rotation:[t,n,r].map(fr.radToDeg),radiusTop:$t(this.width*.5,2),radiusBottom:$t(this.width*.5,2),height:this.depth},a=Fu(this.core,o);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class Jv extends Rr{constructor(t){super(t)}drawPlane(t,n){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();let{x:r,y:o}=Pt.copy(n).applyMatrix4(_t);const a=Math.max(Math.abs(r),Math.abs(o));r=r>0?a:-a,o=o>0?a:-a,yt.set(0,0,0).applyMatrix4(ne),bt.set(r,0,0).applyMatrix4(ne),St.set(r,o,0).applyMatrix4(ne),Ct.set(0,o,0).applyMatrix4(ne);const s=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()],i=r*.5,c=o*.5,u=new Nr;u.moveTo(i,c),u.arc(0,0,i,0,Math.PI*2);const d=u.getPoints().map(h=>{const p=new Ht(h.x,h.y,0);return p.applyMatrix4(ne),p});this.circle.geometry.setFromPoints(d),this.circle.visible=!0,kt.set(i,0,0).applyMatrix4(ne),Lt.set(i,o,0).applyMatrix4(ne),zt.set(0,c,0).applyMatrix4(ne),jt.set(r,c,0).applyMatrix4(ne),s.push(...kt.toArray(),...Lt.toArray(),...zt.toArray(),...jt.toArray()),this.box.geometry.setAttribute("position",new _n(s,3)),this.box.visible=!0,this.width=$t(Math.abs(r),2),this.height=$t(Math.abs(o),2),this.center.set(r,o,0).multiplyScalar(.5).applyMatrix4(ne),this.middlePosition.copy(Pt.setX(r).setY(o).applyMatrix4(ne))}drawBox(t,n,r){pt.setFromUnitVectors(Tn,this.normal),ne.compose(t,pt,gn),_t.copy(ne).invert();const{x:o,y:a}=Pt.copy(n).applyMatrix4(_t);let{z:s}=Pt.copy(r).applyMatrix4(_t);s=s>0?Math.abs(o):-Math.abs(o),yt.set(0,0,0).applyMatrix4(ne),bt.set(o,0,0).applyMatrix4(ne),St.set(o,a,0).applyMatrix4(ne),Ct.set(0,a,0).applyMatrix4(ne),kt.set(0,0,s).applyMatrix4(ne),Lt.set(o,0,s).applyMatrix4(ne),zt.set(o,a,s).applyMatrix4(ne),jt.set(0,a,s).applyMatrix4(ne);const i=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray(),...yt.toArray(),...kt.toArray(),...bt.toArray(),...Lt.toArray(),...St.toArray(),...zt.toArray(),...Ct.toArray(),...jt.toArray(),...kt.toArray(),...Lt.toArray(),...Lt.toArray(),...zt.toArray(),...zt.toArray(),...jt.toArray(),...jt.toArray(),...kt.toArray()],c=o*.5,u=a*.5,d=new Nr;d.moveTo(c,u),d.arc(0,0,c,0,Math.PI*2);const h=d.getPoints().map(y=>{const g=new Ht(y.x,y.y,s*.5);return g.applyMatrix4(ne),g}),[p,f,v]=this.center.set(c,u,s*.5).applyMatrix4(ne).toArray();this.circle.geometry.setFromPoints(h),this.circle1.geometry.setFromPoints(h),this.circle2.geometry.setFromPoints(h),this.circle.geometry.center().rotateX(-Math.PI*.5).translate(p,f,v),this.circle1.geometry.center().translate(p,f,v),this.circle2.geometry.center().rotateZ(-Math.PI*.5).translate(p,f,v),this.circle.visible=!0,this.circle1.visible=!0,this.circle2.visible=!0,this.box.geometry.setAttribute("position",new _n(i,3)),this.box.visible=!0,this.width=$t(Math.abs(o),2),this.height=$t(Math.abs(a),2),this.depth=$t(Math.abs(s),2),this.center.set(o,a,s).multiplyScalar(.5),pn.set(Math.PI*.5,0,0),pt.setFromEuler(pn),Gn.compose(this.center,pt,gn).premultiply(ne)}createEntity(){Gn.decompose(this.center,pt,Pt);const{x:t,y:n,z:r}=pn.setFromQuaternion(pt),o={position:this.center.toArray(),rotation:[t,n,r].map(fr.radToDeg),radius:$t(this.width*.5,2)},a=Wu(this.core,o);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class e0 extends Rr{constructor(n){super(n);E(this,"onMouseUpPhase1",n=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.moving=!1,this.updateMouse(n),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core)})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(n,r){pt.setFromUnitVectors(Tn,this.normal),ne.compose(n,pt,gn),_t.copy(ne).invert();let{x:o,y:a}=Pt.copy(r).applyMatrix4(_t);const s=Math.max(Math.abs(o),Math.abs(a));this.isSquare&&(o=o>0?s:-s,a=a>0?s:-s),yt.set(0,0,0).applyMatrix4(ne),bt.set(o,0,0).applyMatrix4(ne),St.set(o,a,0).applyMatrix4(ne),Ct.set(0,a,0).applyMatrix4(ne);const i=[...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()];this.box.geometry.setAttribute("position",new _n(i,3)),this.box.visible=!0,this.width=$t(Math.abs(o),2),this.height=$t(Math.abs(a),2),this.center.set(o,a,.002).multiplyScalar(.5).applyMatrix4(ne),this.middlePosition.copy(Pt.setX(o).setY(a).applyMatrix4(ne))}createEntity(){const{x:n,y:r,z:o}=pn.setFromQuaternion(pt),a={position:this.center.toArray(),rotation:[n,r,o].map(fr.radToDeg),size:[this.width,this.height]},s=Gu(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(s),this.core.select([s]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class Bn extends Pr{constructor(n){super(n);E(this,"dom");E(this,"editorPlugin");E(this,"helperPlugin");E(this,"pivotPlugin");E(this,"selectionPlugin");E(this,"camera");E(this,"type");E(this,"continuous");E(this,"box");E(this,"circle");E(this,"circle1");E(this,"circle2");E(this,"grid");E(this,"tools");this.editorPlugin=n.getPlugin(jn),this.helperPlugin=n.getPlugin(Ba),this.pivotPlugin=n.getPlugin(Dr),this.selectionPlugin=n.getPlugin(al),this.camera=this.editorPlugin.camera,this.continuous=!1,this.type=Et.Box,this.dom=n.render.container;const r=new Uu,o=new nl({color:"#ffaa00"});this.box=new qu(r,o),this.circle=new Wo(r.clone(),o),this.circle1=new Wo(r.clone(),o),this.circle2=new Wo(r.clone(),o),this.helperPlugin.scene.add(this.box),this.helperPlugin.scene.add(this.circle),this.helperPlugin.scene.add(this.circle1),this.helperPlugin.scene.add(this.circle2),this.grid=new Xu(this.core.render,this.camera),this.helperPlugin.scene.add(this.grid.grid),this.tools={[Et.Plane]:new Xv(this),[Et.Box]:new Yv(this),[Et.Cone]:new Zv(this),[Et.Cylinder]:new Qv(this),[Et.Sphere]:new Jv(this),[Et.Pipe]:new Yu(this),[Et.Text]:new e0(this)}}unmount(){kr(this.box),kr(this.circle),kr(this.circle1),kr(this.circle2),this.grid.dispose()}draw(n){this.type=n,this.pivotPlugin.setEnabled(!1),this.selectionPlugin.setEnabled(!1),this.tools[n].start()}finish(){this.box.visible=!1,this.circle.visible=!1,this.circle1.visible=!1,this.circle2.visible=!1,this.grid.hide(),this.pivotPlugin.setEnabled(!0),this.selectionPlugin.setEnabled(!0),this.tools[this.type].finish()}getObjects(){const{scene:n}=this.core.render,r=[];return n.traverseVisible(o=>r.push(o)),r}}class t0 extends Pr{constructor(n){super(n);E(this,"editorPlugin");E(this,"viewHelper");E(this,"container");E(this,"onPointerUp",n=>{n.stopPropagation(),this.viewHelper.handleClick(n)});E(this,"onPointerDown",n=>{n.stopPropagation()});this.editorPlugin=n.getPlugin(jn);const{camera:r,controls:o}=this.editorPlugin;this.viewHelper=new qv(r,n.container),this.viewHelper.setLabels("X","Y","Z"),this.viewHelper.center=o.target,this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.width="128px",this.container.style.height="128px",n.container.appendChild(this.container),this.container.addEventListener("pointerup",this.onPointerUp),this.container.addEventListener("pointerdown",this.onPointerDown)}render(n){this.viewHelper.animating&&this.viewHelper.update(n),this.viewHelper.render(this.core.render.renderer)}unmount(){this.viewHelper.dispose(),this.container.removeEventListener("pointerup",this.onPointerUp),this.container.removeEventListener("pointerdown",this.onPointerDown),this.container.remove()}}const n0=["position","rotation","scale"];class r0 extends Pr{constructor(n){super(n);E(this,"outlines");E(this,"helperPlugin");E(this,"onEntitiesSelect",n=>{this.attach(n.entities)});E(this,"onEntityRendered",()=>{this.attach(this.core.selections)});E(this,"onEntityChange",n=>{const{entity:r,key:o}=n,a=this.outlines.get(r);if(a&&n0.includes(o)){a.box.makeEmpty();const s=Si(r.object3d,r.children.map(i=>i.object3d),!1);r.object3d.updateMatrixWorld(),s.forEach(i=>a.box.expandByObject(i,!0))}});this.outlines=new Map,this.helperPlugin=this.core.getPlugin(Ba),n.bus.on("ENTITY_SELECTED",this.onEntitiesSelect),n.bus.on("ENTITY_RENDERED",this.onEntityRendered),n.bus.on("ENTITY_CHANGED",this.onEntityChange)}attach(n){this.outlines.forEach(r=>r.visible=!1),n.forEach(r=>{let o=this.outlines.get(r);if(o==null){o=new Zu(new Po);const s=o.material;s.color.set("#396efe"),s.depthTest=!1,s.transparent=!0,this.helperPlugin.scene.add(o),this.outlines.set(r,o)}o.box.makeEmpty();const a=Si(r.object3d,r.children.map(s=>s.object3d),!1);r.object3d.updateMatrixWorld(),a.forEach(s=>o.box.expandByObject(s)),o.visible=!o.box.isEmpty()})}unmount(){this.outlines.forEach(n=>{n.dispose(),n.removeFromParent()}),this.outlines.clear(),this.core.bus.off("ENTITY_SELECTED",this.onEntitiesSelect),this.core.bus.off("ENTITY_RENDERED",this.onEntityRendered),this.core.bus.off("ENTITY_CHANGED",this.onEntityChange)}}class o0{constructor(t){E(this,"core");E(this,"camera");E(this,"controls");E(this,"editorPlugin");E(this,"box");E(this,"sphere");E(this,"center");E(this,"delta");E(this,"model");this.core=new il(t),this.editorPlugin=new jn(this.core),this.core.use(this.editorPlugin),this.camera=this.editorPlugin.camera,this.controls=this.editorPlugin.controls,this.camera.far=1e7,this.box=new Po,this.sphere=new ol,this.center=new Ht,this.delta=new Ht;const n=new Qu,r=new Go("white",3),o=new Go("white",3),a=new Go("white",3);r.position.set(0,200,0),o.position.set(100,200,100),a.position.set(-100,-200,-100),this.core.render.addObject(n),this.core.render.addObject(r),this.core.render.addObject(o),this.core.render.addObject(a)}mount(t){this.core.mount(t)}async preview(t){this.model&&(this.core.render.removeObject(this.model),kr(this.model)),this.model=await this.core.modelManager.loadModel(t),this.core.render.addObject(this.model),this.focus(this.model)}focus(t){let n;this.box.makeEmpty(),ja([t],this.box),this.box.isEmpty()?(this.center.setFromMatrixPosition(t.matrixWorld),n=1):(this.box.getCenter(this.center),n=this.box.getBoundingSphere(this.sphere).radius),this.delta.set(0,0,1),this.delta.applyQuaternion(this.camera.quaternion),this.delta.multiplyScalar(n*4),this.controls.target.copy(this.center),this.camera.position.copy(this.center).add(this.delta)}dispose(){this.core.unmount()}async toImage(){return await this.editorPlugin.toImage()}}const a0=l.forwardRef((e,t)=>{const{file:n,mtl:r=""}=e,o=l.useRef(null),[a,s]=l.useState();return l.useEffect(()=>{const i=new o0({});return i.mount(o.current),i.core.resize(),s(i),()=>{i.dispose(),s(void 0)}},[]),l.useEffect(()=>{n&&(a==null||a.preview({file:n,mtl:r}))},[n,r]),l.useImperativeHandle(t,()=>({toImage:async()=>a==null?void 0:a.toImage()}),[a]),U.jsx("div",{ref:o,style:{width:"100%",height:"100%",background:"#000"}})}),i0=e=>{const{parent:t,data:n,visible:r,setVisible:o,onConfirm:a}=e,[s]=Tr.useForm(),[i,c]=l.useState(!1),[u,d]=l.useState(""),[h,p]=l.useState(""),f=l.useRef();l.useEffect(()=>{if(!n)return;const{file:m,mtl:b}=JSON.parse(n.content);s.setFieldsValue({name:n.name,file:m,mtl:b}),d(m),p(b)},[n,s]);const v=()=>s.submit(),y=()=>o(!1),g=async m=>{const{name:b,file:S,mtl:C}=m,N=JSON.stringify({file:S,mtl:C}),O=await f.current.toImage();c(!0),n?(await Ju(n.code,O,N),o(!1),a()):(await ed(b,O,N,t),o(!1),a()),c(!1)};return U.jsx(ll,{width:800,title:n?"编辑模型":'"创建模型"',open:r,loading:i,onOk:v,onCancel:y,children:U.jsxs(Wa,{gutter:16,children:[U.jsx(ar,{span:12,children:U.jsxs(Tr,{form:s,layout:"vertical",onFinish:g,children:[U.jsx(Tr.Item,{label:"模型名称",name:"name",rules:[{required:!0,message:"请输入模型名称"}],children:U.jsx(Fa,{disabled:!!n,placeholder:"请输入模型名称"})}),U.jsx(Tr.Item,{label:"模型文件",name:"file",rules:[{required:!0,message:"请输入模型文件"}],children:U.jsx(Oa,{type:"obj,glb,fbx",placeholder:"请选择模型文件",onChange:d})}),U.jsx(Tr.Item,{label:"材质文件",name:"mtl",children:U.jsx(Oa,{type:"mtl",placeholder:"请选择材质文件",onChange:p})})]})}),U.jsx(ar,{span:12,children:U.jsx(a0,{ref:f,file:u,mtl:h})})]})})},s0=[{label:"新建文件夹",key:"folder"},{label:"新建模型",key:"model"}],l0=()=>{const[e,t]=La.useMessage(),[n,r]=l.useState([]),[o,a]=l.useState(""),[s,i]=l.useState(""),[c,u]=l.useState([]),[d,h]=l.useState(!1),[p,f]=l.useState(),v=async x=>{const $=await td(x);r($)};l.useEffect(()=>{v("")},[]);const y=x=>{if(x!==s)if(!x)u([]),i(""),v("");else{const $=c.findIndex(w=>w.code===x);c.splice($+1,c.length-1-$),u([...c]),i(x),v(x)}},g=async({key:x})=>{x==="folder"?(await nd(s,"文件夹"),await v(s),e.info("添加成功")):x==="model"&&(h(!0),f(void 0))},m=x=>a(x.code),b=async x=>{x.type==="folder"?(await v(x.code),c.push(x),u([...c]),i(x.code)):(f(x),h(!0))},S=async(x,$)=>{await od(x.code,$),await v(s)},C=(x,$)=>{const w={type:"model",item:$};x.dataTransfer.setData("text",JSON.stringify(w))},N=async x=>{await rd(x.code),await v(s)},O=()=>v(s);return U.jsxs(U.Fragment,{children:[t,U.jsx(Cc,{parent:s,parents:c,onClick:y}),U.jsx(ka,{menu:{items:s0,onClick:g},trigger:["contextMenu"],children:U.jsx("div",{className:Ds.container,children:U.jsx("div",{className:Ds.content,children:n.map(x=>U.jsx(xc,{asset:x,draggable:x.type==="file",active:o===x.code,onClick:m,onDoubleClick:b,onRename:S,onDelete:N,onDragStart:$=>C($,x)},x.code))})})}),d&&U.jsx(i0,{data:p,parent:s,visible:d,setVisible:h,onConfirm:O})]})},c0=()=>{const[e,t]=l.useState("models");return U.jsxs("div",{className:dn.container,children:[U.jsxs("div",{className:dn.title,children:[U.jsx("span",{className:"iconfont icon-assets"}),U.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Assets"})]}),U.jsxs("div",{className:dn.body,children:[U.jsxs("div",{className:dn.left,children:[U.jsxs("div",{className:`${dn.tag} ${e==="models"?dn.selected:""}`,onClick:()=>t("models"),children:[U.jsx("span",{className:"iconfont icon-model"}),U.jsx("span",{className:dn.tagName,children:"模型"})]}),U.jsxs("div",{className:`${dn.tag} ${e==="materials"?dn.selected:""}`,onClick:()=>t("materials"),children:[U.jsx("span",{className:"iconfont icon-material"}),U.jsx("span",{className:dn.tagName,children:"材质"})]}),U.jsxs("div",{className:`${dn.tag} ${e==="assets"?dn.selected:""}`,onClick:()=>t("assets"),children:[U.jsx("span",{className:"iconfont icon-file"}),U.jsx("span",{className:dn.tagName,children:"资源"})]})]}),U.jsxs("div",{className:dn.right,children:[e==="models"&&U.jsx(l0,{}),e==="materials"&&U.jsx(Wv,{}),e==="assets"&&U.jsx(Fv,{})]})]})]})},u0="_container_15a0b_1",d0="_title_15a0b_10",h0="_body_15a0b_16",aa={container:u0,title:d0,body:h0};class f0{constructor(t){E(this,"parent");E(this,"container");E(this,"label");E(this,"item");this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item-label",this.label=document.createElement("div"),this.label.className="attribute-item-label-name",this.container.appendChild(this.label)}hide(){delete this.item}show(t){const{attribute:n,tip:r}=t,{label:o,hiddenLabel:a}=n;this.item=t,this.label.textContent=o,this.label.title=r||o,this.container.style.display=a?"none":"flex"}dispose(){delete this.item}}const D={BASE:{key:"base",name:"基础"},COMPONENTS:{key:"components",name:"组件"},CONTROL:{key:"control",name:"控制"},BACKGROUND:{key:"background",name:"背景"},ENVIRONMENT:{key:"environment",name:"环境"},FOG:{key:"fog",name:"雾"},GRID:{key:"grid",name:"网格"},TRANSFORM:{key:"transform",name:"变换"},TEXT:{key:"text",name:"文本"}},ae={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",ENUM:"enum",COLOR:"color",VECTOR2:"vector2",VECTOR3:"vector3",SCRIPT:"script",ASSET:"asset"},g0=["Arial","Arial Black","Arial Narrow","Algerian","Bookman Old Style","Bahnschrift Light","Baskerville Old Face","Bauhaus 93","Bell MT","Cursive","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Calibri","Calibri Light","fantasy","Georgia","Gabriola","Garamond","Informal Roman","Impact","Lucida Bright","Lucida Console","Lucida Sans Unicode","monospace","Microsoft Uighur","Monotype Corsiva","MS Sans Serif","MS Serif","Palatino Linotype","serif","sans-serif","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","等线","等线 Light","仿宋","华文中宋","华文仿宋","华文宋体","华文彩云","华文新魏","华文楷体","华文琥珀","华文细黑","华文行楷","华文隶书","宋体","幼圆","微软雅黑","黑体","新宋体","方正姚体","方正舒体","楷体","隶书"].map(e=>({label:e,value:e})),p0=[{label:"常规",value:"normal"},{label:"粗体",value:"bold"},{label:"斜体",value:"italic"},{label:"粗斜体",value:"italic bold"}];var zn=(e=>(e.Default="Default",e.Component="Component",e))(zn||{}),_o=(e=>(e.GRAPH="graph",e.ATTR_COMPONENT="attrComponent",e.HIERARCHY="hierarchy",e))(_o||{});class Fn{constructor(t,n,r){E(this,"editor");E(this,"attribute");E(this,"callbacks");E(this,"targets");E(this,"target");E(this,"key");E(this,"bindCallback");this.editor=t,this.attribute=n,this.targets=r,this.target=r[r.length-1],this.key=n.key,this.callbacks=[]}setTargets(t){this.targets=t,this.target=t[t.length-1]}listen(t){this.callbacks.includes(t)||this.callbacks.push(t)}unlisten(t){const n=this.callbacks.indexOf(t);n>=0&&this.callbacks.splice(n,1)}update(){this.callbacks.forEach(t=>t(this.getter()))}getter(){return this.attribute.getter(this.target)}setter(t){this.editor.historyManager.beginTransaction();for(const n of this.targets)this.attribute.setter(n,t);this.editor.historyManager.endTransaction()}get visible(){return!0}get group(){return this.attribute.group}get groupName(){return this.attribute.groupName}get disabled(){const{disabled:t}=this.attribute;return typeof t=="function"?t(this.target):t}get text(){return this.attribute.text}get options(){return this.attribute.options}get min(){const{min:t}=this.attribute;return typeof t=="function"?t(this.target):t}get max(){const{max:t}=this.attribute;return typeof t=="function"?t(this.target):t}get precision(){return this.attribute.precision}get step(){return this.attribute.step}get tip(){return this.attribute.tip}get assetType(){return this.attribute.assetType}get disableAlpha(){return this.attribute.disableAlpha}}class m0{constructor(t,n,r){E(this,"editor");E(this,"nodeAttr");E(this,"viewAttr");E(this,"groups");E(this,"activeGroups");this.editor=t,this.nodeAttr=n,this.viewAttr=r,this.groups=[],this.activeGroups=[]}refresh(){const t=[],n=[];let r=this.editor.selectionManager.getLastSelection();const o=[];r?(t.push(...this.editor.selectionManager.getSelection()),n.push(...this.nodeAttr.getAttributes(r)),o.push(...this.nodeAttr.getGroups(r)),this.activeGroups=[...this.nodeAttr.activeGroups]):(r=this.editor.selectionManager.getView(),t.push(r),n.push(...this.viewAttr.getAttributes(r)),o.push(...this.viewAttr.getGroups(r)),this.activeGroups=[...this.viewAttr.activeGroups]),o.forEach(a=>a.attributes.forEach(s=>s.setTargets(t))),this.groups=[];for(const a of n){a.setTargets(t);const s=this.groups.find(i=>i.group===a.group);if(s)s.attributes.push(a);else{const{group:i,groupName:c}=a;this.groups.push({editor:this.editor,group:i,groupName:c,type:zn.Default,attributes:[a]})}}return this.groups.push(...o),this.groups}update(){for(const t of this.groups)for(const n of t.attributes)n.update()}dispose(){this.groups=[]}}const Ts=e=>{const{ctrlKey:t=!1,shiftKey:n=!1,altKey:r=!1,metaKey:o=!1}=e;return`${t?"ctrl+":""}${o?"meta+":""}${n?"shift+":""}${r?"alt+":""}${e.code}`};class v0{constructor(t,n){E(this,"editor");E(this,"keyEvents");E(this,"handleAction",t=>{if(t.altKey&&t.preventDefault(),!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)){for(const n of this.keyEvents)if(this.isKeyMatch(n.key,t)){t.preventDefault(),n.action(this.editor),console.log(`[${Ts(t)}] => ${n.actionName}`);return}console.log(`[${Ts(t)}] => no match`)}});this.editor=t,this.keyEvents=n}active(){document.addEventListener("keydown",this.handleAction)}deactive(){document.removeEventListener("keydown",this.handleAction)}isKeyMatch(t,n){if(Array.isArray(t))return t.some(i=>this.isKeyMatch(i,n));if(t.keyCode=="*")return!0;const{ctrlKey:r=!1,shiftKey:o=!1,altKey:a=!1,metaKey:s=!1}=t;return r==n.ctrlKey&&o==n.shiftKey&&a==n.altKey&&s==n.metaKey&&t.keyCode==n.code}dispose(){this.keyEvents=[],document.removeEventListener("keydown",this.handleAction)}}class y0{constructor(t){E(this,"editor");this.editor=t}refresh(){const t=this.editor.core.entityManager.root;return this.getNodes(t.children)}getNodes(t){const n=[];return t.forEach(r=>{const{id:o,name:a,type:s,visible:i,children:c}=r,u={id:o,name:a,type:s,visible:i,children:this.getNodes(c)};n.push(u)}),n}getNode(t){return this.editor.core.entityManager.getEntity(t)}removeNode(t){const n=this.editor.core.entityManager.getEntity(t);n&&(this.editor.historyManager.beginTransaction(),this.editor.core.removeEntity(n),this.editor.core.select([]),this.editor.historyManager.endTransaction())}updateNode(t,n,r){const o=this.editor.core.entityManager.getEntity(t);o==null||o.setAttr(n,r)}moveNodes(t,n,r){this.editor.historyManager.beginTransaction(),r==="before"?t.forEach(o=>{this.moveNode(o,n,r)}):t.reverse().forEach(o=>{this.moveNode(o,n,r)}),this.editor.historyManager.endTransaction()}moveNode(t,n,r){const o=this.getNode(t),a=this.getNode(n);if(!o||!a)return;let s,i;const c=o.parent,u=a.parent,d=c.children.indexOf(o),h=u.children.indexOf(a);r==="body"?(s=a,i=a==null?void 0:a.children.length):r==="before"?(s=u,c===u?d>h?i=h+1:i=h:i=h+1):r==="after"&&(s=u,u===c?d>h?i=h:i=h-1:i=h),this.editor.core.moveEntity(o,s,i)}}class Dt{constructor(t){E(this,"key");E(this,"editor");this.key=Dd(),this.editor=t}mount(){}deactive(){}}class b0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="恢复",this.icon="huifu"}active(){this.editor.historyManager.redo()}}class S0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="撤销",this.icon="chexiao"}active(){this.editor.historyManager.undo()}}class C0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");E(this,"actived");this.title="平面",this.icon="plane",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Plane)}deactive(){this.actived=!1,this.plugin.finish()}}class x0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"actived");E(this,"plugin");this.title="立方体",this.icon="box",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Box)}deactive(){this.actived=!1,this.plugin.finish()}}class w0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");E(this,"actived");this.title="圆锥",this.icon="cone",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Cone)}deactive(){this.actived=!1,this.plugin.finish()}}class E0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");E(this,"actived");this.title="圆柱",this.icon="cylinder",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Cylinder)}deactive(){this.actived=!1,this.plugin.finish()}}class M0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");E(this,"actived");this.title="球体",this.icon="sphere",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Sphere)}deactive(){this.actived=!1,this.plugin.finish()}}class N0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"actived");E(this,"plugin");this.title="管道",this.icon="pipe",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Pipe)}deactive(){this.actived=!1,this.plugin.finish()}}class O0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="环境光",this.icon="ambient-light"}active(){const n=ad(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class $0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="平行光",this.icon="directional-light"}async active(){const n=id(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class I0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="预览",this.icon="preview"}active(){this.editor.preview()}}class A0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"doubleConfirm");this.title="重新加载",this.icon="reload",this.doubleConfirm=!0}active(){this.editor.reload()}}class P0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="保存",this.icon="save"}active(){this.editor.save()}}class R0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");this.title="移动",this.icon="translate",this.plugin=n.core.getPlugin(Dr)}get actived(){return this.plugin.controls.getMode()==="translate"}async active(){this.plugin.controls.setMode("translate")}}class D0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");this.title="旋转",this.icon="rotate",this.plugin=n.core.getPlugin(Dr)}get actived(){return this.plugin.controls.getMode()==="rotate"}async active(){this.plugin.controls.setMode("rotate")}}class T0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"plugin");this.title="缩放",this.icon="scale",this.plugin=n.core.getPlugin(Dr)}get actived(){return this.plugin.controls.getMode()==="scale"}async active(){this.plugin.controls.setMode("scale")}}class _0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="半球光",this.icon="hemisphere-light"}active(){const n=sd(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class k0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="透视相机",this.icon="perspective-camera"}active(){const n=ld(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class L0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="正交相机",this.icon="orthographic-camera"}active(){const n=cd(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class z0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"actived");E(this,"plugin");this.title="连续绘图",this.icon="draw",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}mount(){this.actived=this.plugin.continuous}active(){this.actived=!this.actived,this.plugin.continuous=this.actived}}class j0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="组",this.icon="group"}active(){const n=ud(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class B0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="聚光灯",this.icon="spot-light"}active(){const n=dd(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class H0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="聚光灯",this.icon="point-light"}active(){const n=hd(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(n),this.editor.core.select([n]),this.editor.historyManager.endTransaction()}}class V0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");this.title="快捷键",this.icon="shortcut"}active(){this.editor.bus.emit("OPEN_SHORTCUT_DIALOG",this.editor)}}class K0 extends Dt{constructor(n){super(n);E(this,"title");E(this,"icon");E(this,"actived");E(this,"plugin");this.title="文本",this.icon="text",this.actived=!1,this.plugin=n.core.getPlugin(Bn)}active(){this.actived=!0,this.plugin.draw(Et.Text)}deactive(){this.actived=!1,this.plugin.finish()}}class F0{constructor(t){E(this,"editor");E(this,"tools");E(this,"editPlugin");E(this,"lastTool");E(this,"deselect",()=>{var t;(t=this.lastTool)==null||t.deactive(),this.editor.bus.emit("TOOL_UPDATE",this.editor)});this.editor=t,this.tools={left:[new S0(t),new b0(t),new C0(t),new x0(t),new w0(t),new E0(t),new M0(t),new N0(t),new O0(t),new $0(t),new _0(t),new B0(t),new H0(t),new k0(t),new L0(t),new K0(t),new j0(t),new R0(t),new D0(t),new T0(t),new z0(t)],right:[new V0(t),new A0(t),new P0(t),new I0(t)]},this.editPlugin=t.core.getPlugin(Ha),this.editor.core.bus.on("DRAW_FINISH",this.deselect)}mount(){this.tools.left.forEach(t=>t.mount()),this.tools.right.forEach(t=>t.mount())}dispose(){this.editor.core.bus.off("DRAW_FINISH",this.deselect)}select(t,n){var r;this.editPlugin.exit(),(r=this.lastTool)==null||r.deactive(),this.lastTool=t,this.lastTool.active(n),this.editor.bus.emit("TOOL_UPDATE",this.editor)}}class W0{constructor(t){E(this,"editor");E(this,"selections");this.editor=t,this.selections=[]}refresh(){return this.selections=this.editor.core.selections.map(t=>t.id),this.selections}setSelections(t){const n=this.editor.core.entityManager.getEntities(t);this.editor.core.select(n)}removeSelections(t){const n=[];if(t)for(const r of t){const o=this.editor.core.entityManager.getEntity(r);o&&n.push(o)}this.editor.core.select(n)}getLastSelection(){return this.editor.core.lastSelection}getSelection(){return this.editor.core.selections}getView(){return this.editor.core.entityManager.root}}class G0{constructor(t){E(this,"editor");E(this,"dropPlugin");this.editor=t,this.dropPlugin=t.core.getPlugin(Ec)}onDrop(t){if(!t.dataTransfer)return;const n=t.dataTransfer.getData("text");let r;try{r=JSON.parse(n)}catch(o){console.error(o)}if(r)try{r.type==="model"?this.dropPlugin.drop(r.item.code,r.item.name,t):r.type==="symbol"&&this.dropPlugin.dropSymbol(r.item.code,r.item.name,t)}catch{throw new Error(`加载模型出错: ${n}`)}}}class U0{constructor(t){E(this,"editor");E(this,"offset");E(this,"copyPlugin");E(this,"point");E(this,"nodes");this.editor=t,this.point=[0,0,0],this.offset=[1,0,1],this.nodes=[],this.copyPlugin=t.core.getPlugin(wc)}copy(){this.point=[0,0,0],this.nodes=[...this.editor.core.selections]}cut(){const t=[...this.editor.core.selections];this.editor.historyManager.beginTransaction(),this.editor.core.select([]),t.forEach(n=>this.editor.core.removeEntity(n)),this.editor.historyManager.endTransaction(),this.point=[0,0,0],this.nodes=t}paste(t=!1){this.editor.historyManager.beginTransaction(),t?(this.point[0]+=this.offset[0],this.point[1]+=this.offset[1],this.point[2]+=this.offset[2],this.copyPlugin.paste(this.nodes,this.point)):this.copyPlugin.paste(this.nodes,this.copyPlugin.getOffset(this.nodes)),this.editor.historyManager.endTransaction()}canPaste(){return this.nodes.length>0}}class Xn{constructor(t){E(this,"editor");E(this,"core");this.editor=t,this.core=t.core}isSame(t){return this.constructor.name===t.constructor.name}}class hi extends Xn{}class q0 extends Xn{constructor(n,r){super(n);E(this,"entity");E(this,"parent");E(this,"index");this.entity=r.entity,this.parent=r.parent,this.index=r.index}undo(){this.core.removeEntity(this.entity),this.core.select([])}redo(){this.core.addEntity(this.entity,this.parent,this.index),this.core.select([this.entity])}}class X0 extends Xn{constructor(n,r){super(n);E(this,"entity");E(this,"parent");E(this,"index");this.entity=r.entity,this.parent=r.parent,this.index=r.index}undo(){this.core.addEntity(this.entity,this.parent,this.index)}redo(){this.core.removeEntity(this.entity)}}class Y0 extends Xn{constructor(n,r){super(n);E(this,"entity");E(this,"parent");E(this,"index");E(this,"oldParent");E(this,"oldIndex");this.entity=r.entity,this.parent=r.parent,this.index=r.index,this.oldParent=r.oldParent,this.oldIndex=r.oldIndex}undo(){this.core.moveEntity(this.entity,this.oldParent,this.oldIndex)}redo(){this.core.moveEntity(this.entity,this.parent,this.index)}}class Z0 extends Xn{constructor(n,r){super(n);E(this,"entities");E(this,"olds");this.entities=r.entities,this.olds=r.olds}undo(){this.core.select(this.olds)}redo(){this.core.select(this.entities)}}class Q0 extends hi{constructor(n,r){super(n);E(this,"entity");E(this,"key");E(this,"newValue");E(this,"oldValue");this.entity=r.entity,this.key=r.key,this.newValue=r.newValue,this.oldValue=r.oldValue}undo(){this.entity.setAttr(this.key,this.oldValue)}redo(){this.entity.setAttr(this.key,this.newValue)}isSame(n){return super.isSame(n)&&this.entity===n.entity&&this.key===n.key}update(n){this.newValue=n.newValue}}class J0 extends Xn{constructor(n,r){super(n);E(this,"project");E(this,"oldProject");this.project=r.project,this.oldProject=r.oldProject}undo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.oldProject),this.editor.historyManager.resume()}redo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.project),this.editor.historyManager.resume()}}class ey extends Xn{constructor(n,r){super(n);E(this,"component");E(this,"parent");E(this,"index");this.component=r.component,this.parent=r.parent,this.index=r.index}undo(){this.core.removeComponent(this.component)}redo(){this.core.addComponent(this.component,this.parent,this.index)}}class ty extends Xn{constructor(n,r){super(n);E(this,"component");E(this,"parent");E(this,"index");this.component=r.component,this.parent=r.parent,this.index=r.index}undo(){this.core.addComponent(this.component,this.parent,this.index)}redo(){this.core.removeComponent(this.component)}}class ny extends hi{constructor(n,r){super(n);E(this,"component");E(this,"key");E(this,"newValue");E(this,"oldValue");this.component=r.component,this.key=r.key,this.newValue=r.newValue,this.oldValue=r.oldValue}undo(){this.component.setAttr(this.key,this.oldValue)}redo(){this.component.setAttr(this.key,this.newValue)}isSame(n){return super.isSame(n)&&this.component===n.component&&this.key===n.key}update(n){this.newValue=n.newValue}}class ry{constructor(t){E(this,"editor");E(this,"project");this.editor=t}deserialize(t){const n=this.project,r=this.editor.core.entityManager.root.code;try{t=oy(t,r)}catch(s){console.error(s)}this.editor.historyManager.pause(),this.editor.core.clear(),this.editor.core.deserialize(t),this.editor.historyManager.resume();const o={oldProject:n,project:t},a=new J0(this.editor,o);this.editor.historyManager.addHistory([a])}serialize(t){return this.project=this.editor.core.serialize(t),this.project}}const oy=(e,t)=>{const n=JSON.parse(e);return n.document.code=t,JSON.stringify(n)};class ay{constructor(t){E(this,"editor");E(this,"core");E(this,"undos");E(this,"redos");E(this,"max");E(this,"paused");E(this,"transaction");E(this,"transactions");E(this,"onDeserialize",()=>{this.core.bus.off("DESERIALIZE",this.onDeserialize),this.core.bus.on("TRANSACTION_START",this.beginTransaction),this.core.bus.on("TRANSACTION_END",this.endTransaction),this.core.bus.on("ENTITY_ADDED",this.onEntityAdded),this.core.bus.on("ENTITY_REMOVED",this.onEntityRemoved),this.core.bus.on("ENTITY_MOVED",this.onEntityMoved),this.core.bus.on("ENTITY_CHANGED",this.onEntityChanged),this.core.bus.on("ENTITY_SELECTED",this.onEntitySelected),this.core.bus.on("COMPONENT_ADDED",this.onComponentAdded),this.core.bus.on("COMPONENT_REMOVED",this.onComponentRemoved),this.core.bus.on("COMPONENT_CHANGED",this.onComponentChanged)});E(this,"beginTransaction",()=>{this.transaction=!0});E(this,"endTransaction",()=>{this.transaction=!1,this.addHistory(this.transactions),this.transactions=[]});E(this,"onEntityAdded",t=>{if(this.paused)return;const n=new q0(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onEntityRemoved",t=>{if(this.paused)return;const n=new X0(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onEntityMoved",t=>{if(this.paused)return;const n=new Y0(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onEntityChanged",t=>{if(this.paused)return;const n=new Q0(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onEntitySelected",t=>{if(this.paused)return;const n=new Z0(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onComponentAdded",t=>{if(this.paused)return;const n=new ey(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onComponentRemoved",t=>{if(this.paused)return;const n=new ty(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});E(this,"onComponentChanged",t=>{if(this.paused)return;const n=new ny(this.editor,t);this.transaction?this.addTransaction(n):this.addHistory([n])});this.editor=t,this.core=t.core,this.undos=[],this.redos=[],this.max=200,this.paused=!1,this.transaction=!1,this.transactions=[],this.core.bus.on("DESERIALIZE",this.onDeserialize)}pause(){this.paused=!0}resume(){this.paused=!1}addTransaction(t){const n=this.transactions[this.transactions.length-1];n instanceof hi&&(n!=null&&n.isSame(t))?n.update(t):this.transactions.push(t)}addHistory(t){this.redos=[],this.undos.length>=this.max&&this.undos.shift(),this.undos.push(t),this.core.bus.emit("HISTORY_CHANGE",this.core)}undo(){if(this.undos.length===0)return;this.pause();const t=this.undos.pop();t&&(this.redos.push(t),t.reverse().forEach(n=>n.undo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}redo(){if(this.redos.length===0)return;this.pause();const t=this.redos.pop();t&&(this.undos.push(t),t.reverse().forEach(n=>n.redo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}dispose(){this.undos=[],this.redos=[],this.paused=!1,this.transaction=!1,this.transactions=[]}}class iy{constructor(t){E(this,"editor");this.editor=t}getComponents(){const t=this.editor.selectionManager.getSelection(),n=t.filter(o=>o instanceof Or),r=[{label:Jt[st.SimpleScript],value:st.SimpleScript}];return n.length>0&&n.length===t.length&&r.push({label:Jt[st.OrbitControls],value:st.OrbitControls},{label:Jt[st.PointerLockControls],value:st.PointerLockControls}),r}addComponent(t){const n=[...this.editor.selectionManager.getSelection()];n.length===0&&t===st.SimpleScript&&n.push(this.editor.selectionManager.getView());try{const r=lr(t);this.editor.historyManager.beginTransaction(),n.forEach(o=>{const{entityManager:a}=this.editor.core,s=a.createComponent(r,o);this.editor.core.addComponent(s,o)}),this.editor.historyManager.endTransaction()}catch(r){console.error(r)}}}class sy{constructor(t){E(this,"editor");E(this,"menus");E(this,"meta");this.editor=t,this.menus=new Map,this.meta={}}addContextMenu(t,n){this.menus.set(t,n)}getContextMenu(t){const n=this.menus.get(t)||[];return this.getContextEvent(n)}getContextEvent(t){return t.filter(n=>n.visible(this.editor)).map(n=>{const{label:r,children:o,action:a}=n,s=o?this.getContextEvent(o):void 0,i={text:r,subMenu:s,action:()=>a(this.editor)};return s||delete i.subMenu,i})}dispose(){this.meta={}}}const ly=[{key:[{keyCode:"Backspace"},{keyCode:"Delete"}],action:e=>{const t=e.selectionManager.getSelection();e.historyManager.beginTransaction(),e.core.select([]),t.forEach(n=>e.core.removeEntity(n)),e.historyManager.endTransaction()}},{key:{keyCode:"Escape"},action:e=>{e.toolManager.deselect()}},{key:{ctrlKey:!0,keyCode:"KeyC"},action:e=>{e.copyManager.copy()}},{key:{ctrlKey:!0,keyCode:"KeyX"},action:e=>{e.copyManager.cut()}},{key:{ctrlKey:!0,keyCode:"KeyV"},action:e=>{e.copyManager.paste()}},{key:{ctrlKey:!0,keyCode:"KeyZ"},action:e=>{e.historyManager.undo()}},{key:[{ctrlKey:!0,shiftKey:!0,keyCode:"KeyZ"},{ctrlKey:!0,keyCode:"KeyY"}],action:e=>{e.historyManager.redo()}},{key:{keyCode:"Tab"},action:e=>{const t=e.core.getPlugin(Ha);t==null||t.switch()}},{key:{ctrlKey:!0,keyCode:"KeyA"},action:e=>{const t=e.core.entityManager.entities.values();e.core.select(Array.from(t))}},{key:{keyCode:"KeyP"},action:e=>{const t=e.selectionManager.getSelection();if(t.length>=2){e.historyManager.beginTransaction();const n=t.slice(0,-1),r=t[t.length-1];n.forEach(o=>e.core.moveEntity(o,r,r.children.length)),e.historyManager.endTransaction()}}},{key:{altKey:!0,keyCode:"KeyP"},action:e=>{const t=e.selectionManager.getSelection();e.historyManager.beginTransaction(),t.forEach(n=>e.core.moveEntity(n)),e.historyManager.endTransaction()}},{key:{ctrlKey:!0,keyCode:"KeyP"},action:e=>{e.preview()}},{key:{ctrlKey:!0,keyCode:"KeyS"},action:e=>{e.save()}},{key:{keyCode:"KeyQ"},action:e=>{const t=e.core.getPlugin(Dr);t==null||t.toggleSpace()}},{key:{keyCode:"KeyF"},action:e=>{const t=e.selectionManager.getSelection();t.length&&e.core.getPlugin(Mc).focus(t)}},{key:{keyCode:"KeyG"},action:e=>{const t=e.selectionManager.getSelection();t.length&&e.core.getPlugin(po).start(t,"translate")}},{key:{keyCode:"KeyR"},action:e=>{const t=e.selectionManager.getSelection();t.length&&e.core.getPlugin(po).start(t,"rotate")}},{key:{keyCode:"KeyS"},action:e=>{const t=e.selectionManager.getSelection();t.length&&e.core.getPlugin(po).start(t,"scale")}},{key:{keyCode:"KeyL"},action:e=>{const n=e.selectionManager.getSelection().filter(r=>r instanceof Or);if(n.length){const r=e.core.getPlugin(jn),{position:o,rotation:a}=r.camera;e.historyManager.beginTransaction(),n.forEach(s=>{s.setAttr("position",o),s.setAttr("rotation",a)}),e.historyManager.endTransaction()}}}],Nn=Math.PI/180,Cr=180/Math.PI,cy=1,uy=32;class dy{constructor(t){E(this,"editor");E(this,"commonAttrs");E(this,"planeAttrs");E(this,"boxAttrs");E(this,"coneAttrs");E(this,"cylinderAttrs");E(this,"sphereAttrs");E(this,"pipeAttrs");E(this,"ambientLightAttrs");E(this,"directionalLightAttrs");E(this,"hemisphereLightAttrs");E(this,"spotLightAttrs");E(this,"pointLightAttrs");E(this,"perspectiveCameraAttrs");E(this,"orthographicCameraAttrs");E(this,"modelAttrs");E(this,"symbolAttrs");E(this,"textAttrs");E(this,"activeGroups");this.editor=t,this.activeGroups=[D.BASE.key],this.commonAttrs=[{label:"可见",key:"visible",type:ae.BOOLEAN,group:D.CONTROL.key,groupName:D.CONTROL.name,getter:n=>n.getAttr("visible"),setter:(n,r)=>n.setAttr("visible",r)},{label:"可变换",key:"transformable",type:ae.BOOLEAN,group:D.CONTROL.key,groupName:D.CONTROL.name,getter:n=>n.getAttr("transformable"),setter:(n,r)=>n.setAttr("transformable",r)},{label:"可选中",key:"selectable",type:ae.BOOLEAN,group:D.CONTROL.key,groupName:D.CONTROL.name,getter:n=>n.getAttr("selectable"),setter:(n,r)=>n.setAttr("selectable",r)},{label:"名称",key:"name",type:ae.STRING,group:D.BASE.key,min:cy,max:uy,groupName:D.BASE.name,getter:n=>n.getAttr("name"),setter:(n,r)=>n.setAttr("name",r)},{label:"类型",key:"type",type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,disabled:!0,getter:n=>fd[n.type]||"",setter:()=>{}},{label:"ID",key:"id",disabled:!0,type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("id"),setter:()=>{}},{label:"位置",key:"position",type:ae.VECTOR3,group:D.TRANSFORM.key,groupName:D.TRANSFORM.name,precision:3,getter:n=>n.position.toArray(),setter:(n,r)=>this.setVector3(n,"position",r)},{label:"旋转",key:"rotation",type:ae.VECTOR3,group:D.TRANSFORM.key,groupName:D.TRANSFORM.name,precision:1,getter:({rotation:{x:n,y:r,z:o}})=>[n,r,o].map(a=>a*Cr),setter:(n,r)=>this.setEuler(n,r)},{label:"缩放",key:"scale",type:ae.VECTOR3,group:D.TRANSFORM.key,groupName:D.TRANSFORM.name,precision:3,getter:n=>n.scale.toArray(),setter:(n,r)=>this.setVector3(n,"scale",r)}],this.planeAttrs=[{label:"尺寸",key:"size",type:ae.VECTOR2,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,getter:n=>n.size.toArray(),setter:(n,r)=>this.setVector2(n,"size",r)},{label:"分段",key:"segments",type:ae.VECTOR2,group:D.BASE.key,groupName:D.BASE.name,min:1,precision:0,max:100,getter:n=>n.segments.toArray(),setter:(n,r)=>this.setVector2(n,"segments",r)}],this.boxAttrs=[{label:"尺寸",key:"size",type:ae.VECTOR3,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,getter:n=>n.size.toArray(),setter:(n,r)=>this.setVector3(n,"size",r)},{label:"分段",key:"segments",type:ae.VECTOR3,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:1,max:100,getter:n=>n.segments.toArray(),setter:(n,r)=>this.setVector3(n,"segments",r)},{label:"圆角半径",key:"radius",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,step:.1,getter:n=>n.getAttr("radius"),setter:(n,r)=>n.setAttr("radius",r)}],this.coneAttrs=[{label:"半径",key:"radius",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("radius"),setter:(n,r)=>n.setAttr("radius",r)},{label:"高度",key:"height",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("height"),setter:(n,r)=>n.setAttr("height",r)},{label:"水平角度",key:"thetaLength",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:0,max:360,getter:n=>n.thetaLength*Cr,setter:(n,r)=>n.setAttr("thetaLength",r*Nn)},{label:"底部开口",key:"openEnded",type:ae.BOOLEAN,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("openEnded"),setter:(n,r)=>n.setAttr("openEnded",r)},{label:"分段",key:"segments",type:ae.VECTOR2,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:3,max:100,getter:n=>n.segments.toArray(),setter:(n,r)=>this.setVector2(n,"segments",r)}],this.cylinderAttrs=[{label:"顶部半径",key:"radiusTop",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("radiusTop"),setter:(n,r)=>n.setAttr("radiusTop",r)},{label:"底部半径",key:"radiusBottom",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("radiusBottom"),setter:(n,r)=>n.setAttr("radiusBottom",r)},{label:"高度",key:"height",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("height"),setter:(n,r)=>n.setAttr("height",r)},{label:"水平角度",key:"thetaLength",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:0,max:360,getter:n=>n.thetaLength*Cr,setter:(n,r)=>n.setAttr("thetaLength",r*Nn)},{label:"底部开口",key:"openEnded",type:ae.BOOLEAN,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("openEnded"),setter:(n,r)=>n.setAttr("openEnded",r)},{label:"分段",key:"segments",type:ae.VECTOR2,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:3,max:100,getter:n=>n.segments.toArray(),setter:(n,r)=>this.setVector2(n,"segments",r)}],this.sphereAttrs=[{label:"半径",key:"radius",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("radius"),setter:(n,r)=>n.setAttr("radius",r)},{label:"水平角度",key:"phiLength",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:0,max:360,getter:n=>n.phiLength*Cr,setter:(n,r)=>n.setAttr("phiLength",r*Nn)},{label:"垂直角度",key:"thetaLength",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:0,max:180,getter:n=>n.thetaLength*Cr,setter:(n,r)=>n.setAttr("thetaLength",r*Nn)},{label:"分段",key:"segments",type:ae.VECTOR2,group:D.BASE.key,groupName:D.BASE.name,precision:0,min:3,max:100,getter:n=>n.segments.toArray(),setter:(n,r)=>this.setVector2(n,"segments",r)}],this.pipeAttrs=[{label:"半径",key:"radius",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("radius"),setter:(n,r)=>n.setAttr("radius",r)}],this.ambientLightAttrs=[{label:"颜色",key:"color",type:ae.COLOR,disableAlpha:!0,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("color"),setter:(n,r)=>n.setAttr("color",r)},{label:"强度",key:"intensity",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,step:.1,getter:n=>n.getAttr("intensity"),setter:(n,r)=>n.setAttr("intensity",r)}],this.directionalLightAttrs=[...this.ambientLightAttrs],this.hemisphereLightAttrs=[...this.ambientLightAttrs,{label:"底部颜色",key:"groundColor",type:ae.COLOR,disableAlpha:!0,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("groundColor"),setter:(n,r)=>n.setAttr("groundColor",r)}],this.spotLightAttrs=[...this.ambientLightAttrs,{label:"最远距离",key:"distance",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,step:.1,getter:n=>n.getAttr("distance"),setter:(n,r)=>n.setAttr("distance",r)},{label:"范围角度",key:"angle",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:1,min:0,max:90,getter:n=>n.getAttr("angle")*Cr,setter:(n,r)=>{const o=r;n.setAttr("angle",o*Nn)}},{label:"半影衰减",key:"penumbra",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,max:1,step:.1,getter:n=>n.getAttr("penumbra"),setter:(n,r)=>n.setAttr("penumbra",r)},{label:"光照衰减",key:"decay",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,step:.1,getter:n=>n.getAttr("decay"),setter:(n,r)=>n.setAttr("decay",r)}],this.pointLightAttrs=[...this.ambientLightAttrs,{label:"最远距离",key:"distance",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,step:.1,getter:n=>n.getAttr("distance"),setter:(n,r)=>n.setAttr("distance",r)},{label:"光照衰减",key:"decay",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:0,step:.1,getter:n=>n.getAttr("decay"),setter:(n,r)=>n.setAttr("decay",r)}],this.perspectiveCameraAttrs=[{label:"视角",key:"fov",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:1,min:.1,step:.1,getter:n=>n.getAttr("fov"),setter:(n,r)=>n.setAttr("fov",r)},{label:"近平面",key:"near",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("near"),setter:(n,r)=>n.setAttr("near",r)},{label:"远平面",key:"far",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("far"),setter:(n,r)=>n.setAttr("far",r)}],this.orthographicCameraAttrs=[{label:"正交尺寸",key:"frustumSize",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:1,min:.1,step:.1,getter:n=>n.getAttr("frustumSize"),setter:(n,r)=>n.setAttr("frustumSize",r)},{label:"近平面",key:"near",type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.getAttr("near"),setter:(n,r)=>n.setAttr("near",r)},{label:"远平面",key:"far",step:.1,type:ae.NUMBER,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,getter:n=>n.getAttr("far"),setter:(n,r)=>n.setAttr("far",r)}],this.modelAttrs=[{label:"模型路径",key:"modelPath",type:ae.STRING,disabled:!0,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("modelPath"),setter:(n,r)=>n.setAttr("modelPath",r)}],this.symbolAttrs=[{label:"图符路径",key:"symbolPath",type:ae.STRING,disabled:!0,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("symbolPath"),setter:(n,r)=>n.setAttr("symbolPath",r)},{label:"显示模式",key:"mode",type:ae.ENUM,options:[{label:"2D",value:"2d"},{label:"3D",value:"3d"}],group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("mode"),setter:(n,r)=>n.setAttr("mode",r)}],this.textAttrs=[{label:"尺寸",key:"size",type:ae.VECTOR2,group:D.BASE.key,groupName:D.BASE.name,precision:2,min:.01,step:.1,getter:n=>n.size.toArray(),setter:(n,r)=>this.setVector2(n,"size",r)},{label:"文本",key:"text",type:ae.STRING,group:D.TEXT.key,groupName:D.TEXT.name,getter:n=>n.getAttr("text"),setter:(n,r)=>n.setAttr("text",r)},{label:"颜色",key:"fill",type:ae.COLOR,group:D.TEXT.key,groupName:D.TEXT.name,getter:n=>n.getAttr("fill"),setter:(n,r)=>n.setAttr("fill",r)},{label:"字体",key:"fontFamily",type:ae.ENUM,group:D.TEXT.key,groupName:D.TEXT.name,options:g0,getter:n=>n.getAttr("fontFamily"),setter:(n,r)=>n.setAttr("fontFamily",r)},{label:"字体大小",key:"fontSize",type:ae.NUMBER,group:D.TEXT.key,groupName:D.TEXT.name,min:12,precision:0,getter:n=>n.getAttr("fontSize"),setter:(n,r)=>n.setAttr("fontSize",r)},{label:"字体样式",key:"fontStyle",type:ae.ENUM,group:D.TEXT.key,groupName:D.TEXT.name,options:p0,getter:n=>n.getAttr("fontStyle"),setter:(n,r)=>n.setAttr("fontStyle",r)},{label:"对齐方式",key:"align",type:ae.ENUM,group:D.TEXT.key,groupName:D.TEXT.name,options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],getter:n=>n.getAttr("align"),setter:(n,r)=>n.setAttr("align",r)}]}setVector2(t,n,r,o){const a=t.getAttr(n).toArray(),[s,i,c]=r;switch(c){case"x":a[0]=o?o(s):s;break;case"y":a[1]=o?o(i):i;break;default:a[0]=o?o(s):s,a[1]=o?o(i):i;break}t.setAttr(n,gd.fromArray(a))}setVector3(t,n,r){const o=t.getAttr(n).toArray(),[a,s,i,c]=r;switch(c){case"x":o[0]=a;break;case"y":o[1]=s;break;case"z":o[2]=i;break;default:o[0]=a,o[1]=s,o[2]=i;break}t.setAttr(n,Pt.fromArray(o))}setEuler(t,n){const r=t.rotation.toArray(),[o,a,s,i]=n;switch(i){case"x":r[0]=o*Nn;break;case"y":r[1]=a*Nn;break;case"z":r[2]=s*Nn;break;default:r[0]=o*Nn,r[1]=a*Nn,r[2]=s*Nn;break}Co.fromArray(r),t.setAttr("rotation",Co)}}const hy=[Et.AmbientLight,Et.DirectionalLight,Et.HemisphereLight],fy=["rotation","scale"];class gy{constructor(t){E(this,"editor");E(this,"commonAttrs");E(this,"customAttrs");E(this,"activeGroups");E(this,"getGroups",t=>{const n=[];for(const r of t.components)switch(r.type){case st.SimpleScript:n.push({editor:this.editor,type:zn.Component,group:`component-${r.id}`,groupName:Jt[st.SimpleScript],attributes:this.getScriptComponentAttrs(r),meta:{component:r}});break;case st.OrbitControls:n.push({editor:this.editor,type:zn.Component,group:`component-${r.id}`,groupName:Jt[st.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(r),meta:{component:r}});break;case st.PointerLockControls:n.push({editor:this.editor,type:zn.Component,group:`component-${r.id}`,groupName:Jt[st.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(r),meta:{component:r}});break}return n});this.editor=t,this.activeGroups=[D.BASE.key];const{commonAttrs:n,planeAttrs:r,boxAttrs:o,coneAttrs:a,cylinderAttrs:s,sphereAttrs:i,pipeAttrs:c,ambientLightAttrs:u,directionalLightAttrs:d,hemisphereLightAttrs:h,spotLightAttrs:p,pointLightAttrs:f,perspectiveCameraAttrs:v,orthographicCameraAttrs:y,modelAttrs:g,symbolAttrs:m,textAttrs:b}=new dy(this.editor);this.commonAttrs=this.createAttributes(n),this.customAttrs=new Map([[Et.Plane,this.createAttributes(r)],[Et.Box,this.createAttributes(o)],[Et.Cone,this.createAttributes(a)],[Et.Cylinder,this.createAttributes(s)],[Et.Sphere,this.createAttributes(i)],[Et.Pipe,this.createAttributes(c)],[Et.AmbientLight,this.createAttributes(u)],[Et.DirectionalLight,this.createAttributes(d)],[Et.HemisphereLight,this.createAttributes(h)],[Et.SpotLight,this.createAttributes(p)],[Et.PointLight,this.createAttributes(f)],[Et.PerspectiveCamera,this.createAttributes(v)],[Et.OrthographicCamera,this.createAttributes(y)],[Et.Model,this.createAttributes(g)],[Et.Symbol,this.createAttributes(m)],[Et.Text,this.createAttributes(b)]])}createAttributes(t){return t.map(n=>new Fn(this.editor,n,[]))}getAttributes(t){const n=this.customAttrs.get(t.type)||[];let r=[...this.commonAttrs];return hy.includes(t.type)&&(r=r.filter(o=>!fy.includes(o.key))),[...r,...n]}getScriptComponentAttrs(t){const n=[];return n.push({label:"组件名称",key:"component-name",type:ae.STRING,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,o)=>t.setAttr("name",o)},{label:"启用",key:"enabled",type:ae.BOOLEAN,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,o)=>t.setAttr("_enabled",o)},{label:"脚本",key:"component-script",type:ae.SCRIPT,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("script"),setter:(r,o)=>t.setAttr("script",o)}),n.map(r=>new Fn(this.editor,r,[]))}getOrbitControlsComponentAttrs(t){const n=[];return n.push({label:"组件名称",key:"component-name",type:ae.STRING,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,o)=>t.setAttr("name",o)},{label:"启用",key:"enabled",type:ae.BOOLEAN,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,o)=>t.setAttr("_enabled",o)},{label:"焦点距离",key:"distance",type:ae.NUMBER,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("distance"),setter:(r,o)=>t.setAttr("distance",o)}),n.map(r=>new Fn(this.editor,r,[]))}getPointerLockControlsComponentAttrs(t){const n=[];return n.push({label:"组件名称",key:"component-name",type:ae.STRING,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,o)=>t.setAttr("name",o)},{label:"启用",key:"enabled",type:ae.BOOLEAN,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,o)=>t.setAttr("_enabled",o)},{label:"移动速度",key:"moveSpeed",type:ae.NUMBER,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("moveSpeed"),setter:(r,o)=>t.setAttr("moveSpeed",o)}),n.map(r=>new Fn(this.editor,r,[]))}}const ia=100;class py{constructor(t){E(this,"editor");E(this,"attributes");this.editor=t,this.attributes=[{label:"调试信息",key:"debug",type:ae.BOOLEAN,group:D.CONTROL.key,groupName:D.CONTROL.name,getter:n=>n.getAttr("debug"),setter:(n,r)=>n.setAttr("debug",r)},{label:"场景名称",key:"name",disabled:!0,type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,max:ia,getter:n=>n.getAttr("name"),setter:()=>{}},{label:"场景编码",key:"code",type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,disabled:!0,getter:n=>n.getAttr("code"),setter:()=>{}},{label:"描述",key:"desc",max:256,type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("desc"),setter:(n,r)=>n.setAttr("desc",r)},{label:"版本",key:"ver",disabled:!0,type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("ver"),setter:(n,r)=>n.setAttr("ver",r)},{label:"作者",key:"author",type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,max:ia,getter:n=>n.getAttr("author"),setter:(n,r)=>n.setAttr("author",r)},{label:"公司",key:"company",type:ae.STRING,max:ia,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("company"),setter:(n,r)=>n.setAttr("company",r)},{label:"最新更新日期",key:"date",disabled:!0,type:ae.STRING,group:D.BASE.key,groupName:D.BASE.name,getter:n=>n.getAttr("date"),setter:(n,r)=>n.setAttr("date",r)},{label:"背景颜色",key:"backgroundColor",type:ae.COLOR,group:D.BACKGROUND.key,groupName:D.BACKGROUND.name,disableAlpha:!0,getter:n=>n.getAttr("backgroundColor"),setter:(n,r)=>n.setAttr("backgroundColor",r)},{label:"背景贴图",key:"backgroundTexture",type:ae.ASSET,group:D.BACKGROUND.key,groupName:D.BACKGROUND.name,assetType:"png,jpeg,jpg,hdr,webp",getter:n=>n.getAttr("backgroundTexture"),setter:(n,r)=>n.setAttr("backgroundTexture",r)},{label:"背景模糊",key:"backgroundBlurriness",type:ae.NUMBER,group:D.BACKGROUND.key,groupName:D.BACKGROUND.name,min:0,max:1,precision:1,step:.1,getter:n=>n.getAttr("backgroundBlurriness"),setter:(n,r)=>n.setAttr("backgroundBlurriness",r)},{label:"背景强度",key:"backgroundIntensity",type:ae.NUMBER,group:D.BACKGROUND.key,groupName:D.BACKGROUND.name,min:0,precision:1,step:.1,getter:n=>n.getAttr("backgroundIntensity"),setter:(n,r)=>n.setAttr("backgroundIntensity",r)},{label:"背景旋转",key:"backgroundRotation",type:ae.NUMBER,group:D.BACKGROUND.key,groupName:D.BACKGROUND.name,min:-180,max:180,precision:1,getter:n=>n.getAttr("backgroundRotation"),setter:(n,r)=>n.setAttr("backgroundRotation",r)},{label:"环境贴图",key:"environmentTexture",type:ae.ASSET,group:D.ENVIRONMENT.key,groupName:D.ENVIRONMENT.name,assetType:"png,jpeg,jpg,hdr,webp",getter:n=>n.getAttr("environmentTexture"),setter:(n,r)=>n.setAttr("environmentTexture",r)},{label:"环境贴图强度",key:"environmentIntensity",type:ae.NUMBER,group:D.ENVIRONMENT.key,groupName:D.ENVIRONMENT.name,min:0,precision:1,step:.1,getter:n=>n.getAttr("environmentIntensity"),setter:(n,r)=>n.setAttr("environmentIntensity",r)},{label:"环境贴图旋转",key:"environmentRotation",type:ae.NUMBER,group:D.ENVIRONMENT.key,groupName:D.ENVIRONMENT.name,min:-180,max:180,precision:1,getter:n=>n.getAttr("environmentRotation"),setter:(n,r)=>n.setAttr("environmentRotation",r)},{label:"开启雾效",key:"fogEnable",type:ae.BOOLEAN,group:D.FOG.key,groupName:D.FOG.name,getter:n=>n.getAttr("fogEnable"),setter:(n,r)=>n.setAttr("fogEnable",r)},{label:"雾气颜色",key:"fogColor",type:ae.COLOR,disableAlpha:!0,group:D.FOG.key,groupName:D.FOG.name,getter:n=>n.getAttr("fogColor"),setter:(n,r)=>n.setAttr("fogColor",r)},{label:"雾气近端",key:"fogNear",type:ae.NUMBER,group:D.FOG.key,groupName:D.FOG.name,min:0,precision:1,getter:n=>n.getAttr("fogNear"),setter:(n,r)=>n.setAttr("fogNear",r)},{label:"雾气远端",key:"fogFar",type:ae.NUMBER,group:D.FOG.key,groupName:D.FOG.name,min:0,precision:1,getter:n=>n.getAttr("fogFar"),setter:(n,r)=>n.setAttr("fogFar",r)},{label:"开启网格",key:"gridEnable",type:ae.BOOLEAN,group:D.GRID.key,groupName:D.GRID.name,getter:n=>n.getAttr("gridEnable"),setter:(n,r)=>n.setAttr("gridEnable",r)},{label:"网格尺寸",key:"gridSize",type:ae.ENUM,options:[{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:1e3,label:"1000"}],group:D.GRID.key,groupName:D.GRID.name,getter:n=>n.getAttr("gridSize"),setter:(n,r)=>n.setAttr("gridSize",r)},{label:"网格颜色1",key:"gridColor1",type:ae.COLOR,disableAlpha:!0,group:D.GRID.key,groupName:D.GRID.name,getter:n=>n.getAttr("gridColor1"),setter:(n,r)=>n.setAttr("gridColor1",r)},{label:"网格颜色2",key:"gridColor2",type:ae.COLOR,disableAlpha:!0,group:D.GRID.key,groupName:D.GRID.name,getter:n=>n.getAttr("gridColor2"),setter:(n,r)=>n.setAttr("gridColor2",r)}]}}class my{constructor(t){E(this,"editor");E(this,"attributes");E(this,"activeGroups");E(this,"getGroups",t=>{const n=[];for(const r of t.components)switch(r.type){case st.SimpleScript:n.push({editor:this.editor,type:zn.Component,group:`component-${r.id}`,groupName:Jt[st.SimpleScript],attributes:this.getScriptComponentAttrs(r),meta:{component:r}});break;case st.OrbitControls:n.push({editor:this.editor,type:zn.Component,group:`component-${r.id}`,groupName:Jt[st.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(r),meta:{component:r}});break;case st.PointerLockControls:n.push({editor:this.editor,type:zn.Component,group:`component-${r.id}`,groupName:Jt[st.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(r),meta:{component:r}});break}return n});this.editor=t,this.activeGroups=[D.BASE.key];const{attributes:n}=new py(this.editor);this.attributes=this.createAttributes(n)}createAttributes(t){return t.map(n=>new Fn(this.editor,n,[]))}getAttributes(){return this.attributes}getScriptComponentAttrs(t){const n=[];return n.push({label:"组件名称",key:"component-name",type:ae.STRING,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,o)=>t.setAttr("name",o)},{label:"启用",key:"enabled",type:ae.BOOLEAN,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,o)=>t.setAttr("_enabled",o)},{label:"脚本",key:"component-script",type:ae.SCRIPT,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("script"),setter:(r,o)=>t.setAttr("script",o)}),n.map(r=>new Fn(this.editor,r,[]))}getOrbitControlsComponentAttrs(t){const n=[];return n.push({label:"组件名称",key:"component-name",type:ae.STRING,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,o)=>t.setAttr("name",o)},{label:"启用",key:"enabled",type:ae.BOOLEAN,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,o)=>t.setAttr("_enabled",o)},{label:"焦点距离",key:"distance",type:ae.NUMBER,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("distance"),setter:(r,o)=>t.setAttr("distance",o)}),n.map(r=>new Fn(this.editor,r,[]))}getPointerLockControlsComponentAttrs(t){const n=[];return n.push({label:"组件名称",key:"component-name",type:ae.STRING,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,o)=>t.setAttr("name",o)},{label:"启用",key:"enabled",type:ae.BOOLEAN,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,o)=>t.setAttr("_enabled",o)},{label:"移动速度",key:"moveSpeed",type:ae.NUMBER,group:D.COMPONENTS.key,groupName:D.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("moveSpeed"),setter:(r,o)=>t.setAttr("moveSpeed",o)}),n.map(r=>new Fn(this.editor,r,[]))}}const vy=[{key:"copy",label:"拷贝",action:e=>{e.copyManager.copy()},visible:e=>e.selectionManager.getSelection().length>0},{key:"cut",label:"剪切",action:e=>{e.copyManager.cut()},visible:e=>e.selectionManager.getSelection().length>0},{key:"paste",label:"粘贴",action:e=>{e.copyManager.paste(!0)},visible:e=>e.copyManager.canPaste()},{key:"delete",label:"删除",action:e=>{const t=e.selectionManager.getSelection();e.historyManager.beginTransaction(),e.core.select([]),t.forEach(n=>e.core.removeEntity(n)),e.historyManager.endTransaction()},visible:e=>e.selectionManager.getSelection().length>0},{key:"component",label:"组件",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:Jt[st.SimpleScript],action:e=>{const t=lr(st.SimpleScript),n=[...e.selectionManager.getSelection()];n.length===0&&n.push(e.selectionManager.getView()),e.historyManager.beginTransaction(),n.forEach(r=>{const{entityManager:o}=e.core,a=o.createComponent(t,r);e.core.addComponent(a,r)}),e.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:Jt[st.OrbitControls],action:e=>{const t=lr(st.OrbitControls),n=e.selectionManager.getSelection();e.historyManager.beginTransaction(),n.forEach(r=>{const{entityManager:o}=e.core,a=o.createComponent(t,r);e.core.addComponent(a,r)}),e.historyManager.endTransaction()},visible:e=>{const t=e.selectionManager.getSelection(),n=t.filter(r=>r instanceof Or);return n.length>0&&n.length===t.length}},{key:"compoent_pointer_lock_controls",label:Jt[st.PointerLockControls],action:e=>{const t=lr(st.PointerLockControls),n=e.selectionManager.getSelection();e.historyManager.beginTransaction(),n.forEach(r=>{const{entityManager:o}=e.core,a=o.createComponent(t,r);e.core.addComponent(a,r)}),e.historyManager.endTransaction()},visible:e=>{const t=e.selectionManager.getSelection(),n=t.filter(r=>r instanceof Or);return n.length>0&&n.length===t.length}}]}],yy=[{key:"copy",label:"拷贝",action:e=>{e.copyManager.copy()},visible:e=>e.selectionManager.getSelection().length>0},{key:"cut",label:"剪切",action:e=>{e.copyManager.cut()},visible:e=>e.selectionManager.getSelection().length>0},{key:"paste",label:"粘贴",action:e=>{e.copyManager.paste()},visible:e=>e.copyManager.canPaste()},{key:"delete",label:"删除",action:e=>{const t=e.selectionManager.getSelection();e.historyManager.beginTransaction(),e.core.select([]),t.forEach(n=>e.core.removeEntity(n)),e.historyManager.endTransaction()},visible:e=>e.selectionManager.getSelection().length>0},{key:"component",label:"组件",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:"脚本",action:e=>{const t=lr(st.SimpleScript),n=[...e.selectionManager.getSelection()];n.length===0&&n.push(e.selectionManager.getView()),e.historyManager.beginTransaction(),n.forEach(r=>{const{entityManager:o}=e.core,a=o.createComponent(t,r);e.core.addComponent(a,r)}),e.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:"轨道控制",action:e=>{const t=lr(st.OrbitControls),n=e.selectionManager.getSelection();e.historyManager.beginTransaction(),n.forEach(r=>{const{entityManager:o}=e.core,a=o.createComponent(t,r);e.core.addComponent(a,r)}),e.historyManager.endTransaction()},visible:e=>{const t=e.selectionManager.getSelection(),n=t.filter(r=>r instanceof Or);return n.length>0&&n.length===t.length}},{key:"compoent_pointer_lock_controls",label:Jt[st.PointerLockControls],action:e=>{const t=lr(st.PointerLockControls),n=e.selectionManager.getSelection();e.historyManager.beginTransaction(),n.forEach(r=>{const{entityManager:o}=e.core,a=o.createComponent(t,r);e.core.addComponent(a,r)}),e.historyManager.endTransaction()},visible:e=>{const t=e.selectionManager.getSelection(),n=t.filter(r=>r instanceof Or);return n.length>0&&n.length===t.length}}]}],by=[{key:"DELETE",label:"删除",action:e=>{var r;const n=(r=e.contextMenuManager.meta.group.meta)==null?void 0:r.component;n&&e.core.removeComponent(n)},visible:()=>!0}];class Sy{constructor(){E(this,"core");E(this,"historyManager");E(this,"hotkeyManager");E(this,"attrManager");E(this,"contextMenuManager");E(this,"nodeManager");E(this,"selectionManager");E(this,"toolManager");E(this,"dropManager");E(this,"copyManager");E(this,"dataManager");E(this,"componentManager");E(this,"bus");E(this,"dirty");this.core=new il({}),this.bus=pd(),this.dirty=!1,this.core.use(new jn(this.core)),this.core.use(new Ba(this.core)),this.core.use(new md(this.core)),this.core.use(new vd(this.core)),this.core.use(new t0(this.core)),this.core.use(new Dr(this.core)),this.core.use(new al(this.core)),this.core.use(new wc(this.core)),this.core.use(new Ec(this.core)),this.core.use(new Mc(this.core)),this.core.use(new po(this.core)),this.core.use(new Bn(this.core)),this.core.use(new Ha(this.core)),this.core.use(new r0(this.core));const t=new gy(this),n=new my(this);this.hotkeyManager=new v0(this,ly),this.attrManager=new m0(this,t,n),this.contextMenuManager=new sy(this),this.historyManager=new ay(this),this.nodeManager=new y0(this),this.selectionManager=new W0(this),this.toolManager=new F0(this),this.dropManager=new G0(this),this.copyManager=new U0(this),this.dataManager=new ry(this),this.componentManager=new iy(this)}initContextMenus(){const{GRAPH:t,HIERARCHY:n,ATTR_COMPONENT:r}=_o;this.contextMenuManager.addContextMenu(t,vy),this.contextMenuManager.addContextMenu(n,yy),this.contextMenuManager.addContextMenu(r,by)}initListeners(){this.core.bus.on("ENTITY_ADDED",()=>{this.bus.emit("NODE_ADD",this)}),this.core.bus.on("ENTITY_REMOVED",()=>{this.bus.emit("NODE_REMOVE",this)}),this.core.bus.on("ENTITY_MOVED",()=>{this.attrManager.update(),this.bus.emit("NODE_MOVE",this)}),this.core.bus.on("ENTITY_SELECTED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("ENTITY_CHANGED",()=>{this.attrManager.update(),this.bus.emit("ATTR_CHANGE",this)}),this.core.bus.on("COMPONENT_ADDED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_REMOVED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_CHANGED",()=>{this.attrManager.update(),this.bus.emit("ATTR_CHANGE",this)}),this.core.bus.on("HISTORY_CHANGE",()=>{this.dirty=!0,this.bus.emit("TAB_DIRTY",this)}),this.core.bus.on("DESERIALIZE",()=>{this.bus.emit("DESERIALIZATED",this)})}async mount(t){this.core.mount(t),this.toolManager.mount(),this.initContextMenus(),this.initListeners(),this.bus.emit("TAB_MOUNT",this)}resize(){this.core.resize()}active(){this.hotkeyManager.active(),this.core.active(),this.resize()}deactive(){this.hotkeyManager.deactive(),this.core.deactive()}unmount(){this.attrManager.dispose(),this.hotkeyManager.dispose(),this.historyManager.dispose(),this.toolManager.dispose(),this.contextMenuManager.dispose(),this.core.unmount()}async open(t){const n=await Td(t);n&&this.core.deserialize(n.content)}async save(){const n=await this.core.getPlugin(jn).toImage(),r=this.core.entityManager.root.code,o=this.core.serialize(),a=await _d(r,n,o);this.historyManager.pause(),this.core.entityManager.root.setAttr("date",a==null?void 0:a.document.date),this.historyManager.resume(),this.bus.emit("MESSAGE",{message:"保存成功",type:"success"})}preview(){const t=this.core.entityManager.root.code;window.open(`/preview?id=${t}`,`/preview?id=${t}`)}async reload(){this.historyManager.pause(),this.core.clear(),this.dirty=!1,this.open(this.core.entityManager.root.code),this.historyManager.dispose(),this.historyManager.resume(),this.bus.emit("TAB_DIRTY",this)}}const Cy=(e,t)=>{const[n,r]=l.useState(e.item);return l.useEffect(()=>{e.item&&(e.item.listen(t),t(e.item.getter()))},[]),e.update=o=>{n==null||n.unlisten(t),r(o),o&&(o.listen(t),t(o.getter()))},e.destroy=()=>{n==null||n.unlisten(t)},n},xy=e=>{const{attribute:t,value:n,onChange:r}=e,[o,a]=l.useState(""),[s,i]=l.useState(!1);l.useEffect(()=>{a(n)},[n]);const c=d=>{a(d.target.value),i(!0)},u=()=>{s&&(r(o),i(!1))};return U.jsx(Fa,{style:{borderRadius:"4px"},disabled:t==null?void 0:t.disabled,value:o,onChange:c,onPressEnter:u,onBlur:u})},Mr=e=>{const{style:t,attribute:n,value:r,onChange:o}=e,[a,s]=l.useState(0),[i,c]=l.useState(!1);l.useEffect(()=>{s(r)},[r]);const u=p=>{s(p||0),c(!0)},d=()=>{i&&(o(a),c(!1))},h=p=>{s(p||0),o(p)};return U.jsx(ti,{style:{borderRadius:"4px",...t},disabled:n==null?void 0:n.disabled,min:n==null?void 0:n.min,max:n==null?void 0:n.max,precision:n==null?void 0:n.precision,step:n==null?void 0:n.step,value:a,onChange:u,onPressEnter:d,onBlur:d,onStep:h})},wy=e=>{const{attribute:t,value:n,onChange:r}=e,o=a=>{r(a.target.checked)};return U.jsx(Qa,{disabled:t==null?void 0:t.disabled,checked:n,onChange:o})},Ey=e=>{const{attribute:t,value:n,onChange:r}=e,[o,a]=l.useState(n);l.useEffect(()=>{a(n)},[n]);const s=i=>{r(i.toHexString())};return U.jsx(ri,{style:{borderRadius:"4px"},disabled:t==null?void 0:t.disabled,disabledAlpha:t==null?void 0:t.disableAlpha,showText:!0,value:o,onChange:a,onChangeComplete:s})},My=e=>{const{attribute:t,value:n,onChange:r}=e,[o,a]=l.useState("");l.useEffect(()=>{a(n)},[n]);const s=i=>{r(i)};return U.jsx(gr,{style:{width:"100%",borderRadius:"4px"},disabled:t==null?void 0:t.disabled,options:t==null?void 0:t.options,value:o,onChange:s})},Ny=e=>{const{attribute:t,value:n,onChange:r}=e,[o,a]=l.useState(0),[s,i]=l.useState(0);l.useEffect(()=>{const[d,h]=n||[];a(d),i(h)},[n]);const c=d=>{r([d,s,"x"])},u=d=>{r([o,d,"y"])};return U.jsxs(Wa,{gutter:4,children:[U.jsx(ar,{span:8,children:U.jsx(Mr,{style:{width:"unset"},attribute:t,value:o,onChange:c})}),U.jsx(ar,{span:8,children:U.jsx(Mr,{style:{width:"unset"},attribute:t,value:s,onChange:u})})]})},Oy=e=>{const{attribute:t,value:n,onChange:r}=e,[o,a]=l.useState(0),[s,i]=l.useState(0),[c,u]=l.useState(0);l.useEffect(()=>{const[f,v,y]=n||[];a(f),i(v),u(y)},[n]);const d=f=>{r([f,s,c,"x"])},h=f=>{r([o,f,c,"y"])},p=f=>{r([o,s,f,"z"])};return U.jsxs(Wa,{gutter:4,children:[U.jsx(ar,{span:8,children:U.jsx(Mr,{style:{width:"unset"},attribute:t,value:o,onChange:d})}),U.jsx(ar,{span:8,children:U.jsx(Mr,{style:{width:"unset"},attribute:t,value:s,onChange:h})}),U.jsx(ar,{span:8,children:U.jsx(Mr,{style:{width:"unset"},attribute:t,value:c,onChange:p})})]})};function $y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_s(Object(n),!0).forEach(function(r){$y(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Iy(e,t){if(e==null)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],!(t.indexOf(o)>=0)&&(n[o]=e[o]);return n}function Ay(e,t){if(e==null)return{};var n=Iy(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Py(e,t){return Ry(e)||Dy(e,t)||Ty(e,t)||_y()}function Ry(e){if(Array.isArray(e))return e}function Dy(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,o=!1,a=void 0;try{for(var s=e[Symbol.iterator](),i;!(r=(i=s.next()).done)&&(n.push(i.value),!(t&&n.length===t));r=!0);}catch(c){o=!0,a=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(o)throw a}}return n}}function Ty(e,t){if(e){if(typeof e=="string")return Ls(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ls(e,t)}}function Ls(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _y(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ky(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zs(Object(n),!0).forEach(function(r){ky(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zs(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ly(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(o,a){return a(o)},r)}}function Lr(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return t.apply(n,[].concat(o,i))}}}function No(e){return{}.toString.call(e).includes("Object")}function zy(e){return!Object.keys(e).length}function Kr(e){return typeof e=="function"}function jy(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function By(e,t){return No(t)||Wn("changeType"),Object.keys(t).some(function(n){return!jy(e,n)})&&Wn("changeField"),t}function Hy(e){Kr(e)||Wn("selectorType")}function Vy(e){Kr(e)||No(e)||Wn("handlerType"),No(e)&&Object.values(e).some(function(t){return!Kr(t)})&&Wn("handlersType")}function Ky(e){e||Wn("initialIsRequired"),No(e)||Wn("initialType"),zy(e)&&Wn("initialContent")}function Fy(e,t){throw new Error(e[t]||e.default)}var Wy={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Wn=Lr(Fy)(Wy),uo={changes:By,selector:Hy,handler:Vy,initial:Ky};function Gy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};uo.initial(e),uo.handler(t);var n={current:e},r=Lr(Xy)(n,t),o=Lr(qy)(n),a=Lr(uo.changes)(e),s=Lr(Uy)(n);function i(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return uo.selector(u),u(n.current)}function c(u){Ly(r,o,a,s)(u)}return[i,c]}function Uy(e,t){return Kr(t)?t(e.current):t}function qy(e,t){return e.current=js(js({},e.current),t),t}function Xy(e,t,n){return Kr(t)?t(e.current):Object.keys(n).forEach(function(r){var o;return(o=t[r])===null||o===void 0?void 0:o.call(t,e.current[r])}),n}var Yy={create:Gy},Zy={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function Qy(e){return function t(){for(var n=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return o.length>=e.length?e.apply(this,o):function(){for(var s=arguments.length,i=new Array(s),c=0;c<s;c++)i[c]=arguments[c];return t.apply(n,[].concat(o,i))}}}function Jy(e){return{}.toString.call(e).includes("Object")}function eb(e){return e||Bs("configIsRequired"),Jy(e)||Bs("configType"),e.urls?(tb(),{paths:{vs:e.urls.monacoBase}}):e}function tb(){console.warn(Nc.deprecation)}function nb(e,t){throw new Error(e[t]||e.default)}var Nc={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Bs=Qy(nb)(Nc),rb={config:eb},ob=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(o){return n.reduceRight(function(a,s){return s(a)},o)}};function Oc(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],Oc(e[n],t[n]))}),ks(ks({},e),t)}var ab={type:"cancelation",msg:"operation is manually canceled"};function sa(e){var t=!1,n=new Promise(function(r,o){e.then(function(a){return t?o(ab):r(a)}),e.catch(o)});return n.cancel=function(){return t=!0},n}var ib=Yy.create({config:Zy,isInitialized:!1,resolve:null,reject:null,monaco:null}),$c=Py(ib,2),Yr=$c[0],ko=$c[1];function sb(e){var t=rb.config(e),n=t.monaco,r=Ay(t,["monaco"]);ko(function(o){return{config:Oc(o.config,r),monaco:n}})}function lb(){var e=Yr(function(t){var n=t.monaco,r=t.isInitialized,o=t.resolve;return{monaco:n,isInitialized:r,resolve:o}});if(!e.isInitialized){if(ko({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),sa(la);if(window.monaco&&window.monaco.editor)return Ic(window.monaco),e.resolve(window.monaco),sa(la);ob(cb,db)(hb)}return sa(la)}function cb(e){return document.body.appendChild(e)}function ub(e){var t=document.createElement("script");return e&&(t.src=e),t}function db(e){var t=Yr(function(r){var o=r.config,a=r.reject;return{config:o,reject:a}}),n=ub("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function hb(){var e=Yr(function(n){var r=n.config,o=n.resolve,a=n.reject;return{config:r,resolve:o,reject:a}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){Ic(n),e.resolve(n)},function(n){e.reject(n)})}function Ic(e){Yr().monaco||ko({monaco:e})}function fb(){return Yr(function(e){var t=e.monaco;return t})}var la=new Promise(function(e,t){return ko({resolve:e,reject:t})}),Ac={config:sb,init:lb,__getMonacoInstance:fb},gb={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},ca=gb,pb={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},mb=pb;function vb({children:e}){return F.createElement("div",{style:mb.container},e)}var yb=vb,bb=yb;function Sb({width:e,height:t,isEditorReady:n,loading:r,_ref:o,className:a,wrapperProps:s}){return F.createElement("section",{style:{...ca.wrapper,width:e,height:t},...s},!n&&F.createElement(bb,null,r),F.createElement("div",{ref:o,style:{...ca.fullWidth,...!n&&ca.hide},className:a}))}var Cb=Sb,Pc=l.memo(Cb);function xb(e){l.useEffect(e,[])}var Rc=xb;function wb(e,t,n=!0){let r=l.useRef(!0);l.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var bn=wb;function Br(){}function xr(e,t,n,r){return Eb(e,r)||Mb(e,t,n,r)}function Eb(e,t){return e.editor.getModel(Dc(e,t))}function Mb(e,t,n,r){return e.editor.createModel(t,n,r?Dc(e,r):void 0)}function Dc(e,t){return e.Uri.parse(t)}function Nb({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:o,originalModelPath:a,modifiedModelPath:s,keepCurrentOriginalModel:i=!1,keepCurrentModifiedModel:c=!1,theme:u="light",loading:d="Loading...",options:h={},height:p="100%",width:f="100%",className:v,wrapperProps:y={},beforeMount:g=Br,onMount:m=Br}){let[b,S]=l.useState(!1),[C,N]=l.useState(!0),O=l.useRef(null),x=l.useRef(null),$=l.useRef(null),w=l.useRef(m),R=l.useRef(g),T=l.useRef(!1);Rc(()=>{let I=Ac.init();return I.then(k=>(x.current=k)&&N(!1)).catch(k=>(k==null?void 0:k.type)!=="cancelation"&&console.error("Monaco initialization: error:",k)),()=>O.current?A():I.cancel()}),bn(()=>{if(O.current&&x.current){let I=O.current.getOriginalEditor(),k=xr(x.current,e||"",r||n||"text",a||"");k!==I.getModel()&&I.setModel(k)}},[a],b),bn(()=>{if(O.current&&x.current){let I=O.current.getModifiedEditor(),k=xr(x.current,t||"",o||n||"text",s||"");k!==I.getModel()&&I.setModel(k)}},[s],b),bn(()=>{let I=O.current.getModifiedEditor();I.getOption(x.current.editor.EditorOption.readOnly)?I.setValue(t||""):t!==I.getValue()&&(I.executeEdits("",[{range:I.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),I.pushUndoStop())},[t],b),bn(()=>{var I,k;(k=(I=O.current)==null?void 0:I.getModel())==null||k.original.setValue(e||"")},[e],b),bn(()=>{let{original:I,modified:k}=O.current.getModel();x.current.editor.setModelLanguage(I,r||n||"text"),x.current.editor.setModelLanguage(k,o||n||"text")},[n,r,o],b),bn(()=>{var I;(I=x.current)==null||I.editor.setTheme(u)},[u],b),bn(()=>{var I;(I=O.current)==null||I.updateOptions(h)},[h],b);let _=l.useCallback(()=>{var L;if(!x.current)return;R.current(x.current);let I=xr(x.current,e||"",r||n||"text",a||""),k=xr(x.current,t||"",o||n||"text",s||"");(L=O.current)==null||L.setModel({original:I,modified:k})},[n,t,o,e,r,a,s]),z=l.useCallback(()=>{var I;!T.current&&$.current&&(O.current=x.current.editor.createDiffEditor($.current,{automaticLayout:!0,...h}),_(),(I=x.current)==null||I.editor.setTheme(u),S(!0),T.current=!0)},[h,u,_]);l.useEffect(()=>{b&&w.current(O.current,x.current)},[b]),l.useEffect(()=>{!C&&!b&&z()},[C,b,z]);function A(){var k,L,B,H;let I=(k=O.current)==null?void 0:k.getModel();i||((L=I==null?void 0:I.original)==null||L.dispose()),c||((B=I==null?void 0:I.modified)==null||B.dispose()),(H=O.current)==null||H.dispose()}return F.createElement(Pc,{width:f,height:p,isEditorReady:b,loading:d,_ref:$,className:v,wrapperProps:y})}var Ob=Nb;l.memo(Ob);function $b(e){let t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}var Ib=$b,ho=new Map;function Ab({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:o,path:a,theme:s="light",line:i,loading:c="Loading...",options:u={},overrideServices:d={},saveViewState:h=!0,keepCurrentModel:p=!1,width:f="100%",height:v="100%",className:y,wrapperProps:g={},beforeMount:m=Br,onMount:b=Br,onChange:S,onValidate:C=Br}){let[N,O]=l.useState(!1),[x,$]=l.useState(!0),w=l.useRef(null),R=l.useRef(null),T=l.useRef(null),_=l.useRef(b),z=l.useRef(m),A=l.useRef(),I=l.useRef(r),k=Ib(a),L=l.useRef(!1),B=l.useRef(!1);Rc(()=>{let j=Ac.init();return j.then(Y=>(w.current=Y)&&$(!1)).catch(Y=>(Y==null?void 0:Y.type)!=="cancelation"&&console.error("Monaco initialization: error:",Y)),()=>R.current?q():j.cancel()}),bn(()=>{var Y,Z,J,te;let j=xr(w.current,e||r||"",t||o||"",a||n||"");j!==((Y=R.current)==null?void 0:Y.getModel())&&(h&&ho.set(k,(Z=R.current)==null?void 0:Z.saveViewState()),(J=R.current)==null||J.setModel(j),h&&((te=R.current)==null||te.restoreViewState(ho.get(a))))},[a],N),bn(()=>{var j;(j=R.current)==null||j.updateOptions(u)},[u],N),bn(()=>{!R.current||r===void 0||(R.current.getOption(w.current.editor.EditorOption.readOnly)?R.current.setValue(r):r!==R.current.getValue()&&(B.current=!0,R.current.executeEdits("",[{range:R.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),R.current.pushUndoStop(),B.current=!1))},[r],N),bn(()=>{var Y,Z;let j=(Y=R.current)==null?void 0:Y.getModel();j&&o&&((Z=w.current)==null||Z.editor.setModelLanguage(j,o))},[o],N),bn(()=>{var j;i!==void 0&&((j=R.current)==null||j.revealLine(i))},[i],N),bn(()=>{var j;(j=w.current)==null||j.editor.setTheme(s)},[s],N);let H=l.useCallback(()=>{var j;if(!(!T.current||!w.current)&&!L.current){z.current(w.current);let Y=a||n,Z=xr(w.current,r||e||"",t||o||"",Y||"");R.current=(j=w.current)==null?void 0:j.editor.create(T.current,{model:Z,automaticLayout:!0,...u},d),h&&R.current.restoreViewState(ho.get(Y)),w.current.editor.setTheme(s),i!==void 0&&R.current.revealLine(i),O(!0),L.current=!0}},[e,t,n,r,o,a,u,d,h,s,i]);l.useEffect(()=>{N&&_.current(R.current,w.current)},[N]),l.useEffect(()=>{!x&&!N&&H()},[x,N,H]),I.current=r,l.useEffect(()=>{var j,Y;N&&S&&((j=A.current)==null||j.dispose(),A.current=(Y=R.current)==null?void 0:Y.onDidChangeModelContent(Z=>{B.current||S(R.current.getValue(),Z)}))},[N,S]),l.useEffect(()=>{if(N){let j=w.current.editor.onDidChangeMarkers(Y=>{var J;let Z=(J=R.current.getModel())==null?void 0:J.uri;if(Z&&Y.find(te=>te.path===Z.path)){let te=w.current.editor.getModelMarkers({resource:Z});C==null||C(te)}});return()=>{j==null||j.dispose()}}return()=>{}},[N,C]);function q(){var j,Y;(j=A.current)==null||j.dispose(),p?h&&ho.set(a,R.current.saveViewState()):(Y=R.current.getModel())==null||Y.dispose(),R.current.dispose()}return F.createElement(Pc,{width:f,height:v,isEditorReady:N,loading:c,_ref:T,className:y,wrapperProps:g})}var Pb=Ab,Rb=l.memo(Pb),Db=Rb;const Tb=e=>{const{value:t,onChange:n}=e,[r,o]=l.useState(""),[a,s]=l.useState(!1);l.useEffect(()=>{o(t)},[t]);const i=()=>{o(t),s(!0)},c=()=>{n(r),s(!1)},u=()=>{s(!1)},d=h=>{o(h??"")};return U.jsxs(U.Fragment,{children:[U.jsx(wu,{onClick:i,children:"编辑"}),U.jsx(ll,{width:800,title:"脚本",open:a,onOk:c,onCancel:u,children:U.jsx(Db,{theme:"vs-dark",height:"60vh",defaultLanguage:"javascript",value:r,onChange:d})})]})},_b=e=>{const{attribute:t,value:n,onChange:r}=e;return U.jsx(Oa,{allowClear:!0,type:t==null?void 0:t.assetType,value:n,onChange:r})},kb=e=>{const{root:t}=e,[n,r]=l.useState(),o=Cy(t,r),a=l.useMemo(()=>(o==null?void 0:o.attribute.type)??"string",[o]),s=i=>o==null?void 0:o.setter(i);switch(a){case ae.STRING:return U.jsx(xy,{attribute:o,value:n,onChange:s});case ae.NUMBER:return U.jsx(Mr,{attribute:o,value:n,onChange:s});case ae.BOOLEAN:return U.jsx(wy,{attribute:o,value:n,onChange:s});case ae.COLOR:return U.jsx(Ey,{attribute:o,value:n,onChange:s});case ae.ENUM:return U.jsx(My,{attribute:o,value:n,onChange:s});case ae.VECTOR2:return U.jsx(Ny,{attribute:o,value:n,onChange:s});case ae.VECTOR3:return U.jsx(Oy,{attribute:o,value:n,onChange:s});case ae.SCRIPT:return U.jsx(Tb,{attribute:o,value:n,onChange:s});case ae.ASSET:return U.jsx(_b,{attribute:o,value:n,onChange:s});default:return null}};class Lb{constructor(t){E(this,"parent");E(this,"container");E(this,"root");E(this,"item");E(this,"update");E(this,"destroy");this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item-value",this.root=Eu(this.container),this.root.render(U.jsx(Mu,{children:U.jsx(kb,{root:this})})),this.parent.body.appendChild(this.container)}hide(){var t;(t=this.destroy)==null||t.call(this),this.container.style.display="none"}show(t){var n;this.item=t,(n=this.update)==null||n.call(this,t),this.container.className="attribute-item-value",this.container.style.display="flex"}dispose(){var t;(t=this.destroy)==null||t.call(this),setTimeout(()=>this.root.unmount(),0),this.container.remove()}}class zb{constructor(t){E(this,"parent");E(this,"container");E(this,"label");E(this,"body");E(this,"components");this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item",this.label=new f0(this),this.body=document.createElement("div"),this.body.className="attribute-item-value-container",this.container.appendChild(this.label.container),this.container.appendChild(this.body),this.components={}}get visible(){return this.container.style.display==="flex"}hide(){this.label.hide(),Object.values(this.components).forEach(t=>t.hide()),this.container.style.display="none"}show(t){const{attribute:n,visible:r}=t,{type:o}=n;this.label.show(t),Object.values(this.components).forEach(s=>s.hide());const a=this.getAttribute(o);a==null||a.show(t),this.container.style.display=r?"flex":"none"}dispose(){this.label.dispose(),Object.values(this.components).forEach(t=>t.dispose()),this.container.remove()}getAttribute(t){let n=this.components[t];if(!n)try{n=new Lb(this),this.components[t]=n}catch(r){console.error(r)}return n}}var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});function ln(e){return typeof e=="function"?e():e}function Lo(e){return _c(e)||kc(e)||Zr(e)}function _c(e){return e.hasOwnProperty("action")}function kc(e){return e.hasOwnProperty("href")}function Ia(e){return e.hasOwnProperty("isDivider")}function Zr(e){return e.hasOwnProperty("subMenu")}function jb(e){return e.hasOwnProperty("html")||e.hasOwnProperty("element")}function Bb(e){return!Lo(e)&&!Ia(e)&&!jb(e)}function zo(e){return Lo(e)&&ln(e.disabled)||Zr(e)&&ln(e.subMenu).length===0}function Hs(e,t){var n;e.addEventListener("mouseenter",function(r){n=setTimeout(function(){return t(r)},150)}),e.addEventListener("mouseleave",function(){return clearTimeout(n)})}function Hb(e){var t=document.createElement("ul");return t.className="ctxmenu",t.append.apply(t,e.map(Vb)),e.length||(t.style.display="none"),t.addEventListener("contextmenu",function(n){n.stopPropagation(),n.preventDefault()}),t.addEventListener("click",function(n){return void n.stopPropagation()}),t}function Vb(e){var t=document.createElement("li");return Kb([[Ia,"divider",!1],[function(n){return n.icon},"icon",!0],[Bb,"heading",!1],[Zr,"submenu",!0],[zo,"disabled",!1],[Lo,"interactive",!0]],e,t),Ia(e)||[Fb,Wb,Gb,Ub,qb].forEach(function(n){return n.call(null,e,t)}),t}function Kb(e,t,n){e.filter(function(r){var o=r[0];return o(t)}).every(function(r){r[0];var o=r[1],a=r[2];return!void n.classList.add(o)&&a})}function Fb(e,t){var n,r=e.html,o=e.text,a=e.element,s=ln(a);s?t.append(s):t.innerHTML=(n=ln(r))!==null&&n!==void 0?n:"<span>".concat(ln(o),"</span>")}function Wb(e,t){var n=e.tooltip,r=e.style,o=e.attributes;t.title=ln(n)||"",r&&t.setAttribute("style",ln(r)),o&&Object.entries(ln(o)).forEach(function(a){var s=a[0],i=a[1];t.setAttribute(s,i)})}function Gb(e,t){var n=e.icon;n&&(t.innerHTML+='<img class="icon" src="'.concat(ln(n),'" />'))}function Ub(e,t){for(var n=0,r=Object.entries(ln(e.events)||{});n<r.length;n++){var o=r[n],a=o[0],s=o[1],i=typeof s=="function"?{listener:s,options:{}}:s,c=i.listener,u=i.options;t.addEventListener(a,c,u)}zo(e)||Zr(e)||(_c(e)&&t.addEventListener("click",e.action),Lo(e)&&t.addEventListener("click",function(){return zc.hide()}))}function qb(e,t){if(!(!kc(e)||zo(e))){var n=e.href,r=e.download,o=e.target,a=document.createElement("a");a.innerHTML=t.innerHTML,a.href=ln(n),r!==void 0&&(a.download=ln(r)),o&&(a.target=ln(o)),t.replaceChildren(a)}}var wr="r",Hr="d";function Xb(){wr="r",Hr="d"}function Yb(e,t){var n=Lc(),r=window.visualViewport,o=r.width,a=r.height;Object.assign(e.style,{maxHeight:a/n.y+"px",maxWidth:o/n.x+"px"});var s=Zb(e);s.width=Math.trunc(s.width)+1,s.height=Math.trunc(s.height)+1;var i={x:0,y:0};if(t instanceof Element){var c=fi(t),u=c.x,d=c.width,h=c.y;i={x:wr==="r"?u+d:u-s.width,y:h},t.className.includes("submenu")&&(i.y+=Hr==="d"?4:-12);var p=ua(s,i);i.x!==p.x&&(wr=wr==="r"?"l":"r",i.x=wr==="r"?u+d:u-s.width),i.y!==p.y&&(Hr=Hr==="u"?"d":"u",i.y=p.y),i=ua(s,i)}else{var f=document.body.style.transform!=="",v=f?document.body.getBoundingClientRect():{x:0,y:0};i=ua(s,{x:(t.clientX-v.x)/n.x,y:(t.clientY-v.y)/n.y})}Object.assign(e.style,{left:i.x+"px",top:i.y+"px",width:s.width+"px",height:s.height+"px"})}function ua(e,t){var n=window.visualViewport,r=n.width,o=n.height,a=document.body.style.transform!=="",s=a?document.body.getBoundingClientRect():{left:0,top:0},i=s.left,c=s.top,u=Lc(),d=-i/u.x,h=-c/u.y,p=(r-i)/u.x,f=(o-c)/u.y;return{x:wr==="r"?t.x+e.width>p?p-e.width:t.x:t.x<d?d:t.x,y:Hr==="d"?t.y+e.height>f?f-e.height:t.y:t.y<h?h:t.y+e.height>f?f-e.height:t.y}}function Zb(e){var t=e.cloneNode(!0);t.style.visibility="hidden",document.body.appendChild(t);var n=fi(t);return document.body.removeChild(t),n}function fi(e){var t=e.offsetLeft,n=e.offsetTop,r=e.offsetHeight,o=e.offsetWidth;if(e.offsetParent instanceof HTMLElement){var a=fi(e.offsetParent);return{x:t+a.x,y:n+a.y,width:o,height:r}}return{x:t,y:n,width:o,height:r}}function Lc(){var e=document.body,t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth,y:t.height/e.offsetHeight}}var Qb='html{min-height:100%}.ctxmenu{position:fixed;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana,sans-serif;box-sizing:border-box}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,.1)}.ctxmenu li.submenu::after{content:"";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border:solid #000;border-width:1px 1px 0 0;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}';/*! ctxMenu v2.0.2 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/var Jb=function(){function e(){var t=this;this.cache={},this.preventCloseOnScroll=!1,window.addEventListener("click",function(){return void t.hide()}),window.addEventListener("resize",function(){return void t.hide()});var n=0;window.addEventListener("wheel",function(){clearTimeout(n),n=setTimeout(function(){if(t.preventCloseOnScroll){t.preventCloseOnScroll=!1;return}t.hide()})},{passive:!0}),window.addEventListener("keydown",function(r){r.key==="Escape"&&t.hide()}),e.addStylesToDom()}return e.getInstance=function(){e.instance||(e.instance=new e);var t=e.instance;return{attach:t.attach.bind(t),delete:t.delete.bind(t),hide:t.hide.bind(t),show:t.show.bind(t),update:t.update.bind(t)}},e.prototype.attach=function(t,n,r){var o=this;r===void 0&&(r={});var a=document.querySelector(t);if(this.cache[t]!==void 0){console.error("target element ".concat(t," already has a context menu assigned. Use ContextMenu.update() intstead."));return}if(!a){console.error("target element ".concat(t," not found"));return}var s=function(i){o.show(n,i,r)};this.cache[t]={ctxMenu:n,handler:s,config:r},a.addEventListener("contextmenu",s)},e.prototype.update=function(t,n,r){r===void 0&&(r={});var o=this.cache[t],a=Object.assign({},o==null?void 0:o.config,r),s=document.querySelector(t);o&&(s==null||s.removeEventListener("contextmenu",o.handler)),delete this.cache[t],this.attach(t,n||(o==null?void 0:o.ctxMenu)||[],a)},e.prototype.delete=function(t){var n=this.cache[t];if(!n)return console.error("no context menu for target element ".concat(t," found"));delete this.cache[t];var r=document.querySelector(t);if(!r)return console.error("target element ".concat(t," does not exist (anymore)"));r.removeEventListener("contextmenu",n.handler)},e.prototype.show=function(t,n,r){var o=this,a,s,i;r===void 0&&(r={}),n instanceof MouseEvent&&(n.stopImmediatePropagation(),n.preventDefault()),this.hide(),this.onHide=r.onHide,this.onBeforeHide=r.onBeforeHide;var c=(s=(a=r.onBeforeShow)===null||a===void 0?void 0:a.call(r,t.slice(),n instanceof MouseEvent?n:void 0))!==null&&s!==void 0?s:t;this.menu=this.generateDOM(c,n,r.attributes),document.body.appendChild(this.menu),(i=r.onShow)===null||i===void 0||i.call(r,this.menu),this.menu.addEventListener("wheel",function(){o.preventCloseOnScroll=!0},{passive:!0})},e.prototype.hide=function(){this._hide(this.menu)},e.prototype._hide=function(t){var n,r;(n=this.onBeforeHide)===null||n===void 0||n.call(this,t),Xb(),t&&(t.remove(),(r=this.onHide)===null||r===void 0||r.call(this,t),t===this.menu&&(delete this.menu,this.onBeforeHide=void 0,this.onHide=void 0))},e.prototype.generateDOM=function(t,n,r){var o=this;r===void 0&&(r={});var a=Hb(t);return Yb(a,n),t.forEach(function(s,i){var c=a.children[i];Hs(c,function(){var u,d=(u=c.parentElement)===null||u===void 0?void 0:u.querySelector("ul");d&&d.parentElement!==c&&o._hide(d)}),!zo(s)&&Zr(s)&&Hs(c,function(){c.querySelector("ul")||c.appendChild(o.generateDOM(ln(s.subMenu),c,ln(s.subMenuAttributes)))})}),Object.entries(r).forEach(function(s){var i=s[0],c=s[1];return a.setAttribute(i,c)}),a},e.addStylesToDom=function(){if(document.readyState==="loading")return document.addEventListener("readystatechange",this.addStylesToDom,{once:!0});var t=document.createElement("style");t.innerHTML=Qb,document.head.insertBefore(t,document.head.childNodes[0])},e}(),zc=Jb.getInstance(),jc=Tc.ctxmenu=zc;const Bc=e=>{const{items:t,event:n}=e;jc.show(t,n)},eS=()=>{jc.hide()};class tS{constructor(t){E(this,"parent");E(this,"container");E(this,"body");E(this,"attributes");E(this,"label");E(this,"head");E(this,"suffix");E(this,"group");E(this,"onClick",()=>{this.body.style.display==="none"?this.open():this.close()});E(this,"onContextMenu",t=>{var r;if(((r=this.group)==null?void 0:r.type)!==zn.Component)return;t.preventDefault();const n=this.group.editor.contextMenuManager.getContextMenu(_o.ATTR_COMPONENT);n.length!==0&&(this.group.editor.contextMenuManager.meta={group:this.group},Bc({event:t,items:n}))});this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-group-container",this.head=document.createElement("div"),this.head.className="attribute-group",this.head.addEventListener("click",this.onClick),this.label=document.createElement("div"),this.label.className="attribute-group-name",this.label.addEventListener("contextmenu",this.onContextMenu),this.head.appendChild(this.label);const n=document.createElement("div");this.head.appendChild(n),this.suffix=document.createElement("div"),this.suffix.className="attribute-group-close",n.appendChild(this.suffix),this.body=document.createElement("div"),this.container.appendChild(this.head),this.container.appendChild(this.body),this.attributes=[]}hide(){this.attributes.forEach(t=>t.hide()),this.container.style.display="none"}show(t){const{group:n,groupName:r,attributes:o}=t,a=o.filter(s=>s.visible).length;this.group=t,this.label.textContent=r,this.container.style.display=a?"block":"none",this.parent.activeGroups.has(n)?this.open():this.close()}open(){if(this.body.style.display="block",this.suffix.className="attribute-group-close",!this.group)return;const{attributes:t}=this.group,n=t.length-this.attributes.length;for(let r=0;r<n;r++){const o=new zb(this);this.body.appendChild(o.container),this.attributes.push(o)}this.attributes.forEach(r=>r.hide()),t.forEach((r,o)=>this.attributes[o].show(r)),this.parent.addActiveGroup(this.group.group)}close(){this.body.style.display="none",this.suffix.className="attribute-group-close attribute-group-rotate",this.group&&this.parent.removeActiveGroup(this.group.group)}dispose(){this.head.removeEventListener("click",this.onClick),this.label.removeEventListener("contextmenu",this.onContextMenu),this.attributes.forEach(t=>t.dispose()),this.container.remove(),this.attributes=[],delete this.group}}class nS{constructor(t,n){E(this,"editor");E(this,"container");E(this,"groups");E(this,"activeGroups");this.editor=t,this.groups=[],this.activeGroups=new Set(["base"]),this.container=n}update(t){const n=t.length-this.groups.length;for(let r=0;r<n;r++){const o=new tS(this);this.container.appendChild(o.container),this.groups.push(o)}this.groups.forEach(r=>r.hide()),t.forEach((r,o)=>this.groups[o].show(r))}setActiveGroups(t){t.forEach(n=>this.activeGroups.add(n))}addActiveGroup(t){this.activeGroups.add(t)}removeActiveGroup(t){this.activeGroups.delete(t)}dispose(){this.groups.forEach(t=>t.dispose()),this.groups=[]}}const rS=e=>{const{editor:t}=e,n=l.useRef(null);return l.useEffect(()=>{const r=new nS(t,n.current),o=()=>{const a=t.attrManager.refresh();r.update(a)};return t.bus.on("NODE_SELECT",o),t.bus.on("DESERIALIZATED",o),()=>{t.bus.off("NODE_SELECT",o),t.bus.off("DESERIALIZATED",o),r.dispose()}},[t]),U.jsxs("div",{className:aa.container,children:[U.jsxs("div",{className:aa.title,children:[U.jsx("span",{className:"iconfont icon-inspector"}),U.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Inspector"})]}),U.jsx("div",{className:aa.body,ref:n})]})},oS="_container_t8w3l_1",aS="_left_t8w3l_16",iS="_right_t8w3l_20",sS="_tool_t8w3l_24",lS="_active_t8w3l_37",er={container:oS,left:aS,right:iS,tool:sS,active:lS},cS=e=>{const{editor:t}=e,[n,r]=l.useState([]),[o,a]=l.useState([]);l.useEffect(()=>{const i=()=>{const{left:c,right:u}=t.toolManager.tools;r([...c]),a([...u])};return t.bus.on("TOOL_UPDATE",i),i(),()=>{t.bus.off("TOOL_UPDATE",i)}},[t]);const s=i=>{t.toolManager.select(i)};return U.jsxs("div",{className:er.container,children:[U.jsx("div",{className:er.left,children:n.map(i=>U.jsx("span",{className:`iconfont icon-${i.icon} ${er.tool} ${i.actived?er.active:""}`,title:i.title,onClick:()=>s(i)},i.key))}),U.jsx("div",{className:er.right,children:o.map(i=>U.jsx("span",{className:`iconfont icon-${i.icon} ${er.tool} ${i.actived?er.active:""}`,title:i.title,onClick:()=>s(i)},i.key))})]})},uS="_container_1xb2c_1",dS="_title_1xb2c_12",hS="_body_1xb2c_18",da={container:uS,title:dS,body:hS},fS="_container_184ol_1",gS="_selected_184ol_10",pS="_icon_184ol_14",mS="_name_184ol_19",fo={container:fS,selected:gS,icon:pS,name:mS},vS={AmbientLight:"ambient-light",DirectionalLight:"directional-light",PerspectiveCamera:"perspective-camera",OrthographicCamera:"orthographic-camera",Plane:"plane",Box:"box",Sphere:"sphere",Cone:"cone",Cylinder:"cylinder",Pipe:"pipe",HemisphereLight:"hemisphere-light",SpotLight:"spot-light",PointLight:"point-light",Model:"model",Text:"text"},Hc=e=>{const{node:t,editor:n,level:r=0}=e,[o,a]=l.useState(!1),[s,i]=l.useState(!0);l.useEffect(()=>{const u=()=>{a(n.core.selections.some(d=>d.id===t.id))};return n.bus.on("NODE_SELECT",u),()=>{n.bus.off("NODE_SELECT",u)}},[n]);const c=()=>{n.selectionManager.setSelections([t.id])};return U.jsxs(U.Fragment,{children:[U.jsxs("div",{className:`${fo.container} ${o?fo.selected:""}`,style:{paddingLeft:`${r*10+10}px`},onClick:c,children:[s&&t.children.length>0&&U.jsx(kf,{onClick:()=>i(!1)}),!s&&t.children.length>0&&U.jsx(Hp,{onClick:()=>i(!0)}),U.jsx("span",{className:`iconfont icon-${vS[t.type]} ${fo.icon}`}),U.jsx("span",{className:fo.name,children:t.name})]}),!s&&t.children.map(u=>U.jsx(Hc,{node:u,editor:n,level:r+1},u.id))]})},yS=e=>{const{editor:t}=e,[n,r]=l.useState([]);return l.useEffect(()=>{const o=()=>{const a=t.nodeManager.refresh();r(a)};return t.bus.on("DESERIALIZATED",o),t.bus.on("NODE_ADD",o),t.bus.on("NODE_REMOVE",o),t.bus.on("NODE_MOVE",o),t.bus.on("ATTR_CHANGE",o),o(),()=>{t.bus.off("DESERIALIZATED",o),t.bus.off("NODE_ADD",o),t.bus.off("NODE_REMOVE",o),t.bus.off("NODE_MOVE",o),t.bus.off("ATTR_CHANGE",o)}},[t]),U.jsxs("div",{className:da.container,children:[U.jsxs("div",{className:da.title,children:[U.jsx("span",{className:"iconfont icon-hierarchy"}),U.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Hierarchy"})]}),U.jsx("div",{className:da.body,children:n.map(o=>U.jsx(Hc,{node:o,editor:t},o.id))})]})},bS=()=>{const e=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);if(e.indexOf("win32")>=0||e.indexOf("wow32")>=0)return"win32";if(e.indexOf("win64")>=0||e.indexOf("wow64")>=0)return"win64";if(t)return"mac"},Vs=()=>bS()==="mac",OS=()=>{const[e]=Nu(),t=l.useRef(null),n=yd(t),[r,o]=l.useState(),[a,s]=l.useState(),i=l.useRef({x:0,y:0}),[c,u]=La.useMessage();l.useEffect(()=>{const g=e.get("id");g&&s(g)},[e]),l.useEffect(()=>{const g=new Sy;return g.mount(t.current),g.active(),o(g),()=>{g.deactive(),g.unmount(),o(void 0)}},[]),l.useEffect(()=>{r==null||r.resize()},[r,n]),l.useEffect(()=>{if(!r)return;const g=m=>{c.success(m.message)};return r.bus.on("MESSAGE",g),()=>{r.bus.off("MESSAGE",g)}},[r]),l.useEffect(()=>{a&&(r==null||r.open(a))},[a,r]);const d=g=>{const{clientX:m,clientY:b}=g;if((m-i.current.x)**2+(b-i.current.y)**2>2||!r)return;const C=r.contextMenuManager.getContextMenu(_o.HIERARCHY);C.length!==0&&Bc({event:g,items:C})},h=g=>{eS();const{clientX:m,clientY:b}=g;i.current.x=m,i.current.y=b},p=g=>{Vs()&&d(g)},f=g=>{g.preventDefault(),!Vs()&&d(g)},v=g=>{g.preventDefault()},y=g=>{r==null||r.dropManager.onDrop(g)};return U.jsxs("div",{className:fs.container,children:[u,U.jsxs(Qn,{separator:!0,children:[U.jsx(Qn.Pane,{preferredSize:"15%",maxSize:500,minSize:0,children:r&&U.jsx(yS,{editor:r})}),U.jsx(Qn.Pane,{preferredSize:"68%",minSize:250,children:U.jsxs(Qn,{vertical:!0,separator:!0,children:[U.jsx(Qn.Pane,{preferredSize:"75%",minSize:500,children:U.jsx("div",{className:fs.view,ref:t,onDragOver:v,onDrop:y,onPointerDown:h,onPointerUp:p,onContextMenu:f,children:r&&U.jsx(cS,{editor:r})})}),U.jsx(Qn.Pane,{preferredSize:"25%",minSize:0,children:U.jsx(c0,{})})]})}),U.jsx(Qn.Pane,{preferredSize:"17%",minSize:0,children:r&&U.jsx(rS,{editor:r})})]})]})};export{OS as default};
