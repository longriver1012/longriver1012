import{r as s,j as a}from"./index-Bb-7Eb0M.js";import{R as k}from"./DeleteOutlined-DWcWZcSg.js";import{I as y}from"./index-Bm_fliP1.js";import"./EyeOutlined-VQzAg_-b.js";const C="_canvas_kuuzj_1",D="_container_kuuzj_7",i={canvas:C,container:D,delete:"_delete_kuuzj_10"},R=["jpg","jpeg","png","hdr","webp","ktx2"],N=p=>{const{attribute:r,value:o,onChange:l}=p,n=s.useRef(null),[d,u]=s.useState(!1),[f,x]=s.useState(),g=()=>{const e=n.current.getContext("2d"),{width:c,height:t}=n.current;e.clearRect(0,0,c,t)};s.useEffect(()=>{if(g(),!o||!r)return;const e=r.editor.core.textureManager.renderTexture(n.current,o);x(e)},[o,r]);const m=async e=>{e.preventDefault(),e.stopPropagation();const c=e.dataTransfer.getData("text");try{const t=JSON.parse(c);if(!t||!R.includes(t.type))return;const _=await(r==null?void 0:r.editor.core.textureManager.loadTexture(t.item.code));l(_)}catch(t){console.error(t)}},v=e=>{e.preventDefault(),e.dataTransfer.dropEffect="copy"},h=()=>l(void 0),j=()=>u(!0);return a.jsxs("div",{className:i.container,children:[a.jsx("canvas",{className:i.canvas,ref:n,width:50,height:50,onDragOver:v,onDrop:m,onClick:j}),a.jsx(k,{className:i.delete,onClick:h}),a.jsx(y,{style:{display:"none"},preview:{visible:d,src:f,onVisibleChange:e=>u(e)}})]})};export{N as TextureSelect};
