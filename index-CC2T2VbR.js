var ul=Object.defineProperty;var dl=(r,t,e)=>t in r?ul(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var C=(r,t,e)=>dl(r,typeof t!="symbol"?t+"":t,e);import{g as dr,m as er,i as To,a as pl,r as Yt,P as hl,b as ml,c as gl,d as u,C as _t,e as ne,f as fl,u as kt,T as $o,h as An,j as ti,K as ot,_ as bt,k as pe,l as le,n as Le,o as ce,I as pr,p as te,q as vl,W as D,F as hi,D as ha,s as rn,t as yl,v as bl,w as oa,x as gt,y as mi,z as Lo,A as sa,B as Do,E as xr,G as Sl,H as zo,J as ma,R as Bo,L as Ml,M as Cl,N as Al,O as ga,Q as fa,S as jo,U as Zt,V as va,X as ya,Y as Ho,Z as El,$ as tr,a0 as Ra,a1 as Qt,a2 as Vo,a3 as Fo,a4 as ri,a5 as xl,a6 as wl,a7 as Nl,a8 as Uo,a9 as gi,aa as Pl,ab as Ol,ac as _i,ad as kl,ae as Il,af as Rl,ag as _l,ah as Tl,ai as $l,aj as Go,ak as Ti,al as z,am as En,an as Wo,ao as Ll,ap as Dl,aq as $i,ar as zl,as as Bl,at as jl,au as Hl,av as Vl,aw as Fl,ax as Ul,ay as Gl,az as Wl,aA as ba,aB as Yl,aC as Xl,aD as ql}from"./index-De1Dcx5q.js";import{B as Kl,t as Zl,i as Ql,a as Jl,g as Yo,b as ec,c as tc,d as rc,e as nc,f as ac,h as ic,j as oc,u as sc,k as ni,l as lc,I as Sa,S as Xo,R as cc,F as _a,M as wn,m as qo,C as bn}from"./index-DjxMdaTN.js";import{O as Li,V as xt,C as Yn,R as uc,a as Ko,b as dc,c as pc,M as Ta,S as Hr,d as hc,Q as $a,E as Vr,e as Zo,f as mc,g as gc,h as fc,i as ve,j as ft,k as fn,l as vc,P as nn,m as Re,n as yc,o as Di,p as bc,T as Ke,q as zi,r as la,s as Sc,t as Lr,u as Jr,B as Qo,v as Mc,w as Cc,D as an,x as Me,y as rr,z as j,A as Pt,F as st,G as xe,H as we,I as Ne,J as Pe,K as nr,L as Ye,N as Ot,U as Ac,W as ct,X as ut,Y as dt,Z as pt,_ as Ar,$ as Ec,a0 as en,a1 as xc,a2 as wc,a3 as Nc,a4 as Pc,a5 as Jo,a6 as on,a7 as es,a8 as Oc,a9 as kc,aa as La,ab as Ic,ac as Rc,ad as Xn,ae as _c,af as Tc,ag as $c,ah as Lc,ai as Dc,aj as zc,ak as Bc,al as jc,am as Hc,an as fi,ao as tn,ap as Vc,aq as ra,ar as Fc,as as Uc,at as Er,au as Gc,av as Wc,aw as Yc,ax as Xc,ay as qc}from"./useSize-uZrrcNgI.js";const ca=r=>r?typeof r=="function"?r():r:null,Kc=r=>{const{componentCls:t,popoverColor:e,titleMinWidth:n,fontWeightStrong:a,innerPadding:i,boxShadowSecondary:o,colorTextHeading:s,borderRadiusLG:c,zIndexPopup:d,titleMarginBottom:p,colorBgElevated:h,popoverBg:g,titleBorderBottom:m,innerContentPadding:S,titlePadding:b}=r;return[{[t]:Object.assign(Object.assign({},Yt(r)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":h,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:g,backgroundClip:"padding-box",borderRadius:c,boxShadow:o,padding:i},[`${t}-title`]:{minWidth:n,marginBottom:p,color:s,fontWeight:a,borderBottom:m,padding:b},[`${t}-inner-content`]:{color:e,padding:S}})},pl(r,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:r.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},Zc=r=>{const{componentCls:t}=r;return{[t]:hl.map(e=>{const n=r[`${e}6`];return{[`&${t}-${e}`]:{"--antd-arrow-background-color":n,[`${t}-inner`]:{backgroundColor:n},[`${t}-arrow`]:{background:"transparent"}}}})}},Qc=r=>{const{lineWidth:t,controlHeight:e,fontHeight:n,padding:a,wireframe:i,zIndexPopupBase:o,borderRadiusLG:s,marginXS:c,lineType:d,colorSplit:p,paddingSM:h}=r,g=e-n,m=g/2,S=g/2-t,b=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:o+30},ml(r)),gl({contentRadius:s,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:c,titlePadding:i?`${m}px ${b}px ${S}px`:0,titleBorderBottom:i?`${t}px ${d} ${p}`:"none",innerContentPadding:i?`${h}px ${b}px`:0})},ts=dr("Popover",r=>{const{colorBgElevated:t,colorText:e}=r,n=er(r,{popoverBg:t,popoverColor:e});return[Kc(n),Zc(n),To(n,"zoom-big")]},Qc,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Jc=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const rs=r=>{let{title:t,content:e,prefixCls:n}=r;return!t&&!e?null:u.createElement(u.Fragment,null,t&&u.createElement("div",{className:`${n}-title`},t),e&&u.createElement("div",{className:`${n}-inner-content`},e))},eu=r=>{const{hashId:t,prefixCls:e,className:n,style:a,placement:i="top",title:o,content:s,children:c}=r,d=ca(o),p=ca(s),h=ne(t,e,`${e}-pure`,`${e}-placement-${i}`,n);return u.createElement("div",{className:h,style:a},u.createElement("div",{className:`${e}-arrow`}),u.createElement(fl,Object.assign({},r,{className:t,prefixCls:e}),c||u.createElement(rs,{prefixCls:e,title:d,content:p})))},tu=r=>{const{prefixCls:t,className:e}=r,n=Jc(r,["prefixCls","className"]),{getPrefixCls:a}=u.useContext(_t),i=a("popover",t),[o,s,c]=ts(i);return o(u.createElement(eu,Object.assign({},n,{prefixCls:i,hashId:s,className:ne(e,c)})))};var ru=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const nu=u.forwardRef((r,t)=>{var e,n;const{prefixCls:a,title:i,content:o,overlayClassName:s,placement:c="top",trigger:d="hover",children:p,mouseEnterDelay:h=.1,mouseLeaveDelay:g=.1,onOpenChange:m,overlayStyle:S={}}=r,b=ru(r,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:f}=u.useContext(_t),v=f("popover",a),[y,x,A]=ts(v),E=f(),I=ne(s,x,A),[N,O]=kt(!1,{value:(e=r.open)!==null&&e!==void 0?e:r.visible,defaultValue:(n=r.defaultOpen)!==null&&n!==void 0?n:r.defaultVisible}),$=(L,k)=>{O(L,!0),m==null||m(L,k)},P=L=>{L.keyCode===ot.ESC&&$(!1,L)},R=L=>{$(L)},_=ca(i),B=ca(o);return y(u.createElement($o,Object.assign({placement:c,trigger:d,mouseEnterDelay:h,mouseLeaveDelay:g,overlayStyle:S},b,{prefixCls:v,overlayClassName:I,ref:t,open:N,onOpenChange:R,overlay:_||B?u.createElement(rs,{prefixCls:v,title:_,content:B}):null,transitionName:An(E,"zoom-big",b.transitionName),"data-popover-inject":!0}),ti(p,{onKeyDown:L=>{var k,H;u.isValidElement(p)&&((H=p==null?void 0:(k=p.props).onKeyDown)===null||H===void 0||H.call(k,L)),P(L)}})))}),ns=nu;ns._InternalPanelDoNotUseOrYouWillBeFired=tu;var au=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],iu=u.forwardRef(function(r,t){var e=r.prefixCls,n=e===void 0?"rc-checkbox":e,a=r.className,i=r.style,o=r.checked,s=r.disabled,c=r.defaultChecked,d=c===void 0?!1:c,p=r.type,h=p===void 0?"checkbox":p,g=r.title,m=r.onChange,S=bt(r,au),b=u.useRef(null),f=u.useRef(null),v=kt(d,{value:o}),y=pe(v,2),x=y[0],A=y[1];u.useImperativeHandle(t,function(){return{focus:function(O){var $;($=b.current)===null||$===void 0||$.focus(O)},blur:function(){var O;(O=b.current)===null||O===void 0||O.blur()},input:b.current,nativeElement:f.current}});var E=ne(n,a,le(le({},"".concat(n,"-checked"),x),"".concat(n,"-disabled"),s)),I=function(O){s||("checked"in r||A(O.target.checked),m==null||m({target:ce(ce({},r),{},{type:h,checked:O.target.checked}),stopPropagation:function(){O.stopPropagation()},preventDefault:function(){O.preventDefault()},nativeEvent:O.nativeEvent}))};return u.createElement("span",{className:E,title:g,style:i,ref:f},u.createElement("input",Le({},S,{className:"".concat(n,"-input"),ref:b,onChange:I,disabled:s,checked:!!x,type:h})),u.createElement("span",{className:"".concat(n,"-inner")}))}),ou={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},su=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:ou}))},lu=u.forwardRef(su);const cu=r=>{const{checkboxCls:t}=r,e=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},Yt(r)),{display:"inline-flex",flexWrap:"wrap",columnGap:r.marginXS,[`> ${r.antCls}-row`]:{flex:1}}),[e]:Object.assign(Object.assign({},Yt(r)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${e}`]:{marginInlineStart:0},[`&${e}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},Yt(r)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:r.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},vl(r))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:r.checkboxSize,height:r.checkboxSize,direction:"ltr",backgroundColor:r.colorBgContainer,border:`${te(r.lineWidth)} ${r.lineType} ${r.colorBorder}`,borderRadius:r.borderRadiusSM,borderCollapse:"separate",transition:`all ${r.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:r.calc(r.checkboxSize).div(14).mul(5).equal(),height:r.calc(r.checkboxSize).div(14).mul(8).equal(),border:`${te(r.lineWidthBold)} solid ${r.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${r.motionDurationFast} ${r.motionEaseInBack}, opacity ${r.motionDurationFast}`}},"& + span":{paddingInlineStart:r.paddingXS,paddingInlineEnd:r.paddingXS}})},{[`
        ${e}:not(${e}-disabled),
        ${t}:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{borderColor:r.colorPrimary}},[`${e}:not(${e}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:r.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:r.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:r.colorPrimary,borderColor:r.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${r.motionDurationMid} ${r.motionEaseOutBack} ${r.motionDurationFast}`}}},[`
        ${e}-checked:not(${e}-disabled),
        ${t}-checked:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{backgroundColor:r.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${r.colorBgContainer} !important`,borderColor:`${r.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:r.calc(r.fontSizeLG).div(2).equal(),height:r.calc(r.fontSizeLG).div(2).equal(),backgroundColor:r.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${r.colorBgContainer} !important`,borderColor:`${r.colorPrimary} !important`}}}},{[`${e}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:r.colorBgContainerDisabled,borderColor:r.colorBorder,"&:after":{borderColor:r.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:r.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:r.colorTextDisabled}}}]};function uu(r,t){const e=er(t,{checkboxCls:`.${r}`,checkboxSize:t.controlInteractiveSize});return[cu(e)]}const as=dr("Checkbox",(r,t)=>{let{prefixCls:e}=t;return[uu(e,r)]}),is=D.createContext(null);var du=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const pu=(r,t)=>{var e;const{prefixCls:n,className:a,rootClassName:i,children:o,indeterminate:s=!1,style:c,onMouseEnter:d,onMouseLeave:p,skipGroup:h=!1,disabled:g}=r,m=du(r,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:S,direction:b,checkbox:f}=u.useContext(_t),v=u.useContext(is),{isFormItemInput:y}=u.useContext(hi),x=u.useContext(ha),A=(e=(v==null?void 0:v.disabled)||g)!==null&&e!==void 0?e:x,E=u.useRef(m.value);u.useEffect(()=>{v==null||v.registerValue(m.value)},[]),u.useEffect(()=>{if(!h)return m.value!==E.current&&(v==null||v.cancelValue(E.current),v==null||v.registerValue(m.value),E.current=m.value),()=>v==null?void 0:v.cancelValue(m.value)},[m.value]);const I=S("checkbox",n),N=rn(I),[O,$,P]=as(I,N),R=Object.assign({},m);v&&!h&&(R.onChange=function(){m.onChange&&m.onChange.apply(m,arguments),v.toggleOption&&v.toggleOption({label:o,value:m.value})},R.name=v.name,R.checked=v.value.includes(m.value));const _=ne(`${I}-wrapper`,{[`${I}-rtl`]:b==="rtl",[`${I}-wrapper-checked`]:R.checked,[`${I}-wrapper-disabled`]:A,[`${I}-wrapper-in-form-item`]:y},f==null?void 0:f.className,a,i,P,N,$),B=ne({[`${I}-indeterminate`]:s},yl,$),L=s?"mixed":void 0;return O(u.createElement(bl,{component:"Checkbox",disabled:A},u.createElement("label",{className:_,style:Object.assign(Object.assign({},f==null?void 0:f.style),c),onMouseEnter:d,onMouseLeave:p},u.createElement(iu,Object.assign({"aria-checked":L},R,{prefixCls:I,className:B,disabled:A,ref:t})),o!==void 0&&u.createElement("span",null,o))))},os=u.forwardRef(pu);var hu=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const mu=u.forwardRef((r,t)=>{const{defaultValue:e,children:n,options:a=[],prefixCls:i,className:o,rootClassName:s,style:c,onChange:d}=r,p=hu(r,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:h,direction:g}=u.useContext(_t),[m,S]=u.useState(p.value||e||[]),[b,f]=u.useState([]);u.useEffect(()=>{"value"in p&&S(p.value||[])},[p.value]);const v=u.useMemo(()=>a.map(k=>typeof k=="string"||typeof k=="number"?{label:k,value:k}:k),[a]),y=k=>{f(H=>H.filter(V=>V!==k))},x=k=>{f(H=>[].concat(gt(H),[k]))},A=k=>{const H=m.indexOf(k.value),V=gt(m);H===-1?V.push(k.value):V.splice(H,1),"value"in p||S(V),d==null||d(V.filter(K=>b.includes(K)).sort((K,q)=>{const ue=v.findIndex(Z=>Z.value===K),G=v.findIndex(Z=>Z.value===q);return ue-G}))},E=h("checkbox",i),I=`${E}-group`,N=rn(E),[O,$,P]=as(E,N),R=oa(p,["value","disabled"]),_=a.length?v.map(k=>u.createElement(os,{prefixCls:E,key:k.value.toString(),disabled:"disabled"in k?k.disabled:p.disabled,value:k.value,checked:m.includes(k.value),onChange:k.onChange,className:`${I}-item`,style:k.style,title:k.title,id:k.id,required:k.required},k.label)):n,B={toggleOption:A,value:m,disabled:p.disabled,name:p.name,registerValue:x,cancelValue:y},L=ne(I,{[`${I}-rtl`]:g==="rtl"},o,s,P,N,$);return O(u.createElement("div",Object.assign({className:L,style:c},R,{ref:t}),u.createElement(is.Provider,{value:B},_)))}),vi=os;vi.Group=mu;vi.__ANT_CHECKBOX=!0;var ss=D.forwardRef(function(r,t){var e=r.prefixCls,n=r.forceRender,a=r.className,i=r.style,o=r.children,s=r.isActive,c=r.role,d=D.useState(s||n),p=pe(d,2),h=p[0],g=p[1];return D.useEffect(function(){(n||s)&&g(!0)},[n,s]),h?D.createElement("div",{ref:t,className:ne("".concat(e,"-content"),le(le({},"".concat(e,"-content-active"),s),"".concat(e,"-content-inactive"),!s),a),style:i,role:c},D.createElement("div",{className:"".concat(e,"-content-box")},o)):null});ss.displayName="PanelContent";var gu=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ls=D.forwardRef(function(r,t){var e=r.showArrow,n=e===void 0?!0:e,a=r.headerClass,i=r.isActive,o=r.onItemClick,s=r.forceRender,c=r.className,d=r.prefixCls,p=r.collapsible,h=r.accordion,g=r.panelKey,m=r.extra,S=r.header,b=r.expandIcon,f=r.openMotion,v=r.destroyInactivePanel,y=r.children,x=bt(r,gu),A=p==="disabled",E=p==="header",I=p==="icon",N=m!=null&&typeof m!="boolean",O=function(){o==null||o(g)},$=function(k){(k.key==="Enter"||k.keyCode===ot.ENTER||k.which===ot.ENTER)&&O()},P=typeof b=="function"?b(r):D.createElement("i",{className:"arrow"});P&&(P=D.createElement("div",{className:"".concat(d,"-expand-icon"),onClick:["header","icon"].includes(p)?O:void 0},P));var R=ne(le(le(le({},"".concat(d,"-item"),!0),"".concat(d,"-item-active"),i),"".concat(d,"-item-disabled"),A),c),_=ne(a,le(le(le({},"".concat(d,"-header"),!0),"".concat(d,"-header-collapsible-only"),E),"".concat(d,"-icon-collapsible-only"),I)),B={className:_,"aria-expanded":i,"aria-disabled":A,onKeyDown:$};return!E&&!I&&(B.onClick=O,B.role=h?"tab":"button",B.tabIndex=A?-1:0),D.createElement("div",Le({},x,{ref:t,className:R}),D.createElement("div",B,n&&P,D.createElement("span",{className:"".concat(d,"-header-text"),onClick:p==="header"?O:void 0},S),N&&D.createElement("div",{className:"".concat(d,"-extra")},m)),D.createElement(mi,Le({visible:i,leavedClassName:"".concat(d,"-content-hidden")},f,{forceRender:s,removeOnLeave:v}),function(L,k){var H=L.className,V=L.style;return D.createElement(ss,{ref:k,prefixCls:d,className:H,style:V,isActive:i,forceRender:s,role:h?"tabpanel":void 0},y)}))}),fu=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],vu=function(t,e){var n=e.prefixCls,a=e.accordion,i=e.collapsible,o=e.destroyInactivePanel,s=e.onItemClick,c=e.activeKey,d=e.openMotion,p=e.expandIcon;return t.map(function(h,g){var m=h.children,S=h.label,b=h.key,f=h.collapsible,v=h.onItemClick,y=h.destroyInactivePanel,x=bt(h,fu),A=String(b??g),E=f??i,I=y??o,N=function(P){E!=="disabled"&&(s(P),v==null||v(P))},O=!1;return a?O=c[0]===A:O=c.indexOf(A)>-1,D.createElement(ls,Le({},x,{prefixCls:n,key:A,panelKey:A,isActive:O,accordion:a,openMotion:d,expandIcon:p,header:S,collapsible:E,onItemClick:N,destroyInactivePanel:I}),m)})},yu=function(t,e,n){if(!t)return null;var a=n.prefixCls,i=n.accordion,o=n.collapsible,s=n.destroyInactivePanel,c=n.onItemClick,d=n.activeKey,p=n.openMotion,h=n.expandIcon,g=t.key||String(e),m=t.props,S=m.header,b=m.headerClass,f=m.destroyInactivePanel,v=m.collapsible,y=m.onItemClick,x=!1;i?x=d[0]===g:x=d.indexOf(g)>-1;var A=v??o,E=function(O){A!=="disabled"&&(c(O),y==null||y(O))},I={key:g,panelKey:g,header:S,headerClass:b,isActive:x,prefixCls:a,destroyInactivePanel:f??s,openMotion:p,accordion:i,children:t.props.children,onItemClick:E,expandIcon:h,collapsible:A};return typeof t.type=="string"?t:(Object.keys(I).forEach(function(N){typeof I[N]>"u"&&delete I[N]}),D.cloneElement(t,I))};function bu(r,t,e){return Array.isArray(r)?vu(r,e):Lo(t).map(function(n,a){return yu(n,a,e)})}function Su(r){var t=r;if(!Array.isArray(t)){var e=xr(t);t=e==="number"||e==="string"?[t]:[]}return t.map(function(n){return String(n)})}var Mu=D.forwardRef(function(r,t){var e=r.prefixCls,n=e===void 0?"rc-collapse":e,a=r.destroyInactivePanel,i=a===void 0?!1:a,o=r.style,s=r.accordion,c=r.className,d=r.children,p=r.collapsible,h=r.openMotion,g=r.expandIcon,m=r.activeKey,S=r.defaultActiveKey,b=r.onChange,f=r.items,v=ne(n,c),y=kt([],{value:m,onChange:function($){return b==null?void 0:b($)},defaultValue:S,postState:Su}),x=pe(y,2),A=x[0],E=x[1],I=function($){return E(function(){if(s)return A[0]===$?[]:[$];var P=A.indexOf($),R=P>-1;return R?A.filter(function(_){return _!==$}):[].concat(gt(A),[$])})};sa(!d,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var N=bu(f,d,{prefixCls:n,accordion:s,openMotion:h,expandIcon:g,collapsible:p,destroyInactivePanel:i,onItemClick:I,activeKey:A});return D.createElement("div",Le({ref:t,className:v,style:o,role:s?"tablist":void 0},Do(r,{aria:!0,data:!0})),N)});const yi=Object.assign(Mu,{Panel:ls});yi.Panel;const Cu=u.forwardRef((r,t)=>{const{getPrefixCls:e}=u.useContext(_t),{prefixCls:n,className:a,showArrow:i=!0}=r,o=e("collapse",n),s=ne({[`${o}-no-arrow`]:!i},a);return u.createElement(yi.Panel,Object.assign({ref:t},r,{prefixCls:o,className:s}))}),Au=r=>{const{componentCls:t,contentBg:e,padding:n,headerBg:a,headerPadding:i,collapseHeaderPaddingSM:o,collapseHeaderPaddingLG:s,collapsePanelBorderRadius:c,lineWidth:d,lineType:p,colorBorder:h,colorText:g,colorTextHeading:m,colorTextDisabled:S,fontSizeLG:b,lineHeight:f,lineHeightLG:v,marginSM:y,paddingSM:x,paddingLG:A,paddingXS:E,motionDurationSlow:I,fontSizeIcon:N,contentPadding:O,fontHeight:$,fontHeightLG:P}=r,R=`${te(d)} ${p} ${h}`;return{[t]:Object.assign(Object.assign({},Yt(r)),{backgroundColor:a,border:R,borderRadius:c,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:R,"&:last-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`0 0 ${te(c)} ${te(c)}`}},[`> ${t}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:i,color:m,lineHeight:f,cursor:"pointer",transition:`all ${I}, visibility 0s`,[`> ${t}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${t}-expand-icon`]:{height:$,display:"flex",alignItems:"center",paddingInlineEnd:y},[`${t}-arrow`]:Object.assign(Object.assign({},zo()),{fontSize:N,transition:`transform ${I}`,svg:{transition:`transform ${I}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}},[`${t}-icon-collapsible-only`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:g,backgroundColor:e,borderTop:R,[`& > ${t}-content-box`]:{padding:O},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:o,paddingInlineStart:E,[`> ${t}-expand-icon`]:{marginInlineStart:r.calc(x).sub(E).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:x}}},"&-large":{[`> ${t}-item`]:{fontSize:b,lineHeight:v,[`> ${t}-header`]:{padding:s,paddingInlineStart:n,[`> ${t}-expand-icon`]:{height:P,marginInlineStart:r.calc(A).sub(n).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:A}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${te(c)} ${te(c)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:S,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:y}}}}})}},Eu=r=>{const{componentCls:t}=r,e=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[e]:{transform:"rotate(180deg)"}}}},xu=r=>{const{componentCls:t,headerBg:e,paddingXXS:n,colorBorder:a}=r;return{[`${t}-borderless`]:{backgroundColor:e,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${a}`},[`
        > ${t}-item:last-child,
        > ${t}-item:last-child ${t}-header
      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{paddingTop:n}}}},wu=r=>{const{componentCls:t,paddingSM:e}=r;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:e}}}}}},Nu=r=>({headerPadding:`${r.paddingSM}px ${r.padding}px`,headerBg:r.colorFillAlter,contentPadding:`${r.padding}px 16px`,contentBg:r.colorBgContainer}),Pu=dr("Collapse",r=>{const t=er(r,{collapseHeaderPaddingSM:`${te(r.paddingXS)} ${te(r.paddingSM)}`,collapseHeaderPaddingLG:`${te(r.padding)} ${te(r.paddingLG)}`,collapsePanelBorderRadius:r.borderRadiusLG});return[Au(t),xu(t),wu(t),Eu(t),Sl(t)]},Nu),Ou=u.forwardRef((r,t)=>{const{getPrefixCls:e,direction:n,collapse:a}=u.useContext(_t),{prefixCls:i,className:o,rootClassName:s,style:c,bordered:d=!0,ghost:p,size:h,expandIconPosition:g="start",children:m,expandIcon:S}=r,b=ma(R=>{var _;return(_=h??R)!==null&&_!==void 0?_:"middle"}),f=e("collapse",i),v=e(),[y,x,A]=Pu(f),E=u.useMemo(()=>g==="left"?"start":g==="right"?"end":g,[g]),I=S??(a==null?void 0:a.expandIcon),N=u.useCallback(function(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _=typeof I=="function"?I(R):u.createElement(Bo,{rotate:R.isActive?90:void 0,"aria-label":R.isActive?"expanded":"collapsed"});return ti(_,()=>{var B;return{className:ne((B=_==null?void 0:_.props)===null||B===void 0?void 0:B.className,`${f}-arrow`)}})},[I,f]),O=ne(`${f}-icon-position-${E}`,{[`${f}-borderless`]:!d,[`${f}-rtl`]:n==="rtl",[`${f}-ghost`]:!!p,[`${f}-${b}`]:b!=="middle"},a==null?void 0:a.className,o,s,x,A),$=Object.assign(Object.assign({},Ml(v)),{motionAppear:!1,leavedClassName:`${f}-content-hidden`}),P=u.useMemo(()=>m?Lo(m).map((R,_)=>{var B,L;if(!((B=R.props)===null||B===void 0)&&B.disabled){const k=(L=R.key)!==null&&L!==void 0?L:String(_),{disabled:H,collapsible:V}=R.props,K=Object.assign(Object.assign({},oa(R.props,["disabled"])),{key:k,collapsible:V??(H?"disabled":void 0)});return ti(R,K)}return R}):null,[m]);return y(u.createElement(yi,Object.assign({ref:t,openMotion:$},oa(r,["rootClassName"]),{expandIcon:N,prefixCls:f,className:O,style:Object.assign(Object.assign({},a==null?void 0:a.style),c)}),P))}),ku=Object.assign(Ou,{Panel:Cu});var Iu=["b"],Ru=["v"],Da=function(t){return Math.round(Number(t||0))},_u=function(t){if(t instanceof jo)return t;if(t&&xr(t)==="object"&&"h"in t&&"b"in t){var e=t,n=e.b,a=bt(e,Iu);return ce(ce({},a),{},{v:n})}return typeof t=="string"&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t},Xt=function(r){Cl(e,r);var t=Al(e);function e(n){return ga(this,e),t.call(this,_u(n))}return fa(e,[{key:"toHsbString",value:function(){var a=this.toHsb(),i=Da(a.s*100),o=Da(a.b*100),s=Da(a.h),c=a.a,d="hsb(".concat(s,", ").concat(i,"%, ").concat(o,"%)"),p="hsba(".concat(s,", ").concat(i,"%, ").concat(o,"%, ").concat(c.toFixed(c===0?0:2),")");return c===1?d:p}},{key:"toHsb",value:function(){var a=this.toHsv(),i=a.v,o=bt(a,Ru);return ce(ce({},o),{},{b:i,a:this.a})}}]),e}(jo),Tu="rc-color-picker",Zr=function(t){return t instanceof Xt?t:new Xt(t)},$u=Zr("#1677ff"),cs=function(t){var e=t.offset,n=t.targetRef,a=t.containerRef,i=t.color,o=t.type,s=a.current.getBoundingClientRect(),c=s.width,d=s.height,p=n.current.getBoundingClientRect(),h=p.width,g=p.height,m=h/2,S=g/2,b=(e.x+m)/c,f=1-(e.y+S)/d,v=i.toHsb(),y=b,x=(e.x+m)/c*360;if(o)switch(o){case"hue":return Zr(ce(ce({},v),{},{h:x<=0?0:x}));case"alpha":return Zr(ce(ce({},v),{},{a:y<=0?0:y}))}return Zr({h:v.h,s:b<=0?0:b,b:f>=1?1:f,a:v.a})},us=function(t,e){var n=t.toHsb();switch(e){case"hue":return{x:n.h/360*100,y:50};case"alpha":return{x:t.a*100,y:50};default:return{x:n.s*100,y:(1-n.b)*100}}},bi=function(t){var e=t.color,n=t.prefixCls,a=t.className,i=t.style,o=t.onClick,s="".concat(n,"-color-block");return D.createElement("div",{className:ne(s,a),style:i,onClick:o},D.createElement("div",{className:"".concat(s,"-inner"),style:{background:e}}))};function Lu(r){var t="touches"in r?r.touches[0]:r,e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,n=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-e,pageY:t.pageY-n}}function ds(r){var t=r.targetRef,e=r.containerRef,n=r.direction,a=r.onDragChange,i=r.onDragChangeComplete,o=r.calculate,s=r.color,c=r.disabledDrag,d=u.useState({x:0,y:0}),p=pe(d,2),h=p[0],g=p[1],m=u.useRef(null),S=u.useRef(null);u.useEffect(function(){g(o())},[s]),u.useEffect(function(){return function(){document.removeEventListener("mousemove",m.current),document.removeEventListener("mouseup",S.current),document.removeEventListener("touchmove",m.current),document.removeEventListener("touchend",S.current),m.current=null,S.current=null}},[]);var b=function(A){var E=Lu(A),I=E.pageX,N=E.pageY,O=e.current.getBoundingClientRect(),$=O.x,P=O.y,R=O.width,_=O.height,B=t.current.getBoundingClientRect(),L=B.width,k=B.height,H=L/2,V=k/2,K=Math.max(0,Math.min(I-$,R))-H,q=Math.max(0,Math.min(N-P,_))-V,ue={x:K,y:n==="x"?h.y:q};if(L===0&&k===0||L!==k)return!1;a==null||a(ue)},f=function(A){A.preventDefault(),b(A)},v=function(A){A.preventDefault(),document.removeEventListener("mousemove",m.current),document.removeEventListener("mouseup",S.current),document.removeEventListener("touchmove",m.current),document.removeEventListener("touchend",S.current),m.current=null,S.current=null,i==null||i()},y=function(A){document.removeEventListener("mousemove",m.current),document.removeEventListener("mouseup",S.current),!c&&(b(A),document.addEventListener("mousemove",f),document.addEventListener("mouseup",v),document.addEventListener("touchmove",f),document.addEventListener("touchend",v),m.current=f,S.current=v)};return[h,y]}var ps=function(t){var e=t.size,n=e===void 0?"default":e,a=t.color,i=t.prefixCls;return D.createElement("div",{className:ne("".concat(i,"-handler"),le({},"".concat(i,"-handler-sm"),n==="small")),style:{backgroundColor:a}})},hs=function(t){var e=t.children,n=t.style,a=t.prefixCls;return D.createElement("div",{className:"".concat(a,"-palette"),style:ce({position:"relative"},n)},e)},ms=u.forwardRef(function(r,t){var e=r.children,n=r.x,a=r.y;return D.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(n,"%"),top:"".concat(a,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},e)}),Du=function(t){var e=t.color,n=t.onChange,a=t.prefixCls,i=t.onChangeComplete,o=t.disabled,s=u.useRef(),c=u.useRef(),d=u.useRef(e),p=Zt(function(b){var f=cs({offset:b,targetRef:c,containerRef:s,color:e});d.current=f,n(f)}),h=ds({color:e,containerRef:s,targetRef:c,calculate:function(){return us(e)},onDragChange:p,onDragChangeComplete:function(){return i==null?void 0:i(d.current)},disabledDrag:o}),g=pe(h,2),m=g[0],S=g[1];return D.createElement("div",{ref:s,className:"".concat(a,"-select"),onMouseDown:S,onTouchStart:S},D.createElement(hs,{prefixCls:a},D.createElement(ms,{x:m.x,y:m.y,ref:c},D.createElement(ps,{color:e.toRgbString(),prefixCls:a})),D.createElement("div",{className:"".concat(a,"-saturation"),style:{backgroundColor:"hsl(".concat(e.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},zu=function(t,e){var n=kt(t,{value:e}),a=pe(n,2),i=a[0],o=a[1],s=u.useMemo(function(){return Zr(i)},[i]);return[s,o]},Bu=function(t){var e=t.colors,n=t.children,a=t.direction,i=a===void 0?"to right":a,o=t.type,s=t.prefixCls,c=u.useMemo(function(){return e.map(function(d,p){var h=Zr(d);return o==="alpha"&&p===e.length-1&&(h=new Xt(h.setA(1))),h.toRgbString()}).join(",")},[e,o]);return D.createElement("div",{className:"".concat(s,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(i,", ").concat(c,")")}},n)},ju=function(t){var e=t.prefixCls,n=t.colors,a=t.disabled,i=t.onChange,o=t.onChangeComplete,s=t.color,c=t.type,d=u.useRef(),p=u.useRef(),h=u.useRef(s),g=function(E){return c==="hue"?E.getHue():E.a*100},m=Zt(function(A){var E=cs({offset:A,targetRef:p,containerRef:d,color:s,type:c});h.current=E,i(g(E))}),S=ds({color:s,targetRef:p,containerRef:d,calculate:function(){return us(s,c)},onDragChange:m,onDragChangeComplete:function(){o(g(h.current))},direction:"x",disabledDrag:a}),b=pe(S,2),f=b[0],v=b[1],y=D.useMemo(function(){if(c==="hue"){var A=s.toHsb();A.s=1,A.b=1,A.a=1;var E=new Xt(A);return E}return s},[s,c]),x=D.useMemo(function(){return n.map(function(A){return"".concat(A.color," ").concat(A.percent,"%")})},[n]);return D.createElement("div",{ref:d,className:ne("".concat(e,"-slider"),"".concat(e,"-slider-").concat(c)),onMouseDown:v,onTouchStart:v},D.createElement(hs,{prefixCls:e},D.createElement(ms,{x:f.x,y:f.y,ref:p},D.createElement(ps,{size:"small",color:y.toHexString(),prefixCls:e})),D.createElement(Bu,{colors:x,type:c,prefixCls:e})))};function Hu(r){return u.useMemo(function(){var t=r||{},e=t.slider;return[e||ju]},[r])}var Vu=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],Fu=u.forwardRef(function(r,t){var e=r.value,n=r.defaultValue,a=r.prefixCls,i=a===void 0?Tu:a,o=r.onChange,s=r.onChangeComplete,c=r.className,d=r.style,p=r.panelRender,h=r.disabledAlpha,g=h===void 0?!1:h,m=r.disabled,S=m===void 0?!1:m,b=r.components,f=Hu(b),v=pe(f,1),y=v[0],x=zu(n||$u,e),A=pe(x,2),E=A[0],I=A[1],N=u.useMemo(function(){return E.setA(1).toRgbString()},[E]),O=function(q,ue){e||I(q),o==null||o(q,ue)},$=function(q){return new Xt(E.setHue(q))},P=function(q){return new Xt(E.setA(q/100))},R=function(q){O($(q),{type:"hue",value:q})},_=function(q){O(P(q),{type:"alpha",value:q})},B=function(q){s&&s($(q))},L=function(q){s&&s(P(q))},k=ne("".concat(i,"-panel"),c,le({},"".concat(i,"-panel-disabled"),S)),H={prefixCls:i,disabled:S,color:E},V=D.createElement(D.Fragment,null,D.createElement(Du,Le({onChange:O},H,{onChangeComplete:s})),D.createElement("div",{className:"".concat(i,"-slider-container")},D.createElement("div",{className:ne("".concat(i,"-slider-group"),le({},"".concat(i,"-slider-group-disabled-alpha"),g))},D.createElement(y,Le({},H,{type:"hue",colors:Vu,min:0,max:359,value:E.getHue(),onChange:R,onChangeComplete:B})),!g&&D.createElement(y,Le({},H,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:N}],min:0,max:100,value:E.a*100,onChange:_,onChangeComplete:L}))),D.createElement(bi,{color:E.toRgbString(),prefixCls:i})));return D.createElement("div",{className:k,style:d,ref:t},typeof p=="function"?p(V):V)});const vn=(r,t)=>(r==null?void 0:r.replace(/[^\w/]/gi,"").slice(0,t?8:6))||"",Uu=(r,t)=>r?vn(r,t):"";let Ft=function(){function r(t){ga(this,r);var e;if(this.cleared=!1,t instanceof r){this.metaColor=t.metaColor.clone(),this.colors=(e=t.colors)===null||e===void 0?void 0:e.map(a=>({color:new r(a.color),percent:a.percent})),this.cleared=t.cleared;return}const n=Array.isArray(t);n&&t.length?(this.colors=t.map(a=>{let{color:i,percent:o}=a;return{color:new r(i),percent:o}}),this.metaColor=new Xt(this.colors[0].color.metaColor)):this.metaColor=new Xt(n?"":t),(!t||n&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return fa(r,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return Uu(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:e}=this;return e?`linear-gradient(90deg, ${e.map(a=>`${a.color.toRgbString()} ${a.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(e){return!e||this.isGradient()!==e.isGradient()?!1:this.isGradient()?this.colors.length===e.colors.length&&this.colors.every((n,a)=>{const i=e.colors[a];return n.percent===i.percent&&n.color.equals(i.color)}):this.toHexString()===e.toHexString()}}])}();const Gu=r=>{const{componentCls:t,sizePaddingEdgeHorizontal:e,colorSplit:n,lineWidth:a,textPaddingInline:i,orientationMargin:o,verticalMarginInline:s}=r;return{[t]:Object.assign(Object.assign({},Yt(r)),{borderBlockStart:`${te(a)} solid ${n}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${te(a)} solid ${n}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${te(r.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${te(r.dividerHorizontalWithTextGutterMargin)} 0`,color:r.colorTextHeading,fontWeight:500,fontSize:r.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${n}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${te(a)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${o} * 100%)`},"&::after":{width:`calc(100% - ${o} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${o} * 100%)`},"&::after":{width:`calc(${o} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:i},"&-dashed":{background:"none",borderColor:n,borderStyle:"dashed",borderWidth:`${te(a)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:n,borderStyle:"dotted",borderWidth:`${te(a)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:r.colorText,fontWeight:"normal",fontSize:r.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:e}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:e}}})}},Wu=r=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:r.marginXS}),Yu=dr("Divider",r=>{const t=er(r,{dividerHorizontalWithTextGutterMargin:r.margin,dividerHorizontalGutterMargin:r.marginLG,sizePaddingEdgeHorizontal:0});return[Gu(t)]},Wu,{unitless:{orientationMargin:!0}});var Xu=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const qu=r=>{const{getPrefixCls:t,direction:e,divider:n}=u.useContext(_t),{prefixCls:a,type:i="horizontal",orientation:o="center",orientationMargin:s,className:c,rootClassName:d,children:p,dashed:h,variant:g="solid",plain:m,style:S}=r,b=Xu(r,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),f=t("divider",a),[v,y,x]=Yu(f),A=!!p,E=o==="left"&&s!=null,I=o==="right"&&s!=null,N=ne(f,n==null?void 0:n.className,y,x,`${f}-${i}`,{[`${f}-with-text`]:A,[`${f}-with-text-${o}`]:A,[`${f}-dashed`]:!!h,[`${f}-${g}`]:g!=="solid",[`${f}-plain`]:!!m,[`${f}-rtl`]:e==="rtl",[`${f}-no-default-orientation-margin-left`]:E,[`${f}-no-default-orientation-margin-right`]:I},c,d),O=u.useMemo(()=>typeof s=="number"?s:/^\d+$/.test(s)?Number(s):s,[s]),$=Object.assign(Object.assign({},E&&{marginLeft:O}),I&&{marginRight:O});return v(u.createElement("div",Object.assign({className:N,style:Object.assign(Object.assign({},n==null?void 0:n.style),S)},b,{role:"separator"}),p&&i!=="vertical"&&u.createElement("span",{className:`${f}-inner-text`,style:$},p)))};var Bi=function(t){return t?{left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth}:null},Fr=function(t){return t!==void 0?"".concat(t,"px"):void 0};function Ku(r){var t=r.prefixCls,e=r.containerRef,n=r.value,a=r.getValueIndex,i=r.motionName,o=r.onMotionStart,s=r.onMotionEnd,c=r.direction,d=u.useRef(null),p=u.useState(n),h=pe(p,2),g=h[0],m=h[1],S=function(B){var L,k=a(B),H=(L=e.current)===null||L===void 0?void 0:L.querySelectorAll(".".concat(t,"-item"))[k];return(H==null?void 0:H.offsetParent)&&H},b=u.useState(null),f=pe(b,2),v=f[0],y=f[1],x=u.useState(null),A=pe(x,2),E=A[0],I=A[1];va(function(){if(g!==n){var _=S(g),B=S(n),L=Bi(_),k=Bi(B);m(n),y(L),I(k),_&&B?o():s()}},[n]);var N=u.useMemo(function(){return Fr(c==="rtl"?-(v==null?void 0:v.right):v==null?void 0:v.left)},[c,v]),O=u.useMemo(function(){return Fr(c==="rtl"?-(E==null?void 0:E.right):E==null?void 0:E.left)},[c,E]),$=function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},P=function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},R=function(){y(null),I(null),s()};return!v||!E?null:u.createElement(mi,{visible:!0,motionName:i,motionAppear:!0,onAppearStart:$,onAppearActive:P,onVisibleChanged:R},function(_,B){var L=_.className,k=_.style,H=ce(ce({},k),{},{"--thumb-start-left":N,"--thumb-start-width":Fr(v==null?void 0:v.width),"--thumb-active-left":O,"--thumb-active-width":Fr(E==null?void 0:E.width)}),V={ref:ya(d,B),style:H,className:ne("".concat(t,"-thumb"),L)};return u.createElement("div",V)})}var Zu=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function Qu(r){if(typeof r.title<"u")return r.title;if(xr(r.label)!=="object"){var t;return(t=r.label)===null||t===void 0?void 0:t.toString()}}function Ju(r){return r.map(function(t){if(xr(t)==="object"&&t!==null){var e=Qu(t);return ce(ce({},t),{},{title:e})}return{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t}})}var ed=function(t){var e=t.prefixCls,n=t.className,a=t.disabled,i=t.checked,o=t.label,s=t.title,c=t.value,d=t.onChange,p=function(g){a||d(g,c)};return u.createElement("label",{className:ne(n,le({},"".concat(e,"-item-disabled"),a))},u.createElement("input",{className:"".concat(e,"-item-input"),type:"radio",disabled:a,checked:i,onChange:p}),u.createElement("div",{className:"".concat(e,"-item-label"),title:s},o))},td=u.forwardRef(function(r,t){var e,n,a=r.prefixCls,i=a===void 0?"rc-segmented":a,o=r.direction,s=r.options,c=s===void 0?[]:s,d=r.disabled,p=r.defaultValue,h=r.value,g=r.onChange,m=r.className,S=m===void 0?"":m,b=r.motionName,f=b===void 0?"thumb-motion":b,v=bt(r,Zu),y=u.useRef(null),x=u.useMemo(function(){return ya(y,t)},[y,t]),A=u.useMemo(function(){return Ju(c)},[c]),E=kt((e=A[0])===null||e===void 0?void 0:e.value,{value:h,defaultValue:p}),I=pe(E,2),N=I[0],O=I[1],$=u.useState(!1),P=pe($,2),R=P[0],_=P[1],B=function(H,V){d||(O(V),g==null||g(V))},L=oa(v,["children"]);return u.createElement("div",Le({},L,{className:ne(i,(n={},le(n,"".concat(i,"-rtl"),o==="rtl"),le(n,"".concat(i,"-disabled"),d),n),S),ref:x}),u.createElement("div",{className:"".concat(i,"-group")},u.createElement(Ku,{prefixCls:i,value:N,containerRef:y,motionName:"".concat(i,"-").concat(f),direction:o,getValueIndex:function(H){return A.findIndex(function(V){return V.value===H})},onMotionStart:function(){_(!0)},onMotionEnd:function(){_(!1)}}),A.map(function(k){return u.createElement(ed,Le({},k,{key:k.value,prefixCls:i,className:ne(k.className,"".concat(i,"-item"),le({},"".concat(i,"-item-selected"),k.value===N&&!R)),checked:k.value===N,onChange:B,disabled:!!d||!!k.disabled}))})))}),rd=td;function ji(r,t){return{[`${r}, ${r}:hover, ${r}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function Hi(r){return{backgroundColor:r.itemSelectedBg,boxShadow:r.boxShadowTertiary}}const nd=Object.assign({overflow:"hidden"},Ho),ad=r=>{const{componentCls:t}=r,e=r.calc(r.controlHeight).sub(r.calc(r.trackPadding).mul(2)).equal(),n=r.calc(r.controlHeightLG).sub(r.calc(r.trackPadding).mul(2)).equal(),a=r.calc(r.controlHeightSM).sub(r.calc(r.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yt(r)),{display:"inline-block",padding:r.trackPadding,color:r.itemColor,background:r.trackBg,borderRadius:r.borderRadius,transition:`all ${r.motionDurationMid} ${r.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${r.motionDurationMid} ${r.motionEaseInOut}`,borderRadius:r.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},Hi(r)),{color:r.itemSelectedColor}),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${r.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:r.itemHoverColor,"&::after":{backgroundColor:r.itemHoverBg}},[`&:active:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:r.itemHoverColor,"&::after":{backgroundColor:r.itemActiveBg}},"&-label":Object.assign({minHeight:e,lineHeight:te(e),padding:`0 ${te(r.segmentedPaddingHorizontal)}`},nd),"&-icon + *":{marginInlineStart:r.calc(r.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},Hi(r)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${te(r.paddingXXS)} 0`,borderRadius:r.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:r.borderRadiusLG,[`${t}-item-label`]:{minHeight:n,lineHeight:te(n),padding:`0 ${te(r.segmentedPaddingHorizontal)}`,fontSize:r.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:r.borderRadius}},[`&${t}-sm`]:{borderRadius:r.borderRadiusSM,[`${t}-item-label`]:{minHeight:a,lineHeight:te(a),padding:`0 ${te(r.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:r.borderRadiusXS}}}),ji(`&-disabled ${t}-item`,r)),ji(`${t}-item-disabled`,r)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${r.motionDurationSlow} ${r.motionEaseInOut}, width ${r.motionDurationSlow} ${r.motionEaseInOut}`,willChange:"transform, width"}})}},id=r=>{const{colorTextLabel:t,colorText:e,colorFillSecondary:n,colorBgElevated:a,colorFill:i,lineWidthBold:o,colorBgLayout:s}=r;return{trackPadding:o,trackBg:s,itemColor:t,itemHoverColor:e,itemHoverBg:n,itemSelectedBg:a,itemActiveBg:i,itemSelectedColor:e}},od=dr("Segmented",r=>{const{lineWidth:t,calc:e}=r,n=er(r,{segmentedPaddingHorizontal:e(r.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:e(r.controlPaddingHorizontalSM).sub(t).equal()});return[ad(n)]},id);var Vi=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};function sd(r){return typeof r=="object"&&!!(r!=null&&r.icon)}const ld=u.forwardRef((r,t)=>{const{prefixCls:e,className:n,rootClassName:a,block:i,options:o=[],size:s="middle",style:c}=r,d=Vi(r,["prefixCls","className","rootClassName","block","options","size","style"]),{getPrefixCls:p,direction:h,segmented:g}=u.useContext(_t),m=p("segmented",e),[S,b,f]=od(m),v=ma(s),y=u.useMemo(()=>o.map(E=>{if(sd(E)){const{icon:I,label:N}=E,O=Vi(E,["icon","label"]);return Object.assign(Object.assign({},O),{label:u.createElement(u.Fragment,null,u.createElement("span",{className:`${m}-item-icon`},I),N&&u.createElement("span",null,N))})}return E}),[o,m]),x=ne(n,a,g==null?void 0:g.className,{[`${m}-block`]:i,[`${m}-sm`]:v==="small",[`${m}-lg`]:v==="large"},b,f),A=Object.assign(Object.assign({},g==null?void 0:g.style),c);return S(u.createElement(rd,Object.assign({},d,{className:x,style:A,options:y,ref:t,prefixCls:m,direction:h})))}),cd=ld,gs=D.createContext({}),fs=D.createContext({}),St=r=>r instanceof Ft?r:new Ft(r),na=r=>Math.round(Number(r||0)),Si=r=>na(r.toHsb().a*100),aa=(r,t)=>{const e=r.toHsb();return e.a=1,St(e)},vs=(r,t)=>{const e=[{percent:0,color:r[0].color}].concat(gt(r),[{percent:100,color:r[r.length-1].color}]);for(let n=0;n<e.length-1;n+=1){const a=e[n].percent,i=e[n+1].percent,o=e[n].color,s=e[n+1].color;if(a<=t&&t<=i){const c=i-a;if(c===0)return o;const d=(t-a)/c*100,p=new Xt(o),h=new Xt(s);return p.mix(h,d).toRgbString()}}return""},ys=r=>{let{prefixCls:t,value:e,onChange:n}=r;const a=()=>{if(n&&e&&!e.cleared){const i=e.toHsb();i.a=0;const o=St(i);o.cleared=!0,n(o)}};return D.createElement("div",{className:`${t}-clear`,onClick:a})};var Mr;(function(r){r.hex="hex",r.rgb="rgb",r.hsb="hsb"})(Mr||(Mr={}));var ud={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},dd=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:ud}))},pd=u.forwardRef(dd);function ai(){return typeof BigInt=="function"}function bs(r){return!r&&r!==0&&!Number.isNaN(r)||!String(r).trim()}function _r(r){var t=r.trim(),e=t.startsWith("-");e&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var n=t||"0",a=n.split("."),i=a[0]||"0",o=a[1]||"0";i==="0"&&o==="0"&&(e=!1);var s=e?"-":"";return{negative:e,negativeStr:s,trimStr:n,integerStr:i,decimalStr:o,fullStr:"".concat(s).concat(n)}}function Mi(r){var t=String(r);return!Number.isNaN(Number(t))&&t.includes("e")}function Rr(r){var t=String(r);if(Mi(r)){var e=Number(t.slice(t.indexOf("e-")+2)),n=t.match(/\.(\d+)/);return n!=null&&n[1]&&(e+=n[1].length),e}return t.includes(".")&&Ci(t)?t.length-t.indexOf(".")-1:0}function Ma(r){var t=String(r);if(Mi(r)){if(r>Number.MAX_SAFE_INTEGER)return String(ai()?BigInt(r).toString():Number.MAX_SAFE_INTEGER);if(r<Number.MIN_SAFE_INTEGER)return String(ai()?BigInt(r).toString():Number.MIN_SAFE_INTEGER);t=r.toFixed(Rr(t))}return _r(t).fullStr}function Ci(r){return typeof r=="number"?!Number.isNaN(r):r?/^\s*-?\d+(\.\d+)?\s*$/.test(r)||/^\s*-?\d+\.\s*$/.test(r)||/^\s*-?\.\d+\s*$/.test(r):!1}var hd=function(){function r(t){if(ga(this,r),le(this,"origin",""),le(this,"negative",void 0),le(this,"integer",void 0),le(this,"decimal",void 0),le(this,"decimalLen",void 0),le(this,"empty",void 0),le(this,"nan",void 0),bs(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var e=t;if(Mi(e)&&(e=Number(e)),e=typeof e=="string"?e:Ma(e),Ci(e)){var n=_r(e);this.negative=n.negative;var a=n.trimStr.split(".");this.integer=BigInt(a[0]);var i=a[1]||"0";this.decimal=BigInt(i),this.decimalLen=i.length}else this.nan=!0}return fa(r,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var n="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(n)}},{key:"negate",value:function(){var e=new r(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,n,a){var i=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),o=this.alignDecimal(i),s=e.alignDecimal(i),c=n(o,s).toString(),d=a(i),p=_r(c),h=p.negativeStr,g=p.trimStr,m="".concat(h).concat(g.padStart(d+1,"0"));return new r("".concat(m.slice(0,-d),".").concat(m.slice(-d)))}},{key:"add",value:function(e){if(this.isInvalidate())return new r(e);var n=new r(e);return n.isInvalidate()?this:this.cal(n,function(a,i){return a+i},function(a){return a})}},{key:"multi",value:function(e){var n=new r(e);return this.isInvalidate()||n.isInvalidate()?new r(NaN):this.cal(n,function(a,i){return a*i},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(e==null?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":_r("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),r}(),md=function(){function r(t){if(ga(this,r),le(this,"origin",""),le(this,"number",void 0),le(this,"empty",void 0),bs(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return fa(r,[{key:"negate",value:function(){return new r(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new r(e);var n=Number(e);if(Number.isNaN(n))return this;var a=this.number+n;if(a>Number.MAX_SAFE_INTEGER)return new r(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new r(Number.MIN_SAFE_INTEGER);var i=Math.max(Rr(this.number),Rr(n));return new r(a.toFixed(i))}},{key:"multi",value:function(e){var n=Number(e);if(this.isInvalidate()||Number.isNaN(n))return new r(NaN);var a=this.number*n;if(a>Number.MAX_SAFE_INTEGER)return new r(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new r(Number.MIN_SAFE_INTEGER);var i=Math.max(Rr(this.number),Rr(n));return new r(a.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(e==null?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":Ma(this.number):this.origin}}]),r}();function Gt(r){return ai()?new hd(r):new md(r)}function ia(r,t,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(r==="")return"";var a=_r(r),i=a.negativeStr,o=a.integerStr,s=a.decimalStr,c="".concat(t).concat(s),d="".concat(i).concat(o);if(e>=0){var p=Number(s[e]);if(p>=5&&!n){var h=Gt(r).add("".concat(i,"0.").concat("0".repeat(e)).concat(10-p));return ia(h.toString(),t,e,n)}return e===0?d:"".concat(d).concat(t).concat(s.padEnd(e,"0").slice(0,e))}return c===".0"?d:"".concat(d).concat(c)}function gd(r,t){return typeof Proxy<"u"&&r?new Proxy(r,{get:function(n,a){if(t[a])return t[a];var i=n[a];return typeof i=="function"?i.bind(n):i}}):r}function fd(r,t){var e=u.useRef(null);function n(){try{var i=r.selectionStart,o=r.selectionEnd,s=r.value,c=s.substring(0,i),d=s.substring(o);e.current={start:i,end:o,value:s,beforeTxt:c,afterTxt:d}}catch{}}function a(){if(r&&e.current&&t)try{var i=r.value,o=e.current,s=o.beforeTxt,c=o.afterTxt,d=o.start,p=i.length;if(i.startsWith(s))p=s.length;else if(i.endsWith(c))p=i.length-e.current.afterTxt.length;else{var h=s[d-1],g=i.indexOf(h,d-1);g!==-1&&(p=g+1)}r.setSelectionRange(p,p)}catch(m){sa(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(m.message))}}return[n,a]}var vd=function(){var t=u.useState(!1),e=pe(t,2),n=e[0],a=e[1];return va(function(){a(El())},[]),n},yd=200,bd=600;function Sd(r){var t=r.prefixCls,e=r.upNode,n=r.downNode,a=r.upDisabled,i=r.downDisabled,o=r.onStep,s=u.useRef(),c=u.useRef([]),d=u.useRef();d.current=o;var p=function(){clearTimeout(s.current)},h=function(x,A){x.preventDefault(),p(),d.current(A);function E(){d.current(A),s.current=setTimeout(E,yd)}s.current=setTimeout(E,bd)};u.useEffect(function(){return function(){p(),c.current.forEach(function(y){return tr.cancel(y)})}},[]);var g=vd();if(g)return null;var m="".concat(t,"-handler"),S=ne(m,"".concat(m,"-up"),le({},"".concat(m,"-up-disabled"),a)),b=ne(m,"".concat(m,"-down"),le({},"".concat(m,"-down-disabled"),i)),f=function(){return c.current.push(tr(p))},v={unselectable:"on",role:"button",onMouseUp:f,onMouseLeave:f};return u.createElement("div",{className:"".concat(m,"-wrap")},u.createElement("span",Le({},v,{onMouseDown:function(x){h(x,!0)},"aria-label":"Increase Value","aria-disabled":a,className:S}),e||u.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),u.createElement("span",Le({},v,{onMouseDown:function(x){h(x,!1)},"aria-label":"Decrease Value","aria-disabled":i,className:b}),n||u.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Fi(r){var t=typeof r=="number"?Ma(r):_r(r).fullStr,e=t.includes(".");return e?_r(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:r+"0"}const Md=function(){var r=u.useRef(0),t=function(){tr.cancel(r.current)};return u.useEffect(function(){return t},[]),function(e){t(),r.current=tr(function(){e()})}};var Cd=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],Ad=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Ui=function(t,e){return t||e.isEmpty()?e.toString():e.toNumber()},Gi=function(t){var e=Gt(t);return e.isInvalidate()?null:e},Ed=u.forwardRef(function(r,t){var e=r.prefixCls,n=r.className,a=r.style,i=r.min,o=r.max,s=r.step,c=s===void 0?1:s,d=r.defaultValue,p=r.value,h=r.disabled,g=r.readOnly,m=r.upHandler,S=r.downHandler,b=r.keyboard,f=r.changeOnWheel,v=f===void 0?!1:f,y=r.controls,x=y===void 0?!0:y;r.classNames;var A=r.stringMode,E=r.parser,I=r.formatter,N=r.precision,O=r.decimalSeparator,$=r.onChange,P=r.onInput,R=r.onPressEnter,_=r.onStep,B=r.changeOnBlur,L=B===void 0?!0:B,k=r.domRef,H=bt(r,Cd),V="".concat(e,"-input"),K=u.useRef(null),q=u.useState(!1),ue=pe(q,2),G=ue[0],Z=ue[1],Q=u.useRef(!1),re=u.useRef(!1),Y=u.useRef(!1),ee=u.useState(function(){return Gt(p??d)}),se=pe(ee,2),U=se[0],W=se[1];function X(ae){p===void 0&&W(ae)}var ie=u.useCallback(function(ae,oe){if(!oe)return N>=0?N:Math.max(Rr(ae),Rr(c))},[N,c]),ye=u.useCallback(function(ae){var oe=String(ae);if(E)return E(oe);var Se=oe;return O&&(Se=Se.replace(O,".")),Se.replace(/[^\w.-]+/g,"")},[E,O]),_e=u.useRef(""),ze=u.useCallback(function(ae,oe){if(I)return I(ae,{userTyping:oe,input:String(_e.current)});var Se=typeof ae=="number"?Ma(ae):ae;if(!oe){var he=ie(Se,oe);if(Ci(Se)&&(O||he>=0)){var Nt=O||".";Se=ia(Se,Nt,he)}}return Se},[I,ie,O]),Oe=u.useState(function(){var ae=d??p;return U.isInvalidate()&&["string","number"].includes(xr(ae))?Number.isNaN(ae)?"":ae:ze(U.toString(),!1)}),Ze=pe(Oe,2),fe=Ze[0],Ae=Ze[1];_e.current=fe;function be(ae,oe){Ae(ze(ae.isInvalidate()?ae.toString(!1):ae.toString(!oe),oe))}var ke=u.useMemo(function(){return Gi(o)},[o,N]),$e=u.useMemo(function(){return Gi(i)},[i,N]),rt=u.useMemo(function(){return!ke||!U||U.isInvalidate()?!1:ke.lessEquals(U)},[ke,U]),He=u.useMemo(function(){return!$e||!U||U.isInvalidate()?!1:U.lessEquals($e)},[$e,U]),Ee=fd(K.current,G),Ie=pe(Ee,2),Xe=Ie[0],ht=Ie[1],Fe=function(oe){return ke&&!oe.lessEquals(ke)?ke:$e&&!$e.lessEquals(oe)?$e:null},Ce=function(oe){return!Fe(oe)},Qe=function(oe,Se){var he=oe,Nt=Ce(he)||he.isEmpty();if(!he.isEmpty()&&!Se&&(he=Fe(he)||he,Nt=!0),!g&&!h&&Nt){var Tt=he.toString(),Ct=ie(Tt,Se);return Ct>=0&&(he=Gt(ia(Tt,".",Ct)),Ce(he)||(he=Gt(ia(Tt,".",Ct,!0)))),he.equals(U)||(X(he),$==null||$(he.isEmpty()?null:Ui(A,he)),p===void 0&&be(he,Se)),he}return U},nt=Md(),Mt=function ae(oe){if(Xe(),_e.current=oe,Ae(oe),!re.current){var Se=ye(oe),he=Gt(Se);he.isNaN()||Qe(he,!0)}P==null||P(oe),nt(function(){var Nt=oe;E||(Nt=oe.replace(//g,".")),Nt!==oe&&ae(Nt)})},vt=function(){re.current=!0},qt=function(){re.current=!1,Mt(K.current.value)},et=function(oe){Mt(oe.target.value)},at=function(oe){var Se;if(!(oe&&rt||!oe&&He)){Q.current=!1;var he=Gt(Y.current?Fi(c):c);oe||(he=he.negate());var Nt=(U||Gt(0)).add(he.toString()),Tt=Qe(Nt,!1);_==null||_(Ui(A,Tt),{offset:Y.current?Fi(c):c,type:oe?"up":"down"}),(Se=K.current)===null||Se===void 0||Se.focus()}},yt=function(oe){var Se=Gt(ye(fe)),he;Se.isNaN()?he=Qe(U,oe):he=Qe(Se,oe),p!==void 0?be(U,!1):he.isNaN()||be(he,!1)},gr=function(){Q.current=!0},Kt=function(oe){var Se=oe.key,he=oe.shiftKey;Q.current=!0,Y.current=he,Se==="Enter"&&(re.current||(Q.current=!1),yt(!1),R==null||R(oe)),b!==!1&&!re.current&&["Up","ArrowUp","Down","ArrowDown"].includes(Se)&&(at(Se==="Up"||Se==="ArrowUp"),oe.preventDefault())},Ge=function(){Q.current=!1,Y.current=!1};u.useEffect(function(){if(v&&G){var ae=function(he){at(he.deltaY<0),he.preventDefault()},oe=K.current;if(oe)return oe.addEventListener("wheel",ae,{passive:!1}),function(){return oe.removeEventListener("wheel",ae)}}});var Be=function(){L&&yt(!1),Z(!1),Q.current=!1};return Ra(function(){U.isInvalidate()||be(U,!1)},[N,I]),Ra(function(){var ae=Gt(p);W(ae);var oe=Gt(ye(fe));(!ae.equals(oe)||!Q.current||I)&&be(ae,Q.current)},[p]),Ra(function(){I&&ht()},[fe]),u.createElement("div",{ref:k,className:ne(e,n,le(le(le(le(le({},"".concat(e,"-focused"),G),"".concat(e,"-disabled"),h),"".concat(e,"-readonly"),g),"".concat(e,"-not-a-number"),U.isNaN()),"".concat(e,"-out-of-range"),!U.isInvalidate()&&!Ce(U))),style:a,onFocus:function(){Z(!0)},onBlur:Be,onKeyDown:Kt,onKeyUp:Ge,onCompositionStart:vt,onCompositionEnd:qt,onBeforeInput:gr},x&&u.createElement(Sd,{prefixCls:e,upNode:m,downNode:S,upDisabled:rt,downDisabled:He,onStep:at}),u.createElement("div",{className:"".concat(V,"-wrap")},u.createElement("input",Le({autoComplete:"off",role:"spinbutton","aria-valuemin":i,"aria-valuemax":o,"aria-valuenow":U.isInvalidate()?null:U.toString(),step:c},H,{ref:ya(K,t),className:V,value:fe,onChange:et,disabled:h,readOnly:g}))))}),xd=u.forwardRef(function(r,t){var e=r.disabled,n=r.style,a=r.prefixCls,i=a===void 0?"rc-input-number":a,o=r.value,s=r.prefix,c=r.suffix,d=r.addonBefore,p=r.addonAfter,h=r.className,g=r.classNames,m=bt(r,Ad),S=u.useRef(null),b=u.useRef(null),f=u.useRef(null),v=function(x){f.current&&Zl(f.current,x)};return u.useImperativeHandle(t,function(){return gd(f.current,{nativeElement:S.current.nativeElement||b.current})}),u.createElement(Kl,{className:h,triggerFocus:v,prefixCls:i,value:o,disabled:e,style:n,prefix:s,suffix:c,addonAfter:p,addonBefore:d,classNames:g,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:S},u.createElement(Ed,Le({prefixCls:i,disabled:e,ref:f,domRef:b,className:g==null?void 0:g.input},m)))});const wd=r=>{var t;const e=(t=r.handleVisible)!==null&&t!==void 0?t:"auto";return Object.assign(Object.assign({},Ql(r)),{controlWidth:90,handleWidth:r.controlHeightSM-r.lineWidth*2,handleFontSize:r.fontSize/2,handleVisible:e,handleActiveBg:r.colorFillAlter,handleBg:r.colorBgContainer,filledHandleBg:new Qt(r.colorFillSecondary).onBackground(r.colorBgContainer).toHexString(),handleHoverColor:r.colorPrimary,handleBorderColor:r.colorBorder,handleOpacity:e===!0?1:0})},Wi=(r,t)=>{let{componentCls:e,borderRadiusSM:n,borderRadiusLG:a}=r;const i=t==="lg"?a:n;return{[`&-${t}`]:{[`${e}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${e}-handler-up`]:{borderStartEndRadius:i},[`${e}-handler-down`]:{borderEndEndRadius:i}}}},Nd=r=>{const{componentCls:t,lineWidth:e,lineType:n,borderRadius:a,inputFontSizeSM:i,inputFontSizeLG:o,controlHeightLG:s,controlHeightSM:c,colorError:d,paddingInlineSM:p,paddingBlockSM:h,paddingBlockLG:g,paddingInlineLG:m,colorTextDescription:S,motionDurationMid:b,handleHoverColor:f,handleOpacity:v,paddingInline:y,paddingBlock:x,handleBg:A,handleActiveBg:E,colorTextDisabled:I,borderRadiusSM:N,borderRadiusLG:O,controlWidth:$,handleBorderColor:P,filledHandleBg:R,lineHeightLG:_,calc:B}=r;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yt(r)),Yo(r)),{display:"inline-block",width:$,margin:0,padding:0,borderRadius:a}),ec(r,{[`${t}-handler-wrap`]:{background:A,[`${t}-handler-down`]:{borderBlockStart:`${te(e)} ${n} ${P}`}}})),tc(r,{[`${t}-handler-wrap`]:{background:R,[`${t}-handler-down`]:{borderBlockStart:`${te(e)} ${n} ${P}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:A}}})),rc(r)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:o,lineHeight:_,borderRadius:O,[`input${t}-input`]:{height:B(s).sub(B(e).mul(2)).equal(),padding:`${te(g)} ${te(m)}`}},"&-sm":{padding:0,fontSize:i,borderRadius:N,[`input${t}-input`]:{height:B(c).sub(B(e).mul(2)).equal(),padding:`${te(h)} ${te(p)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:d}}},"&-group":Object.assign(Object.assign(Object.assign({},Yt(r)),ac(r)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:O,fontSize:r.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:N}}},ic(r)),oc(r)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Yt(r)),{width:"100%",padding:`${te(x)} ${te(y)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:a,outline:0,transition:`all ${b} linear`,appearance:"textfield",fontSize:"inherit"}),nc(r.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:r.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:0,opacity:v,height:"100%",borderStartStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${b}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:r.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:S,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${te(e)} ${n} ${P}`,transition:`all ${b} linear`,"&:active":{background:E},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:f}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},zo()),{color:S,transition:`all ${b} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:a},[`${t}-handler-down`]:{borderEndEndRadius:a}},Wi(r,"lg")),Wi(r,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:I}})}]},Pd=r=>{const{componentCls:t,paddingBlock:e,paddingInline:n,inputAffixPadding:a,controlWidth:i,borderRadiusLG:o,borderRadiusSM:s,paddingInlineLG:c,paddingInlineSM:d,paddingBlockLG:p,paddingBlockSM:h,motionDurationMid:g}=r;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${te(e)} 0`}},Yo(r)),{position:"relative",display:"inline-flex",alignItems:"center",width:i,padding:0,paddingInlineStart:n,"&-lg":{borderRadius:o,paddingInlineStart:c,[`input${t}-input`]:{padding:`${te(p)} 0`}},"&-sm":{borderRadius:s,paddingInlineStart:d,[`input${t}-input`]:{padding:`${te(h)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:a},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:n,marginInlineStart:a,transition:`margin ${g}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:r.handleWidth,opacity:1},[`&:hover ${t}-suffix`]:{marginInlineEnd:r.calc(r.handleWidth).add(n).equal()}})}},Od=dr("InputNumber",r=>{const t=er(r,Jl(r));return[Nd(t),Pd(t),Vo(t)]},wd,{unitless:{handleOpacity:!0}});var kd=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const Ss=u.forwardRef((r,t)=>{const{getPrefixCls:e,direction:n}=u.useContext(_t),a=u.useRef(null);u.useImperativeHandle(t,()=>a.current);const{className:i,rootClassName:o,size:s,disabled:c,prefixCls:d,addonBefore:p,addonAfter:h,prefix:g,suffix:m,bordered:S,readOnly:b,status:f,controls:v,variant:y}=r,x=kd(r,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),A=e("input-number",d),E=rn(A),[I,N,O]=Od(A,E),{compactSize:$,compactItemClassnames:P}=Fo(A,n);let R=u.createElement(pd,{className:`${A}-handler-up-inner`}),_=u.createElement(xl,{className:`${A}-handler-down-inner`});const B=typeof v=="boolean"?v:void 0;typeof v=="object"&&(R=typeof v.upIcon>"u"?R:u.createElement("span",{className:`${A}-handler-up-inner`},v.upIcon),_=typeof v.downIcon>"u"?_:u.createElement("span",{className:`${A}-handler-down-inner`},v.downIcon));const{hasFeedback:L,status:k,isFormItemInput:H,feedbackIcon:V}=u.useContext(hi),K=lc(k,f),q=ma(U=>{var W;return(W=s??$)!==null&&W!==void 0?W:U}),ue=u.useContext(ha),G=c??ue,[Z,Q]=sc("inputNumber",y,S),re=L&&u.createElement(u.Fragment,null,V),Y=ne({[`${A}-lg`]:q==="large",[`${A}-sm`]:q==="small",[`${A}-rtl`]:n==="rtl",[`${A}-in-form-item`]:H},N),ee=`${A}-group`,se=u.createElement(xd,Object.assign({ref:a,disabled:G,className:ne(O,E,i,o,P),upHandler:R,downHandler:_,prefixCls:A,readOnly:b,controls:B,prefix:g,suffix:re||m,addonBefore:p&&u.createElement(ri,{form:!0,space:!0},p),addonAfter:h&&u.createElement(ri,{form:!0,space:!0},h),classNames:{input:Y,variant:ne({[`${A}-${Z}`]:Q},ni(A,K,L)),affixWrapper:ne({[`${A}-affix-wrapper-sm`]:q==="small",[`${A}-affix-wrapper-lg`]:q==="large",[`${A}-affix-wrapper-rtl`]:n==="rtl"},N),wrapper:ne({[`${ee}-rtl`]:n==="rtl"},N),groupWrapper:ne({[`${A}-group-wrapper-sm`]:q==="small",[`${A}-group-wrapper-lg`]:q==="large",[`${A}-group-wrapper-rtl`]:n==="rtl",[`${A}-group-wrapper-${Z}`]:Q},ni(`${A}-group-wrapper`,K,L),N)}},x));return I(se)}),Ai=Ss,Id=r=>u.createElement(wl,{theme:{components:{InputNumber:{handleVisible:!0}}}},u.createElement(Ss,Object.assign({},r)));Ai._InternalPanelDoNotUseOrYouWillBeFired=Id;const Tr=r=>{let{prefixCls:t,min:e=0,max:n=100,value:a,onChange:i,className:o,formatter:s}=r;const c=`${t}-steppers`,[d,p]=u.useState(a);return u.useEffect(()=>{Number.isNaN(a)||p(a)},[a]),D.createElement(Ai,{className:ne(c,o),min:e,max:n,value:d,formatter:s,size:"small",onChange:h=>{a||p(h||0),i==null||i(h)}})},Rd=r=>{let{prefixCls:t,value:e,onChange:n}=r;const a=`${t}-alpha-input`,[i,o]=u.useState(St(e||"#000"));u.useEffect(()=>{e&&o(e)},[e]);const s=c=>{const d=i.toHsb();d.a=(c||0)/100;const p=St(d);e||o(p),n==null||n(p)};return D.createElement(Tr,{value:Si(i),prefixCls:t,formatter:c=>`${c}%`,className:a,onChange:s})},_d=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,Td=r=>_d.test(`#${r}`),$d=r=>{let{prefixCls:t,value:e,onChange:n}=r;const a=`${t}-hex-input`,[i,o]=u.useState(()=>e?vn(e.toHexString()):void 0);u.useEffect(()=>{e&&o(vn(e.toHexString()))},[e]);const s=c=>{const d=c.target.value;o(vn(d)),Td(vn(d,!0))&&(n==null||n(St(d)))};return D.createElement(Sa,{className:a,value:i,prefix:"#",onChange:s,size:"small"})},Ld=r=>{let{prefixCls:t,value:e,onChange:n}=r;const a=`${t}-hsb-input`,[i,o]=u.useState(St(e||"#000"));u.useEffect(()=>{e&&o(e)},[e]);const s=(c,d)=>{const p=i.toHsb();p[d]=d==="h"?c:(c||0)/100;const h=St(p);e||o(h),n==null||n(h)};return D.createElement("div",{className:a},D.createElement(Tr,{max:360,min:0,value:Number(i.toHsb().h),prefixCls:t,className:a,formatter:c=>na(c||0).toString(),onChange:c=>s(Number(c),"h")}),D.createElement(Tr,{max:100,min:0,value:Number(i.toHsb().s)*100,prefixCls:t,className:a,formatter:c=>`${na(c||0)}%`,onChange:c=>s(Number(c),"s")}),D.createElement(Tr,{max:100,min:0,value:Number(i.toHsb().b)*100,prefixCls:t,className:a,formatter:c=>`${na(c||0)}%`,onChange:c=>s(Number(c),"b")}))},Dd=r=>{let{prefixCls:t,value:e,onChange:n}=r;const a=`${t}-rgb-input`,[i,o]=u.useState(St(e||"#000"));u.useEffect(()=>{e&&o(e)},[e]);const s=(c,d)=>{const p=i.toRgb();p[d]=c||0;const h=St(p);e||o(h),n==null||n(h)};return D.createElement("div",{className:a},D.createElement(Tr,{max:255,min:0,value:Number(i.toRgb().r),prefixCls:t,className:a,onChange:c=>s(Number(c),"r")}),D.createElement(Tr,{max:255,min:0,value:Number(i.toRgb().g),prefixCls:t,className:a,onChange:c=>s(Number(c),"g")}),D.createElement(Tr,{max:255,min:0,value:Number(i.toRgb().b),prefixCls:t,className:a,onChange:c=>s(Number(c),"b")}))},zd=[Mr.hex,Mr.hsb,Mr.rgb].map(r=>({value:r,label:r.toLocaleUpperCase()})),Bd=r=>{const{prefixCls:t,format:e,value:n,disabledAlpha:a,onFormatChange:i,onChange:o}=r,[s,c]=kt(Mr.hex,{value:e,onChange:i}),d=`${t}-input`,p=g=>{c(g)},h=u.useMemo(()=>{const g={value:n,prefixCls:t,onChange:o};switch(s){case Mr.hsb:return D.createElement(Ld,Object.assign({},g));case Mr.rgb:return D.createElement(Dd,Object.assign({},g));default:return D.createElement($d,Object.assign({},g))}},[s,t,n,o]);return D.createElement("div",{className:`${d}-container`},D.createElement(Xo,{value:s,variant:"borderless",getPopupContainer:g=>g,popupMatchSelectWidth:68,placement:"bottomRight",onChange:p,className:`${t}-format-select`,size:"small",options:zd}),D.createElement("div",{className:d},h),!a&&D.createElement(Rd,{prefixCls:t,value:n,onChange:o}))};function ii(r,t,e){return(r-t)/(e-t)}function Ei(r,t,e,n){var a=ii(t,e,n),i={};switch(r){case"rtl":i.right="".concat(a*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(a*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(a*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(a*100,"%"),i.transform="translateX(-50%)";break}return i}function Ir(r,t){return Array.isArray(r)?r[t]:r}var Dr=u.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),Ms=u.createContext({}),jd=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Yi=u.forwardRef(function(r,t){var e=r.prefixCls,n=r.value,a=r.valueIndex,i=r.onStartMove,o=r.onDelete,s=r.style,c=r.render,d=r.dragging,p=r.draggingDelete,h=r.onOffsetChange,g=r.onChangeComplete,m=r.onFocus,S=r.onMouseEnter,b=bt(r,jd),f=u.useContext(Dr),v=f.min,y=f.max,x=f.direction,A=f.disabled,E=f.keyboard,I=f.range,N=f.tabIndex,O=f.ariaLabelForHandle,$=f.ariaLabelledByForHandle,P=f.ariaRequired,R=f.ariaValueTextFormatterForHandle,_=f.styles,B=f.classNames,L="".concat(e,"-handle"),k=function(Y){A||i(Y,a)},H=function(Y){m==null||m(Y,a)},V=function(Y){S(Y,a)},K=function(Y){if(!A&&E){var ee=null;switch(Y.which||Y.keyCode){case ot.LEFT:ee=x==="ltr"||x==="btt"?-1:1;break;case ot.RIGHT:ee=x==="ltr"||x==="btt"?1:-1;break;case ot.UP:ee=x!=="ttb"?1:-1;break;case ot.DOWN:ee=x!=="ttb"?-1:1;break;case ot.HOME:ee="min";break;case ot.END:ee="max";break;case ot.PAGE_UP:ee=2;break;case ot.PAGE_DOWN:ee=-2;break;case ot.BACKSPACE:case ot.DELETE:o(a);break}ee!==null&&(Y.preventDefault(),h(ee,a))}},q=function(Y){switch(Y.which||Y.keyCode){case ot.LEFT:case ot.RIGHT:case ot.UP:case ot.DOWN:case ot.HOME:case ot.END:case ot.PAGE_UP:case ot.PAGE_DOWN:g==null||g();break}},ue=Ei(x,n,v,y),G={};if(a!==null){var Z;G={tabIndex:A?null:Ir(N,a),role:"slider","aria-valuemin":v,"aria-valuemax":y,"aria-valuenow":n,"aria-disabled":A,"aria-label":Ir(O,a),"aria-labelledby":Ir($,a),"aria-required":Ir(P,a),"aria-valuetext":(Z=Ir(R,a))===null||Z===void 0?void 0:Z(n),"aria-orientation":x==="ltr"||x==="rtl"?"horizontal":"vertical",onMouseDown:k,onTouchStart:k,onFocus:H,onMouseEnter:V,onKeyDown:K,onKeyUp:q}}var Q=u.createElement("div",Le({ref:t,className:ne(L,le(le(le({},"".concat(L,"-").concat(a+1),a!==null&&I),"".concat(L,"-dragging"),d),"".concat(L,"-dragging-delete"),p),B.handle),style:ce(ce(ce({},ue),s),_.handle)},G,b));return c&&(Q=c(Q,{index:a,prefixCls:e,value:n,dragging:d,draggingDelete:p})),Q}),Hd=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Vd=u.forwardRef(function(r,t){var e=r.prefixCls,n=r.style,a=r.onStartMove,i=r.onOffsetChange,o=r.values,s=r.handleRender,c=r.activeHandleRender,d=r.draggingIndex,p=r.draggingDelete,h=r.onFocus,g=bt(r,Hd),m=u.useRef({}),S=u.useState(!1),b=pe(S,2),f=b[0],v=b[1],y=u.useState(-1),x=pe(y,2),A=x[0],E=x[1],I=function(R){E(R),v(!0)},N=function(R,_){I(_),h==null||h(R)},O=function(R,_){I(_)};u.useImperativeHandle(t,function(){return{focus:function(R){var _;(_=m.current[R])===null||_===void 0||_.focus()},hideHelp:function(){Nl.flushSync(function(){v(!1)})}}});var $=ce({prefixCls:e,onStartMove:a,onOffsetChange:i,render:s,onFocus:N,onMouseEnter:O},g);return u.createElement(u.Fragment,null,o.map(function(P,R){var _=d===R;return u.createElement(Yi,Le({ref:function(L){L?m.current[R]=L:delete m.current[R]},dragging:_,draggingDelete:_&&p,style:Ir(n,R),key:R,value:P,valueIndex:R},$))}),c&&f&&u.createElement(Yi,Le({key:"a11y"},$,{value:o[A],valueIndex:null,dragging:d!==-1,draggingDelete:p,render:c,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),Fd=function(t){var e=t.prefixCls,n=t.style,a=t.children,i=t.value,o=t.onClick,s=u.useContext(Dr),c=s.min,d=s.max,p=s.direction,h=s.includedStart,g=s.includedEnd,m=s.included,S="".concat(e,"-text"),b=Ei(p,i,c,d);return u.createElement("span",{className:ne(S,le({},"".concat(S,"-active"),m&&h<=i&&i<=g)),style:ce(ce({},b),n),onMouseDown:function(v){v.stopPropagation()},onClick:function(){o(i)}},a)},Ud=function(t){var e=t.prefixCls,n=t.marks,a=t.onClick,i="".concat(e,"-mark");return n.length?u.createElement("div",{className:i},n.map(function(o){var s=o.value,c=o.style,d=o.label;return u.createElement(Fd,{key:s,prefixCls:i,style:c,value:s,onClick:a},d)})):null},Gd=function(t){var e=t.prefixCls,n=t.value,a=t.style,i=t.activeStyle,o=u.useContext(Dr),s=o.min,c=o.max,d=o.direction,p=o.included,h=o.includedStart,g=o.includedEnd,m="".concat(e,"-dot"),S=p&&h<=n&&n<=g,b=ce(ce({},Ei(d,n,s,c)),typeof a=="function"?a(n):a);return S&&(b=ce(ce({},b),typeof i=="function"?i(n):i)),u.createElement("span",{className:ne(m,le({},"".concat(m,"-active"),S)),style:b})},Wd=function(t){var e=t.prefixCls,n=t.marks,a=t.dots,i=t.style,o=t.activeStyle,s=u.useContext(Dr),c=s.min,d=s.max,p=s.step,h=u.useMemo(function(){var g=new Set;if(n.forEach(function(S){g.add(S.value)}),a&&p!==null)for(var m=c;m<=d;)g.add(m),m+=p;return Array.from(g)},[c,d,p,a,n]);return u.createElement("div",{className:"".concat(e,"-step")},h.map(function(g){return u.createElement(Gd,{prefixCls:e,key:g,value:g,style:i,activeStyle:o})}))},Xi=function(t){var e=t.prefixCls,n=t.style,a=t.start,i=t.end,o=t.index,s=t.onStartMove,c=t.replaceCls,d=u.useContext(Dr),p=d.direction,h=d.min,g=d.max,m=d.disabled,S=d.range,b=d.classNames,f="".concat(e,"-track"),v=ii(a,h,g),y=ii(i,h,g),x=function(N){!m&&s&&s(N,-1)},A={};switch(p){case"rtl":A.right="".concat(v*100,"%"),A.width="".concat(y*100-v*100,"%");break;case"btt":A.bottom="".concat(v*100,"%"),A.height="".concat(y*100-v*100,"%");break;case"ttb":A.top="".concat(v*100,"%"),A.height="".concat(y*100-v*100,"%");break;default:A.left="".concat(v*100,"%"),A.width="".concat(y*100-v*100,"%")}var E=c||ne(f,le(le({},"".concat(f,"-").concat(o+1),o!==null&&S),"".concat(e,"-track-draggable"),s),b.track);return u.createElement("div",{className:E,style:ce(ce({},A),n),onMouseDown:x,onTouchStart:x})},Yd=function(t){var e=t.prefixCls,n=t.style,a=t.values,i=t.startPoint,o=t.onStartMove,s=u.useContext(Dr),c=s.included,d=s.range,p=s.min,h=s.styles,g=s.classNames,m=u.useMemo(function(){if(!d){if(a.length===0)return[];var b=i??p,f=a[0];return[{start:Math.min(b,f),end:Math.max(b,f)}]}for(var v=[],y=0;y<a.length-1;y+=1)v.push({start:a[y],end:a[y+1]});return v},[a,d,i,p]);if(!c)return null;var S=m!=null&&m.length&&(g.tracks||h.tracks)?u.createElement(Xi,{index:null,prefixCls:e,start:m[0].start,end:m[m.length-1].end,replaceCls:ne(g.tracks,"".concat(e,"-tracks")),style:h.tracks}):null;return u.createElement(u.Fragment,null,S,m.map(function(b,f){var v=b.start,y=b.end;return u.createElement(Xi,{index:f,prefixCls:e,style:ce(ce({},Ir(n,f)),h.track),start:v,end:y,key:f,onStartMove:o})}))},Xd=130;function qi(r){var t="targetTouches"in r?r.targetTouches[0]:r;return{pageX:t.pageX,pageY:t.pageY}}function qd(r,t,e,n,a,i,o,s,c,d,p){var h=u.useState(null),g=pe(h,2),m=g[0],S=g[1],b=u.useState(-1),f=pe(b,2),v=f[0],y=f[1],x=u.useState(!1),A=pe(x,2),E=A[0],I=A[1],N=u.useState(e),O=pe(N,2),$=O[0],P=O[1],R=u.useState(e),_=pe(R,2),B=_[0],L=_[1],k=u.useRef(null),H=u.useRef(null),V=u.useRef(null),K=u.useContext(Ms),q=K.onDragStart,ue=K.onDragChange;va(function(){v===-1&&P(e)},[e,v]),u.useEffect(function(){return function(){document.removeEventListener("mousemove",k.current),document.removeEventListener("mouseup",H.current),V.current&&(V.current.removeEventListener("touchmove",k.current),V.current.removeEventListener("touchend",H.current))}},[]);var G=function(ee,se,U){se!==void 0&&S(se),P(ee);var W=ee;U&&(W=ee.filter(function(X,ie){return ie!==v})),o(W),ue&&ue({rawValues:ee,deleteIndex:U?v:-1,draggingIndex:v,draggingValue:se})},Z=Zt(function(Y,ee,se){if(Y===-1){var U=B[0],W=B[B.length-1],X=n-U,ie=a-W,ye=ee*(a-n);ye=Math.max(ye,X),ye=Math.min(ye,ie);var _e=i(U+ye);ye=_e-U;var ze=B.map(function(Ae){return Ae+ye});G(ze)}else{var Oe=(a-n)*ee,Ze=gt($);Ze[Y]=B[Y];var fe=c(Ze,Oe,Y,"dist");G(fe.values,fe.value,se)}}),Q=function(ee,se,U){ee.stopPropagation();var W=U||e,X=W[se];y(se),S(X),L(W),P(W),I(!1);var ie=qi(ee),ye=ie.pageX,_e=ie.pageY,ze=!1;q&&q({rawValues:W,draggingIndex:se,draggingValue:X});var Oe=function(Ae){Ae.preventDefault();var be=qi(Ae),ke=be.pageX,$e=be.pageY,rt=ke-ye,He=$e-_e,Ee=r.current.getBoundingClientRect(),Ie=Ee.width,Xe=Ee.height,ht,Fe;switch(t){case"btt":ht=-He/Xe,Fe=rt;break;case"ttb":ht=He/Xe,Fe=rt;break;case"rtl":ht=-rt/Ie,Fe=He;break;default:ht=rt/Ie,Fe=He}ze=d?Math.abs(Fe)>Xd&&p<$.length:!1,I(ze),Z(se,ht,ze)},Ze=function fe(Ae){Ae.preventDefault(),document.removeEventListener("mouseup",fe),document.removeEventListener("mousemove",Oe),V.current&&(V.current.removeEventListener("touchmove",k.current),V.current.removeEventListener("touchend",H.current)),k.current=null,H.current=null,V.current=null,s(ze),y(-1),I(!1)};document.addEventListener("mouseup",Ze),document.addEventListener("mousemove",Oe),ee.currentTarget.addEventListener("touchend",Ze),ee.currentTarget.addEventListener("touchmove",Oe),k.current=Oe,H.current=Ze,V.current=ee.currentTarget},re=u.useMemo(function(){var Y=gt(e).sort(function(X,ie){return X-ie}),ee=gt($).sort(function(X,ie){return X-ie}),se={};ee.forEach(function(X){se[X]=(se[X]||0)+1}),Y.forEach(function(X){se[X]=(se[X]||0)-1});var U=d?1:0,W=Object.values(se).reduce(function(X,ie){return X+Math.abs(ie)},0);return W<=U?$:e},[e,$,d]);return[v,m,E,re,Q]}function Kd(r,t,e,n,a,i){var o=u.useCallback(function(m){return Math.max(r,Math.min(t,m))},[r,t]),s=u.useCallback(function(m){if(e!==null){var S=r+Math.round((o(m)-r)/e)*e,b=function(x){return(String(x).split(".")[1]||"").length},f=Math.max(b(e),b(t),b(r)),v=Number(S.toFixed(f));return r<=v&&v<=t?v:null}return null},[e,r,t,o]),c=u.useCallback(function(m){var S=o(m),b=n.map(function(y){return y.value});e!==null&&b.push(s(m)),b.push(r,t);var f=b[0],v=t-r;return b.forEach(function(y){var x=Math.abs(S-y);x<=v&&(f=y,v=x)}),f},[r,t,n,e,o,s]),d=function m(S,b,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof b=="number"){var y,x=S[f],A=x+b,E=[];n.forEach(function(P){E.push(P.value)}),E.push(r,t),E.push(s(x));var I=b>0?1:-1;v==="unit"?E.push(s(x+I*e)):E.push(s(A)),E=E.filter(function(P){return P!==null}).filter(function(P){return b<0?P<=x:P>=x}),v==="unit"&&(E=E.filter(function(P){return P!==x}));var N=v==="unit"?x:A;y=E[0];var O=Math.abs(y-N);if(E.forEach(function(P){var R=Math.abs(P-N);R<O&&(y=P,O=R)}),y===void 0)return b<0?r:t;if(v==="dist")return y;if(Math.abs(b)>1){var $=gt(S);return $[f]=y,m($,b-I,f,v)}return y}else{if(b==="min")return r;if(b==="max")return t}},p=function(S,b,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",y=S[f],x=d(S,b,f,v);return{value:x,changed:x!==y}},h=function(S){return i===null&&S===0||typeof i=="number"&&S<i},g=function(S,b,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",y=S.map(c),x=y[f],A=d(y,b,f,v);if(y[f]=A,a===!1){var E=i||0;f>0&&y[f-1]!==x&&(y[f]=Math.max(y[f],y[f-1]+E)),f<y.length-1&&y[f+1]!==x&&(y[f]=Math.min(y[f],y[f+1]-E))}else if(typeof i=="number"||i===null){for(var I=f+1;I<y.length;I+=1)for(var N=!0;h(y[I]-y[I-1])&&N;){var O=p(y,1,I);y[I]=O.value,N=O.changed}for(var $=f;$>0;$-=1)for(var P=!0;h(y[$]-y[$-1])&&P;){var R=p(y,-1,$-1);y[$-1]=R.value,P=R.changed}for(var _=y.length-1;_>0;_-=1)for(var B=!0;h(y[_]-y[_-1])&&B;){var L=p(y,-1,_-1);y[_-1]=L.value,B=L.changed}for(var k=0;k<y.length-1;k+=1)for(var H=!0;h(y[k+1]-y[k])&&H;){var V=p(y,1,k+1);y[k+1]=V.value,H=V.changed}}return{value:y[f],values:y}};return[c,g]}function Zd(r){return u.useMemo(function(){if(r===!0||!r)return[!!r,!1,!1,0];var t=r.editable,e=r.draggableTrack,n=r.minCount,a=r.maxCount;return[!0,t,!t&&e,n||0,a]},[r])}var Qd=u.forwardRef(function(r,t){var e=r.prefixCls,n=e===void 0?"rc-slider":e,a=r.className,i=r.style,o=r.classNames,s=r.styles,c=r.id,d=r.disabled,p=d===void 0?!1:d,h=r.keyboard,g=h===void 0?!0:h,m=r.autoFocus,S=r.onFocus,b=r.onBlur,f=r.min,v=f===void 0?0:f,y=r.max,x=y===void 0?100:y,A=r.step,E=A===void 0?1:A,I=r.value,N=r.defaultValue,O=r.range,$=r.count,P=r.onChange,R=r.onBeforeChange,_=r.onAfterChange,B=r.onChangeComplete,L=r.allowCross,k=L===void 0?!0:L,H=r.pushable,V=H===void 0?!1:H,K=r.reverse,q=r.vertical,ue=r.included,G=ue===void 0?!0:ue,Z=r.startPoint,Q=r.trackStyle,re=r.handleStyle,Y=r.railStyle,ee=r.dotStyle,se=r.activeDotStyle,U=r.marks,W=r.dots,X=r.handleRender,ie=r.activeHandleRender,ye=r.track,_e=r.tabIndex,ze=_e===void 0?0:_e,Oe=r.ariaLabelForHandle,Ze=r.ariaLabelledByForHandle,fe=r.ariaRequired,Ae=r.ariaValueTextFormatterForHandle,be=u.useRef(null),ke=u.useRef(null),$e=u.useMemo(function(){return q?K?"ttb":"btt":K?"rtl":"ltr"},[K,q]),rt=Zd(O),He=pe(rt,5),Ee=He[0],Ie=He[1],Xe=He[2],ht=He[3],Fe=He[4],Ce=u.useMemo(function(){return isFinite(v)?v:0},[v]),Qe=u.useMemo(function(){return isFinite(x)?x:100},[x]),nt=u.useMemo(function(){return E!==null&&E<=0?1:E},[E]),Mt=u.useMemo(function(){return typeof V=="boolean"?V?nt:!1:V>=0?V:!1},[V,nt]),vt=u.useMemo(function(){return Object.keys(U||{}).map(function(je){var w=U[je],T={value:Number(je)};return w&&xr(w)==="object"&&!u.isValidElement(w)&&("label"in w||"style"in w)?(T.style=w.style,T.label=w.label):T.label=w,T}).filter(function(je){var w=je.label;return w||typeof w=="number"}).sort(function(je,w){return je.value-w.value})},[U]),qt=Kd(Ce,Qe,nt,vt,k,Mt),et=pe(qt,2),at=et[0],yt=et[1],gr=kt(N,{value:I}),Kt=pe(gr,2),Ge=Kt[0],Be=Kt[1],ae=u.useMemo(function(){var je=Ge==null?[]:Array.isArray(Ge)?Ge:[Ge],w=pe(je,1),T=w[0],F=T===void 0?Ce:T,J=Ge===null?[]:[F];if(Ee){if(J=gt(je),$||Ge===void 0){var Te=$>=0?$+1:2;for(J=J.slice(0,Te);J.length<Te;){var ge;J.push((ge=J[J.length-1])!==null&&ge!==void 0?ge:Ce)}}J.sort(function(De,Ve){return De-Ve})}return J.forEach(function(De,Ve){J[Ve]=at(De)}),J},[Ge,Ee,Ce,$,at]),oe=function(w){return Ee?w:w[0]},Se=Zt(function(je){var w=gt(je).sort(function(T,F){return T-F});P&&!Uo(w,ae,!0)&&P(oe(w)),Be(w)}),he=Zt(function(je){je&&be.current.hideHelp();var w=oe(ae);_==null||_(w),sa(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),B==null||B(w)}),Nt=function(w){if(!(p||!Ie||ae.length<=ht)){var T=gt(ae);T.splice(w,1),R==null||R(oe(T)),Se(T);var F=Math.max(0,w-1);be.current.hideHelp(),be.current.focus(F)}},Tt=qd(ke,$e,ae,Ce,Qe,at,Se,he,yt,Ie,ht),Ct=pe(Tt,5),sn=Ct[0],In=Ct[1],Pa=Ct[2],ln=Ct[3],cn=Ct[4],un=function(w,T){if(!p){var F=gt(ae),J=0,Te=0,ge=Qe-Ce;ae.forEach(function(We,At){var Lt=Math.abs(w-We);Lt<=ge&&(ge=Lt,J=At),We<w&&(Te=At)});var De=J;Ie&&ge!==0&&(!Fe||ae.length<Fe)?(F.splice(Te+1,0,w),De=Te+1):F[J]=w,Ee&&!ae.length&&$===void 0&&F.push(w);var Ve=oe(F);if(R==null||R(Ve),Se(F),T){var mt,Je;(mt=document.activeElement)===null||mt===void 0||(Je=mt.blur)===null||Je===void 0||Je.call(mt),be.current.focus(De),cn(T,De,F)}else _==null||_(Ve),sa(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),B==null||B(Ve)}},zr=function(w){w.preventDefault();var T=ke.current.getBoundingClientRect(),F=T.width,J=T.height,Te=T.left,ge=T.top,De=T.bottom,Ve=T.right,mt=w.clientX,Je=w.clientY,We;switch($e){case"btt":We=(De-Je)/J;break;case"ttb":We=(Je-ge)/J;break;case"rtl":We=(Ve-mt)/F;break;default:We=(mt-Te)/F}var At=Ce+We*(Qe-Ce);un(at(At),w)},fr=u.useState(null),Rn=pe(fr,2),$t=Rn[0],_n=Rn[1],ar=function(w,T){if(!p){var F=yt(ae,w,T);R==null||R(oe(ae)),Se(F.values),_n(F.value)}};u.useEffect(function(){if($t!==null){var je=ae.indexOf($t);je>=0&&be.current.focus(je)}_n(null)},[$t]);var Tn=u.useMemo(function(){return Xe&&nt===null?!1:Xe},[Xe,nt]),$n=Zt(function(je,w){cn(je,w),R==null||R(oe(ae))}),wr=sn!==-1;u.useEffect(function(){if(!wr){var je=ae.lastIndexOf(In);be.current.focus(je)}},[wr]);var ir=u.useMemo(function(){return gt(ln).sort(function(je,w){return je-w})},[ln]),Ln=u.useMemo(function(){return Ee?[ir[0],ir[ir.length-1]]:[Ce,ir[0]]},[ir,Ee,Ce]),dn=pe(Ln,2),pn=dn[0],vr=dn[1];u.useImperativeHandle(t,function(){return{focus:function(){be.current.focus(0)},blur:function(){var w,T=document,F=T.activeElement;(w=ke.current)!==null&&w!==void 0&&w.contains(F)&&(F==null||F.blur())}}}),u.useEffect(function(){m&&be.current.focus(0)},[]);var Dn=u.useMemo(function(){return{min:Ce,max:Qe,direction:$e,disabled:p,keyboard:g,step:nt,included:G,includedStart:pn,includedEnd:vr,range:Ee,tabIndex:ze,ariaLabelForHandle:Oe,ariaLabelledByForHandle:Ze,ariaRequired:fe,ariaValueTextFormatterForHandle:Ae,styles:s||{},classNames:o||{}}},[Ce,Qe,$e,p,g,nt,G,pn,vr,Ee,ze,Oe,Ze,fe,Ae,s,o]);return u.createElement(Dr.Provider,{value:Dn},u.createElement("div",{ref:ke,className:ne(n,a,le(le(le(le({},"".concat(n,"-disabled"),p),"".concat(n,"-vertical"),q),"".concat(n,"-horizontal"),!q),"".concat(n,"-with-marks"),vt.length)),style:i,onMouseDown:zr,id:c},u.createElement("div",{className:ne("".concat(n,"-rail"),o==null?void 0:o.rail),style:ce(ce({},Y),s==null?void 0:s.rail)}),ye!==!1&&u.createElement(Yd,{prefixCls:n,style:Q,values:ae,startPoint:Z,onStartMove:Tn?$n:void 0}),u.createElement(Wd,{prefixCls:n,marks:vt,dots:W,style:ee,activeStyle:se}),u.createElement(Vd,{ref:be,prefixCls:n,style:re,values:ln,draggingIndex:sn,draggingDelete:Pa,onStartMove:$n,onOffsetChange:ar,onFocus:S,onBlur:b,handleRender:X,activeHandleRender:ie,onChangeComplete:he,onDelete:Ie?Nt:void 0}),u.createElement(Ud,{prefixCls:n,marks:vt,onClick:un})))});const Ki=u.forwardRef((r,t)=>{const{open:e,draggingDelete:n}=r,a=u.useRef(null),i=e&&!n,o=u.useRef(null);function s(){tr.cancel(o.current),o.current=null}function c(){o.current=tr(()=>{var d;(d=a.current)===null||d===void 0||d.forceAlign(),o.current=null})}return u.useEffect(()=>(i?c():s(),s),[i,r.title]),u.createElement($o,Object.assign({ref:ya(a,t)},r,{open:i}))}),Jd=r=>{const{componentCls:t,antCls:e,controlSize:n,dotSize:a,marginFull:i,marginPart:o,colorFillContentHover:s,handleColorDisabled:c,calc:d,handleSize:p,handleSizeHover:h,handleActiveColor:g,handleActiveOutlineColor:m,handleLineWidth:S,handleLineWidthHover:b,motionDurationMid:f}=r;return{[t]:Object.assign(Object.assign({},Yt(r)),{position:"relative",height:n,margin:`${te(o)} ${te(i)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${te(i)} ${te(o)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:r.railBg,borderRadius:r.borderRadiusXS,transition:`background-color ${f}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${f}`},[`${t}-track`]:{backgroundColor:r.trackBg,borderRadius:r.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:r.railHoverBg},[`${t}-track`]:{backgroundColor:r.trackHoverBg},[`${t}-dot`]:{borderColor:s},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${te(S)} ${r.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:r.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:p,height:p,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:d(S).mul(-1).equal(),insetBlockStart:d(S).mul(-1).equal(),width:d(p).add(d(S).mul(2)).equal(),height:d(p).add(d(S).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:p,height:p,backgroundColor:r.colorBgElevated,boxShadow:`0 0 0 ${te(S)} ${r.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${f},
            inset-block-start ${f},
            width ${f},
            height ${f},
            box-shadow ${f},
            outline ${f}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:d(h).sub(p).div(2).add(b).mul(-1).equal(),insetBlockStart:d(h).sub(p).div(2).add(b).mul(-1).equal(),width:d(h).add(d(b).mul(2)).equal(),height:d(h).add(d(b).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${te(b)} ${g}`,outline:`6px solid ${m}`,width:h,height:h,insetInlineStart:r.calc(p).sub(h).div(2).equal(),insetBlockStart:r.calc(p).sub(h).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:r.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:r.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:r.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:a,height:a,backgroundColor:r.colorBgElevated,border:`${te(S)} solid ${r.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${r.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:r.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${r.railBg} !important`},[`${t}-track`]:{backgroundColor:`${r.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:r.colorBgElevated,borderColor:r.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:r.colorBgElevated,cursor:"not-allowed",width:p,height:p,boxShadow:`0 0 0 ${te(S)} ${c}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${e}-tooltip-inner`]:{minWidth:"unset"}})}},Cs=(r,t)=>{const{componentCls:e,railSize:n,handleSize:a,dotSize:i,marginFull:o,calc:s}=r,c=t?"paddingBlock":"paddingInline",d=t?"width":"height",p=t?"height":"width",h=t?"insetBlockStart":"insetInlineStart",g=t?"top":"insetInlineStart",m=s(n).mul(3).sub(a).div(2).equal(),S=s(a).sub(n).div(2).equal(),b=t?{borderWidth:`${te(S)} 0`,transform:`translateY(${te(s(S).mul(-1).equal())})`}:{borderWidth:`0 ${te(S)}`,transform:`translateX(${te(r.calc(S).mul(-1).equal())})`};return{[c]:n,[p]:s(n).mul(3).equal(),[`${e}-rail`]:{[d]:"100%",[p]:n},[`${e}-track,${e}-tracks`]:{[p]:n},[`${e}-track-draggable`]:Object.assign({},b),[`${e}-handle`]:{[h]:m},[`${e}-mark`]:{insetInlineStart:0,top:0,[g]:s(n).mul(3).add(t?0:o).equal(),[d]:"100%"},[`${e}-step`]:{insetInlineStart:0,top:0,[g]:n,[d]:"100%",[p]:n},[`${e}-dot`]:{position:"absolute",[h]:s(n).sub(i).div(2).equal()}}},ep=r=>{const{componentCls:t,marginPartWithMark:e}=r;return{[`${t}-horizontal`]:Object.assign(Object.assign({},Cs(r,!0)),{[`&${t}-with-marks`]:{marginBottom:e}})}},tp=r=>{const{componentCls:t}=r;return{[`${t}-vertical`]:Object.assign(Object.assign({},Cs(r,!1)),{height:"100%"})}},rp=r=>{const e=r.controlHeightLG/4,n=r.controlHeightSM/2,a=r.lineWidth+1,i=r.lineWidth+1*1.5,o=r.colorPrimary,s=new Qt(o).setAlpha(.2).toRgbString();return{controlSize:e,railSize:4,handleSize:e,handleSizeHover:n,dotSize:8,handleLineWidth:a,handleLineWidthHover:i,railBg:r.colorFillTertiary,railHoverBg:r.colorFillSecondary,trackBg:r.colorPrimaryBorder,trackHoverBg:r.colorPrimaryBorderHover,handleColor:r.colorPrimaryBorder,handleActiveColor:o,handleActiveOutlineColor:s,handleColorDisabled:new Qt(r.colorTextDisabled).onBackground(r.colorBgContainer).toHexShortString(),dotBorderColor:r.colorBorderSecondary,dotActiveBorderColor:r.colorPrimaryBorder,trackBgDisabled:r.colorBgContainerDisabled}},np=dr("Slider",r=>{const t=er(r,{marginPart:r.calc(r.controlHeight).sub(r.controlSize).div(2).equal(),marginFull:r.calc(r.controlSize).div(2).equal(),marginPartWithMark:r.calc(r.controlHeightLG).sub(r.controlSize).equal()});return[Jd(t),ep(t),tp(t)]},rp),As=u.createContext({});function za(){const[r,t]=u.useState(!1),e=u.useRef(),n=()=>{tr.cancel(e.current)},a=i=>{n(),i?t(i):e.current=tr(()=>{t(i)})};return u.useEffect(()=>n,[]),[r,a]}var ap=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};function ip(r,t){return r||r===null?r:t||t===null?t:e=>typeof e=="number"?e.toString():""}const op=D.forwardRef((r,t)=>{const{prefixCls:e,range:n,className:a,rootClassName:i,style:o,disabled:s,tooltipPrefixCls:c,tipFormatter:d,tooltipVisible:p,getTooltipPopupContainer:h,tooltipPlacement:g,tooltip:m={},onChangeComplete:S}=r,b=ap(r,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:f}=r,{direction:v,slider:y,getPrefixCls:x,getPopupContainer:A}=D.useContext(_t),E=D.useContext(ha),I=s??E,{handleRender:N,direction:O}=D.useContext(As),P=(O||v)==="rtl",[R,_]=za(),[B,L]=za(),k=Object.assign({},m),{open:H,placement:V,getPopupContainer:K,prefixCls:q,formatter:ue}=k,G=H??p,Z=(R||B)&&G!==!1,Q=ip(ue,d),[re,Y]=za(),ee=fe=>{S==null||S(fe),Y(!1)},se=(fe,Ae)=>fe||(Ae?P?"left":"right":"top"),U=x("slider",e),[W,X,ie]=np(U),ye=ne(a,y==null?void 0:y.className,i,{[`${U}-rtl`]:P,[`${U}-lock`]:re},X,ie);P&&!b.vertical&&(b.reverse=!b.reverse),D.useEffect(()=>{const fe=()=>{tr(()=>{L(!1)},1)};return document.addEventListener("mouseup",fe),()=>{document.removeEventListener("mouseup",fe)}},[]);const _e=n&&!G,ze=N||((fe,Ae)=>{const{index:be}=Ae,ke=fe.props;function $e(Ie,Xe,ht){var Fe,Ce,Qe,nt;ht&&((Ce=(Fe=b)[Ie])===null||Ce===void 0||Ce.call(Fe,Xe)),(nt=(Qe=ke)[Ie])===null||nt===void 0||nt.call(Qe,Xe)}const rt=Object.assign(Object.assign({},ke),{onMouseEnter:Ie=>{_(!0),$e("onMouseEnter",Ie)},onMouseLeave:Ie=>{_(!1),$e("onMouseLeave",Ie)},onMouseDown:Ie=>{L(!0),Y(!0),$e("onMouseDown",Ie)},onFocus:Ie=>{var Xe;L(!0),(Xe=b.onFocus)===null||Xe===void 0||Xe.call(b,Ie),$e("onFocus",Ie,!0)},onBlur:Ie=>{var Xe;L(!1),(Xe=b.onBlur)===null||Xe===void 0||Xe.call(b,Ie),$e("onBlur",Ie,!0)}}),He=D.cloneElement(fe,rt),Ee=(!!G||Z)&&Q!==null;return _e?He:D.createElement(Ki,Object.assign({},k,{prefixCls:x("tooltip",q??c),title:Q?Q(Ae.value):"",open:Ee,placement:se(V??g,f),key:be,overlayClassName:`${U}-tooltip`,getPopupContainer:K||h||A}),He)}),Oe=_e?(fe,Ae)=>{const be=D.cloneElement(fe,{style:Object.assign(Object.assign({},fe.props.style),{visibility:"hidden"})});return D.createElement(Ki,Object.assign({},k,{prefixCls:x("tooltip",q??c),title:Q?Q(Ae.value):"",open:Q!==null&&Z,placement:se(V??g,f),key:"tooltip",overlayClassName:`${U}-tooltip`,getPopupContainer:K||h||A,draggingDelete:Ae.draggingDelete}),be)}:void 0,Ze=Object.assign(Object.assign({},y==null?void 0:y.style),o);return W(D.createElement(Qd,Object.assign({},b,{step:b.step,range:n,className:ye,style:Ze,disabled:I,ref:t,prefixCls:U,handleRender:ze,activeHandleRender:Oe,onChangeComplete:ee})))});var sp=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const Es=r=>{const{prefixCls:t,colors:e,type:n,color:a,range:i=!1,className:o,activeIndex:s,onActive:c,onDragStart:d,onDragChange:p,onKeyDelete:h}=r,g=sp(r,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),m=Object.assign(Object.assign({},g),{track:!1}),S=u.useMemo(()=>`linear-gradient(90deg, ${e.map(I=>`${I.color} ${I.percent}%`).join(", ")})`,[e]),b=u.useMemo(()=>!a||!n?null:n==="alpha"?a.toRgbString():`hsl(${a.toHsb().h}, 100%, 50%)`,[a,n]),f=Zt(d),v=Zt(p),y=u.useMemo(()=>({onDragStart:f,onDragChange:v}),[]),x=Zt((E,I)=>{const{onFocus:N,style:O,className:$,onKeyDown:P}=E.props,R=Object.assign({},O);return n==="gradient"&&(R.background=vs(e,I.value)),u.cloneElement(E,{onFocus:_=>{c==null||c(I.index),N==null||N(_)},style:R,className:ne($,{[`${t}-slider-handle-active`]:s===I.index}),onKeyDown:_=>{(_.key==="Delete"||_.key==="Backspace")&&h&&h(I.index),P==null||P(_)}})}),A=u.useMemo(()=>({direction:"ltr",handleRender:x}),[]);return u.createElement(As.Provider,{value:A},u.createElement(Ms.Provider,{value:y},u.createElement(op,Object.assign({},m,{className:ne(o,`${t}-slider`),tooltip:{open:!1},range:{editable:i,minCount:2},styles:{rail:{background:S},handle:b?{background:b}:{}},classNames:{rail:`${t}-slider-rail`,handle:`${t}-slider-handle`}}))))},lp=r=>{const{value:t,onChange:e,onChangeComplete:n}=r,a=o=>e(o[0]),i=o=>n(o[0]);return u.createElement(Es,Object.assign({},r,{value:[t],onChange:a,onChangeComplete:i}))};function Zi(r){return gt(r).sort((t,e)=>t.percent-e.percent)}const cp=r=>{const{prefixCls:t,mode:e,onChange:n,onChangeComplete:a,onActive:i,activeIndex:o,onGradientDragging:s,colors:c}=r,d=e==="gradient",p=u.useMemo(()=>c.map(v=>({percent:v.percent,color:v.color.toRgbString()})),[c]),h=u.useMemo(()=>p.map(v=>v.percent),[p]),g=u.useRef(p),m=v=>{let{rawValues:y,draggingIndex:x,draggingValue:A}=v;if(y.length>p.length){const E=vs(p,A),I=gt(p);I.splice(x,0,{percent:A,color:E}),g.current=I}else g.current=p;s(!0),n(new Ft(Zi(g.current)),!0)},S=v=>{let{deleteIndex:y,draggingIndex:x,draggingValue:A}=v,E=gt(g.current);y!==-1?E.splice(y,1):(E[x]=Object.assign(Object.assign({},E[x]),{percent:A}),E=Zi(E)),n(new Ft(E),!0)},b=v=>{const y=gt(p);y.splice(v,1);const x=new Ft(y);n(x),a(x)},f=v=>{a(new Ft(p)),o>=v.length&&i(v.length-1),s(!1)};return d?u.createElement(Es,{min:0,max:100,prefixCls:t,className:`${t}-gradient-slider`,colors:p,color:null,value:h,range:!0,onChangeComplete:f,disabled:!1,type:"gradient",activeIndex:o,onActive:i,onDragStart:m,onDragChange:S,onKeyDelete:b}):null},up=u.memo(cp);var dp=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const pp={slider:lp},Qi=()=>{const r=u.useContext(gs),{mode:t,onModeChange:e,modeOptions:n,prefixCls:a,allowClear:i,value:o,disabledAlpha:s,onChange:c,onClear:d,onChangeComplete:p,activeIndex:h,gradientDragging:g}=r,m=dp(r,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),S=D.useMemo(()=>o.cleared?[{percent:0,color:new Ft("")},{percent:100,color:new Ft("")}]:o.getColors(),[o]),b=!o.isGradient(),[f,v]=D.useState(o);va(()=>{var O;b||v((O=S[h])===null||O===void 0?void 0:O.color)},[g,h]);const y=D.useMemo(()=>{var O;return b?o:g?f:(O=S[h])===null||O===void 0?void 0:O.color},[o,h,b,f,g]),x=O=>{if(t==="single")return O;const $=gt(S);return $[h]=Object.assign(Object.assign({},$[h]),{color:O}),new Ft($)},A=(O,$,P)=>{let _=St(O);if(o.cleared){const B=_.toRgb();if(!B.r&&!B.g&&!B.b&&P){const{type:L,value:k=0}=P;_=new Ft({h:L==="hue"?k:0,s:1,b:1,a:L==="alpha"?k/100:1})}else _=aa(_)}c(x(_),$)},E=O=>{p(x(O))};let I=null;const N=n.length>1;return(i||N)&&(I=D.createElement("div",{className:`${a}-operation`},N&&D.createElement(cd,{size:"small",options:n,value:t,onChange:e}),D.createElement(ys,Object.assign({prefixCls:a,value:o,onChange:O=>{c(O),d==null||d()}},m)))),D.createElement(D.Fragment,null,I,D.createElement(up,Object.assign({},r,{colors:S})),D.createElement(Fu,{prefixCls:a,value:y==null?void 0:y.toHsb(),disabledAlpha:s,onChange:(O,$)=>{A(O,!0,$)},onChangeComplete:O=>{E(St(O))},components:pp}),D.createElement(Bd,Object.assign({value:y,onChange:A,prefixCls:a,disabledAlpha:s},m)))},Ba=r=>r.map(t=>(t.colors=t.colors.map(St),t)),hp=(r,t)=>{const{r:e,g:n,b:a,a:i}=r.toRgb(),o=new Xt(r.toRgbString()).onBackground(t).toHsv();return i<=.5?o.v>.5:e*.299+n*.587+a*.114>192},Ji=r=>{let{label:t}=r;return`panel-${t}`},mp=r=>{let{prefixCls:t,presets:e,value:n,onChange:a}=r;const[i]=gi("ColorPicker"),[,o]=Pl(),[s]=kt(Ba(e),{value:Ba(e),postState:Ba}),c=`${t}-presets`,d=u.useMemo(()=>s.reduce((g,m)=>{const{defaultOpen:S=!0}=m;return S&&g.push(Ji(m)),g},[]),[s]),p=g=>{a==null||a(g)},h=s.map(g=>{var m;return{key:Ji(g),label:D.createElement("div",{className:`${c}-label`},g==null?void 0:g.label),children:D.createElement("div",{className:`${c}-items`},Array.isArray(g==null?void 0:g.colors)&&((m=g.colors)===null||m===void 0?void 0:m.length)>0?g.colors.map((S,b)=>D.createElement(bi,{key:`preset-${b}-${S.toHexString()}`,color:St(S).toRgbString(),prefixCls:t,className:ne(`${c}-color`,{[`${c}-color-checked`]:S.toHexString()===(n==null?void 0:n.toHexString()),[`${c}-color-bright`]:hp(S,o.colorBgElevated)}),onClick:()=>p(S)})):D.createElement("span",{className:`${c}-empty`},i.presetEmpty))}});return D.createElement("div",{className:c},D.createElement(ku,{defaultActiveKey:d,ghost:!0,items:h}))},eo=()=>{const{prefixCls:r,value:t,presets:e,onChange:n}=u.useContext(fs);return Array.isArray(e)?D.createElement(mp,{value:t,presets:e,prefixCls:r,onChange:n}):null},gp=r=>{const{prefixCls:t,presets:e,panelRender:n,value:a,onChange:i,onClear:o,allowClear:s,disabledAlpha:c,mode:d,onModeChange:p,modeOptions:h,onChangeComplete:g,activeIndex:m,onActive:S,format:b,onFormatChange:f,gradientDragging:v,onGradientDragging:y}=r,x=`${t}-inner`,A=D.useMemo(()=>({prefixCls:t,value:a,onChange:i,onClear:o,allowClear:s,disabledAlpha:c,mode:d,onModeChange:p,modeOptions:h,onChangeComplete:g,activeIndex:m,onActive:S,format:b,onFormatChange:f,gradientDragging:v,onGradientDragging:y}),[t,a,i,o,s,c,d,p,h,g,m,S,b,f,v,y]),E=D.useMemo(()=>({prefixCls:t,value:a,presets:e,onChange:i}),[t,a,e,i]),I=D.createElement("div",{className:`${x}-content`},D.createElement(Qi,null),Array.isArray(e)&&D.createElement(qu,null),D.createElement(eo,null));return D.createElement(gs.Provider,{value:A},D.createElement(fs.Provider,{value:E},D.createElement("div",{className:x},typeof n=="function"?n(I,{components:{Picker:Qi,Presets:eo}}):I)))};var fp=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const vp=u.forwardRef((r,t)=>{const{color:e,prefixCls:n,open:a,disabled:i,format:o,className:s,showText:c,activeIndex:d}=r,p=fp(r,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),h=`${n}-trigger`,g=`${h}-text`,m=`${g}-cell`,[S]=gi("ColorPicker"),b=D.useMemo(()=>{if(!c)return"";if(typeof c=="function")return c(e);if(e.cleared)return S.transparent;if(e.isGradient())return e.getColors().map((x,A)=>{const E=d!==-1&&d!==A;return D.createElement("span",{key:A,className:ne(m,E&&`${m}-inactive`)},x.color.toRgbString()," ",x.percent,"%")});const v=e.toHexString().toUpperCase(),y=Si(e);switch(o){case"rgb":return e.toRgbString();case"hsb":return e.toHsbString();default:return y<100?`${v.slice(0,7)},${y}%`:v}},[e,o,c,d]),f=u.useMemo(()=>e.cleared?D.createElement(ys,{prefixCls:n}):D.createElement(bi,{prefixCls:n,color:e.toCssString()}),[e,n]);return D.createElement("div",Object.assign({ref:t,className:ne(h,s,{[`${h}-active`]:a,[`${h}-disabled`]:i})},Do(p)),f,c&&D.createElement("div",{className:g},b))});function yp(r,t,e){const[n]=gi("ColorPicker"),[a,i]=kt(r,{value:t}),[o,s]=u.useState("single"),[c,d]=u.useMemo(()=>{const b=(Array.isArray(e)?e:[e]).filter(x=>x);b.length||b.push("single");const f=new Set(b),v=[],y=(x,A)=>{f.has(x)&&v.push({label:A,value:x})};return y("single",n.singleColor),y("gradient",n.gradientColor),[v,f]},[e]),[p,h]=u.useState(null),g=Zt(b=>{h(b),i(b)}),m=u.useMemo(()=>{const b=St(a||"");return b.equals(p)?p:b},[a,p]),S=u.useMemo(()=>{var b;return d.has(o)?o:(b=c[0])===null||b===void 0?void 0:b.value},[d,o,c]);return u.useEffect(()=>{s(m.isGradient()?"gradient":"single")},[m]),[m,g,S,s,c]}const xs=(r,t)=>({backgroundImage:`conic-gradient(${t} 0 25%, transparent 0 50%, ${t} 0 75%, transparent 0)`,backgroundSize:`${r} ${r}`}),to=(r,t)=>{const{componentCls:e,borderRadiusSM:n,colorPickerInsetShadow:a,lineWidth:i,colorFillSecondary:o}=r;return{[`${e}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:n,width:t,height:t,boxShadow:a,flex:"none"},xs("50%",r.colorFillSecondary)),{[`${e}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${te(i)} ${o}`,borderRadius:"inherit"}})}},bp=r=>{const{componentCls:t,antCls:e,fontSizeSM:n,lineHeightSM:a,colorPickerAlphaInputWidth:i,marginXXS:o,paddingXXS:s,controlHeightSM:c,marginXS:d,fontSizeIcon:p,paddingXS:h,colorTextPlaceholder:g,colorPickerInputNumberHandleWidth:m,lineWidth:S}=r;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${e}-input-number`]:{fontSize:n,lineHeight:a,[`${e}-input-number-input`]:{paddingInlineStart:s,paddingInlineEnd:0},[`${e}-input-number-handler-wrap`]:{width:m}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${te(i)}`,marginInlineStart:o},[`${t}-format-select${e}-select`]:{marginInlineEnd:d,width:"auto","&-single":{[`${e}-select-selector`]:{padding:0,border:0},[`${e}-select-arrow`]:{insetInlineEnd:0},[`${e}-select-selection-item`]:{paddingInlineEnd:r.calc(p).add(o).equal(),fontSize:n,lineHeight:te(c)},[`${e}-select-item-option-content`]:{fontSize:n,lineHeight:a},[`${e}-select-dropdown`]:{[`${e}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:o,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{display:"flex",gap:o,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${e}-input-affix-wrapper`]:{flex:1,padding:`0 ${te(h)}`,[`${e}-input`]:{fontSize:n,textTransform:"uppercase",lineHeight:te(r.calc(c).sub(r.calc(S).mul(2)).equal())},[`${e}-input-prefix`]:{color:g}}}}}},Sp=r=>{const{componentCls:t,controlHeightLG:e,borderRadiusSM:n,colorPickerInsetShadow:a,marginSM:i,colorBgElevated:o,colorFillSecondary:s,lineWidthBold:c,colorPickerHandlerSize:d}=r;return{userSelect:"none",[`${t}-select`]:{[`${t}-palette`]:{minHeight:r.calc(e).mul(4).equal(),overflow:"hidden",borderRadius:n},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:a,inset:0},marginBottom:i},[`${t}-handler`]:{width:d,height:d,border:`${te(c)} solid ${o}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${a}, 0 0 0 1px ${s}`}}},Mp=r=>{const{componentCls:t,antCls:e,colorTextQuaternary:n,paddingXXS:a,colorPickerPresetColorSize:i,fontSizeSM:o,colorText:s,lineHeightSM:c,lineWidth:d,borderRadius:p,colorFill:h,colorWhite:g,marginXXS:m,paddingXS:S,fontHeightSM:b}=r;return{[`${t}-presets`]:{[`${e}-collapse-item > ${e}-collapse-header`]:{padding:0,[`${e}-collapse-expand-icon`]:{height:b,color:n,paddingInlineEnd:a}},[`${e}-collapse`]:{display:"flex",flexDirection:"column",gap:m},[`${e}-collapse-item > ${e}-collapse-content > ${e}-collapse-content-box`]:{padding:`${te(S)} 0`},"&-label":{fontSize:o,color:s,lineHeight:c},"&-items":{display:"flex",flexWrap:"wrap",gap:r.calc(m).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:i,height:i,"&::before":{content:'""',pointerEvents:"none",width:r.calc(i).add(r.calc(d).mul(4)).equal(),height:r.calc(i).add(r.calc(d).mul(4)).equal(),position:"absolute",top:r.calc(d).mul(-2).equal(),insetInlineStart:r.calc(d).mul(-2).equal(),borderRadius:p,border:`${te(d)} solid transparent`,transition:`border-color ${r.motionDurationMid} ${r.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:r.calc(i).div(13).mul(5).equal(),height:r.calc(i).div(13).mul(8).equal(),border:`${te(r.lineWidthBold)} solid ${r.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${r.motionDurationFast} ${r.motionEaseInBack}, opacity ${r.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:g,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${r.motionDurationMid} ${r.motionEaseOutBack} ${r.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:o,color:n}}}},Cp=r=>{const{componentCls:t,colorPickerInsetShadow:e,colorBgElevated:n,colorFillSecondary:a,lineWidthBold:i,colorPickerHandlerSizeSM:o,colorPickerSliderHeight:s,marginSM:c,marginXS:d}=r,p=r.calc(o).sub(r.calc(i).mul(2).equal()).equal(),h=r.calc(o).add(r.calc(i).mul(2).equal()).equal(),g={"&:after":{transform:"scale(1)",boxShadow:`${e}, 0 0 0 1px ${r.colorPrimaryActive}`}};return{[`${t}-slider`]:[xs(te(s),r.colorFillSecondary),{margin:0,padding:0,height:s,borderRadius:r.calc(s).div(2).equal(),"&-rail":{height:s,borderRadius:r.calc(s).div(2).equal(),boxShadow:e},[`& ${t}-slider-handle`]:{width:p,height:p,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:o,height:o,border:`${te(i)} solid ${n}`,boxShadow:`${e}, 0 0 0 1px ${a}`,outline:"none",insetInlineStart:r.calc(i).mul(-1).equal(),top:r.calc(i).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":g}}],[`${t}-slider-container`]:{display:"flex",gap:c,marginBottom:c,[`${t}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${t}-gradient-slider`]:{marginBottom:d,[`& ${t}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":g}}}},oi=(r,t,e)=>({borderInlineEndWidth:r.lineWidth,borderColor:t,boxShadow:`0 0 0 ${te(r.controlOutlineWidth)} ${e}`,outline:0}),Ap=r=>{const{componentCls:t}=r;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},ro=(r,t,e)=>{const{componentCls:n,borderRadiusSM:a,lineWidth:i,colorSplit:o,colorBorder:s,red6:c}=r;return{[`${n}-clear`]:Object.assign(Object.assign({width:t,height:t,borderRadius:a,border:`${te(i)} solid ${o}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${r.motionDurationFast}`},e),{"&::after":{content:'""',position:"absolute",insetInlineEnd:r.calc(i).mul(-1).equal(),top:r.calc(i).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:c},"&:hover":{borderColor:s}})}},Ep=r=>{const{componentCls:t,colorError:e,colorWarning:n,colorErrorHover:a,colorWarningHover:i,colorErrorOutline:o,colorWarningOutline:s}=r;return{[`&${t}-status-error`]:{borderColor:e,"&:hover":{borderColor:a},[`&${t}-trigger-active`]:Object.assign({},oi(r,e,o))},[`&${t}-status-warning`]:{borderColor:n,"&:hover":{borderColor:i},[`&${t}-trigger-active`]:Object.assign({},oi(r,n,s))}}},xp=r=>{const{componentCls:t,controlHeightLG:e,controlHeightSM:n,controlHeight:a,controlHeightXS:i,borderRadius:o,borderRadiusSM:s,borderRadiusXS:c,borderRadiusLG:d,fontSizeLG:p}=r;return{[`&${t}-lg`]:{minWidth:e,minHeight:e,borderRadius:d,[`${t}-color-block, ${t}-clear`]:{width:a,height:a,borderRadius:o},[`${t}-trigger-text`]:{fontSize:p}},[`&${t}-sm`]:{minWidth:n,minHeight:n,borderRadius:s,[`${t}-color-block, ${t}-clear`]:{width:i,height:i,borderRadius:c},[`${t}-trigger-text`]:{lineHeight:te(i)}}}},wp=r=>{const{antCls:t,componentCls:e,colorPickerWidth:n,colorPrimary:a,motionDurationMid:i,colorBgElevated:o,colorTextDisabled:s,colorText:c,colorBgContainerDisabled:d,borderRadius:p,marginXS:h,marginSM:g,controlHeight:m,controlHeightSM:S,colorBgTextActive:b,colorPickerPresetColorSize:f,colorPickerPreviewSize:v,lineWidth:y,colorBorder:x,paddingXXS:A,fontSize:E,colorPrimaryHover:I,controlOutline:N}=r;return[{[e]:Object.assign({[`${e}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:n,[`& > ${t}-divider`]:{margin:`${te(g)} 0 ${te(h)}`}},[`${e}-panel`]:Object.assign({},Sp(r))},Cp(r)),to(r,v)),bp(r)),Mp(r)),ro(r,f,{marginInlineStart:"auto"})),{[`${e}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:m,minHeight:m,borderRadius:p,border:`${te(y)} solid ${x}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${i}`,background:o,padding:r.calc(A).sub(y).equal(),[`${e}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:r.calc(h).sub(r.calc(A).sub(y)).equal(),fontSize:E,color:c,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:s}}},"&:hover":{borderColor:I},[`&${e}-trigger-active`]:Object.assign({},oi(r,a,N)),"&-disabled":{color:s,background:d,cursor:"not-allowed","&:hover":{borderColor:b},[`${e}-trigger-text`]:{color:s}}},ro(r,S)),to(r,S)),Ep(r)),xp(r))},Ap(r))},Vo(r,{focusElCls:`${e}-trigger-active`})]},Np=dr("ColorPicker",r=>{const{colorTextQuaternary:t,marginSM:e}=r,n=8,a=er(r,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:n,colorPickerPreviewSize:r.calc(n).mul(2).add(e).equal()});return[wp(a)]});var Pp=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const xi=r=>{const{mode:t,value:e,defaultValue:n,format:a,defaultFormat:i,allowClear:o=!1,presets:s,children:c,trigger:d="click",open:p,disabled:h,placement:g="bottomLeft",arrow:m=!0,panelRender:S,showText:b,style:f,className:v,size:y,rootClassName:x,prefixCls:A,styles:E,disabledAlpha:I=!1,onFormatChange:N,onChange:O,onClear:$,onOpenChange:P,onChangeComplete:R,getPopupContainer:_,autoAdjustOverflow:B=!0,destroyTooltipOnHide:L}=r,k=Pp(r,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:H,direction:V,colorPicker:K}=u.useContext(_t),q=u.useContext(ha),ue=h??q,[G,Z]=kt(!1,{value:p,postState:et=>!ue&&et,onChange:P}),[Q,re]=kt(a,{value:a,defaultValue:i,onChange:N}),Y=H("color-picker",A),[ee,se,U,W,X]=yp(n,e,t),ie=u.useMemo(()=>Si(ee)<100,[ee]),[ye,_e]=D.useState(null),ze=et=>{if(R){let at=St(et);I&&ie&&(at=aa(et)),R(at)}},Oe=(et,at)=>{let yt=St(et);I&&ie&&(yt=aa(yt)),se(yt),_e(null),O&&O(yt,yt.toCssString()),at||ze(yt)},[Ze,fe]=D.useState(0),[Ae,be]=D.useState(!1),ke=et=>{if(W(et),et==="single"&&ee.isGradient())fe(0),Oe(new Ft(ee.getColors()[0].color)),_e(ee);else if(et==="gradient"&&!ee.isGradient()){const at=ie?aa(ee):ee;Oe(new Ft(ye||[{percent:0,color:at},{percent:100,color:at}]))}},{status:$e}=D.useContext(hi),{compactSize:rt,compactItemClassnames:He}=Fo(Y,V),Ee=ma(et=>{var at;return(at=y??rt)!==null&&at!==void 0?at:et}),Ie=rn(Y),[Xe,ht,Fe]=Np(Y,Ie),Ce={[`${Y}-rtl`]:V},Qe=ne(x,Fe,Ie,Ce),nt=ne(ni(Y,$e),{[`${Y}-sm`]:Ee==="small",[`${Y}-lg`]:Ee==="large"},He,K==null?void 0:K.className,Qe,v,ht),Mt=ne(Y,Qe),vt={open:G,trigger:d,placement:g,arrow:m,rootClassName:x,getPopupContainer:_,autoAdjustOverflow:B,destroyTooltipOnHide:L},qt=Object.assign(Object.assign({},K==null?void 0:K.style),f);return Xe(D.createElement(ns,Object.assign({style:E==null?void 0:E.popup,overlayInnerStyle:E==null?void 0:E.popupOverlayInner,onOpenChange:et=>{(!et||!ue)&&Z(et)},content:D.createElement(ri,{form:!0},D.createElement(gp,{mode:U,onModeChange:ke,modeOptions:X,prefixCls:Y,value:ee,allowClear:o,disabled:ue,disabledAlpha:I,presets:s,panelRender:S,format:Q,onFormatChange:re,onChange:Oe,onChangeComplete:ze,onClear:$,activeIndex:Ze,onActive:fe,gradientDragging:Ae,onGradientDragging:be})),overlayClassName:Mt},vt),c||D.createElement(vp,Object.assign({activeIndex:G?Ze:-1,open:G,className:nt,style:qt,prefixCls:Y,disabled:ue,showText:b,format:Q},k,{color:ee}))))},Op=Ol(xi,"color-picker",r=>r,r=>Object.assign(Object.assign({},r),{placement:"bottom",autoAdjustOverflow:!1}));xi._InternalPanelDoNotUseOrYouWillBeFired=Op;function ws(){var r=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:r,height:t}}function kp(r){var t=r.getBoundingClientRect(),e=document.documentElement;return{left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||document.body.clientTop||0)}}function Yr(r,t,e,n){var a=_i.unstable_batchedUpdates?function(o){_i.unstable_batchedUpdates(e,o)}:e;return r!=null&&r.addEventListener&&r.addEventListener(t,a,n),{remove:function(){r!=null&&r.removeEventListener&&r.removeEventListener(t,a,n)}}}var Nn=u.createContext(null),Ip=function(t){var e=t.visible,n=t.maskTransitionName,a=t.getContainer,i=t.prefixCls,o=t.rootClassName,s=t.icons,c=t.countRender,d=t.showSwitch,p=t.showProgress,h=t.current,g=t.transform,m=t.count,S=t.scale,b=t.minScale,f=t.maxScale,v=t.closeIcon,y=t.onSwitchLeft,x=t.onSwitchRight,A=t.onClose,E=t.onZoomIn,I=t.onZoomOut,N=t.onRotateRight,O=t.onRotateLeft,$=t.onFlipX,P=t.onFlipY,R=t.onReset,_=t.toolbarRender,B=t.zIndex,L=t.image,k=u.useContext(Nn),H=s.rotateLeft,V=s.rotateRight,K=s.zoomIn,q=s.zoomOut,ue=s.close,G=s.left,Z=s.right,Q=s.flipX,re=s.flipY,Y="".concat(i,"-operations-operation");u.useEffect(function(){var W=function(ie){ie.keyCode===ot.ESC&&A()};return e&&window.addEventListener("keydown",W),function(){window.removeEventListener("keydown",W)}},[e]);var ee=[{icon:re,onClick:P,type:"flipY"},{icon:Q,onClick:$,type:"flipX"},{icon:H,onClick:O,type:"rotateLeft"},{icon:V,onClick:N,type:"rotateRight"},{icon:q,onClick:I,type:"zoomOut",disabled:S<=b},{icon:K,onClick:E,type:"zoomIn",disabled:S===f}],se=ee.map(function(W){var X,ie=W.icon,ye=W.onClick,_e=W.type,ze=W.disabled;return u.createElement("div",{className:ne(Y,(X={},le(X,"".concat(i,"-operations-operation-").concat(_e),!0),le(X,"".concat(i,"-operations-operation-disabled"),!!ze),X)),onClick:ye,key:_e},ie)}),U=u.createElement("div",{className:"".concat(i,"-operations")},se);return u.createElement(mi,{visible:e,motionName:n},function(W){var X=W.className,ie=W.style;return u.createElement(kl,{open:!0,getContainer:a??document.body},u.createElement("div",{className:ne("".concat(i,"-operations-wrapper"),X,o),style:ce(ce({},ie),{},{zIndex:B})},v===null?null:u.createElement("button",{className:"".concat(i,"-close"),onClick:A},v||ue),d&&u.createElement(u.Fragment,null,u.createElement("div",{className:ne("".concat(i,"-switch-left"),le({},"".concat(i,"-switch-left-disabled"),h===0)),onClick:y},G),u.createElement("div",{className:ne("".concat(i,"-switch-right"),le({},"".concat(i,"-switch-right-disabled"),h===m-1)),onClick:x},Z)),u.createElement("div",{className:"".concat(i,"-footer")},p&&u.createElement("div",{className:"".concat(i,"-progress")},c?c(h+1,m):"".concat(h+1," / ").concat(m)),_?_(U,ce(ce({icons:{flipYIcon:se[0],flipXIcon:se[1],rotateLeftIcon:se[2],rotateRightIcon:se[3],zoomOutIcon:se[4],zoomInIcon:se[5]},actions:{onFlipY:P,onFlipX:$,onRotateLeft:O,onRotateRight:N,onZoomOut:I,onZoomIn:E,onReset:R,onClose:A},transform:g},k?{current:h,total:m}:{}),{},{image:L})):U)))})},qn={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function Rp(r,t,e,n){var a=u.useRef(null),i=u.useRef([]),o=u.useState(qn),s=pe(o,2),c=s[0],d=s[1],p=function(S){d(qn),Uo(qn,c)||n==null||n({transform:qn,action:S})},h=function(S,b){a.current===null&&(i.current=[],a.current=tr(function(){d(function(f){var v=f;return i.current.forEach(function(y){v=ce(ce({},v),y)}),a.current=null,n==null||n({transform:v,action:b}),v})})),i.current.push(ce(ce({},c),S))},g=function(S,b,f,v,y){var x=r.current,A=x.width,E=x.height,I=x.offsetWidth,N=x.offsetHeight,O=x.offsetLeft,$=x.offsetTop,P=S,R=c.scale*S;R>e?(R=e,P=e/c.scale):R<t&&(R=y?R:t,P=R/c.scale);var _=f??innerWidth/2,B=v??innerHeight/2,L=P-1,k=L*A*.5,H=L*E*.5,V=L*(_-c.x-O),K=L*(B-c.y-$),q=c.x-(V-k),ue=c.y-(K-H);if(S<1&&R===1){var G=I*R,Z=N*R,Q=ws(),re=Q.width,Y=Q.height;G<=re&&Z<=Y&&(q=0,ue=0)}h({x:q,y:ue,scale:R},b)};return{transform:c,resetTransform:p,updateTransform:h,dispatchZoomChange:g}}function no(r,t,e,n){var a=t+e,i=(e-n)/2;if(e>n){if(t>0)return le({},r,i);if(t<0&&a<n)return le({},r,-i)}else if(t<0||a>n)return le({},r,t<0?i:-i);return{}}function Ns(r,t,e,n){var a=ws(),i=a.width,o=a.height,s=null;return r<=i&&t<=o?s={x:0,y:0}:(r>i||t>o)&&(s=ce(ce({},no("x",e,r,i)),no("y",n,t,o))),s}var Xr=1,_p=1;function Tp(r,t,e,n,a,i,o){var s=a.rotate,c=a.scale,d=a.x,p=a.y,h=u.useState(!1),g=pe(h,2),m=g[0],S=g[1],b=u.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),f=function(E){!t||E.button!==0||(E.preventDefault(),E.stopPropagation(),b.current={diffX:E.pageX-d,diffY:E.pageY-p,transformX:d,transformY:p},S(!0))},v=function(E){e&&m&&i({x:E.pageX-b.current.diffX,y:E.pageY-b.current.diffY},"move")},y=function(){if(e&&m){S(!1);var E=b.current,I=E.transformX,N=E.transformY,O=d!==I&&p!==N;if(!O)return;var $=r.current.offsetWidth*c,P=r.current.offsetHeight*c,R=r.current.getBoundingClientRect(),_=R.left,B=R.top,L=s%180!==0,k=Ns(L?P:$,L?$:P,_,B);k&&i(ce({},k),"dragRebound")}},x=function(E){if(!(!e||E.deltaY==0)){var I=Math.abs(E.deltaY/100),N=Math.min(I,_p),O=Xr+N*n;E.deltaY>0&&(O=Xr/O),o(O,"wheel",E.clientX,E.clientY)}};return u.useEffect(function(){var A,E,I,N;if(t){I=Yr(window,"mouseup",y,!1),N=Yr(window,"mousemove",v,!1);try{window.top!==window.self&&(A=Yr(window.top,"mouseup",y,!1),E=Yr(window.top,"mousemove",v,!1))}catch{}}return function(){var O,$,P,R;(O=I)===null||O===void 0||O.remove(),($=N)===null||$===void 0||$.remove(),(P=A)===null||P===void 0||P.remove(),(R=E)===null||R===void 0||R.remove()}},[e,m,d,p,s,t]),{isMoving:m,onMouseDown:f,onMouseMove:v,onMouseUp:y,onWheel:x}}function $p(r){return new Promise(function(t){var e=document.createElement("img");e.onerror=function(){return t(!1)},e.onload=function(){return t(!0)},e.src=r})}function Ps(r){var t=r.src,e=r.isCustomPlaceholder,n=r.fallback,a=u.useState(e?"loading":"normal"),i=pe(a,2),o=i[0],s=i[1],c=u.useRef(!1),d=o==="error";u.useEffect(function(){var m=!0;return $p(t).then(function(S){!S&&m&&s("error")}),function(){m=!1}},[t]),u.useEffect(function(){e&&!c.current?s("loading"):d&&s("normal")},[t]);var p=function(){s("normal")},h=function(S){c.current=!1,o==="loading"&&S!==null&&S!==void 0&&S.complete&&(S.naturalWidth||S.naturalHeight)&&(c.current=!0,p())},g=d&&n?{src:n}:{onLoad:p,src:t};return[h,g,o]}function ua(r,t){var e=r.x-t.x,n=r.y-t.y;return Math.hypot(e,n)}function Lp(r,t,e,n){var a=ua(r,e),i=ua(t,n);if(a===0&&i===0)return[r.x,r.y];var o=a/(a+i),s=r.x+o*(t.x-r.x),c=r.y+o*(t.y-r.y);return[s,c]}function Dp(r,t,e,n,a,i,o){var s=a.rotate,c=a.scale,d=a.x,p=a.y,h=u.useState(!1),g=pe(h,2),m=g[0],S=g[1],b=u.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),f=function(E){b.current=ce(ce({},b.current),E)},v=function(E){if(t){E.stopPropagation(),S(!0);var I=E.touches,N=I===void 0?[]:I;N.length>1?f({point1:{x:N[0].clientX,y:N[0].clientY},point2:{x:N[1].clientX,y:N[1].clientY},eventType:"touchZoom"}):f({point1:{x:N[0].clientX-d,y:N[0].clientY-p},eventType:"move"})}},y=function(E){var I=E.touches,N=I===void 0?[]:I,O=b.current,$=O.point1,P=O.point2,R=O.eventType;if(N.length>1&&R==="touchZoom"){var _={x:N[0].clientX,y:N[0].clientY},B={x:N[1].clientX,y:N[1].clientY},L=Lp($,P,_,B),k=pe(L,2),H=k[0],V=k[1],K=ua(_,B)/ua($,P);o(K,"touchZoom",H,V,!0),f({point1:_,point2:B,eventType:"touchZoom"})}else R==="move"&&(i({x:N[0].clientX-$.x,y:N[0].clientY-$.y},"move"),f({eventType:"move"}))},x=function(){if(e){if(m&&S(!1),f({eventType:"none"}),n>c)return i({x:0,y:0,scale:n},"touchZoom");var E=r.current.offsetWidth*c,I=r.current.offsetHeight*c,N=r.current.getBoundingClientRect(),O=N.left,$=N.top,P=s%180!==0,R=Ns(P?I:E,P?E:I,O,$);R&&i(ce({},R),"dragRebound")}};return u.useEffect(function(){var A;return e&&t&&(A=Yr(window,"touchmove",function(E){return E.preventDefault()},{passive:!1})),function(){var E;(E=A)===null||E===void 0||E.remove()}},[e,t]),{isTouching:m,onTouchStart:v,onTouchMove:y,onTouchEnd:x}}var zp=["fallback","src","imgRef"],Bp=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],jp=function(t){var e=t.fallback,n=t.src,a=t.imgRef,i=bt(t,zp),o=Ps({src:n,fallback:e}),s=pe(o,2),c=s[0],d=s[1];return D.createElement("img",Le({ref:function(h){a.current=h,c(h)}},i,d))},Os=function(t){var e=t.prefixCls,n=t.src,a=t.alt,i=t.imageInfo,o=t.fallback,s=t.movable,c=s===void 0?!0:s,d=t.onClose,p=t.visible,h=t.icons,g=h===void 0?{}:h,m=t.rootClassName,S=t.closeIcon,b=t.getContainer,f=t.current,v=f===void 0?0:f,y=t.count,x=y===void 0?1:y,A=t.countRender,E=t.scaleStep,I=E===void 0?.5:E,N=t.minScale,O=N===void 0?1:N,$=t.maxScale,P=$===void 0?50:$,R=t.transitionName,_=R===void 0?"zoom":R,B=t.maskTransitionName,L=B===void 0?"fade":B,k=t.imageRender,H=t.imgCommonProps,V=t.toolbarRender,K=t.onTransform,q=t.onChange,ue=bt(t,Bp),G=u.useRef(),Z=u.useContext(Nn),Q=Z&&x>1,re=Z&&x>=1,Y=u.useState(!0),ee=pe(Y,2),se=ee[0],U=ee[1],W=Rp(G,O,P,K),X=W.transform,ie=W.resetTransform,ye=W.updateTransform,_e=W.dispatchZoomChange,ze=Tp(G,c,p,I,X,ye,_e),Oe=ze.isMoving,Ze=ze.onMouseDown,fe=ze.onWheel,Ae=Dp(G,c,p,O,X,ye,_e),be=Ae.isTouching,ke=Ae.onTouchStart,$e=Ae.onTouchMove,rt=Ae.onTouchEnd,He=X.rotate,Ee=X.scale,Ie=ne(le({},"".concat(e,"-moving"),Oe));u.useEffect(function(){se||U(!0)},[se]);var Xe=function(){ie("close")},ht=function(){_e(Xr+I,"zoomIn")},Fe=function(){_e(Xr/(Xr+I),"zoomOut")},Ce=function(){ye({rotate:He+90},"rotateRight")},Qe=function(){ye({rotate:He-90},"rotateLeft")},nt=function(){ye({flipX:!X.flipX},"flipX")},Mt=function(){ye({flipY:!X.flipY},"flipY")},vt=function(){ie("reset")},qt=function(Be){Be==null||Be.preventDefault(),Be==null||Be.stopPropagation(),v>0&&(U(!1),ie("prev"),q==null||q(v-1,v))},et=function(Be){Be==null||Be.preventDefault(),Be==null||Be.stopPropagation(),v<x-1&&(U(!1),ie("next"),q==null||q(v+1,v))},at=function(Be){!p||!Q||(Be.keyCode===ot.LEFT?qt():Be.keyCode===ot.RIGHT&&et())},yt=function(Be){p&&(Ee!==1?ye({x:0,y:0,scale:1},"doubleClick"):_e(Xr+I,"doubleClick",Be.clientX,Be.clientY))};u.useEffect(function(){var Ge=Yr(window,"keydown",at,!1);return function(){Ge.remove()}},[p,Q,v]);var gr=D.createElement(jp,Le({},H,{width:t.width,height:t.height,imgRef:G,className:"".concat(e,"-img"),alt:a,style:{transform:"translate3d(".concat(X.x,"px, ").concat(X.y,"px, 0) scale3d(").concat(X.flipX?"-":"").concat(Ee,", ").concat(X.flipY?"-":"").concat(Ee,", 1) rotate(").concat(He,"deg)"),transitionDuration:(!se||be)&&"0s"},fallback:o,src:n,onWheel:fe,onMouseDown:Ze,onDoubleClick:yt,onTouchStart:ke,onTouchMove:$e,onTouchEnd:rt,onTouchCancel:rt})),Kt=ce({url:n,alt:a},i);return D.createElement(D.Fragment,null,D.createElement(Il,Le({transitionName:_,maskTransitionName:L,closable:!1,keyboard:!0,prefixCls:e,onClose:d,visible:p,classNames:{wrapper:Ie},rootClassName:m,getContainer:b},ue,{afterClose:Xe}),D.createElement("div",{className:"".concat(e,"-img-wrapper")},k?k(gr,ce({transform:X,image:Kt},Z?{current:v}:{})):gr)),D.createElement(Ip,{visible:p,transform:X,maskTransitionName:L,closeIcon:S,getContainer:b,prefixCls:e,rootClassName:m,icons:g,countRender:A,showSwitch:Q,showProgress:re,current:v,count:x,scale:Ee,minScale:O,maxScale:P,toolbarRender:V,onSwitchLeft:qt,onSwitchRight:et,onZoomIn:ht,onZoomOut:Fe,onRotateRight:Ce,onRotateLeft:Qe,onFlipX:nt,onFlipY:Mt,onClose:d,onReset:vt,zIndex:ue.zIndex!==void 0?ue.zIndex+1:void 0,image:Kt}))},si=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Hp(r){var t=u.useState({}),e=pe(t,2),n=e[0],a=e[1],i=u.useCallback(function(s,c){return a(function(d){return ce(ce({},d),{},le({},s,c))}),function(){a(function(d){var p=ce({},d);return delete p[s],p})}},[]),o=u.useMemo(function(){return r?r.map(function(s){if(typeof s=="string")return{data:{src:s}};var c={};return Object.keys(s).forEach(function(d){["src"].concat(gt(si)).includes(d)&&(c[d]=s[d])}),{data:c}}):Object.keys(n).reduce(function(s,c){var d=n[c],p=d.canPreview,h=d.data;return p&&s.push({data:h,id:c}),s},[])},[r,n]);return[o,i,!!r]}var Vp=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Fp=["src"],Up=function(t){var e,n=t.previewPrefixCls,a=n===void 0?"rc-image-preview":n,i=t.children,o=t.icons,s=o===void 0?{}:o,c=t.items,d=t.preview,p=t.fallback,h=xr(d)==="object"?d:{},g=h.visible,m=h.onVisibleChange,S=h.getContainer,b=h.current,f=h.movable,v=h.minScale,y=h.maxScale,x=h.countRender,A=h.closeIcon,E=h.onChange,I=h.onTransform,N=h.toolbarRender,O=h.imageRender,$=bt(h,Vp),P=Hp(c),R=pe(P,3),_=R[0],B=R[1],L=R[2],k=kt(0,{value:b}),H=pe(k,2),V=H[0],K=H[1],q=u.useState(!1),ue=pe(q,2),G=ue[0],Z=ue[1],Q=((e=_[V])===null||e===void 0?void 0:e.data)||{},re=Q.src,Y=bt(Q,Fp),ee=kt(!!g,{value:g,onChange:function(be,ke){m==null||m(be,ke,V)}}),se=pe(ee,2),U=se[0],W=se[1],X=u.useState(null),ie=pe(X,2),ye=ie[0],_e=ie[1],ze=u.useCallback(function(Ae,be,ke,$e){var rt=L?_.findIndex(function(He){return He.data.src===be}):_.findIndex(function(He){return He.id===Ae});K(rt<0?0:rt),W(!0),_e({x:ke,y:$e}),Z(!0)},[_,L]);u.useEffect(function(){U?G||K(0):Z(!1)},[U]);var Oe=function(be,ke){K(be),E==null||E(be,ke)},Ze=function(){W(!1),_e(null)},fe=u.useMemo(function(){return{register:B,onPreview:ze}},[B,ze]);return u.createElement(Nn.Provider,{value:fe},i,u.createElement(Os,Le({"aria-hidden":!U,movable:f,visible:U,prefixCls:a,closeIcon:A,onClose:Ze,mousePosition:ye,imgCommonProps:Y,src:re,fallback:p,icons:s,minScale:v,maxScale:y,getContainer:S,current:V,count:_.length,countRender:x,onTransform:I,toolbarRender:N,imageRender:O,onChange:Oe},$)))},ao=0;function Gp(r,t){var e=u.useState(function(){return ao+=1,String(ao)}),n=pe(e,1),a=n[0],i=u.useContext(Nn),o={data:t,canPreview:r};return u.useEffect(function(){if(i)return i.register(a,o)},[]),u.useEffect(function(){i&&i.register(a,o)},[r,t]),a}var Wp=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Yp=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],wi=function(t){var e=t.src,n=t.alt,a=t.onPreviewClose,i=t.prefixCls,o=i===void 0?"rc-image":i,s=t.previewPrefixCls,c=s===void 0?"".concat(o,"-preview"):s,d=t.placeholder,p=t.fallback,h=t.width,g=t.height,m=t.style,S=t.preview,b=S===void 0?!0:S,f=t.className,v=t.onClick,y=t.onError,x=t.wrapperClassName,A=t.wrapperStyle,E=t.rootClassName,I=bt(t,Wp),N=d&&d!==!0,O=xr(b)==="object"?b:{},$=O.src,P=O.visible,R=P===void 0?void 0:P,_=O.onVisibleChange,B=_===void 0?a:_,L=O.getContainer,k=L===void 0?void 0:L,H=O.mask,V=O.maskClassName,K=O.movable,q=O.icons,ue=O.scaleStep,G=O.minScale,Z=O.maxScale,Q=O.imageRender,re=O.toolbarRender,Y=bt(O,Yp),ee=$??e,se=kt(!!R,{value:R,onChange:B}),U=pe(se,2),W=U[0],X=U[1],ie=Ps({src:e,isCustomPlaceholder:N,fallback:p}),ye=pe(ie,3),_e=ye[0],ze=ye[1],Oe=ye[2],Ze=u.useState(null),fe=pe(Ze,2),Ae=fe[0],be=fe[1],ke=u.useContext(Nn),$e=!!b,rt=function(){X(!1),be(null)},He=ne(o,x,E,le({},"".concat(o,"-error"),Oe==="error")),Ee=u.useMemo(function(){var Fe={};return si.forEach(function(Ce){t[Ce]!==void 0&&(Fe[Ce]=t[Ce])}),Fe},si.map(function(Fe){return t[Fe]})),Ie=u.useMemo(function(){return ce(ce({},Ee),{},{src:ee})},[ee,Ee]),Xe=Gp($e,Ie),ht=function(Ce){var Qe=kp(Ce.target),nt=Qe.left,Mt=Qe.top;ke?ke.onPreview(Xe,ee,nt,Mt):(be({x:nt,y:Mt}),X(!0)),v==null||v(Ce)};return u.createElement(u.Fragment,null,u.createElement("div",Le({},I,{className:He,onClick:$e?ht:v,style:ce({width:h,height:g},A)}),u.createElement("img",Le({},Ee,{className:ne("".concat(o,"-img"),le({},"".concat(o,"-img-placeholder"),d===!0),f),style:ce({height:g},m),ref:_e},ze,{width:h,height:g,onError:y})),Oe==="loading"&&u.createElement("div",{"aria-hidden":"true",className:"".concat(o,"-placeholder")},d),H&&$e&&u.createElement("div",{className:ne("".concat(o,"-mask"),V),style:{display:(m==null?void 0:m.display)==="none"?"none":void 0}},H)),!ke&&$e&&u.createElement(Os,Le({"aria-hidden":!W,visible:W,prefixCls:c,onClose:rt,mousePosition:Ae,src:ee,alt:n,imageInfo:{width:h,height:g},fallback:p,getContainer:k,icons:q,movable:K,scaleStep:ue,minScale:G,maxScale:Z,rootClassName:E,imageRender:Q,imgCommonProps:Ee,toolbarRender:re},Y)))};wi.PreviewGroup=Up;var Xp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},qp=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:Xp}))},Kp=u.forwardRef(qp),Zp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},Qp=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:Zp}))},Jp=u.forwardRef(Qp),eh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},th=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:eh}))},io=u.forwardRef(th),rh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},nh=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:rh}))},ah=u.forwardRef(nh),ih={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},oh=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:ih}))},sh=u.forwardRef(oh);const li=r=>({position:r||"absolute",inset:0}),lh=r=>{const{iconCls:t,motionDurationSlow:e,paddingXXS:n,marginXXS:a,prefixCls:i,colorTextLightSolid:o}=r;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:o,background:new Qt("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${e}`,[`.${i}-mask-info`]:Object.assign(Object.assign({},Ho),{padding:`0 ${te(n)}`,[t]:{marginInlineEnd:a,svg:{verticalAlign:"baseline"}}})}},ch=r=>{const{previewCls:t,modalMaskBg:e,paddingSM:n,marginXL:a,margin:i,paddingLG:o,previewOperationColorDisabled:s,previewOperationHoverColor:c,motionDurationSlow:d,iconCls:p,colorTextLightSolid:h}=r,g=new Qt(e).setAlpha(.1),m=g.clone().setAlpha(.2);return{[`${t}-footer`]:{position:"fixed",bottom:a,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:r.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:i},[`${t}-close`]:{position:"fixed",top:a,right:{_skip_check_:!0,value:a},display:"flex",color:h,backgroundColor:g.toRgbString(),borderRadius:"50%",padding:n,outline:0,border:0,cursor:"pointer",transition:`all ${d}`,"&:hover":{backgroundColor:m.toRgbString()},[`& > ${p}`]:{fontSize:r.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${te(o)}`,backgroundColor:g.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:n,padding:n,cursor:"pointer",transition:`all ${d}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${p}`]:{color:c},"&-disabled":{color:s,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${p}`]:{fontSize:r.previewOperationSize}}}}},uh=r=>{const{modalMaskBg:t,iconCls:e,previewOperationColorDisabled:n,previewCls:a,zIndexPopup:i,motionDurationSlow:o}=r,s=new Qt(t).setAlpha(.1),c=s.clone().setAlpha(.2);return{[`${a}-switch-left, ${a}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:r.calc(i).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:r.imagePreviewSwitchSize,height:r.imagePreviewSwitchSize,marginTop:r.calc(r.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:r.previewOperationColor,background:s.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${o}`,userSelect:"none","&:hover":{background:c.toRgbString()},"&-disabled":{"&, &:hover":{color:n,background:"transparent",cursor:"not-allowed",[`> ${e}`]:{cursor:"not-allowed"}}},[`> ${e}`]:{fontSize:r.previewOperationSize}},[`${a}-switch-left`]:{insetInlineStart:r.marginSM},[`${a}-switch-right`]:{insetInlineEnd:r.marginSM}}},dh=r=>{const{motionEaseOut:t,previewCls:e,motionDurationSlow:n,componentCls:a}=r;return[{[`${a}-preview-root`]:{[e]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${e}-body`]:Object.assign(Object.assign({},li()),{overflow:"hidden"}),[`${e}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${n} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},li()),{transition:`transform ${n} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${e}-moving`]:{[`${e}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${a}-preview-root`]:{[`${e}-wrap`]:{zIndex:r.zIndexPopup}}},{[`${a}-preview-operations-wrapper`]:{position:"fixed",zIndex:r.calc(r.zIndexPopup).add(1).equal()},"&":[ch(r),uh(r)]}]},ph=r=>{const{componentCls:t}=r;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:r.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},lh(r)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},li())}}},hh=r=>{const{previewCls:t}=r;return{[`${t}-root`]:To(r,"zoom"),"&":_l(r,!0)}},mh=r=>({zIndexPopup:r.zIndexPopupBase+80,previewOperationColor:new Qt(r.colorTextLightSolid).setAlpha(.65).toRgbString(),previewOperationHoverColor:new Qt(r.colorTextLightSolid).setAlpha(.85).toRgbString(),previewOperationColorDisabled:new Qt(r.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:r.fontSizeIcon*1.5}),ks=dr("Image",r=>{const t=`${r.componentCls}-preview`,e=er(r,{previewCls:t,modalMaskBg:new Qt("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:r.controlHeightLG});return[ph(e),dh(e),Rl(er(e,{componentCls:t})),hh(e)]},mh);var gh=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const Is={rotateLeft:u.createElement(Kp,null),rotateRight:u.createElement(Jp,null),zoomIn:u.createElement(ah,null),zoomOut:u.createElement(sh,null),close:u.createElement($l,null),left:u.createElement(Tl,null),right:u.createElement(Bo,null),flipX:u.createElement(io,null),flipY:u.createElement(io,{rotate:90})},fh=r=>{var{previewPrefixCls:t,preview:e}=r,n=gh(r,["previewPrefixCls","preview"]);const{getPrefixCls:a}=u.useContext(_t),i=a("image",t),o=`${i}-preview`,s=a(),c=rn(i),[d,p,h]=ks(i,c),[g]=Go("ImagePreview",typeof e=="object"?e.zIndex:void 0),m=u.useMemo(()=>{var S;if(e===!1)return e;const b=typeof e=="object"?e:{},f=ne(p,h,c,(S=b.rootClassName)!==null&&S!==void 0?S:"");return Object.assign(Object.assign({},b),{transitionName:An(s,"zoom",b.transitionName),maskTransitionName:An(s,"fade",b.maskTransitionName),rootClassName:f,zIndex:g})},[e]);return d(u.createElement(wi.PreviewGroup,Object.assign({preview:m,previewPrefixCls:o,icons:Is},n)))};var oo=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(r);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(r,n[a])&&(e[n[a]]=r[n[a]]);return e};const Rs=r=>{var t;const{prefixCls:e,preview:n,className:a,rootClassName:i,style:o}=r,s=oo(r,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:c,locale:d=Ti,getPopupContainer:p,image:h}=u.useContext(_t),g=c("image",e),m=c(),S=d.Image||Ti.Image,b=rn(g),[f,v,y]=ks(g,b),x=ne(i,v,y,b),A=ne(a,v,h==null?void 0:h.className),[E]=Go("ImagePreview",typeof n=="object"?n.zIndex:void 0),I=u.useMemo(()=>{var O;if(n===!1)return n;const $=typeof n=="object"?n:{},{getContainer:P,closeIcon:R}=$,_=oo($,["getContainer","closeIcon"]);return Object.assign(Object.assign({mask:u.createElement("div",{className:`${g}-mask-info`},u.createElement(cc,null),S==null?void 0:S.preview),icons:Is},_),{getContainer:P??p,transitionName:An(m,"zoom",$.transitionName),maskTransitionName:An(m,"fade",$.maskTransitionName),zIndex:E,closeIcon:R??((O=h==null?void 0:h.preview)===null||O===void 0?void 0:O.closeIcon)})},[n,S,(t=h==null?void 0:h.preview)===null||t===void 0?void 0:t.closeIcon]),N=Object.assign(Object.assign({},h==null?void 0:h.style),o);return f(u.createElement(wi,Object.assign({prefixCls:g,preview:I,rootClassName:x,className:A,style:N},s)))};Rs.PreviewGroup=fh;var vh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},yh=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:vh}))},bh=u.forwardRef(yh),Sh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},Mh=function(t,e){return u.createElement(pr,Le({},t,{ref:e,icon:Sh}))},Ch=u.forwardRef(Mh);function Ah(r){return r?!r.trim():!0}const Eh=r=>{const e=r.split("/").pop();if(e===void 0||Ah(e))return"";const n=e.lastIndexOf(".");return n&&n!=-1?e.slice(n+1,e.length):""},xh=["jpg","jpeg","png"],wh=r=>xh.includes(r),Nh="_container_1bqyu_1",Ph="_view_1bqyu_9",so={container:Nh,view:Ph};function Sn(){return Sn=Object.assign?Object.assign.bind():function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},Sn.apply(this,arguments)}var Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pn(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ja,_s={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/ja=_s,function(){var r={}.hasOwnProperty;function t(){for(var e=[],n=0;n<arguments.length;n++){var a=arguments[n];if(a){var i=typeof a;if(i==="string"||i==="number")e.push(a);else if(Array.isArray(a)){if(a.length){var o=t.apply(null,a);o&&e.push(o)}}else if(i==="object")if(a.toString===Object.prototype.toString)for(var s in a)r.call(a,s)&&a[s]&&e.push(s);else e.push(a.toString())}}return e.join(" ")}ja.exports?(t.default=t,ja.exports=t):window.classNames=t}();var ci=Pn(_s.exports),lo=NaN,Oh="[object Symbol]",kh=/^\s+|\s+$/g,Ih=/^[-+]0x[0-9a-f]+$/i,Rh=/^0b[01]+$/i,_h=/^0o[0-7]+$/i,Th=parseInt,$h=Object.prototype.toString;function co(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function Ha(r){if(typeof r=="number")return r;if(function(n){return typeof n=="symbol"||function(a){return!!a&&typeof a=="object"}(n)&&$h.call(n)==Oh}(r))return lo;if(co(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=co(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(kh,"");var e=Rh.test(r);return e||_h.test(r)?Th(r.slice(2),e?2:8):Ih.test(r)?lo:+r}var Wt=Pn(function(r,t,e){return e===void 0&&(e=t,t=void 0),e!==void 0&&(e=(e=Ha(e))==e?e:0),t!==void 0&&(t=(t=Ha(t))==t?t:0),function(n,a,i){return n==n&&(i!==void 0&&(n=n<=i?n:i),a!==void 0&&(n=n>=a?n:a)),n}(Ha(r),t,e)}),ui={exports:{}};(function(r,t){var e="__lodash_hash_undefined__",n=1,a=2,i=9007199254740991,o="[object Arguments]",s="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",p="[object Date]",h="[object Error]",g="[object Function]",m="[object GeneratorFunction]",S="[object Map]",b="[object Number]",f="[object Null]",v="[object Object]",y="[object Promise]",x="[object Proxy]",A="[object RegExp]",E="[object Set]",I="[object String]",N="[object Symbol]",O="[object Undefined]",$="[object WeakMap]",P="[object ArrayBuffer]",R="[object DataView]",_=/^\[object .+?Constructor\]$/,B=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[o]=L[s]=L[P]=L[d]=L[R]=L[p]=L[h]=L[g]=L[S]=L[b]=L[v]=L[A]=L[E]=L[I]=L[$]=!1;var k=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr,H=typeof self=="object"&&self&&self.Object===Object&&self,V=k||H||Function("return this")(),K=t&&!t.nodeType&&t,q=K&&r&&!r.nodeType&&r,ue=q&&q.exports===K,G=ue&&k.process,Z=function(){try{return G&&G.binding&&G.binding("util")}catch{}}(),Q=Z&&Z.isTypedArray;function re(w,T){for(var F=-1,J=w==null?0:w.length;++F<J;)if(T(w[F],F,w))return!0;return!1}function Y(w){var T=-1,F=Array(w.size);return w.forEach(function(J,Te){F[++T]=[Te,J]}),F}function ee(w){var T=-1,F=Array(w.size);return w.forEach(function(J){F[++T]=J}),F}var se,U,W,X=Array.prototype,ie=Function.prototype,ye=Object.prototype,_e=V["__core-js_shared__"],ze=ie.toString,Oe=ye.hasOwnProperty,Ze=(se=/[^.]+$/.exec(_e&&_e.keys&&_e.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"",fe=ye.toString,Ae=RegExp("^"+ze.call(Oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=ue?V.Buffer:void 0,ke=V.Symbol,$e=V.Uint8Array,rt=ye.propertyIsEnumerable,He=X.splice,Ee=ke?ke.toStringTag:void 0,Ie=Object.getOwnPropertySymbols,Xe=be?be.isBuffer:void 0,ht=(U=Object.keys,W=Object,function(w){return U(W(w))}),Fe=fr(V,"DataView"),Ce=fr(V,"Map"),Qe=fr(V,"Promise"),nt=fr(V,"Set"),Mt=fr(V,"WeakMap"),vt=fr(Object,"create"),qt=ar(Fe),et=ar(Ce),at=ar(Qe),yt=ar(nt),gr=ar(Mt),Kt=ke?ke.prototype:void 0,Ge=Kt?Kt.valueOf:void 0;function Be(w){var T=-1,F=w==null?0:w.length;for(this.clear();++T<F;){var J=w[T];this.set(J[0],J[1])}}function ae(w){var T=-1,F=w==null?0:w.length;for(this.clear();++T<F;){var J=w[T];this.set(J[0],J[1])}}function oe(w){var T=-1,F=w==null?0:w.length;for(this.clear();++T<F;){var J=w[T];this.set(J[0],J[1])}}function Se(w){var T=-1,F=w==null?0:w.length;for(this.__data__=new oe;++T<F;)this.add(w[T])}function he(w){var T=this.__data__=new ae(w);this.size=T.size}function Nt(w,T){var F=wr(w),J=!F&&$n(w),Te=!F&&!J&&ir(w),ge=!F&&!J&&!Te&&Dn(w),De=F||J||Te||ge,Ve=De?function(We,At){for(var Lt=-1,Et=Array(We);++Lt<We;)Et[Lt]=At(Lt);return Et}(w.length,String):[],mt=Ve.length;for(var Je in w)!Oe.call(w,Je)||De&&(Je=="length"||Te&&(Je=="offset"||Je=="parent")||ge&&(Je=="buffer"||Je=="byteLength"||Je=="byteOffset")||_n(Je,mt))||Ve.push(Je);return Ve}function Tt(w,T){for(var F=w.length;F--;)if(Tn(w[F][0],T))return F;return-1}function Ct(w){return w==null?w===void 0?O:f:Ee&&Ee in Object(w)?function(T){var F=Oe.call(T,Ee),J=T[Ee];try{T[Ee]=void 0;var Te=!0}catch{}var ge=fe.call(T);return Te&&(F?T[Ee]=J:delete T[Ee]),ge}(w):function(T){return fe.call(T)}(w)}function sn(w){return vr(w)&&Ct(w)==o}function In(w,T,F,J,Te){return w===T||(w==null||T==null||!vr(w)&&!vr(T)?w!=w&&T!=T:function(ge,De,Ve,mt,Je,We){var At=wr(ge),Lt=wr(De),Et=At?s:$t(ge),or=Lt?s:$t(De),Br=(Et=Et==o?v:Et)==v,zn=(or=or==o?v:or)==v,jr=Et==or;if(jr&&ir(ge)){if(!ir(De))return!1;At=!0,Br=!1}if(jr&&!Br)return We||(We=new he),At||Dn(ge)?cn(ge,De,Ve,mt,Je,We):function(qe,Ue,Bn,yr,Oa,Dt,sr){switch(Bn){case R:if(qe.byteLength!=Ue.byteLength||qe.byteOffset!=Ue.byteOffset)return!1;qe=qe.buffer,Ue=Ue.buffer;case P:return!(qe.byteLength!=Ue.byteLength||!Dt(new $e(qe),new $e(Ue)));case d:case p:case b:return Tn(+qe,+Ue);case h:return qe.name==Ue.name&&qe.message==Ue.message;case A:case I:return qe==Ue+"";case S:var br=Y;case E:var mn=yr&n;if(br||(br=ee),qe.size!=Ue.size&&!mn)return!1;var jn=sr.get(qe);if(jn)return jn==Ue;yr|=a,sr.set(qe,Ue);var ka=cn(br(qe),br(Ue),yr,Oa,Dt,sr);return sr.delete(qe),ka;case N:if(Ge)return Ge.call(qe)==Ge.call(Ue)}return!1}(ge,De,Et,Ve,mt,Je,We);if(!(Ve&n)){var hn=Br&&Oe.call(ge,"__wrapped__"),ki=zn&&Oe.call(De,"__wrapped__");if(hn||ki){var ll=hn?ge.value():ge,cl=ki?De.value():De;return We||(We=new he),Je(ll,cl,Ve,mt,We)}}return jr?(We||(We=new he),function(qe,Ue,Bn,yr,Oa,Dt){var sr=Bn&n,br=un(qe),mn=br.length,jn=un(Ue),ka=jn.length;if(mn!=ka&&!sr)return!1;for(var Hn=mn;Hn--;){var Nr=br[Hn];if(!(sr?Nr in Ue:Oe.call(Ue,Nr)))return!1}var Ii=Dt.get(qe);if(Ii&&Dt.get(Ue))return Ii==Ue;var Vn=!0;Dt.set(qe,Ue),Dt.set(Ue,qe);for(var Ia=sr;++Hn<mn;){var Fn=qe[Nr=br[Hn]],Un=Ue[Nr];if(yr)var Ri=sr?yr(Un,Fn,Nr,Ue,qe,Dt):yr(Fn,Un,Nr,qe,Ue,Dt);if(!(Ri===void 0?Fn===Un||Oa(Fn,Un,Bn,yr,Dt):Ri)){Vn=!1;break}Ia||(Ia=Nr=="constructor")}if(Vn&&!Ia){var Gn=qe.constructor,Wn=Ue.constructor;Gn==Wn||!("constructor"in qe)||!("constructor"in Ue)||typeof Gn=="function"&&Gn instanceof Gn&&typeof Wn=="function"&&Wn instanceof Wn||(Vn=!1)}return Dt.delete(qe),Dt.delete(Ue),Vn}(ge,De,Ve,mt,Je,We)):!1}(w,T,F,J,In,Te))}function Pa(w){return!(!pn(w)||function(T){return!!Ze&&Ze in T}(w))&&(Ln(w)?Ae:_).test(ar(w))}function ln(w){if(F=(T=w)&&T.constructor,J=typeof F=="function"&&F.prototype||ye,T!==J)return ht(w);var T,F,J,Te=[];for(var ge in Object(w))Oe.call(w,ge)&&ge!="constructor"&&Te.push(ge);return Te}function cn(w,T,F,J,Te,ge){var De=F&n,Ve=w.length,mt=T.length;if(Ve!=mt&&!(De&&mt>Ve))return!1;var Je=ge.get(w);if(Je&&ge.get(T))return Je==T;var We=-1,At=!0,Lt=F&a?new Se:void 0;for(ge.set(w,T),ge.set(T,w);++We<Ve;){var Et=w[We],or=T[We];if(J)var Br=De?J(or,Et,We,T,w,ge):J(Et,or,We,w,T,ge);if(Br!==void 0){if(Br)continue;At=!1;break}if(Lt){if(!re(T,function(zn,jr){if(hn=jr,!Lt.has(hn)&&(Et===zn||Te(Et,zn,F,J,ge)))return Lt.push(jr);var hn})){At=!1;break}}else if(Et!==or&&!Te(Et,or,F,J,ge)){At=!1;break}}return ge.delete(w),ge.delete(T),At}function un(w){return function(T,F,J){var Te=F(T);return wr(T)?Te:function(ge,De){for(var Ve=-1,mt=De.length,Je=ge.length;++Ve<mt;)ge[Je+Ve]=De[Ve];return ge}(Te,J(T))}(w,je,Rn)}function zr(w,T){var F,J,Te=w.__data__;return((J=typeof(F=T))=="string"||J=="number"||J=="symbol"||J=="boolean"?F!=="__proto__":F===null)?Te[typeof T=="string"?"string":"hash"]:Te.map}function fr(w,T){var F=function(J,Te){return J==null?void 0:J[Te]}(w,T);return Pa(F)?F:void 0}Be.prototype.clear=function(){this.__data__=vt?vt(null):{},this.size=0},Be.prototype.delete=function(w){var T=this.has(w)&&delete this.__data__[w];return this.size-=T?1:0,T},Be.prototype.get=function(w){var T=this.__data__;if(vt){var F=T[w];return F===e?void 0:F}return Oe.call(T,w)?T[w]:void 0},Be.prototype.has=function(w){var T=this.__data__;return vt?T[w]!==void 0:Oe.call(T,w)},Be.prototype.set=function(w,T){var F=this.__data__;return this.size+=this.has(w)?0:1,F[w]=vt&&T===void 0?e:T,this},ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(w){var T=this.__data__,F=Tt(T,w);return!(F<0)&&(F==T.length-1?T.pop():He.call(T,F,1),--this.size,!0)},ae.prototype.get=function(w){var T=this.__data__,F=Tt(T,w);return F<0?void 0:T[F][1]},ae.prototype.has=function(w){return Tt(this.__data__,w)>-1},ae.prototype.set=function(w,T){var F=this.__data__,J=Tt(F,w);return J<0?(++this.size,F.push([w,T])):F[J][1]=T,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new Be,map:new(Ce||ae),string:new Be}},oe.prototype.delete=function(w){var T=zr(this,w).delete(w);return this.size-=T?1:0,T},oe.prototype.get=function(w){return zr(this,w).get(w)},oe.prototype.has=function(w){return zr(this,w).has(w)},oe.prototype.set=function(w,T){var F=zr(this,w),J=F.size;return F.set(w,T),this.size+=F.size==J?0:1,this},Se.prototype.add=Se.prototype.push=function(w){return this.__data__.set(w,e),this},Se.prototype.has=function(w){return this.__data__.has(w)},he.prototype.clear=function(){this.__data__=new ae,this.size=0},he.prototype.delete=function(w){var T=this.__data__,F=T.delete(w);return this.size=T.size,F},he.prototype.get=function(w){return this.__data__.get(w)},he.prototype.has=function(w){return this.__data__.has(w)},he.prototype.set=function(w,T){var F=this.__data__;if(F instanceof ae){var J=F.__data__;if(!Ce||J.length<199)return J.push([w,T]),this.size=++F.size,this;F=this.__data__=new oe(J)}return F.set(w,T),this.size=F.size,this};var Rn=Ie?function(w){return w==null?[]:(w=Object(w),function(T,F){for(var J=-1,Te=T==null?0:T.length,ge=0,De=[];++J<Te;){var Ve=T[J];F(Ve,J,T)&&(De[ge++]=Ve)}return De}(Ie(w),function(T){return rt.call(w,T)}))}:function(){return[]},$t=Ct;function _n(w,T){return!!(T=T??i)&&(typeof w=="number"||B.test(w))&&w>-1&&w%1==0&&w<T}function ar(w){if(w!=null){try{return ze.call(w)}catch{}try{return w+""}catch{}}return""}function Tn(w,T){return w===T||w!=w&&T!=T}(Fe&&$t(new Fe(new ArrayBuffer(1)))!=R||Ce&&$t(new Ce)!=S||Qe&&$t(Qe.resolve())!=y||nt&&$t(new nt)!=E||Mt&&$t(new Mt)!=$)&&($t=function(w){var T=Ct(w),F=T==v?w.constructor:void 0,J=F?ar(F):"";if(J)switch(J){case qt:return R;case et:return S;case at:return y;case yt:return E;case gr:return $}return T});var $n=sn(function(){return arguments}())?sn:function(w){return vr(w)&&Oe.call(w,"callee")&&!rt.call(w,"callee")},wr=Array.isArray,ir=Xe||function(){return!1};function Ln(w){if(!pn(w))return!1;var T=Ct(w);return T==g||T==m||T==c||T==x}function dn(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=i}function pn(w){var T=typeof w;return w!=null&&(T=="object"||T=="function")}function vr(w){return w!=null&&typeof w=="object"}var Dn=Q?function(w){return function(T){return w(T)}}(Q):function(w){return vr(w)&&dn(w.length)&&!!L[Ct(w)]};function je(w){return(T=w)!=null&&dn(T.length)&&!Ln(T)?Nt(w):ln(w);var T}r.exports=function(w,T){return In(w,T)}})(ui,ui.exports);var Lh=Pn(ui.exports);function uo(r,t,e){return r[t]?r[t][0]?r[t][0][e]:r[t][e]:t==="contentBoxSize"?r.contentRect[e==="inlineSize"?"width":"height"]:void 0}function Dh(r){r===void 0&&(r={});var t=r.onResize,e=u.useRef(void 0);e.current=t;var n=r.round||Math.round,a=u.useRef(),i=u.useState({width:void 0,height:void 0}),o=i[0],s=i[1],c=u.useRef(!1);u.useEffect(function(){return c.current=!1,function(){c.current=!0}},[]);var d=u.useRef({width:void 0,height:void 0}),p=function(h,g){var m=u.useRef(null),S=u.useRef(null);S.current=g;var b=u.useRef(null);u.useEffect(function(){f()});var f=u.useCallback(function(){var v=b.current,y=S.current,x=v||(y?y instanceof Element?y:y.current:null);m.current&&m.current.element===x&&m.current.subscriber===h||(m.current&&m.current.cleanup&&m.current.cleanup(),m.current={element:x,subscriber:h,cleanup:x?h(x):void 0})},[h]);return u.useEffect(function(){return function(){m.current&&m.current.cleanup&&(m.current.cleanup(),m.current=null)}},[]),u.useCallback(function(v){b.current=v,f()},[f])}(u.useCallback(function(h){return a.current&&a.current.box===r.box&&a.current.round===n||(a.current={box:r.box,round:n,instance:new ResizeObserver(function(g){var m=g[0],S=r.box==="border-box"?"borderBoxSize":r.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",b=uo(m,S,"inlineSize"),f=uo(m,S,"blockSize"),v=b?n(b):void 0,y=f?n(f):void 0;if(d.current.width!==v||d.current.height!==y){var x={width:v,height:y};d.current.width=v,d.current.height=y,e.current?e.current(x):c.current||s(x)}})}),a.current.instance.observe(h,{box:r.box}),function(){a.current&&a.current.instance.unobserve(h)}},[r.box,n]),r.ref);return u.useMemo(function(){return{ref:p,width:o.width,height:o.height}},[p,o.width,o.height])}var zh="allotment-module_splitView__L-yRc",Bh="allotment-module_sashContainer__fzwJF",jh="allotment-module_splitViewContainer__rQnVa",Ts="allotment-module_splitViewView__MGZ6O",Hh="allotment-module_vertical__WSwwa",Vh="allotment-module_horizontal__7doS8",Fh="allotment-module_separatorBorder__x-rDS";let gn,$s=!1,Ls=!1;typeof navigator=="object"&&(gn=navigator.userAgent,Ls=gn.indexOf("Macintosh")>=0,$s=(gn.indexOf("Macintosh")>=0||gn.indexOf("iPad")>=0||gn.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const Ds=$s,Uh=Ls,po=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?u.useLayoutEffect:u.useEffect;let Gh=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(t){this._size=t}};function Kn(r,t){const e=r.length,n=e-t.length;return n>=0&&r.slice(n,e)===t}var zs={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}function a(c,d,p){this.fn=c,this.context=d,this.once=p||!1}function i(c,d,p,h,g){if(typeof p!="function")throw new TypeError("The listener must be a function");var m=new a(p,h||c,g),S=e?e+d:d;return c._events[S]?c._events[S].fn?c._events[S]=[c._events[S],m]:c._events[S].push(m):(c._events[S]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount==0?c._events=new n:delete c._events[d]}function s(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1)),s.prototype.eventNames=function(){var c,d,p=[];if(this._eventsCount===0)return p;for(d in c=this._events)t.call(c,d)&&p.push(e?d.slice(1):d);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(c)):p},s.prototype.listeners=function(c){var d=e?e+c:c,p=this._events[d];if(!p)return[];if(p.fn)return[p.fn];for(var h=0,g=p.length,m=new Array(g);h<g;h++)m[h]=p[h].fn;return m},s.prototype.listenerCount=function(c){var d=e?e+c:c,p=this._events[d];return p?p.fn?1:p.length:0},s.prototype.emit=function(c,d,p,h,g,m){var S=e?e+c:c;if(!this._events[S])return!1;var b,f,v=this._events[S],y=arguments.length;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,d),!0;case 3:return v.fn.call(v.context,d,p),!0;case 4:return v.fn.call(v.context,d,p,h),!0;case 5:return v.fn.call(v.context,d,p,h,g),!0;case 6:return v.fn.call(v.context,d,p,h,g,m),!0}for(f=1,b=new Array(y-1);f<y;f++)b[f-1]=arguments[f];v.fn.apply(v.context,b)}else{var x,A=v.length;for(f=0;f<A;f++)switch(v[f].once&&this.removeListener(c,v[f].fn,void 0,!0),y){case 1:v[f].fn.call(v[f].context);break;case 2:v[f].fn.call(v[f].context,d);break;case 3:v[f].fn.call(v[f].context,d,p);break;case 4:v[f].fn.call(v[f].context,d,p,h);break;default:if(!b)for(x=1,b=new Array(y-1);x<y;x++)b[x-1]=arguments[x];v[f].fn.apply(v[f].context,b)}}return!0},s.prototype.on=function(c,d,p){return i(this,c,d,p,!1)},s.prototype.once=function(c,d,p){return i(this,c,d,p,!0)},s.prototype.removeListener=function(c,d,p,h){var g=e?e+c:c;if(!this._events[g])return this;if(!d)return o(this,g),this;var m=this._events[g];if(m.fn)m.fn!==d||h&&!m.once||p&&m.context!==p||o(this,g);else{for(var S=0,b=[],f=m.length;S<f;S++)(m[S].fn!==d||h&&!m[S].once||p&&m[S].context!==p)&&b.push(m[S]);b.length?this._events[g]=b.length===1?b[0]:b:o(this,g)}return this},s.prototype.removeAllListeners=function(c){var d;return c?(d=e?e+c:c,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,r.exports=s})(zs);var Ni=Pn(zs.exports);function ho(r,t){const e=r.indexOf(t);e>-1&&(r.splice(e,1),r.unshift(t))}function Va(r,t){const e=r.indexOf(t);e>-1&&(r.splice(e,1),r.push(t))}function zt(r,t,e=1){const n=Math.max(0,Math.ceil((t-r)/e)),a=new Array(n);let i=-1;for(;++i<n;)a[i]=r+i*e;return a}var mo=NaN,Wh="[object Symbol]",Yh=/^\s+|\s+$/g,Xh=/^[-+]0x[0-9a-f]+$/i,qh=/^0b[01]+$/i,Kh=/^0o[0-7]+$/i,Zh=parseInt,Qh=typeof Sr=="object"&&Sr&&Sr.Object===Object&&Sr,Jh=typeof self=="object"&&self&&self.Object===Object&&self,em=Qh||Jh||Function("return this")(),tm=Object.prototype.toString,rm=Math.max,nm=Math.min,Fa=function(){return em.Date.now()};function di(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function go(r){if(typeof r=="number")return r;if(function(n){return typeof n=="symbol"||function(a){return!!a&&typeof a=="object"}(n)&&tm.call(n)==Wh}(r))return mo;if(di(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=di(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(Yh,"");var e=qh.test(r);return e||Kh.test(r)?Zh(r.slice(2),e?2:8):Xh.test(r)?mo:+r}var am=Pn(function(r,t,e){var n,a,i,o,s,c,d=0,p=!1,h=!1,g=!0;if(typeof r!="function")throw new TypeError("Expected a function");function m(y){var x=n,A=a;return n=a=void 0,d=y,o=r.apply(A,x)}function S(y){var x=y-c;return c===void 0||x>=t||x<0||h&&y-d>=i}function b(){var y=Fa();if(S(y))return f(y);s=setTimeout(b,function(x){var A=t-(x-c);return h?nm(A,i-(x-d)):A}(y))}function f(y){return s=void 0,g&&n?m(y):(n=a=void 0,o)}function v(){var y=Fa(),x=S(y);if(n=arguments,a=this,c=y,x){if(s===void 0)return function(A){return d=A,s=setTimeout(b,t),p?m(A):o}(c);if(h)return s=setTimeout(b,t),m(c)}return s===void 0&&(s=setTimeout(b,t)),o}return t=go(t)||0,di(e)&&(p=!!e.leading,i=(h="maxWait"in e)?rm(go(e.maxWait)||0,t):i,g="trailing"in e?!!e.trailing:g),v.cancel=function(){s!==void 0&&clearTimeout(s),d=0,n=c=a=s=void 0},v.flush=function(){return s===void 0?o:f(Fa())},v}),im="sash-module_sash__K-9lB",om="sash-module_disabled__Hm-wx",sm="sash-module_mac__Jf6OJ",fo="sash-module_vertical__pB-rs",lm="sash-module_minimum__-UKxp",cm="sash-module_maximum__TCWxD",vo="sash-module_horizontal__kFbiw",Ua="sash-module_hover__80W6I",Ga="sash-module_active__bJspD";let Vt=function(r){return r.Vertical="VERTICAL",r.Horizontal="HORIZONTAL",r}({}),It=function(r){return r.Disabled="DISABLED",r.Minimum="MINIMUM",r.Maximum="MAXIMUM",r.Enabled="ENABLED",r}({}),Bs=Ds?20:8;const js=new Ni;class yo extends Ni{get state(){return this._state}set state(t){this._state!==t&&(this.el.classList.toggle(om,t===It.Disabled),this.el.classList.toggle("sash-disabled",t===It.Disabled),this.el.classList.toggle(lm,t===It.Minimum),this.el.classList.toggle("sash-minimum",t===It.Minimum),this.el.classList.toggle(cm,t===It.Maximum),this.el.classList.toggle("sash-maximum",t===It.Maximum),this._state=t,this.emit("enablementChange",t))}constructor(t,e,n){var a;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=am(i=>i.classList.add("sash-hover",Ua),this.hoverDelay),this._state=It.Enabled,this.onPointerStart=i=>{const o=i.pageX,s=i.pageY,c={startX:o,currentX:o,startY:s,currentY:s};this.el.classList.add("sash-active",Ga),this.emit("start",c),this.el.setPointerCapture(i.pointerId);const d=h=>{h.preventDefault();const g={startX:o,currentX:h.pageX,startY:s,currentY:h.pageY};this.emit("change",g)},p=h=>{h.preventDefault(),this.el.classList.remove("sash-active",Ga),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(h.pointerId),window.removeEventListener("pointermove",d),window.removeEventListener("pointerup",p)};window.addEventListener("pointermove",d),window.addEventListener("pointerup",p)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(Ga)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",Ua)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",Ua)},this.el=document.createElement("div"),this.el.classList.add("sash",im),this.el.dataset.testid="sash",t.append(this.el),Uh&&this.el.classList.add("sash-mac",sm),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof n.size=="number"?(this.size=n.size,n.orientation===Vt.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Bs,js.on("onDidChangeGlobalSize",i=>{this.size=i,this.layout()})),this.layoutProvider=e,this.orientation=(a=n.orientation)!=null?a:Vt.Vertical,this.orientation===Vt.Horizontal?(this.el.classList.add("sash-horizontal",vo),this.el.classList.remove("sash-vertical",fo)):(this.el.classList.remove("sash-horizontal",vo),this.el.classList.add("sash-vertical",fo)),this.layout()}layout(){if(this.orientation===Vt.Vertical){const t=this.layoutProvider;this.el.style.left=t.getVerticalSashLeft(this)-this.size/2+"px",t.getVerticalSashTop&&(this.el.style.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(this.el.style.height=t.getVerticalSashHeight(this)+"px")}else{const t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let da;var Wa;(Wa=da||(da={})).Distribute={type:"distribute"},Wa.Split=function(r){return{type:"split",index:r}},Wa.Invisible=function(r){return{type:"invisible",cachedVisibleSize:r}};let cr=function(r){return r.Normal="NORMAL",r.Low="LOW",r.High="HIGH",r}({});class Hs{constructor(t,e,n){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=t,this.view=e,this.container.classList.add("split-view-view",Ts),this.container.dataset.testid="split-view-view",typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,t.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}set size(t){this._size=t}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(t,e){t!==this.visible&&(t?(this.size=Wt(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof e=="number"?e:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",t),this.view.setVisible&&this.view.setVisible(t))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(t){this.container.style.pointerEvents=t?"":"none"}layout(t){this.layoutContainer(t),this.view.layout(this.size,t)}}let um=class extends Hs{layoutContainer(t){this.container.style.left=`${t}px`,this.container.style.width=`${this.size}px`}},dm=class extends Hs{layoutContainer(t){this.container.style.top=`${t}px`,this.container.style.height=`${this.size}px`}};class pm extends Ni{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(t){this._startSnappingEnabled!==t&&(this._startSnappingEnabled=t,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(t){this._endSnappingEnabled!==t&&(this._endSnappingEnabled=t,this.updateSashEnablement())}constructor(t,e={},n,a,i){var o,s;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=c=>{this.emit("sashchange",c),this.saveProportions();for(const d of this.viewItems)d.enabled=!0},this.orientation=(o=e.orientation)!=null?o:Vt.Vertical,this.proportionalLayout=(s=e.proportionalLayout)!=null?s:!0,this.getSashOrthogonalSize=e.getSashOrthogonalSize,n&&(this.onDidChange=n),a&&(this.onDidDragStart=a),i&&(this.onDidDragEnd=i),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",Bh),t.prepend(this.sashContainer),e.descriptor){this.size=e.descriptor.size;for(const[c,d]of e.descriptor.views.entries()){const p=d.size,h=d.container,g=d.view;this.addView(h,g,p,c,!0)}this.contentSize=this.viewItems.reduce((c,d)=>c+d.size,0),this.saveProportions()}}addView(t,e,n,a=this.viewItems.length,i){let o;o=typeof n=="number"?n:n.type==="split"?this.getViewSize(n.index)/2:n.type==="invisible"?{cachedVisibleSize:n.cachedVisibleSize}:e.minimumSize;const s=this.orientation===Vt.Vertical?new dm(t,e,o):new um(t,e,o);if(this.viewItems.splice(a,0,s),this.viewItems.length>1){const c=this.orientation===Vt.Vertical?new yo(this.sashContainer,{getHorizontalSashTop:h=>this.getSashPosition(h),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Vt.Horizontal}):new yo(this.sashContainer,{getVerticalSashLeft:h=>this.getSashPosition(h),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Vt.Vertical}),d=this.orientation===Vt.Vertical?h=>({sash:c,start:h.startY,current:h.currentY}):h=>({sash:c,start:h.startX,current:h.currentX});c.on("start",h=>{var g;this.emit("sashDragStart"),this.onSashStart(d(h));const m=this.viewItems.map(S=>S.size);(g=this.onDidDragStart)==null||g.call(this,m)}),c.on("change",h=>this.onSashChange(d(h))),c.on("end",()=>{var h;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(m=>m.sash===c));const g=this.viewItems.map(m=>m.size);(h=this.onDidDragEnd)==null||h.call(this,g)}),c.on("reset",()=>{const h=this.sashItems.findIndex(f=>f.sash===c),g=zt(h,-1,-1),m=zt(h+1,this.viewItems.length),S=this.findFirstSnapIndex(g),b=this.findFirstSnapIndex(m);(typeof S!="number"||this.viewItems[S].visible)&&(typeof b!="number"||this.viewItems[b].visible)&&this.emit("sashreset",h)});const p={sash:c};this.sashItems.splice(a-1,0,p)}i||this.relayout(),i||typeof n=="number"||n.type!=="distribute"||this.distributeViewSizes()}removeView(t,e){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");const n=this.viewItems.splice(t,1)[0].view;if(this.viewItems.length>=1){const a=Math.max(t-1,0);this.sashItems.splice(a,1)[0].sash.dispose()}return this.relayout(),e&&e.type==="distribute"&&this.distributeViewSizes(),n}moveView(t,e,n){const a=this.getViewCachedVisibleSize(e),i=a===void 0?this.getViewSize(e):da.Invisible(a),o=this.removeView(e);this.addView(t,o,i,n)}getViewCachedVisibleSize(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].cachedVisibleSize}layout(t=this.size){const e=Math.max(this.size,this.contentSize);if(this.size=t,this.proportions)for(let n=0;n<this.viewItems.length;n++){const a=this.viewItems[n];a.size=Wt(Math.round(this.proportions[n]*t),a.minimumSize,a.maximumSize)}else{const n=zt(0,this.viewItems.length),a=n.filter(o=>this.viewItems[o].priority===cr.Low),i=n.filter(o=>this.viewItems[o].priority===cr.High);this.resize(this.viewItems.length-1,t-e,void 0,a,i)}this.distributeEmptySpace(),this.layoutViews()}resizeView(t,e){if(t<0||t>=this.viewItems.length)return;const n=zt(0,this.viewItems.length).filter(s=>s!==t),a=[...n.filter(s=>this.viewItems[s].priority===cr.Low),t],i=n.filter(s=>this.viewItems[s].priority===cr.High),o=this.viewItems[t];e=Math.round(e),e=Wt(e,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=e,this.relayout(a,i)}resizeViews(t){for(let e=0;e<t.length;e++){const n=this.viewItems[e];let a=t[e];a=Math.round(a),a=Wt(a,n.minimumSize,Math.min(n.maximumSize,this.size)),n.size=a}this.contentSize=this.viewItems.reduce((e,n)=>e+n.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size}isViewVisible(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].visible}setViewVisible(t,e){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[t].setVisible(e),this.distributeEmptySpace(t),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const t=[];let e=0;for(const s of this.viewItems)s.maximumSize-s.minimumSize>0&&(t.push(s),e+=s.size);const n=Math.floor(e/t.length);for(const s of t)s.size=Wt(n,s.minimumSize,s.maximumSize);const a=zt(0,this.viewItems.length),i=a.filter(s=>this.viewItems[s].priority===cr.Low),o=a.filter(s=>this.viewItems[s].priority===cr.High);this.relayout(i,o)}dispose(){this.sashItems.forEach(t=>t.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(t,e){const n=this.viewItems.reduce((a,i)=>a+i.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,t,e),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:t,start:e}){const n=this.sashItems.findIndex(a=>a.sash===t);(a=>{const i=this.viewItems.map(y=>y.size);let o,s,c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY;const p=zt(n,-1,-1),h=zt(n+1,this.viewItems.length),g=p.reduce((y,x)=>y+(this.viewItems[x].minimumSize-i[x]),0),m=p.reduce((y,x)=>y+(this.viewItems[x].viewMaximumSize-i[x]),0),S=h.length===0?Number.POSITIVE_INFINITY:h.reduce((y,x)=>y+(i[x]-this.viewItems[x].minimumSize),0),b=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((y,x)=>y+(i[x]-this.viewItems[x].viewMaximumSize),0);c=Math.max(g,b),d=Math.min(S,m);const f=this.findFirstSnapIndex(p),v=this.findFirstSnapIndex(h);if(typeof f=="number"){const y=this.viewItems[f],x=Math.floor(y.viewMinimumSize/2);o={index:f,limitDelta:y.visible?c-x:c+x,size:y.size}}if(typeof v=="number"){const y=this.viewItems[v],x=Math.floor(y.viewMinimumSize/2);s={index:v,limitDelta:y.visible?d+x:d-x,size:y.size}}this.sashDragState={start:a,current:a,index:n,sizes:i,minDelta:c,maxDelta:d,snapBefore:o,snapAfter:s}})(e)}onSashChange({current:t}){const{index:e,start:n,sizes:a,minDelta:i,maxDelta:o,snapBefore:s,snapAfter:c}=this.sashDragState;this.sashDragState.current=t;const d=t-n;this.resize(e,d,a,void 0,void 0,i,o,s,c),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(t){let e=0;for(let n=0;n<this.sashItems.length;n++)if(e+=this.viewItems[n].size,this.sashItems[n].sash===t)return e;return 0}resize(t,e,n=this.viewItems.map(p=>p.size),a,i,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,c,d){if(t<0||t>=this.viewItems.length)return 0;const p=zt(t,-1,-1),h=zt(t+1,this.viewItems.length);if(i)for(const N of i)ho(p,N),ho(h,N);if(a)for(const N of a)Va(p,N),Va(h,N);const g=p.map(N=>this.viewItems[N]),m=p.map(N=>n[N]),S=h.map(N=>this.viewItems[N]),b=h.map(N=>n[N]),f=p.reduce((N,O)=>N+(this.viewItems[O].minimumSize-n[O]),0),v=p.reduce((N,O)=>N+(this.viewItems[O].maximumSize-n[O]),0),y=h.length===0?Number.POSITIVE_INFINITY:h.reduce((N,O)=>N+(n[O]-this.viewItems[O].minimumSize),0),x=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((N,O)=>N+(n[O]-this.viewItems[O].maximumSize),0),A=Math.max(f,x,o),E=Math.min(y,v,s);let I=!1;if(c){const N=this.viewItems[c.index],O=e>=c.limitDelta;I=O!==N.visible,N.setVisible(O,c.size)}if(!I&&d){const N=this.viewItems[d.index],O=e<d.limitDelta;I=O!==N.visible,N.setVisible(O,d.size)}if(I)return this.resize(t,e,n,a,i,o,s);for(let N=0,O=e=Wt(e,A,E);N<g.length;N++){const $=g[N],P=Wt(m[N]+O,$.minimumSize,$.maximumSize);O-=P-m[N],$.size=P}for(let N=0,O=e;N<S.length;N++){const $=S[N],P=Wt(b[N]-O,$.minimumSize,$.maximumSize);O+=P-b[N],$.size=P}return e}distributeEmptySpace(t){const e=this.viewItems.reduce((i,o)=>i+o.size,0);let n=this.size-e;const a=zt(this.viewItems.length-1,-1,-1);typeof t=="number"&&Va(a,t);for(let i=0;n!==0&&i<a.length;i++){const o=this.viewItems[a[i]],s=Wt(o.size+n,o.minimumSize,o.maximumSize);n-=s-o.size,o.size=s}}layoutViews(){var t;this.contentSize=this.viewItems.reduce((n,a)=>n+a.size,0);let e=0;for(const n of this.viewItems)n.layout(e),e+=n.size;(t=this.onDidChange)!=null&&t.call(this,this.viewItems.map(n=>n.size)),this.sashItems.forEach(n=>n.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(t=>t.size/this.contentSize))}updateSashEnablement(){let t=!1;const e=this.viewItems.map(c=>t=c.size-c.minimumSize>0||t);t=!1;const n=this.viewItems.map(c=>t=c.maximumSize-c.size>0||t),a=[...this.viewItems].reverse();t=!1;const i=a.map(c=>t=c.size-c.minimumSize>0||t).reverse();t=!1;const o=a.map(c=>t=c.maximumSize-c.size>0||t).reverse();let s=0;for(let c=0;c<this.sashItems.length;c++){const{sash:d}=this.sashItems[c];s+=this.viewItems[c].size;const p=!(e[c]&&o[c+1]),h=!(n[c]&&i[c+1]);if(p&&h){const g=zt(c,-1,-1),m=zt(c+1,this.viewItems.length),S=this.findFirstSnapIndex(g),b=this.findFirstSnapIndex(m),f=typeof S=="number"&&!this.viewItems[S].visible,v=typeof b=="number"&&!this.viewItems[b].visible;f&&i[c]&&(s>0||this.startSnappingEnabled)?d.state=It.Minimum:v&&e[c]&&(s<this.contentSize||this.endSnappingEnabled)?d.state=It.Maximum:d.state=It.Disabled}else d.state=p&&!h?It.Minimum:!p&&h?It.Maximum:It.Enabled}}findFirstSnapIndex(t){for(const e of t){const n=this.viewItems[e];if(n.visible&&n.snap)return e}for(const e of t){const n=this.viewItems[e];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return e}}}let Ur=class{constructor(t){this.size=void 0,this.size=t}getPreferredSize(){return this.size}};class bo{constructor(t,e){this.proportion=void 0,this.layoutService=void 0,this.proportion=t,this.layoutService=e}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class Zn{getPreferredSize(){}}class So{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(t){if(typeof t=="number")this.layoutStrategy=new Ur(t);else if(typeof t=="string"){const e=t.trim();if(Kn(e,"%")){const n=Number(e.slice(0,-1))/100;this.layoutStrategy=new bo(n,this.layoutService)}else if(Kn(e,"px")){const n=Number(e.slice(0,-2))/100;this.layoutStrategy=new Ur(n)}else if(typeof Number.parseFloat(e)=="number"){const n=Number.parseFloat(e);this.layoutStrategy=new Ur(n)}else this.layoutStrategy=new Zn}else this.layoutStrategy=new Zn}constructor(t,e){var n;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=t,this.element=e.element,this.minimumSize=typeof e.minimumSize=="number"?e.minimumSize:30,this.maximumSize=typeof e.maximumSize=="number"?e.maximumSize:Number.POSITIVE_INFINITY,typeof e.preferredSize=="number")this.layoutStrategy=new Ur(e.preferredSize);else if(typeof e.preferredSize=="string"){const a=e.preferredSize.trim();if(Kn(a,"%")){const i=Number(a.slice(0,-1))/100;this.layoutStrategy=new bo(i,this.layoutService)}else if(Kn(a,"px")){const i=Number(a.slice(0,-2));this.layoutStrategy=new Ur(i)}else if(typeof Number.parseFloat(a)=="number"){const i=Number.parseFloat(a);this.layoutStrategy=new Ur(i)}else this.layoutStrategy=new Zn}else this.layoutStrategy=new Zn;this.priority=(n=e.priority)!=null?n:cr.Normal,this.snap=typeof e.snap=="boolean"&&e.snap}layout(t){}}function Mo(r){return r.minSize!==void 0||r.maxSize!==void 0||r.preferredSize!==void 0||r.priority!==void 0||r.visible!==void 0}const Pi=u.forwardRef(({className:r,children:t},e)=>D.createElement("div",{ref:e,className:ci("split-view-view",Ts,r)},t));Pi.displayName="Allotment.Pane";const Vs=u.forwardRef(({children:r,className:t,id:e,maxSize:n=1/0,minSize:a=30,proportionalLayout:i=!0,separator:o=!0,sizes:s,defaultSizes:c=s,snap:d=!1,vertical:p=!1,onChange:h,onReset:g,onVisibleChange:m,onDragStart:S,onDragEnd:b},f)=>{const v=u.useRef(null),y=u.useRef([]),x=u.useRef(new Map),A=u.useRef(null),E=u.useRef(new Map),I=u.useRef(new Gh),N=u.useRef([]),[O,$]=u.useState(!1),P=u.useMemo(()=>D.Children.toArray(r).filter(D.isValidElement),[r]),R=u.useCallback(_=>{var B,L;const k=(B=N.current)==null?void 0:B[_];return typeof(k==null?void 0:k.preferredSize)=="number"&&((L=A.current)!=null&&L.resizeView(_,Math.round(k.preferredSize)),!0)},[]);return u.useImperativeHandle(f,()=>({reset:()=>{if(g)g();else{var _;(_=A.current)==null||_.distributeViewSizes();for(let B=0;B<N.current.length;B++)R(B)}},resize:_=>{var B;(B=A.current)==null||B.resizeViews(_)}})),po(()=>{let _=!0;c&&E.current.size!==c.length&&(_=!1,console.warn(`Expected ${c.length} children based on defaultSizes but found ${E.current.size}`)),_&&c&&(y.current=P.map(k=>k.key));const B=Sn({orientation:p?Vt.Vertical:Vt.Horizontal,proportionalLayout:i},_&&c&&{descriptor:{size:c.reduce((k,H)=>k+H,0),views:c.map((k,H)=>{var V,K,q,ue;const G=x.current.get(y.current[H]),Z=new So(I.current,Sn({element:document.createElement("div"),minimumSize:(V=G==null?void 0:G.minSize)!=null?V:a,maximumSize:(K=G==null?void 0:G.maxSize)!=null?K:n,priority:(q=G==null?void 0:G.priority)!=null?q:cr.Normal},(G==null?void 0:G.preferredSize)&&{preferredSize:G==null?void 0:G.preferredSize},{snap:(ue=G==null?void 0:G.snap)!=null?ue:d}));return N.current.push(Z),{container:[...E.current.values()][H],size:k,view:Z}})}});A.current=new pm(v.current,B,h,S,b),A.current.on("sashDragStart",()=>{var k;(k=v.current)==null||k.classList.add("split-view-sash-dragging")}),A.current.on("sashDragEnd",()=>{var k;(k=v.current)==null||k.classList.remove("split-view-sash-dragging")}),A.current.on("sashchange",k=>{if(m&&A.current){const H=P.map(V=>V.key);for(let V=0;V<H.length;V++){const K=x.current.get(H[V]);(K==null?void 0:K.visible)!==void 0&&K.visible!==A.current.isViewVisible(V)&&m(V,A.current.isViewVisible(V))}}}),A.current.on("sashreset",k=>{if(g)g();else{var H;if(R(k)||R(k+1))return;(H=A.current)==null||H.distributeViewSizes()}});const L=A.current;return()=>{L.dispose()}},[]),po(()=>{if(O){const Q=P.map(U=>U.key),re=[...y.current],Y=Q.filter(U=>!y.current.includes(U)),ee=Q.filter(U=>y.current.includes(U)),se=y.current.map(U=>!Q.includes(U));for(let U=se.length-1;U>=0;U--){var _;se[U]&&((_=A.current)!=null&&_.removeView(U),re.splice(U,1),N.current.splice(U,1))}for(const U of Y){var B,L,k,H,V;const W=x.current.get(U),X=new So(I.current,Sn({element:document.createElement("div"),minimumSize:(B=W==null?void 0:W.minSize)!=null?B:a,maximumSize:(L=W==null?void 0:W.maxSize)!=null?L:n,priority:(k=W==null?void 0:W.priority)!=null?k:cr.Normal},(W==null?void 0:W.preferredSize)&&{preferredSize:W==null?void 0:W.preferredSize},{snap:(H=W==null?void 0:W.snap)!=null?H:d}));(V=A.current)!=null&&V.addView(E.current.get(U),X,da.Distribute,Q.findIndex(ie=>ie===U)),re.splice(Q.findIndex(ie=>ie===U),0,U),N.current.splice(Q.findIndex(ie=>ie===U),0,X)}for(;!Lh(Q,re);)for(const[U,W]of Q.entries()){const X=re.findIndex(ie=>ie===W);if(X!==U){var K;(K=A.current)==null||K.moveView(E.current.get(W),X,U);const ie=re[X];re.splice(X,1),re.splice(U,0,ie);break}}for(const U of Y){var q;const W=Q.findIndex(ie=>ie===U),X=N.current[W].preferredSize;X!==void 0&&((q=A.current)==null||q.resizeView(W,X))}for(const U of[...Y,...ee]){var ue,G;const W=x.current.get(U),X=Q.findIndex(ie=>ie===U);W&&Mo(W)&&W.visible!==void 0&&((ue=A.current)==null?void 0:ue.isViewVisible(X))!==W.visible&&((G=A.current)==null||G.setViewVisible(X,W.visible))}for(const U of ee){const W=x.current.get(U),X=Q.findIndex(ie=>ie===U);if(W&&Mo(W)){var Z;W.preferredSize!==void 0&&N.current[X].preferredSize!==W.preferredSize&&(N.current[X].preferredSize=W.preferredSize);let ie=!1;W.minSize!==void 0&&N.current[X].minimumSize!==W.minSize&&(N.current[X].minimumSize=W.minSize,ie=!0),W.maxSize!==void 0&&N.current[X].maximumSize!==W.maxSize&&(N.current[X].maximumSize=W.maxSize,ie=!0),ie&&((Z=A.current)==null||Z.layout())}}(Y.length>0||se.length>0)&&(y.current=Q)}},[P,O,n,a,d]),u.useEffect(()=>{A.current&&(A.current.onDidChange=h)},[h]),u.useEffect(()=>{A.current&&(A.current.onDidDragStart=S)},[S]),u.useEffect(()=>{A.current&&(A.current.onDidDragEnd=b)},[b]),Dh({ref:v,onResize:({width:_,height:B})=>{var L;_&&B&&((L=A.current)!=null&&L.layout(p?B:_),I.current.setSize(p?B:_),$(!0))}}),u.useEffect(()=>{Ds&&hm(20)},[]),D.createElement("div",{ref:v,className:ci("split-view",p?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":o},zh,p?Hh:Vh,{[Fh]:o},t),id:e},D.createElement("div",{className:ci("split-view-container",jh)},D.Children.toArray(r).map(_=>{if(!D.isValidElement(_))return null;const B=_.key;return _.type.displayName==="Allotment.Pane"?(x.current.set(B,_.props),D.cloneElement(_,{key:B,ref:L=>{const k=_.ref;k&&(k.current=L),L?E.current.set(B,L):E.current.delete(B)}})):D.createElement(Pi,{key:B,ref:L=>{L?E.current.set(B,L):E.current.delete(B)}},_)})))});function hm(r){const t=Wt(r,4,20),e=Wt(r,1,8);document.documentElement.style.setProperty("--sash-size",t+"px"),document.documentElement.style.setProperty("--sash-hover-size",e+"px"),function(n){Bs=n,js.emit("onDidChangeGlobalSize",n)}(t)}Vs.displayName="Allotment";var Pr=Object.assign(Vs,{Pane:Pi});const mm="_container_jgx61_1",gm="_title_jgx61_12",fm="_body_jgx61_18",vm="_right_jgx61_44",Qn={container:mm,title:gm,body:fm,right:vm},ym="_container_21aji_1",bm="_content_21aji_19",Co={container:ym,content:bm},Sm="_container_17mrb_1",Mm="_item_17mrb_8",Cm="_active_17mrb_21",Am="_item-slash_17mrb_24",lr={container:Sm,item:Mm,active:Cm,itemSlash:Am},Em=r=>{const{parent:t,parents:e,active:n,onClick:a}=r,i=()=>{n&&navigator.clipboard.writeText(n.code),En.info("id")};return z.jsxs("div",{className:lr.container,children:[z.jsx("div",{className:ne(lr.item,{[lr.active]:t===""}),onClick:()=>a(""),children:z.jsx("span",{children:"Root"})}),e.map(o=>z.jsxs("div",{className:ne(lr.item,{[lr.active]:t===o.code}),onClick:()=>a(o.code),children:[z.jsx("span",{className:lr.itemSlash,children:"/"}),z.jsx("span",{children:o.name})]},o.code)),n&&n.type!="folder"&&z.jsx(z.Fragment,{children:z.jsxs("div",{className:ne(lr.item,lr.active),onClick:i,children:[z.jsx("span",{className:lr.itemSlash,children:":"}),z.jsx("span",{children:n==null?void 0:n.name})]})})]})},xm="_item_4xjdi_1",wm="_item-cover_4xjdi_10",Nm="_item-cover-active_4xjdi_26",Pm="_item-image_4xjdi_29",Om="_item-name_4xjdi_36",km="_item-name-active_4xjdi_52",Gr={item:xm,itemCover:wm,itemCoverActive:Nm,itemImage:Pm,itemName:Om,itemNameActive:km},Im="data:image/svg+xml,%3csvg%20width='597'%20height='478'%20viewBox='0%200%20597%20478'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2046.286V431.014C0%20456.47%2020.682%20477.297%2045.96%20477.297H550.658C575.936%20477.297%20596.618%20456.47%20596.618%20431.014V122.364C596.618%2096.9081%20575.936%2076.0808%20550.658%2076.0808H324.592C310.804%2076.0808%20297.591%2069.7168%20288.686%2058.7246L256.514%2018.5162C247.897%207.81324%20234.97%201.44932%20221.182%201.16005L46.2472%200.00297717C20.682%20-0.286292%200%2020.5411%200%2046.286Z'%20fill='%230091FF'/%3e%3cpath%20d='M0%20212.783V425.707C0%20454.097%2020.682%20477.325%2045.96%20477.325H550.658C575.936%20477.325%20596.618%20454.097%20596.618%20425.707V81.4798C596.618%2053.0899%20575.936%2029.8618%20550.658%2029.8618H369.116C358.488%2029.8618%20347.859%2034.0558%20339.816%2041.7985L223.48%20150.519C215.15%20158.262%20204.522%20162.456%20193.606%20162.456L46.2472%20160.842C20.682%20160.842%200%20184.071%200%20212.783Z'%20fill='%23B7D9F8'/%3e%3c/svg%3e",Rm="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886943620'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='12284'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M534%20352V136H232v752h560V394H576a42%2042%200%200%201-42-42z'%20fill='%23D9D9D9'%20p-id='12285'%3e%3c/path%3e%3cpath%20d='M854.6%20288.6L639.4%2073.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7%200-32%2014.3-32%2032v832c0%2017.7%2014.3%2032%2032%2032h640c17.7%200%2032-14.3%2032-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602%20137.8L790.2%20326H602V137.8zM792%20888H232V136h302v216a42%2042%200%200%200%2042%2042h216v494z'%20p-id='12286'%3e%3c/path%3e%3c/svg%3e",_m="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887095606'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='17156'%20width='170'%20height='170'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M648.76544%200c24.40704%200%2047.8208%209.68704%2065.09568%2026.9312l187.61728%20187.21792a92.16%2092.16%200%200%201%2027.05408%2065.2288v120.6272c44.2368%200%2080.09728%2035.85536%2080.10752%2080.08704v319.7952c0%2043.24864-34.3296%2078.6944-77.55776%2080.06656l-2.54976%200.03072v48.00512c0%2053.02272-43.02848%2096-96.12288%2096H191.5904c-53.0944%200-96.12288-42.97728-96.12288-96v-48.00512c-44.2368%200-80.09728-35.85536-80.10752-80.08704V480.1024c0-43.24864%2034.3296-78.6944%2077.55776-80.06656l2.54976-0.04096V96C95.46752%2042.97728%20138.496%200%20191.5904%200h457.17504z%20m183.64416%20879.99488H191.5904v17.28512a30.72%2030.72%200%200%200%2030.72%2030.72h579.3792a30.72%2030.72%200%200%200%2030.72-30.72v-17.28512z%20m-409.088-329.86112H297.984L267.75552%20721.92h38.33856l10.81344-61.68576h81.59232l6.144-34.16064H323.05152l7.12704-40.79616H417.1776l6.144-35.14368z%20m114.03264-0.24576h-84.7872L422.33856%20721.92h87.73632c36.864%200%2059.22816-12.288%2068.32128-40.30464%206.144-19.16928%200.49152-42.02496-19.90656-49.88928%2021.62688-9.33888%2029.98272-25.31328%2029.98272-42.27072%200-26.78784-21.38112-39.56736-51.11808-39.56736z%20m115.75296%200h-42.02496l-0.24576%201.72032%2043.74528%2083.06688-75.44832%2086.016-0.24576%201.2288h46.6944l48.16896-57.01632L703.73376%20721.92h42.51648l0.24576-1.2288-45.21984-83.31264%2075.44832-85.77024%200.24576-1.72032h-44.2368l-49.88928%2059.22816-29.73696-59.22816z%20m-133.44768%2098.79552c14.99136%200%2022.60992%206.88128%2022.60992%2016.95744%200%2013.5168-9.58464%2022.85568-29.24544%2022.85568h-47.18592l7.12704-39.81312h46.6944z%20m12.04224-65.61792c12.288%200%2017.44896%206.144%2017.44896%2013.5168%200%209.09312-8.35584%2020.15232-24.08448%2020.15232h-46.6944l6.144-33.66912h47.18592z%20m71.51616-494.7456H222.3104a30.72%2030.72%200%200%200-30.72%2030.72v280.95488h640.8192v-81.5616h-137.00096c-50.8928-0.01024-92.14976-41.2672-92.16-92.16l-0.03072-137.95328z%20m96.12288%2059.84256v58.91072a15.36%2015.36%200%200%200%2015.36%2015.36h59.0848l-74.4448-74.27072z'%20fill='%238a8a8a'%20p-id='17157'%3e%3c/path%3e%3c/svg%3e",Tm="/longriver1012/glb-CHfdM5il.svg",$m="/longriver1012/obj-BlhbR6Kx.svg",Lm="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886774681'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='11289'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M881.503769%201009.728009a47.58397%2047.58397%200%200%201-33.919979%2014.271991H175.90421c-12.703992%200-24.895984-5.119997-33.919979-14.271991A49.183969%2049.183969%200%200%201%20128.00024%20975.23203V48.76861c0-12.927992%205.023997-25.343984%2014.047991-34.495979A47.58397%2047.58397%200%200%201%20175.93621%200.00064h412.095742c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l259.519838%20263.807835c8.991994%209.183994%2014.015991%2021.663986%2013.951991%2034.623979v662.655585c0%2012.927992-5.055997%2025.343984-14.079991%2034.495979z'%20fill='%23DCF3D1'%20p-id='11290'%3e%3c/path%3e%3cpath%20d='M32.0003%20544.0003h959.9994v319.9998c0%2016.959989-5.055997%2033.279979-14.079991%2045.247972-8.959994%2011.999993-21.183987%2018.751988-33.919979%2018.751988h-863.99946c-12.735992%200-24.959984-6.719996-33.919979-18.751988C37.024297%20897.280079%2032.0003%20880.960089%2032.0003%20864.0001V544.0003z'%20fill='%2352C41A'%20p-id='11291'%3e%3c/path%3e%3cpath%20d='M127.96824%20536.384305v-97.535939L32.0003%20536.384305h95.96794z%20m767.61552%200l0.96-97.535939L991.9997%20536.384305h-96.41594z'%20fill='%23389E0D'%20p-id='11292'%3e%3c/path%3e%3cpath%20d='M895.58376%20319.39244h-259.551838c-26.495983%200-47.99997-21.823986-47.99997-48.767969V0.00064c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l260.031838%20263.807835c8.799995%209.279994%2013.631991%2021.727986%2013.439991%2034.623979v6.815995z'%20fill='%2352C41A'%20opacity='.4'%20p-id='11293'%3e%3c/path%3e%3cpath%20d='M280.000145%20848.00011l4.479997-151.039906%2050.879968%20151.039906h37.759977l50.239968-150.399906%204.799997%20150.399906h43.199973l-14.71999-228.479857h-46.079972l-56.319964%20167.999895-56.319965-167.999895H251.520163L236.800172%20848.00011h43.199973z%20m313.919804%200v-186.879883h62.079961v-41.599974h-168.319895v41.599974h62.079961v186.879883h44.159973z%20m211.519868%200v-41.599974h-84.479948v-186.879883h-44.159972v228.479857h128.63992z'%20fill='%23FFFFFF'%20p-id='11294'%3e%3c/path%3e%3c/svg%3e",Dm="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887007250'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='14135'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M120%20334a40%2040%200%200%201%2040%2040V476h80V374a40%2040%200%201%201%2080%200v284a40%2040%200%201%201-80%200V556H160v102a40%2040%200%201%201-80%200v-284a40%2040%200%200%201%2040-40zM984%20760a40%2040%200%200%201%2040%2040v64c0%2088.224-71.776%20160-160%20160H160c-88.224%200-160-71.776-160-160v-64a40%2040%200%201%201%2080%200v64c0%2044.112%2035.888%2080%2080%2080h704c44.112%200%2080-35.888%2080-80v-64a40%2040%200%200%201%2040-40zM864%200c88.224%200%20160%2071.776%20160%20160v72a40%2040%200%201%201-80%200v-72c0-44.112-35.888-80-80-80H160c-44.112%200-80%2035.888-80%2080v72a40%2040%200%201%201-80%200v-72C0%2071.776%2071.776%200%20160%200h704z%20m78%20460c0%2043.52-22.552%2081.84-56.56%20103.976l49.424%2071.224a40%2040%200%201%201-65.728%2045.6L801.968%20584H780v74a40%2040%200%201%201-80%200V376a40%2040%200%200%201%2040-40h78c68.376%200%20124%2055.624%20124%20124z%20m-124%2044c24.264%200%2044-19.736%2044-44s-19.736-44-44-44H780v88h38zM503%20698H430a40%2040%200%200%201-40-40v-284a40%2040%200%200%201%2040-40h73C574.128%20334%20632%20391.872%20632%20463v106c0%2071.128-57.872%20129-129%20129z%20m-33-284v204h33A49.056%2049.056%200%200%200%20552%20569v-106a49.056%2049.056%200%200%200-49-49H470z'%20fill='%234A90E2'%20p-id='14136'%3e%3c/path%3e%3c/svg%3e",zm=[{label:"",key:"delete"},{label:"",key:"export"}],Bm=r=>{const{draggable:t,asset:e,active:n,onClick:a,onDoubleClick:i,onRename:o,onDelete:s,onExport:c,onDragStart:d}=r,p=u.useRef(null),[h,g]=u.useState(!1),[m,S]=u.useState(""),b=u.useMemo(()=>{const x=Eh(e.name);return e.cover?e.cover:e.type==="folder"?Im:wh(x)?URL.createObjectURL(e.file):x==="fbx"?_m:x==="glb"?Tm:x==="obj"?$m:x==="mtl"?Lm:x==="hdr"?Dm:Rm},[e]);u.useEffect(()=>{S(e.name)},[e]);const f=()=>{n&&g(!0),setTimeout(()=>{var x;(x=p.current)==null||x.focus()},0)},v=()=>{g(!1),!(!m||m===e.name)&&o(e,m)},y=async({key:x})=>{x==="delete"?s(e):x==="export"&&c(e)};return z.jsx(Wo,{menu:{items:zm,onClick:y},trigger:["contextMenu"],children:z.jsxs("div",{className:Gr.item,draggable:t,onClick:()=>a(e),onDoubleClick:()=>i(e),onDragStart:d,onContextMenu:x=>x.stopPropagation(),children:[z.jsx("div",{className:ne(Gr.itemCover,{[Gr.itemCoverActive]:n}),children:z.jsx("img",{draggable:!1,className:Gr.itemImage,src:b,alt:"cover"})}),z.jsx(Sa,{ref:p,value:m,style:{display:h?"block":"none"},onChange:x=>S(x.target.value),onBlur:v,onPressEnter:v}),z.jsx("div",{title:e.name,style:{display:h?"none":"block"},className:ne(Gr.itemName,{[Gr.itemNameActive]:n}),onClick:f,children:e.name})]})})},jm=r=>{const{parent:t,visible:e,setVsible:n,onConfirm:a}=r,[i]=_a.useForm(),[o,s]=u.useState(!1),c=()=>{i.submit()},d=()=>{n(!1)},p=async h=>{try{s(!0),await Ll(t,h.name)===0?(n(!1),a()):En.error("")}catch{En.error("")}finally{s(!1)}};return z.jsx(wn,{title:"",open:e,loading:o,onOk:c,onCancel:d,children:z.jsx(_a,{form:i,onFinish:p,children:z.jsx(_a.Item,{label:"",name:"name",rules:[{required:!0,message:""}],children:z.jsx(Sa,{placeholder:""})})})})},Hm=[{label:"",key:"folder"},{label:"",key:"import"},{label:"",key:"export"}],Vm=["glb","jpg","jpeg","png","hdr","webp"],Fm=()=>{const[r,t]=En.useMessage(),[e,n]=u.useState([]),[a,i]=u.useState(),[o,s]=u.useState(""),[c,d]=u.useState([]),[p,h]=u.useState(!1),g=u.useRef(null),m=async P=>{const R=await Dl(P);n(R)};u.useEffect(()=>{m("")},[]);const S=P=>{if(P!==o)if(i(void 0),!P)d([]),s(""),m("");else{const R=c.findIndex(_=>_.code===P);c.splice(R+1,c.length-1-R),d([...c]),s(P),m(P)}},b=async({key:P})=>{P==="folder"?h(!0):P==="export"?await $i(o):P==="import"&&(await zl(),await m(o))},f=P=>{P.preventDefault(),P.dataTransfer.dropEffect="copy",g.current.style.backgroundColor="#53515173",g.current.style.border="1px dashed springgreen"},v=P=>{P.preventDefault(),P.stopPropagation(),g.current.style.backgroundColor="unset",g.current.style.border="unset"},y=async P=>{P.preventDefault(),g.current.style.backgroundColor="unset",g.current.style.border="unset";const R=await Bl(P.dataTransfer);Object.keys(R).length<=0||(await jl(R,o),await m(o),r.info(""))},x=P=>i(P),A=async P=>{P.type==="folder"&&(i(void 0),await m(P.code),c.push(P),d([...c]),s(P.code))},E=async(P,R)=>{await Vl(P.code,R),await m(o)},I=async P=>{await Hl(P.code),await m(o)},N=async P=>{await $i(P.code)},O=(P,R)=>{const _={type:R.type,item:R};P.dataTransfer.setData("text",JSON.stringify(_))},$=async()=>{await m(o),r.info("")};return z.jsxs(z.Fragment,{children:[t,z.jsx(Em,{parent:o,parents:c,active:a,onClick:S}),z.jsx(Wo,{menu:{items:Hm,onClick:b},trigger:["contextMenu"],children:z.jsx("div",{ref:g,className:Co.container,onDragOver:f,onDragLeave:v,onDrop:y,children:z.jsx("div",{className:Co.content,children:e.map(P=>z.jsx(Bm,{asset:P,active:(a==null?void 0:a.code)===P.code,draggable:Vm.includes(P.type),onClick:x,onDoubleClick:A,onRename:E,onDelete:I,onExport:N,onDragStart:R=>O(R,P)},P.code))})})}),z.jsx(jm,{parent:o,visible:p,setVsible:h,onConfirm:$})]})},Um=()=>z.jsxs("div",{className:Qn.container,children:[z.jsxs("div",{className:Qn.title,children:[z.jsx("span",{className:"iconfont icon-assets"}),z.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Assets"})]}),z.jsx("div",{className:Qn.body,children:z.jsx("div",{className:Qn.right,children:z.jsx(Fm,{})})})]}),Gm="_container_377r3_1",Wm="_title_377r3_9",Ym="_icon_377r3_14",Xm="_active_377r3_19",qm="_body_377r3_23",Or={container:Gm,title:Wm,icon:Ym,active:Xm,body:qm};class Km{constructor(t){this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item-label",this.label=document.createElement("div"),this.label.className="attribute-item-label-name",this.container.appendChild(this.label)}hide(){delete this.item}show(t){const{attribute:e,tip:n}=t,{label:a,hiddenLabel:i}=e;this.item=t,this.label.textContent=a,this.label.title=n||a,this.container.style.display=i?"none":"flex"}dispose(){delete this.item}}class Zm extends Li{constructor(t,e){super(),this.isViewHelper=!0,this.animating=!1,this.center=new xt;const n=new Yn("#ff4466"),a=new Yn("#88ff44"),i=new Yn("#4488ff"),o=new Yn("#000000"),s={},c=[],d=new uc,p=new Ko,h=new Li,g=new dc(-2,2,2,-2,0,4);g.position.set(0,0,2);const m=new pc(.04,.04,.8,5).rotateZ(-Math.PI/2).translate(.4,0,0),S=new Ta(m,G(n)),b=new Ta(m,G(a)),f=new Ta(m,G(i));b.rotation.z=Math.PI/2,f.rotation.y=-Math.PI/2,this.add(S),this.add(f),this.add(b);const v=Z(n),y=Z(a),x=Z(i),A=Z(o),E=new Hr(v),I=new Hr(y),N=new Hr(x),O=new Hr(A),$=new Hr(A),P=new Hr(A);E.position.x=1,I.position.y=1,N.position.z=1,O.position.x=-1,$.position.y=-1,P.position.z=-1,O.material.opacity=.2,$.material.opacity=.2,P.material.opacity=.2,E.userData.type="posX",I.userData.type="posY",N.userData.type="posZ",O.userData.type="negX",$.userData.type="negY",P.userData.type="negZ",this.add(E),this.add(I),this.add(N),this.add(O),this.add($),this.add(P),c.push(E),c.push(I),c.push(N),c.push(O),c.push($),c.push(P);const R=new xt,_=128,B=2*Math.PI;this.render=function(re){this.quaternion.copy(t.quaternion).invert(),this.updateMatrixWorld(),R.set(0,0,1),R.applyQuaternion(t.quaternion);const Y=e.offsetWidth-_,ee=re.isWebGPURenderer?e.offsetHeight-_:0;re.clearDepth(),re.getViewport(K),re.setViewport(Y,ee,_,_),re.render(this,g),re.setViewport(K.x,K.y,K.z,K.w)};const L=new xt,k=new $a,H=new $a,V=new $a,K=new hc;let q=0;this.handleClick=function(re){if(this.animating===!0)return!1;const Y=e.getBoundingClientRect(),ee=Y.left+(e.offsetWidth-_),se=Y.top+(e.offsetHeight-_);p.x=(re.clientX-ee)/(Y.right-ee)*2-1,p.y=-((re.clientY-se)/(Y.bottom-se))*2+1,d.setFromCamera(p,g);const U=d.intersectObjects(c);if(U.length>0){const X=U[0].object;return ue(X,this.center),this.animating=!0,!0}else return!1},this.setLabels=function(re,Y,ee){s.labelX=re,s.labelY=Y,s.labelZ=ee,Q()},this.setLabelStyle=function(re,Y,ee){s.font=re,s.color=Y,s.radius=ee,Q()},this.update=function(re){const Y=re*B;H.rotateTowards(V,Y),t.position.set(0,0,1).applyQuaternion(H).multiplyScalar(q).add(this.center),t.quaternion.rotateTowards(k,Y),H.angleTo(V)===0&&(this.animating=!1)},this.dispose=function(){m.dispose(),S.material.dispose(),b.material.dispose(),f.material.dispose(),E.material.map.dispose(),I.material.map.dispose(),N.material.map.dispose(),O.material.map.dispose(),$.material.map.dispose(),P.material.map.dispose(),E.material.dispose(),I.material.dispose(),N.material.dispose(),O.material.dispose(),$.material.dispose(),P.material.dispose()};function ue(re,Y){switch(re.userData.type){case"posX":L.set(1,0,0),k.setFromEuler(new Vr(0,Math.PI*.5,0));break;case"posY":L.set(0,1,0),k.setFromEuler(new Vr(-Math.PI*.5,0,0));break;case"posZ":L.set(0,0,1),k.setFromEuler(new Vr);break;case"negX":L.set(-1,0,0),k.setFromEuler(new Vr(0,-Math.PI*.5,0));break;case"negY":L.set(0,-1,0),k.setFromEuler(new Vr(Math.PI*.5,0,0));break;case"negZ":L.set(0,0,-1),k.setFromEuler(new Vr(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}q=t.position.distanceTo(Y),L.multiplyScalar(q).add(Y),h.position.copy(Y),h.lookAt(t.position),H.copy(h.quaternion),h.lookAt(L),V.copy(h.quaternion)}function G(re){return new Zo({color:re,toneMapped:!1})}function Z(re,Y){const{font:ee="24px Arial",color:se="#000000",radius:U=14}=s,W=document.createElement("canvas");W.width=64,W.height=64;const X=W.getContext("2d");X.beginPath(),X.arc(32,32,U,0,2*Math.PI),X.closePath(),X.fillStyle=re.getStyle(),X.fill(),Y&&(X.font=ee,X.textAlign="center",X.fillStyle=se,X.fillText(Y,32,41));const ie=new mc(W);return ie.colorSpace=gc,new fc({map:ie,toneMapped:!1})}function Q(){E.material.map.dispose(),I.material.map.dispose(),N.material.map.dispose(),E.material.dispose(),I.material.dispose(),N.material.dispose(),E.material=Z(n,s.labelX),I.material=Z(a,s.labelY),N.material=Z(i,s.labelZ)}}}const $r=r=>{switch(r){case ve.SimpleScript:return{id:fn(),enabled:!0,name:ft[ve.SimpleScript],type:ve.SimpleScript,script:vc};case ve.Animator:return{id:fn(),enabled:!0,name:ft[ve.Animator],type:ve.Animator};case ve.OrbitControls:return{id:fn(),enabled:!0,name:ft[ve.OrbitControls],type:ve.OrbitControls};case ve.PointerLockControls:return{id:fn(),enabled:!0,name:ft[ve.PointerLockControls],type:ve.PointerLockControls};default:throw new Error(`: ${r}`)}};class Fs extends nn{constructor(t){super(t)}async paste(t){const e=t.map(o=>o.serialize()),n=[];Fl(e,"children").forEach(o=>{o.id=this.core.generateID(),o.components.forEach(s=>s.id=fn()),o.type===Re.Model&&n.push(this.core.modelManager.preloadModel(o))}),await Promise.all(n);const i=this.core.entityManager.createEntities(e,this.core.entityManager.root);this.core.select(i)}pasteMaterial(t){const e=this.core.lastSelection;if(!e||!e.material)return;const n=e.material.serialize();e.material.deserialize(t),this.core.bus.emit("MATERIAL_COPIED",{newValue:t,oldValue:n,material:e.material})}unmount(){}}class Us extends nn{constructor(e){super(e);C(this,"mouse");C(this,"plane");C(this,"center");C(this,"normal");C(this,"position");C(this,"direction");this.plane=new yc,this.mouse=new Ko,this.center=new xt,this.normal=new xt(0,1,0),this.position=new xt,this.direction=new xt}get raycaster(){return this.core.render.raycaster}get camera(){return this.core.render.camera}async drop(e,n,a){if(!this.camera)return;const{clientX:i,clientY:o}=a,[s,c]=Di(this.core.container,i,o);this.mouse.set(s*2-1,-(c*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.ray.intersectPlane(this.plane,this.position);const d={name:n,position:this.position.toArray(),modelCode:e},p=await bc(this.core,d);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(p),this.core.select([p]),this.core.bus.emit("TRANSACTION_END")}async dropSymbol(e,n,a){if(!this.camera)return;const{clientX:i,clientY:o}=a,[s,c]=Di(this.core.container,i,o);this.mouse.set(s*2-1,-(c*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera);const d=this.getObjects(),p=this.raycaster.intersectObjects(d,!1);if(p.length){const y=p[0];this.position.copy(y.point),this.direction.copy(y.normal)}else this.raycaster.ray.intersectPlane(this.plane,this.position),this.direction.set(0,0,1);this.direction.normalize(),Ke.set(0,0,1),zi.setFromUnitVectors(Ke,this.direction),la.setFromQuaternion(zi);const[h,g,m]=la.toArray(),S=n.lastIndexOf("/"),b=n.slice(S+1);this.core.symbolManager.symbolCache.delete(`${e}-${n}`);const f={name:b,position:this.position.toArray(),rotation:[h,g,m].map(Lr.radToDeg),symbolCode:e,symbolPath:n},v=Sc(this.core,f);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(v),this.core.select([v]),this.core.bus.emit("TRANSACTION_END")}getObjects(){const{scene:e}=this.core.render,n=[];return e.traverseVisible(a=>n.push(a)),n}}class Gs extends nn{constructor(e){super(e);C(this,"box");C(this,"sphere");C(this,"center");C(this,"delta");C(this,"controls");const n=e.getPlugin(Jr);this.controls=n.controls,this.box=new Qo,this.sphere=new Mc,this.center=new xt,this.delta=new xt}get camera(){return this.core.render.camera}focus(e){if(!this.camera)return;let n;const a=e.map(i=>i.object3d);if(this.box.makeEmpty(),Cc(a,this.box),this.box.isEmpty()){const i=a[a.length-1];this.center.setFromMatrixPosition(i.matrixWorld),n=1}else this.box.getCenter(this.center),n=this.box.getBoundingSphere(this.sphere).radius;this.delta.set(0,0,1),this.delta.applyQuaternion(this.camera.quaternion),this.delta.multiplyScalar(n*4),this.controls.target.copy(this.center),this.camera.position.copy(this.center).add(this.delta)}}class Qm extends an{constructor(e){super(e);C(this,"onMouseUpPhase1",e=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.camera&&(this.moving=!1,this.updateMouse(e),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core))})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(e,n){Me.setFromUnitVectors(rr,this.normal),j.compose(e,Me,Pt),st.copy(j).invert();let{x:a,y:i}=Ke.copy(n).applyMatrix4(st);const o=Math.max(Math.abs(a),Math.abs(i));this.isSquare&&(a=a>0?o:-o,i=i>0?o:-o),xe.set(0,0,0).applyMatrix4(j),we.set(a,0,0).applyMatrix4(j),Ne.set(a,i,0).applyMatrix4(j),Pe.set(0,i,0).applyMatrix4(j);const s=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray()];this.box.geometry.setAttribute("position",new nr(s,3)),this.box.visible=!0,this.width=Ye(Math.abs(a),2),this.height=Ye(Math.abs(i),2),this.center.set(a,i,0).multiplyScalar(.5).applyMatrix4(j),this.middlePosition.copy(Ke.setX(a).setY(i).applyMatrix4(j))}createEntity(){const{x:e,y:n,z:a}=Ot.setFromQuaternion(Me),i={position:this.center.toArray(),rotation:[e,n,a].map(Lr.radToDeg),size:[this.width,this.height]},o=Ac(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(o),this.core.select([o]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class Jm extends an{constructor(t){super(t)}drawPlane(t,e){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();let{x:n,y:a}=Ke.copy(e).applyMatrix4(st);const i=Math.max(Math.abs(n),Math.abs(a));this.isSquare&&(n=n>0?i:-i,a=a>0?i:-i),xe.set(0,0,0).applyMatrix4(j),we.set(n,0,0).applyMatrix4(j),Ne.set(n,a,0).applyMatrix4(j),Pe.set(0,a,0).applyMatrix4(j);const o=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray()];this.box.geometry.setAttribute("position",new nr(o,3)),this.box.visible=!0,this.width=Ye(Math.abs(n),2),this.height=Ye(Math.abs(a),2),this.center.set(n,a,0).multiplyScalar(.5).applyMatrix4(j),this.middlePosition.copy(Ke.setX(n).setY(a).applyMatrix4(j))}drawBox(t,e,n){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();const{x:a,y:i}=Ke.copy(e).applyMatrix4(st),{z:o}=Ke.copy(n).applyMatrix4(st);xe.set(0,0,0).applyMatrix4(j),we.set(a,0,0).applyMatrix4(j),Ne.set(a,i,0).applyMatrix4(j),Pe.set(0,i,0).applyMatrix4(j),ct.set(0,0,o).applyMatrix4(j),ut.set(a,0,o).applyMatrix4(j),dt.set(a,i,o).applyMatrix4(j),pt.set(0,i,o).applyMatrix4(j);const s=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray(),...xe.toArray(),...ct.toArray(),...we.toArray(),...ut.toArray(),...Ne.toArray(),...dt.toArray(),...Pe.toArray(),...pt.toArray(),...ct.toArray(),...ut.toArray(),...ut.toArray(),...dt.toArray(),...dt.toArray(),...pt.toArray(),...pt.toArray(),...ct.toArray()];this.box.geometry.setAttribute("position",new nr(s,3)),this.box.visible=!0,this.width=Ye(Math.abs(a),2),this.height=Ye(Math.abs(i),2),this.depth=Ye(Math.abs(o),2),this.center.set(a,i,o).multiplyScalar(.5),Ot.set(Math.PI*.5,0,0),Me.setFromEuler(Ot),Ar.compose(this.center,Me,Pt).premultiply(j)}createEntity(){Ar.decompose(this.center,Me,Ke);const{x:t,y:e,z:n}=Ot.setFromQuaternion(Me),a={position:this.center.toArray(),rotation:[t,e,n].map(Lr.radToDeg),size:[this.width,this.depth,this.height]},i=Ec(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class eg extends an{constructor(t){super(t)}drawPlane(t,e){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();let{x:n,y:a}=Ke.copy(e).applyMatrix4(st);const i=Math.max(Math.abs(n),Math.abs(a));n=n>0?i:-i,a=a>0?i:-i,xe.set(0,0,0).applyMatrix4(j),we.set(n,0,0).applyMatrix4(j),Ne.set(n,a,0).applyMatrix4(j),Pe.set(0,a,0).applyMatrix4(j);const o=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray()],s=n*.5,c=a*.5,d=new en;d.moveTo(s,c),d.arc(0,0,s,0,Math.PI*2);const p=d.getPoints().map(h=>{const g=new xt(h.x,h.y,0);return g.applyMatrix4(j),g});this.circle.geometry.setFromPoints(p),this.circle.visible=!0,ct.set(s,0,0).applyMatrix4(j),ut.set(s,a,0).applyMatrix4(j),dt.set(0,c,0).applyMatrix4(j),pt.set(n,c,0).applyMatrix4(j),o.push(...ct.toArray(),...ut.toArray(),...dt.toArray(),...pt.toArray()),this.box.geometry.setAttribute("position",new nr(o,3)),this.box.visible=!0,this.width=Ye(Math.abs(n),2),this.height=Ye(Math.abs(a),2),this.center.set(n,a,0).multiplyScalar(.5).applyMatrix4(j),this.middlePosition.copy(Ke.setX(n).setY(a).applyMatrix4(j))}drawBox(t,e,n){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();const{x:a,y:i}=Ke.copy(e).applyMatrix4(st),{z:o}=Ke.copy(n).applyMatrix4(st);xe.set(0,0,0).applyMatrix4(j),we.set(a,0,0).applyMatrix4(j),Ne.set(a,i,0).applyMatrix4(j),Pe.set(0,i,0).applyMatrix4(j),ct.set(0,0,o).applyMatrix4(j),ut.set(a,0,o).applyMatrix4(j),dt.set(a,i,o).applyMatrix4(j),pt.set(0,i,o).applyMatrix4(j);const s=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray(),...xe.toArray(),...ct.toArray(),...we.toArray(),...ut.toArray(),...Ne.toArray(),...dt.toArray(),...Pe.toArray(),...pt.toArray(),...ct.toArray(),...ut.toArray(),...ut.toArray(),...dt.toArray(),...dt.toArray(),...pt.toArray(),...pt.toArray(),...ct.toArray()],c=a*.5,d=i*.5,p=new en;p.moveTo(c,d),p.arc(0,0,c,0,Math.PI*2);const h=p.getPoints().map(g=>{const m=new xt(g.x,g.y,0);return m.applyMatrix4(j),m});this.circle.geometry.setFromPoints(h),this.circle.visible=!0,xe.set(c,0,0).applyMatrix4(j),we.set(c,d,o).applyMatrix4(j),Ne.set(a,d,0).applyMatrix4(j),Pe.set(c,d,o).applyMatrix4(j),ct.set(c,i,0).applyMatrix4(j),ut.set(c,d,o).applyMatrix4(j),dt.set(0,d,0).applyMatrix4(j),pt.set(c,d,o).applyMatrix4(j),s.push(...xe.toArray(),...we.toArray(),...Ne.toArray(),...Pe.toArray(),...ct.toArray(),...ut.toArray(),...dt.toArray(),...pt.toArray()),this.box.geometry.setAttribute("position",new nr(s,3)),this.box.visible=!0,this.width=Ye(Math.abs(a),2),this.height=Ye(Math.abs(i),2),this.depth=Ye(Math.abs(o),2),this.center.set(a,i,o).multiplyScalar(.5),Ot.set(Math.PI*.5,0,0),Me.setFromEuler(Ot),Ar.compose(this.center,Me,Pt).premultiply(j)}createEntity(){Ar.decompose(this.center,Me,Ke);const{x:t,y:e,z:n}=Ot.setFromQuaternion(Me),a={position:this.center.toArray(),rotation:[t,e,n].map(Lr.radToDeg),radius:Ye(this.width*.5,2),height:this.depth},i=xc(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class tg extends an{constructor(t){super(t)}drawPlane(t,e){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();let{x:n,y:a}=Ke.copy(e).applyMatrix4(st);const i=Math.max(Math.abs(n),Math.abs(a));n=n>0?i:-i,a=a>0?i:-i,xe.set(0,0,0).applyMatrix4(j),we.set(n,0,0).applyMatrix4(j),Ne.set(n,a,0).applyMatrix4(j),Pe.set(0,a,0).applyMatrix4(j);const o=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray()],s=n*.5,c=a*.5,d=new en;d.moveTo(s,c),d.arc(0,0,s,0,Math.PI*2);const p=d.getPoints().map(h=>{const g=new xt(h.x,h.y,0);return g.applyMatrix4(j),g});this.circle.geometry.setFromPoints(p),this.circle.visible=!0,this.box.geometry.setAttribute("position",new nr(o,3)),this.box.visible=!0,this.width=Ye(Math.abs(n),2),this.height=Ye(Math.abs(a),2),this.center.set(n,a,0).multiplyScalar(.5).applyMatrix4(j),this.middlePosition.copy(Ke.setX(n).setY(a).applyMatrix4(j))}drawBox(t,e,n){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();const{x:a,y:i}=Ke.copy(e).applyMatrix4(st),{z:o}=Ke.copy(n).applyMatrix4(st);xe.set(0,0,0).applyMatrix4(j),we.set(a,0,0).applyMatrix4(j),Ne.set(a,i,0).applyMatrix4(j),Pe.set(0,i,0).applyMatrix4(j),ct.set(0,0,o).applyMatrix4(j),ut.set(a,0,o).applyMatrix4(j),dt.set(a,i,o).applyMatrix4(j),pt.set(0,i,o).applyMatrix4(j);const s=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray(),...xe.toArray(),...ct.toArray(),...we.toArray(),...ut.toArray(),...Ne.toArray(),...dt.toArray(),...Pe.toArray(),...pt.toArray(),...ct.toArray(),...ut.toArray(),...ut.toArray(),...dt.toArray(),...dt.toArray(),...pt.toArray(),...pt.toArray(),...ct.toArray()],c=a*.5,d=i*.5,p=new en;p.moveTo(c,d),p.arc(0,0,c,0,Math.PI*2);const h=p.getPoints().map(b=>{const f=new xt(b.x,b.y,0);return f.applyMatrix4(j),f}),[g,m,S]=this.center.set(c,d,o).applyMatrix4(j).toArray();this.circle.geometry.setFromPoints(h),this.circle.visible=!0,this.circle1.geometry.setFromPoints(h),this.circle1.geometry.center().translate(g,m,S),this.circle1.visible=!0,this.box.geometry.setAttribute("position",new nr(s,3)),this.box.visible=!0,this.width=Ye(Math.abs(a),2),this.height=Ye(Math.abs(i),2),this.depth=Ye(Math.abs(o),2),this.center.set(a,i,o).multiplyScalar(.5),Ot.set(Math.PI*.5,0,0),Me.setFromEuler(Ot),Ar.compose(this.center,Me,Pt).premultiply(j)}createEntity(){Ar.decompose(this.center,Me,Ke);const{x:t,y:e,z:n}=Ot.setFromQuaternion(Me),a={position:this.center.toArray(),rotation:[t,e,n].map(Lr.radToDeg),radiusTop:Ye(this.width*.5,2),radiusBottom:Ye(this.width*.5,2),height:this.depth},i=wc(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class rg extends an{constructor(t){super(t)}drawPlane(t,e){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();let{x:n,y:a}=Ke.copy(e).applyMatrix4(st);const i=Math.max(Math.abs(n),Math.abs(a));n=n>0?i:-i,a=a>0?i:-i,xe.set(0,0,0).applyMatrix4(j),we.set(n,0,0).applyMatrix4(j),Ne.set(n,a,0).applyMatrix4(j),Pe.set(0,a,0).applyMatrix4(j);const o=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray()],s=n*.5,c=a*.5,d=new en;d.moveTo(s,c),d.arc(0,0,s,0,Math.PI*2);const p=d.getPoints().map(h=>{const g=new xt(h.x,h.y,0);return g.applyMatrix4(j),g});this.circle.geometry.setFromPoints(p),this.circle.visible=!0,ct.set(s,0,0).applyMatrix4(j),ut.set(s,a,0).applyMatrix4(j),dt.set(0,c,0).applyMatrix4(j),pt.set(n,c,0).applyMatrix4(j),o.push(...ct.toArray(),...ut.toArray(),...dt.toArray(),...pt.toArray()),this.box.geometry.setAttribute("position",new nr(o,3)),this.box.visible=!0,this.width=Ye(Math.abs(n),2),this.height=Ye(Math.abs(a),2),this.center.set(n,a,0).multiplyScalar(.5).applyMatrix4(j),this.middlePosition.copy(Ke.setX(n).setY(a).applyMatrix4(j))}drawBox(t,e,n){Me.setFromUnitVectors(rr,this.normal),j.compose(t,Me,Pt),st.copy(j).invert();const{x:a,y:i}=Ke.copy(e).applyMatrix4(st);let{z:o}=Ke.copy(n).applyMatrix4(st);o=o>0?Math.abs(a):-Math.abs(a),xe.set(0,0,0).applyMatrix4(j),we.set(a,0,0).applyMatrix4(j),Ne.set(a,i,0).applyMatrix4(j),Pe.set(0,i,0).applyMatrix4(j),ct.set(0,0,o).applyMatrix4(j),ut.set(a,0,o).applyMatrix4(j),dt.set(a,i,o).applyMatrix4(j),pt.set(0,i,o).applyMatrix4(j);const s=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray(),...xe.toArray(),...ct.toArray(),...we.toArray(),...ut.toArray(),...Ne.toArray(),...dt.toArray(),...Pe.toArray(),...pt.toArray(),...ct.toArray(),...ut.toArray(),...ut.toArray(),...dt.toArray(),...dt.toArray(),...pt.toArray(),...pt.toArray(),...ct.toArray()],c=a*.5,d=i*.5,p=new en;p.moveTo(c,d),p.arc(0,0,c,0,Math.PI*2);const h=p.getPoints().map(b=>{const f=new xt(b.x,b.y,o*.5);return f.applyMatrix4(j),f}),[g,m,S]=this.center.set(c,d,o*.5).applyMatrix4(j).toArray();this.circle.geometry.setFromPoints(h),this.circle1.geometry.setFromPoints(h),this.circle2.geometry.setFromPoints(h),this.circle.geometry.center().rotateX(-Math.PI*.5).translate(g,m,S),this.circle1.geometry.center().translate(g,m,S),this.circle2.geometry.center().rotateZ(-Math.PI*.5).translate(g,m,S),this.circle.visible=!0,this.circle1.visible=!0,this.circle2.visible=!0,this.box.geometry.setAttribute("position",new nr(s,3)),this.box.visible=!0,this.width=Ye(Math.abs(a),2),this.height=Ye(Math.abs(i),2),this.depth=Ye(Math.abs(o),2),this.center.set(a,i,o).multiplyScalar(.5),Ot.set(Math.PI*.5,0,0),Me.setFromEuler(Ot),Ar.compose(this.center,Me,Pt).premultiply(j)}createEntity(){Ar.decompose(this.center,Me,Ke);const{x:t,y:e,z:n}=Ot.setFromQuaternion(Me),a={position:this.center.toArray(),rotation:[t,e,n].map(Lr.radToDeg),radius:Ye(this.width*.5,2)},i=Nc(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class ng extends an{constructor(e){super(e);C(this,"onMouseUpPhase1",e=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.camera&&(this.moving=!1,this.updateMouse(e),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core))})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(e,n){Me.setFromUnitVectors(rr,this.normal),j.compose(e,Me,Pt),st.copy(j).invert();let{x:a,y:i}=Ke.copy(n).applyMatrix4(st);const o=Math.max(Math.abs(a),Math.abs(i));this.isSquare&&(a=a>0?o:-o,i=i>0?o:-o),xe.set(0,0,0).applyMatrix4(j),we.set(a,0,0).applyMatrix4(j),Ne.set(a,i,0).applyMatrix4(j),Pe.set(0,i,0).applyMatrix4(j);const s=[...xe.toArray(),...we.toArray(),...we.toArray(),...Ne.toArray(),...Ne.toArray(),...Pe.toArray(),...Pe.toArray(),...xe.toArray()];this.box.geometry.setAttribute("position",new nr(s,3)),this.box.visible=!0,this.width=Ye(Math.abs(a),2),this.height=Ye(Math.abs(i),2),this.center.set(a,i,.002).multiplyScalar(.5).applyMatrix4(j),this.middlePosition.copy(Ke.setX(a).setY(i).applyMatrix4(j))}createEntity(){const{x:e,y:n,z:a}=Ot.setFromQuaternion(Me),i={position:this.center.toArray(),rotation:[e,n,a].map(Lr.radToDeg),size:[this.width,this.height]},o=Pc(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(o),this.core.select([o]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class hr extends nn{constructor(e){super(e);C(this,"dom");C(this,"editorPlugin");C(this,"helperPlugin");C(this,"pivotPlugin");C(this,"selectionPlugin");C(this,"type");C(this,"continuous");C(this,"box");C(this,"circle");C(this,"circle1");C(this,"circle2");C(this,"grid");C(this,"tools");C(this,"objects");this.editorPlugin=e.getPlugin(Jr),this.helperPlugin=e.getPlugin(Jo),this.pivotPlugin=e.getPlugin(on),this.selectionPlugin=e.getPlugin(es),this.continuous=!1,this.type=Re.Box,this.dom=e.render.container;const n=new Oc,a=new Zo({color:"#ffaa00"});this.box=new kc(n,a),this.circle=new La(n.clone(),a),this.circle1=new La(n.clone(),a),this.circle2=new La(n.clone(),a),this.helperPlugin.scene.add(this.box),this.helperPlugin.scene.add(this.circle),this.helperPlugin.scene.add(this.circle1),this.helperPlugin.scene.add(this.circle2),this.grid=new Ic(this.core.render),this.helperPlugin.scene.add(this.grid.grid),this.tools={[Re.Plane]:new Qm(this),[Re.Box]:new Jm(this),[Re.Cone]:new eg(this),[Re.Cylinder]:new tg(this),[Re.Sphere]:new rg(this),[Re.Pipe]:new Rc(this),[Re.Text]:new ng(this)},this.objects=[]}unmount(){Xn(this.box),Xn(this.circle),Xn(this.circle1),Xn(this.circle2),this.grid.dispose()}draw(e){this.type=e,this.objects=this.core.entityManager.getVisibleObjects(),this.pivotPlugin.setEnabled(!1),this.selectionPlugin.setEnabled(!1),this.tools[e].start()}finish(){this.box.visible=!1,this.circle.visible=!1,this.circle1.visible=!1,this.circle2.visible=!1,this.grid.hide(),this.pivotPlugin.setEnabled(!0),this.selectionPlugin.setEnabled(!0),this.tools[this.type].finish(),this.objects=[]}}class ag extends nn{constructor(e){super(e);C(this,"editorPlugin");C(this,"viewHelper");C(this,"container");C(this,"changing");C(this,"onPointerUp",e=>{e.stopPropagation(),this.viewHelper.handleClick(e),this.changing=!0,this.editorPlugin.setPerspectiveCamera()});C(this,"onPointerDown",e=>{e.stopPropagation()});this.editorPlugin=e.getPlugin(Jr);const{camera:n,controls:a}=this.editorPlugin;this.viewHelper=new Zm(n,e.container),this.viewHelper.setLabels("X","Y","Z"),this.viewHelper.setLabelStyle(void 0,"#000",18),this.viewHelper.center=a.target,this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.width="128px",this.container.style.height="128px",e.container.appendChild(this.container),this.container.addEventListener("pointerup",this.onPointerUp),this.container.addEventListener("pointerdown",this.onPointerDown),this.changing=!1}render(e){this.viewHelper.animating?this.viewHelper.update(e):this.changing&&(this.editorPlugin.setOrthographicCamera(),this.changing=!1),this.viewHelper.render(this.core.render.renderer)}unmount(){this.viewHelper.dispose(),this.container.removeEventListener("pointerup",this.onPointerUp),this.container.removeEventListener("pointerdown",this.onPointerDown),this.container.remove()}}const ig=["position","rotation","scale"];class og extends nn{constructor(e){super(e);C(this,"outlines");C(this,"onEntitiesSelect",e=>{this.attach(e.entities)});C(this,"onEntityRendered",()=>{this.attach(this.core.selections)});C(this,"onEntityChange",e=>{const{entity:n,key:a}=e,i=this.outlines.get(n);i&&ig.includes(a)&&(n.object3d.updateMatrixWorld(),i.box.makeEmpty(),i.box.expandByObject(n.object3d))});this.outlines=new Map,e.bus.on("ENTITY_SELECTED",this.onEntitiesSelect),e.bus.on("ENTITY_RENDERED",this.onEntityRendered),e.bus.on("ENTITY_CHANGED",this.onEntityChange)}get scene(){return this.core.render.scene}attach(e){this.outlines.forEach(n=>n.visible=!1),e.forEach(n=>{let a=this.outlines.get(n);if(a==null){a=new _c(new Qo),a.raycast=()=>{};const i=a.material;i.color.set("#396efe"),i.depthTest=!1,i.transparent=!0,this.scene.add(a),this.outlines.set(n,a)}n.object3d.updateMatrixWorld(),a.box.makeEmpty(),a.box.expandByObject(n.object3d),a.visible=!a.box.isEmpty()})}unmount(){this.outlines.forEach(e=>{e.dispose(),e.removeFromParent()}),this.outlines.clear(),this.core.bus.off("ENTITY_SELECTED",this.onEntitiesSelect),this.core.bus.off("ENTITY_RENDERED",this.onEntityRendered),this.core.bus.off("ENTITY_CHANGED",this.onEntityChange)}}const l={BASE:{key:"base",name:""},COMPONENTS:{key:"components",name:""},CONTROL:{key:"control",name:""},BACKGROUND:{key:"background",name:""},ENVIRONMENT:{key:"environment",name:""},FOG:{key:"fog",name:""},SHADOW:{key:"shadow",name:""},EFFECT:{key:"effect",name:""},GRID:{key:"grid",name:""},TRANSFORM:{key:"transform",name:""},TEXT:{key:"text",name:""},DIFFUSE_MAP:{key:"diffuse_map",name:""},SPECULAR_MAP:{key:"specular_map",name:""},METALLNESS_MAP:{key:"metalness_map",name:""},ROUGHNESS_MAP:{key:"roughness_map",name:""},NORMAL_MAP:{key:"normal_map",name:""},AO_MAP:{key:"ao_map",name:""},ENV_MAP:{key:"env_map",name:""},EMISSIVE_MAP:{key:"emissive_map",name:""},ALPHA_MAP:{key:"alpha_map",name:""},BUMP_MAP:{key:"bump_map",name:""},DISPLACEMENT_MAP:{key:"displacement_map",name:""},LIGHT_MAP:{key:"light_map",name:""},CUSTOM_SHADER:{key:"custom_shader",name:""}},M={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",ENUM:"enum",COLOR:"color",VECTOR2:"vector2",VECTOR3:"vector3",SCRIPT:"script",TEXTURE:"texture",UNIFORMS:"uniforms",VERTEX_SHADER:"vertex-shader",FRAGEMENT_SHADER:"fragement-shader"},sg=["Arial","Arial Black","Arial Narrow","Algerian","Bookman Old Style","Bahnschrift Light","Baskerville Old Face","Bauhaus 93","Bell MT","Cursive","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Calibri","Calibri Light","fantasy","Georgia","Gabriola","Garamond","Informal Roman","Impact","Lucida Bright","Lucida Console","Lucida Sans Unicode","monospace","Microsoft Uighur","Monotype Corsiva","MS Sans Serif","MS Serif","Palatino Linotype","serif","sans-serif","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana",""," Light","","","","","","","","","","","","","","","","","","","",""].map(r=>({label:r,value:r})),lg=[{label:"",value:"normal"},{label:"",value:"bold"},{label:"",value:"italic"},{label:"",value:"italic bold"}];var Jt=(r=>(r.Default="Default",r.Component="Component",r))(Jt||{}),Ca=(r=>(r.GRAPH="graph",r.ATTR_COMPONENT="attrComponent",r.HIERARCHY="hierarchy",r))(Ca||{});class ur{constructor(t,e,n){C(this,"editor");C(this,"attribute");C(this,"callbacks");C(this,"targets");C(this,"target");C(this,"key");C(this,"bindCallback");this.editor=t,this.attribute=e,this.targets=n,this.target=n[n.length-1],this.key=e.key,this.callbacks=[]}setTargets(t){this.targets=t,this.target=t[t.length-1]}listen(t){this.callbacks.includes(t)||this.callbacks.push(t)}unlisten(t){const e=this.callbacks.indexOf(t);e>=0&&this.callbacks.splice(e,1)}update(){this.callbacks.forEach(t=>t(this.getter()))}getter(){return this.attribute.getter(this.target)}setter(t){this.editor.historyManager.beginTransaction();for(const e of this.targets)this.attribute.setter(e,t);this.editor.historyManager.endTransaction()}get visible(){const{visible:t}=this.attribute;return typeof t=="function"?t(this.target):t??!0}get group(){return this.attribute.group}get groupName(){return this.attribute.groupName}get disabled(){const{disabled:t}=this.attribute;return typeof t=="function"?t(this.target):t}get text(){return this.attribute.text}get options(){return this.attribute.options}get min(){const{min:t}=this.attribute;return typeof t=="function"?t(this.target):t}get max(){const{max:t}=this.attribute;return typeof t=="function"?t(this.target):t}get precision(){return this.attribute.precision}get step(){return this.attribute.step}get tip(){return this.attribute.tip}get assetType(){return this.attribute.assetType}get disableAlpha(){return this.attribute.disableAlpha}}class cg{constructor(t,e,n){C(this,"editor");C(this,"nodeAttr");C(this,"viewAttr");C(this,"groups");C(this,"activeGroups");this.editor=t,this.nodeAttr=e,this.viewAttr=n,this.groups=[],this.activeGroups=[]}refresh(){const t=[],e=[];let n=this.editor.selectionManager.getLastSelection();const a=[];n?(t.push(...this.editor.selectionManager.getSelection()),e.push(...this.nodeAttr.getAttributes(n)),a.push(...this.nodeAttr.getGroups(n)),this.activeGroups=[...this.nodeAttr.activeGroups]):(n=this.editor.selectionManager.getView(),t.push(n),e.push(...this.viewAttr.getAttributes(n)),a.push(...this.viewAttr.getGroups(n)),this.activeGroups=[...this.viewAttr.activeGroups]),a.forEach(i=>i.attributes.forEach(o=>o.setTargets(t))),this.groups=[];for(const i of e){i.setTargets(t);const o=this.groups.find(s=>s.group===i.group);if(o)o.attributes.push(i);else{const{group:s,groupName:c}=i;this.groups.push({editor:this.editor,group:s,groupName:c,type:Jt.Default,attributes:[i]})}}return this.groups.push(...a),this.groups}update(){for(const t of this.groups)for(const e of t.attributes)e.update()}dispose(){this.groups=[]}}const Ao=r=>{const{ctrlKey:t=!1,shiftKey:e=!1,altKey:n=!1,metaKey:a=!1}=r;return`${t?"ctrl+":""}${a?"meta+":""}${e?"shift+":""}${n?"alt+":""}${r.code}`};class ug{constructor(t,e){C(this,"editor");C(this,"keyEvents");C(this,"handleAction",t=>{if(t.altKey&&t.preventDefault(),!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)){for(const e of this.keyEvents)if(this.isKeyMatch(e.key,t)){t.preventDefault(),e.action(this.editor),console.log(`[${Ao(t)}] => ${e.actionName}`);return}console.log(`[${Ao(t)}] => no match`)}});this.editor=t,this.keyEvents=e}active(){document.addEventListener("keydown",this.handleAction)}deactive(){document.removeEventListener("keydown",this.handleAction)}isKeyMatch(t,e){if(Array.isArray(t))return t.some(s=>this.isKeyMatch(s,e));if(t.keyCode=="*")return!0;const{ctrlKey:n=!1,shiftKey:a=!1,altKey:i=!1,metaKey:o=!1}=t;return n==e.ctrlKey&&a==e.shiftKey&&i==e.altKey&&o==e.metaKey&&t.keyCode==e.code}dispose(){this.keyEvents=[],document.removeEventListener("keydown",this.handleAction)}}class dg{constructor(t){C(this,"editor");this.editor=t}refresh(){const t=this.editor.core.entityManager.root;return this.getNodes(t.children)}getNodes(t){const e=[];return t.forEach(n=>{const{id:a,name:i,type:o,visible:s,children:c}=n,d={id:a,name:i,type:o,visible:s,children:this.getNodes(c)};e.push(d)}),e}getNode(t){return this.editor.core.entityManager.getEntity(t)}removeNode(t){const e=this.editor.core.entityManager.getEntity(t);e&&(this.editor.historyManager.beginTransaction(),this.editor.core.removeEntity(e),this.editor.core.select([]),this.editor.historyManager.endTransaction())}updateNode(t,e,n){const a=this.editor.core.entityManager.getEntity(t);a==null||a.setAttr(e,n)}moveNodes(t,e,n){this.editor.historyManager.beginTransaction(),n==="before"?t.forEach(a=>{this.moveNode(a,e,n)}):t.reverse().forEach(a=>{this.moveNode(a,e,n)}),this.editor.historyManager.endTransaction()}moveNode(t,e,n){const a=this.getNode(t),i=this.getNode(e);if(!a||!i)return;let o,s;const c=a.parent,d=i.parent,p=c.children.indexOf(a),h=d.children.indexOf(i);n==="body"?(o=i,s=i==null?void 0:i.children.length):n==="before"?(o=d,c===d?p>h?s=h+1:s=h:s=h+1):n==="after"&&(o=d,d===c?p>h?s=h:s=h-1:s=h),this.editor.core.moveEntity(a,o,s)}}class tt{constructor(t){C(this,"key");C(this,"editor");this.key=Ul(),this.editor=t}mount(){}deactive(){}}class pg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="huifu"}active(){this.editor.historyManager.redo()}}class hg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="chexiao"}active(){this.editor.historyManager.undo()}}class mg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="",this.icon="plane",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Plane)}deactive(){this.actived=!1,this.plugin.finish()}}class gg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="",this.icon="box",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Box)}deactive(){this.actived=!1,this.plugin.finish()}}class fg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="",this.icon="cone",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Cone)}deactive(){this.actived=!1,this.plugin.finish()}}class vg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="",this.icon="cylinder",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Cylinder)}deactive(){this.actived=!1,this.plugin.finish()}}class yg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="",this.icon="sphere",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Sphere)}deactive(){this.actived=!1,this.plugin.finish()}}class bg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="",this.icon="pipe",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Pipe)}deactive(){this.actived=!1,this.plugin.finish()}}class Sg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="ambient-light"}active(){const e=Tc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Mg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="directional-light"}async active(){const e=$c(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Cg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="preview"}active(){this.editor.preview()}}class Ag extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"doubleConfirm");this.title="",this.icon="reload",this.doubleConfirm=!0}active(){this.editor.reload()}}class Eg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="save"}active(){this.editor.save()}}class xg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");this.title="",this.icon="translate",this.plugin=e.core.getPlugin(on)}get actived(){return this.plugin.controls.getMode()==="translate"}async active(){this.plugin.controls.setMode("translate")}}class wg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");this.title="",this.icon="rotate",this.plugin=e.core.getPlugin(on)}get actived(){return this.plugin.controls.getMode()==="rotate"}async active(){this.plugin.controls.setMode("rotate")}}class Ng extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");this.title="",this.icon="scale",this.plugin=e.core.getPlugin(on)}get actived(){return this.plugin.controls.getMode()==="scale"}async active(){this.plugin.controls.setMode("scale")}}class Pg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="hemisphere-light"}active(){const e=Lc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Og extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="perspective-camera"}active(){const e=Dc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class kg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="orthographic-camera"}active(){const e=zc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Ig extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="",this.icon="draw",this.actived=!1,this.plugin=e.core.getPlugin(hr)}mount(){this.actived=this.plugin.continuous}active(){this.actived=!this.actived,this.plugin.continuous=this.actived}}class Rg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="group"}active(){const e=Bc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class _g extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="spot-light"}active(){const e=jc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Tg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="point-light"}active(){const e=Hc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class $g extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="",this.icon="shortcut"}active(){this.editor.bus.emit("OPEN_SHORTCUT_DIALOG",this.editor)}}class Lg extends tt{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="",this.icon="text",this.actived=!1,this.plugin=e.core.getPlugin(hr)}active(){this.actived=!0,this.plugin.draw(Re.Text)}deactive(){this.actived=!1,this.plugin.finish()}}class Dg{constructor(t){C(this,"editor");C(this,"tools");C(this,"editPlugin");C(this,"lastTool");C(this,"deselect",()=>{var t;(t=this.lastTool)==null||t.deactive(),this.editor.bus.emit("TOOL_UPDATE",this.editor)});this.editor=t,this.tools={left:[new hg(t),new pg(t),new mg(t),new gg(t),new fg(t),new vg(t),new yg(t),new bg(t),new Sg(t),new Mg(t),new Pg(t),new _g(t),new Tg(t),new Og(t),new kg(t),new Lg(t),new Rg(t),new xg(t),new wg(t),new Ng(t),new Ig(t)],right:[new $g(t),new Ag(t),new Eg(t),new Cg(t)]},this.editPlugin=t.core.getPlugin(fi),this.editor.core.bus.on("DRAW_FINISH",this.deselect)}mount(){this.tools.left.forEach(t=>t.mount()),this.tools.right.forEach(t=>t.mount())}dispose(){this.editor.core.bus.off("DRAW_FINISH",this.deselect)}select(t,e){var n;this.editPlugin.exit(),(n=this.lastTool)==null||n.deactive(),this.lastTool=t,this.lastTool.active(e),this.editor.bus.emit("TOOL_UPDATE",this.editor)}}class zg{constructor(t){C(this,"editor");C(this,"selections");this.editor=t,this.selections=[]}refresh(){return this.selections=this.editor.core.selections.map(t=>t.id),this.selections}setSelections(t){const e=this.editor.core.entityManager.getEntities(t);this.editor.core.select(e)}removeSelections(t){const e=[];if(t)for(const n of t){const a=this.editor.core.entityManager.getEntity(n);a&&e.push(a)}this.editor.core.select(e)}getLastSelection(){return this.editor.core.lastSelection}getSelection(){return this.editor.core.selections}getView(){return this.editor.core.entityManager.root}}class Bg{constructor(t){C(this,"editor");C(this,"dropPlugin");this.editor=t,this.dropPlugin=t.core.getPlugin(Us)}onDrop(t){if(!t.dataTransfer)return;const e=t.dataTransfer.getData("text");let n;try{n=JSON.parse(e)}catch(a){console.error(a)}if(n)try{n.type==="glb"?this.dropPlugin.drop(n.item.code,n.item.name,t):n.type==="symbol"&&this.dropPlugin.dropSymbol(n.item.code,n.item.name,t)}catch{throw new Error(`: ${e}`)}}}class jg{constructor(t){C(this,"editor");C(this,"copyPlugin");C(this,"nodes");C(this,"material");this.editor=t,this.nodes=[],this.copyPlugin=t.core.getPlugin(Fs)}copy(){this.nodes=[...this.editor.core.selections].filter(t=>t.copiable)}cut(){const t=[...this.editor.core.selections];this.editor.historyManager.beginTransaction(),this.editor.core.select([]),t.forEach(e=>this.editor.core.removeEntity(e)),this.editor.historyManager.endTransaction(),this.nodes=t}async paste(){this.editor.historyManager.beginTransaction(),this.copyPlugin.paste(this.nodes),this.editor.historyManager.endTransaction()}canPaste(){return this.nodes.length>0}copyMaterial(){const t=this.editor.core.lastSelection;!t||!t.material||(this.material=t.material.serialize())}canPasteMaterial(){return!!this.material}pasteMaterial(){this.material&&(this.editor.historyManager.beginTransaction(),this.copyPlugin.pasteMaterial(this.material),this.editor.historyManager.endTransaction())}}class mr{constructor(t){C(this,"editor");C(this,"core");this.editor=t,this.core=t.core}isSame(t){return this.constructor.name===t.constructor.name}}class Aa extends mr{}class Hg extends mr{constructor(e,n){super(e);C(this,"entity");C(this,"parent");C(this,"index");this.entity=n.entity,this.parent=n.parent,this.index=n.index}undo(){this.core.removeEntity(this.entity),this.core.select([])}redo(){this.core.addEntity(this.entity,this.parent,this.index),this.core.select([this.entity])}}class Vg extends mr{constructor(e,n){super(e);C(this,"entity");C(this,"parent");C(this,"index");this.entity=n.entity,this.parent=n.parent,this.index=n.index}undo(){this.core.addEntity(this.entity,this.parent,this.index)}redo(){this.core.removeEntity(this.entity)}}class Fg extends mr{constructor(e,n){super(e);C(this,"entity");C(this,"parent");C(this,"index");C(this,"oldParent");C(this,"oldIndex");this.entity=n.entity,this.parent=n.parent,this.index=n.index,this.oldParent=n.oldParent,this.oldIndex=n.oldIndex}undo(){this.core.moveEntity(this.entity,this.oldParent,this.oldIndex)}redo(){this.core.moveEntity(this.entity,this.parent,this.index)}}class Ug extends mr{constructor(e,n){super(e);C(this,"entities");C(this,"olds");this.entities=n.entities,this.olds=n.olds}undo(){this.core.select(this.olds)}redo(){this.core.select(this.entities)}}class Gg extends Aa{constructor(e,n){super(e);C(this,"entity");C(this,"key");C(this,"newValue");C(this,"oldValue");this.entity=n.entity,this.key=n.key,this.newValue=n.newValue,this.oldValue=n.oldValue}undo(){this.entity.setAttr(this.key,this.oldValue)}redo(){this.entity.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.entity===e.entity&&this.key===e.key}update(e){this.newValue=e.newValue}}class Wg extends mr{constructor(e,n){super(e);C(this,"project");C(this,"oldProject");this.project=n.project,this.oldProject=n.oldProject}undo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.oldProject),this.editor.historyManager.resume()}redo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.project),this.editor.historyManager.resume()}}class Yg extends mr{constructor(e,n){super(e);C(this,"component");C(this,"parent");C(this,"index");this.component=n.component,this.parent=n.parent,this.index=n.index}undo(){this.core.removeComponent(this.component)}redo(){this.core.addComponent(this.component,this.parent,this.index)}}class Xg extends mr{constructor(e,n){super(e);C(this,"component");C(this,"parent");C(this,"index");this.component=n.component,this.parent=n.parent,this.index=n.index}undo(){this.core.addComponent(this.component,this.parent,this.index)}redo(){this.core.removeComponent(this.component)}}class qg extends Aa{constructor(e,n){super(e);C(this,"component");C(this,"key");C(this,"newValue");C(this,"oldValue");this.component=n.component,this.key=n.key,this.newValue=n.newValue,this.oldValue=n.oldValue}undo(){this.component.setAttr(this.key,this.oldValue)}redo(){this.component.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.component===e.component&&this.key===e.key}update(e){this.newValue=e.newValue}}class Kg extends Aa{constructor(e,n){super(e);C(this,"material");C(this,"key");C(this,"newValue");C(this,"oldValue");this.material=n.material,this.key=n.key,this.newValue=n.newValue,this.oldValue=n.oldValue}undo(){this.material.setAttr(this.key,this.oldValue)}redo(){this.material.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.material===e.material&&this.key===e.key}update(e){this.newValue=e.newValue}}class Zg extends mr{constructor(e,n){super(e);C(this,"material");C(this,"newValue");C(this,"oldValue");this.material=n.material,this.newValue=n.newValue,this.oldValue=n.oldValue}undo(){this.material.deserialize(this.oldValue)}redo(){this.material.deserialize(this.newValue)}}class Qg{constructor(t){C(this,"editor");C(this,"project");this.editor=t}deserialize(t){const e=this.project,n=this.editor.core.entityManager.root.code;try{t=Jg(t,n)}catch(o){console.error(o)}this.editor.historyManager.pause(),this.editor.core.clear(),this.editor.core.deserialize(t),this.editor.historyManager.resume();const a={oldProject:e,project:t},i=new Wg(this.editor,a);this.editor.historyManager.addHistory([i])}serialize(t){return this.project=this.editor.core.serialize(t),this.project}}const Jg=(r,t)=>{const e=JSON.parse(r);return e.document.code=t,JSON.stringify(e)};class ef{constructor(t){C(this,"editor");C(this,"core");C(this,"undos");C(this,"redos");C(this,"max");C(this,"paused");C(this,"transaction");C(this,"transactions");C(this,"onDeserialize",()=>{this.core.bus.off("DESERIALIZE",this.onDeserialize),this.core.bus.on("TRANSACTION_START",this.beginTransaction),this.core.bus.on("TRANSACTION_END",this.endTransaction),this.core.bus.on("ENTITY_ADDED",this.onEntityAdded),this.core.bus.on("ENTITY_REMOVED",this.onEntityRemoved),this.core.bus.on("ENTITY_MOVED",this.onEntityMoved),this.core.bus.on("ENTITY_CHANGED",this.onEntityChanged),this.core.bus.on("ENTITY_SELECTED",this.onEntitySelected),this.core.bus.on("COMPONENT_ADDED",this.onComponentAdded),this.core.bus.on("COMPONENT_REMOVED",this.onComponentRemoved),this.core.bus.on("COMPONENT_CHANGED",this.onComponentChanged),this.core.bus.on("MATERIAL_CHANGED",this.onMaterialChanged),this.core.bus.on("MATERIAL_COPIED",this.onMaterialCopied)});C(this,"beginTransaction",()=>{this.transaction=!0});C(this,"endTransaction",()=>{this.transaction=!1,this.addHistory(this.transactions),this.transactions=[]});C(this,"onEntityAdded",t=>{if(this.paused)return;const e=new Hg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntityRemoved",t=>{if(this.paused)return;const e=new Vg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntityMoved",t=>{if(this.paused)return;const e=new Fg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntityChanged",t=>{if(this.paused)return;const e=new Gg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntitySelected",t=>{if(this.paused)return;const e=new Ug(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onComponentAdded",t=>{if(this.paused)return;const e=new Yg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onComponentRemoved",t=>{if(this.paused)return;const e=new Xg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onComponentChanged",t=>{if(this.paused)return;const e=new qg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onMaterialChanged",t=>{if(this.paused)return;const e=new Kg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onMaterialCopied",t=>{if(this.paused)return;const e=new Zg(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});this.editor=t,this.core=t.core,this.undos=[],this.redos=[],this.max=200,this.paused=!1,this.transaction=!1,this.transactions=[],this.core.bus.on("DESERIALIZE",this.onDeserialize)}pause(){this.paused=!0}resume(){this.paused=!1}addTransaction(t){const e=this.transactions[this.transactions.length-1];e instanceof Aa&&(e!=null&&e.isSame(t))?e.update(t):this.transactions.push(t)}addHistory(t){this.redos=[],this.undos.length>=this.max&&this.undos.shift(),this.undos.push(t),this.core.bus.emit("HISTORY_CHANGE",this.core)}undo(){if(this.undos.length===0)return;this.pause();const t=this.undos.pop();t&&(this.redos.push(t),t.reverse().forEach(e=>e.undo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}redo(){if(this.redos.length===0)return;this.pause();const t=this.redos.pop();t&&(this.undos.push(t),t.reverse().forEach(e=>e.redo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}dispose(){this.undos=[],this.redos=[],this.paused=!1,this.transaction=!1,this.transactions=[]}}class tf{constructor(t){C(this,"editor");this.editor=t}getComponents(){const t=this.editor.selectionManager.getSelection(),e=t.filter(a=>a instanceof tn),n=[{label:ft[ve.SimpleScript],value:ve.SimpleScript}];return e.length>0&&e.length===t.length&&n.push({label:ft[ve.OrbitControls],value:ve.OrbitControls},{label:ft[ve.PointerLockControls],value:ve.PointerLockControls}),n}addComponent(t){const e=[...this.editor.selectionManager.getSelection()];e.length===0&&t===ve.SimpleScript&&e.push(this.editor.selectionManager.getView());try{const n=$r(t);this.editor.historyManager.beginTransaction(),e.forEach(a=>{const{entityManager:i}=this.editor.core,o=i.createComponent(n,a);this.editor.core.addComponent(o,a)}),this.editor.historyManager.endTransaction()}catch(n){console.error(n)}}}class rf{constructor(t){C(this,"editor");C(this,"menus");C(this,"meta");this.editor=t,this.menus=new Map,this.meta={}}addContextMenu(t,e){this.menus.set(t,e)}getContextMenu(t){const e=this.menus.get(t)||[];return this.getContextEvent(e)}getContextEvent(t){return t.filter(e=>e.visible(this.editor)).map(e=>{const{label:n,children:a,action:i}=e,o=a?this.getContextEvent(a):void 0,s={text:n,subMenu:o,action:()=>i(this.editor)};return o||delete s.subMenu,s})}dispose(){this.meta={}}}class nf{constructor(t,e){C(this,"editor");C(this,"materialAttr");C(this,"groups");C(this,"activeGroups");this.editor=t,this.materialAttr=e,this.groups=[],this.activeGroups=[]}refresh(){const t=[],e=[];let n=this.editor.selectionManager.getLastSelection();if(!n||!(n instanceof Vc))return[];const a=[];t.push(...this.editor.selectionManager.getSelection()),e.push(...this.materialAttr.getAttributes(n)),a.push(...this.materialAttr.getGroups(n)),this.activeGroups=[...this.materialAttr.activeGroups],a.forEach(i=>i.attributes.forEach(o=>o.setTargets(t))),this.groups=[];for(const i of e){i.setTargets(t);const o=this.groups.find(s=>s.group===i.group);if(o)o.attributes.push(i);else{const{group:s,groupName:c}=i;this.groups.push({editor:this.editor,group:s,groupName:c,type:Jt.Default,attributes:[i]})}}return this.groups.push(...a),this.groups}update(){for(const t of this.groups)for(const e of t.attributes)e.update()}dispose(){this.groups=[]}}const af=[{key:[{keyCode:"Backspace"},{keyCode:"Delete"}],action:r=>{const t=r.selectionManager.getSelection().filter(e=>e.deleteable);t.length&&(r.historyManager.beginTransaction(),r.core.select([]),t.forEach(e=>r.core.removeEntity(e)),r.historyManager.endTransaction())}},{key:{keyCode:"Escape"},action:r=>{r.toolManager.deselect()}},{key:{ctrlKey:!0,keyCode:"KeyC"},action:r=>{r.copyManager.copy()}},{key:{ctrlKey:!0,keyCode:"KeyX"},action:r=>{r.copyManager.cut()}},{key:{ctrlKey:!0,keyCode:"KeyV"},action:r=>{r.copyManager.paste()}},{key:{ctrlKey:!0,keyCode:"KeyZ"},action:r=>{r.historyManager.undo()}},{key:[{ctrlKey:!0,shiftKey:!0,keyCode:"KeyZ"},{ctrlKey:!0,keyCode:"KeyY"}],action:r=>{r.historyManager.redo()}},{key:{keyCode:"Tab"},action:r=>{const t=r.core.getPlugin(fi);t==null||t.switch()}},{key:{ctrlKey:!0,keyCode:"KeyA"},action:r=>{const t=r.core.entityManager.entities.values();r.core.select(Array.from(t))}},{key:{keyCode:"KeyP"},action:r=>{const t=r.selectionManager.getSelection();if(t.length>=2){r.historyManager.beginTransaction();const e=t.slice(0,-1),n=t[t.length-1];e.forEach(a=>r.core.moveEntity(a,n,n.children.length)),r.historyManager.endTransaction()}}},{key:{altKey:!0,keyCode:"KeyP"},action:r=>{const t=r.selectionManager.getSelection();r.historyManager.beginTransaction(),t.forEach(e=>r.core.moveEntity(e)),r.historyManager.endTransaction()}},{key:{ctrlKey:!0,keyCode:"KeyP"},action:r=>{r.preview()}},{key:{ctrlKey:!0,keyCode:"KeyS"},action:r=>{r.save()}},{key:{keyCode:"KeyQ"},action:r=>{const t=r.core.getPlugin(on);t==null||t.toggleSpace()}},{key:{keyCode:"KeyF"},action:r=>{const t=r.selectionManager.getSelection();t.length&&r.core.getPlugin(Gs).focus(t)}},{key:{keyCode:"KeyG"},action:r=>{const t=r.selectionManager.getSelection();t.length&&r.core.getPlugin(ra).start(t,"translate")}},{key:{keyCode:"KeyR"},action:r=>{const t=r.selectionManager.getSelection();t.length&&r.core.getPlugin(ra).start(t,"rotate")}},{key:{keyCode:"KeyS"},action:r=>{const t=r.selectionManager.getSelection();t.length&&r.core.getPlugin(ra).start(t,"scale")}},{key:{keyCode:"KeyL"},action:r=>{const e=r.selectionManager.getSelection().filter(n=>n instanceof tn);if(e.length){const n=r.core.getPlugin(Jr),{position:a,rotation:i}=n.camera;r.historyManager.beginTransaction(),e.forEach(o=>{o.setAttr("position",a),o.setAttr("rotation",i)}),r.historyManager.endTransaction()}}}],Ut=Math.PI/180,Wr=180/Math.PI,of=1,sf=32;class lf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"planeAttrs");C(this,"boxAttrs");C(this,"coneAttrs");C(this,"cylinderAttrs");C(this,"sphereAttrs");C(this,"pipeAttrs");C(this,"ambientLightAttrs");C(this,"directionalLightAttrs");C(this,"hemisphereLightAttrs");C(this,"spotLightAttrs");C(this,"pointLightAttrs");C(this,"perspectiveCameraAttrs");C(this,"orthographicCameraAttrs");C(this,"modelAttrs");C(this,"symbolAttrs");C(this,"textAttrs");C(this,"activeGroups");this.editor=t,this.activeGroups=[l.BASE.key],this.commonAttrs=[{label:"",key:"visible",type:M.BOOLEAN,group:l.CONTROL.key,groupName:l.CONTROL.name,getter:e=>e.getAttr("visible"),setter:(e,n)=>e.setAttr("visible",n)},{label:"",key:"transformable",type:M.BOOLEAN,group:l.CONTROL.key,groupName:l.CONTROL.name,getter:e=>e.getAttr("transformable"),setter:(e,n)=>e.setAttr("transformable",n)},{label:"",key:"selectable",type:M.BOOLEAN,group:l.CONTROL.key,groupName:l.CONTROL.name,getter:e=>e.getAttr("selectable"),setter:(e,n)=>e.setAttr("selectable",n)},{label:"",key:"castShadow",type:M.BOOLEAN,group:l.CONTROL.key,groupName:l.CONTROL.name,getter:e=>e.getAttr("castShadow"),setter:(e,n)=>e.setAttr("castShadow",n)},{label:"",key:"receiveShadow",type:M.BOOLEAN,group:l.CONTROL.key,groupName:l.CONTROL.name,getter:e=>e.getAttr("receiveShadow"),setter:(e,n)=>e.setAttr("receiveShadow",n)},{label:"",key:"name",type:M.STRING,group:l.BASE.key,min:of,max:sf,groupName:l.BASE.name,getter:e=>e.getAttr("name"),setter:(e,n)=>e.setAttr("name",n)},{label:"",key:"type",type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,disabled:!0,getter:e=>Fc[e.type]||"",setter:()=>{}},{label:"ID",key:"id",disabled:!0,type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("id"),setter:()=>{}},{label:"",key:"position",type:M.VECTOR3,group:l.TRANSFORM.key,groupName:l.TRANSFORM.name,precision:3,getter:e=>e.position.toArray(),setter:(e,n)=>this.setVector3(e,"position",n)},{label:"",key:"rotation",type:M.VECTOR3,group:l.TRANSFORM.key,groupName:l.TRANSFORM.name,precision:1,getter:({rotation:{x:e,y:n,z:a}})=>[e,n,a].map(i=>i*Wr),setter:(e,n)=>this.setEuler(e,n)},{label:"",key:"scale",type:M.VECTOR3,group:l.TRANSFORM.key,groupName:l.TRANSFORM.name,precision:3,getter:e=>e.scale.toArray(),setter:(e,n)=>this.setVector3(e,"scale",n)}],this.planeAttrs=[{label:"",key:"size",type:M.VECTOR2,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,getter:e=>e.size.toArray(),setter:(e,n)=>this.setVector2(e,"size",n)},{label:"",key:"segments",type:M.VECTOR2,group:l.BASE.key,groupName:l.BASE.name,min:1,precision:0,max:100,getter:e=>e.segments.toArray(),setter:(e,n)=>this.setVector2(e,"segments",n)}],this.boxAttrs=[{label:"",key:"size",type:M.VECTOR3,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,getter:e=>e.size.toArray(),setter:(e,n)=>this.setVector3(e,"size",n)},{label:"",key:"segments",type:M.VECTOR3,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:1,max:100,getter:e=>e.segments.toArray(),setter:(e,n)=>this.setVector3(e,"segments",n)},{label:"",key:"radius",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("radius"),setter:(e,n)=>e.setAttr("radius",n)}],this.coneAttrs=[{label:"",key:"radius",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,n)=>e.setAttr("radius",n)},{label:"",key:"height",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("height"),setter:(e,n)=>e.setAttr("height",n)},{label:"",key:"thetaLength",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:0,max:360,getter:e=>e.thetaLength*Wr,setter:(e,n)=>e.setAttr("thetaLength",n*Ut)},{label:"",key:"openEnded",type:M.BOOLEAN,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("openEnded"),setter:(e,n)=>e.setAttr("openEnded",n)},{label:"",key:"segments",type:M.VECTOR2,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,n)=>this.setVector2(e,"segments",n)}],this.cylinderAttrs=[{label:"",key:"radiusTop",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radiusTop"),setter:(e,n)=>e.setAttr("radiusTop",n)},{label:"",key:"radiusBottom",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radiusBottom"),setter:(e,n)=>e.setAttr("radiusBottom",n)},{label:"",key:"height",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("height"),setter:(e,n)=>e.setAttr("height",n)},{label:"",key:"thetaLength",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:0,max:360,getter:e=>e.thetaLength*Wr,setter:(e,n)=>e.setAttr("thetaLength",n*Ut)},{label:"",key:"openEnded",type:M.BOOLEAN,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("openEnded"),setter:(e,n)=>e.setAttr("openEnded",n)},{label:"",key:"segments",type:M.VECTOR2,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,n)=>this.setVector2(e,"segments",n)}],this.sphereAttrs=[{label:"",key:"radius",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,n)=>e.setAttr("radius",n)},{label:"",key:"phiLength",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:0,max:360,getter:e=>e.phiLength*Wr,setter:(e,n)=>e.setAttr("phiLength",n*Ut)},{label:"",key:"thetaLength",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:0,max:180,getter:e=>e.thetaLength*Wr,setter:(e,n)=>e.setAttr("thetaLength",n*Ut)},{label:"",key:"segments",type:M.VECTOR2,group:l.BASE.key,groupName:l.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,n)=>this.setVector2(e,"segments",n)}],this.pipeAttrs=[{label:"",key:"radius",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,n)=>e.setAttr("radius",n)}],this.ambientLightAttrs=[{label:"",key:"color",type:M.COLOR,disableAlpha:!0,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("color"),setter:(e,n)=>e.setAttr("color",n)},{label:"",key:"intensity",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("intensity"),setter:(e,n)=>e.setAttr("intensity",n)}],this.directionalLightAttrs=[...this.ambientLightAttrs,{label:"",key:"shadowCameraSize",type:M.NUMBER,group:l.SHADOW.key,groupName:l.SHADOW.name,precision:2,min:.1,step:.1,getter:e=>e.getAttr("shadowCameraSize"),setter:(e,n)=>e.setAttr("shadowCameraSize",n)},{label:"",key:"shadowBias",type:M.NUMBER,group:l.SHADOW.key,groupName:l.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,n)=>e.setAttr("shadowBias",n)},{label:"",key:"shadowMapSize",type:M.ENUM,group:l.SHADOW.key,groupName:l.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,n)=>e.setAttr("shadowMapSize",n)}],this.hemisphereLightAttrs=[...this.ambientLightAttrs,{label:"",key:"groundColor",type:M.COLOR,disableAlpha:!0,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("groundColor"),setter:(e,n)=>e.setAttr("groundColor",n)}],this.spotLightAttrs=[...this.ambientLightAttrs,{label:"",key:"distance",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("distance"),setter:(e,n)=>e.setAttr("distance",n)},{label:"",key:"angle",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:1,min:0,max:90,getter:e=>e.getAttr("angle")*Wr,setter:(e,n)=>{const a=n;e.setAttr("angle",a*Ut)}},{label:"",key:"penumbra",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,max:1,step:.1,getter:e=>e.getAttr("penumbra"),setter:(e,n)=>e.setAttr("penumbra",n)},{label:"",key:"decay",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("decay"),setter:(e,n)=>e.setAttr("decay",n)},{label:"",key:"shadowBias",type:M.NUMBER,group:l.SHADOW.key,groupName:l.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,n)=>e.setAttr("shadowBias",n)},{label:"",key:"shadowMapSize",type:M.ENUM,group:l.SHADOW.key,groupName:l.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,n)=>e.setAttr("shadowMapSize",n)}],this.pointLightAttrs=[...this.ambientLightAttrs,{label:"",key:"distance",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("distance"),setter:(e,n)=>e.setAttr("distance",n)},{label:"",key:"decay",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("decay"),setter:(e,n)=>e.setAttr("decay",n)},{label:"",key:"shadowBias",type:M.NUMBER,group:l.SHADOW.key,groupName:l.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,n)=>e.setAttr("shadowBias",n)},{label:"",key:"shadowMapSize",type:M.ENUM,group:l.SHADOW.key,groupName:l.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,n)=>e.setAttr("shadowMapSize",n)}],this.perspectiveCameraAttrs=[{label:"",key:"fov",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:1,min:.1,step:.1,getter:e=>e.getAttr("fov"),setter:(e,n)=>e.setAttr("fov",n)},{label:"",key:"near",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("near"),setter:(e,n)=>e.setAttr("near",n)},{label:"",key:"far",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("far"),setter:(e,n)=>e.setAttr("far",n)}],this.orthographicCameraAttrs=[{label:"",key:"frustumSize",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:1,min:.1,step:.1,getter:e=>e.getAttr("frustumSize"),setter:(e,n)=>e.setAttr("frustumSize",n)},{label:"",key:"near",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("near"),setter:(e,n)=>e.setAttr("near",n)},{label:"",key:"far",step:.1,type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,getter:e=>e.getAttr("far"),setter:(e,n)=>e.setAttr("far",n)}],this.modelAttrs=[{label:"ID",key:"modelCode",type:M.STRING,disabled:!0,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("modelCode"),setter:(e,n)=>e.setAttr("modelCode",n)}],this.symbolAttrs=[{label:"",key:"symbolPath",type:M.STRING,disabled:!0,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("symbolPath"),setter:(e,n)=>e.setAttr("symbolPath",n)},{label:"",key:"mode",type:M.ENUM,options:[{label:"2D",value:"2d"},{label:"3D",value:"3d"}],group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("mode"),setter:(e,n)=>e.setAttr("mode",n)}],this.textAttrs=[{label:"",key:"size",type:M.VECTOR2,group:l.BASE.key,groupName:l.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.size.toArray(),setter:(e,n)=>this.setVector2(e,"size",n)},{label:"",key:"text",type:M.STRING,group:l.TEXT.key,groupName:l.TEXT.name,getter:e=>e.getAttr("text"),setter:(e,n)=>e.setAttr("text",n)},{label:"",key:"fill",type:M.COLOR,group:l.TEXT.key,groupName:l.TEXT.name,getter:e=>e.getAttr("fill"),setter:(e,n)=>e.setAttr("fill",n)},{label:"",key:"fontFamily",type:M.ENUM,group:l.TEXT.key,groupName:l.TEXT.name,options:sg,getter:e=>e.getAttr("fontFamily"),setter:(e,n)=>e.setAttr("fontFamily",n)},{label:"",key:"fontSize",type:M.NUMBER,group:l.TEXT.key,groupName:l.TEXT.name,min:12,precision:0,getter:e=>e.getAttr("fontSize"),setter:(e,n)=>e.setAttr("fontSize",n)},{label:"",key:"fontStyle",type:M.ENUM,group:l.TEXT.key,groupName:l.TEXT.name,options:lg,getter:e=>e.getAttr("fontStyle"),setter:(e,n)=>e.setAttr("fontStyle",n)},{label:"",key:"align",type:M.ENUM,group:l.TEXT.key,groupName:l.TEXT.name,options:[{label:"",value:"left"},{label:"",value:"center"},{label:"",value:"right"}],getter:e=>e.getAttr("align"),setter:(e,n)=>e.setAttr("align",n)}]}setVector2(t,e,n,a){const i=t.getAttr(e).toArray(),[o,s,c]=n;switch(c){case"x":i[0]=a?a(o):o;break;case"y":i[1]=a?a(s):s;break;default:i[0]=a?a(o):o,i[1]=a?a(s):s;break}t.setAttr(e,Uc.fromArray(i))}setVector3(t,e,n){const a=t.getAttr(e).toArray(),[i,o,s,c]=n;switch(c){case"x":a[0]=i;break;case"y":a[1]=o;break;case"z":a[2]=s;break;default:a[0]=i,a[1]=o,a[2]=s;break}t.setAttr(e,Ke.fromArray(a))}setEuler(t,e){const n=t.rotation.toArray(),[a,i,o,s]=e;switch(s){case"x":n[0]=a*Ut;break;case"y":n[1]=i*Ut;break;case"z":n[2]=o*Ut;break;default:n[0]=a*Ut,n[1]=i*Ut,n[2]=o*Ut;break}la.fromArray(n),t.setAttr("rotation",la)}}const cf=[Re.AmbientLight,Re.DirectionalLight,Re.HemisphereLight],uf=["rotation","scale"];class df{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"customAttrs");C(this,"activeGroups");C(this,"getGroups",t=>{const e=[];for(const n of t.components)switch(n.type){case ve.SimpleScript:e.push({editor:this.editor,type:Jt.Component,group:`component-${n.id}`,groupName:ft[ve.SimpleScript],attributes:this.getScriptComponentAttrs(n),meta:{component:n}});break;case ve.OrbitControls:e.push({editor:this.editor,type:Jt.Component,group:`component-${n.id}`,groupName:ft[ve.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(n),meta:{component:n}});break;case ve.PointerLockControls:e.push({editor:this.editor,type:Jt.Component,group:`component-${n.id}`,groupName:ft[ve.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(n),meta:{component:n}});break}return e});this.editor=t,this.activeGroups=[l.BASE.key];const{commonAttrs:e,planeAttrs:n,boxAttrs:a,coneAttrs:i,cylinderAttrs:o,sphereAttrs:s,pipeAttrs:c,ambientLightAttrs:d,directionalLightAttrs:p,hemisphereLightAttrs:h,spotLightAttrs:g,pointLightAttrs:m,perspectiveCameraAttrs:S,orthographicCameraAttrs:b,modelAttrs:f,symbolAttrs:v,textAttrs:y}=new lf(this.editor);this.commonAttrs=this.createAttributes(e),this.customAttrs=new Map([[Re.Plane,this.createAttributes(n)],[Re.Box,this.createAttributes(a)],[Re.Cone,this.createAttributes(i)],[Re.Cylinder,this.createAttributes(o)],[Re.Sphere,this.createAttributes(s)],[Re.Pipe,this.createAttributes(c)],[Re.AmbientLight,this.createAttributes(d)],[Re.DirectionalLight,this.createAttributes(p)],[Re.HemisphereLight,this.createAttributes(h)],[Re.SpotLight,this.createAttributes(g)],[Re.PointLight,this.createAttributes(m)],[Re.PerspectiveCamera,this.createAttributes(S)],[Re.OrthographicCamera,this.createAttributes(b)],[Re.Model,this.createAttributes(f)],[Re.Symbol,this.createAttributes(v)],[Re.Text,this.createAttributes(y)]])}createAttributes(t){return t.map(e=>new ur(this.editor,e,[]))}getAttributes(t){const e=this.customAttrs.get(t.type)||[];let n=[...this.commonAttrs];return cf.includes(t.type)&&(n=n.filter(a=>!uf.includes(a.key))),[...n,...e]}getScriptComponentAttrs(t){const e=[];return e.push({label:"",key:"component-name",type:M.STRING,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(n,a)=>t.setAttr("name",a)},{label:"",key:"enabled",type:M.BOOLEAN,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(n,a)=>t.setAttr("_enabled",a)},{label:"",key:"component-script",type:M.SCRIPT,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("script"),setter:(n,a)=>t.setAttr("script",a)}),e.map(n=>new ur(this.editor,n,[]))}getOrbitControlsComponentAttrs(t){const e=[];return e.push({label:"",key:"component-name",type:M.STRING,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(n,a)=>t.setAttr("name",a)},{label:"",key:"enabled",type:M.BOOLEAN,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(n,a)=>t.setAttr("_enabled",a)},{label:"",key:"distance",type:M.NUMBER,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("distance"),setter:(n,a)=>t.setAttr("distance",a)}),e.map(n=>new ur(this.editor,n,[]))}getPointerLockControlsComponentAttrs(t){const e=[];return e.push({label:"",key:"component-name",type:M.STRING,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(n,a)=>t.setAttr("name",a)},{label:"",key:"enabled",type:M.BOOLEAN,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(n,a)=>t.setAttr("_enabled",a)},{label:"",key:"moveSpeed",type:M.NUMBER,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("moveSpeed"),setter:(n,a)=>t.setAttr("moveSpeed",a)}),e.map(n=>new ur(this.editor,n,[]))}}const Ya=100;class pf{constructor(t){C(this,"editor");C(this,"attributes");this.editor=t,this.attributes=[{label:"",key:"debug",type:M.BOOLEAN,group:l.CONTROL.key,groupName:l.CONTROL.name,getter:e=>e.getAttr("debug"),setter:(e,n)=>e.setAttr("debug",n)},{label:"",key:"code",type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,disabled:!0,getter:e=>e.getAttr("code"),setter:()=>{}},{label:"",key:"name",type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,max:Ya,getter:e=>e.getAttr("name"),setter:(e,n)=>e.setAttr("name",n)},{label:"",key:"desc",max:256,type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("desc"),setter:(e,n)=>e.setAttr("desc",n)},{label:"",key:"ver",disabled:!0,type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("ver"),setter:(e,n)=>e.setAttr("ver",n)},{label:"",key:"author",type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,max:Ya,getter:e=>e.getAttr("author"),setter:(e,n)=>e.setAttr("author",n)},{label:"",key:"company",type:M.STRING,max:Ya,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("company"),setter:(e,n)=>e.setAttr("company",n)},{label:"",key:"date",disabled:!0,type:M.STRING,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.getAttr("date"),setter:(e,n)=>e.setAttr("date",n)},{label:"",key:"backgroundColor",type:M.COLOR,group:l.BACKGROUND.key,groupName:l.BACKGROUND.name,disableAlpha:!0,getter:e=>e.getAttr("backgroundColor"),setter:(e,n)=>e.setAttr("backgroundColor",n)},{label:"",key:"backgroundTexture",type:M.TEXTURE,group:l.BACKGROUND.key,groupName:l.BACKGROUND.name,getter:e=>e.getAttr("backgroundTexture"),setter:(e,n)=>e.setAttr("backgroundTexture",n)},{label:"",key:"backgroundBlurriness",type:M.NUMBER,group:l.BACKGROUND.key,groupName:l.BACKGROUND.name,min:0,max:1,precision:1,step:.1,getter:e=>e.getAttr("backgroundBlurriness"),setter:(e,n)=>e.setAttr("backgroundBlurriness",n)},{label:"",key:"backgroundIntensity",type:M.NUMBER,group:l.BACKGROUND.key,groupName:l.BACKGROUND.name,min:0,precision:1,step:.1,getter:e=>e.getAttr("backgroundIntensity"),setter:(e,n)=>e.setAttr("backgroundIntensity",n)},{label:"",key:"backgroundRotation",type:M.NUMBER,group:l.BACKGROUND.key,groupName:l.BACKGROUND.name,min:-180,max:180,precision:1,getter:e=>e.getAttr("backgroundRotation"),setter:(e,n)=>e.setAttr("backgroundRotation",n)},{label:"",key:"environmentTexture",type:M.TEXTURE,group:l.ENVIRONMENT.key,groupName:l.ENVIRONMENT.name,getter:e=>e.getAttr("environmentTexture"),setter:(e,n)=>e.setAttr("environmentTexture",n)},{label:"",key:"environmentIntensity",type:M.NUMBER,group:l.ENVIRONMENT.key,groupName:l.ENVIRONMENT.name,min:0,precision:1,step:.1,getter:e=>e.getAttr("environmentIntensity"),setter:(e,n)=>e.setAttr("environmentIntensity",n)},{label:"",key:"environmentRotation",type:M.NUMBER,group:l.ENVIRONMENT.key,groupName:l.ENVIRONMENT.name,min:-180,max:180,precision:1,getter:e=>e.getAttr("environmentRotation"),setter:(e,n)=>e.setAttr("environmentRotation",n)},{label:"",key:"fogEnable",type:M.BOOLEAN,group:l.FOG.key,groupName:l.FOG.name,getter:e=>e.getAttr("fogEnable"),setter:(e,n)=>e.setAttr("fogEnable",n)},{label:"",key:"fogColor",type:M.COLOR,disableAlpha:!0,group:l.FOG.key,groupName:l.FOG.name,getter:e=>e.getAttr("fogColor"),setter:(e,n)=>e.setAttr("fogColor",n)},{label:"",key:"fogNear",type:M.NUMBER,group:l.FOG.key,groupName:l.FOG.name,min:0,precision:1,getter:e=>e.getAttr("fogNear"),setter:(e,n)=>e.setAttr("fogNear",n)},{label:"",key:"fogFar",type:M.NUMBER,group:l.FOG.key,groupName:l.FOG.name,min:0,precision:1,getter:e=>e.getAttr("fogFar"),setter:(e,n)=>e.setAttr("fogFar",n)},{label:"",key:"shadowMapEnabled",type:M.BOOLEAN,group:l.SHADOW.key,groupName:l.SHADOW.name,getter:e=>e.getAttr("shadowMapEnabled"),setter:(e,n)=>e.setAttr("shadowMapEnabled",n)},{label:"",key:"shadowMapType",type:M.ENUM,options:[{value:0,label:"Basic"},{value:1,label:"PCF "},{value:2,label:"PCF Soft"}],group:l.SHADOW.key,groupName:l.SHADOW.name,getter:e=>e.getAttr("shadowMapType"),setter:(e,n)=>e.setAttr("shadowMapType",n)},{label:"",key:"effectEnabled",type:M.BOOLEAN,group:l.EFFECT.key,groupName:l.EFFECT.name,getter:e=>e.getAttr("effectEnabled"),setter:(e,n)=>e.setAttr("effectEnabled",n)},{label:"",key:"effectMultisampling",type:M.ENUM,options:[{value:0,label:""},{value:2,label:"2 "},{value:4,label:"4"},{value:8,label:"8"},{value:16,label:"16"}],group:l.EFFECT.key,groupName:l.EFFECT.name,getter:e=>e.getAttr("effectMultisampling"),setter:(e,n)=>e.setAttr("effectMultisampling",n)},{label:"",key:"effectBloomIntensity",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomIntensity"),setter:(e,n)=>e.setAttr("effectBloomIntensity",n)},{label:"",key:"effectBloomLuminanceThreshold",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomLuminanceThreshold"),setter:(e,n)=>e.setAttr("effectBloomLuminanceThreshold",n)},{label:"",key:"effectBloomLuminanceSmoothing",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.01,precision:3,getter:e=>e.getAttr("effectBloomLuminanceSmoothing"),setter:(e,n)=>e.setAttr("effectBloomLuminanceSmoothing",n)},{label:"",key:"effectBloomRadius",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomRadius"),setter:(e,n)=>e.setAttr("effectBloomRadius",n)},{label:"AO",key:"effectN8aoHalfRes",type:M.BOOLEAN,group:l.EFFECT.key,groupName:l.EFFECT.name,getter:e=>e.getAttr("effectN8aoHalfRes"),setter:(e,n)=>e.setAttr("effectN8aoHalfRes",n)},{label:"AO",key:"effectN8aoQualityMode",type:M.ENUM,group:l.EFFECT.key,groupName:l.EFFECT.name,options:[{label:"",value:"Performance"},{label:"",value:"Low"},{label:"",value:"Medium"},{label:"",value:"High"},{label:"",value:"Ultra"}],getter:e=>e.getAttr("effectN8aoQualityMode"),setter:(e,n)=>e.setAttr("effectN8aoQualityMode",n)},{label:"AO",key:"effectN8aoIntensity",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectN8aoIntensity"),setter:(e,n)=>e.setAttr("effectN8aoIntensity",n)},{label:"AO",key:"effectN8aoRadius",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectN8aoRadius"),setter:(e,n)=>e.setAttr("effectN8aoRadius",n)},{label:"AO",key:"effectN8aoDistanceFalloff",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectN8aoDistanceFalloff"),setter:(e,n)=>e.setAttr("effectN8aoDistanceFalloff",n)},{label:"AO",key:"effectN8aoColor",type:M.COLOR,group:l.EFFECT.key,groupName:l.EFFECT.name,getter:e=>e.getAttr("effectN8aoColor"),setter:(e,n)=>e.setAttr("effectN8aoColor",n)},{label:"",key:"effectVignetteTechnique",type:M.ENUM,group:l.EFFECT.key,groupName:l.EFFECT.name,options:[{label:"DEFAULT",value:0},{label:"ESKIL",value:1}],getter:e=>e.getAttr("effectVignetteTechnique"),setter:(e,n)=>e.setAttr("effectVignetteTechnique",n)},{label:"",key:"effectVignetteOffset",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,max:1,step:.1,precision:2,getter:e=>e.getAttr("effectVignetteOffset"),setter:(e,n)=>e.setAttr("effectVignetteOffset",n)},{label:"",key:"effectVignetteDarkness",type:M.NUMBER,group:l.EFFECT.key,groupName:l.EFFECT.name,min:0,max:1,step:.1,precision:2,getter:e=>e.getAttr("effectVignetteDarkness"),setter:(e,n)=>e.setAttr("effectVignetteDarkness",n)},{label:"",key:"effectToneMappingMode",type:M.ENUM,options:[{value:0,label:"LINEAR"},{value:1,label:"REINHARD "},{value:2,label:"REINHARD2"},{value:3,label:"REINHARD2_ADAPTIVE"},{value:4,label:"OPTIMIZED_CINEON"},{value:5,label:"CINEON"},{value:6,label:"ACES_FILMIC"},{value:7,label:"AGX"},{value:8,label:"NEUTRAL"}],group:l.EFFECT.key,groupName:l.EFFECT.name,getter:e=>e.getAttr("effectToneMappingMode"),setter:(e,n)=>e.setAttr("effectToneMappingMode",n)},{label:"",key:"gridEnable",type:M.BOOLEAN,group:l.GRID.key,groupName:l.GRID.name,getter:e=>e.getAttr("gridEnable"),setter:(e,n)=>e.setAttr("gridEnable",n)},{label:"",key:"gridSize",type:M.ENUM,options:[{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:1e3,label:"1000"}],group:l.GRID.key,groupName:l.GRID.name,getter:e=>e.getAttr("gridSize"),setter:(e,n)=>e.setAttr("gridSize",n)},{label:"1",key:"gridColor1",type:M.COLOR,disableAlpha:!0,group:l.GRID.key,groupName:l.GRID.name,getter:e=>e.getAttr("gridColor1"),setter:(e,n)=>e.setAttr("gridColor1",n)},{label:"2",key:"gridColor2",type:M.COLOR,disableAlpha:!0,group:l.GRID.key,groupName:l.GRID.name,getter:e=>e.getAttr("gridColor2"),setter:(e,n)=>e.setAttr("gridColor2",n)}]}}class hf{constructor(t){C(this,"editor");C(this,"attributes");C(this,"activeGroups");C(this,"getGroups",t=>{const e=[];for(const n of t.components)switch(n.type){case ve.SimpleScript:e.push({editor:this.editor,type:Jt.Component,group:`component-${n.id}`,groupName:ft[ve.SimpleScript],attributes:this.getScriptComponentAttrs(n),meta:{component:n}});break;case ve.OrbitControls:e.push({editor:this.editor,type:Jt.Component,group:`component-${n.id}`,groupName:ft[ve.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(n),meta:{component:n}});break;case ve.PointerLockControls:e.push({editor:this.editor,type:Jt.Component,group:`component-${n.id}`,groupName:ft[ve.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(n),meta:{component:n}});break}return e});this.editor=t,this.activeGroups=[l.BASE.key];const{attributes:e}=new pf(this.editor);this.attributes=this.createAttributes(e)}createAttributes(t){return t.map(e=>new ur(this.editor,e,[]))}getAttributes(){return this.attributes}getScriptComponentAttrs(t){const e=[];return e.push({label:"",key:"component-name",type:M.STRING,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(n,a)=>t.setAttr("name",a)},{label:"",key:"enabled",type:M.BOOLEAN,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(n,a)=>t.setAttr("_enabled",a)},{label:"",key:"component-script",type:M.SCRIPT,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("script"),setter:(n,a)=>t.setAttr("script",a)}),e.map(n=>new ur(this.editor,n,[]))}getOrbitControlsComponentAttrs(t){const e=[];return e.push({label:"",key:"component-name",type:M.STRING,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(n,a)=>t.setAttr("name",a)},{label:"",key:"enabled",type:M.BOOLEAN,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(n,a)=>t.setAttr("_enabled",a)},{label:"",key:"distance",type:M.NUMBER,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("distance"),setter:(n,a)=>t.setAttr("distance",a)}),e.map(n=>new ur(this.editor,n,[]))}getPointerLockControlsComponentAttrs(t){const e=[];return e.push({label:"",key:"component-name",type:M.STRING,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(n,a)=>t.setAttr("name",a)},{label:"",key:"enabled",type:M.BOOLEAN,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(n,a)=>t.setAttr("_enabled",a)},{label:"",key:"moveSpeed",type:M.NUMBER,group:l.COMPONENTS.key,groupName:l.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("moveSpeed"),setter:(n,a)=>t.setAttr("moveSpeed",a)}),e.map(n=>new ur(this.editor,n,[]))}}const mf=[{label:"",value:"MeshBasicMaterial"},{label:"PBR",value:"MeshStandardMaterial"},{label:"Phong",value:"MeshPhongMaterial"},{label:"",value:"ShaderMaterial"}],gf=[{label:"",value:0},{label:"",value:1},{label:"",value:2}],ff=[{label:"",value:0},{label:"",value:1},{label:"",value:2},{label:"",value:3},{label:"",value:4}],Bt=[{label:"UV",value:300},{label:"",value:303},{label:"",value:304}],it=[{label:"",value:1e3},{label:"",value:1001},{label:"",value:1002}],jt=[{label:"",value:""},{label:"RGB",value:"srgb"},{label:"RGB",value:"srgb-linear"}],lt=r=>r.material.type===Er.Stand,Eo=r=>r.material.type===Er.Phong,Xa=r=>r.material.type===Er.Shader,de=r=>r.material.type!=Er.Shader,Ht=r=>[Er.Basic,Er.Phong].includes(r.material.type),me=r=>[Er.Stand,Er.Phong].includes(r.material.type);class vf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"activeGroups");this.editor=t,this.activeGroups=[l.BASE.key],this.commonAttrs=[{label:"",key:"type",type:M.ENUM,group:l.BASE.key,groupName:l.BASE.name,options:mf,getter:e=>e.material.getAttr("type"),setter:(e,n)=>e.material.setAttr("type",n)},{label:"",key:"transparent",type:M.BOOLEAN,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.material.getAttr("transparent"),setter:(e,n)=>e.material.setAttr("transparent",n)},{label:"",key:"opacity",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,min:0,max:1,step:.1,precision:1,getter:e=>e.material.getAttr("opacity"),setter:(e,n)=>e.material.setAttr("opacity",n)},{label:"",key:"alphaTest",type:M.NUMBER,group:l.BASE.key,groupName:l.BASE.name,min:0,max:1,step:.1,precision:1,getter:e=>e.material.getAttr("alphaTest"),setter:(e,n)=>e.material.setAttr("alphaTest",n)},{label:"",key:"depthTest",type:M.BOOLEAN,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.material.getAttr("depthTest"),setter:(e,n)=>e.material.setAttr("depthTest",n)},{label:"",key:"depthWrite",type:M.BOOLEAN,group:l.BASE.key,groupName:l.BASE.name,getter:e=>e.material.getAttr("depthWrite"),setter:(e,n)=>e.material.setAttr("depthWrite",n)},{label:"",key:"side",type:M.ENUM,group:l.BASE.key,groupName:l.BASE.name,options:gf,getter:e=>e.material.getAttr("side"),setter:(e,n)=>e.material.setAttr("side",n)},{label:"",key:"blending",type:M.ENUM,group:l.BASE.key,groupName:l.BASE.name,options:ff,getter:e=>e.material.getAttr("blending"),setter:(e,n)=>e.material.setAttr("blending",n)},{label:"",key:"color",type:M.COLOR,disableAlpha:!0,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("color"),setter:(e,n)=>e.material.setAttr("color",n)},{label:"",key:"mapImage",type:M.TEXTURE,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("mapImage"),setter:(e,n)=>e.material.setAttr("mapImage",n)},{label:"",key:"mapMapping",type:M.ENUM,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,options:Bt,visible:de,getter:e=>e.material.getAttr("mapMapping"),setter:(e,n)=>e.material.setAttr("mapMapping",n)},{label:"",key:"mapWrapS",type:M.ENUM,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("mapWrapS"),setter:(e,n)=>e.material.setAttr("mapWrapS",n)},{label:"",key:"mapWrapT",type:M.ENUM,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("mapWrapT"),setter:(e,n)=>e.material.setAttr("mapWrapT",n)},{label:"",key:"mapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("mapOffset"),setter:(e,n)=>e.material.setAttr("mapOffset",n)},{label:"",key:"mapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("mapRepeat"),setter:(e,n)=>e.material.setAttr("mapRepeat",n)},{label:"",key:"mapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("mapCenter"),setter:(e,n)=>e.material.setAttr("mapCenter",n)},{label:"",key:"mapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("mapRotation"),setter:(e,n)=>e.material.setAttr("mapRotation",n)},{label:"Y",key:"mapFlipY",type:M.BOOLEAN,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,visible:de,getter:e=>e.material.getAttr("mapFlipY"),setter:(e,n)=>e.material.setAttr("mapFlipY",n)},{label:"",key:"mapColorSpace",type:M.ENUM,group:l.DIFFUSE_MAP.key,groupName:l.DIFFUSE_MAP.name,options:jt,visible:de,getter:e=>e.material.getAttr("mapColorSpace"),setter:(e,n)=>e.material.setAttr("mapColorSpace",n)},{label:"",key:"specular",type:M.COLOR,disableAlpha:!0,visible:Eo,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,getter:e=>e.material.getAttr("specular"),setter:(e,n)=>e.material.setAttr("specular",n)},{label:"",key:"shininess",type:M.NUMBER,min:0,precision:2,step:1,visible:Eo,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,getter:e=>e.material.getAttr("shininess"),setter:(e,n)=>e.material.setAttr("shininess",n)},{label:"",key:"specularMapImage",type:M.TEXTURE,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,visible:Ht,getter:e=>e.material.getAttr("specularMapImage"),setter:(e,n)=>e.material.setAttr("specularMapImage",n)},{label:"",key:"specularMapMapping",type:M.ENUM,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,options:Bt,visible:Ht,getter:e=>e.material.getAttr("specularMapMapping"),setter:(e,n)=>e.material.setAttr("specularMapMapping",n)},{label:"",key:"specularMapWrapS",type:M.ENUM,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,options:it,visible:Ht,getter:e=>e.material.getAttr("specularMapWrapS"),setter:(e,n)=>e.material.setAttr("specularMapWrapS",n)},{label:"",key:"specularMapWrapT",type:M.ENUM,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,options:it,visible:Ht,getter:e=>e.material.getAttr("specularMapWrapT"),setter:(e,n)=>e.material.setAttr("specularMapWrapT",n)},{label:"",key:"specularMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,visible:Ht,getter:e=>e.material.getAttr("specularMapOffset"),setter:(e,n)=>e.material.setAttr("specularMapOffset",n)},{label:"",key:"specularMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,visible:Ht,getter:e=>e.material.getAttr("specularMapRepeat"),setter:(e,n)=>e.material.setAttr("specularMapRepeat",n)},{label:"",key:"specularMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,visible:Ht,getter:e=>e.material.getAttr("specularMapCenter"),setter:(e,n)=>e.material.setAttr("specularMapCenter",n)},{label:"",key:"specularMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,visible:Ht,getter:e=>e.material.getAttr("specularMapRotation"),setter:(e,n)=>e.material.setAttr("specularMapRotation",n)},{label:"Y",key:"specularMapFlipY",type:M.BOOLEAN,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,visible:Ht,getter:e=>e.material.getAttr("specularMapFlipY"),setter:(e,n)=>e.material.setAttr("specularMapFlipY",n)},{label:"",key:"specularMapColorSpace",type:M.ENUM,group:l.SPECULAR_MAP.key,groupName:l.SPECULAR_MAP.name,options:jt,visible:Ht,getter:e=>e.material.getAttr("specularMapColorSpace"),setter:(e,n)=>e.material.setAttr("specularMapColorSpace",n)},{label:"",key:"metalness",min:0,step:.1,precision:2,type:M.NUMBER,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalness"),setter:(e,n)=>e.material.setAttr("metalness",n)},{label:"",key:"metalnessMapImage",type:M.TEXTURE,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalnessMapImage"),setter:(e,n)=>e.material.setAttr("metalnessMapImage",n)},{label:"",key:"metalnessMapMapping",type:M.ENUM,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,options:Bt,visible:lt,getter:e=>e.material.getAttr("metalnessMapMapping"),setter:(e,n)=>e.material.setAttr("metalnessMapMapping",n)},{label:"",key:"metalnessMapWrapS",type:M.ENUM,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,options:it,visible:lt,getter:e=>e.material.getAttr("metalnessMapWrapS"),setter:(e,n)=>e.material.setAttr("metalnessMapWrapS",n)},{label:"",key:"metalnessMapWrapT",type:M.ENUM,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,options:it,visible:lt,getter:e=>e.material.getAttr("metalnessMapWrapT"),setter:(e,n)=>e.material.setAttr("metalnessMapWrapT",n)},{label:"",key:"metalnessMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalnessMapOffset"),setter:(e,n)=>e.material.setAttr("metalnessMapOffset",n)},{label:"",key:"metalnessMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalnessMapRepeat"),setter:(e,n)=>e.material.setAttr("metalnessMapRepeat",n)},{label:"",key:"metalnessMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalnessMapCenter"),setter:(e,n)=>e.material.setAttr("metalnessMapCenter",n)},{label:"",key:"metalnessMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalnessMapRotation"),setter:(e,n)=>e.material.setAttr("metalnessMapRotation",n)},{label:"Y",key:"metalnessMapFlipY",type:M.BOOLEAN,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("metalnessMapFlipY"),setter:(e,n)=>e.material.setAttr("metalnessMapFlipY",n)},{label:"",key:"metalnessMapColorSpace",type:M.ENUM,group:l.METALLNESS_MAP.key,groupName:l.METALLNESS_MAP.name,options:jt,visible:lt,getter:e=>e.material.getAttr("metalnessMapColorSpace"),setter:(e,n)=>e.material.setAttr("metalnessMapColorSpace",n)},{label:"",key:"roughness",min:0,step:.1,precision:2,type:M.NUMBER,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughness"),setter:(e,n)=>e.material.setAttr("roughness",n)},{label:"",key:"roughnessMapImage",type:M.TEXTURE,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughnessMapImage"),setter:(e,n)=>e.material.setAttr("roughnessMapImage",n)},{label:"",key:"roughnessMapMapping",type:M.ENUM,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,options:Bt,visible:lt,getter:e=>e.material.getAttr("roughnessMapMapping"),setter:(e,n)=>e.material.setAttr("roughnessMapMapping",n)},{label:"",key:"roughnessMapWrapS",type:M.ENUM,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,options:it,visible:lt,getter:e=>e.material.getAttr("roughnessMapWrapS"),setter:(e,n)=>e.material.setAttr("roughnessMapWrapS",n)},{label:"",key:"roughnessMapWrapT",type:M.ENUM,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,options:it,visible:lt,getter:e=>e.material.getAttr("roughnessMapWrapT"),setter:(e,n)=>e.material.setAttr("roughnessMapWrapT",n)},{label:"",key:"roughnessMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughnessMapOffset"),setter:(e,n)=>e.material.setAttr("roughnessMapOffset",n)},{label:"",key:"roughnessMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughnessMapRepeat"),setter:(e,n)=>e.material.setAttr("roughnessMapRepeat",n)},{label:"",key:"roughnessMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughnessMapCenter"),setter:(e,n)=>e.material.setAttr("roughnessMapCenter",n)},{label:"",key:"roughnessMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughnessMapRotation"),setter:(e,n)=>e.material.setAttr("roughnessMapRotation",n)},{label:"Y",key:"roughnessMapFlipY",type:M.BOOLEAN,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,visible:lt,getter:e=>e.material.getAttr("roughnessMapFlipY"),setter:(e,n)=>e.material.setAttr("roughnessMapFlipY",n)},{label:"",key:"roughnessMapColorSpace",type:M.ENUM,group:l.ROUGHNESS_MAP.key,groupName:l.ROUGHNESS_MAP.name,options:jt,visible:lt,getter:e=>e.material.getAttr("roughnessMapColorSpace"),setter:(e,n)=>e.material.setAttr("roughnessMapColorSpace",n)},{label:"",key:"normalScale",min:-1,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalScale"),setter:(e,n)=>e.material.setAttr("normalScale",n)},{label:"",key:"normalMapImage",type:M.TEXTURE,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalMapImage"),setter:(e,n)=>e.material.setAttr("normalMapImage",n)},{label:"",key:"normalMapMapping",type:M.ENUM,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,options:Bt,visible:me,getter:e=>e.material.getAttr("normalMapMapping"),setter:(e,n)=>e.material.setAttr("normalMapMapping",n)},{label:"",key:"normalMapWrapS",type:M.ENUM,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("normalMapWrapS"),setter:(e,n)=>e.material.setAttr("normalMapWrapS",n)},{label:"",key:"normalMapWrapT",type:M.ENUM,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("normalMapWrapT"),setter:(e,n)=>e.material.setAttr("normalMapWrapT",n)},{label:"",key:"normalMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalMapOffset"),setter:(e,n)=>e.material.setAttr("normalMapOffset",n)},{label:"",key:"normalMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalMapRepeat"),setter:(e,n)=>e.material.setAttr("normalMapRepeat",n)},{label:"",key:"normalMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalMapCenter"),setter:(e,n)=>e.material.setAttr("normalMapCenter",n)},{label:"",key:"normalMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalMapRotation"),setter:(e,n)=>e.material.setAttr("normalMapRotation",n)},{label:"Y",key:"normalMapFlipY",type:M.BOOLEAN,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,visible:me,getter:e=>e.material.getAttr("normalMapFlipY"),setter:(e,n)=>e.material.setAttr("normalMapFlipY",n)},{label:"",key:"normalMapColorSpace",type:M.ENUM,group:l.NORMAL_MAP.key,groupName:l.NORMAL_MAP.name,options:jt,visible:me,getter:e=>e.material.getAttr("normalMapColorSpace"),setter:(e,n)=>e.material.setAttr("normalMapColorSpace",n)},{label:"",key:"aoMapIntensity",min:0,step:.1,precision:2,type:M.NUMBER,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapIntensity"),setter:(e,n)=>e.material.setAttr("aoMapIntensity",n)},{label:"",key:"aoMapImage",type:M.TEXTURE,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapImage"),setter:(e,n)=>e.material.setAttr("aoMapImage",n)},{label:"",key:"aoMapMapping",type:M.ENUM,group:l.AO_MAP.key,groupName:l.AO_MAP.name,options:Bt,visible:de,getter:e=>e.material.getAttr("aoMapMapping"),setter:(e,n)=>e.material.setAttr("aoMapMapping",n)},{label:"",key:"aoMapWrapS",type:M.ENUM,group:l.AO_MAP.key,groupName:l.AO_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("aoMapWrapS"),setter:(e,n)=>e.material.setAttr("aoMapWrapS",n)},{label:"",key:"aoMapWrapT",type:M.ENUM,group:l.AO_MAP.key,groupName:l.AO_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("aoMapWrapT"),setter:(e,n)=>e.material.setAttr("aoMapWrapT",n)},{label:"",key:"aoMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapOffset"),setter:(e,n)=>e.material.setAttr("aoMapOffset",n)},{label:"",key:"aoMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapRepeat"),setter:(e,n)=>e.material.setAttr("aoMapRepeat",n)},{label:"",key:"aoMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapCenter"),setter:(e,n)=>e.material.setAttr("aoMapCenter",n)},{label:"",key:"aoMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapRotation"),setter:(e,n)=>e.material.setAttr("aoMapRotation",n)},{label:"Y",key:"aoMapFlipY",type:M.BOOLEAN,group:l.AO_MAP.key,groupName:l.AO_MAP.name,visible:de,getter:e=>e.material.getAttr("aoMapFlipY"),setter:(e,n)=>e.material.setAttr("aoMapFlipY",n)},{label:"",key:"aoMapColorSpace",type:M.ENUM,group:l.AO_MAP.key,groupName:l.AO_MAP.name,options:jt,visible:de,getter:e=>e.material.getAttr("aoMapColorSpace"),setter:(e,n)=>e.material.setAttr("aoMapColorSpace",n)},{label:"",key:"reflectivity",min:0,step:.1,precision:2,type:M.NUMBER,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:Ht,getter:e=>e.material.getAttr("reflectivity"),setter:(e,n)=>e.material.setAttr("reflectivity",n)},{label:"",key:"refractionRatio",min:0,step:.1,precision:2,type:M.NUMBER,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:Ht,getter:e=>e.material.getAttr("refractionRatio"),setter:(e,n)=>e.material.setAttr("refractionRatio",n)},{label:"",key:"envMapIntensity",min:0,step:.1,precision:2,type:M.NUMBER,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:lt,getter:e=>e.material.getAttr("envMapIntensity"),setter:(e,n)=>e.material.setAttr("envMapIntensity",n)},{label:"",key:"envMapImage",type:M.TEXTURE,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:de,getter:e=>e.material.getAttr("envMapImage"),setter:(e,n)=>e.material.setAttr("envMapImage",n)},{label:"",key:"envMapMapping",type:M.ENUM,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,options:Bt,visible:de,getter:e=>e.material.getAttr("envMapMapping"),setter:(e,n)=>e.material.setAttr("envMapMapping",n)},{label:"",key:"envMapWrapS",type:M.ENUM,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("envMapWrapS"),setter:(e,n)=>e.material.setAttr("envMapWrapS",n)},{label:"",key:"envMapWrapT",type:M.ENUM,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("envMapWrapT"),setter:(e,n)=>e.material.setAttr("envMapWrapT",n)},{label:"",key:"envMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:de,getter:e=>e.material.getAttr("envMapOffset"),setter:(e,n)=>e.material.setAttr("envMapOffset",n)},{label:"",key:"envMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:de,getter:e=>e.material.getAttr("envMapRepeat"),setter:(e,n)=>e.material.setAttr("envMapRepeat",n)},{label:"",key:"envMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:de,getter:e=>e.material.getAttr("envMapCenter"),setter:(e,n)=>e.material.setAttr("envMapCenter",n)},{label:"",key:"envMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:de,getter:e=>e.material.getAttr("envMapRotation"),setter:(e,n)=>e.material.setAttr("envMapRotation",n)},{label:"Y",key:"envMapFlipY",type:M.BOOLEAN,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,visible:me,getter:e=>e.material.getAttr("envMapFlipY"),setter:(e,n)=>e.material.setAttr("envMapFlipY",n)},{label:"",key:"envMapColorSpace",type:M.ENUM,group:l.ENV_MAP.key,groupName:l.ENV_MAP.name,options:jt,visible:de,getter:e=>e.material.getAttr("envMapColorSpace"),setter:(e,n)=>e.material.setAttr("envMapColorSpace",n)},{label:"",key:"emissive",type:M.COLOR,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissive"),setter:(e,n)=>e.material.setAttr("emissive",n)},{label:"",key:"emissiveIntensity",min:0,step:.1,precision:2,type:M.NUMBER,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveIntensity"),setter:(e,n)=>e.material.setAttr("emissiveIntensity",n)},{label:"",key:"emissiveMapImage",type:M.TEXTURE,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveMapImage"),setter:(e,n)=>e.material.setAttr("emissiveMapImage",n)},{label:"",key:"emissiveMapMapping",type:M.ENUM,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,options:Bt,visible:me,getter:e=>e.material.getAttr("emissiveMapMapping"),setter:(e,n)=>e.material.setAttr("emissiveMapMapping",n)},{label:"",key:"emissiveMapWrapS",type:M.ENUM,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("emissiveMapWrapS"),setter:(e,n)=>e.material.setAttr("emissiveMapWrapS",n)},{label:"",key:"emissiveMapWrapT",type:M.ENUM,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("emissiveMapWrapT"),setter:(e,n)=>e.material.setAttr("emissiveMapWrapT",n)},{label:"",key:"emissiveMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveMapOffset"),setter:(e,n)=>e.material.setAttr("emissiveMapOffset",n)},{label:"",key:"emissiveMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveMapRepeat"),setter:(e,n)=>e.material.setAttr("emissiveMapRepeat",n)},{label:"",key:"emissiveMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveMapCenter"),setter:(e,n)=>e.material.setAttr("emissiveMapCenter",n)},{label:"",key:"emissiveMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveMapRotation"),setter:(e,n)=>e.material.setAttr("emissiveMapRotation",n)},{label:"Y",key:"emissiveMapFlipY",type:M.BOOLEAN,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,visible:me,getter:e=>e.material.getAttr("emissiveMapFlipY"),setter:(e,n)=>e.material.setAttr("emissiveMapFlipY",n)},{label:"",key:"emissiveMapColorSpace",type:M.ENUM,group:l.EMISSIVE_MAP.key,groupName:l.EMISSIVE_MAP.name,options:jt,visible:me,getter:e=>e.material.getAttr("emissiveMapColorSpace"),setter:(e,n)=>e.material.setAttr("emissiveMapColorSpace",n)},{label:"",key:"alphaMapImage",type:M.TEXTURE,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,visible:de,getter:e=>e.material.getAttr("alphaMapImage"),setter:(e,n)=>e.material.setAttr("alphaMapImage",n)},{label:"",key:"alphaMapMapping",type:M.ENUM,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,options:Bt,visible:de,getter:e=>e.material.getAttr("alphaMapMapping"),setter:(e,n)=>e.material.setAttr("alphaMapMapping",n)},{label:"",key:"alphaMapWrapS",type:M.ENUM,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("alphaMapWrapS"),setter:(e,n)=>e.material.setAttr("alphaMapWrapS",n)},{label:"",key:"alphaMapWrapT",type:M.ENUM,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("alphaMapWrapT"),setter:(e,n)=>e.material.setAttr("alphaMapWrapT",n)},{label:"",key:"alphaMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,visible:de,getter:e=>e.material.getAttr("alphaMapOffset"),setter:(e,n)=>e.material.setAttr("alphaMapOffset",n)},{label:"",key:"alphaMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,visible:de,getter:e=>e.material.getAttr("alphaMapRepeat"),setter:(e,n)=>e.material.setAttr("alphaMapRepeat",n)},{label:"",key:"alphaMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,visible:de,getter:e=>e.material.getAttr("alphaMapCenter"),setter:(e,n)=>e.material.setAttr("alphaMapCenter",n)},{label:"",key:"alphaMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,visible:de,getter:e=>e.material.getAttr("alphaMapRotation"),setter:(e,n)=>e.material.setAttr("alphaMapRotation",n)},{label:"Y",key:"alphaMapFlipY",type:M.BOOLEAN,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,visible:de,getter:e=>e.material.getAttr("alphaMapFlipY"),setter:(e,n)=>e.material.setAttr("alphaMapFlipY",n)},{label:"",key:"alphaMapColorSpace",type:M.ENUM,group:l.ALPHA_MAP.key,groupName:l.ALPHA_MAP.name,options:jt,visible:de,getter:e=>e.material.getAttr("alphaMapColorSpace"),setter:(e,n)=>e.material.setAttr("alphaMapColorSpace",n)},{label:"",key:"bumpScale",min:0,step:.1,precision:2,type:M.NUMBER,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpScale"),setter:(e,n)=>e.material.setAttr("bumpScale",n)},{label:"",key:"bumpMapImage",type:M.TEXTURE,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpMapImage"),setter:(e,n)=>e.material.setAttr("bumpMapImage",n)},{label:"",key:"bumpMapMapping",type:M.ENUM,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,options:Bt,visible:me,getter:e=>e.material.getAttr("bumpMapMapping"),setter:(e,n)=>e.material.setAttr("bumpMapMapping",n)},{label:"",key:"bumpMapWrapS",type:M.ENUM,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("bumpMapWrapS"),setter:(e,n)=>e.material.setAttr("bumpMapWrapS",n)},{label:"",key:"bumpMapWrapT",type:M.ENUM,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("bumpMapWrapT"),setter:(e,n)=>e.material.setAttr("bumpMapWrapT",n)},{label:"",key:"bumpMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpMapOffset"),setter:(e,n)=>e.material.setAttr("bumpMapOffset",n)},{label:"",key:"bumpMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpMapRepeat"),setter:(e,n)=>e.material.setAttr("bumpMapRepeat",n)},{label:"",key:"bumpMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpMapCenter"),setter:(e,n)=>e.material.setAttr("bumpMapCenter",n)},{label:"",key:"bumpMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpMapRotation"),setter:(e,n)=>e.material.setAttr("bumpMapRotation",n)},{label:"Y",key:"bumpMapFlipY",type:M.BOOLEAN,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,visible:me,getter:e=>e.material.getAttr("bumpMapFlipY"),setter:(e,n)=>e.material.setAttr("bumpMapFlipY",n)},{label:"",key:"bumpMapColorSpace",type:M.ENUM,group:l.BUMP_MAP.key,groupName:l.BUMP_MAP.name,options:jt,visible:me,getter:e=>e.material.getAttr("bumpMapColorSpace"),setter:(e,n)=>e.material.setAttr("bumpMapColorSpace",n)},{label:"",key:"displacementScale",min:0,step:.1,precision:2,type:M.NUMBER,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementScale"),setter:(e,n)=>e.material.setAttr("displacementScale",n)},{label:"",key:"displacementBias",step:.1,precision:2,type:M.NUMBER,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementBias"),setter:(e,n)=>e.material.setAttr("displacementBias",n)},{label:"",key:"displacementMapImage",type:M.TEXTURE,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementMapImage"),setter:(e,n)=>e.material.setAttr("displacementMapImage",n)},{label:"",key:"displacementMapMapping",type:M.ENUM,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,options:Bt,visible:me,getter:e=>e.material.getAttr("displacementMapMapping"),setter:(e,n)=>e.material.setAttr("displacementMapMapping",n)},{label:"",key:"displacementMapWrapS",type:M.ENUM,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("displacementMapWrapS"),setter:(e,n)=>e.material.setAttr("displacementMapWrapS",n)},{label:"",key:"displacementMapWrapT",type:M.ENUM,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,options:it,visible:me,getter:e=>e.material.getAttr("displacementMapWrapT"),setter:(e,n)=>e.material.setAttr("displacementMapWrapT",n)},{label:"",key:"displacementMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementMapOffset"),setter:(e,n)=>e.material.setAttr("displacementMapOffset",n)},{label:"",key:"displacementMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementMapRepeat"),setter:(e,n)=>e.material.setAttr("displacementMapRepeat",n)},{label:"",key:"displacementMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementMapCenter"),setter:(e,n)=>e.material.setAttr("displacementMapCenter",n)},{label:"",key:"displacementMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementMapRotation"),setter:(e,n)=>e.material.setAttr("displacementMapRotation",n)},{label:"Y",key:"displacementMapFlipY",type:M.BOOLEAN,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,visible:me,getter:e=>e.material.getAttr("displacementMapFlipY"),setter:(e,n)=>e.material.setAttr("displacementMapFlipY",n)},{label:"",key:"displacementMapColorSpace",type:M.ENUM,group:l.DISPLACEMENT_MAP.key,groupName:l.DISPLACEMENT_MAP.name,options:jt,visible:me,getter:e=>e.material.getAttr("displacementMapColorSpace"),setter:(e,n)=>e.material.setAttr("displacementMapColorSpace",n)},{label:"",key:"lightMapIntensity",min:0,step:.1,precision:2,type:M.NUMBER,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapIntensity"),setter:(e,n)=>e.material.setAttr("lightMapIntensity",n)},{label:"",key:"lightMapImage",type:M.TEXTURE,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapImage"),setter:(e,n)=>e.material.setAttr("lightMapImage",n)},{label:"",key:"lightMapMapping",type:M.ENUM,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,options:Bt,visible:de,getter:e=>e.material.getAttr("lightMapMapping"),setter:(e,n)=>e.material.setAttr("lightMapMapping",n)},{label:"",key:"lightMapWrapS",type:M.ENUM,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("lightMapWrapS"),setter:(e,n)=>e.material.setAttr("lightMapWrapS",n)},{label:"",key:"lightMapWrapT",type:M.ENUM,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,options:it,visible:de,getter:e=>e.material.getAttr("lightMapWrapT"),setter:(e,n)=>e.material.setAttr("lightMapWrapT",n)},{label:"",key:"lightMapOffset",step:.1,precision:2,min:0,max:1,type:M.VECTOR2,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapOffset"),setter:(e,n)=>e.material.setAttr("lightMapOffset",n)},{label:"",key:"lightMapRepeat",step:.1,precision:2,type:M.VECTOR2,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapRepeat"),setter:(e,n)=>e.material.setAttr("lightMapRepeat",n)},{label:"",key:"lightMapCenter",min:0,max:1,step:.1,precision:2,type:M.VECTOR2,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapCenter"),setter:(e,n)=>e.material.setAttr("lightMapCenter",n)},{label:"",key:"lightMapRotation",min:0,max:360,step:1,precision:1,type:M.NUMBER,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapRotation"),setter:(e,n)=>e.material.setAttr("lightMapRotation",n)},{label:"Y",key:"lightMapFlipY",type:M.BOOLEAN,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,visible:de,getter:e=>e.material.getAttr("lightMapFlipY"),setter:(e,n)=>e.material.setAttr("lightMapFlipY",n)},{label:"",key:"lightMapColorSpace",type:M.ENUM,group:l.LIGHT_MAP.key,groupName:l.LIGHT_MAP.name,options:jt,visible:de,getter:e=>e.material.getAttr("lightMapColorSpace"),setter:(e,n)=>e.material.setAttr("lightMapColorSpace",n)},{label:"Uniforms",key:"uniforms",type:M.UNIFORMS,group:l.CUSTOM_SHADER.key,groupName:l.CUSTOM_SHADER.name,visible:Xa,getter:e=>e.material.getAttr("uniforms"),setter:(e,n)=>e.material.setAttr("uniforms",n)},{label:"",key:"vertexShader",type:M.VERTEX_SHADER,group:l.CUSTOM_SHADER.key,groupName:l.CUSTOM_SHADER.name,visible:Xa,getter:e=>e.material.getAttr("vertexShader"),setter:(e,n)=>e.material.setAttr("vertexShader",n)},{label:"",key:"fragmentShader",type:M.FRAGEMENT_SHADER,group:l.CUSTOM_SHADER.key,groupName:l.CUSTOM_SHADER.name,visible:Xa,getter:e=>e.material.getAttr("fragmentShader"),setter:(e,n)=>e.material.setAttr("fragmentShader",n)}]}}class yf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"activeGroups");C(this,"getGroups",()=>[]);this.editor=t,this.activeGroups=[l.BASE.key];const{commonAttrs:e}=new vf(this.editor);this.commonAttrs=this.createAttributes(e)}createAttributes(t){return t.map(e=>new ur(this.editor,e,[]))}getAttributes(){return[...this.commonAttrs]}}const bf=[{key:"copy",label:"",action:r=>{r.copyManager.copy()},visible:r=>r.selectionManager.getSelection().length>0},{key:"cut",label:"",action:r=>{r.copyManager.cut()},visible:r=>r.selectionManager.getSelection().length>0},{key:"paste",label:"",action:r=>{r.copyManager.paste()},visible:r=>r.copyManager.canPaste()},{key:"delete",label:"",action:r=>{const t=r.selectionManager.getSelection();r.historyManager.beginTransaction(),r.core.select([]),t.forEach(e=>r.core.removeEntity(e)),r.historyManager.endTransaction()},visible:r=>r.selectionManager.getSelection().length>0},{key:"copy-material",label:"",action:r=>{r.copyManager.copyMaterial()},visible:r=>r.selectionManager.getSelection().length>0},{key:"paste-material",label:"",action:r=>{r.copyManager.pasteMaterial()},visible:r=>r.copyManager.canPasteMaterial()},{key:"component",label:"",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:ft[ve.SimpleScript],action:r=>{const t=$r(ve.SimpleScript),e=[...r.selectionManager.getSelection()];e.length===0&&e.push(r.selectionManager.getView()),r.historyManager.beginTransaction(),e.forEach(n=>{const{entityManager:a}=r.core,i=a.createComponent(t,n);r.core.addComponent(i,n)}),r.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:ft[ve.OrbitControls],action:r=>{const t=$r(ve.OrbitControls),e=r.selectionManager.getSelection();r.historyManager.beginTransaction(),e.forEach(n=>{const{entityManager:a}=r.core,i=a.createComponent(t,n);r.core.addComponent(i,n)}),r.historyManager.endTransaction()},visible:r=>{const t=r.selectionManager.getSelection(),e=t.filter(n=>n instanceof tn);return e.length>0&&e.length===t.length}},{key:"compoent_pointer_lock_controls",label:ft[ve.PointerLockControls],action:r=>{const t=$r(ve.PointerLockControls),e=r.selectionManager.getSelection();r.historyManager.beginTransaction(),e.forEach(n=>{const{entityManager:a}=r.core,i=a.createComponent(t,n);r.core.addComponent(i,n)}),r.historyManager.endTransaction()},visible:r=>{const t=r.selectionManager.getSelection(),e=t.filter(n=>n instanceof tn);return e.length>0&&e.length===t.length}}]}],Sf=[{key:"copy",label:"",action:r=>{r.copyManager.copy()},visible:r=>r.selectionManager.getSelection().length>0},{key:"cut",label:"",action:r=>{r.copyManager.cut()},visible:r=>r.selectionManager.getSelection().length>0},{key:"paste",label:"",action:r=>{r.copyManager.paste()},visible:r=>r.copyManager.canPaste()},{key:"delete",label:"",action:r=>{const t=r.selectionManager.getSelection();r.historyManager.beginTransaction(),r.core.select([]),t.forEach(e=>r.core.removeEntity(e)),r.historyManager.endTransaction()},visible:r=>r.selectionManager.getSelection().length>0},{key:"component",label:"",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:"",action:r=>{const t=$r(ve.SimpleScript),e=[...r.selectionManager.getSelection()];e.length===0&&e.push(r.selectionManager.getView()),r.historyManager.beginTransaction(),e.forEach(n=>{const{entityManager:a}=r.core,i=a.createComponent(t,n);r.core.addComponent(i,n)}),r.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:"",action:r=>{const t=$r(ve.OrbitControls),e=r.selectionManager.getSelection();r.historyManager.beginTransaction(),e.forEach(n=>{const{entityManager:a}=r.core,i=a.createComponent(t,n);r.core.addComponent(i,n)}),r.historyManager.endTransaction()},visible:r=>{const t=r.selectionManager.getSelection(),e=t.filter(n=>n instanceof tn);return e.length>0&&e.length===t.length}},{key:"compoent_pointer_lock_controls",label:ft[ve.PointerLockControls],action:r=>{const t=$r(ve.PointerLockControls),e=r.selectionManager.getSelection();r.historyManager.beginTransaction(),e.forEach(n=>{const{entityManager:a}=r.core,i=a.createComponent(t,n);r.core.addComponent(i,n)}),r.historyManager.endTransaction()},visible:r=>{const t=r.selectionManager.getSelection(),e=t.filter(n=>n instanceof tn);return e.length>0&&e.length===t.length}}]}],Mf=[{key:"DELETE",label:"",action:r=>{var n;const e=(n=r.contextMenuManager.meta.group.meta)==null?void 0:n.component;e&&r.core.removeComponent(e)},visible:()=>!0}];class Cf{constructor(){C(this,"core");C(this,"historyManager");C(this,"hotkeyManager");C(this,"attrManager");C(this,"contextMenuManager");C(this,"nodeManager");C(this,"selectionManager");C(this,"toolManager");C(this,"dropManager");C(this,"copyManager");C(this,"dataManager");C(this,"componentManager");C(this,"materialManager");C(this,"bus");C(this,"dirty");this.core=new Gc({}),this.bus=Wc(),this.dirty=!1,this.core.use(new Jr(this.core)),this.core.use(new Jo(this.core)),this.core.use(new Yc(this.core)),this.core.use(new Xc(this.core)),this.core.use(new ag(this.core)),this.core.use(new on(this.core)),this.core.use(new es(this.core)),this.core.use(new Fs(this.core)),this.core.use(new Us(this.core)),this.core.use(new Gs(this.core)),this.core.use(new ra(this.core)),this.core.use(new hr(this.core)),this.core.use(new fi(this.core)),this.core.use(new og(this.core));const t=new df(this),e=new hf(this),n=new yf(this);this.hotkeyManager=new ug(this,af),this.attrManager=new cg(this,t,e),this.materialManager=new nf(this,n),this.contextMenuManager=new rf(this),this.historyManager=new ef(this),this.nodeManager=new dg(this),this.selectionManager=new zg(this),this.toolManager=new Dg(this),this.dropManager=new Bg(this),this.copyManager=new jg(this),this.dataManager=new Qg(this),this.componentManager=new tf(this)}initContextMenus(){const{GRAPH:t,HIERARCHY:e,ATTR_COMPONENT:n}=Ca;this.contextMenuManager.addContextMenu(t,bf),this.contextMenuManager.addContextMenu(e,Sf),this.contextMenuManager.addContextMenu(n,Mf)}initListeners(){this.core.bus.on("ENTITY_ADDED",()=>{this.bus.emit("NODE_ADD",this)}),this.core.bus.on("ENTITY_REMOVED",()=>{this.bus.emit("NODE_REMOVE",this)}),this.core.bus.on("ENTITY_MOVED",()=>{this.attrManager.update(),this.bus.emit("NODE_MOVE",this)}),this.core.bus.on("ENTITY_SELECTED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("ENTITY_CHANGED",()=>{this.attrManager.update(),this.bus.emit("ATTR_CHANGE",this)}),this.core.bus.on("COMPONENT_ADDED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_REMOVED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_CHANGED",()=>{this.attrManager.update()}),this.core.bus.on("MATERIAL_CHANGED",t=>{this.materialManager.update(),t.key==="type"&&this.bus.emit("MATERIAL_CHANGE",this)}),this.core.bus.on("MATERIAL_COPIED",()=>{this.bus.emit("MATERIAL_CHANGE",this)}),this.core.bus.on("HISTORY_CHANGE",()=>{this.dirty=!0,this.bus.emit("TAB_DIRTY",this)}),this.core.bus.on("DESERIALIZE",()=>{this.bus.emit("DESERIALIZATED",this)})}async mount(t){this.core.mount(t),this.toolManager.mount(),this.initContextMenus(),this.initListeners(),this.bus.emit("TAB_MOUNT",this)}resize(){this.core.resize()}active(){this.hotkeyManager.active(),this.core.active(),this.resize()}deactive(){this.hotkeyManager.deactive(),this.core.deactive()}unmount(){this.attrManager.dispose(),this.hotkeyManager.dispose(),this.historyManager.dispose(),this.toolManager.dispose(),this.contextMenuManager.dispose(),this.core.unmount()}async open(t){const e=await Gl(t);e&&this.core.deserialize(e.content)}async save(){const e=await this.core.getPlugin(Jr).toImage(),n=this.core.entityManager.root.code,a=this.core.serialize(),i=await Wl(n,e,a);this.historyManager.pause(),this.core.entityManager.root.setAttr("date",i==null?void 0:i.scene.date),this.historyManager.resume(),this.bus.emit("MESSAGE",{message:"",type:"success"})}preview(){const t=this.core.entityManager.root.code;window.open(`#/preview?id=${t}`,`#/preview?id=${t}`)}async reload(){this.historyManager.pause(),this.core.clear(),this.dirty=!1,this.open(this.core.entityManager.root.code),this.historyManager.dispose(),this.historyManager.resume(),this.bus.emit("TAB_DIRTY",this)}}const Af=(r,t)=>{const[e,n]=u.useState(r.item);return u.useEffect(()=>{r.item&&(r.item.listen(t),t(r.item.getter()))},[]),r.update=a=>{e==null||e.unlisten(t),n(a),a&&(a.listen(t),t(a.getter()))},r.destroy=()=>{e==null||e.unlisten(t)},e},Ef=r=>{const{attribute:t,value:e,onChange:n}=r,[a,i]=u.useState(""),[o,s]=u.useState(!1);u.useEffect(()=>{i(e)},[e]);const c=p=>{i(p.target.value),s(!0)},d=()=>{o&&(n(a),s(!1))};return z.jsx(Sa,{style:{borderRadius:"4px"},disabled:t==null?void 0:t.disabled,value:a,onChange:c,onPressEnter:d,onBlur:d})},Qr=r=>{const{style:t,attribute:e,value:n,onChange:a}=r,[i,o]=u.useState(0),[s,c]=u.useState(!1);u.useEffect(()=>{o(n)},[n]);const d=g=>{o(g||0),c(!0)},p=()=>{s&&(a(i),c(!1))},h=g=>{c(!1),o(g||0),a(g)};return z.jsx(Ai,{style:{borderRadius:"4px",...t},disabled:e==null?void 0:e.disabled,min:e==null?void 0:e.min,max:e==null?void 0:e.max,precision:e==null?void 0:e.precision,step:e==null?void 0:e.step,value:i,onChange:d,onPressEnter:p,onBlur:p,onStep:h})},xf=r=>{const{attribute:t,value:e,onChange:n}=r,a=i=>{n(i.target.checked)};return z.jsx(vi,{disabled:t==null?void 0:t.disabled,checked:e,onChange:a})},wf=r=>{const{attribute:t,value:e,onChange:n}=r,[a,i]=u.useState(e);u.useEffect(()=>{i(e)},[e]);const o=s=>{n(s.toHexString())};return z.jsx(xi,{style:{borderRadius:"4px"},disabled:t==null?void 0:t.disabled,disabledAlpha:t==null?void 0:t.disableAlpha,showText:!0,value:a,onChange:i,onChangeComplete:o})},Nf=r=>{const{attribute:t,value:e,onChange:n}=r,[a,i]=u.useState("");u.useEffect(()=>{i(e)},[e]);const o=s=>{n(s)};return z.jsx(Xo,{style:{width:"100%",borderRadius:"4px"},disabled:t==null?void 0:t.disabled,options:t==null?void 0:t.options,value:a,onChange:o})},Pf=r=>{const{attribute:t,value:e,onChange:n}=r,[a,i]=u.useState(0),[o,s]=u.useState(0);u.useEffect(()=>{const[p,h]=e||[];i(p),s(h)},[e]);const c=p=>{n([p,o,"x"])},d=p=>{n([a,p,"y"])};return z.jsxs(qo,{gutter:4,children:[z.jsx(bn,{span:8,children:z.jsx(Qr,{style:{width:"unset"},attribute:t,value:a,onChange:c})}),z.jsx(bn,{span:8,children:z.jsx(Qr,{style:{width:"unset"},attribute:t,value:o,onChange:d})})]})},Of=r=>{const{attribute:t,value:e,onChange:n}=r,[a,i]=u.useState(0),[o,s]=u.useState(0),[c,d]=u.useState(0);u.useEffect(()=>{const[m,S,b]=e||[];i(m),s(S),d(b)},[e]);const p=m=>{n([m,o,c,"x"])},h=m=>{n([a,m,c,"y"])},g=m=>{n([a,o,m,"z"])};return z.jsxs(qo,{gutter:4,children:[z.jsx(bn,{span:8,children:z.jsx(Qr,{style:{width:"unset"},attribute:t,value:a,onChange:p})}),z.jsx(bn,{span:8,children:z.jsx(Qr,{style:{width:"unset"},attribute:t,value:o,onChange:h})}),z.jsx(bn,{span:8,children:z.jsx(Qr,{style:{width:"unset"},attribute:t,value:c,onChange:g})})]})};function kf(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function xo(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function wo(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?xo(Object(e),!0).forEach(function(n){kf(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):xo(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function If(r,t){if(r==null)return{};var e={},n=Object.keys(r),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(e[a]=r[a]);return e}function Rf(r,t){if(r==null)return{};var e=If(r,t),n,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(a=0;a<i.length;a++)n=i[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(r,n)&&(e[n]=r[n])}return e}function _f(r,t){return Tf(r)||$f(r,t)||Lf(r,t)||Df()}function Tf(r){if(Array.isArray(r))return r}function $f(r,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(r)))){var e=[],n=!0,a=!1,i=void 0;try{for(var o=r[Symbol.iterator](),s;!(n=(s=o.next()).done)&&(e.push(s.value),!(t&&e.length===t));n=!0);}catch(c){a=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(a)throw i}}return e}}function Lf(r,t){if(r){if(typeof r=="string")return No(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);if(e==="Object"&&r.constructor&&(e=r.constructor.name),e==="Map"||e==="Set")return Array.from(r);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return No(r,t)}}function No(r,t){(t==null||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function Df(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zf(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function Po(r,t){var e=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),e.push.apply(e,n)}return e}function Oo(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Po(Object(e),!0).forEach(function(n){zf(r,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):Po(Object(e)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(e,n))})}return r}function Bf(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return function(n){return t.reduceRight(function(a,i){return i(a)},n)}}function yn(r){return function t(){for(var e=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return a.length>=r.length?r.apply(this,a):function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return t.apply(e,[].concat(a,s))}}}function pa(r){return{}.toString.call(r).includes("Object")}function jf(r){return!Object.keys(r).length}function xn(r){return typeof r=="function"}function Hf(r,t){return Object.prototype.hasOwnProperty.call(r,t)}function Vf(r,t){return pa(t)||Cr("changeType"),Object.keys(t).some(function(e){return!Hf(r,e)})&&Cr("changeField"),t}function Ff(r){xn(r)||Cr("selectorType")}function Uf(r){xn(r)||pa(r)||Cr("handlerType"),pa(r)&&Object.values(r).some(function(t){return!xn(t)})&&Cr("handlersType")}function Gf(r){r||Cr("initialIsRequired"),pa(r)||Cr("initialType"),jf(r)&&Cr("initialContent")}function Wf(r,t){throw new Error(r[t]||r.default)}var Yf={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Cr=yn(Wf)(Yf),Jn={changes:Vf,selector:Ff,handler:Uf,initial:Gf};function Xf(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jn.initial(r),Jn.handler(t);var e={current:r},n=yn(Zf)(e,t),a=yn(Kf)(e),i=yn(Jn.changes)(r),o=yn(qf)(e);function s(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return Jn.selector(d),d(e.current)}function c(d){Bf(n,a,i,o)(d)}return[s,c]}function qf(r,t){return xn(t)?t(r.current):t}function Kf(r,t){return r.current=Oo(Oo({},r.current),t),t}function Zf(r,t,e){return xn(t)?t(r.current):Object.keys(e).forEach(function(n){var a;return(a=t[n])===null||a===void 0?void 0:a.call(t,r.current[n])}),e}var Qf={create:Xf},Jf={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function ev(r){return function t(){for(var e=this,n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return a.length>=r.length?r.apply(this,a):function(){for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return t.apply(e,[].concat(a,s))}}}function tv(r){return{}.toString.call(r).includes("Object")}function rv(r){return r||ko("configIsRequired"),tv(r)||ko("configType"),r.urls?(nv(),{paths:{vs:r.urls.monacoBase}}):r}function nv(){console.warn(Ws.deprecation)}function av(r,t){throw new Error(r[t]||r.default)}var Ws={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},ko=ev(av)(Ws),iv={config:rv},ov=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(a){return e.reduceRight(function(i,o){return o(i)},a)}};function Ys(r,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&r[e]&&Object.assign(t[e],Ys(r[e],t[e]))}),wo(wo({},r),t)}var sv={type:"cancelation",msg:"operation is manually canceled"};function qa(r){var t=!1,e=new Promise(function(n,a){r.then(function(i){return t?a(sv):n(i)}),r.catch(a)});return e.cancel=function(){return t=!0},e}var lv=Qf.create({config:Jf,isInitialized:!1,resolve:null,reject:null,monaco:null}),Xs=_f(lv,2),On=Xs[0],Ea=Xs[1];function cv(r){var t=iv.config(r),e=t.monaco,n=Rf(t,["monaco"]);Ea(function(a){return{config:Ys(a.config,n),monaco:e}})}function uv(){var r=On(function(t){var e=t.monaco,n=t.isInitialized,a=t.resolve;return{monaco:e,isInitialized:n,resolve:a}});if(!r.isInitialized){if(Ea({isInitialized:!0}),r.monaco)return r.resolve(r.monaco),qa(Ka);if(window.monaco&&window.monaco.editor)return qs(window.monaco),r.resolve(window.monaco),qa(Ka);ov(dv,hv)(mv)}return qa(Ka)}function dv(r){return document.body.appendChild(r)}function pv(r){var t=document.createElement("script");return r&&(t.src=r),t}function hv(r){var t=On(function(n){var a=n.config,i=n.reject;return{config:a,reject:i}}),e=pv("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return r()},e.onerror=t.reject,e}function mv(){var r=On(function(e){var n=e.config,a=e.resolve,i=e.reject;return{config:n,resolve:a,reject:i}}),t=window.require;t.config(r.config),t(["vs/editor/editor.main"],function(e){qs(e),r.resolve(e)},function(e){r.reject(e)})}function qs(r){On().monaco||Ea({monaco:r})}function gv(){return On(function(r){var t=r.monaco;return t})}var Ka=new Promise(function(r,t){return Ea({resolve:r,reject:t})}),Ks={config:cv,init:uv,__getMonacoInstance:gv},fv={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Za=fv,vv={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},yv=vv;function bv({children:r}){return D.createElement("div",{style:yv.container},r)}var Sv=bv,Mv=Sv;function Cv({width:r,height:t,isEditorReady:e,loading:n,_ref:a,className:i,wrapperProps:o}){return D.createElement("section",{style:{...Za.wrapper,width:r,height:t},...o},!e&&D.createElement(Mv,null,n),D.createElement("div",{ref:a,style:{...Za.fullWidth,...!e&&Za.hide},className:i}))}var Av=Cv,Zs=u.memo(Av);function Ev(r){u.useEffect(r,[])}var Qs=Ev;function xv(r,t,e=!0){let n=u.useRef(!0);u.useEffect(n.current||!e?()=>{n.current=!1}:r,t)}var Rt=xv;function Mn(){}function qr(r,t,e,n){return wv(r,n)||Nv(r,t,e,n)}function wv(r,t){return r.editor.getModel(Js(r,t))}function Nv(r,t,e,n){return r.editor.createModel(t,e,n?Js(r,n):void 0)}function Js(r,t){return r.Uri.parse(t)}function Pv({original:r,modified:t,language:e,originalLanguage:n,modifiedLanguage:a,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:s=!1,keepCurrentModifiedModel:c=!1,theme:d="light",loading:p="Loading...",options:h={},height:g="100%",width:m="100%",className:S,wrapperProps:b={},beforeMount:f=Mn,onMount:v=Mn}){let[y,x]=u.useState(!1),[A,E]=u.useState(!0),I=u.useRef(null),N=u.useRef(null),O=u.useRef(null),$=u.useRef(v),P=u.useRef(f),R=u.useRef(!1);Qs(()=>{let k=Ks.init();return k.then(H=>(N.current=H)&&E(!1)).catch(H=>(H==null?void 0:H.type)!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>I.current?L():k.cancel()}),Rt(()=>{if(I.current&&N.current){let k=I.current.getOriginalEditor(),H=qr(N.current,r||"",n||e||"text",i||"");H!==k.getModel()&&k.setModel(H)}},[i],y),Rt(()=>{if(I.current&&N.current){let k=I.current.getModifiedEditor(),H=qr(N.current,t||"",a||e||"text",o||"");H!==k.getModel()&&k.setModel(H)}},[o],y),Rt(()=>{let k=I.current.getModifiedEditor();k.getOption(N.current.editor.EditorOption.readOnly)?k.setValue(t||""):t!==k.getValue()&&(k.executeEdits("",[{range:k.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),k.pushUndoStop())},[t],y),Rt(()=>{var k,H;(H=(k=I.current)==null?void 0:k.getModel())==null||H.original.setValue(r||"")},[r],y),Rt(()=>{let{original:k,modified:H}=I.current.getModel();N.current.editor.setModelLanguage(k,n||e||"text"),N.current.editor.setModelLanguage(H,a||e||"text")},[e,n,a],y),Rt(()=>{var k;(k=N.current)==null||k.editor.setTheme(d)},[d],y),Rt(()=>{var k;(k=I.current)==null||k.updateOptions(h)},[h],y);let _=u.useCallback(()=>{var V;if(!N.current)return;P.current(N.current);let k=qr(N.current,r||"",n||e||"text",i||""),H=qr(N.current,t||"",a||e||"text",o||"");(V=I.current)==null||V.setModel({original:k,modified:H})},[e,t,a,r,n,i,o]),B=u.useCallback(()=>{var k;!R.current&&O.current&&(I.current=N.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...h}),_(),(k=N.current)==null||k.editor.setTheme(d),x(!0),R.current=!0)},[h,d,_]);u.useEffect(()=>{y&&$.current(I.current,N.current)},[y]),u.useEffect(()=>{!A&&!y&&B()},[A,y,B]);function L(){var H,V,K,q;let k=(H=I.current)==null?void 0:H.getModel();s||((V=k==null?void 0:k.original)==null||V.dispose()),c||((K=k==null?void 0:k.modified)==null||K.dispose()),(q=I.current)==null||q.dispose()}return D.createElement(Zs,{width:m,height:g,isEditorReady:y,loading:p,_ref:O,className:S,wrapperProps:b})}var Ov=Pv;u.memo(Ov);function kv(r){let t=u.useRef();return u.useEffect(()=>{t.current=r},[r]),t.current}var Iv=kv,ea=new Map;function Rv({defaultValue:r,defaultLanguage:t,defaultPath:e,value:n,language:a,path:i,theme:o="light",line:s,loading:c="Loading...",options:d={},overrideServices:p={},saveViewState:h=!0,keepCurrentModel:g=!1,width:m="100%",height:S="100%",className:b,wrapperProps:f={},beforeMount:v=Mn,onMount:y=Mn,onChange:x,onValidate:A=Mn}){let[E,I]=u.useState(!1),[N,O]=u.useState(!0),$=u.useRef(null),P=u.useRef(null),R=u.useRef(null),_=u.useRef(y),B=u.useRef(v),L=u.useRef(),k=u.useRef(n),H=Iv(i),V=u.useRef(!1),K=u.useRef(!1);Qs(()=>{let G=Ks.init();return G.then(Z=>($.current=Z)&&O(!1)).catch(Z=>(Z==null?void 0:Z.type)!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>P.current?ue():G.cancel()}),Rt(()=>{var Z,Q,re,Y;let G=qr($.current,r||n||"",t||a||"",i||e||"");G!==((Z=P.current)==null?void 0:Z.getModel())&&(h&&ea.set(H,(Q=P.current)==null?void 0:Q.saveViewState()),(re=P.current)==null||re.setModel(G),h&&((Y=P.current)==null||Y.restoreViewState(ea.get(i))))},[i],E),Rt(()=>{var G;(G=P.current)==null||G.updateOptions(d)},[d],E),Rt(()=>{!P.current||n===void 0||(P.current.getOption($.current.editor.EditorOption.readOnly)?P.current.setValue(n):n!==P.current.getValue()&&(K.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:n,forceMoveMarkers:!0}]),P.current.pushUndoStop(),K.current=!1))},[n],E),Rt(()=>{var Z,Q;let G=(Z=P.current)==null?void 0:Z.getModel();G&&a&&((Q=$.current)==null||Q.editor.setModelLanguage(G,a))},[a],E),Rt(()=>{var G;s!==void 0&&((G=P.current)==null||G.revealLine(s))},[s],E),Rt(()=>{var G;(G=$.current)==null||G.editor.setTheme(o)},[o],E);let q=u.useCallback(()=>{var G;if(!(!R.current||!$.current)&&!V.current){B.current($.current);let Z=i||e,Q=qr($.current,n||r||"",t||a||"",Z||"");P.current=(G=$.current)==null?void 0:G.editor.create(R.current,{model:Q,automaticLayout:!0,...d},p),h&&P.current.restoreViewState(ea.get(Z)),$.current.editor.setTheme(o),s!==void 0&&P.current.revealLine(s),I(!0),V.current=!0}},[r,t,e,n,a,i,d,p,h,o,s]);u.useEffect(()=>{E&&_.current(P.current,$.current)},[E]),u.useEffect(()=>{!N&&!E&&q()},[N,E,q]),k.current=n,u.useEffect(()=>{var G,Z;E&&x&&((G=L.current)==null||G.dispose(),L.current=(Z=P.current)==null?void 0:Z.onDidChangeModelContent(Q=>{K.current||x(P.current.getValue(),Q)}))},[E,x]),u.useEffect(()=>{if(E){let G=$.current.editor.onDidChangeMarkers(Z=>{var re;let Q=(re=P.current.getModel())==null?void 0:re.uri;if(Q&&Z.find(Y=>Y.path===Q.path)){let Y=$.current.editor.getModelMarkers({resource:Q});A==null||A(Y)}});return()=>{G==null||G.dispose()}}return()=>{}},[E,A]);function ue(){var G,Z;(G=L.current)==null||G.dispose(),g?h&&ea.set(i,P.current.saveViewState()):(Z=P.current.getModel())==null||Z.dispose(),P.current.dispose()}return D.createElement(Zs,{width:m,height:S,isEditorReady:E,loading:c,_ref:R,className:b,wrapperProps:f})}var _v=Rv,Tv=u.memo(_v),xa=Tv;const $v=r=>{const{value:t,onChange:e}=r,[n,a]=u.useState(""),[i,o]=u.useState(!1);u.useEffect(()=>{a(t)},[t]);const s=()=>{a(t),o(!0)},c=()=>{e(n),o(!1)},d=()=>{o(!1)},p=h=>{a(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(ba,{onClick:s,children:""}),z.jsx(wn,{width:800,title:"",open:i,onOk:c,onCancel:d,children:z.jsx(xa,{theme:"vs-dark",height:"60vh",defaultLanguage:"javascript",value:n,onChange:p})})]})},Lv="_canvas_1tnjy_1",Dv="_container_1tnjy_7",Qa={canvas:Lv,container:Dv,delete:"_delete_1tnjy_10"},zv=["jpg","jpeg","png","hdr","webp"],Bv=r=>{const{attribute:t,value:e,onChange:n}=r,a=u.useRef(null),[i,o]=u.useState(!1),[s,c]=u.useState(),d=()=>{const S=a.current.getContext("2d"),{width:b,height:f}=a.current;S.clearRect(0,0,b,f)};u.useEffect(()=>{if(d(),!e)return;const S=async b=>{const f=await(t==null?void 0:t.editor.core.textureManager.loadTexture(b));if(!f||!t)return;const v=t.editor.core.textureManager.renderTexture(a.current,f);c(v)};if(typeof e=="object"){a.current.title="";const b=e,f=a.current.getContext("2d"),v=a.current.width/b.width;f.drawImage(b,0,0,b.width*v,b.height*v);const y=document.createElement("canvas");y.width=b.width,y.height=b.height,y.getContext("2d").drawImage(b,0,0),c(y.toDataURL())}else S(e)},[e,t]);const p=S=>{S.preventDefault(),S.stopPropagation();const b=S.dataTransfer.getData("text");let f;try{f=JSON.parse(b)}catch(v){console.error(v)}f&&zv.includes(f.type)&&n(f.item.code)},h=S=>{S.preventDefault(),S.dataTransfer.dropEffect="copy"},g=()=>{n("")},m=()=>{o(!0)};return z.jsxs("div",{className:Qa.container,children:[z.jsx("canvas",{className:Qa.canvas,ref:a,width:100,height:50,onDragOver:h,onDrop:p,onClick:m}),z.jsx(bh,{className:Qa.delete,onClick:g}),z.jsx(Rs,{style:{display:"none"},preview:{visible:i,src:s,onVisibleChange:S=>o(S)}})]})},jv=r=>{const{value:t={},onChange:e}=r,[n,a]=u.useState(""),[i,o]=u.useState(!1);u.useEffect(()=>{a(JSON.stringify(t,void 0,2))},[t]);const s=()=>{o(!0)},c=()=>{e==null||e(JSON.parse(n)),o(!1)},d=()=>{o(!1)},p=h=>{a(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(ba,{onClick:s,children:""}),z.jsx(wn,{width:800,title:"Uniforms",open:i,onOk:c,onCancel:d,children:z.jsx(xa,{theme:"vs-dark",height:"60vh",language:"json",options:{tabSize:2},value:n,onChange:p})})]})},Hv=r=>{const{value:t="",onChange:e}=r,[n,a]=u.useState(""),[i,o]=u.useState(!1);u.useEffect(()=>{a(t)},[t]);const s=()=>{a(t),o(!0)},c=()=>{e==null||e(n),o(!1)},d=()=>{o(!1)},p=h=>{a(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(ba,{onClick:s,children:""}),z.jsx(wn,{width:800,title:"",open:i,onOk:c,onCancel:d,children:z.jsx(xa,{theme:"vs-dark",height:"60vh",value:n,onChange:p})})]})},Vv=r=>{const{value:t="",onChange:e}=r,[n,a]=u.useState(""),[i,o]=u.useState(!1);u.useEffect(()=>{a(t)},[t]);const s=()=>{a(t),o(!0)},c=()=>{e==null||e(n),o(!1)},d=()=>{o(!1)},p=h=>{a(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(ba,{onClick:s,children:""}),z.jsx(wn,{width:800,title:"",open:i,onOk:c,onCancel:d,children:z.jsx(xa,{theme:"vs-dark",height:"60vh",value:n,onChange:p})})]})},Fv=r=>{const{root:t}=r,[e,n]=u.useState(),a=Af(t,n),i=u.useMemo(()=>(a==null?void 0:a.attribute.type)??"string",[a]),o=s=>a==null?void 0:a.setter(s);switch(i){case M.STRING:return z.jsx(Ef,{attribute:a,value:e,onChange:o});case M.NUMBER:return z.jsx(Qr,{attribute:a,value:e,onChange:o});case M.BOOLEAN:return z.jsx(xf,{attribute:a,value:e,onChange:o});case M.COLOR:return z.jsx(wf,{attribute:a,value:e,onChange:o});case M.ENUM:return z.jsx(Nf,{attribute:a,value:e,onChange:o});case M.VECTOR2:return z.jsx(Pf,{attribute:a,value:e,onChange:o});case M.VECTOR3:return z.jsx(Of,{attribute:a,value:e,onChange:o});case M.SCRIPT:return z.jsx($v,{attribute:a,value:e,onChange:o});case M.TEXTURE:return z.jsx(Bv,{value:e,attribute:a,onChange:o});case M.UNIFORMS:return z.jsx(jv,{value:e,onChange:o});case M.VERTEX_SHADER:return z.jsx(Hv,{value:e,onChange:o});case M.FRAGEMENT_SHADER:return z.jsx(Vv,{value:e,onChange:o});default:return null}};class Uv{constructor(t){this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item-value",this.root=Yl(this.container),this.root.render(z.jsx(Xl,{children:z.jsx(Fv,{root:this})})),this.parent.body.appendChild(this.container)}hide(){var t;(t=this.destroy)==null||t.call(this),this.container.style.display="none"}show(t){var e;this.item=t,(e=this.update)==null||e.call(this,t),this.container.className="attribute-item-value",this.container.style.display="flex"}dispose(){var t;(t=this.destroy)==null||t.call(this),setTimeout(()=>this.root.unmount(),0),this.container.remove()}}class Gv{constructor(t){this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item",this.label=new Km(this),this.body=document.createElement("div"),this.body.className="attribute-item-value-container",this.container.appendChild(this.label.container),this.container.appendChild(this.body),this.components={}}get visible(){return this.container.style.display==="flex"}hide(){this.label.hide(),Object.values(this.components).forEach(t=>t.hide()),this.container.style.display="none"}show(t){const{attribute:e,visible:n}=t,{type:a}=e;this.label.show(t),Object.values(this.components).forEach(o=>o.hide());const i=this.getAttribute(a);i==null||i.show(t),this.container.style.display=n?"flex":"none"}dispose(){this.label.dispose(),Object.values(this.components).forEach(t=>t.dispose()),this.container.remove()}getAttribute(t){let e=this.components[t];if(!e)try{e=new Uv(this),this.components[t]=e}catch(n){console.error(n)}return e}}var el={};Object.defineProperty(el,"__esModule",{value:!0});function wt(r){return typeof r=="function"?r():r}function wa(r){return tl(r)||rl(r)||kn(r)}function tl(r){return r.hasOwnProperty("action")}function rl(r){return r.hasOwnProperty("href")}function pi(r){return r.hasOwnProperty("isDivider")}function kn(r){return r.hasOwnProperty("subMenu")}function Wv(r){return r.hasOwnProperty("html")||r.hasOwnProperty("element")}function Yv(r){return!wa(r)&&!pi(r)&&!Wv(r)}function Na(r){return wa(r)&&wt(r.disabled)||kn(r)&&wt(r.subMenu).length===0}function Io(r,t){var e;r.addEventListener("mouseenter",function(n){e=setTimeout(function(){return t(n)},150)}),r.addEventListener("mouseleave",function(){return clearTimeout(e)})}function Xv(r){var t=document.createElement("ul");return t.className="ctxmenu",t.append.apply(t,r.map(qv)),r.length||(t.style.display="none"),t.addEventListener("contextmenu",function(e){e.stopPropagation(),e.preventDefault()}),t.addEventListener("click",function(e){return void e.stopPropagation()}),t}function qv(r){var t=document.createElement("li");return Kv([[pi,"divider",!1],[function(e){return e.icon},"icon",!0],[Yv,"heading",!1],[kn,"submenu",!0],[Na,"disabled",!1],[wa,"interactive",!0]],r,t),pi(r)||[Zv,Qv,Jv,ey,ty].forEach(function(e){return e.call(null,r,t)}),t}function Kv(r,t,e){r.filter(function(n){var a=n[0];return a(t)}).every(function(n){n[0];var a=n[1],i=n[2];return!void e.classList.add(a)&&i})}function Zv(r,t){var e,n=r.html,a=r.text,i=r.element,o=wt(i);o?t.append(o):t.innerHTML=(e=wt(n))!==null&&e!==void 0?e:"<span>".concat(wt(a),"</span>")}function Qv(r,t){var e=r.tooltip,n=r.style,a=r.attributes;t.title=wt(e)||"",n&&t.setAttribute("style",wt(n)),a&&Object.entries(wt(a)).forEach(function(i){var o=i[0],s=i[1];t.setAttribute(o,s)})}function Jv(r,t){var e=r.icon;e&&(t.innerHTML+='<img class="icon" src="'.concat(wt(e),'" />'))}function ey(r,t){for(var e=0,n=Object.entries(wt(r.events)||{});e<n.length;e++){var a=n[e],i=a[0],o=a[1],s=typeof o=="function"?{listener:o,options:{}}:o,c=s.listener,d=s.options;t.addEventListener(i,c,d)}Na(r)||kn(r)||(tl(r)&&t.addEventListener("click",r.action),wa(r)&&t.addEventListener("click",function(){return al.hide()}))}function ty(r,t){if(!(!rl(r)||Na(r))){var e=r.href,n=r.download,a=r.target,i=document.createElement("a");i.innerHTML=t.innerHTML,i.href=wt(e),n!==void 0&&(i.download=wt(n)),a&&(i.target=wt(a)),t.replaceChildren(i)}}var Kr="r",Cn="d";function ry(){Kr="r",Cn="d"}function ny(r,t){var e=nl(),n=window.visualViewport,a=n.width,i=n.height;Object.assign(r.style,{maxHeight:i/e.y+"px",maxWidth:a/e.x+"px"});var o=ay(r);o.width=Math.trunc(o.width)+1,o.height=Math.trunc(o.height)+1;var s={x:0,y:0};if(t instanceof Element){var c=Oi(t),d=c.x,p=c.width,h=c.y;s={x:Kr==="r"?d+p:d-o.width,y:h},t.className.includes("submenu")&&(s.y+=Cn==="d"?4:-12);var g=Ja(o,s);s.x!==g.x&&(Kr=Kr==="r"?"l":"r",s.x=Kr==="r"?d+p:d-o.width),s.y!==g.y&&(Cn=Cn==="u"?"d":"u",s.y=g.y),s=Ja(o,s)}else{var m=document.body.style.transform!=="",S=m?document.body.getBoundingClientRect():{x:0,y:0};s=Ja(o,{x:(t.clientX-S.x)/e.x,y:(t.clientY-S.y)/e.y})}Object.assign(r.style,{left:s.x+"px",top:s.y+"px",width:o.width+"px",height:o.height+"px"})}function Ja(r,t){var e=window.visualViewport,n=e.width,a=e.height,i=document.body.style.transform!=="",o=i?document.body.getBoundingClientRect():{left:0,top:0},s=o.left,c=o.top,d=nl(),p=-s/d.x,h=-c/d.y,g=(n-s)/d.x,m=(a-c)/d.y;return{x:Kr==="r"?t.x+r.width>g?g-r.width:t.x:t.x<p?p:t.x,y:Cn==="d"?t.y+r.height>m?m-r.height:t.y:t.y<h?h:t.y+r.height>m?m-r.height:t.y}}function ay(r){var t=r.cloneNode(!0);t.style.visibility="hidden",document.body.appendChild(t);var e=Oi(t);return document.body.removeChild(t),e}function Oi(r){var t=r.offsetLeft,e=r.offsetTop,n=r.offsetHeight,a=r.offsetWidth;if(r.offsetParent instanceof HTMLElement){var i=Oi(r.offsetParent);return{x:t+i.x,y:e+i.y,width:a,height:n}}return{x:t,y:e,width:a,height:n}}function nl(){var r=document.body,t=r.getBoundingClientRect();return{x:t.width/r.offsetWidth,y:t.height/r.offsetHeight}}var iy='html{min-height:100%}.ctxmenu{position:fixed;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana,sans-serif;box-sizing:border-box}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,.1)}.ctxmenu li.submenu::after{content:"";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border:solid #000;border-width:1px 1px 0 0;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}';/*! ctxMenu v2.0.2 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/var oy=function(){function r(){var t=this;this.cache={},this.preventCloseOnScroll=!1,window.addEventListener("click",function(){return void t.hide()}),window.addEventListener("resize",function(){return void t.hide()});var e=0;window.addEventListener("wheel",function(){clearTimeout(e),e=setTimeout(function(){if(t.preventCloseOnScroll){t.preventCloseOnScroll=!1;return}t.hide()})},{passive:!0}),window.addEventListener("keydown",function(n){n.key==="Escape"&&t.hide()}),r.addStylesToDom()}return r.getInstance=function(){r.instance||(r.instance=new r);var t=r.instance;return{attach:t.attach.bind(t),delete:t.delete.bind(t),hide:t.hide.bind(t),show:t.show.bind(t),update:t.update.bind(t)}},r.prototype.attach=function(t,e,n){var a=this;n===void 0&&(n={});var i=document.querySelector(t);if(this.cache[t]!==void 0){console.error("target element ".concat(t," already has a context menu assigned. Use ContextMenu.update() intstead."));return}if(!i){console.error("target element ".concat(t," not found"));return}var o=function(s){a.show(e,s,n)};this.cache[t]={ctxMenu:e,handler:o,config:n},i.addEventListener("contextmenu",o)},r.prototype.update=function(t,e,n){n===void 0&&(n={});var a=this.cache[t],i=Object.assign({},a==null?void 0:a.config,n),o=document.querySelector(t);a&&(o==null||o.removeEventListener("contextmenu",a.handler)),delete this.cache[t],this.attach(t,e||(a==null?void 0:a.ctxMenu)||[],i)},r.prototype.delete=function(t){var e=this.cache[t];if(!e)return console.error("no context menu for target element ".concat(t," found"));delete this.cache[t];var n=document.querySelector(t);if(!n)return console.error("target element ".concat(t," does not exist (anymore)"));n.removeEventListener("contextmenu",e.handler)},r.prototype.show=function(t,e,n){var a=this,i,o,s;n===void 0&&(n={}),e instanceof MouseEvent&&(e.stopImmediatePropagation(),e.preventDefault()),this.hide(),this.onHide=n.onHide,this.onBeforeHide=n.onBeforeHide;var c=(o=(i=n.onBeforeShow)===null||i===void 0?void 0:i.call(n,t.slice(),e instanceof MouseEvent?e:void 0))!==null&&o!==void 0?o:t;this.menu=this.generateDOM(c,e,n.attributes),document.body.appendChild(this.menu),(s=n.onShow)===null||s===void 0||s.call(n,this.menu),this.menu.addEventListener("wheel",function(){a.preventCloseOnScroll=!0},{passive:!0})},r.prototype.hide=function(){this._hide(this.menu)},r.prototype._hide=function(t){var e,n;(e=this.onBeforeHide)===null||e===void 0||e.call(this,t),ry(),t&&(t.remove(),(n=this.onHide)===null||n===void 0||n.call(this,t),t===this.menu&&(delete this.menu,this.onBeforeHide=void 0,this.onHide=void 0))},r.prototype.generateDOM=function(t,e,n){var a=this;n===void 0&&(n={});var i=Xv(t);return ny(i,e),t.forEach(function(o,s){var c=i.children[s];Io(c,function(){var d,p=(d=c.parentElement)===null||d===void 0?void 0:d.querySelector("ul");p&&p.parentElement!==c&&a._hide(p)}),!Na(o)&&kn(o)&&Io(c,function(){c.querySelector("ul")||c.appendChild(a.generateDOM(wt(o.subMenu),c,wt(o.subMenuAttributes)))})}),Object.entries(n).forEach(function(o){var s=o[0],c=o[1];return i.setAttribute(s,c)}),i},r.addStylesToDom=function(){if(document.readyState==="loading")return document.addEventListener("readystatechange",this.addStylesToDom,{once:!0});var t=document.createElement("style");t.innerHTML=iy,document.head.insertBefore(t,document.head.childNodes[0])},r}(),al=oy.getInstance(),il=el.ctxmenu=al;const ol=r=>{const{items:t,event:e}=r;il.show(t,e)},sy=()=>{il.hide()};class ly{constructor(t){this.onClick=()=>{this.body.style.display==="none"?this.open():this.close()},this.onContextMenu=n=>{var i;if(((i=this.group)==null?void 0:i.type)!==Jt.Component)return;n.preventDefault();const a=this.group.editor.contextMenuManager.getContextMenu(Ca.ATTR_COMPONENT);a.length!==0&&(this.group.editor.contextMenuManager.meta={group:this.group},ol({event:n,items:a}))},this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-group-container",this.head=document.createElement("div"),this.head.className="attribute-group",this.head.addEventListener("click",this.onClick),this.label=document.createElement("div"),this.label.className="attribute-group-name",this.label.addEventListener("contextmenu",this.onContextMenu),this.head.appendChild(this.label);const e=document.createElement("div");this.head.appendChild(e),this.suffix=document.createElement("div"),this.suffix.className="attribute-group-close",e.appendChild(this.suffix),this.body=document.createElement("div"),this.container.appendChild(this.head),this.container.appendChild(this.body),this.attributes=[]}hide(){this.attributes.forEach(t=>t.hide()),this.container.style.display="none"}show(t){const{group:e,groupName:n,attributes:a}=t,i=a.filter(o=>o.visible).length;this.group=t,this.label.textContent=n,this.container.style.display=i?"block":"none",this.parent.activeGroups.has(e)?this.open():this.close()}open(){if(this.body.style.display="block",this.suffix.className="attribute-group-close",!this.group)return;const{attributes:t}=this.group,e=t.length-this.attributes.length;for(let n=0;n<e;n++){const a=new Gv(this);this.body.appendChild(a.container),this.attributes.push(a)}this.attributes.forEach(n=>n.hide()),t.forEach((n,a)=>this.attributes[a].show(n)),this.parent.addActiveGroup(this.group.group)}close(){this.body.style.display="none",this.suffix.className="attribute-group-close attribute-group-rotate",this.group&&this.parent.removeActiveGroup(this.group.group)}dispose(){this.head.removeEventListener("click",this.onClick),this.label.removeEventListener("contextmenu",this.onContextMenu),this.attributes.forEach(t=>t.dispose()),this.container.remove(),this.attributes=[],delete this.group}}class Ro{constructor(t,e){this.editor=t,this.groups=[],this.activeGroups=new Set(["base"]),this.container=e}update(t){const e=t.length-this.groups.length;for(let n=0;n<e;n++){const a=new ly(this);this.container.appendChild(a.container),this.groups.push(a)}this.groups.forEach(n=>n.hide()),t.forEach((n,a)=>this.groups[a].show(n))}setActiveGroups(t){t.forEach(e=>this.activeGroups.add(e))}addActiveGroup(t){this.activeGroups.add(t)}removeActiveGroup(t){this.activeGroups.delete(t)}dispose(){this.groups.forEach(t=>t.dispose()),this.groups=[]}}const cy=r=>{const{editor:t}=r,e=u.useRef(null),n=u.useRef(null),[a,i]=u.useState("base");return u.useEffect(()=>{const o=new Ro(t,e.current),s=new Ro(t,n.current),c=()=>{const p=t.attrManager.refresh(),h=t.materialManager.refresh();o.update(p),s.update(h),h.length===0&&i("base")},d=()=>{const p=t.materialManager.refresh();s.update(p)};return t.bus.on("NODE_SELECT",c),t.bus.on("DESERIALIZATED",c),t.bus.on("MATERIAL_CHANGE",d),()=>{t.bus.off("NODE_SELECT",c),t.bus.off("DESERIALIZATED",c),t.bus.off("MATERIAL_CHANGE",d),o.dispose(),s.dispose()}},[t]),z.jsxs("div",{className:Or.container,children:[z.jsxs("div",{className:Or.title,children:[z.jsx("div",{className:`iconfont icon-inspector ${Or.icon} ${a==="base"?Or.active:""}`,onClick:()=>i("base")}),z.jsx("div",{className:`iconfont icon-material ${Or.icon} ${a==="material"?Or.active:""}`,onClick:()=>i("material")})]}),z.jsxs("div",{className:Or.body,children:[z.jsx("div",{ref:e,style:{display:a==="base"?"block":"none"}}),z.jsx("div",{ref:n,style:{display:a==="material"?"block":"none"}})]})]})},uy="_container_t8w3l_1",dy="_left_t8w3l_16",py="_right_t8w3l_20",hy="_tool_t8w3l_24",my="_active_t8w3l_37",kr={container:uy,left:dy,right:py,tool:hy,active:my},gy=r=>{const{editor:t}=r,[e,n]=u.useState([]),[a,i]=u.useState([]);u.useEffect(()=>{const s=()=>{const{left:c,right:d}=t.toolManager.tools;n([...c]),i([...d])};return t.bus.on("TOOL_UPDATE",s),s(),()=>{t.bus.off("TOOL_UPDATE",s)}},[t]);const o=s=>{t.toolManager.select(s)};return z.jsxs("div",{className:kr.container,children:[z.jsx("div",{className:kr.left,children:e.map(s=>z.jsx("span",{className:`iconfont icon-${s.icon} ${kr.tool} ${s.actived?kr.active:""}`,title:s.title,onClick:()=>o(s)},s.key))}),z.jsx("div",{className:kr.right,children:a.map(s=>z.jsx("span",{className:`iconfont icon-${s.icon} ${kr.tool} ${s.actived?kr.active:""}`,title:s.title,onClick:()=>o(s)},s.key))})]})},fy="_container_1xb2c_1",vy="_title_1xb2c_12",yy="_body_1xb2c_18",ei={container:fy,title:vy,body:yy},by="_container_pj1iu_1",Sy="_selected_pj1iu_13",My="_icon_pj1iu_17",Cy="_name_pj1iu_22",ta={container:by,selected:Sy,icon:My,name:Cy},Ay={AmbientLight:"ambient-light",DirectionalLight:"directional-light",PerspectiveCamera:"perspective-camera",OrthographicCamera:"orthographic-camera",Plane:"plane",Box:"box",Sphere:"sphere",Cone:"cone",Cylinder:"cylinder",Pipe:"pipe",HemisphereLight:"hemisphere-light",SpotLight:"spot-light",PointLight:"point-light",Model:"model",Text:"text"},sl=r=>{const{node:t,editor:e,level:n=0}=r,[a,i]=u.useState(!1),[o,s]=u.useState(!0);u.useEffect(()=>{const d=()=>{i(e.core.selections.some(p=>p.id===t.id))};return e.bus.on("NODE_SELECT",d),()=>{e.bus.off("NODE_SELECT",d)}},[e]);const c=d=>{d.stopPropagation(),e.selectionManager.setSelections([t.id])};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:`${ta.container} ${a?ta.selected:""}`,style:{paddingLeft:`${n*10+10}px`},onClick:c,children:[o&&t.children.length>0&&z.jsx(lu,{onClick:()=>s(!1)}),!o&&t.children.length>0&&z.jsx(Ch,{onClick:()=>s(!0)}),z.jsx("span",{className:`iconfont icon-${Ay[t.type]} ${ta.icon}`}),z.jsx("span",{className:ta.name,children:t.name})]}),!o&&t.children.map(d=>z.jsx(sl,{node:d,editor:e,level:n+1},d.id))]})},Ey=r=>{const{editor:t}=r,[e,n]=u.useState([]);u.useEffect(()=>{const i=()=>{const o=t.nodeManager.refresh();n(o)};return t.bus.on("DESERIALIZATED",i),t.bus.on("NODE_ADD",i),t.bus.on("NODE_REMOVE",i),t.bus.on("NODE_MOVE",i),t.bus.on("ATTR_CHANGE",i),i(),()=>{t.bus.off("DESERIALIZATED",i),t.bus.off("NODE_ADD",i),t.bus.off("NODE_REMOVE",i),t.bus.off("NODE_MOVE",i),t.bus.off("ATTR_CHANGE",i)}},[t]);const a=()=>{t.core.select([])};return z.jsxs("div",{className:ei.container,children:[z.jsxs("div",{className:ei.title,children:[z.jsx("span",{className:"iconfont icon-hierarchy"}),z.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Hierarchy"})]}),z.jsx("div",{className:ei.body,onClick:a,children:e.map(i=>z.jsx(sl,{node:i,editor:t},i.id))})]})},xy=()=>{const r=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);if(r.indexOf("win32")>=0||r.indexOf("wow32")>=0)return"win32";if(r.indexOf("win64")>=0||r.indexOf("wow64")>=0)return"win64";if(t)return"mac"},_o=()=>xy()==="mac",Ty=()=>{const[r]=ql(),t=u.useRef(null),e=qc(t),[n,a]=u.useState(),[i,o]=u.useState(),s=u.useRef({x:0,y:0}),[c,d]=En.useMessage();u.useEffect(()=>{const f=r.get("id");f&&o(f)},[r]),u.useEffect(()=>{const f=new Cf;return f.mount(t.current),f.active(),a(f),()=>{f.deactive(),f.unmount(),a(void 0)}},[]),u.useEffect(()=>{n==null||n.resize()},[n,e]),u.useEffect(()=>{if(!n)return;const f=v=>{c.success(v.message)};return n.bus.on("MESSAGE",f),()=>{n.bus.off("MESSAGE",f)}},[n]),u.useEffect(()=>{i&&(n==null||n.open(i))},[i,n]);const p=f=>{const{clientX:v,clientY:y}=f;if((v-s.current.x)**2+(y-s.current.y)**2>2||!n)return;const A=n.contextMenuManager.getContextMenu(Ca.GRAPH);A.length!==0&&ol({event:f,items:A})},h=f=>{sy();const{clientX:v,clientY:y}=f;s.current.x=v,s.current.y=y},g=f=>{_o()&&p(f)},m=f=>{f.preventDefault(),!_o()&&p(f)},S=f=>{f.preventDefault()},b=f=>{n==null||n.dropManager.onDrop(f)};return z.jsxs("div",{className:so.container,children:[d,z.jsxs(Pr,{separator:!0,children:[z.jsx(Pr.Pane,{preferredSize:"15%",maxSize:500,minSize:0,children:n&&z.jsx(Ey,{editor:n})}),z.jsx(Pr.Pane,{preferredSize:"68%",minSize:250,children:z.jsxs(Pr,{vertical:!0,separator:!0,children:[z.jsx(Pr.Pane,{preferredSize:"75%",minSize:500,children:z.jsx("div",{className:so.view,ref:t,onDragOver:S,onDrop:b,onPointerDown:h,onPointerUp:g,onContextMenu:m,children:n&&z.jsx(gy,{editor:n})})}),z.jsx(Pr.Pane,{preferredSize:"25%",minSize:0,children:z.jsx(Um,{})})]})}),z.jsx(Pr.Pane,{preferredSize:"17%",minSize:0,children:n&&z.jsx(cy,{editor:n})})]})]})};export{Ty as default};
