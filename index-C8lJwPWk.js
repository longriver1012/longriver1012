var ul=Object.defineProperty;var dl=(n,t,e)=>t in n?ul(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var C=(n,t,e)=>dl(n,typeof t!="symbol"?t+"":t,e);import{g as cn,m as qt,i as To,a as hl,r as Vt,P as pl,b as gl,c as ml,d as c,C as Rt,e as re,f as fl,u as Ot,T as $o,h as Sr,j as Ji,K as it,_ as vt,k as de,l as le,n as Te,o as ce,I as un,p as te,q as vl,W as L,F as da,D as di,s as er,t as yl,v as bl,w as ii,x as ht,y as ha,z as Do,A as ai,B as Lo,E as xn,G as Sl,H as zo,J as hi,R as jo,L as Cl,M as xl,N as El,O as pi,Q as gi,S as Bo,U as Xt,V as mi,X as fi,Y as Ho,Z as Al,$ as Zt,a0 as Ii,a1 as Yt,a2 as Vo,a3 as Fo,a4 as ea,a5 as wl,a6 as Ml,a7 as Nl,a8 as Uo,a9 as pa,aa as Ol,ab as Il,ac as Ra,ad as Pl,ae as Rl,af as kl,ag as _l,ah as Tl,ai as $l,aj as Go,ak as ka,al as z,am as Cr,an as Wo,ao as Dl,ap as Ll,aq as _a,ar as zl,as as jl,at as Bl,au as Hl,av as Vl,aw as Fl,ax as Ul,ay as Gl,az as Wl,aA as vi,aB as Xl,aC as Yl,aD as Kl}from"./index-ClVA2v0D.js";import{B as ql,t as Zl,i as Ql,a as Jl,g as Xo,b as ec,c as tc,d as nc,e as rc,f as ic,h as ac,j as oc,u as sc,k as ta,l as lc,I as yi,S as Yo,R as cc,F as Pi,M as Er,m as Ko,C as fr}from"./index-0JeOY9gX.js";import{O as Ta,V as Et,C as Gr,R as uc,a as qo,b as dc,c as hc,M as Ri,S as zn,d as pc,Q as ki,E as jn,e as Zo,f as gc,g as mc,h as fc,i as me,j as pt,k as Un,l as vc,P as tr,m as Pe,n as yc,o as $a,p as bc,T as Ke,q as Da,r as oi,s as Sc,t as _n,u as Zn,B as Qo,v as Cc,w as xc,D as nr,x as be,y as Qt,z as B,A as Mt,F as at,G as Ee,H as Ae,I as we,J as Me,K as Jt,L as We,N as Nt,U as Ec,W as ot,X as st,Y as lt,Z as ct,_ as Cn,$ as Ac,a0 as Qn,a1 as wc,a2 as Mc,a3 as Nc,a4 as Oc,a5 as Jo,a6 as rr,a7 as es,a8 as Ic,a9 as Pc,aa as _i,ab as Rc,ac as kc,ad as Wr,ae as _c,af as Tc,ag as $c,ah as Dc,ai as Lc,aj as zc,ak as jc,al as Bc,am as Hc,an as ga,ao as Jn,ap as La,aq as ei,ar as Vc,as as Fc,at as ft,au as Uc,av as Gc,aw as Wc,ax as Xc,ay as Yc}from"./useSize-CTLJnp0_.js";const si=n=>n?typeof n=="function"?n():n:null,Kc=n=>{const{componentCls:t,popoverColor:e,titleMinWidth:r,fontWeightStrong:i,innerPadding:a,boxShadowSecondary:o,colorTextHeading:s,borderRadiusLG:l,zIndexPopup:u,titleMarginBottom:d,colorBgElevated:h,popoverBg:v,titleBorderBottom:m,innerContentPadding:y,titlePadding:S}=n;return[{[t]:Object.assign(Object.assign({},Vt(n)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:u,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":h,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:v,backgroundClip:"padding-box",borderRadius:l,boxShadow:o,padding:a},[`${t}-title`]:{minWidth:r,marginBottom:d,color:s,fontWeight:i,borderBottom:m,padding:S},[`${t}-inner-content`]:{color:e,padding:y}})},hl(n,"var(--antd-arrow-background-color)"),{[`${t}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow,display:"inline-block",[`${t}-content`]:{display:"inline-block"}}}]},qc=n=>{const{componentCls:t}=n;return{[t]:pl.map(e=>{const r=n[`${e}6`];return{[`&${t}-${e}`]:{"--antd-arrow-background-color":r,[`${t}-inner`]:{backgroundColor:r},[`${t}-arrow`]:{background:"transparent"}}}})}},Zc=n=>{const{lineWidth:t,controlHeight:e,fontHeight:r,padding:i,wireframe:a,zIndexPopupBase:o,borderRadiusLG:s,marginXS:l,lineType:u,colorSplit:d,paddingSM:h}=n,v=e-r,m=v/2,y=v/2-t,S=i;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:o+30},gl(n)),ml({contentRadius:s,limitVerticalRadius:!0})),{innerPadding:a?0:12,titleMarginBottom:a?0:l,titlePadding:a?`${m}px ${S}px ${y}px`:0,titleBorderBottom:a?`${t}px ${u} ${d}`:"none",innerContentPadding:a?`${h}px ${S}px`:0})},ts=cn("Popover",n=>{const{colorBgElevated:t,colorText:e}=n,r=qt(n,{popoverBg:t,popoverColor:e});return[Kc(r),qc(r),To(r,"zoom-big")]},Zc,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Qc=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const ns=n=>{let{title:t,content:e,prefixCls:r}=n;return!t&&!e?null:c.createElement(c.Fragment,null,t&&c.createElement("div",{className:`${r}-title`},t),e&&c.createElement("div",{className:`${r}-inner-content`},e))},Jc=n=>{const{hashId:t,prefixCls:e,className:r,style:i,placement:a="top",title:o,content:s,children:l}=n,u=si(o),d=si(s),h=re(t,e,`${e}-pure`,`${e}-placement-${a}`,r);return c.createElement("div",{className:h,style:i},c.createElement("div",{className:`${e}-arrow`}),c.createElement(fl,Object.assign({},n,{className:t,prefixCls:e}),l||c.createElement(ns,{prefixCls:e,title:u,content:d})))},eu=n=>{const{prefixCls:t,className:e}=n,r=Qc(n,["prefixCls","className"]),{getPrefixCls:i}=c.useContext(Rt),a=i("popover",t),[o,s,l]=ts(a);return o(c.createElement(Jc,Object.assign({},r,{prefixCls:a,hashId:s,className:re(e,l)})))};var tu=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const nu=c.forwardRef((n,t)=>{var e,r;const{prefixCls:i,title:a,content:o,overlayClassName:s,placement:l="top",trigger:u="hover",children:d,mouseEnterDelay:h=.1,mouseLeaveDelay:v=.1,onOpenChange:m,overlayStyle:y={}}=n,S=tu(n,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:g}=c.useContext(Rt),f=g("popover",i),[b,A,x]=ts(f),E=g(),R=re(s,A,x),[M,O]=Ot(!1,{value:(e=n.open)!==null&&e!==void 0?e:n.visible,defaultValue:(r=n.defaultOpen)!==null&&r!==void 0?r:n.defaultVisible}),$=(D,P)=>{O(D,!0),m==null||m(D,P)},N=D=>{D.keyCode===it.ESC&&$(!1,D)},k=D=>{$(D)},_=si(a),j=si(o);return b(c.createElement($o,Object.assign({placement:l,trigger:u,mouseEnterDelay:h,mouseLeaveDelay:v,overlayStyle:y},S,{prefixCls:f,overlayClassName:R,ref:t,open:M,onOpenChange:k,overlay:_||j?c.createElement(ns,{prefixCls:f,title:_,content:j}):null,transitionName:Sr(E,"zoom-big",S.transitionName),"data-popover-inject":!0}),Ji(d,{onKeyDown:D=>{var P,H;c.isValidElement(d)&&((H=d==null?void 0:(P=d.props).onKeyDown)===null||H===void 0||H.call(P,D)),N(D)}})))}),rs=nu;rs._InternalPanelDoNotUseOrYouWillBeFired=eu;var ru=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],iu=c.forwardRef(function(n,t){var e=n.prefixCls,r=e===void 0?"rc-checkbox":e,i=n.className,a=n.style,o=n.checked,s=n.disabled,l=n.defaultChecked,u=l===void 0?!1:l,d=n.type,h=d===void 0?"checkbox":d,v=n.title,m=n.onChange,y=vt(n,ru),S=c.useRef(null),g=c.useRef(null),f=Ot(u,{value:o}),b=de(f,2),A=b[0],x=b[1];c.useImperativeHandle(t,function(){return{focus:function(O){var $;($=S.current)===null||$===void 0||$.focus(O)},blur:function(){var O;(O=S.current)===null||O===void 0||O.blur()},input:S.current,nativeElement:g.current}});var E=re(r,i,le(le({},"".concat(r,"-checked"),A),"".concat(r,"-disabled"),s)),R=function(O){s||("checked"in n||x(O.target.checked),m==null||m({target:ce(ce({},n),{},{type:h,checked:O.target.checked}),stopPropagation:function(){O.stopPropagation()},preventDefault:function(){O.preventDefault()},nativeEvent:O.nativeEvent}))};return c.createElement("span",{className:E,title:v,style:a,ref:g},c.createElement("input",Te({},y,{className:"".concat(r,"-input"),ref:S,onChange:R,disabled:s,checked:!!A,type:h})),c.createElement("span",{className:"".concat(r,"-inner")}))}),au={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},ou=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:au}))},su=c.forwardRef(ou);const lu=n=>{const{checkboxCls:t}=n,e=`${t}-wrapper`;return[{[`${t}-group`]:Object.assign(Object.assign({},Vt(n)),{display:"inline-flex",flexWrap:"wrap",columnGap:n.marginXS,[`> ${n.antCls}-row`]:{flex:1}}),[e]:Object.assign(Object.assign({},Vt(n)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${e}`]:{marginInlineStart:0},[`&${e}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[t]:Object.assign(Object.assign({},Vt(n)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:n.borderRadiusSM,alignSelf:"center",[`${t}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${t}-inner`]:Object.assign({},vl(n))},[`${t}-inner`]:{boxSizing:"border-box",display:"block",width:n.checkboxSize,height:n.checkboxSize,direction:"ltr",backgroundColor:n.colorBgContainer,border:`${te(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,borderCollapse:"separate",transition:`all ${n.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:n.calc(n.checkboxSize).div(14).mul(5).equal(),height:n.calc(n.checkboxSize).div(14).mul(8).equal(),border:`${te(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`}},"& + span":{paddingInlineStart:n.paddingXS,paddingInlineEnd:n.paddingXS}})},{[`
        ${e}:not(${e}-disabled),
        ${t}:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{borderColor:n.colorPrimary}},[`${e}:not(${e}-disabled)`]:{[`&:hover ${t}-checked:not(${t}-disabled) ${t}-inner`]:{backgroundColor:n.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${t}-checked:not(${t}-disabled):after`]:{borderColor:n.colorPrimaryHover}}},{[`${t}-checked`]:{[`${t}-inner`]:{backgroundColor:n.colorPrimary,borderColor:n.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`}}},[`
        ${e}-checked:not(${e}-disabled),
        ${t}-checked:not(${t}-disabled)
      `]:{[`&:hover ${t}-inner`]:{backgroundColor:n.colorPrimaryHover,borderColor:"transparent"}}},{[t]:{"&-indeterminate":{[`${t}-inner`]:{backgroundColor:`${n.colorBgContainer} !important`,borderColor:`${n.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:n.calc(n.fontSizeLG).div(2).equal(),height:n.calc(n.fontSizeLG).div(2).equal(),backgroundColor:n.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${t}-inner`]:{backgroundColor:`${n.colorBgContainer} !important`,borderColor:`${n.colorPrimary} !important`}}}},{[`${e}-disabled`]:{cursor:"not-allowed"},[`${t}-disabled`]:{[`&, ${t}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${t}-inner`]:{background:n.colorBgContainerDisabled,borderColor:n.colorBorder,"&:after":{borderColor:n.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:n.colorTextDisabled},[`&${t}-indeterminate ${t}-inner::after`]:{background:n.colorTextDisabled}}}]};function cu(n,t){const e=qt(t,{checkboxCls:`.${n}`,checkboxSize:t.controlInteractiveSize});return[lu(e)]}const is=cn("Checkbox",(n,t)=>{let{prefixCls:e}=t;return[cu(e,n)]}),as=L.createContext(null);var uu=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const du=(n,t)=>{var e;const{prefixCls:r,className:i,rootClassName:a,children:o,indeterminate:s=!1,style:l,onMouseEnter:u,onMouseLeave:d,skipGroup:h=!1,disabled:v}=n,m=uu(n,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:y,direction:S,checkbox:g}=c.useContext(Rt),f=c.useContext(as),{isFormItemInput:b}=c.useContext(da),A=c.useContext(di),x=(e=(f==null?void 0:f.disabled)||v)!==null&&e!==void 0?e:A,E=c.useRef(m.value);c.useEffect(()=>{f==null||f.registerValue(m.value)},[]),c.useEffect(()=>{if(!h)return m.value!==E.current&&(f==null||f.cancelValue(E.current),f==null||f.registerValue(m.value),E.current=m.value),()=>f==null?void 0:f.cancelValue(m.value)},[m.value]);const R=y("checkbox",r),M=er(R),[O,$,N]=is(R,M),k=Object.assign({},m);f&&!h&&(k.onChange=function(){m.onChange&&m.onChange.apply(m,arguments),f.toggleOption&&f.toggleOption({label:o,value:m.value})},k.name=f.name,k.checked=f.value.includes(m.value));const _=re(`${R}-wrapper`,{[`${R}-rtl`]:S==="rtl",[`${R}-wrapper-checked`]:k.checked,[`${R}-wrapper-disabled`]:x,[`${R}-wrapper-in-form-item`]:b},g==null?void 0:g.className,i,a,N,M,$),j=re({[`${R}-indeterminate`]:s},yl,$),D=s?"mixed":void 0;return O(c.createElement(bl,{component:"Checkbox",disabled:x},c.createElement("label",{className:_,style:Object.assign(Object.assign({},g==null?void 0:g.style),l),onMouseEnter:u,onMouseLeave:d},c.createElement(iu,Object.assign({"aria-checked":D},k,{prefixCls:R,className:j,disabled:x,ref:t})),o!==void 0&&c.createElement("span",null,o))))},os=c.forwardRef(du);var hu=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const pu=c.forwardRef((n,t)=>{const{defaultValue:e,children:r,options:i=[],prefixCls:a,className:o,rootClassName:s,style:l,onChange:u}=n,d=hu(n,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:h,direction:v}=c.useContext(Rt),[m,y]=c.useState(d.value||e||[]),[S,g]=c.useState([]);c.useEffect(()=>{"value"in d&&y(d.value||[])},[d.value]);const f=c.useMemo(()=>i.map(P=>typeof P=="string"||typeof P=="number"?{label:P,value:P}:P),[i]),b=P=>{g(H=>H.filter(V=>V!==P))},A=P=>{g(H=>[].concat(ht(H),[P]))},x=P=>{const H=m.indexOf(P.value),V=ht(m);H===-1?V.push(P.value):V.splice(H,1),"value"in d||y(V),u==null||u(V.filter(q=>S.includes(q)).sort((q,K)=>{const ue=f.findIndex(Z=>Z.value===q),G=f.findIndex(Z=>Z.value===K);return ue-G}))},E=h("checkbox",a),R=`${E}-group`,M=er(E),[O,$,N]=is(E,M),k=ii(d,["value","disabled"]),_=i.length?f.map(P=>c.createElement(os,{prefixCls:E,key:P.value.toString(),disabled:"disabled"in P?P.disabled:d.disabled,value:P.value,checked:m.includes(P.value),onChange:P.onChange,className:`${R}-item`,style:P.style,title:P.title,id:P.id,required:P.required},P.label)):r,j={toggleOption:x,value:m,disabled:d.disabled,name:d.name,registerValue:A,cancelValue:b},D=re(R,{[`${R}-rtl`]:v==="rtl"},o,s,N,M,$);return O(c.createElement("div",Object.assign({className:D,style:l},k,{ref:t}),c.createElement(as.Provider,{value:j},_)))}),ma=os;ma.Group=pu;ma.__ANT_CHECKBOX=!0;var ss=L.forwardRef(function(n,t){var e=n.prefixCls,r=n.forceRender,i=n.className,a=n.style,o=n.children,s=n.isActive,l=n.role,u=L.useState(s||r),d=de(u,2),h=d[0],v=d[1];return L.useEffect(function(){(r||s)&&v(!0)},[r,s]),h?L.createElement("div",{ref:t,className:re("".concat(e,"-content"),le(le({},"".concat(e,"-content-active"),s),"".concat(e,"-content-inactive"),!s),i),style:a,role:l},L.createElement("div",{className:"".concat(e,"-content-box")},o)):null});ss.displayName="PanelContent";var gu=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],ls=L.forwardRef(function(n,t){var e=n.showArrow,r=e===void 0?!0:e,i=n.headerClass,a=n.isActive,o=n.onItemClick,s=n.forceRender,l=n.className,u=n.prefixCls,d=n.collapsible,h=n.accordion,v=n.panelKey,m=n.extra,y=n.header,S=n.expandIcon,g=n.openMotion,f=n.destroyInactivePanel,b=n.children,A=vt(n,gu),x=d==="disabled",E=d==="header",R=d==="icon",M=m!=null&&typeof m!="boolean",O=function(){o==null||o(v)},$=function(P){(P.key==="Enter"||P.keyCode===it.ENTER||P.which===it.ENTER)&&O()},N=typeof S=="function"?S(n):L.createElement("i",{className:"arrow"});N&&(N=L.createElement("div",{className:"".concat(u,"-expand-icon"),onClick:["header","icon"].includes(d)?O:void 0},N));var k=re(le(le(le({},"".concat(u,"-item"),!0),"".concat(u,"-item-active"),a),"".concat(u,"-item-disabled"),x),l),_=re(i,le(le(le({},"".concat(u,"-header"),!0),"".concat(u,"-header-collapsible-only"),E),"".concat(u,"-icon-collapsible-only"),R)),j={className:_,"aria-expanded":a,"aria-disabled":x,onKeyDown:$};return!E&&!R&&(j.onClick=O,j.role=h?"tab":"button",j.tabIndex=x?-1:0),L.createElement("div",Te({},A,{ref:t,className:k}),L.createElement("div",j,r&&N,L.createElement("span",{className:"".concat(u,"-header-text"),onClick:d==="header"?O:void 0},y),M&&L.createElement("div",{className:"".concat(u,"-extra")},m)),L.createElement(ha,Te({visible:a,leavedClassName:"".concat(u,"-content-hidden")},g,{forceRender:s,removeOnLeave:f}),function(D,P){var H=D.className,V=D.style;return L.createElement(ss,{ref:P,prefixCls:u,className:H,style:V,isActive:a,forceRender:s,role:h?"tabpanel":void 0},b)}))}),mu=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],fu=function(t,e){var r=e.prefixCls,i=e.accordion,a=e.collapsible,o=e.destroyInactivePanel,s=e.onItemClick,l=e.activeKey,u=e.openMotion,d=e.expandIcon;return t.map(function(h,v){var m=h.children,y=h.label,S=h.key,g=h.collapsible,f=h.onItemClick,b=h.destroyInactivePanel,A=vt(h,mu),x=String(S??v),E=g??a,R=b??o,M=function(N){E!=="disabled"&&(s(N),f==null||f(N))},O=!1;return i?O=l[0]===x:O=l.indexOf(x)>-1,L.createElement(ls,Te({},A,{prefixCls:r,key:x,panelKey:x,isActive:O,accordion:i,openMotion:u,expandIcon:d,header:y,collapsible:E,onItemClick:M,destroyInactivePanel:R}),m)})},vu=function(t,e,r){if(!t)return null;var i=r.prefixCls,a=r.accordion,o=r.collapsible,s=r.destroyInactivePanel,l=r.onItemClick,u=r.activeKey,d=r.openMotion,h=r.expandIcon,v=t.key||String(e),m=t.props,y=m.header,S=m.headerClass,g=m.destroyInactivePanel,f=m.collapsible,b=m.onItemClick,A=!1;a?A=u[0]===v:A=u.indexOf(v)>-1;var x=f??o,E=function(O){x!=="disabled"&&(l(O),b==null||b(O))},R={key:v,panelKey:v,header:y,headerClass:S,isActive:A,prefixCls:i,destroyInactivePanel:g??s,openMotion:d,accordion:a,children:t.props.children,onItemClick:E,expandIcon:h,collapsible:x};return typeof t.type=="string"?t:(Object.keys(R).forEach(function(M){typeof R[M]>"u"&&delete R[M]}),L.cloneElement(t,R))};function yu(n,t,e){return Array.isArray(n)?fu(n,e):Do(t).map(function(r,i){return vu(r,i,e)})}function bu(n){var t=n;if(!Array.isArray(t)){var e=xn(t);t=e==="number"||e==="string"?[t]:[]}return t.map(function(r){return String(r)})}var Su=L.forwardRef(function(n,t){var e=n.prefixCls,r=e===void 0?"rc-collapse":e,i=n.destroyInactivePanel,a=i===void 0?!1:i,o=n.style,s=n.accordion,l=n.className,u=n.children,d=n.collapsible,h=n.openMotion,v=n.expandIcon,m=n.activeKey,y=n.defaultActiveKey,S=n.onChange,g=n.items,f=re(r,l),b=Ot([],{value:m,onChange:function($){return S==null?void 0:S($)},defaultValue:y,postState:bu}),A=de(b,2),x=A[0],E=A[1],R=function($){return E(function(){if(s)return x[0]===$?[]:[$];var N=x.indexOf($),k=N>-1;return k?x.filter(function(_){return _!==$}):[].concat(ht(x),[$])})};ai(!u,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var M=yu(g,u,{prefixCls:r,accordion:s,openMotion:h,expandIcon:v,collapsible:d,destroyInactivePanel:a,onItemClick:R,activeKey:x});return L.createElement("div",Te({ref:t,className:f,style:o,role:s?"tablist":void 0},Lo(n,{aria:!0,data:!0})),M)});const fa=Object.assign(Su,{Panel:ls});fa.Panel;const Cu=c.forwardRef((n,t)=>{const{getPrefixCls:e}=c.useContext(Rt),{prefixCls:r,className:i,showArrow:a=!0}=n,o=e("collapse",r),s=re({[`${o}-no-arrow`]:!a},i);return c.createElement(fa.Panel,Object.assign({ref:t},n,{prefixCls:o,className:s}))}),xu=n=>{const{componentCls:t,contentBg:e,padding:r,headerBg:i,headerPadding:a,collapseHeaderPaddingSM:o,collapseHeaderPaddingLG:s,collapsePanelBorderRadius:l,lineWidth:u,lineType:d,colorBorder:h,colorText:v,colorTextHeading:m,colorTextDisabled:y,fontSizeLG:S,lineHeight:g,lineHeightLG:f,marginSM:b,paddingSM:A,paddingLG:x,paddingXS:E,motionDurationSlow:R,fontSizeIcon:M,contentPadding:O,fontHeight:$,fontHeightLG:N}=n,k=`${te(u)} ${d} ${h}`;return{[t]:Object.assign(Object.assign({},Vt(n)),{backgroundColor:i,border:k,borderRadius:l,"&-rtl":{direction:"rtl"},[`& > ${t}-item`]:{borderBottom:k,"&:last-child":{[`
            &,
            & > ${t}-header`]:{borderRadius:`0 0 ${te(l)} ${te(l)}`}},[`> ${t}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:a,color:m,lineHeight:g,cursor:"pointer",transition:`all ${R}, visibility 0s`,[`> ${t}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${t}-expand-icon`]:{height:$,display:"flex",alignItems:"center",paddingInlineEnd:b},[`${t}-arrow`]:Object.assign(Object.assign({},zo()),{fontSize:M,transition:`transform ${R}`,svg:{transition:`transform ${R}`}}),[`${t}-header-text`]:{marginInlineEnd:"auto"}},[`${t}-icon-collapsible-only`]:{cursor:"unset",[`${t}-expand-icon`]:{cursor:"pointer"}}},[`${t}-content`]:{color:v,backgroundColor:e,borderTop:k,[`& > ${t}-content-box`]:{padding:O},"&-hidden":{display:"none"}},"&-small":{[`> ${t}-item`]:{[`> ${t}-header`]:{padding:o,paddingInlineStart:E,[`> ${t}-expand-icon`]:{marginInlineStart:n.calc(A).sub(E).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:A}}},"&-large":{[`> ${t}-item`]:{fontSize:S,lineHeight:f,[`> ${t}-header`]:{padding:s,paddingInlineStart:r,[`> ${t}-expand-icon`]:{height:N,marginInlineStart:n.calc(x).sub(r).equal()}},[`> ${t}-content > ${t}-content-box`]:{padding:x}}},[`${t}-item:last-child`]:{borderBottom:0,[`> ${t}-content`]:{borderRadius:`0 0 ${te(l)} ${te(l)}`}},[`& ${t}-item-disabled > ${t}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:y,cursor:"not-allowed"}},[`&${t}-icon-position-end`]:{[`& > ${t}-item`]:{[`> ${t}-header`]:{[`${t}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:b}}}}})}},Eu=n=>{const{componentCls:t}=n,e=`> ${t}-item > ${t}-header ${t}-arrow`;return{[`${t}-rtl`]:{[e]:{transform:"rotate(180deg)"}}}},Au=n=>{const{componentCls:t,headerBg:e,paddingXXS:r,colorBorder:i}=n;return{[`${t}-borderless`]:{backgroundColor:e,border:0,[`> ${t}-item`]:{borderBottom:`1px solid ${i}`},[`
        > ${t}-item:last-child,
        > ${t}-item:last-child ${t}-header
      `]:{borderRadius:0},[`> ${t}-item:last-child`]:{borderBottom:0},[`> ${t}-item > ${t}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${t}-item > ${t}-content > ${t}-content-box`]:{paddingTop:r}}}},wu=n=>{const{componentCls:t,paddingSM:e}=n;return{[`${t}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${t}-item`]:{borderBottom:0,[`> ${t}-content`]:{backgroundColor:"transparent",border:0,[`> ${t}-content-box`]:{paddingBlock:e}}}}}},Mu=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer}),Nu=cn("Collapse",n=>{const t=qt(n,{collapseHeaderPaddingSM:`${te(n.paddingXS)} ${te(n.paddingSM)}`,collapseHeaderPaddingLG:`${te(n.padding)} ${te(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[xu(t),Au(t),wu(t),Eu(t),Sl(t)]},Mu),Ou=c.forwardRef((n,t)=>{const{getPrefixCls:e,direction:r,collapse:i}=c.useContext(Rt),{prefixCls:a,className:o,rootClassName:s,style:l,bordered:u=!0,ghost:d,size:h,expandIconPosition:v="start",children:m,expandIcon:y}=n,S=hi(k=>{var _;return(_=h??k)!==null&&_!==void 0?_:"middle"}),g=e("collapse",a),f=e(),[b,A,x]=Nu(g),E=c.useMemo(()=>v==="left"?"start":v==="right"?"end":v,[v]),R=y??(i==null?void 0:i.expandIcon),M=c.useCallback(function(){let k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const _=typeof R=="function"?R(k):c.createElement(jo,{rotate:k.isActive?90:void 0,"aria-label":k.isActive?"expanded":"collapsed"});return Ji(_,()=>{var j;return{className:re((j=_==null?void 0:_.props)===null||j===void 0?void 0:j.className,`${g}-arrow`)}})},[R,g]),O=re(`${g}-icon-position-${E}`,{[`${g}-borderless`]:!u,[`${g}-rtl`]:r==="rtl",[`${g}-ghost`]:!!d,[`${g}-${S}`]:S!=="middle"},i==null?void 0:i.className,o,s,A,x),$=Object.assign(Object.assign({},Cl(f)),{motionAppear:!1,leavedClassName:`${g}-content-hidden`}),N=c.useMemo(()=>m?Do(m).map((k,_)=>{var j,D;if(!((j=k.props)===null||j===void 0)&&j.disabled){const P=(D=k.key)!==null&&D!==void 0?D:String(_),{disabled:H,collapsible:V}=k.props,q=Object.assign(Object.assign({},ii(k.props,["disabled"])),{key:P,collapsible:V??(H?"disabled":void 0)});return Ji(k,q)}return k}):null,[m]);return b(c.createElement(fa,Object.assign({ref:t,openMotion:$},ii(n,["rootClassName"]),{expandIcon:M,prefixCls:g,className:O,style:Object.assign(Object.assign({},i==null?void 0:i.style),l)}),N))}),Iu=Object.assign(Ou,{Panel:Cu});var Pu=["b"],Ru=["v"],Ti=function(t){return Math.round(Number(t||0))},ku=function(t){if(t instanceof Bo)return t;if(t&&xn(t)==="object"&&"h"in t&&"b"in t){var e=t,r=e.b,i=vt(e,Pu);return ce(ce({},i),{},{v:r})}return typeof t=="string"&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t},Ft=function(n){xl(e,n);var t=El(e);function e(r){return pi(this,e),t.call(this,ku(r))}return gi(e,[{key:"toHsbString",value:function(){var i=this.toHsb(),a=Ti(i.s*100),o=Ti(i.b*100),s=Ti(i.h),l=i.a,u="hsb(".concat(s,", ").concat(a,"%, ").concat(o,"%)"),d="hsba(".concat(s,", ").concat(a,"%, ").concat(o,"%, ").concat(l.toFixed(l===0?0:2),")");return l===1?u:d}},{key:"toHsb",value:function(){var i=this.toHsv(),a=i.v,o=vt(i,Ru);return ce(ce({},o),{},{b:a,a:this.a})}}]),e}(Bo),_u="rc-color-picker",Kn=function(t){return t instanceof Ft?t:new Ft(t)},Tu=Kn("#1677ff"),cs=function(t){var e=t.offset,r=t.targetRef,i=t.containerRef,a=t.color,o=t.type,s=i.current.getBoundingClientRect(),l=s.width,u=s.height,d=r.current.getBoundingClientRect(),h=d.width,v=d.height,m=h/2,y=v/2,S=(e.x+m)/l,g=1-(e.y+y)/u,f=a.toHsb(),b=S,A=(e.x+m)/l*360;if(o)switch(o){case"hue":return Kn(ce(ce({},f),{},{h:A<=0?0:A}));case"alpha":return Kn(ce(ce({},f),{},{a:b<=0?0:b}))}return Kn({h:f.h,s:S<=0?0:S,b:g>=1?1:g,a:f.a})},us=function(t,e){var r=t.toHsb();switch(e){case"hue":return{x:r.h/360*100,y:50};case"alpha":return{x:t.a*100,y:50};default:return{x:r.s*100,y:(1-r.b)*100}}},va=function(t){var e=t.color,r=t.prefixCls,i=t.className,a=t.style,o=t.onClick,s="".concat(r,"-color-block");return L.createElement("div",{className:re(s,i),style:a,onClick:o},L.createElement("div",{className:"".concat(s,"-inner"),style:{background:e}}))};function $u(n){var t="touches"in n?n.touches[0]:n,e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,r=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:t.pageX-e,pageY:t.pageY-r}}function ds(n){var t=n.targetRef,e=n.containerRef,r=n.direction,i=n.onDragChange,a=n.onDragChangeComplete,o=n.calculate,s=n.color,l=n.disabledDrag,u=c.useState({x:0,y:0}),d=de(u,2),h=d[0],v=d[1],m=c.useRef(null),y=c.useRef(null);c.useEffect(function(){v(o())},[s]),c.useEffect(function(){return function(){document.removeEventListener("mousemove",m.current),document.removeEventListener("mouseup",y.current),document.removeEventListener("touchmove",m.current),document.removeEventListener("touchend",y.current),m.current=null,y.current=null}},[]);var S=function(x){var E=$u(x),R=E.pageX,M=E.pageY,O=e.current.getBoundingClientRect(),$=O.x,N=O.y,k=O.width,_=O.height,j=t.current.getBoundingClientRect(),D=j.width,P=j.height,H=D/2,V=P/2,q=Math.max(0,Math.min(R-$,k))-H,K=Math.max(0,Math.min(M-N,_))-V,ue={x:q,y:r==="x"?h.y:K};if(D===0&&P===0||D!==P)return!1;i==null||i(ue)},g=function(x){x.preventDefault(),S(x)},f=function(x){x.preventDefault(),document.removeEventListener("mousemove",m.current),document.removeEventListener("mouseup",y.current),document.removeEventListener("touchmove",m.current),document.removeEventListener("touchend",y.current),m.current=null,y.current=null,a==null||a()},b=function(x){document.removeEventListener("mousemove",m.current),document.removeEventListener("mouseup",y.current),!l&&(S(x),document.addEventListener("mousemove",g),document.addEventListener("mouseup",f),document.addEventListener("touchmove",g),document.addEventListener("touchend",f),m.current=g,y.current=f)};return[h,b]}var hs=function(t){var e=t.size,r=e===void 0?"default":e,i=t.color,a=t.prefixCls;return L.createElement("div",{className:re("".concat(a,"-handler"),le({},"".concat(a,"-handler-sm"),r==="small")),style:{backgroundColor:i}})},ps=function(t){var e=t.children,r=t.style,i=t.prefixCls;return L.createElement("div",{className:"".concat(i,"-palette"),style:ce({position:"relative"},r)},e)},gs=c.forwardRef(function(n,t){var e=n.children,r=n.x,i=n.y;return L.createElement("div",{ref:t,style:{position:"absolute",left:"".concat(r,"%"),top:"".concat(i,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},e)}),Du=function(t){var e=t.color,r=t.onChange,i=t.prefixCls,a=t.onChangeComplete,o=t.disabled,s=c.useRef(),l=c.useRef(),u=c.useRef(e),d=Xt(function(S){var g=cs({offset:S,targetRef:l,containerRef:s,color:e});u.current=g,r(g)}),h=ds({color:e,containerRef:s,targetRef:l,calculate:function(){return us(e)},onDragChange:d,onDragChangeComplete:function(){return a==null?void 0:a(u.current)},disabledDrag:o}),v=de(h,2),m=v[0],y=v[1];return L.createElement("div",{ref:s,className:"".concat(i,"-select"),onMouseDown:y,onTouchStart:y},L.createElement(ps,{prefixCls:i},L.createElement(gs,{x:m.x,y:m.y,ref:l},L.createElement(hs,{color:e.toRgbString(),prefixCls:i})),L.createElement("div",{className:"".concat(i,"-saturation"),style:{backgroundColor:"hsl(".concat(e.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},Lu=function(t,e){var r=Ot(t,{value:e}),i=de(r,2),a=i[0],o=i[1],s=c.useMemo(function(){return Kn(a)},[a]);return[s,o]},zu=function(t){var e=t.colors,r=t.children,i=t.direction,a=i===void 0?"to right":i,o=t.type,s=t.prefixCls,l=c.useMemo(function(){return e.map(function(u,d){var h=Kn(u);return o==="alpha"&&d===e.length-1&&(h=new Ft(h.setA(1))),h.toRgbString()}).join(",")},[e,o]);return L.createElement("div",{className:"".concat(s,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(a,", ").concat(l,")")}},r)},ju=function(t){var e=t.prefixCls,r=t.colors,i=t.disabled,a=t.onChange,o=t.onChangeComplete,s=t.color,l=t.type,u=c.useRef(),d=c.useRef(),h=c.useRef(s),v=function(E){return l==="hue"?E.getHue():E.a*100},m=Xt(function(x){var E=cs({offset:x,targetRef:d,containerRef:u,color:s,type:l});h.current=E,a(v(E))}),y=ds({color:s,targetRef:d,containerRef:u,calculate:function(){return us(s,l)},onDragChange:m,onDragChangeComplete:function(){o(v(h.current))},direction:"x",disabledDrag:i}),S=de(y,2),g=S[0],f=S[1],b=L.useMemo(function(){if(l==="hue"){var x=s.toHsb();x.s=1,x.b=1,x.a=1;var E=new Ft(x);return E}return s},[s,l]),A=L.useMemo(function(){return r.map(function(x){return"".concat(x.color," ").concat(x.percent,"%")})},[r]);return L.createElement("div",{ref:u,className:re("".concat(e,"-slider"),"".concat(e,"-slider-").concat(l)),onMouseDown:f,onTouchStart:f},L.createElement(ps,{prefixCls:e},L.createElement(gs,{x:g.x,y:g.y,ref:d},L.createElement(hs,{size:"small",color:b.toHexString(),prefixCls:e})),L.createElement(zu,{colors:A,type:l,prefixCls:e})))};function Bu(n){return c.useMemo(function(){var t=n||{},e=t.slider;return[e||ju]},[n])}var Hu=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],Vu=c.forwardRef(function(n,t){var e=n.value,r=n.defaultValue,i=n.prefixCls,a=i===void 0?_u:i,o=n.onChange,s=n.onChangeComplete,l=n.className,u=n.style,d=n.panelRender,h=n.disabledAlpha,v=h===void 0?!1:h,m=n.disabled,y=m===void 0?!1:m,S=n.components,g=Bu(S),f=de(g,1),b=f[0],A=Lu(r||Tu,e),x=de(A,2),E=x[0],R=x[1],M=c.useMemo(function(){return E.setA(1).toRgbString()},[E]),O=function(K,ue){e||R(K),o==null||o(K,ue)},$=function(K){return new Ft(E.setHue(K))},N=function(K){return new Ft(E.setA(K/100))},k=function(K){O($(K),{type:"hue",value:K})},_=function(K){O(N(K),{type:"alpha",value:K})},j=function(K){s&&s($(K))},D=function(K){s&&s(N(K))},P=re("".concat(a,"-panel"),l,le({},"".concat(a,"-panel-disabled"),y)),H={prefixCls:a,disabled:y,color:E},V=L.createElement(L.Fragment,null,L.createElement(Du,Te({onChange:O},H,{onChangeComplete:s})),L.createElement("div",{className:"".concat(a,"-slider-container")},L.createElement("div",{className:re("".concat(a,"-slider-group"),le({},"".concat(a,"-slider-group-disabled-alpha"),v))},L.createElement(b,Te({},H,{type:"hue",colors:Hu,min:0,max:359,value:E.getHue(),onChange:k,onChangeComplete:j})),!v&&L.createElement(b,Te({},H,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:M}],min:0,max:100,value:E.a*100,onChange:_,onChangeComplete:D}))),L.createElement(va,{color:E.toRgbString(),prefixCls:a})));return L.createElement("div",{className:P,style:u,ref:t},typeof d=="function"?d(V):V)});const gr=(n,t)=>(n==null?void 0:n.replace(/[^\w/]/gi,"").slice(0,t?8:6))||"",Fu=(n,t)=>n?gr(n,t):"";let zt=function(){function n(t){pi(this,n);var e;if(this.cleared=!1,t instanceof n){this.metaColor=t.metaColor.clone(),this.colors=(e=t.colors)===null||e===void 0?void 0:e.map(i=>({color:new n(i.color),percent:i.percent})),this.cleared=t.cleared;return}const r=Array.isArray(t);r&&t.length?(this.colors=t.map(i=>{let{color:a,percent:o}=i;return{color:new n(a),percent:o}}),this.metaColor=new Ft(this.colors[0].color.metaColor)):this.metaColor=new Ft(r?"":t),(!t||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return gi(n,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return Fu(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:e}=this;return e?`linear-gradient(90deg, ${e.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(e){return!e||this.isGradient()!==e.isGradient()?!1:this.isGradient()?this.colors.length===e.colors.length&&this.colors.every((r,i)=>{const a=e.colors[i];return r.percent===a.percent&&r.color.equals(a.color)}):this.toHexString()===e.toHexString()}}])}();const Uu=n=>{const{componentCls:t,sizePaddingEdgeHorizontal:e,colorSplit:r,lineWidth:i,textPaddingInline:a,orientationMargin:o,verticalMarginInline:s}=n;return{[t]:Object.assign(Object.assign({},Vt(n)),{borderBlockStart:`${te(i)} solid ${r}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:s,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${te(i)} solid ${r}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${te(n.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${te(n.dividerHorizontalWithTextGutterMargin)} 0`,color:n.colorTextHeading,fontWeight:500,fontSize:n.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${r}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${te(i)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:`calc(${o} * 100%)`},"&::after":{width:`calc(100% - ${o} * 100%)`}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:`calc(100% - ${o} * 100%)`},"&::after":{width:`calc(${o} * 100%)`}},[`${t}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:a},"&-dashed":{background:"none",borderColor:r,borderStyle:"dashed",borderWidth:`${te(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:r,borderStyle:"dotted",borderWidth:`${te(i)} 0 0`},[`&-horizontal${t}-with-text${t}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${t}-dotted`]:{borderInlineStartWidth:i,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:n.colorText,fontWeight:"normal",fontSize:n.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:e}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:e}}})}},Gu=n=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:n.marginXS}),Wu=cn("Divider",n=>{const t=qt(n,{dividerHorizontalWithTextGutterMargin:n.margin,dividerHorizontalGutterMargin:n.marginLG,sizePaddingEdgeHorizontal:0});return[Uu(t)]},Gu,{unitless:{orientationMargin:!0}});var Xu=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const Yu=n=>{const{getPrefixCls:t,direction:e,divider:r}=c.useContext(Rt),{prefixCls:i,type:a="horizontal",orientation:o="center",orientationMargin:s,className:l,rootClassName:u,children:d,dashed:h,variant:v="solid",plain:m,style:y}=n,S=Xu(n,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),g=t("divider",i),[f,b,A]=Wu(g),x=!!d,E=o==="left"&&s!=null,R=o==="right"&&s!=null,M=re(g,r==null?void 0:r.className,b,A,`${g}-${a}`,{[`${g}-with-text`]:x,[`${g}-with-text-${o}`]:x,[`${g}-dashed`]:!!h,[`${g}-${v}`]:v!=="solid",[`${g}-plain`]:!!m,[`${g}-rtl`]:e==="rtl",[`${g}-no-default-orientation-margin-left`]:E,[`${g}-no-default-orientation-margin-right`]:R},l,u),O=c.useMemo(()=>typeof s=="number"?s:/^\d+$/.test(s)?Number(s):s,[s]),$=Object.assign(Object.assign({},E&&{marginLeft:O}),R&&{marginRight:O});return f(c.createElement("div",Object.assign({className:M,style:Object.assign(Object.assign({},r==null?void 0:r.style),y)},S,{role:"separator"}),d&&a!=="vertical"&&c.createElement("span",{className:`${g}-inner-text`,style:$},d)))};var za=function(t){return t?{left:t.offsetLeft,right:t.parentElement.clientWidth-t.clientWidth-t.offsetLeft,width:t.clientWidth}:null},Bn=function(t){return t!==void 0?"".concat(t,"px"):void 0};function Ku(n){var t=n.prefixCls,e=n.containerRef,r=n.value,i=n.getValueIndex,a=n.motionName,o=n.onMotionStart,s=n.onMotionEnd,l=n.direction,u=c.useRef(null),d=c.useState(r),h=de(d,2),v=h[0],m=h[1],y=function(j){var D,P=i(j),H=(D=e.current)===null||D===void 0?void 0:D.querySelectorAll(".".concat(t,"-item"))[P];return(H==null?void 0:H.offsetParent)&&H},S=c.useState(null),g=de(S,2),f=g[0],b=g[1],A=c.useState(null),x=de(A,2),E=x[0],R=x[1];mi(function(){if(v!==r){var _=y(v),j=y(r),D=za(_),P=za(j);m(r),b(D),R(P),_&&j?o():s()}},[r]);var M=c.useMemo(function(){return Bn(l==="rtl"?-(f==null?void 0:f.right):f==null?void 0:f.left)},[l,f]),O=c.useMemo(function(){return Bn(l==="rtl"?-(E==null?void 0:E.right):E==null?void 0:E.left)},[l,E]),$=function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},N=function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},k=function(){b(null),R(null),s()};return!f||!E?null:c.createElement(ha,{visible:!0,motionName:a,motionAppear:!0,onAppearStart:$,onAppearActive:N,onVisibleChanged:k},function(_,j){var D=_.className,P=_.style,H=ce(ce({},P),{},{"--thumb-start-left":M,"--thumb-start-width":Bn(f==null?void 0:f.width),"--thumb-active-left":O,"--thumb-active-width":Bn(E==null?void 0:E.width)}),V={ref:fi(u,j),style:H,className:re("".concat(t,"-thumb"),D)};return c.createElement("div",V)})}var qu=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function Zu(n){if(typeof n.title<"u")return n.title;if(xn(n.label)!=="object"){var t;return(t=n.label)===null||t===void 0?void 0:t.toString()}}function Qu(n){return n.map(function(t){if(xn(t)==="object"&&t!==null){var e=Zu(t);return ce(ce({},t),{},{title:e})}return{label:t==null?void 0:t.toString(),title:t==null?void 0:t.toString(),value:t}})}var Ju=function(t){var e=t.prefixCls,r=t.className,i=t.disabled,a=t.checked,o=t.label,s=t.title,l=t.value,u=t.onChange,d=function(v){i||u(v,l)};return c.createElement("label",{className:re(r,le({},"".concat(e,"-item-disabled"),i))},c.createElement("input",{className:"".concat(e,"-item-input"),type:"radio",disabled:i,checked:a,onChange:d}),c.createElement("div",{className:"".concat(e,"-item-label"),title:s},o))},ed=c.forwardRef(function(n,t){var e,r,i=n.prefixCls,a=i===void 0?"rc-segmented":i,o=n.direction,s=n.options,l=s===void 0?[]:s,u=n.disabled,d=n.defaultValue,h=n.value,v=n.onChange,m=n.className,y=m===void 0?"":m,S=n.motionName,g=S===void 0?"thumb-motion":S,f=vt(n,qu),b=c.useRef(null),A=c.useMemo(function(){return fi(b,t)},[b,t]),x=c.useMemo(function(){return Qu(l)},[l]),E=Ot((e=x[0])===null||e===void 0?void 0:e.value,{value:h,defaultValue:d}),R=de(E,2),M=R[0],O=R[1],$=c.useState(!1),N=de($,2),k=N[0],_=N[1],j=function(H,V){u||(O(V),v==null||v(V))},D=ii(f,["children"]);return c.createElement("div",Te({},D,{className:re(a,(r={},le(r,"".concat(a,"-rtl"),o==="rtl"),le(r,"".concat(a,"-disabled"),u),r),y),ref:A}),c.createElement("div",{className:"".concat(a,"-group")},c.createElement(Ku,{prefixCls:a,value:M,containerRef:b,motionName:"".concat(a,"-").concat(g),direction:o,getValueIndex:function(H){return x.findIndex(function(V){return V.value===H})},onMotionStart:function(){_(!0)},onMotionEnd:function(){_(!1)}}),x.map(function(P){return c.createElement(Ju,Te({},P,{key:P.value,prefixCls:a,className:re(P.className,"".concat(a,"-item"),le({},"".concat(a,"-item-selected"),P.value===M&&!k)),checked:P.value===M,onChange:j,disabled:!!u||!!P.disabled}))})))}),td=ed;function ja(n,t){return{[`${n}, ${n}:hover, ${n}:focus`]:{color:t.colorTextDisabled,cursor:"not-allowed"}}}function Ba(n){return{backgroundColor:n.itemSelectedBg,boxShadow:n.boxShadowTertiary}}const nd=Object.assign({overflow:"hidden"},Ho),rd=n=>{const{componentCls:t}=n,e=n.calc(n.controlHeight).sub(n.calc(n.trackPadding).mul(2)).equal(),r=n.calc(n.controlHeightLG).sub(n.calc(n.trackPadding).mul(2)).equal(),i=n.calc(n.controlHeightSM).sub(n.calc(n.trackPadding).mul(2)).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Vt(n)),{display:"inline-block",padding:n.trackPadding,color:n.itemColor,background:n.trackBg,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,[`${t}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${t}-rtl`]:{direction:"rtl"},[`&${t}-block`]:{display:"flex"},[`&${t}-block ${t}-item`]:{flex:1,minWidth:0},[`${t}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${n.motionDurationMid} ${n.motionEaseInOut}`,borderRadius:n.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},Ba(n)),{color:n.itemSelectedColor}),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${n.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:n.itemHoverColor,"&::after":{backgroundColor:n.itemHoverBg}},[`&:active:not(${t}-item-selected):not(${t}-item-disabled)`]:{color:n.itemHoverColor,"&::after":{backgroundColor:n.itemActiveBg}},"&-label":Object.assign({minHeight:e,lineHeight:te(e),padding:`0 ${te(n.segmentedPaddingHorizontal)}`},nd),"&-icon + *":{marginInlineStart:n.calc(n.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${t}-thumb`]:Object.assign(Object.assign({},Ba(n)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${te(n.paddingXXS)} 0`,borderRadius:n.borderRadiusSM,[`& ~ ${t}-item:not(${t}-item-selected):not(${t}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${t}-lg`]:{borderRadius:n.borderRadiusLG,[`${t}-item-label`]:{minHeight:r,lineHeight:te(r),padding:`0 ${te(n.segmentedPaddingHorizontal)}`,fontSize:n.fontSizeLG},[`${t}-item, ${t}-thumb`]:{borderRadius:n.borderRadius}},[`&${t}-sm`]:{borderRadius:n.borderRadiusSM,[`${t}-item-label`]:{minHeight:i,lineHeight:te(i),padding:`0 ${te(n.segmentedPaddingHorizontalSM)}`},[`${t}-item, ${t}-thumb`]:{borderRadius:n.borderRadiusXS}}}),ja(`&-disabled ${t}-item`,n)),ja(`${t}-item-disabled`,n)),{[`${t}-thumb-motion-appear-active`]:{transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOut}, width ${n.motionDurationSlow} ${n.motionEaseInOut}`,willChange:"transform, width"}})}},id=n=>{const{colorTextLabel:t,colorText:e,colorFillSecondary:r,colorBgElevated:i,colorFill:a,lineWidthBold:o,colorBgLayout:s}=n;return{trackPadding:o,trackBg:s,itemColor:t,itemHoverColor:e,itemHoverBg:r,itemSelectedBg:i,itemActiveBg:a,itemSelectedColor:e}},ad=cn("Segmented",n=>{const{lineWidth:t,calc:e}=n,r=qt(n,{segmentedPaddingHorizontal:e(n.controlPaddingHorizontal).sub(t).equal(),segmentedPaddingHorizontalSM:e(n.controlPaddingHorizontalSM).sub(t).equal()});return[rd(r)]},id);var Ha=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};function od(n){return typeof n=="object"&&!!(n!=null&&n.icon)}const sd=c.forwardRef((n,t)=>{const{prefixCls:e,className:r,rootClassName:i,block:a,options:o=[],size:s="middle",style:l}=n,u=Ha(n,["prefixCls","className","rootClassName","block","options","size","style"]),{getPrefixCls:d,direction:h,segmented:v}=c.useContext(Rt),m=d("segmented",e),[y,S,g]=ad(m),f=hi(s),b=c.useMemo(()=>o.map(E=>{if(od(E)){const{icon:R,label:M}=E,O=Ha(E,["icon","label"]);return Object.assign(Object.assign({},O),{label:c.createElement(c.Fragment,null,c.createElement("span",{className:`${m}-item-icon`},R),M&&c.createElement("span",null,M))})}return E}),[o,m]),A=re(r,i,v==null?void 0:v.className,{[`${m}-block`]:a,[`${m}-sm`]:f==="small",[`${m}-lg`]:f==="large"},S,g),x=Object.assign(Object.assign({},v==null?void 0:v.style),l);return y(c.createElement(td,Object.assign({},u,{className:A,style:x,options:b,ref:t,prefixCls:m,direction:h})))}),ld=sd,ms=L.createContext({}),fs=L.createContext({}),yt=n=>n instanceof zt?n:new zt(n),ti=n=>Math.round(Number(n||0)),ya=n=>ti(n.toHsb().a*100),ni=(n,t)=>{const e=n.toHsb();return e.a=1,yt(e)},vs=(n,t)=>{const e=[{percent:0,color:n[0].color}].concat(ht(n),[{percent:100,color:n[n.length-1].color}]);for(let r=0;r<e.length-1;r+=1){const i=e[r].percent,a=e[r+1].percent,o=e[r].color,s=e[r+1].color;if(i<=t&&t<=a){const l=a-i;if(l===0)return o;const u=(t-i)/l*100,d=new Ft(o),h=new Ft(s);return d.mix(h,u).toRgbString()}}return""},ys=n=>{let{prefixCls:t,value:e,onChange:r}=n;const i=()=>{if(r&&e&&!e.cleared){const a=e.toHsb();a.a=0;const o=yt(a);o.cleared=!0,r(o)}};return L.createElement("div",{className:`${t}-clear`,onClick:i})};var bn;(function(n){n.hex="hex",n.rgb="rgb",n.hsb="hsb"})(bn||(bn={}));var cd={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},ud=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:cd}))},dd=c.forwardRef(ud);function na(){return typeof BigInt=="function"}function bs(n){return!n&&n!==0&&!Number.isNaN(n)||!String(n).trim()}function Pn(n){var t=n.trim(),e=t.startsWith("-");e&&(t=t.slice(1)),t=t.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),t.startsWith(".")&&(t="0".concat(t));var r=t||"0",i=r.split("."),a=i[0]||"0",o=i[1]||"0";a==="0"&&o==="0"&&(e=!1);var s=e?"-":"";return{negative:e,negativeStr:s,trimStr:r,integerStr:a,decimalStr:o,fullStr:"".concat(s).concat(r)}}function ba(n){var t=String(n);return!Number.isNaN(Number(t))&&t.includes("e")}function In(n){var t=String(n);if(ba(n)){var e=Number(t.slice(t.indexOf("e-")+2)),r=t.match(/\.(\d+)/);return r!=null&&r[1]&&(e+=r[1].length),e}return t.includes(".")&&Sa(t)?t.length-t.indexOf(".")-1:0}function bi(n){var t=String(n);if(ba(n)){if(n>Number.MAX_SAFE_INTEGER)return String(na()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(na()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);t=n.toFixed(In(t))}return Pn(t).fullStr}function Sa(n){return typeof n=="number"?!Number.isNaN(n):n?/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n):!1}var hd=function(){function n(t){if(pi(this,n),le(this,"origin",""),le(this,"negative",void 0),le(this,"integer",void 0),le(this,"decimal",void 0),le(this,"decimalLen",void 0),le(this,"empty",void 0),le(this,"nan",void 0),bs(t)){this.empty=!0;return}if(this.origin=String(t),t==="-"||Number.isNaN(t)){this.nan=!0;return}var e=t;if(ba(e)&&(e=Number(e)),e=typeof e=="string"?e:bi(e),Sa(e)){var r=Pn(e);this.negative=r.negative;var i=r.trimStr.split(".");this.integer=BigInt(i[0]);var a=i[1]||"0";this.decimal=BigInt(a),this.decimalLen=a.length}else this.nan=!0}return gi(n,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var r="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(r)}},{key:"negate",value:function(){var e=new n(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,r,i){var a=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),o=this.alignDecimal(a),s=e.alignDecimal(a),l=r(o,s).toString(),u=i(a),d=Pn(l),h=d.negativeStr,v=d.trimStr,m="".concat(h).concat(v.padStart(u+1,"0"));return new n("".concat(m.slice(0,-u),".").concat(m.slice(-u)))}},{key:"add",value:function(e){if(this.isInvalidate())return new n(e);var r=new n(e);return r.isInvalidate()?this:this.cal(r,function(i,a){return i+a},function(i){return i})}},{key:"multi",value:function(e){var r=new n(e);return this.isInvalidate()||r.isInvalidate()?new n(NaN):this.cal(r,function(i,a){return i*a},function(i){return i*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(e==null?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":Pn("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),n}(),pd=function(){function n(t){if(pi(this,n),le(this,"origin",""),le(this,"number",void 0),le(this,"empty",void 0),bs(t)){this.empty=!0;return}this.origin=String(t),this.number=Number(t)}return gi(n,[{key:"negate",value:function(){return new n(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new n(e);var r=Number(e);if(Number.isNaN(r))return this;var i=this.number+r;if(i>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var a=Math.max(In(this.number),In(r));return new n(i.toFixed(a))}},{key:"multi",value:function(e){var r=Number(e);if(this.isInvalidate()||Number.isNaN(r))return new n(NaN);var i=this.number*r;if(i>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(i<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var a=Math.max(In(this.number),In(r));return new n(i.toFixed(a))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(e==null?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":bi(this.number):this.origin}}]),n}();function Bt(n){return na()?new hd(n):new pd(n)}function ri(n,t,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n==="")return"";var i=Pn(n),a=i.negativeStr,o=i.integerStr,s=i.decimalStr,l="".concat(t).concat(s),u="".concat(a).concat(o);if(e>=0){var d=Number(s[e]);if(d>=5&&!r){var h=Bt(n).add("".concat(a,"0.").concat("0".repeat(e)).concat(10-d));return ri(h.toString(),t,e,r)}return e===0?u:"".concat(u).concat(t).concat(s.padEnd(e,"0").slice(0,e))}return l===".0"?u:"".concat(u).concat(l)}function gd(n,t){return typeof Proxy<"u"&&n?new Proxy(n,{get:function(r,i){if(t[i])return t[i];var a=r[i];return typeof a=="function"?a.bind(r):a}}):n}function md(n,t){var e=c.useRef(null);function r(){try{var a=n.selectionStart,o=n.selectionEnd,s=n.value,l=s.substring(0,a),u=s.substring(o);e.current={start:a,end:o,value:s,beforeTxt:l,afterTxt:u}}catch{}}function i(){if(n&&e.current&&t)try{var a=n.value,o=e.current,s=o.beforeTxt,l=o.afterTxt,u=o.start,d=a.length;if(a.startsWith(s))d=s.length;else if(a.endsWith(l))d=a.length-e.current.afterTxt.length;else{var h=s[u-1],v=a.indexOf(h,u-1);v!==-1&&(d=v+1)}n.setSelectionRange(d,d)}catch(m){ai(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(m.message))}}return[r,i]}var fd=function(){var t=c.useState(!1),e=de(t,2),r=e[0],i=e[1];return mi(function(){i(Al())},[]),r},vd=200,yd=600;function bd(n){var t=n.prefixCls,e=n.upNode,r=n.downNode,i=n.upDisabled,a=n.downDisabled,o=n.onStep,s=c.useRef(),l=c.useRef([]),u=c.useRef();u.current=o;var d=function(){clearTimeout(s.current)},h=function(A,x){A.preventDefault(),d(),u.current(x);function E(){u.current(x),s.current=setTimeout(E,vd)}s.current=setTimeout(E,yd)};c.useEffect(function(){return function(){d(),l.current.forEach(function(b){return Zt.cancel(b)})}},[]);var v=fd();if(v)return null;var m="".concat(t,"-handler"),y=re(m,"".concat(m,"-up"),le({},"".concat(m,"-up-disabled"),i)),S=re(m,"".concat(m,"-down"),le({},"".concat(m,"-down-disabled"),a)),g=function(){return l.current.push(Zt(d))},f={unselectable:"on",role:"button",onMouseUp:g,onMouseLeave:g};return c.createElement("div",{className:"".concat(m,"-wrap")},c.createElement("span",Te({},f,{onMouseDown:function(A){h(A,!0)},"aria-label":"Increase Value","aria-disabled":i,className:y}),e||c.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-up-inner")})),c.createElement("span",Te({},f,{onMouseDown:function(A){h(A,!1)},"aria-label":"Decrease Value","aria-disabled":a,className:S}),r||c.createElement("span",{unselectable:"on",className:"".concat(t,"-handler-down-inner")})))}function Va(n){var t=typeof n=="number"?bi(n):Pn(n).fullStr,e=t.includes(".");return e?Pn(t.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:n+"0"}const Sd=function(){var n=c.useRef(0),t=function(){Zt.cancel(n.current)};return c.useEffect(function(){return t},[]),function(e){t(),n.current=Zt(function(){e()})}};var Cd=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],xd=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],Fa=function(t,e){return t||e.isEmpty()?e.toString():e.toNumber()},Ua=function(t){var e=Bt(t);return e.isInvalidate()?null:e},Ed=c.forwardRef(function(n,t){var e=n.prefixCls,r=n.className,i=n.style,a=n.min,o=n.max,s=n.step,l=s===void 0?1:s,u=n.defaultValue,d=n.value,h=n.disabled,v=n.readOnly,m=n.upHandler,y=n.downHandler,S=n.keyboard,g=n.changeOnWheel,f=g===void 0?!1:g,b=n.controls,A=b===void 0?!0:b;n.classNames;var x=n.stringMode,E=n.parser,R=n.formatter,M=n.precision,O=n.decimalSeparator,$=n.onChange,N=n.onInput,k=n.onPressEnter,_=n.onStep,j=n.changeOnBlur,D=j===void 0?!0:j,P=n.domRef,H=vt(n,Cd),V="".concat(e,"-input"),q=c.useRef(null),K=c.useState(!1),ue=de(K,2),G=ue[0],Z=ue[1],Q=c.useRef(!1),ne=c.useRef(!1),X=c.useRef(!1),ee=c.useState(function(){return Bt(d??u)}),se=de(ee,2),U=se[0],W=se[1];function Y(ie){d===void 0&&W(ie)}var ae=c.useCallback(function(ie,oe){if(!oe)return M>=0?M:Math.max(In(ie),In(l))},[M,l]),fe=c.useCallback(function(ie){var oe=String(ie);if(E)return E(oe);var ye=oe;return O&&(ye=ye.replace(O,".")),ye.replace(/[^\w.-]+/g,"")},[E,O]),Re=c.useRef(""),Le=c.useCallback(function(ie,oe){if(R)return R(ie,{userTyping:oe,input:String(Re.current)});var ye=typeof ie=="number"?bi(ie):ie;if(!oe){var he=ae(ye,oe);if(Sa(ye)&&(O||he>=0)){var wt=O||".";ye=ri(ye,wt,he)}}return ye},[R,ae,O]),Ne=c.useState(function(){var ie=u??d;return U.isInvalidate()&&["string","number"].includes(xn(ie))?Number.isNaN(ie)?"":ie:Le(U.toString(),!1)}),qe=de(Ne,2),ge=qe[0],Ce=qe[1];Re.current=ge;function ve(ie,oe){Ce(Le(ie.isInvalidate()?ie.toString(!1):ie.toString(!oe),oe))}var Oe=c.useMemo(function(){return Ua(o)},[o,M]),_e=c.useMemo(function(){return Ua(a)},[a,M]),tt=c.useMemo(function(){return!Oe||!U||U.isInvalidate()?!1:Oe.lessEquals(U)},[Oe,U]),Be=c.useMemo(function(){return!_e||!U||U.isInvalidate()?!1:U.lessEquals(_e)},[_e,U]),xe=md(q.current,G),Ie=de(xe,2),Xe=Ie[0],ut=Ie[1],Ve=function(oe){return Oe&&!oe.lessEquals(Oe)?Oe:_e&&!_e.lessEquals(oe)?_e:null},Se=function(oe){return!Ve(oe)},Ze=function(oe,ye){var he=oe,wt=Se(he)||he.isEmpty();if(!he.isEmpty()&&!ye&&(he=Ve(he)||he,wt=!0),!v&&!h&&wt){var kt=he.toString(),St=ae(kt,ye);return St>=0&&(he=Bt(ri(kt,".",St)),Se(he)||(he=Bt(ri(kt,".",St,!0)))),he.equals(U)||(Y(he),$==null||$(he.isEmpty()?null:Fa(x,he)),d===void 0&&ve(he,ye)),he}return U},nt=Sd(),bt=function ie(oe){if(Xe(),Re.current=oe,Ce(oe),!ne.current){var ye=fe(oe),he=Bt(ye);he.isNaN()||Ze(he,!0)}N==null||N(oe),nt(function(){var wt=oe;E||(wt=oe.replace(/。/g,".")),wt!==oe&&ie(wt)})},gt=function(){ne.current=!0},Ut=function(){ne.current=!1,bt(q.current.value)},Je=function(oe){bt(oe.target.value)},rt=function(oe){var ye;if(!(oe&&tt||!oe&&Be)){Q.current=!1;var he=Bt(X.current?Va(l):l);oe||(he=he.negate());var wt=(U||Bt(0)).add(he.toString()),kt=Ze(wt,!1);_==null||_(Fa(x,kt),{offset:X.current?Va(l):l,type:oe?"up":"down"}),(ye=q.current)===null||ye===void 0||ye.focus()}},mt=function(oe){var ye=Bt(fe(ge)),he;ye.isNaN()?he=Ze(U,oe):he=Ze(ye,oe),d!==void 0?ve(U,!1):he.isNaN()||ve(he,!1)},hn=function(){Q.current=!0},Gt=function(oe){var ye=oe.key,he=oe.shiftKey;Q.current=!0,X.current=he,ye==="Enter"&&(ne.current||(Q.current=!1),mt(!1),k==null||k(oe)),S!==!1&&!ne.current&&["Up","ArrowUp","Down","ArrowDown"].includes(ye)&&(rt(ye==="Up"||ye==="ArrowUp"),oe.preventDefault())},Ue=function(){Q.current=!1,X.current=!1};c.useEffect(function(){if(f&&G){var ie=function(he){rt(he.deltaY<0),he.preventDefault()},oe=q.current;if(oe)return oe.addEventListener("wheel",ie,{passive:!1}),function(){return oe.removeEventListener("wheel",ie)}}});var ze=function(){D&&mt(!1),Z(!1),Q.current=!1};return Ii(function(){U.isInvalidate()||ve(U,!1)},[M,R]),Ii(function(){var ie=Bt(d);W(ie);var oe=Bt(fe(ge));(!ie.equals(oe)||!Q.current||R)&&ve(ie,Q.current)},[d]),Ii(function(){R&&ut()},[ge]),c.createElement("div",{ref:P,className:re(e,r,le(le(le(le(le({},"".concat(e,"-focused"),G),"".concat(e,"-disabled"),h),"".concat(e,"-readonly"),v),"".concat(e,"-not-a-number"),U.isNaN()),"".concat(e,"-out-of-range"),!U.isInvalidate()&&!Se(U))),style:i,onFocus:function(){Z(!0)},onBlur:ze,onKeyDown:Gt,onKeyUp:Ue,onCompositionStart:gt,onCompositionEnd:Ut,onBeforeInput:hn},A&&c.createElement(bd,{prefixCls:e,upNode:m,downNode:y,upDisabled:tt,downDisabled:Be,onStep:rt}),c.createElement("div",{className:"".concat(V,"-wrap")},c.createElement("input",Te({autoComplete:"off",role:"spinbutton","aria-valuemin":a,"aria-valuemax":o,"aria-valuenow":U.isInvalidate()?null:U.toString(),step:l},H,{ref:fi(q,t),className:V,value:ge,onChange:Je,disabled:h,readOnly:v}))))}),Ad=c.forwardRef(function(n,t){var e=n.disabled,r=n.style,i=n.prefixCls,a=i===void 0?"rc-input-number":i,o=n.value,s=n.prefix,l=n.suffix,u=n.addonBefore,d=n.addonAfter,h=n.className,v=n.classNames,m=vt(n,xd),y=c.useRef(null),S=c.useRef(null),g=c.useRef(null),f=function(A){g.current&&Zl(g.current,A)};return c.useImperativeHandle(t,function(){return gd(g.current,{nativeElement:y.current.nativeElement||S.current})}),c.createElement(ql,{className:h,triggerFocus:f,prefixCls:a,value:o,disabled:e,style:r,prefix:s,suffix:l,addonAfter:d,addonBefore:u,classNames:v,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:y},c.createElement(Ed,Te({prefixCls:a,disabled:e,ref:g,domRef:S,className:v==null?void 0:v.input},m)))});const wd=n=>{var t;const e=(t=n.handleVisible)!==null&&t!==void 0?t:"auto";return Object.assign(Object.assign({},Ql(n)),{controlWidth:90,handleWidth:n.controlHeightSM-n.lineWidth*2,handleFontSize:n.fontSize/2,handleVisible:e,handleActiveBg:n.colorFillAlter,handleBg:n.colorBgContainer,filledHandleBg:new Yt(n.colorFillSecondary).onBackground(n.colorBgContainer).toHexString(),handleHoverColor:n.colorPrimary,handleBorderColor:n.colorBorder,handleOpacity:e===!0?1:0})},Ga=(n,t)=>{let{componentCls:e,borderRadiusSM:r,borderRadiusLG:i}=n;const a=t==="lg"?i:r;return{[`&-${t}`]:{[`${e}-handler-wrap`]:{borderStartEndRadius:a,borderEndEndRadius:a},[`${e}-handler-up`]:{borderStartEndRadius:a},[`${e}-handler-down`]:{borderEndEndRadius:a}}}},Md=n=>{const{componentCls:t,lineWidth:e,lineType:r,borderRadius:i,inputFontSizeSM:a,inputFontSizeLG:o,controlHeightLG:s,controlHeightSM:l,colorError:u,paddingInlineSM:d,paddingBlockSM:h,paddingBlockLG:v,paddingInlineLG:m,colorTextDescription:y,motionDurationMid:S,handleHoverColor:g,handleOpacity:f,paddingInline:b,paddingBlock:A,handleBg:x,handleActiveBg:E,colorTextDisabled:R,borderRadiusSM:M,borderRadiusLG:O,controlWidth:$,handleBorderColor:N,filledHandleBg:k,lineHeightLG:_,calc:j}=n;return[{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Vt(n)),Xo(n)),{display:"inline-block",width:$,margin:0,padding:0,borderRadius:i}),ec(n,{[`${t}-handler-wrap`]:{background:x,[`${t}-handler-down`]:{borderBlockStart:`${te(e)} ${r} ${N}`}}})),tc(n,{[`${t}-handler-wrap`]:{background:k,[`${t}-handler-down`]:{borderBlockStart:`${te(e)} ${r} ${N}`}},"&:focus-within":{[`${t}-handler-wrap`]:{background:x}}})),nc(n)),{"&-rtl":{direction:"rtl",[`${t}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:o,lineHeight:_,borderRadius:O,[`input${t}-input`]:{height:j(s).sub(j(e).mul(2)).equal(),padding:`${te(v)} ${te(m)}`}},"&-sm":{padding:0,fontSize:a,borderRadius:M,[`input${t}-input`]:{height:j(l).sub(j(e).mul(2)).equal(),padding:`${te(h)} ${te(d)}`}},"&-out-of-range":{[`${t}-input-wrap`]:{input:{color:u}}},"&-group":Object.assign(Object.assign(Object.assign({},Vt(n)),ic(n)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${t}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${t}-group-addon`]:{borderRadius:O,fontSize:n.fontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:M}}},ac(n)),oc(n)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${t}-input`]:{cursor:"not-allowed"},[t]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},Vt(n)),{width:"100%",padding:`${te(A)} ${te(b)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:i,outline:0,transition:`all ${S} linear`,appearance:"textfield",fontSize:"inherit"}),rc(n.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:n.handleWidth,opacity:1}})},{[t]:Object.assign(Object.assign(Object.assign({[`${t}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:0,opacity:f,height:"100%",borderStartStartRadius:0,borderStartEndRadius:i,borderEndEndRadius:i,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${S}`,overflow:"hidden",[`${t}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:n.handleFontSize}}},[`${t}-handler`]:{height:"50%",overflow:"hidden",color:y,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${te(e)} ${r} ${N}`,transition:`all ${S} linear`,"&:active":{background:E},"&:hover":{height:"60%",[`
              ${t}-handler-up-inner,
              ${t}-handler-down-inner
            `]:{color:g}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},zo()),{color:y,transition:`all ${S} linear`,userSelect:"none"})},[`${t}-handler-up`]:{borderStartEndRadius:i},[`${t}-handler-down`]:{borderEndEndRadius:i}},Ga(n,"lg")),Ga(n,"sm")),{"&-disabled, &-readonly":{[`${t}-handler-wrap`]:{display:"none"},[`${t}-input`]:{color:"inherit"}},[`
          ${t}-handler-up-disabled,
          ${t}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${t}-handler-up-disabled:hover &-handler-up-inner,
          ${t}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:R}})}]},Nd=n=>{const{componentCls:t,paddingBlock:e,paddingInline:r,inputAffixPadding:i,controlWidth:a,borderRadiusLG:o,borderRadiusSM:s,paddingInlineLG:l,paddingInlineSM:u,paddingBlockLG:d,paddingBlockSM:h,motionDurationMid:v}=n;return{[`${t}-affix-wrapper`]:Object.assign(Object.assign({[`input${t}-input`]:{padding:`${te(e)} 0`}},Xo(n)),{position:"relative",display:"inline-flex",alignItems:"center",width:a,padding:0,paddingInlineStart:r,"&-lg":{borderRadius:o,paddingInlineStart:l,[`input${t}-input`]:{padding:`${te(d)} 0`}},"&-sm":{borderRadius:s,paddingInlineStart:u,[`input${t}-input`]:{padding:`${te(h)} 0`}},[`&:not(${t}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${t}-disabled`]:{background:"transparent"},[`> div${t}`]:{width:"100%",border:"none",outline:"none",[`&${t}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${t}-handler-wrap`]:{zIndex:2},[t]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:i},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:r,marginInlineStart:i,transition:`margin ${v}`}},[`&:hover ${t}-handler-wrap, &-focused ${t}-handler-wrap`]:{width:n.handleWidth,opacity:1},[`&:hover ${t}-suffix`]:{marginInlineEnd:n.calc(n.handleWidth).add(r).equal()}})}},Od=cn("InputNumber",n=>{const t=qt(n,Jl(n));return[Md(t),Nd(t),Vo(t)]},wd,{unitless:{handleOpacity:!0}});var Id=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const Ss=c.forwardRef((n,t)=>{const{getPrefixCls:e,direction:r}=c.useContext(Rt),i=c.useRef(null);c.useImperativeHandle(t,()=>i.current);const{className:a,rootClassName:o,size:s,disabled:l,prefixCls:u,addonBefore:d,addonAfter:h,prefix:v,suffix:m,bordered:y,readOnly:S,status:g,controls:f,variant:b}=n,A=Id(n,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),x=e("input-number",u),E=er(x),[R,M,O]=Od(x,E),{compactSize:$,compactItemClassnames:N}=Fo(x,r);let k=c.createElement(dd,{className:`${x}-handler-up-inner`}),_=c.createElement(wl,{className:`${x}-handler-down-inner`});const j=typeof f=="boolean"?f:void 0;typeof f=="object"&&(k=typeof f.upIcon>"u"?k:c.createElement("span",{className:`${x}-handler-up-inner`},f.upIcon),_=typeof f.downIcon>"u"?_:c.createElement("span",{className:`${x}-handler-down-inner`},f.downIcon));const{hasFeedback:D,status:P,isFormItemInput:H,feedbackIcon:V}=c.useContext(da),q=lc(P,g),K=hi(U=>{var W;return(W=s??$)!==null&&W!==void 0?W:U}),ue=c.useContext(di),G=l??ue,[Z,Q]=sc("inputNumber",b,y),ne=D&&c.createElement(c.Fragment,null,V),X=re({[`${x}-lg`]:K==="large",[`${x}-sm`]:K==="small",[`${x}-rtl`]:r==="rtl",[`${x}-in-form-item`]:H},M),ee=`${x}-group`,se=c.createElement(Ad,Object.assign({ref:i,disabled:G,className:re(O,E,a,o,N),upHandler:k,downHandler:_,prefixCls:x,readOnly:S,controls:j,prefix:v,suffix:ne||m,addonBefore:d&&c.createElement(ea,{form:!0,space:!0},d),addonAfter:h&&c.createElement(ea,{form:!0,space:!0},h),classNames:{input:X,variant:re({[`${x}-${Z}`]:Q},ta(x,q,D)),affixWrapper:re({[`${x}-affix-wrapper-sm`]:K==="small",[`${x}-affix-wrapper-lg`]:K==="large",[`${x}-affix-wrapper-rtl`]:r==="rtl"},M),wrapper:re({[`${ee}-rtl`]:r==="rtl"},M),groupWrapper:re({[`${x}-group-wrapper-sm`]:K==="small",[`${x}-group-wrapper-lg`]:K==="large",[`${x}-group-wrapper-rtl`]:r==="rtl",[`${x}-group-wrapper-${Z}`]:Q},ta(`${x}-group-wrapper`,q,D),M)}},A));return R(se)}),Ca=Ss,Pd=n=>c.createElement(Ml,{theme:{components:{InputNumber:{handleVisible:!0}}}},c.createElement(Ss,Object.assign({},n)));Ca._InternalPanelDoNotUseOrYouWillBeFired=Pd;const Rn=n=>{let{prefixCls:t,min:e=0,max:r=100,value:i,onChange:a,className:o,formatter:s}=n;const l=`${t}-steppers`,[u,d]=c.useState(i);return c.useEffect(()=>{Number.isNaN(i)||d(i)},[i]),L.createElement(Ca,{className:re(l,o),min:e,max:r,value:u,formatter:s,size:"small",onChange:h=>{i||d(h||0),a==null||a(h)}})},Rd=n=>{let{prefixCls:t,value:e,onChange:r}=n;const i=`${t}-alpha-input`,[a,o]=c.useState(yt(e||"#000"));c.useEffect(()=>{e&&o(e)},[e]);const s=l=>{const u=a.toHsb();u.a=(l||0)/100;const d=yt(u);e||o(d),r==null||r(d)};return L.createElement(Rn,{value:ya(a),prefixCls:t,formatter:l=>`${l}%`,className:i,onChange:s})},kd=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,_d=n=>kd.test(`#${n}`),Td=n=>{let{prefixCls:t,value:e,onChange:r}=n;const i=`${t}-hex-input`,[a,o]=c.useState(()=>e?gr(e.toHexString()):void 0);c.useEffect(()=>{e&&o(gr(e.toHexString()))},[e]);const s=l=>{const u=l.target.value;o(gr(u)),_d(gr(u,!0))&&(r==null||r(yt(u)))};return L.createElement(yi,{className:i,value:a,prefix:"#",onChange:s,size:"small"})},$d=n=>{let{prefixCls:t,value:e,onChange:r}=n;const i=`${t}-hsb-input`,[a,o]=c.useState(yt(e||"#000"));c.useEffect(()=>{e&&o(e)},[e]);const s=(l,u)=>{const d=a.toHsb();d[u]=u==="h"?l:(l||0)/100;const h=yt(d);e||o(h),r==null||r(h)};return L.createElement("div",{className:i},L.createElement(Rn,{max:360,min:0,value:Number(a.toHsb().h),prefixCls:t,className:i,formatter:l=>ti(l||0).toString(),onChange:l=>s(Number(l),"h")}),L.createElement(Rn,{max:100,min:0,value:Number(a.toHsb().s)*100,prefixCls:t,className:i,formatter:l=>`${ti(l||0)}%`,onChange:l=>s(Number(l),"s")}),L.createElement(Rn,{max:100,min:0,value:Number(a.toHsb().b)*100,prefixCls:t,className:i,formatter:l=>`${ti(l||0)}%`,onChange:l=>s(Number(l),"b")}))},Dd=n=>{let{prefixCls:t,value:e,onChange:r}=n;const i=`${t}-rgb-input`,[a,o]=c.useState(yt(e||"#000"));c.useEffect(()=>{e&&o(e)},[e]);const s=(l,u)=>{const d=a.toRgb();d[u]=l||0;const h=yt(d);e||o(h),r==null||r(h)};return L.createElement("div",{className:i},L.createElement(Rn,{max:255,min:0,value:Number(a.toRgb().r),prefixCls:t,className:i,onChange:l=>s(Number(l),"r")}),L.createElement(Rn,{max:255,min:0,value:Number(a.toRgb().g),prefixCls:t,className:i,onChange:l=>s(Number(l),"g")}),L.createElement(Rn,{max:255,min:0,value:Number(a.toRgb().b),prefixCls:t,className:i,onChange:l=>s(Number(l),"b")}))},Ld=[bn.hex,bn.hsb,bn.rgb].map(n=>({value:n,label:n.toLocaleUpperCase()})),zd=n=>{const{prefixCls:t,format:e,value:r,disabledAlpha:i,onFormatChange:a,onChange:o}=n,[s,l]=Ot(bn.hex,{value:e,onChange:a}),u=`${t}-input`,d=v=>{l(v)},h=c.useMemo(()=>{const v={value:r,prefixCls:t,onChange:o};switch(s){case bn.hsb:return L.createElement($d,Object.assign({},v));case bn.rgb:return L.createElement(Dd,Object.assign({},v));default:return L.createElement(Td,Object.assign({},v))}},[s,t,r,o]);return L.createElement("div",{className:`${u}-container`},L.createElement(Yo,{value:s,variant:"borderless",getPopupContainer:v=>v,popupMatchSelectWidth:68,placement:"bottomRight",onChange:d,className:`${t}-format-select`,size:"small",options:Ld}),L.createElement("div",{className:u},h),!i&&L.createElement(Rd,{prefixCls:t,value:r,onChange:o}))};function ra(n,t,e){return(n-t)/(e-t)}function xa(n,t,e,r){var i=ra(t,e,r),a={};switch(n){case"rtl":a.right="".concat(i*100,"%"),a.transform="translateX(50%)";break;case"btt":a.bottom="".concat(i*100,"%"),a.transform="translateY(50%)";break;case"ttb":a.top="".concat(i*100,"%"),a.transform="translateY(-50%)";break;default:a.left="".concat(i*100,"%"),a.transform="translateX(-50%)";break}return a}function On(n,t){return Array.isArray(n)?n[t]:n}var Tn=c.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),Cs=c.createContext({}),jd=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],Wa=c.forwardRef(function(n,t){var e=n.prefixCls,r=n.value,i=n.valueIndex,a=n.onStartMove,o=n.onDelete,s=n.style,l=n.render,u=n.dragging,d=n.draggingDelete,h=n.onOffsetChange,v=n.onChangeComplete,m=n.onFocus,y=n.onMouseEnter,S=vt(n,jd),g=c.useContext(Tn),f=g.min,b=g.max,A=g.direction,x=g.disabled,E=g.keyboard,R=g.range,M=g.tabIndex,O=g.ariaLabelForHandle,$=g.ariaLabelledByForHandle,N=g.ariaRequired,k=g.ariaValueTextFormatterForHandle,_=g.styles,j=g.classNames,D="".concat(e,"-handle"),P=function(X){x||a(X,i)},H=function(X){m==null||m(X,i)},V=function(X){y(X,i)},q=function(X){if(!x&&E){var ee=null;switch(X.which||X.keyCode){case it.LEFT:ee=A==="ltr"||A==="btt"?-1:1;break;case it.RIGHT:ee=A==="ltr"||A==="btt"?1:-1;break;case it.UP:ee=A!=="ttb"?1:-1;break;case it.DOWN:ee=A!=="ttb"?-1:1;break;case it.HOME:ee="min";break;case it.END:ee="max";break;case it.PAGE_UP:ee=2;break;case it.PAGE_DOWN:ee=-2;break;case it.BACKSPACE:case it.DELETE:o(i);break}ee!==null&&(X.preventDefault(),h(ee,i))}},K=function(X){switch(X.which||X.keyCode){case it.LEFT:case it.RIGHT:case it.UP:case it.DOWN:case it.HOME:case it.END:case it.PAGE_UP:case it.PAGE_DOWN:v==null||v();break}},ue=xa(A,r,f,b),G={};if(i!==null){var Z;G={tabIndex:x?null:On(M,i),role:"slider","aria-valuemin":f,"aria-valuemax":b,"aria-valuenow":r,"aria-disabled":x,"aria-label":On(O,i),"aria-labelledby":On($,i),"aria-required":On(N,i),"aria-valuetext":(Z=On(k,i))===null||Z===void 0?void 0:Z(r),"aria-orientation":A==="ltr"||A==="rtl"?"horizontal":"vertical",onMouseDown:P,onTouchStart:P,onFocus:H,onMouseEnter:V,onKeyDown:q,onKeyUp:K}}var Q=c.createElement("div",Te({ref:t,className:re(D,le(le(le({},"".concat(D,"-").concat(i+1),i!==null&&R),"".concat(D,"-dragging"),u),"".concat(D,"-dragging-delete"),d),j.handle),style:ce(ce(ce({},ue),s),_.handle)},G,S));return l&&(Q=l(Q,{index:i,prefixCls:e,value:r,dragging:u,draggingDelete:d})),Q}),Bd=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Hd=c.forwardRef(function(n,t){var e=n.prefixCls,r=n.style,i=n.onStartMove,a=n.onOffsetChange,o=n.values,s=n.handleRender,l=n.activeHandleRender,u=n.draggingIndex,d=n.draggingDelete,h=n.onFocus,v=vt(n,Bd),m=c.useRef({}),y=c.useState(!1),S=de(y,2),g=S[0],f=S[1],b=c.useState(-1),A=de(b,2),x=A[0],E=A[1],R=function(k){E(k),f(!0)},M=function(k,_){R(_),h==null||h(k)},O=function(k,_){R(_)};c.useImperativeHandle(t,function(){return{focus:function(k){var _;(_=m.current[k])===null||_===void 0||_.focus()},hideHelp:function(){Nl.flushSync(function(){f(!1)})}}});var $=ce({prefixCls:e,onStartMove:i,onOffsetChange:a,render:s,onFocus:M,onMouseEnter:O},v);return c.createElement(c.Fragment,null,o.map(function(N,k){var _=u===k;return c.createElement(Wa,Te({ref:function(D){D?m.current[k]=D:delete m.current[k]},dragging:_,draggingDelete:_&&d,style:On(r,k),key:k,value:N,valueIndex:k},$))}),l&&g&&c.createElement(Wa,Te({key:"a11y"},$,{value:o[x],valueIndex:null,dragging:u!==-1,draggingDelete:d,render:l,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),Vd=function(t){var e=t.prefixCls,r=t.style,i=t.children,a=t.value,o=t.onClick,s=c.useContext(Tn),l=s.min,u=s.max,d=s.direction,h=s.includedStart,v=s.includedEnd,m=s.included,y="".concat(e,"-text"),S=xa(d,a,l,u);return c.createElement("span",{className:re(y,le({},"".concat(y,"-active"),m&&h<=a&&a<=v)),style:ce(ce({},S),r),onMouseDown:function(f){f.stopPropagation()},onClick:function(){o(a)}},i)},Fd=function(t){var e=t.prefixCls,r=t.marks,i=t.onClick,a="".concat(e,"-mark");return r.length?c.createElement("div",{className:a},r.map(function(o){var s=o.value,l=o.style,u=o.label;return c.createElement(Vd,{key:s,prefixCls:a,style:l,value:s,onClick:i},u)})):null},Ud=function(t){var e=t.prefixCls,r=t.value,i=t.style,a=t.activeStyle,o=c.useContext(Tn),s=o.min,l=o.max,u=o.direction,d=o.included,h=o.includedStart,v=o.includedEnd,m="".concat(e,"-dot"),y=d&&h<=r&&r<=v,S=ce(ce({},xa(u,r,s,l)),typeof i=="function"?i(r):i);return y&&(S=ce(ce({},S),typeof a=="function"?a(r):a)),c.createElement("span",{className:re(m,le({},"".concat(m,"-active"),y)),style:S})},Gd=function(t){var e=t.prefixCls,r=t.marks,i=t.dots,a=t.style,o=t.activeStyle,s=c.useContext(Tn),l=s.min,u=s.max,d=s.step,h=c.useMemo(function(){var v=new Set;if(r.forEach(function(y){v.add(y.value)}),i&&d!==null)for(var m=l;m<=u;)v.add(m),m+=d;return Array.from(v)},[l,u,d,i,r]);return c.createElement("div",{className:"".concat(e,"-step")},h.map(function(v){return c.createElement(Ud,{prefixCls:e,key:v,value:v,style:a,activeStyle:o})}))},Xa=function(t){var e=t.prefixCls,r=t.style,i=t.start,a=t.end,o=t.index,s=t.onStartMove,l=t.replaceCls,u=c.useContext(Tn),d=u.direction,h=u.min,v=u.max,m=u.disabled,y=u.range,S=u.classNames,g="".concat(e,"-track"),f=ra(i,h,v),b=ra(a,h,v),A=function(M){!m&&s&&s(M,-1)},x={};switch(d){case"rtl":x.right="".concat(f*100,"%"),x.width="".concat(b*100-f*100,"%");break;case"btt":x.bottom="".concat(f*100,"%"),x.height="".concat(b*100-f*100,"%");break;case"ttb":x.top="".concat(f*100,"%"),x.height="".concat(b*100-f*100,"%");break;default:x.left="".concat(f*100,"%"),x.width="".concat(b*100-f*100,"%")}var E=l||re(g,le(le({},"".concat(g,"-").concat(o+1),o!==null&&y),"".concat(e,"-track-draggable"),s),S.track);return c.createElement("div",{className:E,style:ce(ce({},x),r),onMouseDown:A,onTouchStart:A})},Wd=function(t){var e=t.prefixCls,r=t.style,i=t.values,a=t.startPoint,o=t.onStartMove,s=c.useContext(Tn),l=s.included,u=s.range,d=s.min,h=s.styles,v=s.classNames,m=c.useMemo(function(){if(!u){if(i.length===0)return[];var S=a??d,g=i[0];return[{start:Math.min(S,g),end:Math.max(S,g)}]}for(var f=[],b=0;b<i.length-1;b+=1)f.push({start:i[b],end:i[b+1]});return f},[i,u,a,d]);if(!l)return null;var y=m!=null&&m.length&&(v.tracks||h.tracks)?c.createElement(Xa,{index:null,prefixCls:e,start:m[0].start,end:m[m.length-1].end,replaceCls:re(v.tracks,"".concat(e,"-tracks")),style:h.tracks}):null;return c.createElement(c.Fragment,null,y,m.map(function(S,g){var f=S.start,b=S.end;return c.createElement(Xa,{index:g,prefixCls:e,style:ce(ce({},On(r,g)),h.track),start:f,end:b,key:g,onStartMove:o})}))},Xd=130;function Ya(n){var t="targetTouches"in n?n.targetTouches[0]:n;return{pageX:t.pageX,pageY:t.pageY}}function Yd(n,t,e,r,i,a,o,s,l,u,d){var h=c.useState(null),v=de(h,2),m=v[0],y=v[1],S=c.useState(-1),g=de(S,2),f=g[0],b=g[1],A=c.useState(!1),x=de(A,2),E=x[0],R=x[1],M=c.useState(e),O=de(M,2),$=O[0],N=O[1],k=c.useState(e),_=de(k,2),j=_[0],D=_[1],P=c.useRef(null),H=c.useRef(null),V=c.useRef(null),q=c.useContext(Cs),K=q.onDragStart,ue=q.onDragChange;mi(function(){f===-1&&N(e)},[e,f]),c.useEffect(function(){return function(){document.removeEventListener("mousemove",P.current),document.removeEventListener("mouseup",H.current),V.current&&(V.current.removeEventListener("touchmove",P.current),V.current.removeEventListener("touchend",H.current))}},[]);var G=function(ee,se,U){se!==void 0&&y(se),N(ee);var W=ee;U&&(W=ee.filter(function(Y,ae){return ae!==f})),o(W),ue&&ue({rawValues:ee,deleteIndex:U?f:-1,draggingIndex:f,draggingValue:se})},Z=Xt(function(X,ee,se){if(X===-1){var U=j[0],W=j[j.length-1],Y=r-U,ae=i-W,fe=ee*(i-r);fe=Math.max(fe,Y),fe=Math.min(fe,ae);var Re=a(U+fe);fe=Re-U;var Le=j.map(function(Ce){return Ce+fe});G(Le)}else{var Ne=(i-r)*ee,qe=ht($);qe[X]=j[X];var ge=l(qe,Ne,X,"dist");G(ge.values,ge.value,se)}}),Q=function(ee,se,U){ee.stopPropagation();var W=U||e,Y=W[se];b(se),y(Y),D(W),N(W),R(!1);var ae=Ya(ee),fe=ae.pageX,Re=ae.pageY,Le=!1;K&&K({rawValues:W,draggingIndex:se,draggingValue:Y});var Ne=function(Ce){Ce.preventDefault();var ve=Ya(Ce),Oe=ve.pageX,_e=ve.pageY,tt=Oe-fe,Be=_e-Re,xe=n.current.getBoundingClientRect(),Ie=xe.width,Xe=xe.height,ut,Ve;switch(t){case"btt":ut=-Be/Xe,Ve=tt;break;case"ttb":ut=Be/Xe,Ve=tt;break;case"rtl":ut=-tt/Ie,Ve=Be;break;default:ut=tt/Ie,Ve=Be}Le=u?Math.abs(Ve)>Xd&&d<$.length:!1,R(Le),Z(se,ut,Le)},qe=function ge(Ce){Ce.preventDefault(),document.removeEventListener("mouseup",ge),document.removeEventListener("mousemove",Ne),V.current&&(V.current.removeEventListener("touchmove",P.current),V.current.removeEventListener("touchend",H.current)),P.current=null,H.current=null,V.current=null,s(Le),b(-1),R(!1)};document.addEventListener("mouseup",qe),document.addEventListener("mousemove",Ne),ee.currentTarget.addEventListener("touchend",qe),ee.currentTarget.addEventListener("touchmove",Ne),P.current=Ne,H.current=qe,V.current=ee.currentTarget},ne=c.useMemo(function(){var X=ht(e).sort(function(Y,ae){return Y-ae}),ee=ht($).sort(function(Y,ae){return Y-ae}),se={};ee.forEach(function(Y){se[Y]=(se[Y]||0)+1}),X.forEach(function(Y){se[Y]=(se[Y]||0)-1});var U=u?1:0,W=Object.values(se).reduce(function(Y,ae){return Y+Math.abs(ae)},0);return W<=U?$:e},[e,$,u]);return[f,m,E,ne,Q]}function Kd(n,t,e,r,i,a){var o=c.useCallback(function(m){return Math.max(n,Math.min(t,m))},[n,t]),s=c.useCallback(function(m){if(e!==null){var y=n+Math.round((o(m)-n)/e)*e,S=function(A){return(String(A).split(".")[1]||"").length},g=Math.max(S(e),S(t),S(n)),f=Number(y.toFixed(g));return n<=f&&f<=t?f:null}return null},[e,n,t,o]),l=c.useCallback(function(m){var y=o(m),S=r.map(function(b){return b.value});e!==null&&S.push(s(m)),S.push(n,t);var g=S[0],f=t-n;return S.forEach(function(b){var A=Math.abs(y-b);A<=f&&(g=b,f=A)}),g},[n,t,r,e,o,s]),u=function m(y,S,g){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof S=="number"){var b,A=y[g],x=A+S,E=[];r.forEach(function(N){E.push(N.value)}),E.push(n,t),E.push(s(A));var R=S>0?1:-1;f==="unit"?E.push(s(A+R*e)):E.push(s(x)),E=E.filter(function(N){return N!==null}).filter(function(N){return S<0?N<=A:N>=A}),f==="unit"&&(E=E.filter(function(N){return N!==A}));var M=f==="unit"?A:x;b=E[0];var O=Math.abs(b-M);if(E.forEach(function(N){var k=Math.abs(N-M);k<O&&(b=N,O=k)}),b===void 0)return S<0?n:t;if(f==="dist")return b;if(Math.abs(S)>1){var $=ht(y);return $[g]=b,m($,S-R,g,f)}return b}else{if(S==="min")return n;if(S==="max")return t}},d=function(y,S,g){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",b=y[g],A=u(y,S,g,f);return{value:A,changed:A!==b}},h=function(y){return a===null&&y===0||typeof a=="number"&&y<a},v=function(y,S,g){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",b=y.map(l),A=b[g],x=u(b,S,g,f);if(b[g]=x,i===!1){var E=a||0;g>0&&b[g-1]!==A&&(b[g]=Math.max(b[g],b[g-1]+E)),g<b.length-1&&b[g+1]!==A&&(b[g]=Math.min(b[g],b[g+1]-E))}else if(typeof a=="number"||a===null){for(var R=g+1;R<b.length;R+=1)for(var M=!0;h(b[R]-b[R-1])&&M;){var O=d(b,1,R);b[R]=O.value,M=O.changed}for(var $=g;$>0;$-=1)for(var N=!0;h(b[$]-b[$-1])&&N;){var k=d(b,-1,$-1);b[$-1]=k.value,N=k.changed}for(var _=b.length-1;_>0;_-=1)for(var j=!0;h(b[_]-b[_-1])&&j;){var D=d(b,-1,_-1);b[_-1]=D.value,j=D.changed}for(var P=0;P<b.length-1;P+=1)for(var H=!0;h(b[P+1]-b[P])&&H;){var V=d(b,1,P+1);b[P+1]=V.value,H=V.changed}}return{value:b[g],values:b}};return[l,v]}function qd(n){return c.useMemo(function(){if(n===!0||!n)return[!!n,!1,!1,0];var t=n.editable,e=n.draggableTrack,r=n.minCount,i=n.maxCount;return[!0,t,!t&&e,r||0,i]},[n])}var Zd=c.forwardRef(function(n,t){var e=n.prefixCls,r=e===void 0?"rc-slider":e,i=n.className,a=n.style,o=n.classNames,s=n.styles,l=n.id,u=n.disabled,d=u===void 0?!1:u,h=n.keyboard,v=h===void 0?!0:h,m=n.autoFocus,y=n.onFocus,S=n.onBlur,g=n.min,f=g===void 0?0:g,b=n.max,A=b===void 0?100:b,x=n.step,E=x===void 0?1:x,R=n.value,M=n.defaultValue,O=n.range,$=n.count,N=n.onChange,k=n.onBeforeChange,_=n.onAfterChange,j=n.onChangeComplete,D=n.allowCross,P=D===void 0?!0:D,H=n.pushable,V=H===void 0?!1:H,q=n.reverse,K=n.vertical,ue=n.included,G=ue===void 0?!0:ue,Z=n.startPoint,Q=n.trackStyle,ne=n.handleStyle,X=n.railStyle,ee=n.dotStyle,se=n.activeDotStyle,U=n.marks,W=n.dots,Y=n.handleRender,ae=n.activeHandleRender,fe=n.track,Re=n.tabIndex,Le=Re===void 0?0:Re,Ne=n.ariaLabelForHandle,qe=n.ariaLabelledByForHandle,ge=n.ariaRequired,Ce=n.ariaValueTextFormatterForHandle,ve=c.useRef(null),Oe=c.useRef(null),_e=c.useMemo(function(){return K?q?"ttb":"btt":q?"rtl":"ltr"},[q,K]),tt=qd(O),Be=de(tt,5),xe=Be[0],Ie=Be[1],Xe=Be[2],ut=Be[3],Ve=Be[4],Se=c.useMemo(function(){return isFinite(f)?f:0},[f]),Ze=c.useMemo(function(){return isFinite(A)?A:100},[A]),nt=c.useMemo(function(){return E!==null&&E<=0?1:E},[E]),bt=c.useMemo(function(){return typeof V=="boolean"?V?nt:!1:V>=0?V:!1},[V,nt]),gt=c.useMemo(function(){return Object.keys(U||{}).map(function(je){var w=U[je],T={value:Number(je)};return w&&xn(w)==="object"&&!c.isValidElement(w)&&("label"in w||"style"in w)?(T.style=w.style,T.label=w.label):T.label=w,T}).filter(function(je){var w=je.label;return w||typeof w=="number"}).sort(function(je,w){return je.value-w.value})},[U]),Ut=Kd(Se,Ze,nt,gt,P,bt),Je=de(Ut,2),rt=Je[0],mt=Je[1],hn=Ot(M,{value:R}),Gt=de(hn,2),Ue=Gt[0],ze=Gt[1],ie=c.useMemo(function(){var je=Ue==null?[]:Array.isArray(Ue)?Ue:[Ue],w=de(je,1),T=w[0],F=T===void 0?Se:T,J=Ue===null?[]:[F];if(xe){if(J=ht(je),$||Ue===void 0){var ke=$>=0?$+1:2;for(J=J.slice(0,ke);J.length<ke;){var pe;J.push((pe=J[J.length-1])!==null&&pe!==void 0?pe:Se)}}J.sort(function($e,He){return $e-He})}return J.forEach(function($e,He){J[He]=rt($e)}),J},[Ue,xe,Se,$,rt]),oe=function(w){return xe?w:w[0]},ye=Xt(function(je){var w=ht(je).sort(function(T,F){return T-F});N&&!Uo(w,ie,!0)&&N(oe(w)),ze(w)}),he=Xt(function(je){je&&ve.current.hideHelp();var w=oe(ie);_==null||_(w),ai(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),j==null||j(w)}),wt=function(w){if(!(d||!Ie||ie.length<=ut)){var T=ht(ie);T.splice(w,1),k==null||k(oe(T)),ye(T);var F=Math.max(0,w-1);ve.current.hideHelp(),ve.current.focus(F)}},kt=Yd(Oe,_e,ie,Se,Ze,rt,ye,he,mt,Ie,ut),St=de(kt,5),ir=St[0],Ir=St[1],wi=St[2],ar=St[3],or=St[4],sr=function(w,T){if(!d){var F=ht(ie),J=0,ke=0,pe=Ze-Se;ie.forEach(function(Ge,Ct){var Tt=Math.abs(w-Ge);Tt<=pe&&(pe=Tt,J=Ct),Ge<w&&(ke=Ct)});var $e=J;Ie&&pe!==0&&(!Ve||ie.length<Ve)?(F.splice(ke+1,0,w),$e=ke+1):F[J]=w,xe&&!ie.length&&$===void 0&&F.push(w);var He=oe(F);if(k==null||k(He),ye(F),T){var dt,Qe;(dt=document.activeElement)===null||dt===void 0||(Qe=dt.blur)===null||Qe===void 0||Qe.call(dt),ve.current.focus($e),or(T,$e,F)}else _==null||_(He),ai(!_,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),j==null||j(He)}},$n=function(w){w.preventDefault();var T=Oe.current.getBoundingClientRect(),F=T.width,J=T.height,ke=T.left,pe=T.top,$e=T.bottom,He=T.right,dt=w.clientX,Qe=w.clientY,Ge;switch(_e){case"btt":Ge=($e-Qe)/J;break;case"ttb":Ge=(Qe-pe)/J;break;case"rtl":Ge=(He-dt)/F;break;default:Ge=(dt-ke)/F}var Ct=Se+Ge*(Ze-Se);sr(rt(Ct),w)},pn=c.useState(null),Pr=de(pn,2),_t=Pr[0],Rr=Pr[1],tn=function(w,T){if(!d){var F=mt(ie,w,T);k==null||k(oe(ie)),ye(F.values),Rr(F.value)}};c.useEffect(function(){if(_t!==null){var je=ie.indexOf(_t);je>=0&&ve.current.focus(je)}Rr(null)},[_t]);var kr=c.useMemo(function(){return Xe&&nt===null?!1:Xe},[Xe,nt]),_r=Xt(function(je,w){or(je,w),k==null||k(oe(ie))}),En=ir!==-1;c.useEffect(function(){if(!En){var je=ie.lastIndexOf(Ir);ve.current.focus(je)}},[En]);var nn=c.useMemo(function(){return ht(ar).sort(function(je,w){return je-w})},[ar]),Tr=c.useMemo(function(){return xe?[nn[0],nn[nn.length-1]]:[Se,nn[0]]},[nn,xe,Se]),lr=de(Tr,2),cr=lr[0],gn=lr[1];c.useImperativeHandle(t,function(){return{focus:function(){ve.current.focus(0)},blur:function(){var w,T=document,F=T.activeElement;(w=Oe.current)!==null&&w!==void 0&&w.contains(F)&&(F==null||F.blur())}}}),c.useEffect(function(){m&&ve.current.focus(0)},[]);var $r=c.useMemo(function(){return{min:Se,max:Ze,direction:_e,disabled:d,keyboard:v,step:nt,included:G,includedStart:cr,includedEnd:gn,range:xe,tabIndex:Le,ariaLabelForHandle:Ne,ariaLabelledByForHandle:qe,ariaRequired:ge,ariaValueTextFormatterForHandle:Ce,styles:s||{},classNames:o||{}}},[Se,Ze,_e,d,v,nt,G,cr,gn,xe,Le,Ne,qe,ge,Ce,s,o]);return c.createElement(Tn.Provider,{value:$r},c.createElement("div",{ref:Oe,className:re(r,i,le(le(le(le({},"".concat(r,"-disabled"),d),"".concat(r,"-vertical"),K),"".concat(r,"-horizontal"),!K),"".concat(r,"-with-marks"),gt.length)),style:a,onMouseDown:$n,id:l},c.createElement("div",{className:re("".concat(r,"-rail"),o==null?void 0:o.rail),style:ce(ce({},X),s==null?void 0:s.rail)}),fe!==!1&&c.createElement(Wd,{prefixCls:r,style:Q,values:ie,startPoint:Z,onStartMove:kr?_r:void 0}),c.createElement(Gd,{prefixCls:r,marks:gt,dots:W,style:ee,activeStyle:se}),c.createElement(Hd,{ref:ve,prefixCls:r,style:ne,values:ar,draggingIndex:ir,draggingDelete:wi,onStartMove:_r,onOffsetChange:tn,onFocus:y,onBlur:S,handleRender:Y,activeHandleRender:ae,onChangeComplete:he,onDelete:Ie?wt:void 0}),c.createElement(Fd,{prefixCls:r,marks:gt,onClick:sr})))});const Ka=c.forwardRef((n,t)=>{const{open:e,draggingDelete:r}=n,i=c.useRef(null),a=e&&!r,o=c.useRef(null);function s(){Zt.cancel(o.current),o.current=null}function l(){o.current=Zt(()=>{var u;(u=i.current)===null||u===void 0||u.forceAlign(),o.current=null})}return c.useEffect(()=>(a?l():s(),s),[a,n.title]),c.createElement($o,Object.assign({ref:fi(i,t)},n,{open:a}))}),Qd=n=>{const{componentCls:t,antCls:e,controlSize:r,dotSize:i,marginFull:a,marginPart:o,colorFillContentHover:s,handleColorDisabled:l,calc:u,handleSize:d,handleSizeHover:h,handleActiveColor:v,handleActiveOutlineColor:m,handleLineWidth:y,handleLineWidthHover:S,motionDurationMid:g}=n;return{[t]:Object.assign(Object.assign({},Vt(n)),{position:"relative",height:r,margin:`${te(o)} ${te(a)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${te(a)} ${te(o)}`},[`${t}-rail`]:{position:"absolute",backgroundColor:n.railBg,borderRadius:n.borderRadiusXS,transition:`background-color ${g}`},[`${t}-track,${t}-tracks`]:{position:"absolute",transition:`background-color ${g}`},[`${t}-track`]:{backgroundColor:n.trackBg,borderRadius:n.borderRadiusXS},[`${t}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${t}-rail`]:{backgroundColor:n.railHoverBg},[`${t}-track`]:{backgroundColor:n.trackHoverBg},[`${t}-dot`]:{borderColor:s},[`${t}-handle::after`]:{boxShadow:`0 0 0 ${te(y)} ${n.colorPrimaryBorderHover}`},[`${t}-dot-active`]:{borderColor:n.dotActiveBorderColor}},[`${t}-handle`]:{position:"absolute",width:d,height:d,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:u(y).mul(-1).equal(),insetBlockStart:u(y).mul(-1).equal(),width:u(d).add(u(y).mul(2)).equal(),height:u(d).add(u(y).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:d,height:d,backgroundColor:n.colorBgElevated,boxShadow:`0 0 0 ${te(y)} ${n.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${g},
            inset-block-start ${g},
            width ${g},
            height ${g},
            box-shadow ${g},
            outline ${g}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:u(h).sub(d).div(2).add(S).mul(-1).equal(),insetBlockStart:u(h).sub(d).div(2).add(S).mul(-1).equal(),width:u(h).add(u(S).mul(2)).equal(),height:u(h).add(u(S).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${te(S)} ${v}`,outline:`6px solid ${m}`,width:h,height:h,insetInlineStart:n.calc(d).sub(h).div(2).equal(),insetBlockStart:n.calc(d).sub(h).div(2).equal()}}},[`&-lock ${t}-handle`]:{"&::before, &::after":{transition:"none"}},[`${t}-mark`]:{position:"absolute",fontSize:n.fontSize},[`${t}-mark-text`]:{position:"absolute",display:"inline-block",color:n.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:n.colorText}},[`${t}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${t}-dot`]:{position:"absolute",width:i,height:i,backgroundColor:n.colorBgElevated,border:`${te(y)} solid ${n.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${n.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:n.dotActiveBorderColor}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-rail`]:{backgroundColor:`${n.railBg} !important`},[`${t}-track`]:{backgroundColor:`${n.trackBgDisabled} !important`},[`
          ${t}-dot
        `]:{backgroundColor:n.colorBgElevated,borderColor:n.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${t}-handle::after`]:{backgroundColor:n.colorBgElevated,cursor:"not-allowed",width:d,height:d,boxShadow:`0 0 0 ${te(y)} ${l}`,insetInlineStart:0,insetBlockStart:0},[`
          ${t}-mark-text,
          ${t}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${e}-tooltip-inner`]:{minWidth:"unset"}})}},xs=(n,t)=>{const{componentCls:e,railSize:r,handleSize:i,dotSize:a,marginFull:o,calc:s}=n,l=t?"paddingBlock":"paddingInline",u=t?"width":"height",d=t?"height":"width",h=t?"insetBlockStart":"insetInlineStart",v=t?"top":"insetInlineStart",m=s(r).mul(3).sub(i).div(2).equal(),y=s(i).sub(r).div(2).equal(),S=t?{borderWidth:`${te(y)} 0`,transform:`translateY(${te(s(y).mul(-1).equal())})`}:{borderWidth:`0 ${te(y)}`,transform:`translateX(${te(n.calc(y).mul(-1).equal())})`};return{[l]:r,[d]:s(r).mul(3).equal(),[`${e}-rail`]:{[u]:"100%",[d]:r},[`${e}-track,${e}-tracks`]:{[d]:r},[`${e}-track-draggable`]:Object.assign({},S),[`${e}-handle`]:{[h]:m},[`${e}-mark`]:{insetInlineStart:0,top:0,[v]:s(r).mul(3).add(t?0:o).equal(),[u]:"100%"},[`${e}-step`]:{insetInlineStart:0,top:0,[v]:r,[u]:"100%",[d]:r},[`${e}-dot`]:{position:"absolute",[h]:s(r).sub(a).div(2).equal()}}},Jd=n=>{const{componentCls:t,marginPartWithMark:e}=n;return{[`${t}-horizontal`]:Object.assign(Object.assign({},xs(n,!0)),{[`&${t}-with-marks`]:{marginBottom:e}})}},eh=n=>{const{componentCls:t}=n;return{[`${t}-vertical`]:Object.assign(Object.assign({},xs(n,!1)),{height:"100%"})}},th=n=>{const e=n.controlHeightLG/4,r=n.controlHeightSM/2,i=n.lineWidth+1,a=n.lineWidth+1*1.5,o=n.colorPrimary,s=new Yt(o).setAlpha(.2).toRgbString();return{controlSize:e,railSize:4,handleSize:e,handleSizeHover:r,dotSize:8,handleLineWidth:i,handleLineWidthHover:a,railBg:n.colorFillTertiary,railHoverBg:n.colorFillSecondary,trackBg:n.colorPrimaryBorder,trackHoverBg:n.colorPrimaryBorderHover,handleColor:n.colorPrimaryBorder,handleActiveColor:o,handleActiveOutlineColor:s,handleColorDisabled:new Yt(n.colorTextDisabled).onBackground(n.colorBgContainer).toHexShortString(),dotBorderColor:n.colorBorderSecondary,dotActiveBorderColor:n.colorPrimaryBorder,trackBgDisabled:n.colorBgContainerDisabled}},nh=cn("Slider",n=>{const t=qt(n,{marginPart:n.calc(n.controlHeight).sub(n.controlSize).div(2).equal(),marginFull:n.calc(n.controlSize).div(2).equal(),marginPartWithMark:n.calc(n.controlHeightLG).sub(n.controlSize).equal()});return[Qd(t),Jd(t),eh(t)]},th),Es=c.createContext({});function $i(){const[n,t]=c.useState(!1),e=c.useRef(),r=()=>{Zt.cancel(e.current)},i=a=>{r(),a?t(a):e.current=Zt(()=>{t(a)})};return c.useEffect(()=>r,[]),[n,i]}var rh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};function ih(n,t){return n||n===null?n:t||t===null?t:e=>typeof e=="number"?e.toString():""}const ah=L.forwardRef((n,t)=>{const{prefixCls:e,range:r,className:i,rootClassName:a,style:o,disabled:s,tooltipPrefixCls:l,tipFormatter:u,tooltipVisible:d,getTooltipPopupContainer:h,tooltipPlacement:v,tooltip:m={},onChangeComplete:y}=n,S=rh(n,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:g}=n,{direction:f,slider:b,getPrefixCls:A,getPopupContainer:x}=L.useContext(Rt),E=L.useContext(di),R=s??E,{handleRender:M,direction:O}=L.useContext(Es),N=(O||f)==="rtl",[k,_]=$i(),[j,D]=$i(),P=Object.assign({},m),{open:H,placement:V,getPopupContainer:q,prefixCls:K,formatter:ue}=P,G=H??d,Z=(k||j)&&G!==!1,Q=ih(ue,u),[ne,X]=$i(),ee=ge=>{y==null||y(ge),X(!1)},se=(ge,Ce)=>ge||(Ce?N?"left":"right":"top"),U=A("slider",e),[W,Y,ae]=nh(U),fe=re(i,b==null?void 0:b.className,a,{[`${U}-rtl`]:N,[`${U}-lock`]:ne},Y,ae);N&&!S.vertical&&(S.reverse=!S.reverse),L.useEffect(()=>{const ge=()=>{Zt(()=>{D(!1)},1)};return document.addEventListener("mouseup",ge),()=>{document.removeEventListener("mouseup",ge)}},[]);const Re=r&&!G,Le=M||((ge,Ce)=>{const{index:ve}=Ce,Oe=ge.props;function _e(Ie,Xe,ut){var Ve,Se,Ze,nt;ut&&((Se=(Ve=S)[Ie])===null||Se===void 0||Se.call(Ve,Xe)),(nt=(Ze=Oe)[Ie])===null||nt===void 0||nt.call(Ze,Xe)}const tt=Object.assign(Object.assign({},Oe),{onMouseEnter:Ie=>{_(!0),_e("onMouseEnter",Ie)},onMouseLeave:Ie=>{_(!1),_e("onMouseLeave",Ie)},onMouseDown:Ie=>{D(!0),X(!0),_e("onMouseDown",Ie)},onFocus:Ie=>{var Xe;D(!0),(Xe=S.onFocus)===null||Xe===void 0||Xe.call(S,Ie),_e("onFocus",Ie,!0)},onBlur:Ie=>{var Xe;D(!1),(Xe=S.onBlur)===null||Xe===void 0||Xe.call(S,Ie),_e("onBlur",Ie,!0)}}),Be=L.cloneElement(ge,tt),xe=(!!G||Z)&&Q!==null;return Re?Be:L.createElement(Ka,Object.assign({},P,{prefixCls:A("tooltip",K??l),title:Q?Q(Ce.value):"",open:xe,placement:se(V??v,g),key:ve,overlayClassName:`${U}-tooltip`,getPopupContainer:q||h||x}),Be)}),Ne=Re?(ge,Ce)=>{const ve=L.cloneElement(ge,{style:Object.assign(Object.assign({},ge.props.style),{visibility:"hidden"})});return L.createElement(Ka,Object.assign({},P,{prefixCls:A("tooltip",K??l),title:Q?Q(Ce.value):"",open:Q!==null&&Z,placement:se(V??v,g),key:"tooltip",overlayClassName:`${U}-tooltip`,getPopupContainer:q||h||x,draggingDelete:Ce.draggingDelete}),ve)}:void 0,qe=Object.assign(Object.assign({},b==null?void 0:b.style),o);return W(L.createElement(Zd,Object.assign({},S,{step:S.step,range:r,className:fe,style:qe,disabled:R,ref:t,prefixCls:U,handleRender:Le,activeHandleRender:Ne,onChangeComplete:ee})))});var oh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const As=n=>{const{prefixCls:t,colors:e,type:r,color:i,range:a=!1,className:o,activeIndex:s,onActive:l,onDragStart:u,onDragChange:d,onKeyDelete:h}=n,v=oh(n,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),m=Object.assign(Object.assign({},v),{track:!1}),y=c.useMemo(()=>`linear-gradient(90deg, ${e.map(R=>`${R.color} ${R.percent}%`).join(", ")})`,[e]),S=c.useMemo(()=>!i||!r?null:r==="alpha"?i.toRgbString():`hsl(${i.toHsb().h}, 100%, 50%)`,[i,r]),g=Xt(u),f=Xt(d),b=c.useMemo(()=>({onDragStart:g,onDragChange:f}),[]),A=Xt((E,R)=>{const{onFocus:M,style:O,className:$,onKeyDown:N}=E.props,k=Object.assign({},O);return r==="gradient"&&(k.background=vs(e,R.value)),c.cloneElement(E,{onFocus:_=>{l==null||l(R.index),M==null||M(_)},style:k,className:re($,{[`${t}-slider-handle-active`]:s===R.index}),onKeyDown:_=>{(_.key==="Delete"||_.key==="Backspace")&&h&&h(R.index),N==null||N(_)}})}),x=c.useMemo(()=>({direction:"ltr",handleRender:A}),[]);return c.createElement(Es.Provider,{value:x},c.createElement(Cs.Provider,{value:b},c.createElement(ah,Object.assign({},m,{className:re(o,`${t}-slider`),tooltip:{open:!1},range:{editable:a,minCount:2},styles:{rail:{background:y},handle:S?{background:S}:{}},classNames:{rail:`${t}-slider-rail`,handle:`${t}-slider-handle`}}))))},sh=n=>{const{value:t,onChange:e,onChangeComplete:r}=n,i=o=>e(o[0]),a=o=>r(o[0]);return c.createElement(As,Object.assign({},n,{value:[t],onChange:i,onChangeComplete:a}))};function qa(n){return ht(n).sort((t,e)=>t.percent-e.percent)}const lh=n=>{const{prefixCls:t,mode:e,onChange:r,onChangeComplete:i,onActive:a,activeIndex:o,onGradientDragging:s,colors:l}=n,u=e==="gradient",d=c.useMemo(()=>l.map(f=>({percent:f.percent,color:f.color.toRgbString()})),[l]),h=c.useMemo(()=>d.map(f=>f.percent),[d]),v=c.useRef(d),m=f=>{let{rawValues:b,draggingIndex:A,draggingValue:x}=f;if(b.length>d.length){const E=vs(d,x),R=ht(d);R.splice(A,0,{percent:x,color:E}),v.current=R}else v.current=d;s(!0),r(new zt(qa(v.current)),!0)},y=f=>{let{deleteIndex:b,draggingIndex:A,draggingValue:x}=f,E=ht(v.current);b!==-1?E.splice(b,1):(E[A]=Object.assign(Object.assign({},E[A]),{percent:x}),E=qa(E)),r(new zt(E),!0)},S=f=>{const b=ht(d);b.splice(f,1);const A=new zt(b);r(A),i(A)},g=f=>{i(new zt(d)),o>=f.length&&a(f.length-1),s(!1)};return u?c.createElement(As,{min:0,max:100,prefixCls:t,className:`${t}-gradient-slider`,colors:d,color:null,value:h,range:!0,onChangeComplete:g,disabled:!1,type:"gradient",activeIndex:o,onActive:a,onDragStart:m,onDragChange:y,onKeyDelete:S}):null},ch=c.memo(lh);var uh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const dh={slider:sh},Za=()=>{const n=c.useContext(ms),{mode:t,onModeChange:e,modeOptions:r,prefixCls:i,allowClear:a,value:o,disabledAlpha:s,onChange:l,onClear:u,onChangeComplete:d,activeIndex:h,gradientDragging:v}=n,m=uh(n,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),y=L.useMemo(()=>o.cleared?[{percent:0,color:new zt("")},{percent:100,color:new zt("")}]:o.getColors(),[o]),S=!o.isGradient(),[g,f]=L.useState(o);mi(()=>{var O;S||f((O=y[h])===null||O===void 0?void 0:O.color)},[v,h]);const b=L.useMemo(()=>{var O;return S?o:v?g:(O=y[h])===null||O===void 0?void 0:O.color},[o,h,S,g,v]),A=O=>{if(t==="single")return O;const $=ht(y);return $[h]=Object.assign(Object.assign({},$[h]),{color:O}),new zt($)},x=(O,$,N)=>{let _=yt(O);if(o.cleared){const j=_.toRgb();if(!j.r&&!j.g&&!j.b&&N){const{type:D,value:P=0}=N;_=new zt({h:D==="hue"?P:0,s:1,b:1,a:D==="alpha"?P/100:1})}else _=ni(_)}l(A(_),$)},E=O=>{d(A(O))};let R=null;const M=r.length>1;return(a||M)&&(R=L.createElement("div",{className:`${i}-operation`},M&&L.createElement(ld,{size:"small",options:r,value:t,onChange:e}),L.createElement(ys,Object.assign({prefixCls:i,value:o,onChange:O=>{l(O),u==null||u()}},m)))),L.createElement(L.Fragment,null,R,L.createElement(ch,Object.assign({},n,{colors:y})),L.createElement(Vu,{prefixCls:i,value:b==null?void 0:b.toHsb(),disabledAlpha:s,onChange:(O,$)=>{x(O,!0,$)},onChangeComplete:O=>{E(yt(O))},components:dh}),L.createElement(zd,Object.assign({value:b,onChange:x,prefixCls:i,disabledAlpha:s},m)))},Di=n=>n.map(t=>(t.colors=t.colors.map(yt),t)),hh=(n,t)=>{const{r:e,g:r,b:i,a}=n.toRgb(),o=new Ft(n.toRgbString()).onBackground(t).toHsv();return a<=.5?o.v>.5:e*.299+r*.587+i*.114>192},Qa=n=>{let{label:t}=n;return`panel-${t}`},ph=n=>{let{prefixCls:t,presets:e,value:r,onChange:i}=n;const[a]=pa("ColorPicker"),[,o]=Ol(),[s]=Ot(Di(e),{value:Di(e),postState:Di}),l=`${t}-presets`,u=c.useMemo(()=>s.reduce((v,m)=>{const{defaultOpen:y=!0}=m;return y&&v.push(Qa(m)),v},[]),[s]),d=v=>{i==null||i(v)},h=s.map(v=>{var m;return{key:Qa(v),label:L.createElement("div",{className:`${l}-label`},v==null?void 0:v.label),children:L.createElement("div",{className:`${l}-items`},Array.isArray(v==null?void 0:v.colors)&&((m=v.colors)===null||m===void 0?void 0:m.length)>0?v.colors.map((y,S)=>L.createElement(va,{key:`preset-${S}-${y.toHexString()}`,color:yt(y).toRgbString(),prefixCls:t,className:re(`${l}-color`,{[`${l}-color-checked`]:y.toHexString()===(r==null?void 0:r.toHexString()),[`${l}-color-bright`]:hh(y,o.colorBgElevated)}),onClick:()=>d(y)})):L.createElement("span",{className:`${l}-empty`},a.presetEmpty))}});return L.createElement("div",{className:l},L.createElement(Iu,{defaultActiveKey:u,ghost:!0,items:h}))},Ja=()=>{const{prefixCls:n,value:t,presets:e,onChange:r}=c.useContext(fs);return Array.isArray(e)?L.createElement(ph,{value:t,presets:e,prefixCls:n,onChange:r}):null},gh=n=>{const{prefixCls:t,presets:e,panelRender:r,value:i,onChange:a,onClear:o,allowClear:s,disabledAlpha:l,mode:u,onModeChange:d,modeOptions:h,onChangeComplete:v,activeIndex:m,onActive:y,format:S,onFormatChange:g,gradientDragging:f,onGradientDragging:b}=n,A=`${t}-inner`,x=L.useMemo(()=>({prefixCls:t,value:i,onChange:a,onClear:o,allowClear:s,disabledAlpha:l,mode:u,onModeChange:d,modeOptions:h,onChangeComplete:v,activeIndex:m,onActive:y,format:S,onFormatChange:g,gradientDragging:f,onGradientDragging:b}),[t,i,a,o,s,l,u,d,h,v,m,y,S,g,f,b]),E=L.useMemo(()=>({prefixCls:t,value:i,presets:e,onChange:a}),[t,i,e,a]),R=L.createElement("div",{className:`${A}-content`},L.createElement(Za,null),Array.isArray(e)&&L.createElement(Yu,null),L.createElement(Ja,null));return L.createElement(ms.Provider,{value:x},L.createElement(fs.Provider,{value:E},L.createElement("div",{className:A},typeof r=="function"?r(R,{components:{Picker:Za,Presets:Ja}}):R)))};var mh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const fh=c.forwardRef((n,t)=>{const{color:e,prefixCls:r,open:i,disabled:a,format:o,className:s,showText:l,activeIndex:u}=n,d=mh(n,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),h=`${r}-trigger`,v=`${h}-text`,m=`${v}-cell`,[y]=pa("ColorPicker"),S=L.useMemo(()=>{if(!l)return"";if(typeof l=="function")return l(e);if(e.cleared)return y.transparent;if(e.isGradient())return e.getColors().map((A,x)=>{const E=u!==-1&&u!==x;return L.createElement("span",{key:x,className:re(m,E&&`${m}-inactive`)},A.color.toRgbString()," ",A.percent,"%")});const f=e.toHexString().toUpperCase(),b=ya(e);switch(o){case"rgb":return e.toRgbString();case"hsb":return e.toHsbString();default:return b<100?`${f.slice(0,7)},${b}%`:f}},[e,o,l,u]),g=c.useMemo(()=>e.cleared?L.createElement(ys,{prefixCls:r}):L.createElement(va,{prefixCls:r,color:e.toCssString()}),[e,r]);return L.createElement("div",Object.assign({ref:t,className:re(h,s,{[`${h}-active`]:i,[`${h}-disabled`]:a})},Lo(d)),g,l&&L.createElement("div",{className:v},S))});function vh(n,t,e){const[r]=pa("ColorPicker"),[i,a]=Ot(n,{value:t}),[o,s]=c.useState("single"),[l,u]=c.useMemo(()=>{const S=(Array.isArray(e)?e:[e]).filter(A=>A);S.length||S.push("single");const g=new Set(S),f=[],b=(A,x)=>{g.has(A)&&f.push({label:x,value:A})};return b("single",r.singleColor),b("gradient",r.gradientColor),[f,g]},[e]),[d,h]=c.useState(null),v=Xt(S=>{h(S),a(S)}),m=c.useMemo(()=>{const S=yt(i||"");return S.equals(d)?d:S},[i,d]),y=c.useMemo(()=>{var S;return u.has(o)?o:(S=l[0])===null||S===void 0?void 0:S.value},[u,o,l]);return c.useEffect(()=>{s(m.isGradient()?"gradient":"single")},[m]),[m,v,y,s,l]}const ws=(n,t)=>({backgroundImage:`conic-gradient(${t} 0 25%, transparent 0 50%, ${t} 0 75%, transparent 0)`,backgroundSize:`${n} ${n}`}),eo=(n,t)=>{const{componentCls:e,borderRadiusSM:r,colorPickerInsetShadow:i,lineWidth:a,colorFillSecondary:o}=n;return{[`${e}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:r,width:t,height:t,boxShadow:i,flex:"none"},ws("50%",n.colorFillSecondary)),{[`${e}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${te(a)} ${o}`,borderRadius:"inherit"}})}},yh=n=>{const{componentCls:t,antCls:e,fontSizeSM:r,lineHeightSM:i,colorPickerAlphaInputWidth:a,marginXXS:o,paddingXXS:s,controlHeightSM:l,marginXS:u,fontSizeIcon:d,paddingXS:h,colorTextPlaceholder:v,colorPickerInputNumberHandleWidth:m,lineWidth:y}=n;return{[`${t}-input-container`]:{display:"flex",[`${t}-steppers${e}-input-number`]:{fontSize:r,lineHeight:i,[`${e}-input-number-input`]:{paddingInlineStart:s,paddingInlineEnd:0},[`${e}-input-number-handler-wrap`]:{width:m}},[`${t}-steppers${t}-alpha-input`]:{flex:`0 0 ${te(a)}`,marginInlineStart:o},[`${t}-format-select${e}-select`]:{marginInlineEnd:u,width:"auto","&-single":{[`${e}-select-selector`]:{padding:0,border:0},[`${e}-select-arrow`]:{insetInlineEnd:0},[`${e}-select-selection-item`]:{paddingInlineEnd:n.calc(d).add(o).equal(),fontSize:r,lineHeight:te(l)},[`${e}-select-item-option-content`]:{fontSize:r,lineHeight:i},[`${e}-select-dropdown`]:{[`${e}-select-item`]:{minHeight:"auto"}}}},[`${t}-input`]:{gap:o,alignItems:"center",flex:1,width:0,[`${t}-hsb-input,${t}-rgb-input`]:{display:"flex",gap:o,alignItems:"center"},[`${t}-steppers`]:{flex:1},[`${t}-hex-input${e}-input-affix-wrapper`]:{flex:1,padding:`0 ${te(h)}`,[`${e}-input`]:{fontSize:r,textTransform:"uppercase",lineHeight:te(n.calc(l).sub(n.calc(y).mul(2)).equal())},[`${e}-input-prefix`]:{color:v}}}}}},bh=n=>{const{componentCls:t,controlHeightLG:e,borderRadiusSM:r,colorPickerInsetShadow:i,marginSM:a,colorBgElevated:o,colorFillSecondary:s,lineWidthBold:l,colorPickerHandlerSize:u}=n;return{userSelect:"none",[`${t}-select`]:{[`${t}-palette`]:{minHeight:n.calc(e).mul(4).equal(),overflow:"hidden",borderRadius:r},[`${t}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:i,inset:0},marginBottom:a},[`${t}-handler`]:{width:u,height:u,border:`${te(l)} solid ${o}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${i}, 0 0 0 1px ${s}`}}},Sh=n=>{const{componentCls:t,antCls:e,colorTextQuaternary:r,paddingXXS:i,colorPickerPresetColorSize:a,fontSizeSM:o,colorText:s,lineHeightSM:l,lineWidth:u,borderRadius:d,colorFill:h,colorWhite:v,marginXXS:m,paddingXS:y,fontHeightSM:S}=n;return{[`${t}-presets`]:{[`${e}-collapse-item > ${e}-collapse-header`]:{padding:0,[`${e}-collapse-expand-icon`]:{height:S,color:r,paddingInlineEnd:i}},[`${e}-collapse`]:{display:"flex",flexDirection:"column",gap:m},[`${e}-collapse-item > ${e}-collapse-content > ${e}-collapse-content-box`]:{padding:`${te(y)} 0`},"&-label":{fontSize:o,color:s,lineHeight:l},"&-items":{display:"flex",flexWrap:"wrap",gap:n.calc(m).mul(1.5).equal(),[`${t}-presets-color`]:{position:"relative",cursor:"pointer",width:a,height:a,"&::before":{content:'""',pointerEvents:"none",width:n.calc(a).add(n.calc(u).mul(4)).equal(),height:n.calc(a).add(n.calc(u).mul(4)).equal(),position:"absolute",top:n.calc(u).mul(-2).equal(),insetInlineStart:n.calc(u).mul(-2).equal(),borderRadius:d,border:`${te(u)} solid transparent`,transition:`border-color ${n.motionDurationMid} ${n.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:n.calc(a).div(13).mul(5).equal(),height:n.calc(a).div(13).mul(8).equal(),border:`${te(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`},[`&${t}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:v,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`},[`&${t}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:o,color:r}}}},Ch=n=>{const{componentCls:t,colorPickerInsetShadow:e,colorBgElevated:r,colorFillSecondary:i,lineWidthBold:a,colorPickerHandlerSizeSM:o,colorPickerSliderHeight:s,marginSM:l,marginXS:u}=n,d=n.calc(o).sub(n.calc(a).mul(2).equal()).equal(),h=n.calc(o).add(n.calc(a).mul(2).equal()).equal(),v={"&:after":{transform:"scale(1)",boxShadow:`${e}, 0 0 0 1px ${n.colorPrimaryActive}`}};return{[`${t}-slider`]:[ws(te(s),n.colorFillSecondary),{margin:0,padding:0,height:s,borderRadius:n.calc(s).div(2).equal(),"&-rail":{height:s,borderRadius:n.calc(s).div(2).equal(),boxShadow:e},[`& ${t}-slider-handle`]:{width:d,height:d,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:o,height:o,border:`${te(a)} solid ${r}`,boxShadow:`${e}, 0 0 0 1px ${i}`,outline:"none",insetInlineStart:n.calc(a).mul(-1).equal(),top:n.calc(a).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":v}}],[`${t}-slider-container`]:{display:"flex",gap:l,marginBottom:l,[`${t}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${t}-gradient-slider`]:{marginBottom:u,[`& ${t}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":v}}}},ia=(n,t,e)=>({borderInlineEndWidth:n.lineWidth,borderColor:t,boxShadow:`0 0 0 ${te(n.controlOutlineWidth)} ${e}`,outline:0}),xh=n=>{const{componentCls:t}=n;return{"&-rtl":{[`${t}-presets-color`]:{"&::after":{direction:"ltr"}},[`${t}-clear`]:{"&::after":{direction:"ltr"}}}}},to=(n,t,e)=>{const{componentCls:r,borderRadiusSM:i,lineWidth:a,colorSplit:o,colorBorder:s,red6:l}=n;return{[`${r}-clear`]:Object.assign(Object.assign({width:t,height:t,borderRadius:i,border:`${te(a)} solid ${o}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${n.motionDurationFast}`},e),{"&::after":{content:'""',position:"absolute",insetInlineEnd:n.calc(a).mul(-1).equal(),top:n.calc(a).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:l},"&:hover":{borderColor:s}})}},Eh=n=>{const{componentCls:t,colorError:e,colorWarning:r,colorErrorHover:i,colorWarningHover:a,colorErrorOutline:o,colorWarningOutline:s}=n;return{[`&${t}-status-error`]:{borderColor:e,"&:hover":{borderColor:i},[`&${t}-trigger-active`]:Object.assign({},ia(n,e,o))},[`&${t}-status-warning`]:{borderColor:r,"&:hover":{borderColor:a},[`&${t}-trigger-active`]:Object.assign({},ia(n,r,s))}}},Ah=n=>{const{componentCls:t,controlHeightLG:e,controlHeightSM:r,controlHeight:i,controlHeightXS:a,borderRadius:o,borderRadiusSM:s,borderRadiusXS:l,borderRadiusLG:u,fontSizeLG:d}=n;return{[`&${t}-lg`]:{minWidth:e,minHeight:e,borderRadius:u,[`${t}-color-block, ${t}-clear`]:{width:i,height:i,borderRadius:o},[`${t}-trigger-text`]:{fontSize:d}},[`&${t}-sm`]:{minWidth:r,minHeight:r,borderRadius:s,[`${t}-color-block, ${t}-clear`]:{width:a,height:a,borderRadius:l},[`${t}-trigger-text`]:{lineHeight:te(a)}}}},wh=n=>{const{antCls:t,componentCls:e,colorPickerWidth:r,colorPrimary:i,motionDurationMid:a,colorBgElevated:o,colorTextDisabled:s,colorText:l,colorBgContainerDisabled:u,borderRadius:d,marginXS:h,marginSM:v,controlHeight:m,controlHeightSM:y,colorBgTextActive:S,colorPickerPresetColorSize:g,colorPickerPreviewSize:f,lineWidth:b,colorBorder:A,paddingXXS:x,fontSize:E,colorPrimaryHover:R,controlOutline:M}=n;return[{[e]:Object.assign({[`${e}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:r,[`& > ${t}-divider`]:{margin:`${te(v)} 0 ${te(h)}`}},[`${e}-panel`]:Object.assign({},bh(n))},Ch(n)),eo(n,f)),yh(n)),Sh(n)),to(n,g,{marginInlineStart:"auto"})),{[`${e}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:m,minHeight:m,borderRadius:d,border:`${te(b)} solid ${A}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${a}`,background:o,padding:n.calc(x).sub(b).equal(),[`${e}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:n.calc(h).sub(n.calc(x).sub(b)).equal(),fontSize:E,color:l,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:s}}},"&:hover":{borderColor:R},[`&${e}-trigger-active`]:Object.assign({},ia(n,i,M)),"&-disabled":{color:s,background:u,cursor:"not-allowed","&:hover":{borderColor:S},[`${e}-trigger-text`]:{color:s}}},to(n,y)),eo(n,y)),Eh(n)),Ah(n))},xh(n))},Vo(n,{focusElCls:`${e}-trigger-active`})]},Mh=cn("ColorPicker",n=>{const{colorTextQuaternary:t,marginSM:e}=n,r=8,i=qt(n,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${t}`,colorPickerSliderHeight:r,colorPickerPreviewSize:n.calc(r).mul(2).add(e).equal()});return[wh(i)]});var Nh=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const Ea=n=>{const{mode:t,value:e,defaultValue:r,format:i,defaultFormat:a,allowClear:o=!1,presets:s,children:l,trigger:u="click",open:d,disabled:h,placement:v="bottomLeft",arrow:m=!0,panelRender:y,showText:S,style:g,className:f,size:b,rootClassName:A,prefixCls:x,styles:E,disabledAlpha:R=!1,onFormatChange:M,onChange:O,onClear:$,onOpenChange:N,onChangeComplete:k,getPopupContainer:_,autoAdjustOverflow:j=!0,destroyTooltipOnHide:D}=n,P=Nh(n,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:H,direction:V,colorPicker:q}=c.useContext(Rt),K=c.useContext(di),ue=h??K,[G,Z]=Ot(!1,{value:d,postState:Je=>!ue&&Je,onChange:N}),[Q,ne]=Ot(i,{value:i,defaultValue:a,onChange:M}),X=H("color-picker",x),[ee,se,U,W,Y]=vh(r,e,t),ae=c.useMemo(()=>ya(ee)<100,[ee]),[fe,Re]=L.useState(null),Le=Je=>{if(k){let rt=yt(Je);R&&ae&&(rt=ni(Je)),k(rt)}},Ne=(Je,rt)=>{let mt=yt(Je);R&&ae&&(mt=ni(mt)),se(mt),Re(null),O&&O(mt,mt.toCssString()),rt||Le(mt)},[qe,ge]=L.useState(0),[Ce,ve]=L.useState(!1),Oe=Je=>{if(W(Je),Je==="single"&&ee.isGradient())ge(0),Ne(new zt(ee.getColors()[0].color)),Re(ee);else if(Je==="gradient"&&!ee.isGradient()){const rt=ae?ni(ee):ee;Ne(new zt(fe||[{percent:0,color:rt},{percent:100,color:rt}]))}},{status:_e}=L.useContext(da),{compactSize:tt,compactItemClassnames:Be}=Fo(X,V),xe=hi(Je=>{var rt;return(rt=b??tt)!==null&&rt!==void 0?rt:Je}),Ie=er(X),[Xe,ut,Ve]=Mh(X,Ie),Se={[`${X}-rtl`]:V},Ze=re(A,Ve,Ie,Se),nt=re(ta(X,_e),{[`${X}-sm`]:xe==="small",[`${X}-lg`]:xe==="large"},Be,q==null?void 0:q.className,Ze,f,ut),bt=re(X,Ze),gt={open:G,trigger:u,placement:v,arrow:m,rootClassName:A,getPopupContainer:_,autoAdjustOverflow:j,destroyTooltipOnHide:D},Ut=Object.assign(Object.assign({},q==null?void 0:q.style),g);return Xe(L.createElement(rs,Object.assign({style:E==null?void 0:E.popup,overlayInnerStyle:E==null?void 0:E.popupOverlayInner,onOpenChange:Je=>{(!Je||!ue)&&Z(Je)},content:L.createElement(ea,{form:!0},L.createElement(gh,{mode:U,onModeChange:Oe,modeOptions:Y,prefixCls:X,value:ee,allowClear:o,disabled:ue,disabledAlpha:R,presets:s,panelRender:y,format:Q,onFormatChange:ne,onChange:Ne,onChangeComplete:Le,onClear:$,activeIndex:qe,onActive:ge,gradientDragging:Ce,onGradientDragging:ve})),overlayClassName:bt},gt),l||L.createElement(fh,Object.assign({activeIndex:G?qe:-1,open:G,className:nt,style:Ut,prefixCls:X,disabled:ue,showText:S,format:Q},P,{color:ee}))))},Oh=Il(Ea,"color-picker",n=>n,n=>Object.assign(Object.assign({},n),{placement:"bottom",autoAdjustOverflow:!1}));Ea._InternalPanelDoNotUseOrYouWillBeFired=Oh;function Ms(){var n=document.documentElement.clientWidth,t=window.innerHeight||document.documentElement.clientHeight;return{width:n,height:t}}function Ih(n){var t=n.getBoundingClientRect(),e=document.documentElement;return{left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||document.body.clientTop||0)}}function Gn(n,t,e,r){var i=Ra.unstable_batchedUpdates?function(o){Ra.unstable_batchedUpdates(e,o)}:e;return n!=null&&n.addEventListener&&n.addEventListener(t,i,r),{remove:function(){n!=null&&n.removeEventListener&&n.removeEventListener(t,i,r)}}}var Ar=c.createContext(null),Ph=function(t){var e=t.visible,r=t.maskTransitionName,i=t.getContainer,a=t.prefixCls,o=t.rootClassName,s=t.icons,l=t.countRender,u=t.showSwitch,d=t.showProgress,h=t.current,v=t.transform,m=t.count,y=t.scale,S=t.minScale,g=t.maxScale,f=t.closeIcon,b=t.onSwitchLeft,A=t.onSwitchRight,x=t.onClose,E=t.onZoomIn,R=t.onZoomOut,M=t.onRotateRight,O=t.onRotateLeft,$=t.onFlipX,N=t.onFlipY,k=t.onReset,_=t.toolbarRender,j=t.zIndex,D=t.image,P=c.useContext(Ar),H=s.rotateLeft,V=s.rotateRight,q=s.zoomIn,K=s.zoomOut,ue=s.close,G=s.left,Z=s.right,Q=s.flipX,ne=s.flipY,X="".concat(a,"-operations-operation");c.useEffect(function(){var W=function(ae){ae.keyCode===it.ESC&&x()};return e&&window.addEventListener("keydown",W),function(){window.removeEventListener("keydown",W)}},[e]);var ee=[{icon:ne,onClick:N,type:"flipY"},{icon:Q,onClick:$,type:"flipX"},{icon:H,onClick:O,type:"rotateLeft"},{icon:V,onClick:M,type:"rotateRight"},{icon:K,onClick:R,type:"zoomOut",disabled:y<=S},{icon:q,onClick:E,type:"zoomIn",disabled:y===g}],se=ee.map(function(W){var Y,ae=W.icon,fe=W.onClick,Re=W.type,Le=W.disabled;return c.createElement("div",{className:re(X,(Y={},le(Y,"".concat(a,"-operations-operation-").concat(Re),!0),le(Y,"".concat(a,"-operations-operation-disabled"),!!Le),Y)),onClick:fe,key:Re},ae)}),U=c.createElement("div",{className:"".concat(a,"-operations")},se);return c.createElement(ha,{visible:e,motionName:r},function(W){var Y=W.className,ae=W.style;return c.createElement(Pl,{open:!0,getContainer:i??document.body},c.createElement("div",{className:re("".concat(a,"-operations-wrapper"),Y,o),style:ce(ce({},ae),{},{zIndex:j})},f===null?null:c.createElement("button",{className:"".concat(a,"-close"),onClick:x},f||ue),u&&c.createElement(c.Fragment,null,c.createElement("div",{className:re("".concat(a,"-switch-left"),le({},"".concat(a,"-switch-left-disabled"),h===0)),onClick:b},G),c.createElement("div",{className:re("".concat(a,"-switch-right"),le({},"".concat(a,"-switch-right-disabled"),h===m-1)),onClick:A},Z)),c.createElement("div",{className:"".concat(a,"-footer")},d&&c.createElement("div",{className:"".concat(a,"-progress")},l?l(h+1,m):"".concat(h+1," / ").concat(m)),_?_(U,ce(ce({icons:{flipYIcon:se[0],flipXIcon:se[1],rotateLeftIcon:se[2],rotateRightIcon:se[3],zoomOutIcon:se[4],zoomInIcon:se[5]},actions:{onFlipY:N,onFlipX:$,onRotateLeft:O,onRotateRight:M,onZoomOut:R,onZoomIn:E,onReset:k,onClose:x},transform:v},P?{current:h,total:m}:{}),{},{image:D})):U)))})},Xr={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function Rh(n,t,e,r){var i=c.useRef(null),a=c.useRef([]),o=c.useState(Xr),s=de(o,2),l=s[0],u=s[1],d=function(y){u(Xr),Uo(Xr,l)||r==null||r({transform:Xr,action:y})},h=function(y,S){i.current===null&&(a.current=[],i.current=Zt(function(){u(function(g){var f=g;return a.current.forEach(function(b){f=ce(ce({},f),b)}),i.current=null,r==null||r({transform:f,action:S}),f})})),a.current.push(ce(ce({},l),y))},v=function(y,S,g,f,b){var A=n.current,x=A.width,E=A.height,R=A.offsetWidth,M=A.offsetHeight,O=A.offsetLeft,$=A.offsetTop,N=y,k=l.scale*y;k>e?(k=e,N=e/l.scale):k<t&&(k=b?k:t,N=k/l.scale);var _=g??innerWidth/2,j=f??innerHeight/2,D=N-1,P=D*x*.5,H=D*E*.5,V=D*(_-l.x-O),q=D*(j-l.y-$),K=l.x-(V-P),ue=l.y-(q-H);if(y<1&&k===1){var G=R*k,Z=M*k,Q=Ms(),ne=Q.width,X=Q.height;G<=ne&&Z<=X&&(K=0,ue=0)}h({x:K,y:ue,scale:k},S)};return{transform:l,resetTransform:d,updateTransform:h,dispatchZoomChange:v}}function no(n,t,e,r){var i=t+e,a=(e-r)/2;if(e>r){if(t>0)return le({},n,a);if(t<0&&i<r)return le({},n,-a)}else if(t<0||i>r)return le({},n,t<0?a:-a);return{}}function Ns(n,t,e,r){var i=Ms(),a=i.width,o=i.height,s=null;return n<=a&&t<=o?s={x:0,y:0}:(n>a||t>o)&&(s=ce(ce({},no("x",e,n,a)),no("y",r,t,o))),s}var Wn=1,kh=1;function _h(n,t,e,r,i,a,o){var s=i.rotate,l=i.scale,u=i.x,d=i.y,h=c.useState(!1),v=de(h,2),m=v[0],y=v[1],S=c.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),g=function(E){!t||E.button!==0||(E.preventDefault(),E.stopPropagation(),S.current={diffX:E.pageX-u,diffY:E.pageY-d,transformX:u,transformY:d},y(!0))},f=function(E){e&&m&&a({x:E.pageX-S.current.diffX,y:E.pageY-S.current.diffY},"move")},b=function(){if(e&&m){y(!1);var E=S.current,R=E.transformX,M=E.transformY,O=u!==R&&d!==M;if(!O)return;var $=n.current.offsetWidth*l,N=n.current.offsetHeight*l,k=n.current.getBoundingClientRect(),_=k.left,j=k.top,D=s%180!==0,P=Ns(D?N:$,D?$:N,_,j);P&&a(ce({},P),"dragRebound")}},A=function(E){if(!(!e||E.deltaY==0)){var R=Math.abs(E.deltaY/100),M=Math.min(R,kh),O=Wn+M*r;E.deltaY>0&&(O=Wn/O),o(O,"wheel",E.clientX,E.clientY)}};return c.useEffect(function(){var x,E,R,M;if(t){R=Gn(window,"mouseup",b,!1),M=Gn(window,"mousemove",f,!1);try{window.top!==window.self&&(x=Gn(window.top,"mouseup",b,!1),E=Gn(window.top,"mousemove",f,!1))}catch{}}return function(){var O,$,N,k;(O=R)===null||O===void 0||O.remove(),($=M)===null||$===void 0||$.remove(),(N=x)===null||N===void 0||N.remove(),(k=E)===null||k===void 0||k.remove()}},[e,m,u,d,s,t]),{isMoving:m,onMouseDown:g,onMouseMove:f,onMouseUp:b,onWheel:A}}function Th(n){return new Promise(function(t){var e=document.createElement("img");e.onerror=function(){return t(!1)},e.onload=function(){return t(!0)},e.src=n})}function Os(n){var t=n.src,e=n.isCustomPlaceholder,r=n.fallback,i=c.useState(e?"loading":"normal"),a=de(i,2),o=a[0],s=a[1],l=c.useRef(!1),u=o==="error";c.useEffect(function(){var m=!0;return Th(t).then(function(y){!y&&m&&s("error")}),function(){m=!1}},[t]),c.useEffect(function(){e&&!l.current?s("loading"):u&&s("normal")},[t]);var d=function(){s("normal")},h=function(y){l.current=!1,o==="loading"&&y!==null&&y!==void 0&&y.complete&&(y.naturalWidth||y.naturalHeight)&&(l.current=!0,d())},v=u&&r?{src:r}:{onLoad:d,src:t};return[h,v,o]}function li(n,t){var e=n.x-t.x,r=n.y-t.y;return Math.hypot(e,r)}function $h(n,t,e,r){var i=li(n,e),a=li(t,r);if(i===0&&a===0)return[n.x,n.y];var o=i/(i+a),s=n.x+o*(t.x-n.x),l=n.y+o*(t.y-n.y);return[s,l]}function Dh(n,t,e,r,i,a,o){var s=i.rotate,l=i.scale,u=i.x,d=i.y,h=c.useState(!1),v=de(h,2),m=v[0],y=v[1],S=c.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),g=function(E){S.current=ce(ce({},S.current),E)},f=function(E){if(t){E.stopPropagation(),y(!0);var R=E.touches,M=R===void 0?[]:R;M.length>1?g({point1:{x:M[0].clientX,y:M[0].clientY},point2:{x:M[1].clientX,y:M[1].clientY},eventType:"touchZoom"}):g({point1:{x:M[0].clientX-u,y:M[0].clientY-d},eventType:"move"})}},b=function(E){var R=E.touches,M=R===void 0?[]:R,O=S.current,$=O.point1,N=O.point2,k=O.eventType;if(M.length>1&&k==="touchZoom"){var _={x:M[0].clientX,y:M[0].clientY},j={x:M[1].clientX,y:M[1].clientY},D=$h($,N,_,j),P=de(D,2),H=P[0],V=P[1],q=li(_,j)/li($,N);o(q,"touchZoom",H,V,!0),g({point1:_,point2:j,eventType:"touchZoom"})}else k==="move"&&(a({x:M[0].clientX-$.x,y:M[0].clientY-$.y},"move"),g({eventType:"move"}))},A=function(){if(e){if(m&&y(!1),g({eventType:"none"}),r>l)return a({x:0,y:0,scale:r},"touchZoom");var E=n.current.offsetWidth*l,R=n.current.offsetHeight*l,M=n.current.getBoundingClientRect(),O=M.left,$=M.top,N=s%180!==0,k=Ns(N?R:E,N?E:R,O,$);k&&a(ce({},k),"dragRebound")}};return c.useEffect(function(){var x;return e&&t&&(x=Gn(window,"touchmove",function(E){return E.preventDefault()},{passive:!1})),function(){var E;(E=x)===null||E===void 0||E.remove()}},[e,t]),{isTouching:m,onTouchStart:f,onTouchMove:b,onTouchEnd:A}}var Lh=["fallback","src","imgRef"],zh=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],jh=function(t){var e=t.fallback,r=t.src,i=t.imgRef,a=vt(t,Lh),o=Os({src:r,fallback:e}),s=de(o,2),l=s[0],u=s[1];return L.createElement("img",Te({ref:function(h){i.current=h,l(h)}},a,u))},Is=function(t){var e=t.prefixCls,r=t.src,i=t.alt,a=t.imageInfo,o=t.fallback,s=t.movable,l=s===void 0?!0:s,u=t.onClose,d=t.visible,h=t.icons,v=h===void 0?{}:h,m=t.rootClassName,y=t.closeIcon,S=t.getContainer,g=t.current,f=g===void 0?0:g,b=t.count,A=b===void 0?1:b,x=t.countRender,E=t.scaleStep,R=E===void 0?.5:E,M=t.minScale,O=M===void 0?1:M,$=t.maxScale,N=$===void 0?50:$,k=t.transitionName,_=k===void 0?"zoom":k,j=t.maskTransitionName,D=j===void 0?"fade":j,P=t.imageRender,H=t.imgCommonProps,V=t.toolbarRender,q=t.onTransform,K=t.onChange,ue=vt(t,zh),G=c.useRef(),Z=c.useContext(Ar),Q=Z&&A>1,ne=Z&&A>=1,X=c.useState(!0),ee=de(X,2),se=ee[0],U=ee[1],W=Rh(G,O,N,q),Y=W.transform,ae=W.resetTransform,fe=W.updateTransform,Re=W.dispatchZoomChange,Le=_h(G,l,d,R,Y,fe,Re),Ne=Le.isMoving,qe=Le.onMouseDown,ge=Le.onWheel,Ce=Dh(G,l,d,O,Y,fe,Re),ve=Ce.isTouching,Oe=Ce.onTouchStart,_e=Ce.onTouchMove,tt=Ce.onTouchEnd,Be=Y.rotate,xe=Y.scale,Ie=re(le({},"".concat(e,"-moving"),Ne));c.useEffect(function(){se||U(!0)},[se]);var Xe=function(){ae("close")},ut=function(){Re(Wn+R,"zoomIn")},Ve=function(){Re(Wn/(Wn+R),"zoomOut")},Se=function(){fe({rotate:Be+90},"rotateRight")},Ze=function(){fe({rotate:Be-90},"rotateLeft")},nt=function(){fe({flipX:!Y.flipX},"flipX")},bt=function(){fe({flipY:!Y.flipY},"flipY")},gt=function(){ae("reset")},Ut=function(ze){ze==null||ze.preventDefault(),ze==null||ze.stopPropagation(),f>0&&(U(!1),ae("prev"),K==null||K(f-1,f))},Je=function(ze){ze==null||ze.preventDefault(),ze==null||ze.stopPropagation(),f<A-1&&(U(!1),ae("next"),K==null||K(f+1,f))},rt=function(ze){!d||!Q||(ze.keyCode===it.LEFT?Ut():ze.keyCode===it.RIGHT&&Je())},mt=function(ze){d&&(xe!==1?fe({x:0,y:0,scale:1},"doubleClick"):Re(Wn+R,"doubleClick",ze.clientX,ze.clientY))};c.useEffect(function(){var Ue=Gn(window,"keydown",rt,!1);return function(){Ue.remove()}},[d,Q,f]);var hn=L.createElement(jh,Te({},H,{width:t.width,height:t.height,imgRef:G,className:"".concat(e,"-img"),alt:i,style:{transform:"translate3d(".concat(Y.x,"px, ").concat(Y.y,"px, 0) scale3d(").concat(Y.flipX?"-":"").concat(xe,", ").concat(Y.flipY?"-":"").concat(xe,", 1) rotate(").concat(Be,"deg)"),transitionDuration:(!se||ve)&&"0s"},fallback:o,src:r,onWheel:ge,onMouseDown:qe,onDoubleClick:mt,onTouchStart:Oe,onTouchMove:_e,onTouchEnd:tt,onTouchCancel:tt})),Gt=ce({url:r,alt:i},a);return L.createElement(L.Fragment,null,L.createElement(Rl,Te({transitionName:_,maskTransitionName:D,closable:!1,keyboard:!0,prefixCls:e,onClose:u,visible:d,classNames:{wrapper:Ie},rootClassName:m,getContainer:S},ue,{afterClose:Xe}),L.createElement("div",{className:"".concat(e,"-img-wrapper")},P?P(hn,ce({transform:Y,image:Gt},Z?{current:f}:{})):hn)),L.createElement(Ph,{visible:d,transform:Y,maskTransitionName:D,closeIcon:y,getContainer:S,prefixCls:e,rootClassName:m,icons:v,countRender:x,showSwitch:Q,showProgress:ne,current:f,count:A,scale:xe,minScale:O,maxScale:N,toolbarRender:V,onSwitchLeft:Ut,onSwitchRight:Je,onZoomIn:ut,onZoomOut:Ve,onRotateRight:Se,onRotateLeft:Ze,onFlipX:nt,onFlipY:bt,onClose:u,onReset:gt,zIndex:ue.zIndex!==void 0?ue.zIndex+1:void 0,image:Gt}))},aa=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function Bh(n){var t=c.useState({}),e=de(t,2),r=e[0],i=e[1],a=c.useCallback(function(s,l){return i(function(u){return ce(ce({},u),{},le({},s,l))}),function(){i(function(u){var d=ce({},u);return delete d[s],d})}},[]),o=c.useMemo(function(){return n?n.map(function(s){if(typeof s=="string")return{data:{src:s}};var l={};return Object.keys(s).forEach(function(u){["src"].concat(ht(aa)).includes(u)&&(l[u]=s[u])}),{data:l}}):Object.keys(r).reduce(function(s,l){var u=r[l],d=u.canPreview,h=u.data;return d&&s.push({data:h,id:l}),s},[])},[n,r]);return[o,a,!!n]}var Hh=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],Vh=["src"],Fh=function(t){var e,r=t.previewPrefixCls,i=r===void 0?"rc-image-preview":r,a=t.children,o=t.icons,s=o===void 0?{}:o,l=t.items,u=t.preview,d=t.fallback,h=xn(u)==="object"?u:{},v=h.visible,m=h.onVisibleChange,y=h.getContainer,S=h.current,g=h.movable,f=h.minScale,b=h.maxScale,A=h.countRender,x=h.closeIcon,E=h.onChange,R=h.onTransform,M=h.toolbarRender,O=h.imageRender,$=vt(h,Hh),N=Bh(l),k=de(N,3),_=k[0],j=k[1],D=k[2],P=Ot(0,{value:S}),H=de(P,2),V=H[0],q=H[1],K=c.useState(!1),ue=de(K,2),G=ue[0],Z=ue[1],Q=((e=_[V])===null||e===void 0?void 0:e.data)||{},ne=Q.src,X=vt(Q,Vh),ee=Ot(!!v,{value:v,onChange:function(ve,Oe){m==null||m(ve,Oe,V)}}),se=de(ee,2),U=se[0],W=se[1],Y=c.useState(null),ae=de(Y,2),fe=ae[0],Re=ae[1],Le=c.useCallback(function(Ce,ve,Oe,_e){var tt=D?_.findIndex(function(Be){return Be.data.src===ve}):_.findIndex(function(Be){return Be.id===Ce});q(tt<0?0:tt),W(!0),Re({x:Oe,y:_e}),Z(!0)},[_,D]);c.useEffect(function(){U?G||q(0):Z(!1)},[U]);var Ne=function(ve,Oe){q(ve),E==null||E(ve,Oe)},qe=function(){W(!1),Re(null)},ge=c.useMemo(function(){return{register:j,onPreview:Le}},[j,Le]);return c.createElement(Ar.Provider,{value:ge},a,c.createElement(Is,Te({"aria-hidden":!U,movable:g,visible:U,prefixCls:i,closeIcon:x,onClose:qe,mousePosition:fe,imgCommonProps:X,src:ne,fallback:d,icons:s,minScale:f,maxScale:b,getContainer:y,current:V,count:_.length,countRender:A,onTransform:R,toolbarRender:M,imageRender:O,onChange:Ne},$)))},ro=0;function Uh(n,t){var e=c.useState(function(){return ro+=1,String(ro)}),r=de(e,1),i=r[0],a=c.useContext(Ar),o={data:t,canPreview:n};return c.useEffect(function(){if(a)return a.register(i,o)},[]),c.useEffect(function(){a&&a.register(i,o)},[n,t]),i}var Gh=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],Wh=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],Aa=function(t){var e=t.src,r=t.alt,i=t.onPreviewClose,a=t.prefixCls,o=a===void 0?"rc-image":a,s=t.previewPrefixCls,l=s===void 0?"".concat(o,"-preview"):s,u=t.placeholder,d=t.fallback,h=t.width,v=t.height,m=t.style,y=t.preview,S=y===void 0?!0:y,g=t.className,f=t.onClick,b=t.onError,A=t.wrapperClassName,x=t.wrapperStyle,E=t.rootClassName,R=vt(t,Gh),M=u&&u!==!0,O=xn(S)==="object"?S:{},$=O.src,N=O.visible,k=N===void 0?void 0:N,_=O.onVisibleChange,j=_===void 0?i:_,D=O.getContainer,P=D===void 0?void 0:D,H=O.mask,V=O.maskClassName,q=O.movable,K=O.icons,ue=O.scaleStep,G=O.minScale,Z=O.maxScale,Q=O.imageRender,ne=O.toolbarRender,X=vt(O,Wh),ee=$??e,se=Ot(!!k,{value:k,onChange:j}),U=de(se,2),W=U[0],Y=U[1],ae=Os({src:e,isCustomPlaceholder:M,fallback:d}),fe=de(ae,3),Re=fe[0],Le=fe[1],Ne=fe[2],qe=c.useState(null),ge=de(qe,2),Ce=ge[0],ve=ge[1],Oe=c.useContext(Ar),_e=!!S,tt=function(){Y(!1),ve(null)},Be=re(o,A,E,le({},"".concat(o,"-error"),Ne==="error")),xe=c.useMemo(function(){var Ve={};return aa.forEach(function(Se){t[Se]!==void 0&&(Ve[Se]=t[Se])}),Ve},aa.map(function(Ve){return t[Ve]})),Ie=c.useMemo(function(){return ce(ce({},xe),{},{src:ee})},[ee,xe]),Xe=Uh(_e,Ie),ut=function(Se){var Ze=Ih(Se.target),nt=Ze.left,bt=Ze.top;Oe?Oe.onPreview(Xe,ee,nt,bt):(ve({x:nt,y:bt}),Y(!0)),f==null||f(Se)};return c.createElement(c.Fragment,null,c.createElement("div",Te({},R,{className:Be,onClick:_e?ut:f,style:ce({width:h,height:v},x)}),c.createElement("img",Te({},xe,{className:re("".concat(o,"-img"),le({},"".concat(o,"-img-placeholder"),u===!0),g),style:ce({height:v},m),ref:Re},Le,{width:h,height:v,onError:b})),Ne==="loading"&&c.createElement("div",{"aria-hidden":"true",className:"".concat(o,"-placeholder")},u),H&&_e&&c.createElement("div",{className:re("".concat(o,"-mask"),V),style:{display:(m==null?void 0:m.display)==="none"?"none":void 0}},H)),!Oe&&_e&&c.createElement(Is,Te({"aria-hidden":!W,visible:W,prefixCls:l,onClose:tt,mousePosition:Ce,src:ee,alt:r,imageInfo:{width:h,height:v},fallback:d,getContainer:P,icons:K,movable:q,scaleStep:ue,minScale:G,maxScale:Z,rootClassName:E,imageRender:Q,imgCommonProps:xe,toolbarRender:ne},X)))};Aa.PreviewGroup=Fh;var Xh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},Yh=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:Xh}))},Kh=c.forwardRef(Yh),qh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},Zh=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:qh}))},Qh=c.forwardRef(Zh),Jh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M847.9 592H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h605.2L612.9 851c-4.1 5.2-.4 13 6.3 13h72.5c4.9 0 9.5-2.2 12.6-6.1l168.8-214.1c16.5-21 1.6-51.8-25.2-51.8zM872 356H266.8l144.3-183c4.1-5.2.4-13-6.3-13h-72.5c-4.9 0-9.5 2.2-12.6 6.1L150.9 380.2c-16.5 21-1.6 51.8 25.1 51.8h696c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"swap",theme:"outlined"},ep=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:Jh}))},io=c.forwardRef(ep),tp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},np=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:tp}))},rp=c.forwardRef(np),ip={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},ap=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:ip}))},op=c.forwardRef(ap);const oa=n=>({position:n||"absolute",inset:0}),sp=n=>{const{iconCls:t,motionDurationSlow:e,paddingXXS:r,marginXXS:i,prefixCls:a,colorTextLightSolid:o}=n;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:o,background:new Yt("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${e}`,[`.${a}-mask-info`]:Object.assign(Object.assign({},Ho),{padding:`0 ${te(r)}`,[t]:{marginInlineEnd:i,svg:{verticalAlign:"baseline"}}})}},lp=n=>{const{previewCls:t,modalMaskBg:e,paddingSM:r,marginXL:i,margin:a,paddingLG:o,previewOperationColorDisabled:s,previewOperationHoverColor:l,motionDurationSlow:u,iconCls:d,colorTextLightSolid:h}=n,v=new Yt(e).setAlpha(.1),m=v.clone().setAlpha(.2);return{[`${t}-footer`]:{position:"fixed",bottom:i,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:n.previewOperationColor,transform:"translateX(-50%)"},[`${t}-progress`]:{marginBottom:a},[`${t}-close`]:{position:"fixed",top:i,right:{_skip_check_:!0,value:i},display:"flex",color:h,backgroundColor:v.toRgbString(),borderRadius:"50%",padding:r,outline:0,border:0,cursor:"pointer",transition:`all ${u}`,"&:hover":{backgroundColor:m.toRgbString()},[`& > ${d}`]:{fontSize:n.previewOperationSize}},[`${t}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${te(o)}`,backgroundColor:v.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:r,padding:r,cursor:"pointer",transition:`all ${u}`,userSelect:"none",[`&:not(${t}-operations-operation-disabled):hover > ${d}`]:{color:l},"&-disabled":{color:s,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${d}`]:{fontSize:n.previewOperationSize}}}}},cp=n=>{const{modalMaskBg:t,iconCls:e,previewOperationColorDisabled:r,previewCls:i,zIndexPopup:a,motionDurationSlow:o}=n,s=new Yt(t).setAlpha(.1),l=s.clone().setAlpha(.2);return{[`${i}-switch-left, ${i}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:n.calc(a).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:n.imagePreviewSwitchSize,height:n.imagePreviewSwitchSize,marginTop:n.calc(n.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:n.previewOperationColor,background:s.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${o}`,userSelect:"none","&:hover":{background:l.toRgbString()},"&-disabled":{"&, &:hover":{color:r,background:"transparent",cursor:"not-allowed",[`> ${e}`]:{cursor:"not-allowed"}}},[`> ${e}`]:{fontSize:n.previewOperationSize}},[`${i}-switch-left`]:{insetInlineStart:n.marginSM},[`${i}-switch-right`]:{insetInlineEnd:n.marginSM}}},up=n=>{const{motionEaseOut:t,previewCls:e,motionDurationSlow:r,componentCls:i}=n;return[{[`${i}-preview-root`]:{[e]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${e}-body`]:Object.assign(Object.assign({},oa()),{overflow:"hidden"}),[`${e}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${r} ${t} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},oa()),{transition:`transform ${r} ${t} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${e}-moving`]:{[`${e}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${i}-preview-root`]:{[`${e}-wrap`]:{zIndex:n.zIndexPopup}}},{[`${i}-preview-operations-wrapper`]:{position:"fixed",zIndex:n.calc(n.zIndexPopup).add(1).equal()},"&":[lp(n),cp(n)]}]},dp=n=>{const{componentCls:t}=n;return{[t]:{position:"relative",display:"inline-block",[`${t}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${t}-img-placeholder`]:{backgroundColor:n.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${t}-mask`]:Object.assign({},sp(n)),[`${t}-mask:hover`]:{opacity:1},[`${t}-placeholder`]:Object.assign({},oa())}}},hp=n=>{const{previewCls:t}=n;return{[`${t}-root`]:To(n,"zoom"),"&":_l(n,!0)}},pp=n=>({zIndexPopup:n.zIndexPopupBase+80,previewOperationColor:new Yt(n.colorTextLightSolid).setAlpha(.65).toRgbString(),previewOperationHoverColor:new Yt(n.colorTextLightSolid).setAlpha(.85).toRgbString(),previewOperationColorDisabled:new Yt(n.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:n.fontSizeIcon*1.5}),Ps=cn("Image",n=>{const t=`${n.componentCls}-preview`,e=qt(n,{previewCls:t,modalMaskBg:new Yt("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:n.controlHeightLG});return[dp(e),up(e),kl(qt(e,{componentCls:t})),hp(e)]},pp);var gp=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const Rs={rotateLeft:c.createElement(Kh,null),rotateRight:c.createElement(Qh,null),zoomIn:c.createElement(rp,null),zoomOut:c.createElement(op,null),close:c.createElement($l,null),left:c.createElement(Tl,null),right:c.createElement(jo,null),flipX:c.createElement(io,null),flipY:c.createElement(io,{rotate:90})},mp=n=>{var{previewPrefixCls:t,preview:e}=n,r=gp(n,["previewPrefixCls","preview"]);const{getPrefixCls:i}=c.useContext(Rt),a=i("image",t),o=`${a}-preview`,s=i(),l=er(a),[u,d,h]=Ps(a,l),[v]=Go("ImagePreview",typeof e=="object"?e.zIndex:void 0),m=c.useMemo(()=>{var y;if(e===!1)return e;const S=typeof e=="object"?e:{},g=re(d,h,l,(y=S.rootClassName)!==null&&y!==void 0?y:"");return Object.assign(Object.assign({},S),{transitionName:Sr(s,"zoom",S.transitionName),maskTransitionName:Sr(s,"fade",S.maskTransitionName),rootClassName:g,zIndex:v})},[e]);return u(c.createElement(Aa.PreviewGroup,Object.assign({preview:m,previewPrefixCls:o,icons:Rs},r)))};var ao=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(e[r[i]]=n[r[i]]);return e};const ks=n=>{var t;const{prefixCls:e,preview:r,className:i,rootClassName:a,style:o}=n,s=ao(n,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:l,locale:u=ka,getPopupContainer:d,image:h}=c.useContext(Rt),v=l("image",e),m=l(),y=u.Image||ka.Image,S=er(v),[g,f,b]=Ps(v,S),A=re(a,f,b,S),x=re(i,f,h==null?void 0:h.className),[E]=Go("ImagePreview",typeof r=="object"?r.zIndex:void 0),R=c.useMemo(()=>{var O;if(r===!1)return r;const $=typeof r=="object"?r:{},{getContainer:N,closeIcon:k}=$,_=ao($,["getContainer","closeIcon"]);return Object.assign(Object.assign({mask:c.createElement("div",{className:`${v}-mask-info`},c.createElement(cc,null),y==null?void 0:y.preview),icons:Rs},_),{getContainer:N??d,transitionName:Sr(m,"zoom",$.transitionName),maskTransitionName:Sr(m,"fade",$.maskTransitionName),zIndex:E,closeIcon:k??((O=h==null?void 0:h.preview)===null||O===void 0?void 0:O.closeIcon)})},[r,y,(t=h==null?void 0:h.preview)===null||t===void 0?void 0:t.closeIcon]),M=Object.assign(Object.assign({},h==null?void 0:h.style),o);return g(c.createElement(Aa,Object.assign({prefixCls:v,preview:R,rootClassName:A,className:x,style:M},s)))};ks.PreviewGroup=mp;var fp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},vp=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:fp}))},yp=c.forwardRef(vp),bp={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},Sp=function(t,e){return c.createElement(un,Te({},t,{ref:e,icon:bp}))},Cp=c.forwardRef(Sp);function xp(n){return n?!n.trim():!0}const Ep=n=>{const e=n.split("/").pop();if(e===void 0||xp(e))return"";const r=e.lastIndexOf(".");return r&&r!=-1?e.slice(r+1,e.length):""},Ap=["jpg","jpeg","png"],wp=n=>Ap.includes(n),Mp="_container_1bqyu_1",Np="_view_1bqyu_9",oo={container:Mp,view:Np};function vr(){return vr=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},vr.apply(this,arguments)}var yn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Li,_s={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/Li=_s,function(){var n={}.hasOwnProperty;function t(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var a=typeof i;if(a==="string"||a==="number")e.push(i);else if(Array.isArray(i)){if(i.length){var o=t.apply(null,i);o&&e.push(o)}}else if(a==="object")if(i.toString===Object.prototype.toString)for(var s in i)n.call(i,s)&&i[s]&&e.push(s);else e.push(i.toString())}}return e.join(" ")}Li.exports?(t.default=t,Li.exports=t):window.classNames=t}();var sa=wr(_s.exports),so=NaN,Op="[object Symbol]",Ip=/^\s+|\s+$/g,Pp=/^[-+]0x[0-9a-f]+$/i,Rp=/^0b[01]+$/i,kp=/^0o[0-7]+$/i,_p=parseInt,Tp=Object.prototype.toString;function lo(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function zi(n){if(typeof n=="number")return n;if(function(r){return typeof r=="symbol"||function(i){return!!i&&typeof i=="object"}(r)&&Tp.call(r)==Op}(n))return so;if(lo(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=lo(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=n.replace(Ip,"");var e=Rp.test(n);return e||kp.test(n)?_p(n.slice(2),e?2:8):Pp.test(n)?so:+n}var Ht=wr(function(n,t,e){return e===void 0&&(e=t,t=void 0),e!==void 0&&(e=(e=zi(e))==e?e:0),t!==void 0&&(t=(t=zi(t))==t?t:0),function(r,i,a){return r==r&&(a!==void 0&&(r=r<=a?r:a),i!==void 0&&(r=r>=i?r:i)),r}(zi(n),t,e)}),la={exports:{}};(function(n,t){var e="__lodash_hash_undefined__",r=1,i=2,a=9007199254740991,o="[object Arguments]",s="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",d="[object Date]",h="[object Error]",v="[object Function]",m="[object GeneratorFunction]",y="[object Map]",S="[object Number]",g="[object Null]",f="[object Object]",b="[object Promise]",A="[object Proxy]",x="[object RegExp]",E="[object Set]",R="[object String]",M="[object Symbol]",O="[object Undefined]",$="[object WeakMap]",N="[object ArrayBuffer]",k="[object DataView]",_=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D[o]=D[s]=D[N]=D[u]=D[k]=D[d]=D[h]=D[v]=D[y]=D[S]=D[f]=D[x]=D[E]=D[R]=D[$]=!1;var P=typeof yn=="object"&&yn&&yn.Object===Object&&yn,H=typeof self=="object"&&self&&self.Object===Object&&self,V=P||H||Function("return this")(),q=t&&!t.nodeType&&t,K=q&&n&&!n.nodeType&&n,ue=K&&K.exports===q,G=ue&&P.process,Z=function(){try{return G&&G.binding&&G.binding("util")}catch{}}(),Q=Z&&Z.isTypedArray;function ne(w,T){for(var F=-1,J=w==null?0:w.length;++F<J;)if(T(w[F],F,w))return!0;return!1}function X(w){var T=-1,F=Array(w.size);return w.forEach(function(J,ke){F[++T]=[ke,J]}),F}function ee(w){var T=-1,F=Array(w.size);return w.forEach(function(J){F[++T]=J}),F}var se,U,W,Y=Array.prototype,ae=Function.prototype,fe=Object.prototype,Re=V["__core-js_shared__"],Le=ae.toString,Ne=fe.hasOwnProperty,qe=(se=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"",ge=fe.toString,Ce=RegExp("^"+Le.call(Ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=ue?V.Buffer:void 0,Oe=V.Symbol,_e=V.Uint8Array,tt=fe.propertyIsEnumerable,Be=Y.splice,xe=Oe?Oe.toStringTag:void 0,Ie=Object.getOwnPropertySymbols,Xe=ve?ve.isBuffer:void 0,ut=(U=Object.keys,W=Object,function(w){return U(W(w))}),Ve=pn(V,"DataView"),Se=pn(V,"Map"),Ze=pn(V,"Promise"),nt=pn(V,"Set"),bt=pn(V,"WeakMap"),gt=pn(Object,"create"),Ut=tn(Ve),Je=tn(Se),rt=tn(Ze),mt=tn(nt),hn=tn(bt),Gt=Oe?Oe.prototype:void 0,Ue=Gt?Gt.valueOf:void 0;function ze(w){var T=-1,F=w==null?0:w.length;for(this.clear();++T<F;){var J=w[T];this.set(J[0],J[1])}}function ie(w){var T=-1,F=w==null?0:w.length;for(this.clear();++T<F;){var J=w[T];this.set(J[0],J[1])}}function oe(w){var T=-1,F=w==null?0:w.length;for(this.clear();++T<F;){var J=w[T];this.set(J[0],J[1])}}function ye(w){var T=-1,F=w==null?0:w.length;for(this.__data__=new oe;++T<F;)this.add(w[T])}function he(w){var T=this.__data__=new ie(w);this.size=T.size}function wt(w,T){var F=En(w),J=!F&&_r(w),ke=!F&&!J&&nn(w),pe=!F&&!J&&!ke&&$r(w),$e=F||J||ke||pe,He=$e?function(Ge,Ct){for(var Tt=-1,xt=Array(Ge);++Tt<Ge;)xt[Tt]=Ct(Tt);return xt}(w.length,String):[],dt=He.length;for(var Qe in w)!Ne.call(w,Qe)||$e&&(Qe=="length"||ke&&(Qe=="offset"||Qe=="parent")||pe&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||Rr(Qe,dt))||He.push(Qe);return He}function kt(w,T){for(var F=w.length;F--;)if(kr(w[F][0],T))return F;return-1}function St(w){return w==null?w===void 0?O:g:xe&&xe in Object(w)?function(T){var F=Ne.call(T,xe),J=T[xe];try{T[xe]=void 0;var ke=!0}catch{}var pe=ge.call(T);return ke&&(F?T[xe]=J:delete T[xe]),pe}(w):function(T){return ge.call(T)}(w)}function ir(w){return gn(w)&&St(w)==o}function Ir(w,T,F,J,ke){return w===T||(w==null||T==null||!gn(w)&&!gn(T)?w!=w&&T!=T:function(pe,$e,He,dt,Qe,Ge){var Ct=En(pe),Tt=En($e),xt=Ct?s:_t(pe),rn=Tt?s:_t($e),Dn=(xt=xt==o?f:xt)==f,Dr=(rn=rn==o?f:rn)==f,Ln=xt==rn;if(Ln&&nn(pe)){if(!nn($e))return!1;Ct=!0,Dn=!1}if(Ln&&!Dn)return Ge||(Ge=new he),Ct||$r(pe)?or(pe,$e,He,dt,Qe,Ge):function(Ye,Fe,Lr,mn,Mi,$t,an){switch(Lr){case k:if(Ye.byteLength!=Fe.byteLength||Ye.byteOffset!=Fe.byteOffset)return!1;Ye=Ye.buffer,Fe=Fe.buffer;case N:return!(Ye.byteLength!=Fe.byteLength||!$t(new _e(Ye),new _e(Fe)));case u:case d:case S:return kr(+Ye,+Fe);case h:return Ye.name==Fe.name&&Ye.message==Fe.message;case x:case R:return Ye==Fe+"";case y:var fn=X;case E:var dr=mn&r;if(fn||(fn=ee),Ye.size!=Fe.size&&!dr)return!1;var zr=an.get(Ye);if(zr)return zr==Fe;mn|=i,an.set(Ye,Fe);var Ni=or(fn(Ye),fn(Fe),mn,Mi,$t,an);return an.delete(Ye),Ni;case M:if(Ue)return Ue.call(Ye)==Ue.call(Fe)}return!1}(pe,$e,xt,He,dt,Qe,Ge);if(!(He&r)){var ur=Dn&&Ne.call(pe,"__wrapped__"),Oa=Dr&&Ne.call($e,"__wrapped__");if(ur||Oa){var ll=ur?pe.value():pe,cl=Oa?$e.value():$e;return Ge||(Ge=new he),Qe(ll,cl,He,dt,Ge)}}return Ln?(Ge||(Ge=new he),function(Ye,Fe,Lr,mn,Mi,$t){var an=Lr&r,fn=sr(Ye),dr=fn.length,zr=sr(Fe),Ni=zr.length;if(dr!=Ni&&!an)return!1;for(var jr=dr;jr--;){var An=fn[jr];if(!(an?An in Fe:Ne.call(Fe,An)))return!1}var Ia=$t.get(Ye);if(Ia&&$t.get(Fe))return Ia==Fe;var Br=!0;$t.set(Ye,Fe),$t.set(Fe,Ye);for(var Oi=an;++jr<dr;){var Hr=Ye[An=fn[jr]],Vr=Fe[An];if(mn)var Pa=an?mn(Vr,Hr,An,Fe,Ye,$t):mn(Hr,Vr,An,Ye,Fe,$t);if(!(Pa===void 0?Hr===Vr||Mi(Hr,Vr,Lr,mn,$t):Pa)){Br=!1;break}Oi||(Oi=An=="constructor")}if(Br&&!Oi){var Fr=Ye.constructor,Ur=Fe.constructor;Fr==Ur||!("constructor"in Ye)||!("constructor"in Fe)||typeof Fr=="function"&&Fr instanceof Fr&&typeof Ur=="function"&&Ur instanceof Ur||(Br=!1)}return $t.delete(Ye),$t.delete(Fe),Br}(pe,$e,He,dt,Qe,Ge)):!1}(w,T,F,J,Ir,ke))}function wi(w){return!(!cr(w)||function(T){return!!qe&&qe in T}(w))&&(Tr(w)?Ce:_).test(tn(w))}function ar(w){if(F=(T=w)&&T.constructor,J=typeof F=="function"&&F.prototype||fe,T!==J)return ut(w);var T,F,J,ke=[];for(var pe in Object(w))Ne.call(w,pe)&&pe!="constructor"&&ke.push(pe);return ke}function or(w,T,F,J,ke,pe){var $e=F&r,He=w.length,dt=T.length;if(He!=dt&&!($e&&dt>He))return!1;var Qe=pe.get(w);if(Qe&&pe.get(T))return Qe==T;var Ge=-1,Ct=!0,Tt=F&i?new ye:void 0;for(pe.set(w,T),pe.set(T,w);++Ge<He;){var xt=w[Ge],rn=T[Ge];if(J)var Dn=$e?J(rn,xt,Ge,T,w,pe):J(xt,rn,Ge,w,T,pe);if(Dn!==void 0){if(Dn)continue;Ct=!1;break}if(Tt){if(!ne(T,function(Dr,Ln){if(ur=Ln,!Tt.has(ur)&&(xt===Dr||ke(xt,Dr,F,J,pe)))return Tt.push(Ln);var ur})){Ct=!1;break}}else if(xt!==rn&&!ke(xt,rn,F,J,pe)){Ct=!1;break}}return pe.delete(w),pe.delete(T),Ct}function sr(w){return function(T,F,J){var ke=F(T);return En(T)?ke:function(pe,$e){for(var He=-1,dt=$e.length,Qe=pe.length;++He<dt;)pe[Qe+He]=$e[He];return pe}(ke,J(T))}(w,je,Pr)}function $n(w,T){var F,J,ke=w.__data__;return((J=typeof(F=T))=="string"||J=="number"||J=="symbol"||J=="boolean"?F!=="__proto__":F===null)?ke[typeof T=="string"?"string":"hash"]:ke.map}function pn(w,T){var F=function(J,ke){return J==null?void 0:J[ke]}(w,T);return wi(F)?F:void 0}ze.prototype.clear=function(){this.__data__=gt?gt(null):{},this.size=0},ze.prototype.delete=function(w){var T=this.has(w)&&delete this.__data__[w];return this.size-=T?1:0,T},ze.prototype.get=function(w){var T=this.__data__;if(gt){var F=T[w];return F===e?void 0:F}return Ne.call(T,w)?T[w]:void 0},ze.prototype.has=function(w){var T=this.__data__;return gt?T[w]!==void 0:Ne.call(T,w)},ze.prototype.set=function(w,T){var F=this.__data__;return this.size+=this.has(w)?0:1,F[w]=gt&&T===void 0?e:T,this},ie.prototype.clear=function(){this.__data__=[],this.size=0},ie.prototype.delete=function(w){var T=this.__data__,F=kt(T,w);return!(F<0)&&(F==T.length-1?T.pop():Be.call(T,F,1),--this.size,!0)},ie.prototype.get=function(w){var T=this.__data__,F=kt(T,w);return F<0?void 0:T[F][1]},ie.prototype.has=function(w){return kt(this.__data__,w)>-1},ie.prototype.set=function(w,T){var F=this.__data__,J=kt(F,w);return J<0?(++this.size,F.push([w,T])):F[J][1]=T,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new ze,map:new(Se||ie),string:new ze}},oe.prototype.delete=function(w){var T=$n(this,w).delete(w);return this.size-=T?1:0,T},oe.prototype.get=function(w){return $n(this,w).get(w)},oe.prototype.has=function(w){return $n(this,w).has(w)},oe.prototype.set=function(w,T){var F=$n(this,w),J=F.size;return F.set(w,T),this.size+=F.size==J?0:1,this},ye.prototype.add=ye.prototype.push=function(w){return this.__data__.set(w,e),this},ye.prototype.has=function(w){return this.__data__.has(w)},he.prototype.clear=function(){this.__data__=new ie,this.size=0},he.prototype.delete=function(w){var T=this.__data__,F=T.delete(w);return this.size=T.size,F},he.prototype.get=function(w){return this.__data__.get(w)},he.prototype.has=function(w){return this.__data__.has(w)},he.prototype.set=function(w,T){var F=this.__data__;if(F instanceof ie){var J=F.__data__;if(!Se||J.length<199)return J.push([w,T]),this.size=++F.size,this;F=this.__data__=new oe(J)}return F.set(w,T),this.size=F.size,this};var Pr=Ie?function(w){return w==null?[]:(w=Object(w),function(T,F){for(var J=-1,ke=T==null?0:T.length,pe=0,$e=[];++J<ke;){var He=T[J];F(He,J,T)&&($e[pe++]=He)}return $e}(Ie(w),function(T){return tt.call(w,T)}))}:function(){return[]},_t=St;function Rr(w,T){return!!(T=T??a)&&(typeof w=="number"||j.test(w))&&w>-1&&w%1==0&&w<T}function tn(w){if(w!=null){try{return Le.call(w)}catch{}try{return w+""}catch{}}return""}function kr(w,T){return w===T||w!=w&&T!=T}(Ve&&_t(new Ve(new ArrayBuffer(1)))!=k||Se&&_t(new Se)!=y||Ze&&_t(Ze.resolve())!=b||nt&&_t(new nt)!=E||bt&&_t(new bt)!=$)&&(_t=function(w){var T=St(w),F=T==f?w.constructor:void 0,J=F?tn(F):"";if(J)switch(J){case Ut:return k;case Je:return y;case rt:return b;case mt:return E;case hn:return $}return T});var _r=ir(function(){return arguments}())?ir:function(w){return gn(w)&&Ne.call(w,"callee")&&!tt.call(w,"callee")},En=Array.isArray,nn=Xe||function(){return!1};function Tr(w){if(!cr(w))return!1;var T=St(w);return T==v||T==m||T==l||T==A}function lr(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=a}function cr(w){var T=typeof w;return w!=null&&(T=="object"||T=="function")}function gn(w){return w!=null&&typeof w=="object"}var $r=Q?function(w){return function(T){return w(T)}}(Q):function(w){return gn(w)&&lr(w.length)&&!!D[St(w)]};function je(w){return(T=w)!=null&&lr(T.length)&&!Tr(T)?wt(w):ar(w);var T}n.exports=function(w,T){return Ir(w,T)}})(la,la.exports);var $p=wr(la.exports);function co(n,t,e){return n[t]?n[t][0]?n[t][0][e]:n[t][e]:t==="contentBoxSize"?n.contentRect[e==="inlineSize"?"width":"height"]:void 0}function Dp(n){n===void 0&&(n={});var t=n.onResize,e=c.useRef(void 0);e.current=t;var r=n.round||Math.round,i=c.useRef(),a=c.useState({width:void 0,height:void 0}),o=a[0],s=a[1],l=c.useRef(!1);c.useEffect(function(){return l.current=!1,function(){l.current=!0}},[]);var u=c.useRef({width:void 0,height:void 0}),d=function(h,v){var m=c.useRef(null),y=c.useRef(null);y.current=v;var S=c.useRef(null);c.useEffect(function(){g()});var g=c.useCallback(function(){var f=S.current,b=y.current,A=f||(b?b instanceof Element?b:b.current:null);m.current&&m.current.element===A&&m.current.subscriber===h||(m.current&&m.current.cleanup&&m.current.cleanup(),m.current={element:A,subscriber:h,cleanup:A?h(A):void 0})},[h]);return c.useEffect(function(){return function(){m.current&&m.current.cleanup&&(m.current.cleanup(),m.current=null)}},[]),c.useCallback(function(f){S.current=f,g()},[g])}(c.useCallback(function(h){return i.current&&i.current.box===n.box&&i.current.round===r||(i.current={box:n.box,round:r,instance:new ResizeObserver(function(v){var m=v[0],y=n.box==="border-box"?"borderBoxSize":n.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",S=co(m,y,"inlineSize"),g=co(m,y,"blockSize"),f=S?r(S):void 0,b=g?r(g):void 0;if(u.current.width!==f||u.current.height!==b){var A={width:f,height:b};u.current.width=f,u.current.height=b,e.current?e.current(A):l.current||s(A)}})}),i.current.instance.observe(h,{box:n.box}),function(){i.current&&i.current.instance.unobserve(h)}},[n.box,r]),n.ref);return c.useMemo(function(){return{ref:d,width:o.width,height:o.height}},[d,o.width,o.height])}var Lp="allotment-module_splitView__L-yRc",zp="allotment-module_sashContainer__fzwJF",jp="allotment-module_splitViewContainer__rQnVa",Ts="allotment-module_splitViewView__MGZ6O",Bp="allotment-module_vertical__WSwwa",Hp="allotment-module_horizontal__7doS8",Vp="allotment-module_separatorBorder__x-rDS";let hr,$s=!1,Ds=!1;typeof navigator=="object"&&(hr=navigator.userAgent,Ds=hr.indexOf("Macintosh")>=0,$s=(hr.indexOf("Macintosh")>=0||hr.indexOf("iPad")>=0||hr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const Ls=$s,Fp=Ds,uo=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?c.useLayoutEffect:c.useEffect;let Up=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(t){this._size=t}};function Yr(n,t){const e=n.length,r=e-t.length;return r>=0&&n.slice(r,e)===t}var zs={exports:{}};(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}function i(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function a(l,u,d,h,v){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new i(d,h||l,v),y=e?e+u:u;return l._events[y]?l._events[y].fn?l._events[y]=[l._events[y],m]:l._events[y].push(m):(l._events[y]=m,l._eventsCount++),l}function o(l,u){--l._eventsCount==0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1)),s.prototype.eventNames=function(){var l,u,d=[];if(this._eventsCount===0)return d;for(u in l=this._events)t.call(l,u)&&d.push(e?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(l)):d},s.prototype.listeners=function(l){var u=e?e+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,v=d.length,m=new Array(v);h<v;h++)m[h]=d[h].fn;return m},s.prototype.listenerCount=function(l){var u=e?e+l:l,d=this._events[u];return d?d.fn?1:d.length:0},s.prototype.emit=function(l,u,d,h,v,m){var y=e?e+l:l;if(!this._events[y])return!1;var S,g,f=this._events[y],b=arguments.length;if(f.fn){switch(f.once&&this.removeListener(l,f.fn,void 0,!0),b){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,u),!0;case 3:return f.fn.call(f.context,u,d),!0;case 4:return f.fn.call(f.context,u,d,h),!0;case 5:return f.fn.call(f.context,u,d,h,v),!0;case 6:return f.fn.call(f.context,u,d,h,v,m),!0}for(g=1,S=new Array(b-1);g<b;g++)S[g-1]=arguments[g];f.fn.apply(f.context,S)}else{var A,x=f.length;for(g=0;g<x;g++)switch(f[g].once&&this.removeListener(l,f[g].fn,void 0,!0),b){case 1:f[g].fn.call(f[g].context);break;case 2:f[g].fn.call(f[g].context,u);break;case 3:f[g].fn.call(f[g].context,u,d);break;case 4:f[g].fn.call(f[g].context,u,d,h);break;default:if(!S)for(A=1,S=new Array(b-1);A<b;A++)S[A-1]=arguments[A];f[g].fn.apply(f[g].context,S)}}return!0},s.prototype.on=function(l,u,d){return a(this,l,u,d,!1)},s.prototype.once=function(l,u,d){return a(this,l,u,d,!0)},s.prototype.removeListener=function(l,u,d,h){var v=e?e+l:l;if(!this._events[v])return this;if(!u)return o(this,v),this;var m=this._events[v];if(m.fn)m.fn!==u||h&&!m.once||d&&m.context!==d||o(this,v);else{for(var y=0,S=[],g=m.length;y<g;y++)(m[y].fn!==u||h&&!m[y].once||d&&m[y].context!==d)&&S.push(m[y]);S.length?this._events[v]=S.length===1?S[0]:S:o(this,v)}return this},s.prototype.removeAllListeners=function(l){var u;return l?(u=e?e+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=e,s.EventEmitter=s,n.exports=s})(zs);var wa=wr(zs.exports);function ho(n,t){const e=n.indexOf(t);e>-1&&(n.splice(e,1),n.unshift(t))}function ji(n,t){const e=n.indexOf(t);e>-1&&(n.splice(e,1),n.push(t))}function Dt(n,t,e=1){const r=Math.max(0,Math.ceil((t-n)/e)),i=new Array(r);let a=-1;for(;++a<r;)i[a]=n+a*e;return i}var po=NaN,Gp="[object Symbol]",Wp=/^\s+|\s+$/g,Xp=/^[-+]0x[0-9a-f]+$/i,Yp=/^0b[01]+$/i,Kp=/^0o[0-7]+$/i,qp=parseInt,Zp=typeof yn=="object"&&yn&&yn.Object===Object&&yn,Qp=typeof self=="object"&&self&&self.Object===Object&&self,Jp=Zp||Qp||Function("return this")(),eg=Object.prototype.toString,tg=Math.max,ng=Math.min,Bi=function(){return Jp.Date.now()};function ca(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}function go(n){if(typeof n=="number")return n;if(function(r){return typeof r=="symbol"||function(i){return!!i&&typeof i=="object"}(r)&&eg.call(r)==Gp}(n))return po;if(ca(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=ca(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=n.replace(Wp,"");var e=Yp.test(n);return e||Kp.test(n)?qp(n.slice(2),e?2:8):Xp.test(n)?po:+n}var rg=wr(function(n,t,e){var r,i,a,o,s,l,u=0,d=!1,h=!1,v=!0;if(typeof n!="function")throw new TypeError("Expected a function");function m(b){var A=r,x=i;return r=i=void 0,u=b,o=n.apply(x,A)}function y(b){var A=b-l;return l===void 0||A>=t||A<0||h&&b-u>=a}function S(){var b=Bi();if(y(b))return g(b);s=setTimeout(S,function(A){var x=t-(A-l);return h?ng(x,a-(A-u)):x}(b))}function g(b){return s=void 0,v&&r?m(b):(r=i=void 0,o)}function f(){var b=Bi(),A=y(b);if(r=arguments,i=this,l=b,A){if(s===void 0)return function(x){return u=x,s=setTimeout(S,t),d?m(x):o}(l);if(h)return s=setTimeout(S,t),m(l)}return s===void 0&&(s=setTimeout(S,t)),o}return t=go(t)||0,ca(e)&&(d=!!e.leading,a=(h="maxWait"in e)?tg(go(e.maxWait)||0,t):a,v="trailing"in e?!!e.trailing:v),f.cancel=function(){s!==void 0&&clearTimeout(s),u=0,r=l=i=s=void 0},f.flush=function(){return s===void 0?o:g(Bi())},f}),ig="sash-module_sash__K-9lB",ag="sash-module_disabled__Hm-wx",og="sash-module_mac__Jf6OJ",mo="sash-module_vertical__pB-rs",sg="sash-module_minimum__-UKxp",lg="sash-module_maximum__TCWxD",fo="sash-module_horizontal__kFbiw",Hi="sash-module_hover__80W6I",Vi="sash-module_active__bJspD";let Lt=function(n){return n.Vertical="VERTICAL",n.Horizontal="HORIZONTAL",n}({}),It=function(n){return n.Disabled="DISABLED",n.Minimum="MINIMUM",n.Maximum="MAXIMUM",n.Enabled="ENABLED",n}({}),js=Ls?20:8;const Bs=new wa;class vo extends wa{get state(){return this._state}set state(t){this._state!==t&&(this.el.classList.toggle(ag,t===It.Disabled),this.el.classList.toggle("sash-disabled",t===It.Disabled),this.el.classList.toggle(sg,t===It.Minimum),this.el.classList.toggle("sash-minimum",t===It.Minimum),this.el.classList.toggle(lg,t===It.Maximum),this.el.classList.toggle("sash-maximum",t===It.Maximum),this._state=t,this.emit("enablementChange",t))}constructor(t,e,r){var i;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=rg(a=>a.classList.add("sash-hover",Hi),this.hoverDelay),this._state=It.Enabled,this.onPointerStart=a=>{const o=a.pageX,s=a.pageY,l={startX:o,currentX:o,startY:s,currentY:s};this.el.classList.add("sash-active",Vi),this.emit("start",l),this.el.setPointerCapture(a.pointerId);const u=h=>{h.preventDefault();const v={startX:o,currentX:h.pageX,startY:s,currentY:h.pageY};this.emit("change",v)},d=h=>{h.preventDefault(),this.el.classList.remove("sash-active",Vi),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(h.pointerId),window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",d)};window.addEventListener("pointermove",u),window.addEventListener("pointerup",d)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(Vi)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",Hi)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",Hi)},this.el=document.createElement("div"),this.el.classList.add("sash",ig),this.el.dataset.testid="sash",t.append(this.el),Fp&&this.el.classList.add("sash-mac",og),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof r.size=="number"?(this.size=r.size,r.orientation===Lt.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=js,Bs.on("onDidChangeGlobalSize",a=>{this.size=a,this.layout()})),this.layoutProvider=e,this.orientation=(i=r.orientation)!=null?i:Lt.Vertical,this.orientation===Lt.Horizontal?(this.el.classList.add("sash-horizontal",fo),this.el.classList.remove("sash-vertical",mo)):(this.el.classList.remove("sash-horizontal",fo),this.el.classList.add("sash-vertical",mo)),this.layout()}layout(){if(this.orientation===Lt.Vertical){const t=this.layoutProvider;this.el.style.left=t.getVerticalSashLeft(this)-this.size/2+"px",t.getVerticalSashTop&&(this.el.style.top=t.getVerticalSashTop(this)+"px"),t.getVerticalSashHeight&&(this.el.style.height=t.getVerticalSashHeight(this)+"px")}else{const t=this.layoutProvider;this.el.style.top=t.getHorizontalSashTop(this)-this.size/2+"px",t.getHorizontalSashLeft&&(this.el.style.left=t.getHorizontalSashLeft(this)+"px"),t.getHorizontalSashWidth&&(this.el.style.width=t.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let ci;var Fi;(Fi=ci||(ci={})).Distribute={type:"distribute"},Fi.Split=function(n){return{type:"split",index:n}},Fi.Invisible=function(n){return{type:"invisible",cachedVisibleSize:n}};let sn=function(n){return n.Normal="NORMAL",n.Low="LOW",n.High="HIGH",n}({});class Hs{constructor(t,e,r){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=t,this.view=e,this.container.classList.add("split-view-view",Ts),this.container.dataset.testid="split-view-view",typeof r=="number"?(this._size=r,this._cachedVisibleSize=void 0,t.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=r.cachedVisibleSize)}set size(t){this._size=t}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(t,e){t!==this.visible&&(t?(this.size=Ht(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof e=="number"?e:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",t),this.view.setVisible&&this.view.setVisible(t))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(t){this.container.style.pointerEvents=t?"":"none"}layout(t){this.layoutContainer(t),this.view.layout(this.size,t)}}let cg=class extends Hs{layoutContainer(t){this.container.style.left=`${t}px`,this.container.style.width=`${this.size}px`}},ug=class extends Hs{layoutContainer(t){this.container.style.top=`${t}px`,this.container.style.height=`${this.size}px`}};class dg extends wa{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(t){this._startSnappingEnabled!==t&&(this._startSnappingEnabled=t,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(t){this._endSnappingEnabled!==t&&(this._endSnappingEnabled=t,this.updateSashEnablement())}constructor(t,e={},r,i,a){var o,s;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=l=>{this.emit("sashchange",l),this.saveProportions();for(const u of this.viewItems)u.enabled=!0},this.orientation=(o=e.orientation)!=null?o:Lt.Vertical,this.proportionalLayout=(s=e.proportionalLayout)!=null?s:!0,this.getSashOrthogonalSize=e.getSashOrthogonalSize,r&&(this.onDidChange=r),i&&(this.onDidDragStart=i),a&&(this.onDidDragEnd=a),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",zp),t.prepend(this.sashContainer),e.descriptor){this.size=e.descriptor.size;for(const[l,u]of e.descriptor.views.entries()){const d=u.size,h=u.container,v=u.view;this.addView(h,v,d,l,!0)}this.contentSize=this.viewItems.reduce((l,u)=>l+u.size,0),this.saveProportions()}}addView(t,e,r,i=this.viewItems.length,a){let o;o=typeof r=="number"?r:r.type==="split"?this.getViewSize(r.index)/2:r.type==="invisible"?{cachedVisibleSize:r.cachedVisibleSize}:e.minimumSize;const s=this.orientation===Lt.Vertical?new ug(t,e,o):new cg(t,e,o);if(this.viewItems.splice(i,0,s),this.viewItems.length>1){const l=this.orientation===Lt.Vertical?new vo(this.sashContainer,{getHorizontalSashTop:h=>this.getSashPosition(h),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:Lt.Horizontal}):new vo(this.sashContainer,{getVerticalSashLeft:h=>this.getSashPosition(h),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:Lt.Vertical}),u=this.orientation===Lt.Vertical?h=>({sash:l,start:h.startY,current:h.currentY}):h=>({sash:l,start:h.startX,current:h.currentX});l.on("start",h=>{var v;this.emit("sashDragStart"),this.onSashStart(u(h));const m=this.viewItems.map(y=>y.size);(v=this.onDidDragStart)==null||v.call(this,m)}),l.on("change",h=>this.onSashChange(u(h))),l.on("end",()=>{var h;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(m=>m.sash===l));const v=this.viewItems.map(m=>m.size);(h=this.onDidDragEnd)==null||h.call(this,v)}),l.on("reset",()=>{const h=this.sashItems.findIndex(g=>g.sash===l),v=Dt(h,-1,-1),m=Dt(h+1,this.viewItems.length),y=this.findFirstSnapIndex(v),S=this.findFirstSnapIndex(m);(typeof y!="number"||this.viewItems[y].visible)&&(typeof S!="number"||this.viewItems[S].visible)&&this.emit("sashreset",h)});const d={sash:l};this.sashItems.splice(i-1,0,d)}a||this.relayout(),a||typeof r=="number"||r.type!=="distribute"||this.distributeViewSizes()}removeView(t,e){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");const r=this.viewItems.splice(t,1)[0].view;if(this.viewItems.length>=1){const i=Math.max(t-1,0);this.sashItems.splice(i,1)[0].sash.dispose()}return this.relayout(),e&&e.type==="distribute"&&this.distributeViewSizes(),r}moveView(t,e,r){const i=this.getViewCachedVisibleSize(e),a=i===void 0?this.getViewSize(e):ci.Invisible(i),o=this.removeView(e);this.addView(t,o,a,r)}getViewCachedVisibleSize(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].cachedVisibleSize}layout(t=this.size){const e=Math.max(this.size,this.contentSize);if(this.size=t,this.proportions)for(let r=0;r<this.viewItems.length;r++){const i=this.viewItems[r];i.size=Ht(Math.round(this.proportions[r]*t),i.minimumSize,i.maximumSize)}else{const r=Dt(0,this.viewItems.length),i=r.filter(o=>this.viewItems[o].priority===sn.Low),a=r.filter(o=>this.viewItems[o].priority===sn.High);this.resize(this.viewItems.length-1,t-e,void 0,i,a)}this.distributeEmptySpace(),this.layoutViews()}resizeView(t,e){if(t<0||t>=this.viewItems.length)return;const r=Dt(0,this.viewItems.length).filter(s=>s!==t),i=[...r.filter(s=>this.viewItems[s].priority===sn.Low),t],a=r.filter(s=>this.viewItems[s].priority===sn.High),o=this.viewItems[t];e=Math.round(e),e=Ht(e,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=e,this.relayout(i,a)}resizeViews(t){for(let e=0;e<t.length;e++){const r=this.viewItems[e];let i=t[e];i=Math.round(i),i=Ht(i,r.minimumSize,Math.min(r.maximumSize,this.size)),r.size=i}this.contentSize=this.viewItems.reduce((e,r)=>e+r.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(t){return t<0||t>=this.viewItems.length?-1:this.viewItems[t].size}isViewVisible(t){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[t].visible}setViewVisible(t,e){if(t<0||t>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[t].setVisible(e),this.distributeEmptySpace(t),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const t=[];let e=0;for(const s of this.viewItems)s.maximumSize-s.minimumSize>0&&(t.push(s),e+=s.size);const r=Math.floor(e/t.length);for(const s of t)s.size=Ht(r,s.minimumSize,s.maximumSize);const i=Dt(0,this.viewItems.length),a=i.filter(s=>this.viewItems[s].priority===sn.Low),o=i.filter(s=>this.viewItems[s].priority===sn.High);this.relayout(a,o)}dispose(){this.sashItems.forEach(t=>t.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(t,e){const r=this.viewItems.reduce((i,a)=>i+a.size,0);this.resize(this.viewItems.length-1,this.size-r,void 0,t,e),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:t,start:e}){const r=this.sashItems.findIndex(i=>i.sash===t);(i=>{const a=this.viewItems.map(b=>b.size);let o,s,l=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;const d=Dt(r,-1,-1),h=Dt(r+1,this.viewItems.length),v=d.reduce((b,A)=>b+(this.viewItems[A].minimumSize-a[A]),0),m=d.reduce((b,A)=>b+(this.viewItems[A].viewMaximumSize-a[A]),0),y=h.length===0?Number.POSITIVE_INFINITY:h.reduce((b,A)=>b+(a[A]-this.viewItems[A].minimumSize),0),S=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((b,A)=>b+(a[A]-this.viewItems[A].viewMaximumSize),0);l=Math.max(v,S),u=Math.min(y,m);const g=this.findFirstSnapIndex(d),f=this.findFirstSnapIndex(h);if(typeof g=="number"){const b=this.viewItems[g],A=Math.floor(b.viewMinimumSize/2);o={index:g,limitDelta:b.visible?l-A:l+A,size:b.size}}if(typeof f=="number"){const b=this.viewItems[f],A=Math.floor(b.viewMinimumSize/2);s={index:f,limitDelta:b.visible?u+A:u-A,size:b.size}}this.sashDragState={start:i,current:i,index:r,sizes:a,minDelta:l,maxDelta:u,snapBefore:o,snapAfter:s}})(e)}onSashChange({current:t}){const{index:e,start:r,sizes:i,minDelta:a,maxDelta:o,snapBefore:s,snapAfter:l}=this.sashDragState;this.sashDragState.current=t;const u=t-r;this.resize(e,u,i,void 0,void 0,a,o,s,l),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(t){let e=0;for(let r=0;r<this.sashItems.length;r++)if(e+=this.viewItems[r].size,this.sashItems[r].sash===t)return e;return 0}resize(t,e,r=this.viewItems.map(d=>d.size),i,a,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,l,u){if(t<0||t>=this.viewItems.length)return 0;const d=Dt(t,-1,-1),h=Dt(t+1,this.viewItems.length);if(a)for(const M of a)ho(d,M),ho(h,M);if(i)for(const M of i)ji(d,M),ji(h,M);const v=d.map(M=>this.viewItems[M]),m=d.map(M=>r[M]),y=h.map(M=>this.viewItems[M]),S=h.map(M=>r[M]),g=d.reduce((M,O)=>M+(this.viewItems[O].minimumSize-r[O]),0),f=d.reduce((M,O)=>M+(this.viewItems[O].maximumSize-r[O]),0),b=h.length===0?Number.POSITIVE_INFINITY:h.reduce((M,O)=>M+(r[O]-this.viewItems[O].minimumSize),0),A=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((M,O)=>M+(r[O]-this.viewItems[O].maximumSize),0),x=Math.max(g,A,o),E=Math.min(b,f,s);let R=!1;if(l){const M=this.viewItems[l.index],O=e>=l.limitDelta;R=O!==M.visible,M.setVisible(O,l.size)}if(!R&&u){const M=this.viewItems[u.index],O=e<u.limitDelta;R=O!==M.visible,M.setVisible(O,u.size)}if(R)return this.resize(t,e,r,i,a,o,s);for(let M=0,O=e=Ht(e,x,E);M<v.length;M++){const $=v[M],N=Ht(m[M]+O,$.minimumSize,$.maximumSize);O-=N-m[M],$.size=N}for(let M=0,O=e;M<y.length;M++){const $=y[M],N=Ht(S[M]-O,$.minimumSize,$.maximumSize);O+=N-S[M],$.size=N}return e}distributeEmptySpace(t){const e=this.viewItems.reduce((a,o)=>a+o.size,0);let r=this.size-e;const i=Dt(this.viewItems.length-1,-1,-1);typeof t=="number"&&ji(i,t);for(let a=0;r!==0&&a<i.length;a++){const o=this.viewItems[i[a]],s=Ht(o.size+r,o.minimumSize,o.maximumSize);r-=s-o.size,o.size=s}}layoutViews(){var t;this.contentSize=this.viewItems.reduce((r,i)=>r+i.size,0);let e=0;for(const r of this.viewItems)r.layout(e),e+=r.size;(t=this.onDidChange)!=null&&t.call(this,this.viewItems.map(r=>r.size)),this.sashItems.forEach(r=>r.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(t=>t.size/this.contentSize))}updateSashEnablement(){let t=!1;const e=this.viewItems.map(l=>t=l.size-l.minimumSize>0||t);t=!1;const r=this.viewItems.map(l=>t=l.maximumSize-l.size>0||t),i=[...this.viewItems].reverse();t=!1;const a=i.map(l=>t=l.size-l.minimumSize>0||t).reverse();t=!1;const o=i.map(l=>t=l.maximumSize-l.size>0||t).reverse();let s=0;for(let l=0;l<this.sashItems.length;l++){const{sash:u}=this.sashItems[l];s+=this.viewItems[l].size;const d=!(e[l]&&o[l+1]),h=!(r[l]&&a[l+1]);if(d&&h){const v=Dt(l,-1,-1),m=Dt(l+1,this.viewItems.length),y=this.findFirstSnapIndex(v),S=this.findFirstSnapIndex(m),g=typeof y=="number"&&!this.viewItems[y].visible,f=typeof S=="number"&&!this.viewItems[S].visible;g&&a[l]&&(s>0||this.startSnappingEnabled)?u.state=It.Minimum:f&&e[l]&&(s<this.contentSize||this.endSnappingEnabled)?u.state=It.Maximum:u.state=It.Disabled}else u.state=d&&!h?It.Minimum:!d&&h?It.Maximum:It.Enabled}}findFirstSnapIndex(t){for(const e of t){const r=this.viewItems[e];if(r.visible&&r.snap)return e}for(const e of t){const r=this.viewItems[e];if(r.visible&&r.maximumSize-r.minimumSize>0)return;if(!r.visible&&r.snap)return e}}}let Hn=class{constructor(t){this.size=void 0,this.size=t}getPreferredSize(){return this.size}};class yo{constructor(t,e){this.proportion=void 0,this.layoutService=void 0,this.proportion=t,this.layoutService=e}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class Kr{getPreferredSize(){}}class bo{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(t){if(typeof t=="number")this.layoutStrategy=new Hn(t);else if(typeof t=="string"){const e=t.trim();if(Yr(e,"%")){const r=Number(e.slice(0,-1))/100;this.layoutStrategy=new yo(r,this.layoutService)}else if(Yr(e,"px")){const r=Number(e.slice(0,-2))/100;this.layoutStrategy=new Hn(r)}else if(typeof Number.parseFloat(e)=="number"){const r=Number.parseFloat(e);this.layoutStrategy=new Hn(r)}else this.layoutStrategy=new Kr}else this.layoutStrategy=new Kr}constructor(t,e){var r;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=t,this.element=e.element,this.minimumSize=typeof e.minimumSize=="number"?e.minimumSize:30,this.maximumSize=typeof e.maximumSize=="number"?e.maximumSize:Number.POSITIVE_INFINITY,typeof e.preferredSize=="number")this.layoutStrategy=new Hn(e.preferredSize);else if(typeof e.preferredSize=="string"){const i=e.preferredSize.trim();if(Yr(i,"%")){const a=Number(i.slice(0,-1))/100;this.layoutStrategy=new yo(a,this.layoutService)}else if(Yr(i,"px")){const a=Number(i.slice(0,-2));this.layoutStrategy=new Hn(a)}else if(typeof Number.parseFloat(i)=="number"){const a=Number.parseFloat(i);this.layoutStrategy=new Hn(a)}else this.layoutStrategy=new Kr}else this.layoutStrategy=new Kr;this.priority=(r=e.priority)!=null?r:sn.Normal,this.snap=typeof e.snap=="boolean"&&e.snap}layout(t){}}function So(n){return n.minSize!==void 0||n.maxSize!==void 0||n.preferredSize!==void 0||n.priority!==void 0||n.visible!==void 0}const Ma=c.forwardRef(({className:n,children:t},e)=>L.createElement("div",{ref:e,className:sa("split-view-view",Ts,n)},t));Ma.displayName="Allotment.Pane";const Vs=c.forwardRef(({children:n,className:t,id:e,maxSize:r=1/0,minSize:i=30,proportionalLayout:a=!0,separator:o=!0,sizes:s,defaultSizes:l=s,snap:u=!1,vertical:d=!1,onChange:h,onReset:v,onVisibleChange:m,onDragStart:y,onDragEnd:S},g)=>{const f=c.useRef(null),b=c.useRef([]),A=c.useRef(new Map),x=c.useRef(null),E=c.useRef(new Map),R=c.useRef(new Up),M=c.useRef([]),[O,$]=c.useState(!1),N=c.useMemo(()=>L.Children.toArray(n).filter(L.isValidElement),[n]),k=c.useCallback(_=>{var j,D;const P=(j=M.current)==null?void 0:j[_];return typeof(P==null?void 0:P.preferredSize)=="number"&&((D=x.current)!=null&&D.resizeView(_,Math.round(P.preferredSize)),!0)},[]);return c.useImperativeHandle(g,()=>({reset:()=>{if(v)v();else{var _;(_=x.current)==null||_.distributeViewSizes();for(let j=0;j<M.current.length;j++)k(j)}},resize:_=>{var j;(j=x.current)==null||j.resizeViews(_)}})),uo(()=>{let _=!0;l&&E.current.size!==l.length&&(_=!1,console.warn(`Expected ${l.length} children based on defaultSizes but found ${E.current.size}`)),_&&l&&(b.current=N.map(P=>P.key));const j=vr({orientation:d?Lt.Vertical:Lt.Horizontal,proportionalLayout:a},_&&l&&{descriptor:{size:l.reduce((P,H)=>P+H,0),views:l.map((P,H)=>{var V,q,K,ue;const G=A.current.get(b.current[H]),Z=new bo(R.current,vr({element:document.createElement("div"),minimumSize:(V=G==null?void 0:G.minSize)!=null?V:i,maximumSize:(q=G==null?void 0:G.maxSize)!=null?q:r,priority:(K=G==null?void 0:G.priority)!=null?K:sn.Normal},(G==null?void 0:G.preferredSize)&&{preferredSize:G==null?void 0:G.preferredSize},{snap:(ue=G==null?void 0:G.snap)!=null?ue:u}));return M.current.push(Z),{container:[...E.current.values()][H],size:P,view:Z}})}});x.current=new dg(f.current,j,h,y,S),x.current.on("sashDragStart",()=>{var P;(P=f.current)==null||P.classList.add("split-view-sash-dragging")}),x.current.on("sashDragEnd",()=>{var P;(P=f.current)==null||P.classList.remove("split-view-sash-dragging")}),x.current.on("sashchange",P=>{if(m&&x.current){const H=N.map(V=>V.key);for(let V=0;V<H.length;V++){const q=A.current.get(H[V]);(q==null?void 0:q.visible)!==void 0&&q.visible!==x.current.isViewVisible(V)&&m(V,x.current.isViewVisible(V))}}}),x.current.on("sashreset",P=>{if(v)v();else{var H;if(k(P)||k(P+1))return;(H=x.current)==null||H.distributeViewSizes()}});const D=x.current;return()=>{D.dispose()}},[]),uo(()=>{if(O){const Q=N.map(U=>U.key),ne=[...b.current],X=Q.filter(U=>!b.current.includes(U)),ee=Q.filter(U=>b.current.includes(U)),se=b.current.map(U=>!Q.includes(U));for(let U=se.length-1;U>=0;U--){var _;se[U]&&((_=x.current)!=null&&_.removeView(U),ne.splice(U,1),M.current.splice(U,1))}for(const U of X){var j,D,P,H,V;const W=A.current.get(U),Y=new bo(R.current,vr({element:document.createElement("div"),minimumSize:(j=W==null?void 0:W.minSize)!=null?j:i,maximumSize:(D=W==null?void 0:W.maxSize)!=null?D:r,priority:(P=W==null?void 0:W.priority)!=null?P:sn.Normal},(W==null?void 0:W.preferredSize)&&{preferredSize:W==null?void 0:W.preferredSize},{snap:(H=W==null?void 0:W.snap)!=null?H:u}));(V=x.current)!=null&&V.addView(E.current.get(U),Y,ci.Distribute,Q.findIndex(ae=>ae===U)),ne.splice(Q.findIndex(ae=>ae===U),0,U),M.current.splice(Q.findIndex(ae=>ae===U),0,Y)}for(;!$p(Q,ne);)for(const[U,W]of Q.entries()){const Y=ne.findIndex(ae=>ae===W);if(Y!==U){var q;(q=x.current)==null||q.moveView(E.current.get(W),Y,U);const ae=ne[Y];ne.splice(Y,1),ne.splice(U,0,ae);break}}for(const U of X){var K;const W=Q.findIndex(ae=>ae===U),Y=M.current[W].preferredSize;Y!==void 0&&((K=x.current)==null||K.resizeView(W,Y))}for(const U of[...X,...ee]){var ue,G;const W=A.current.get(U),Y=Q.findIndex(ae=>ae===U);W&&So(W)&&W.visible!==void 0&&((ue=x.current)==null?void 0:ue.isViewVisible(Y))!==W.visible&&((G=x.current)==null||G.setViewVisible(Y,W.visible))}for(const U of ee){const W=A.current.get(U),Y=Q.findIndex(ae=>ae===U);if(W&&So(W)){var Z;W.preferredSize!==void 0&&M.current[Y].preferredSize!==W.preferredSize&&(M.current[Y].preferredSize=W.preferredSize);let ae=!1;W.minSize!==void 0&&M.current[Y].minimumSize!==W.minSize&&(M.current[Y].minimumSize=W.minSize,ae=!0),W.maxSize!==void 0&&M.current[Y].maximumSize!==W.maxSize&&(M.current[Y].maximumSize=W.maxSize,ae=!0),ae&&((Z=x.current)==null||Z.layout())}}(X.length>0||se.length>0)&&(b.current=Q)}},[N,O,r,i,u]),c.useEffect(()=>{x.current&&(x.current.onDidChange=h)},[h]),c.useEffect(()=>{x.current&&(x.current.onDidDragStart=y)},[y]),c.useEffect(()=>{x.current&&(x.current.onDidDragEnd=S)},[S]),Dp({ref:f,onResize:({width:_,height:j})=>{var D;_&&j&&((D=x.current)!=null&&D.layout(d?j:_),R.current.setSize(d?j:_),$(!0))}}),c.useEffect(()=>{Ls&&hg(20)},[]),L.createElement("div",{ref:f,className:sa("split-view",d?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":o},Lp,d?Bp:Hp,{[Vp]:o},t),id:e},L.createElement("div",{className:sa("split-view-container",jp)},L.Children.toArray(n).map(_=>{if(!L.isValidElement(_))return null;const j=_.key;return _.type.displayName==="Allotment.Pane"?(A.current.set(j,_.props),L.cloneElement(_,{key:j,ref:D=>{const P=_.ref;P&&(P.current=D),D?E.current.set(j,D):E.current.delete(j)}})):L.createElement(Ma,{key:j,ref:D=>{D?E.current.set(j,D):E.current.delete(j)}},_)})))});function hg(n){const t=Ht(n,4,20),e=Ht(n,1,8);document.documentElement.style.setProperty("--sash-size",t+"px"),document.documentElement.style.setProperty("--sash-hover-size",e+"px"),function(r){js=r,Bs.emit("onDidChangeGlobalSize",r)}(t)}Vs.displayName="Allotment";var wn=Object.assign(Vs,{Pane:Ma});const pg="_container_jgx61_1",gg="_title_jgx61_12",mg="_body_jgx61_18",fg="_right_jgx61_44",qr={container:pg,title:gg,body:mg,right:fg},vg="_container_21aji_1",yg="_content_21aji_19",Co={container:vg,content:yg},bg="_container_17mrb_1",Sg="_item_17mrb_8",Cg="_active_17mrb_21",xg="_item-slash_17mrb_24",on={container:bg,item:Sg,active:Cg,itemSlash:xg},Eg=n=>{const{parent:t,parents:e,active:r,onClick:i}=n,a=()=>{r&&navigator.clipboard.writeText(r.code),Cr.info("资源id已复制到剪切板")};return z.jsxs("div",{className:on.container,children:[z.jsx("div",{className:re(on.item,{[on.active]:t===""}),onClick:()=>i(""),children:z.jsx("span",{children:"Root"})}),e.map(o=>z.jsxs("div",{className:re(on.item,{[on.active]:t===o.code}),onClick:()=>i(o.code),children:[z.jsx("span",{className:on.itemSlash,children:"/"}),z.jsx("span",{children:o.name})]},o.code)),r&&r.type!="folder"&&z.jsx(z.Fragment,{children:z.jsxs("div",{className:re(on.item,on.active),onClick:a,children:[z.jsx("span",{className:on.itemSlash,children:":"}),z.jsx("span",{children:r==null?void 0:r.name})]})})]})},Ag="_item_4xjdi_1",wg="_item-cover_4xjdi_10",Mg="_item-cover-active_4xjdi_26",Ng="_item-image_4xjdi_29",Og="_item-name_4xjdi_36",Ig="_item-name-active_4xjdi_52",Vn={item:Ag,itemCover:wg,itemCoverActive:Mg,itemImage:Ng,itemName:Og,itemNameActive:Ig},Pg="data:image/svg+xml,%3csvg%20width='597'%20height='478'%20viewBox='0%200%20597%20478'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2046.286V431.014C0%20456.47%2020.682%20477.297%2045.96%20477.297H550.658C575.936%20477.297%20596.618%20456.47%20596.618%20431.014V122.364C596.618%2096.9081%20575.936%2076.0808%20550.658%2076.0808H324.592C310.804%2076.0808%20297.591%2069.7168%20288.686%2058.7246L256.514%2018.5162C247.897%207.81324%20234.97%201.44932%20221.182%201.16005L46.2472%200.00297717C20.682%20-0.286292%200%2020.5411%200%2046.286Z'%20fill='%230091FF'/%3e%3cpath%20d='M0%20212.783V425.707C0%20454.097%2020.682%20477.325%2045.96%20477.325H550.658C575.936%20477.325%20596.618%20454.097%20596.618%20425.707V81.4798C596.618%2053.0899%20575.936%2029.8618%20550.658%2029.8618H369.116C358.488%2029.8618%20347.859%2034.0558%20339.816%2041.7985L223.48%20150.519C215.15%20158.262%20204.522%20162.456%20193.606%20162.456L46.2472%20160.842C20.682%20160.842%200%20184.071%200%20212.783Z'%20fill='%23B7D9F8'/%3e%3c/svg%3e",Rg="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886943620'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='12284'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M534%20352V136H232v752h560V394H576a42%2042%200%200%201-42-42z'%20fill='%23D9D9D9'%20p-id='12285'%3e%3c/path%3e%3cpath%20d='M854.6%20288.6L639.4%2073.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7%200-32%2014.3-32%2032v832c0%2017.7%2014.3%2032%2032%2032h640c17.7%200%2032-14.3%2032-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602%20137.8L790.2%20326H602V137.8zM792%20888H232V136h302v216a42%2042%200%200%200%2042%2042h216v494z'%20p-id='12286'%3e%3c/path%3e%3c/svg%3e",kg="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887095606'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='17156'%20width='170'%20height='170'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M648.76544%200c24.40704%200%2047.8208%209.68704%2065.09568%2026.9312l187.61728%20187.21792a92.16%2092.16%200%200%201%2027.05408%2065.2288v120.6272c44.2368%200%2080.09728%2035.85536%2080.10752%2080.08704v319.7952c0%2043.24864-34.3296%2078.6944-77.55776%2080.06656l-2.54976%200.03072v48.00512c0%2053.02272-43.02848%2096-96.12288%2096H191.5904c-53.0944%200-96.12288-42.97728-96.12288-96v-48.00512c-44.2368%200-80.09728-35.85536-80.10752-80.08704V480.1024c0-43.24864%2034.3296-78.6944%2077.55776-80.06656l2.54976-0.04096V96C95.46752%2042.97728%20138.496%200%20191.5904%200h457.17504z%20m183.64416%20879.99488H191.5904v17.28512a30.72%2030.72%200%200%200%2030.72%2030.72h579.3792a30.72%2030.72%200%200%200%2030.72-30.72v-17.28512z%20m-409.088-329.86112H297.984L267.75552%20721.92h38.33856l10.81344-61.68576h81.59232l6.144-34.16064H323.05152l7.12704-40.79616H417.1776l6.144-35.14368z%20m114.03264-0.24576h-84.7872L422.33856%20721.92h87.73632c36.864%200%2059.22816-12.288%2068.32128-40.30464%206.144-19.16928%200.49152-42.02496-19.90656-49.88928%2021.62688-9.33888%2029.98272-25.31328%2029.98272-42.27072%200-26.78784-21.38112-39.56736-51.11808-39.56736z%20m115.75296%200h-42.02496l-0.24576%201.72032%2043.74528%2083.06688-75.44832%2086.016-0.24576%201.2288h46.6944l48.16896-57.01632L703.73376%20721.92h42.51648l0.24576-1.2288-45.21984-83.31264%2075.44832-85.77024%200.24576-1.72032h-44.2368l-49.88928%2059.22816-29.73696-59.22816z%20m-133.44768%2098.79552c14.99136%200%2022.60992%206.88128%2022.60992%2016.95744%200%2013.5168-9.58464%2022.85568-29.24544%2022.85568h-47.18592l7.12704-39.81312h46.6944z%20m12.04224-65.61792c12.288%200%2017.44896%206.144%2017.44896%2013.5168%200%209.09312-8.35584%2020.15232-24.08448%2020.15232h-46.6944l6.144-33.66912h47.18592z%20m71.51616-494.7456H222.3104a30.72%2030.72%200%200%200-30.72%2030.72v280.95488h640.8192v-81.5616h-137.00096c-50.8928-0.01024-92.14976-41.2672-92.16-92.16l-0.03072-137.95328z%20m96.12288%2059.84256v58.91072a15.36%2015.36%200%200%200%2015.36%2015.36h59.0848l-74.4448-74.27072z'%20fill='%238a8a8a'%20p-id='17157'%3e%3c/path%3e%3c/svg%3e",_g="/longriver1012/glb-CHfdM5il.svg",Tg="/longriver1012/obj-BlhbR6Kx.svg",$g="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886774681'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='11289'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M881.503769%201009.728009a47.58397%2047.58397%200%200%201-33.919979%2014.271991H175.90421c-12.703992%200-24.895984-5.119997-33.919979-14.271991A49.183969%2049.183969%200%200%201%20128.00024%20975.23203V48.76861c0-12.927992%205.023997-25.343984%2014.047991-34.495979A47.58397%2047.58397%200%200%201%20175.93621%200.00064h412.095742c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l259.519838%20263.807835c8.991994%209.183994%2014.015991%2021.663986%2013.951991%2034.623979v662.655585c0%2012.927992-5.055997%2025.343984-14.079991%2034.495979z'%20fill='%23DCF3D1'%20p-id='11290'%3e%3c/path%3e%3cpath%20d='M32.0003%20544.0003h959.9994v319.9998c0%2016.959989-5.055997%2033.279979-14.079991%2045.247972-8.959994%2011.999993-21.183987%2018.751988-33.919979%2018.751988h-863.99946c-12.735992%200-24.959984-6.719996-33.919979-18.751988C37.024297%20897.280079%2032.0003%20880.960089%2032.0003%20864.0001V544.0003z'%20fill='%2352C41A'%20p-id='11291'%3e%3c/path%3e%3cpath%20d='M127.96824%20536.384305v-97.535939L32.0003%20536.384305h95.96794z%20m767.61552%200l0.96-97.535939L991.9997%20536.384305h-96.41594z'%20fill='%23389E0D'%20p-id='11292'%3e%3c/path%3e%3cpath%20d='M895.58376%20319.39244h-259.551838c-26.495983%200-47.99997-21.823986-47.99997-48.767969V0.00064c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l260.031838%20263.807835c8.799995%209.279994%2013.631991%2021.727986%2013.439991%2034.623979v6.815995z'%20fill='%2352C41A'%20opacity='.4'%20p-id='11293'%3e%3c/path%3e%3cpath%20d='M280.000145%20848.00011l4.479997-151.039906%2050.879968%20151.039906h37.759977l50.239968-150.399906%204.799997%20150.399906h43.199973l-14.71999-228.479857h-46.079972l-56.319964%20167.999895-56.319965-167.999895H251.520163L236.800172%20848.00011h43.199973z%20m313.919804%200v-186.879883h62.079961v-41.599974h-168.319895v41.599974h62.079961v186.879883h44.159973z%20m211.519868%200v-41.599974h-84.479948v-186.879883h-44.159972v228.479857h128.63992z'%20fill='%23FFFFFF'%20p-id='11294'%3e%3c/path%3e%3c/svg%3e",Dg="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887007250'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='14135'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M120%20334a40%2040%200%200%201%2040%2040V476h80V374a40%2040%200%201%201%2080%200v284a40%2040%200%201%201-80%200V556H160v102a40%2040%200%201%201-80%200v-284a40%2040%200%200%201%2040-40zM984%20760a40%2040%200%200%201%2040%2040v64c0%2088.224-71.776%20160-160%20160H160c-88.224%200-160-71.776-160-160v-64a40%2040%200%201%201%2080%200v64c0%2044.112%2035.888%2080%2080%2080h704c44.112%200%2080-35.888%2080-80v-64a40%2040%200%200%201%2040-40zM864%200c88.224%200%20160%2071.776%20160%20160v72a40%2040%200%201%201-80%200v-72c0-44.112-35.888-80-80-80H160c-44.112%200-80%2035.888-80%2080v72a40%2040%200%201%201-80%200v-72C0%2071.776%2071.776%200%20160%200h704z%20m78%20460c0%2043.52-22.552%2081.84-56.56%20103.976l49.424%2071.224a40%2040%200%201%201-65.728%2045.6L801.968%20584H780v74a40%2040%200%201%201-80%200V376a40%2040%200%200%201%2040-40h78c68.376%200%20124%2055.624%20124%20124z%20m-124%2044c24.264%200%2044-19.736%2044-44s-19.736-44-44-44H780v88h38zM503%20698H430a40%2040%200%200%201-40-40v-284a40%2040%200%200%201%2040-40h73C574.128%20334%20632%20391.872%20632%20463v106c0%2071.128-57.872%20129-129%20129z%20m-33-284v204h33A49.056%2049.056%200%200%200%20552%20569v-106a49.056%2049.056%200%200%200-49-49H470z'%20fill='%234A90E2'%20p-id='14136'%3e%3c/path%3e%3c/svg%3e",Lg=[{label:"删除",key:"delete"},{label:"导出",key:"export"}],zg=n=>{const{draggable:t,asset:e,active:r,onClick:i,onDoubleClick:a,onRename:o,onDelete:s,onExport:l,onDragStart:u}=n,d=c.useRef(null),[h,v]=c.useState(!1),[m,y]=c.useState(""),S=c.useMemo(()=>{const A=Ep(e.name);return e.cover?e.cover:e.type==="folder"?Pg:wp(A)?URL.createObjectURL(e.file):A==="fbx"?kg:A==="glb"?_g:A==="obj"?Tg:A==="mtl"?$g:A==="hdr"?Dg:Rg},[e]);c.useEffect(()=>{y(e.name)},[e]);const g=()=>{r&&v(!0),setTimeout(()=>{var A;(A=d.current)==null||A.focus()},0)},f=()=>{v(!1),!(!m||m===e.name)&&o(e,m)},b=async({key:A})=>{A==="delete"?s(e):A==="export"&&l(e)};return z.jsx(Wo,{menu:{items:Lg,onClick:b},trigger:["contextMenu"],children:z.jsxs("div",{className:Vn.item,draggable:t,onClick:()=>i(e),onDoubleClick:()=>a(e),onDragStart:u,onContextMenu:A=>A.stopPropagation(),children:[z.jsx("div",{className:re(Vn.itemCover,{[Vn.itemCoverActive]:r}),children:z.jsx("img",{draggable:!1,className:Vn.itemImage,src:S,alt:"cover"})}),z.jsx(yi,{ref:d,value:m,style:{display:h?"block":"none"},onChange:A=>y(A.target.value),onBlur:f,onPressEnter:f}),z.jsx("div",{title:e.name,style:{display:h?"none":"block"},className:re(Vn.itemName,{[Vn.itemNameActive]:r}),onClick:g,children:e.name})]})})},jg=n=>{const{parent:t,visible:e,setVsible:r,onConfirm:i}=n,[a]=Pi.useForm(),[o,s]=c.useState(!1),l=()=>{a.submit()},u=()=>{r(!1)},d=async h=>{try{s(!0),await Dl(t,h.name)===0?(r(!1),i()):Cr.error("文件夹已存在，请更换名称")}catch{Cr.error("创建文件夹失败，请稍后再试")}finally{s(!1)}};return z.jsx(Er,{title:"创建文件夹",open:e,loading:o,onOk:l,onCancel:u,children:z.jsx(Pi,{form:a,onFinish:d,children:z.jsx(Pi.Item,{label:"文件夹名称",name:"name",rules:[{required:!0,message:"请输入文件夹名称"}],children:z.jsx(yi,{placeholder:"请输入文件夹名称"})})})})},Bg=[{label:"新建文件夹",key:"folder"},{label:"导入",key:"import"},{label:"导出",key:"export"}],Hg=["glb","jpg","jpeg","png","hdr","webp"],Vg=()=>{const[n,t]=Cr.useMessage(),[e,r]=c.useState([]),[i,a]=c.useState(),[o,s]=c.useState(""),[l,u]=c.useState([]),[d,h]=c.useState(!1),v=c.useRef(null),m=async N=>{const k=await Ll(N);r(k)};c.useEffect(()=>{m("")},[]);const y=N=>{if(N!==o)if(a(void 0),!N)u([]),s(""),m("");else{const k=l.findIndex(_=>_.code===N);l.splice(k+1,l.length-1-k),u([...l]),s(N),m(N)}},S=async({key:N})=>{N==="folder"?h(!0):N==="export"?await _a(o):N==="import"&&(await zl(),await m(o))},g=N=>{N.preventDefault(),N.dataTransfer.dropEffect="copy",v.current.style.backgroundColor="#53515173",v.current.style.border="1px dashed springgreen"},f=N=>{N.preventDefault(),N.stopPropagation(),v.current.style.backgroundColor="unset",v.current.style.border="unset"},b=async N=>{N.preventDefault(),v.current.style.backgroundColor="unset",v.current.style.border="unset";const k=await jl(N.dataTransfer);Object.keys(k).length<=0||(await Bl(k,o),await m(o),n.info("添加成功"))},A=N=>a(N),x=async N=>{N.type==="folder"&&(a(void 0),await m(N.code),l.push(N),u([...l]),s(N.code))},E=async(N,k)=>{await Vl(N.code,k),await m(o)},R=async N=>{await Hl(N.code),await m(o)},M=async N=>{await _a(N.code)},O=(N,k)=>{const _={type:k.type,item:k};N.dataTransfer.setData("text",JSON.stringify(_))},$=async()=>{await m(o),n.info("添加成功")};return z.jsxs(z.Fragment,{children:[t,z.jsx(Eg,{parent:o,parents:l,active:i,onClick:y}),z.jsx(Wo,{menu:{items:Bg,onClick:S},trigger:["contextMenu"],children:z.jsx("div",{ref:v,className:Co.container,onDragOver:g,onDragLeave:f,onDrop:b,children:z.jsx("div",{className:Co.content,children:e.map(N=>z.jsx(zg,{asset:N,active:(i==null?void 0:i.code)===N.code,draggable:Hg.includes(N.type),onClick:A,onDoubleClick:x,onRename:E,onDelete:R,onExport:M,onDragStart:k=>O(k,N)},N.code))})})}),z.jsx(jg,{parent:o,visible:d,setVsible:h,onConfirm:$})]})},Fg=()=>z.jsxs("div",{className:qr.container,children:[z.jsxs("div",{className:qr.title,children:[z.jsx("span",{className:"iconfont icon-assets"}),z.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Assets"})]}),z.jsx("div",{className:qr.body,children:z.jsx("div",{className:qr.right,children:z.jsx(Vg,{})})})]}),Ug="_container_377r3_1",Gg="_title_377r3_9",Wg="_icon_377r3_14",Xg="_active_377r3_19",Yg="_body_377r3_23",Mn={container:Ug,title:Gg,icon:Wg,active:Xg,body:Yg};class Kg{constructor(t){this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item-label",this.label=document.createElement("div"),this.label.className="attribute-item-label-name",this.container.appendChild(this.label)}hide(){delete this.item}show(t){const{attribute:e,tip:r}=t,{label:i,hiddenLabel:a}=e;this.item=t,this.label.textContent=i,this.label.title=r||i,this.container.style.display=a?"none":"flex"}dispose(){delete this.item}}class qg extends Ta{constructor(t,e){super(),this.isViewHelper=!0,this.animating=!1,this.center=new Et;const r=new Gr("#ff4466"),i=new Gr("#88ff44"),a=new Gr("#4488ff"),o=new Gr("#000000"),s={},l=[],u=new uc,d=new qo,h=new Ta,v=new dc(-2,2,2,-2,0,4);v.position.set(0,0,2);const m=new hc(.04,.04,.8,5).rotateZ(-Math.PI/2).translate(.4,0,0),y=new Ri(m,G(r)),S=new Ri(m,G(i)),g=new Ri(m,G(a));S.rotation.z=Math.PI/2,g.rotation.y=-Math.PI/2,this.add(y),this.add(g),this.add(S);const f=Z(r),b=Z(i),A=Z(a),x=Z(o),E=new zn(f),R=new zn(b),M=new zn(A),O=new zn(x),$=new zn(x),N=new zn(x);E.position.x=1,R.position.y=1,M.position.z=1,O.position.x=-1,$.position.y=-1,N.position.z=-1,O.material.opacity=.2,$.material.opacity=.2,N.material.opacity=.2,E.userData.type="posX",R.userData.type="posY",M.userData.type="posZ",O.userData.type="negX",$.userData.type="negY",N.userData.type="negZ",this.add(E),this.add(R),this.add(M),this.add(O),this.add($),this.add(N),l.push(E),l.push(R),l.push(M),l.push(O),l.push($),l.push(N);const k=new Et,_=128,j=2*Math.PI;this.render=function(ne){this.quaternion.copy(t.quaternion).invert(),this.updateMatrixWorld(),k.set(0,0,1),k.applyQuaternion(t.quaternion);const X=e.offsetWidth-_,ee=ne.isWebGPURenderer?e.offsetHeight-_:0;ne.clearDepth(),ne.getViewport(q),ne.setViewport(X,ee,_,_),ne.render(this,v),ne.setViewport(q.x,q.y,q.z,q.w)};const D=new Et,P=new ki,H=new ki,V=new ki,q=new pc;let K=0;this.handleClick=function(ne){if(this.animating===!0)return!1;const X=e.getBoundingClientRect(),ee=X.left+(e.offsetWidth-_),se=X.top+(e.offsetHeight-_);d.x=(ne.clientX-ee)/(X.right-ee)*2-1,d.y=-((ne.clientY-se)/(X.bottom-se))*2+1,u.setFromCamera(d,v);const U=u.intersectObjects(l);if(U.length>0){const Y=U[0].object;return ue(Y,this.center),this.animating=!0,!0}else return!1},this.setLabels=function(ne,X,ee){s.labelX=ne,s.labelY=X,s.labelZ=ee,Q()},this.setLabelStyle=function(ne,X,ee){s.font=ne,s.color=X,s.radius=ee,Q()},this.update=function(ne){const X=ne*j;H.rotateTowards(V,X),t.position.set(0,0,1).applyQuaternion(H).multiplyScalar(K).add(this.center),t.quaternion.rotateTowards(P,X),H.angleTo(V)===0&&(this.animating=!1)},this.dispose=function(){m.dispose(),y.material.dispose(),S.material.dispose(),g.material.dispose(),E.material.map.dispose(),R.material.map.dispose(),M.material.map.dispose(),O.material.map.dispose(),$.material.map.dispose(),N.material.map.dispose(),E.material.dispose(),R.material.dispose(),M.material.dispose(),O.material.dispose(),$.material.dispose(),N.material.dispose()};function ue(ne,X){switch(ne.userData.type){case"posX":D.set(1,0,0),P.setFromEuler(new jn(0,Math.PI*.5,0));break;case"posY":D.set(0,1,0),P.setFromEuler(new jn(-Math.PI*.5,0,0));break;case"posZ":D.set(0,0,1),P.setFromEuler(new jn);break;case"negX":D.set(-1,0,0),P.setFromEuler(new jn(0,-Math.PI*.5,0));break;case"negY":D.set(0,-1,0),P.setFromEuler(new jn(Math.PI*.5,0,0));break;case"negZ":D.set(0,0,-1),P.setFromEuler(new jn(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}K=t.position.distanceTo(X),D.multiplyScalar(K).add(X),h.position.copy(X),h.lookAt(t.position),H.copy(h.quaternion),h.lookAt(D),V.copy(h.quaternion)}function G(ne){return new Zo({color:ne,toneMapped:!1})}function Z(ne,X){const{font:ee="24px Arial",color:se="#000000",radius:U=14}=s,W=document.createElement("canvas");W.width=64,W.height=64;const Y=W.getContext("2d");Y.beginPath(),Y.arc(32,32,U,0,2*Math.PI),Y.closePath(),Y.fillStyle=ne.getStyle(),Y.fill(),X&&(Y.font=ee,Y.textAlign="center",Y.fillStyle=se,Y.fillText(X,32,41));const ae=new gc(W);return ae.colorSpace=mc,new fc({map:ae,toneMapped:!1})}function Q(){E.material.map.dispose(),R.material.map.dispose(),M.material.map.dispose(),E.material.dispose(),R.material.dispose(),M.material.dispose(),E.material=Z(r,s.labelX),R.material=Z(i,s.labelY),M.material=Z(a,s.labelZ)}}}const kn=n=>{switch(n){case me.SimpleScript:return{id:Un(),enabled:!0,name:pt[me.SimpleScript],type:me.SimpleScript,script:vc};case me.Animator:return{id:Un(),enabled:!0,name:pt[me.Animator],type:me.Animator};case me.OrbitControls:return{id:Un(),enabled:!0,name:pt[me.OrbitControls],type:me.OrbitControls};case me.PointerLockControls:return{id:Un(),enabled:!0,name:pt[me.PointerLockControls],type:me.PointerLockControls};default:throw new Error(`未知组件类型: ${n}`)}};class Fs extends tr{constructor(t){super(t)}async paste(t){const e=t.map(o=>o.serialize()),r=[];Fl(e,"children").forEach(o=>{o.id=Un(),o.components.forEach(s=>s.id=Un()),o.type===Pe.Model&&r.push(this.core.modelManager.preloadModel(o))}),await Promise.all(r);const a=this.core.entityManager.createEntities(e,this.core.entityManager.root);this.core.select(a)}pasteMaterial(t){const e=this.core.lastSelection;!e||!e.material||e.material===t||e.setAttr("material",t)}unmount(){}}class Us extends tr{constructor(e){super(e);C(this,"mouse");C(this,"plane");C(this,"center");C(this,"normal");C(this,"position");C(this,"direction");this.plane=new yc,this.mouse=new qo,this.center=new Et,this.normal=new Et(0,1,0),this.position=new Et,this.direction=new Et}get raycaster(){return this.core.render.raycaster}get camera(){return this.core.render.camera}async drop(e,r,i){if(!this.camera)return;const{clientX:a,clientY:o}=i,[s,l]=$a(this.core.container,a,o);this.mouse.set(s*2-1,-(l*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.ray.intersectPlane(this.plane,this.position);const u={name:r,position:this.position.toArray(),modelCode:e},d=await bc(this.core,u);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(d),this.core.select([d]),this.core.bus.emit("TRANSACTION_END")}async dropSymbol(e,r,i){if(!this.camera)return;const{clientX:a,clientY:o}=i,[s,l]=$a(this.core.container,a,o);this.mouse.set(s*2-1,-(l*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera);const u=this.getObjects(),d=this.raycaster.intersectObjects(u,!1);if(d.length){const b=d[0];this.position.copy(b.point),this.direction.copy(b.normal)}else this.raycaster.ray.intersectPlane(this.plane,this.position),this.direction.set(0,0,1);this.direction.normalize(),Ke.set(0,0,1),Da.setFromUnitVectors(Ke,this.direction),oi.setFromQuaternion(Da);const[h,v,m]=oi.toArray(),y=r.lastIndexOf("/"),S=r.slice(y+1);this.core.symbolManager.symbolCache.delete(`${e}-${r}`);const g={name:S,position:this.position.toArray(),rotation:[h,v,m].map(_n.radToDeg),symbolCode:e,symbolPath:r},f=Sc(this.core,g);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(f),this.core.select([f]),this.core.bus.emit("TRANSACTION_END")}getObjects(){const{scene:e}=this.core.render,r=[];return e.traverseVisible(i=>r.push(i)),r}}class Gs extends tr{constructor(e){super(e);C(this,"box");C(this,"sphere");C(this,"center");C(this,"delta");C(this,"controls");const r=e.getPlugin(Zn);this.controls=r.controls,this.box=new Qo,this.sphere=new Cc,this.center=new Et,this.delta=new Et}get camera(){return this.core.render.camera}focus(e){if(!this.camera)return;let r;const i=e.map(a=>a.object3d);if(this.box.makeEmpty(),xc(i,this.box),this.box.isEmpty()){const a=i[i.length-1];this.center.setFromMatrixPosition(a.matrixWorld),r=1}else this.box.getCenter(this.center),r=this.box.getBoundingSphere(this.sphere).radius;this.delta.set(0,0,1),this.delta.applyQuaternion(this.camera.quaternion),this.delta.multiplyScalar(r*4),this.controls.target.copy(this.center),this.camera.position.copy(this.center).add(this.delta)}}class Zg extends nr{constructor(e){super(e);C(this,"onMouseUpPhase1",e=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.camera&&(this.moving=!1,this.updateMouse(e),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core))})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(e,r){be.setFromUnitVectors(Qt,this.normal),B.compose(e,be,Mt),at.copy(B).invert();let{x:i,y:a}=Ke.copy(r).applyMatrix4(at);const o=Math.max(Math.abs(i),Math.abs(a));this.isSquare&&(i=i>0?o:-o,a=a>0?o:-o),Ee.set(0,0,0).applyMatrix4(B),Ae.set(i,0,0).applyMatrix4(B),we.set(i,a,0).applyMatrix4(B),Me.set(0,a,0).applyMatrix4(B);const s=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray()];this.box.geometry.setAttribute("position",new Jt(s,3)),this.box.visible=!0,this.width=We(Math.abs(i),2),this.height=We(Math.abs(a),2),this.center.set(i,a,0).multiplyScalar(.5).applyMatrix4(B),this.middlePosition.copy(Ke.setX(i).setY(a).applyMatrix4(B))}createEntity(){const{x:e,y:r,z:i}=Nt.setFromQuaternion(be),a={position:this.center.toArray(),rotation:[e,r,i].map(_n.radToDeg),size:[this.width,this.height]},o=Ec(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(o),this.core.select([o]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class Qg extends nr{constructor(t){super(t)}drawPlane(t,e){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();let{x:r,y:i}=Ke.copy(e).applyMatrix4(at);const a=Math.max(Math.abs(r),Math.abs(i));this.isSquare&&(r=r>0?a:-a,i=i>0?a:-a),Ee.set(0,0,0).applyMatrix4(B),Ae.set(r,0,0).applyMatrix4(B),we.set(r,i,0).applyMatrix4(B),Me.set(0,i,0).applyMatrix4(B);const o=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray()];this.box.geometry.setAttribute("position",new Jt(o,3)),this.box.visible=!0,this.width=We(Math.abs(r),2),this.height=We(Math.abs(i),2),this.center.set(r,i,0).multiplyScalar(.5).applyMatrix4(B),this.middlePosition.copy(Ke.setX(r).setY(i).applyMatrix4(B))}drawBox(t,e,r){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();const{x:i,y:a}=Ke.copy(e).applyMatrix4(at),{z:o}=Ke.copy(r).applyMatrix4(at);Ee.set(0,0,0).applyMatrix4(B),Ae.set(i,0,0).applyMatrix4(B),we.set(i,a,0).applyMatrix4(B),Me.set(0,a,0).applyMatrix4(B),ot.set(0,0,o).applyMatrix4(B),st.set(i,0,o).applyMatrix4(B),lt.set(i,a,o).applyMatrix4(B),ct.set(0,a,o).applyMatrix4(B);const s=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray(),...Ee.toArray(),...ot.toArray(),...Ae.toArray(),...st.toArray(),...we.toArray(),...lt.toArray(),...Me.toArray(),...ct.toArray(),...ot.toArray(),...st.toArray(),...st.toArray(),...lt.toArray(),...lt.toArray(),...ct.toArray(),...ct.toArray(),...ot.toArray()];this.box.geometry.setAttribute("position",new Jt(s,3)),this.box.visible=!0,this.width=We(Math.abs(i),2),this.height=We(Math.abs(a),2),this.depth=We(Math.abs(o),2),this.center.set(i,a,o).multiplyScalar(.5),Nt.set(Math.PI*.5,0,0),be.setFromEuler(Nt),Cn.compose(this.center,be,Mt).premultiply(B)}createEntity(){Cn.decompose(this.center,be,Ke);const{x:t,y:e,z:r}=Nt.setFromQuaternion(be),i={position:this.center.toArray(),rotation:[t,e,r].map(_n.radToDeg),size:[this.width,this.depth,this.height]},a=Ac(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class Jg extends nr{constructor(t){super(t)}drawPlane(t,e){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();let{x:r,y:i}=Ke.copy(e).applyMatrix4(at);const a=Math.max(Math.abs(r),Math.abs(i));r=r>0?a:-a,i=i>0?a:-a,Ee.set(0,0,0).applyMatrix4(B),Ae.set(r,0,0).applyMatrix4(B),we.set(r,i,0).applyMatrix4(B),Me.set(0,i,0).applyMatrix4(B);const o=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray()],s=r*.5,l=i*.5,u=new Qn;u.moveTo(s,l),u.arc(0,0,s,0,Math.PI*2);const d=u.getPoints().map(h=>{const v=new Et(h.x,h.y,0);return v.applyMatrix4(B),v});this.circle.geometry.setFromPoints(d),this.circle.visible=!0,ot.set(s,0,0).applyMatrix4(B),st.set(s,i,0).applyMatrix4(B),lt.set(0,l,0).applyMatrix4(B),ct.set(r,l,0).applyMatrix4(B),o.push(...ot.toArray(),...st.toArray(),...lt.toArray(),...ct.toArray()),this.box.geometry.setAttribute("position",new Jt(o,3)),this.box.visible=!0,this.width=We(Math.abs(r),2),this.height=We(Math.abs(i),2),this.center.set(r,i,0).multiplyScalar(.5).applyMatrix4(B),this.middlePosition.copy(Ke.setX(r).setY(i).applyMatrix4(B))}drawBox(t,e,r){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();const{x:i,y:a}=Ke.copy(e).applyMatrix4(at),{z:o}=Ke.copy(r).applyMatrix4(at);Ee.set(0,0,0).applyMatrix4(B),Ae.set(i,0,0).applyMatrix4(B),we.set(i,a,0).applyMatrix4(B),Me.set(0,a,0).applyMatrix4(B),ot.set(0,0,o).applyMatrix4(B),st.set(i,0,o).applyMatrix4(B),lt.set(i,a,o).applyMatrix4(B),ct.set(0,a,o).applyMatrix4(B);const s=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray(),...Ee.toArray(),...ot.toArray(),...Ae.toArray(),...st.toArray(),...we.toArray(),...lt.toArray(),...Me.toArray(),...ct.toArray(),...ot.toArray(),...st.toArray(),...st.toArray(),...lt.toArray(),...lt.toArray(),...ct.toArray(),...ct.toArray(),...ot.toArray()],l=i*.5,u=a*.5,d=new Qn;d.moveTo(l,u),d.arc(0,0,l,0,Math.PI*2);const h=d.getPoints().map(v=>{const m=new Et(v.x,v.y,0);return m.applyMatrix4(B),m});this.circle.geometry.setFromPoints(h),this.circle.visible=!0,Ee.set(l,0,0).applyMatrix4(B),Ae.set(l,u,o).applyMatrix4(B),we.set(i,u,0).applyMatrix4(B),Me.set(l,u,o).applyMatrix4(B),ot.set(l,a,0).applyMatrix4(B),st.set(l,u,o).applyMatrix4(B),lt.set(0,u,0).applyMatrix4(B),ct.set(l,u,o).applyMatrix4(B),s.push(...Ee.toArray(),...Ae.toArray(),...we.toArray(),...Me.toArray(),...ot.toArray(),...st.toArray(),...lt.toArray(),...ct.toArray()),this.box.geometry.setAttribute("position",new Jt(s,3)),this.box.visible=!0,this.width=We(Math.abs(i),2),this.height=We(Math.abs(a),2),this.depth=We(Math.abs(o),2),this.center.set(i,a,o).multiplyScalar(.5),Nt.set(Math.PI*.5,0,0),be.setFromEuler(Nt),Cn.compose(this.center,be,Mt).premultiply(B)}createEntity(){Cn.decompose(this.center,be,Ke);const{x:t,y:e,z:r}=Nt.setFromQuaternion(be),i={position:this.center.toArray(),rotation:[t,e,r].map(_n.radToDeg),radius:We(this.width*.5,2),height:this.depth},a=wc(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class em extends nr{constructor(t){super(t)}drawPlane(t,e){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();let{x:r,y:i}=Ke.copy(e).applyMatrix4(at);const a=Math.max(Math.abs(r),Math.abs(i));r=r>0?a:-a,i=i>0?a:-a,Ee.set(0,0,0).applyMatrix4(B),Ae.set(r,0,0).applyMatrix4(B),we.set(r,i,0).applyMatrix4(B),Me.set(0,i,0).applyMatrix4(B);const o=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray()],s=r*.5,l=i*.5,u=new Qn;u.moveTo(s,l),u.arc(0,0,s,0,Math.PI*2);const d=u.getPoints().map(h=>{const v=new Et(h.x,h.y,0);return v.applyMatrix4(B),v});this.circle.geometry.setFromPoints(d),this.circle.visible=!0,this.box.geometry.setAttribute("position",new Jt(o,3)),this.box.visible=!0,this.width=We(Math.abs(r),2),this.height=We(Math.abs(i),2),this.center.set(r,i,0).multiplyScalar(.5).applyMatrix4(B),this.middlePosition.copy(Ke.setX(r).setY(i).applyMatrix4(B))}drawBox(t,e,r){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();const{x:i,y:a}=Ke.copy(e).applyMatrix4(at),{z:o}=Ke.copy(r).applyMatrix4(at);Ee.set(0,0,0).applyMatrix4(B),Ae.set(i,0,0).applyMatrix4(B),we.set(i,a,0).applyMatrix4(B),Me.set(0,a,0).applyMatrix4(B),ot.set(0,0,o).applyMatrix4(B),st.set(i,0,o).applyMatrix4(B),lt.set(i,a,o).applyMatrix4(B),ct.set(0,a,o).applyMatrix4(B);const s=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray(),...Ee.toArray(),...ot.toArray(),...Ae.toArray(),...st.toArray(),...we.toArray(),...lt.toArray(),...Me.toArray(),...ct.toArray(),...ot.toArray(),...st.toArray(),...st.toArray(),...lt.toArray(),...lt.toArray(),...ct.toArray(),...ct.toArray(),...ot.toArray()],l=i*.5,u=a*.5,d=new Qn;d.moveTo(l,u),d.arc(0,0,l,0,Math.PI*2);const h=d.getPoints().map(S=>{const g=new Et(S.x,S.y,0);return g.applyMatrix4(B),g}),[v,m,y]=this.center.set(l,u,o).applyMatrix4(B).toArray();this.circle.geometry.setFromPoints(h),this.circle.visible=!0,this.circle1.geometry.setFromPoints(h),this.circle1.geometry.center().translate(v,m,y),this.circle1.visible=!0,this.box.geometry.setAttribute("position",new Jt(s,3)),this.box.visible=!0,this.width=We(Math.abs(i),2),this.height=We(Math.abs(a),2),this.depth=We(Math.abs(o),2),this.center.set(i,a,o).multiplyScalar(.5),Nt.set(Math.PI*.5,0,0),be.setFromEuler(Nt),Cn.compose(this.center,be,Mt).premultiply(B)}createEntity(){Cn.decompose(this.center,be,Ke);const{x:t,y:e,z:r}=Nt.setFromQuaternion(be),i={position:this.center.toArray(),rotation:[t,e,r].map(_n.radToDeg),radiusTop:We(this.width*.5,2),radiusBottom:We(this.width*.5,2),height:this.depth},a=Mc(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class tm extends nr{constructor(t){super(t)}drawPlane(t,e){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();let{x:r,y:i}=Ke.copy(e).applyMatrix4(at);const a=Math.max(Math.abs(r),Math.abs(i));r=r>0?a:-a,i=i>0?a:-a,Ee.set(0,0,0).applyMatrix4(B),Ae.set(r,0,0).applyMatrix4(B),we.set(r,i,0).applyMatrix4(B),Me.set(0,i,0).applyMatrix4(B);const o=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray()],s=r*.5,l=i*.5,u=new Qn;u.moveTo(s,l),u.arc(0,0,s,0,Math.PI*2);const d=u.getPoints().map(h=>{const v=new Et(h.x,h.y,0);return v.applyMatrix4(B),v});this.circle.geometry.setFromPoints(d),this.circle.visible=!0,ot.set(s,0,0).applyMatrix4(B),st.set(s,i,0).applyMatrix4(B),lt.set(0,l,0).applyMatrix4(B),ct.set(r,l,0).applyMatrix4(B),o.push(...ot.toArray(),...st.toArray(),...lt.toArray(),...ct.toArray()),this.box.geometry.setAttribute("position",new Jt(o,3)),this.box.visible=!0,this.width=We(Math.abs(r),2),this.height=We(Math.abs(i),2),this.center.set(r,i,0).multiplyScalar(.5).applyMatrix4(B),this.middlePosition.copy(Ke.setX(r).setY(i).applyMatrix4(B))}drawBox(t,e,r){be.setFromUnitVectors(Qt,this.normal),B.compose(t,be,Mt),at.copy(B).invert();const{x:i,y:a}=Ke.copy(e).applyMatrix4(at);let{z:o}=Ke.copy(r).applyMatrix4(at);o=o>0?Math.abs(i):-Math.abs(i),Ee.set(0,0,0).applyMatrix4(B),Ae.set(i,0,0).applyMatrix4(B),we.set(i,a,0).applyMatrix4(B),Me.set(0,a,0).applyMatrix4(B),ot.set(0,0,o).applyMatrix4(B),st.set(i,0,o).applyMatrix4(B),lt.set(i,a,o).applyMatrix4(B),ct.set(0,a,o).applyMatrix4(B);const s=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray(),...Ee.toArray(),...ot.toArray(),...Ae.toArray(),...st.toArray(),...we.toArray(),...lt.toArray(),...Me.toArray(),...ct.toArray(),...ot.toArray(),...st.toArray(),...st.toArray(),...lt.toArray(),...lt.toArray(),...ct.toArray(),...ct.toArray(),...ot.toArray()],l=i*.5,u=a*.5,d=new Qn;d.moveTo(l,u),d.arc(0,0,l,0,Math.PI*2);const h=d.getPoints().map(S=>{const g=new Et(S.x,S.y,o*.5);return g.applyMatrix4(B),g}),[v,m,y]=this.center.set(l,u,o*.5).applyMatrix4(B).toArray();this.circle.geometry.setFromPoints(h),this.circle1.geometry.setFromPoints(h),this.circle2.geometry.setFromPoints(h),this.circle.geometry.center().rotateX(-Math.PI*.5).translate(v,m,y),this.circle1.geometry.center().translate(v,m,y),this.circle2.geometry.center().rotateZ(-Math.PI*.5).translate(v,m,y),this.circle.visible=!0,this.circle1.visible=!0,this.circle2.visible=!0,this.box.geometry.setAttribute("position",new Jt(s,3)),this.box.visible=!0,this.width=We(Math.abs(i),2),this.height=We(Math.abs(a),2),this.depth=We(Math.abs(o),2),this.center.set(i,a,o).multiplyScalar(.5),Nt.set(Math.PI*.5,0,0),be.setFromEuler(Nt),Cn.compose(this.center,be,Mt).premultiply(B)}createEntity(){Cn.decompose(this.center,be,Ke);const{x:t,y:e,z:r}=Nt.setFromQuaternion(be),i={position:this.center.toArray(),rotation:[t,e,r].map(_n.radToDeg),radius:We(this.width*.5,2)},a=Nc(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(a),this.core.select([a]),this.core.bus.emit("TRANSACTION_END")}}class nm extends nr{constructor(e){super(e);C(this,"onMouseUpPhase1",e=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.camera&&(this.moving=!1,this.updateMouse(e),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core))})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(e,r){be.setFromUnitVectors(Qt,this.normal),B.compose(e,be,Mt),at.copy(B).invert();let{x:i,y:a}=Ke.copy(r).applyMatrix4(at);const o=Math.max(Math.abs(i),Math.abs(a));this.isSquare&&(i=i>0?o:-o,a=a>0?o:-o),Ee.set(0,0,0).applyMatrix4(B),Ae.set(i,0,0).applyMatrix4(B),we.set(i,a,0).applyMatrix4(B),Me.set(0,a,0).applyMatrix4(B);const s=[...Ee.toArray(),...Ae.toArray(),...Ae.toArray(),...we.toArray(),...we.toArray(),...Me.toArray(),...Me.toArray(),...Ee.toArray()];this.box.geometry.setAttribute("position",new Jt(s,3)),this.box.visible=!0,this.width=We(Math.abs(i),2),this.height=We(Math.abs(a),2),this.center.set(i,a,.002).multiplyScalar(.5).applyMatrix4(B),this.middlePosition.copy(Ke.setX(i).setY(a).applyMatrix4(B))}createEntity(){const{x:e,y:r,z:i}=Nt.setFromQuaternion(be),a={position:this.center.toArray(),rotation:[e,r,i].map(_n.radToDeg),size:[this.width,this.height]},o=Oc(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(o),this.core.select([o]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class dn extends tr{constructor(e){super(e);C(this,"dom");C(this,"editorPlugin");C(this,"helperPlugin");C(this,"pivotPlugin");C(this,"selectionPlugin");C(this,"type");C(this,"continuous");C(this,"box");C(this,"circle");C(this,"circle1");C(this,"circle2");C(this,"grid");C(this,"tools");C(this,"objects");this.editorPlugin=e.getPlugin(Zn),this.helperPlugin=e.getPlugin(Jo),this.pivotPlugin=e.getPlugin(rr),this.selectionPlugin=e.getPlugin(es),this.continuous=!1,this.type=Pe.Box,this.dom=e.render.container;const r=new Ic,i=new Zo({color:"#ffaa00"});this.box=new Pc(r,i),this.circle=new _i(r.clone(),i),this.circle1=new _i(r.clone(),i),this.circle2=new _i(r.clone(),i),this.helperPlugin.scene.add(this.box),this.helperPlugin.scene.add(this.circle),this.helperPlugin.scene.add(this.circle1),this.helperPlugin.scene.add(this.circle2),this.grid=new Rc(this.core.render),this.helperPlugin.scene.add(this.grid.grid),this.tools={[Pe.Plane]:new Zg(this),[Pe.Box]:new Qg(this),[Pe.Cone]:new Jg(this),[Pe.Cylinder]:new em(this),[Pe.Sphere]:new tm(this),[Pe.Pipe]:new kc(this),[Pe.Text]:new nm(this)},this.objects=[]}unmount(){Wr(this.box),Wr(this.circle),Wr(this.circle1),Wr(this.circle2),this.grid.dispose()}draw(e){this.type=e,this.objects=this.core.entityManager.getVisibleObjects(),this.pivotPlugin.setEnabled(!1),this.selectionPlugin.setEnabled(!1),this.tools[e].start()}finish(){this.box.visible=!1,this.circle.visible=!1,this.circle1.visible=!1,this.circle2.visible=!1,this.grid.hide(),this.pivotPlugin.setEnabled(!0),this.selectionPlugin.setEnabled(!0),this.tools[this.type].finish(),this.objects=[]}}class rm extends tr{constructor(e){super(e);C(this,"editorPlugin");C(this,"viewHelper");C(this,"container");C(this,"changing");C(this,"onPointerUp",e=>{e.stopPropagation(),this.viewHelper.handleClick(e),this.changing=!0,this.editorPlugin.setPerspectiveCamera()});C(this,"onPointerDown",e=>{e.stopPropagation()});this.editorPlugin=e.getPlugin(Zn);const{camera:r,controls:i}=this.editorPlugin;this.viewHelper=new qg(r,e.container),this.viewHelper.setLabels("X","Y","Z"),this.viewHelper.setLabelStyle(void 0,"#000",18),this.viewHelper.center=i.target,this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.width="128px",this.container.style.height="128px",e.container.appendChild(this.container),this.container.addEventListener("pointerup",this.onPointerUp),this.container.addEventListener("pointerdown",this.onPointerDown),this.changing=!1}render(e){this.viewHelper.animating?this.viewHelper.update(e):this.changing&&(this.editorPlugin.setOrthographicCamera(),this.changing=!1),this.viewHelper.render(this.core.render.renderer)}unmount(){this.viewHelper.dispose(),this.container.removeEventListener("pointerup",this.onPointerUp),this.container.removeEventListener("pointerdown",this.onPointerDown),this.container.remove()}}const im=["position","rotation","scale"];class am extends tr{constructor(e){super(e);C(this,"outlines");C(this,"onEntitiesSelect",e=>{this.attach(e.entities)});C(this,"onEntityRendered",()=>{this.attach(this.core.selections)});C(this,"onEntityChange",e=>{const{entity:r,key:i}=e,a=this.outlines.get(r);a&&im.includes(i)&&(r.object3d.updateMatrixWorld(),a.box.makeEmpty(),a.box.expandByObject(r.object3d))});this.outlines=new Map,e.bus.on("ENTITY_SELECTED",this.onEntitiesSelect),e.bus.on("ENTITY_RENDERED",this.onEntityRendered),e.bus.on("ENTITY_CHANGED",this.onEntityChange)}get scene(){return this.core.render.scene}attach(e){this.outlines.forEach(r=>r.visible=!1),e.forEach(r=>{let i=this.outlines.get(r);if(i==null){i=new _c(new Qo),i.raycast=()=>{};const a=i.material;a.color.set("#396efe"),a.depthTest=!1,a.transparent=!0,this.scene.add(i),this.outlines.set(r,i)}r.object3d.updateMatrixWorld(),i.box.makeEmpty(),i.box.expandByObject(r.object3d),i.visible=!i.box.isEmpty()})}unmount(){this.outlines.forEach(e=>{e.dispose(),e.removeFromParent()}),this.outlines.clear(),this.core.bus.off("ENTITY_SELECTED",this.onEntitiesSelect),this.core.bus.off("ENTITY_RENDERED",this.onEntityRendered),this.core.bus.off("ENTITY_CHANGED",this.onEntityChange)}}const p={BASE:{key:"base",name:"基础"},COMPONENTS:{key:"components",name:"组件"},CONTROL:{key:"control",name:"控制"},BACKGROUND:{key:"background",name:"背景"},ENVIRONMENT:{key:"environment",name:"环境"},FOG:{key:"fog",name:"雾"},SHADOW:{key:"shadow",name:"阴影"},EFFECT:{key:"effect",name:"后处理"},GRID:{key:"grid",name:"网格"},TRANSFORM:{key:"transform",name:"变换"},TEXT:{key:"text",name:"文本"},DIFFUSE_MAP:{key:"diffuse_map",name:"漫反射"},SPECULAR_MAP:{key:"specular_map",name:"高光"},METALLNESS_MAP:{key:"metalness_map",name:"金属度"},ROUGHNESS_MAP:{key:"roughness_map",name:"粗糙度"},NORMAL_MAP:{key:"normal_map",name:"法线"},AO_MAP:{key:"ao_map",name:"环境光遮蔽"},ENV_MAP:{key:"env_map",name:"环境光"},EMISSIVE_MAP:{key:"emissive_map",name:"自发光"},ALPHA_MAP:{key:"alpha_map",name:"透明度"},BUMP_MAP:{key:"bump_map",name:"凹凸贴图"},DISPLACEMENT_MAP:{key:"displacement_map",name:"置换贴图"},LIGHT_MAP:{key:"light_map",name:"光照贴图"},ANISOTROPY_MAP:{key:"anisotropy_map",name:"各项异性"},CLEARCOAT_MAP:{key:"clearcoat_map",name:"清漆"},CLEARCOAT_NORMAL_MAP:{key:"clearcoat_normal_map",name:"清漆法线"},CLEARCOAT_ROUGHNESS_MAP:{key:"clearcoat_roughness_map",name:"清漆粗糙度"},IRIDESCENE_MAP:{key:"iridescence_map",name:"虹彩"},IRIDESCENE_THICKNESS_MAP:{key:"iridescence_thickness_map",name:"虹彩厚度"},SHEEN_COLOR_MAP:{key:"sheen_color_Map",name:"光泽"},SHEEN_ROUGHNESS_MAP:{key:"sheen_roughness_Map",name:"光泽粗糙度"},SPECULAR_COLOR_MAP:{key:"specular_color_map",name:"高光反射颜色"},SPECULAR_INTENSITY_MAP:{key:"specular_intensity_map",name:"高光反射强度"},TRANSMISSION_MAP:{key:"transmission_map",name:"透光"},THICKNESS_MAP:{key:"thicknessMap",name:"厚度"},CUSTOM_SHADER:{key:"custom_shader",name:"自定义材质"}},I={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",ENUM:"enum",COLOR:"color",VECTOR2:"vector2",VECTOR3:"vector3",SCRIPT:"script",TEXTURE:"texture",UNIFORMS:"uniforms",VERTEX_SHADER:"vertex-shader",FRAGEMENT_SHADER:"fragement-shader"},om=["Arial","Arial Black","Arial Narrow","Algerian","Bookman Old Style","Bahnschrift Light","Baskerville Old Face","Bauhaus 93","Bell MT","Cursive","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Calibri","Calibri Light","fantasy","Georgia","Gabriola","Garamond","Informal Roman","Impact","Lucida Bright","Lucida Console","Lucida Sans Unicode","monospace","Microsoft Uighur","Monotype Corsiva","MS Sans Serif","MS Serif","Palatino Linotype","serif","sans-serif","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","等线","等线 Light","仿宋","华文中宋","华文仿宋","华文宋体","华文彩云","华文新魏","华文楷体","华文琥珀","华文细黑","华文行楷","华文隶书","宋体","幼圆","微软雅黑","黑体","新宋体","方正姚体","方正舒体","楷体","隶书"].map(n=>({label:n,value:n})),sm=[{label:"常规",value:"normal"},{label:"粗体",value:"bold"},{label:"斜体",value:"italic"},{label:"粗斜体",value:"italic bold"}];var Kt=(n=>(n.Default="Default",n.Component="Component",n))(Kt||{}),Si=(n=>(n.GRAPH="graph",n.ATTR_COMPONENT="attrComponent",n.HIERARCHY="hierarchy",n))(Si||{});class ln{constructor(t,e,r){C(this,"editor");C(this,"attribute");C(this,"callbacks");C(this,"targets");C(this,"target");C(this,"key");C(this,"bindCallback");this.editor=t,this.attribute=e,this.targets=r,this.target=r[r.length-1],this.key=e.key,this.callbacks=[]}setTargets(t){this.targets=t,this.target=t[t.length-1]}listen(t){this.callbacks.includes(t)||this.callbacks.push(t)}unlisten(t){const e=this.callbacks.indexOf(t);e>=0&&this.callbacks.splice(e,1)}update(){this.callbacks.forEach(t=>t(this.getter()))}getter(){return this.attribute.getter(this.target)}setter(t){this.editor.historyManager.beginTransaction();for(const e of this.targets)this.attribute.setter(e,t);this.editor.historyManager.endTransaction()}get visible(){const{visible:t}=this.attribute;return typeof t=="function"?t(this.target):t??!0}get group(){return this.attribute.group}get groupName(){return this.attribute.groupName}get disabled(){const{disabled:t}=this.attribute;return typeof t=="function"?t(this.target):t}get text(){return this.attribute.text}get options(){return this.attribute.options}get min(){const{min:t}=this.attribute;return typeof t=="function"?t(this.target):t}get max(){const{max:t}=this.attribute;return typeof t=="function"?t(this.target):t}get precision(){return this.attribute.precision}get step(){return this.attribute.step}get tip(){return this.attribute.tip}get assetType(){return this.attribute.assetType}get disableAlpha(){return this.attribute.disableAlpha}}class lm{constructor(t,e,r){C(this,"editor");C(this,"nodeAttr");C(this,"viewAttr");C(this,"groups");C(this,"activeGroups");this.editor=t,this.nodeAttr=e,this.viewAttr=r,this.groups=[],this.activeGroups=[]}refresh(){const t=[],e=[];let r=this.editor.selectionManager.getLastSelection();const i=[];r?(t.push(...this.editor.selectionManager.getSelection()),e.push(...this.nodeAttr.getAttributes(r)),i.push(...this.nodeAttr.getGroups(r)),this.activeGroups=[...this.nodeAttr.activeGroups]):(r=this.editor.selectionManager.getView(),t.push(r),e.push(...this.viewAttr.getAttributes(r)),i.push(...this.viewAttr.getGroups(r)),this.activeGroups=[...this.viewAttr.activeGroups]),i.forEach(a=>a.attributes.forEach(o=>o.setTargets(t))),this.groups=[];for(const a of e){a.setTargets(t);const o=this.groups.find(s=>s.group===a.group);if(o)o.attributes.push(a);else{const{group:s,groupName:l}=a;this.groups.push({editor:this.editor,group:s,groupName:l,type:Kt.Default,attributes:[a]})}}return this.groups.push(...i),this.groups}update(){for(const t of this.groups)for(const e of t.attributes)e.update()}dispose(){this.groups=[]}}const xo=n=>{const{ctrlKey:t=!1,shiftKey:e=!1,altKey:r=!1,metaKey:i=!1}=n;return`${t?"ctrl+":""}${i?"meta+":""}${e?"shift+":""}${r?"alt+":""}${n.code}`};class cm{constructor(t,e){C(this,"editor");C(this,"keyEvents");C(this,"handleAction",t=>{if(t.altKey&&t.preventDefault(),!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)){for(const e of this.keyEvents)if(this.isKeyMatch(e.key,t)){t.preventDefault(),e.action(this.editor),console.log(`[${xo(t)}] => ${e.actionName}`);return}console.log(`[${xo(t)}] => no match`)}});this.editor=t,this.keyEvents=e}active(){document.addEventListener("keydown",this.handleAction)}deactive(){document.removeEventListener("keydown",this.handleAction)}isKeyMatch(t,e){if(Array.isArray(t))return t.some(s=>this.isKeyMatch(s,e));if(t.keyCode=="*")return!0;const{ctrlKey:r=!1,shiftKey:i=!1,altKey:a=!1,metaKey:o=!1}=t;return r==e.ctrlKey&&i==e.shiftKey&&a==e.altKey&&o==e.metaKey&&t.keyCode==e.code}dispose(){this.keyEvents=[],document.removeEventListener("keydown",this.handleAction)}}class um{constructor(t){C(this,"editor");this.editor=t}refresh(){const t=this.editor.core.entityManager.root;return this.getNodes(t.children)}getNodes(t){const e=[];return t.forEach(r=>{const{id:i,name:a,type:o,visible:s,children:l}=r,u={id:i,name:a,type:o,visible:s,children:this.getNodes(l)};e.push(u)}),e}getNode(t){return this.editor.core.entityManager.getEntity(t)}removeNode(t){const e=this.editor.core.entityManager.getEntity(t);e&&(this.editor.historyManager.beginTransaction(),this.editor.core.removeEntity(e),this.editor.core.select([]),this.editor.historyManager.endTransaction())}updateNode(t,e,r){const i=this.editor.core.entityManager.getEntity(t);i==null||i.setAttr(e,r)}moveNodes(t,e,r){this.editor.historyManager.beginTransaction(),r==="before"?t.forEach(i=>{this.moveNode(i,e,r)}):t.reverse().forEach(i=>{this.moveNode(i,e,r)}),this.editor.historyManager.endTransaction()}moveNode(t,e,r){const i=this.getNode(t),a=this.getNode(e);if(!i||!a)return;let o,s;const l=i.parent,u=a.parent,d=l.children.indexOf(i),h=u.children.indexOf(a);r==="body"?(o=a,s=a==null?void 0:a.children.length):r==="before"?(o=u,l===u?d>h?s=h+1:s=h:s=h+1):r==="after"&&(o=u,u===l?d>h?s=h:s=h-1:s=h),this.editor.core.moveEntity(i,o,s)}}class et{constructor(t){C(this,"key");C(this,"editor");this.key=Ul(),this.editor=t}mount(){}deactive(){}}class dm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="恢复",this.icon="huifu"}active(){this.editor.historyManager.redo()}}class hm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="撤销",this.icon="chexiao"}active(){this.editor.historyManager.undo()}}class pm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="平面",this.icon="plane",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Plane)}deactive(){this.actived=!1,this.plugin.finish()}}class gm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="立方体",this.icon="box",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Box)}deactive(){this.actived=!1,this.plugin.finish()}}class mm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="圆锥",this.icon="cone",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Cone)}deactive(){this.actived=!1,this.plugin.finish()}}class fm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="圆柱",this.icon="cylinder",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Cylinder)}deactive(){this.actived=!1,this.plugin.finish()}}class vm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");C(this,"actived");this.title="球体",this.icon="sphere",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Sphere)}deactive(){this.actived=!1,this.plugin.finish()}}class ym extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="管道",this.icon="pipe",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Pipe)}deactive(){this.actived=!1,this.plugin.finish()}}class bm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="环境光",this.icon="ambient-light"}active(){const e=Tc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Sm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="平行光",this.icon="directional-light"}async active(){const e=$c(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Cm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="预览",this.icon="preview"}active(){this.editor.preview()}}class xm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"doubleConfirm");this.title="重新加载",this.icon="reload",this.doubleConfirm=!0}active(){this.editor.reload()}}class Em extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="保存",this.icon="save"}active(){this.editor.save()}}class Am extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");this.title="移动",this.icon="translate",this.plugin=e.core.getPlugin(rr)}get actived(){return this.plugin.controls.getMode()==="translate"}async active(){this.plugin.controls.setMode("translate")}}class wm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");this.title="旋转",this.icon="rotate",this.plugin=e.core.getPlugin(rr)}get actived(){return this.plugin.controls.getMode()==="rotate"}async active(){this.plugin.controls.setMode("rotate")}}class Mm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"plugin");this.title="缩放",this.icon="scale",this.plugin=e.core.getPlugin(rr)}get actived(){return this.plugin.controls.getMode()==="scale"}async active(){this.plugin.controls.setMode("scale")}}class Nm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="半球光",this.icon="hemisphere-light"}active(){const e=Dc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Om extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="透视相机",this.icon="perspective-camera"}active(){const e=Lc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Im extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="正交相机",this.icon="orthographic-camera"}active(){const e=zc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Pm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="连续绘图",this.icon="draw",this.actived=!1,this.plugin=e.core.getPlugin(dn)}mount(){this.actived=this.plugin.continuous}active(){this.actived=!this.actived,this.plugin.continuous=this.actived}}class Rm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="组",this.icon="group"}active(){const e=jc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class km extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="聚光灯",this.icon="spot-light"}active(){const e=Bc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class _m extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="点光源",this.icon="point-light"}active(){const e=Hc(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Tm extends et{constructor(e){super(e);C(this,"title");C(this,"icon");this.title="快捷键",this.icon="shortcut"}active(){this.editor.bus.emit("OPEN_SHORTCUT_DIALOG",this.editor)}}class $m extends et{constructor(e){super(e);C(this,"title");C(this,"icon");C(this,"actived");C(this,"plugin");this.title="文本",this.icon="text",this.actived=!1,this.plugin=e.core.getPlugin(dn)}active(){this.actived=!0,this.plugin.draw(Pe.Text)}deactive(){this.actived=!1,this.plugin.finish()}}class Dm{constructor(t){C(this,"editor");C(this,"tools");C(this,"editPlugin");C(this,"lastTool");C(this,"deselect",()=>{var t;(t=this.lastTool)==null||t.deactive(),this.editor.bus.emit("TOOL_UPDATE",this.editor)});this.editor=t,this.tools={left:[new hm(t),new dm(t),new pm(t),new gm(t),new mm(t),new fm(t),new vm(t),new ym(t),new bm(t),new Sm(t),new Nm(t),new km(t),new _m(t),new Om(t),new Im(t),new $m(t),new Rm(t),new Am(t),new wm(t),new Mm(t),new Pm(t)],right:[new Tm(t),new xm(t),new Em(t),new Cm(t)]},this.editPlugin=t.core.getPlugin(ga),this.editor.core.bus.on("DRAW_FINISH",this.deselect)}mount(){this.tools.left.forEach(t=>t.mount()),this.tools.right.forEach(t=>t.mount())}dispose(){this.editor.core.bus.off("DRAW_FINISH",this.deselect)}select(t,e){var r;this.editPlugin.exit(),(r=this.lastTool)==null||r.deactive(),this.lastTool=t,this.lastTool.active(e),this.editor.bus.emit("TOOL_UPDATE",this.editor)}}class Lm{constructor(t){C(this,"editor");C(this,"selections");this.editor=t,this.selections=[]}refresh(){return this.selections=this.editor.core.selections.map(t=>t.id),this.selections}setSelections(t){const e=this.editor.core.entityManager.getEntities(t);this.editor.core.select(e)}removeSelections(t){const e=[];if(t)for(const r of t){const i=this.editor.core.entityManager.getEntity(r);i&&e.push(i)}this.editor.core.select(e)}getLastSelection(){return this.editor.core.lastSelection}getSelection(){return this.editor.core.selections}getView(){return this.editor.core.entityManager.root}}class zm{constructor(t){C(this,"editor");C(this,"dropPlugin");this.editor=t,this.dropPlugin=t.core.getPlugin(Us)}onDrop(t){if(!t.dataTransfer)return;const e=t.dataTransfer.getData("text");let r;try{r=JSON.parse(e)}catch(i){console.error(i)}if(r)try{r.type==="glb"?this.dropPlugin.drop(r.item.code,r.item.name,t):r.type==="symbol"&&this.dropPlugin.dropSymbol(r.item.code,r.item.name,t)}catch{throw new Error(`加载模型出错: ${e}`)}}}class jm{constructor(t){C(this,"editor");C(this,"copyPlugin");C(this,"nodes");C(this,"material");this.editor=t,this.nodes=[],this.copyPlugin=t.core.getPlugin(Fs)}copy(){this.nodes=[...this.editor.core.selections].filter(t=>t.copiable)}cut(){const t=[...this.editor.core.selections];this.editor.historyManager.beginTransaction(),this.editor.core.select([]),t.forEach(e=>this.editor.core.removeEntity(e)),this.editor.historyManager.endTransaction(),this.nodes=t}async paste(){this.editor.historyManager.beginTransaction(),this.copyPlugin.paste(this.nodes),this.editor.historyManager.endTransaction()}canPaste(){return this.nodes.length>0}copyMaterial(){const t=this.editor.core.lastSelection;!t||!t.material||(this.material=t.material)}canPasteMaterial(){return!!this.material}pasteMaterial(){this.material&&(this.editor.historyManager.beginTransaction(),this.copyPlugin.pasteMaterial(this.material),this.editor.historyManager.endTransaction())}}class en{constructor(t){C(this,"editor");C(this,"core");this.editor=t,this.core=t.core}isSame(t){return this.constructor.name===t.constructor.name}}class Mr extends en{}class Bm extends en{constructor(e,r){super(e);C(this,"entity");C(this,"parent");C(this,"index");this.entity=r.entity,this.parent=r.parent,this.index=r.index}undo(){this.core.removeEntity(this.entity),this.core.select([])}redo(){this.core.addEntity(this.entity,this.parent,this.index),this.core.select([this.entity])}}class Hm extends en{constructor(e,r){super(e);C(this,"entity");C(this,"parent");C(this,"index");this.entity=r.entity,this.parent=r.parent,this.index=r.index}undo(){this.core.addEntity(this.entity,this.parent,this.index)}redo(){this.core.removeEntity(this.entity)}}class Vm extends en{constructor(e,r){super(e);C(this,"entity");C(this,"parent");C(this,"index");C(this,"oldParent");C(this,"oldIndex");this.entity=r.entity,this.parent=r.parent,this.index=r.index,this.oldParent=r.oldParent,this.oldIndex=r.oldIndex}undo(){this.core.moveEntity(this.entity,this.oldParent,this.oldIndex)}redo(){this.core.moveEntity(this.entity,this.parent,this.index)}}class Fm extends en{constructor(e,r){super(e);C(this,"entities");C(this,"olds");this.entities=r.entities,this.olds=r.olds}undo(){this.core.select(this.olds)}redo(){this.core.select(this.entities)}}class Um extends Mr{constructor(e,r){super(e);C(this,"entity");C(this,"key");C(this,"newValue");C(this,"oldValue");this.entity=r.entity,this.key=r.key,this.newValue=r.newValue,this.oldValue=r.oldValue}undo(){this.entity.setAttr(this.key,this.oldValue)}redo(){this.entity.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.entity===e.entity&&this.key===e.key}update(e){this.newValue=e.newValue}}class Gm extends en{constructor(e,r){super(e);C(this,"project");C(this,"oldProject");this.project=r.project,this.oldProject=r.oldProject}undo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.oldProject),this.editor.historyManager.resume()}redo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.project),this.editor.historyManager.resume()}}class Wm extends en{constructor(e,r){super(e);C(this,"component");C(this,"parent");C(this,"index");this.component=r.component,this.parent=r.parent,this.index=r.index}undo(){this.core.removeComponent(this.component)}redo(){this.core.addComponent(this.component,this.parent,this.index)}}class Xm extends en{constructor(e,r){super(e);C(this,"component");C(this,"parent");C(this,"index");this.component=r.component,this.parent=r.parent,this.index=r.index}undo(){this.core.addComponent(this.component,this.parent,this.index)}redo(){this.core.removeComponent(this.component)}}class Ym extends Mr{constructor(e,r){super(e);C(this,"component");C(this,"key");C(this,"newValue");C(this,"oldValue");this.component=r.component,this.key=r.key,this.newValue=r.newValue,this.oldValue=r.oldValue}undo(){this.component.setAttr(this.key,this.oldValue)}redo(){this.component.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.component===e.component&&this.key===e.key}update(e){this.newValue=e.newValue}}class Km extends Mr{constructor(e,r){super(e);C(this,"material");C(this,"key");C(this,"newValue");C(this,"oldValue");this.material=r.material,this.key=r.key,this.newValue=r.newValue,this.oldValue=r.oldValue}undo(){this.material.setAttr(this.key,this.oldValue)}redo(){this.material.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.material===e.material&&this.key===e.key}update(e){this.newValue=e.newValue}}class qm extends Mr{constructor(e,r){super(e);C(this,"texture");C(this,"key");C(this,"newValue");C(this,"oldValue");this.texture=r.texture,this.key=r.key,this.newValue=r.newValue,this.oldValue=r.oldValue}undo(){this.texture.setAttr(this.key,this.oldValue)}redo(){this.texture.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.texture===e.texture&&this.key===e.key}update(e){this.newValue=e.newValue}}class Zm extends en{constructor(e,r){super(e);C(this,"material");this.material=r.material}undo(){this.core.removeMaterial(this.material)}redo(){this.core.addMaterial(this.material)}}class Qm extends en{constructor(e,r){super(e);C(this,"material");this.material=r.material}undo(){this.core.addMaterial(this.material)}redo(){this.core.removeMaterial(this.material)}}class Jm{constructor(t){C(this,"editor");C(this,"project");this.editor=t}deserialize(t){const e=this.project,r=this.editor.core.entityManager.root.code;try{t=ef(t,r)}catch(o){console.error(o)}this.editor.historyManager.pause(),this.editor.core.clear(),this.editor.core.deserialize(t),this.editor.historyManager.resume();const i={oldProject:e,project:t},a=new Gm(this.editor,i);this.editor.historyManager.addHistory([a])}serialize(t){return this.project=this.editor.core.serialize(t),this.project}}const ef=(n,t)=>{const e=JSON.parse(n);return e.scene.code=t,JSON.stringify(e)};class tf{constructor(t){C(this,"editor");C(this,"core");C(this,"undos");C(this,"redos");C(this,"max");C(this,"paused");C(this,"transaction");C(this,"transactions");C(this,"onDeserialize",()=>{this.core.bus.off("DESERIALIZE",this.onDeserialize),this.core.bus.on("TRANSACTION_START",this.beginTransaction),this.core.bus.on("TRANSACTION_END",this.endTransaction),this.core.bus.on("ENTITY_ADDED",this.onEntityAdded),this.core.bus.on("ENTITY_REMOVED",this.onEntityRemoved),this.core.bus.on("ENTITY_MOVED",this.onEntityMoved),this.core.bus.on("ENTITY_CHANGED",this.onEntityChanged),this.core.bus.on("ENTITY_SELECTED",this.onEntitySelected),this.core.bus.on("COMPONENT_ADDED",this.onComponentAdded),this.core.bus.on("COMPONENT_REMOVED",this.onComponentRemoved),this.core.bus.on("COMPONENT_CHANGED",this.onComponentChanged),this.core.bus.on("MATERIAL_ADDED",this.onMaterialAdded),this.core.bus.on("MATERIAL_REMOVED",this.onMaterialRemoved),this.core.bus.on("MATERIAL_CHANGED",this.onMaterialChanged),this.core.bus.on("TEXTURE_CHANGED",this.onTextureChanged)});C(this,"beginTransaction",()=>{this.transaction=!0});C(this,"endTransaction",()=>{this.transaction=!1,this.addHistory(this.transactions),this.transactions=[]});C(this,"onEntityAdded",t=>{if(this.paused)return;const e=new Bm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntityRemoved",t=>{if(this.paused)return;const e=new Hm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntityMoved",t=>{if(this.paused)return;const e=new Vm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntityChanged",t=>{if(this.paused)return;const e=new Um(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onEntitySelected",t=>{if(this.paused)return;const e=new Fm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onComponentAdded",t=>{if(this.paused)return;const e=new Wm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onComponentRemoved",t=>{if(this.paused)return;const e=new Xm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onComponentChanged",t=>{if(this.paused)return;const e=new Ym(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onMaterialAdded",t=>{if(this.paused)return;const e=new Zm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onMaterialRemoved",t=>{if(this.paused)return;const e=new Qm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onMaterialChanged",t=>{if(this.paused)return;const e=new Km(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});C(this,"onTextureChanged",t=>{if(this.paused)return;const e=new qm(this.editor,t);this.transaction?this.addTransaction(e):this.addHistory([e])});this.editor=t,this.core=t.core,this.undos=[],this.redos=[],this.max=200,this.paused=!1,this.transaction=!1,this.transactions=[],this.core.bus.on("DESERIALIZE",this.onDeserialize)}pause(){this.paused=!0}resume(){this.paused=!1}addTransaction(t){const e=this.transactions[this.transactions.length-1];e instanceof Mr&&(e!=null&&e.isSame(t))?e.update(t):this.transactions.push(t)}addHistory(t){this.redos=[],this.undos.length>=this.max&&this.undos.shift(),this.undos.push(t),this.core.bus.emit("HISTORY_CHANGE",this.core)}undo(){if(this.undos.length===0)return;this.pause();const t=this.undos.pop();t&&(this.redos.push(t),t.reverse().forEach(e=>e.undo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}redo(){if(this.redos.length===0)return;this.pause();const t=this.redos.pop();t&&(this.undos.push(t),t.reverse().forEach(e=>e.redo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}dispose(){this.undos=[],this.redos=[],this.paused=!1,this.transaction=!1,this.transactions=[]}}class nf{constructor(t){C(this,"editor");this.editor=t}getComponents(){const t=this.editor.selectionManager.getSelection(),e=t.filter(i=>i instanceof Jn),r=[{label:pt[me.SimpleScript],value:me.SimpleScript}];return e.length>0&&e.length===t.length&&r.push({label:pt[me.OrbitControls],value:me.OrbitControls},{label:pt[me.PointerLockControls],value:me.PointerLockControls}),r}addComponent(t){const e=[...this.editor.selectionManager.getSelection()];e.length===0&&t===me.SimpleScript&&e.push(this.editor.selectionManager.getView());try{const r=kn(t);this.editor.historyManager.beginTransaction(),e.forEach(i=>{const{entityManager:a}=this.editor.core,o=a.createComponent(r,i);this.editor.core.addComponent(o,i)}),this.editor.historyManager.endTransaction()}catch(r){console.error(r)}}}class rf{constructor(t){C(this,"editor");C(this,"menus");C(this,"meta");this.editor=t,this.menus=new Map,this.meta={}}addContextMenu(t,e){this.menus.set(t,e)}getContextMenu(t){const e=this.menus.get(t)||[];return this.getContextEvent(e)}getContextEvent(t){return t.filter(e=>e.visible(this.editor)).map(e=>{const{label:r,children:i,action:a}=e,o=i?this.getContextEvent(i):void 0,s={text:r,subMenu:o,action:()=>a(this.editor)};return o||delete s.subMenu,s})}dispose(){this.meta={}}}class af{constructor(t,e){C(this,"editor");C(this,"materialAttr");C(this,"groups");C(this,"activeGroups");this.editor=t,this.materialAttr=e,this.groups=[],this.activeGroups=[]}refresh(){const t=[],e=[];this.editor.selectionManager.getSelection().forEach(o=>{if(o instanceof La){const s=this.editor.core.materialManager.getMaterial(o.material);s&&!t.includes(s)&&t.push(s)}});const i=t[0];if(!i)return[];const a=[];e.push(...this.materialAttr.getAttributes(i)),a.push(...this.materialAttr.getGroups(i)),this.activeGroups=[...this.materialAttr.activeGroups],a.forEach(o=>o.attributes.forEach(s=>s.setTargets(t))),this.groups=[];for(const o of e){o.setTargets(t);const s=this.groups.find(l=>l.group===o.group);if(s)s.attributes.push(o);else{const{group:l,groupName:u}=o;this.groups.push({editor:this.editor,group:l,groupName:u,type:Kt.Default,attributes:[o]})}}return this.groups.push(...a),this.groups}update(){for(const t of this.groups)for(const e of t.attributes)e.update()}dispose(){this.groups=[]}changeMaterial(t){const e=this.editor.core.selections.filter(r=>r instanceof La);e.length!==0&&(this.editor.historyManager.beginTransaction(),this.editor.core.materialManager.changeMaterial(e,t),this.editor.historyManager.endTransaction())}}const of=[{key:[{keyCode:"Backspace"},{keyCode:"Delete"}],action:n=>{const t=n.selectionManager.getSelection().filter(e=>e.deleteable);t.length&&(n.historyManager.beginTransaction(),n.core.select([]),t.forEach(e=>n.core.removeEntity(e)),n.historyManager.endTransaction())}},{key:{keyCode:"Escape"},action:n=>{n.toolManager.deselect()}},{key:{ctrlKey:!0,keyCode:"KeyC"},action:n=>{n.copyManager.copy()}},{key:{ctrlKey:!0,keyCode:"KeyX"},action:n=>{n.copyManager.cut()}},{key:{ctrlKey:!0,keyCode:"KeyV"},action:n=>{n.copyManager.paste()}},{key:{ctrlKey:!0,keyCode:"KeyZ"},action:n=>{n.historyManager.undo()}},{key:[{ctrlKey:!0,shiftKey:!0,keyCode:"KeyZ"},{ctrlKey:!0,keyCode:"KeyY"}],action:n=>{n.historyManager.redo()}},{key:{keyCode:"Tab"},action:n=>{const t=n.core.getPlugin(ga);t==null||t.switch()}},{key:{ctrlKey:!0,keyCode:"KeyA"},action:n=>{const t=n.core.entityManager.entities.values();n.core.select(Array.from(t))}},{key:{keyCode:"KeyP"},action:n=>{const t=n.selectionManager.getSelection();if(t.length>=2){n.historyManager.beginTransaction();const e=t.slice(0,-1),r=t[t.length-1];e.forEach(i=>n.core.moveEntity(i,r,r.children.length)),n.historyManager.endTransaction()}}},{key:{altKey:!0,keyCode:"KeyP"},action:n=>{const t=n.selectionManager.getSelection();n.historyManager.beginTransaction(),t.forEach(e=>n.core.moveEntity(e)),n.historyManager.endTransaction()}},{key:{ctrlKey:!0,keyCode:"KeyP"},action:n=>{n.preview()}},{key:{ctrlKey:!0,keyCode:"KeyS"},action:n=>{n.save()}},{key:{keyCode:"KeyQ"},action:n=>{const t=n.core.getPlugin(rr);t==null||t.toggleSpace()}},{key:{keyCode:"KeyF"},action:n=>{const t=n.selectionManager.getSelection();t.length&&n.core.getPlugin(Gs).focus(t)}},{key:{keyCode:"KeyG"},action:n=>{const t=n.selectionManager.getSelection();t.length&&n.core.getPlugin(ei).start(t,"translate")}},{key:{keyCode:"KeyR"},action:n=>{const t=n.selectionManager.getSelection();t.length&&n.core.getPlugin(ei).start(t,"rotate")}},{key:{keyCode:"KeyS"},action:n=>{const t=n.selectionManager.getSelection();t.length&&n.core.getPlugin(ei).start(t,"scale")}},{key:{keyCode:"KeyL"},action:n=>{const e=n.selectionManager.getSelection().filter(r=>r instanceof Jn);if(e.length){const r=n.core.getPlugin(Zn),{position:i,rotation:a}=r.camera;n.historyManager.beginTransaction(),e.forEach(o=>{o.setAttr("position",i),o.setAttr("rotation",a)}),n.historyManager.endTransaction()}}}],jt=Math.PI/180,Fn=180/Math.PI,sf=1,lf=32;class cf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"planeAttrs");C(this,"boxAttrs");C(this,"coneAttrs");C(this,"cylinderAttrs");C(this,"sphereAttrs");C(this,"pipeAttrs");C(this,"ambientLightAttrs");C(this,"directionalLightAttrs");C(this,"hemisphereLightAttrs");C(this,"spotLightAttrs");C(this,"pointLightAttrs");C(this,"perspectiveCameraAttrs");C(this,"orthographicCameraAttrs");C(this,"modelAttrs");C(this,"symbolAttrs");C(this,"textAttrs");C(this,"activeGroups");this.editor=t,this.activeGroups=[p.BASE.key],this.commonAttrs=[{label:"可见",key:"visible",type:I.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("visible"),setter:(e,r)=>e.setAttr("visible",r)},{label:"可变换",key:"transformable",type:I.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("transformable"),setter:(e,r)=>e.setAttr("transformable",r)},{label:"可选中",key:"selectable",type:I.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("selectable"),setter:(e,r)=>e.setAttr("selectable",r)},{label:"投射阴影",key:"castShadow",type:I.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("castShadow"),setter:(e,r)=>e.setAttr("castShadow",r)},{label:"接收阴影",key:"receiveShadow",type:I.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("receiveShadow"),setter:(e,r)=>e.setAttr("receiveShadow",r)},{label:"名称",key:"name",type:I.STRING,group:p.BASE.key,min:sf,max:lf,groupName:p.BASE.name,getter:e=>e.getAttr("name"),setter:(e,r)=>e.setAttr("name",r)},{label:"类型",key:"type",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,disabled:!0,getter:e=>Vc[e.type]||"",setter:()=>{}},{label:"ID",key:"id",disabled:!0,type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("id"),setter:()=>{}},{label:"位置",key:"position",type:I.VECTOR3,group:p.TRANSFORM.key,groupName:p.TRANSFORM.name,precision:3,getter:e=>e.position.toArray(),setter:(e,r)=>this.setVector3(e,"position",r)},{label:"旋转",key:"rotation",type:I.VECTOR3,group:p.TRANSFORM.key,groupName:p.TRANSFORM.name,precision:1,getter:({rotation:{x:e,y:r,z:i}})=>[e,r,i].map(a=>a*Fn),setter:(e,r)=>this.setEuler(e,r)},{label:"缩放",key:"scale",type:I.VECTOR3,group:p.TRANSFORM.key,groupName:p.TRANSFORM.name,precision:3,getter:e=>e.scale.toArray(),setter:(e,r)=>this.setVector3(e,"scale",r)}],this.planeAttrs=[{label:"尺寸",key:"size",type:I.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,getter:e=>e.size.toArray(),setter:(e,r)=>this.setVector2(e,"size",r)},{label:"分段",key:"segments",type:I.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,min:1,precision:0,max:100,getter:e=>e.segments.toArray(),setter:(e,r)=>this.setVector2(e,"segments",r)}],this.boxAttrs=[{label:"尺寸",key:"size",type:I.VECTOR3,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,getter:e=>e.size.toArray(),setter:(e,r)=>this.setVector3(e,"size",r)},{label:"分段",key:"segments",type:I.VECTOR3,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:1,max:100,getter:e=>e.segments.toArray(),setter:(e,r)=>this.setVector3(e,"segments",r)},{label:"圆角半径",key:"radius",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("radius"),setter:(e,r)=>e.setAttr("radius",r)}],this.coneAttrs=[{label:"半径",key:"radius",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,r)=>e.setAttr("radius",r)},{label:"高度",key:"height",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("height"),setter:(e,r)=>e.setAttr("height",r)},{label:"水平角度",key:"thetaLength",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:360,getter:e=>e.thetaLength*Fn,setter:(e,r)=>e.setAttr("thetaLength",r*jt)},{label:"底部开口",key:"openEnded",type:I.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("openEnded"),setter:(e,r)=>e.setAttr("openEnded",r)},{label:"分段",key:"segments",type:I.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,r)=>this.setVector2(e,"segments",r)}],this.cylinderAttrs=[{label:"顶部半径",key:"radiusTop",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radiusTop"),setter:(e,r)=>e.setAttr("radiusTop",r)},{label:"底部半径",key:"radiusBottom",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radiusBottom"),setter:(e,r)=>e.setAttr("radiusBottom",r)},{label:"高度",key:"height",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("height"),setter:(e,r)=>e.setAttr("height",r)},{label:"水平角度",key:"thetaLength",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:360,getter:e=>e.thetaLength*Fn,setter:(e,r)=>e.setAttr("thetaLength",r*jt)},{label:"底部开口",key:"openEnded",type:I.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("openEnded"),setter:(e,r)=>e.setAttr("openEnded",r)},{label:"分段",key:"segments",type:I.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,r)=>this.setVector2(e,"segments",r)}],this.sphereAttrs=[{label:"半径",key:"radius",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,r)=>e.setAttr("radius",r)},{label:"水平角度",key:"phiLength",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:360,getter:e=>e.phiLength*Fn,setter:(e,r)=>e.setAttr("phiLength",r*jt)},{label:"垂直角度",key:"thetaLength",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:180,getter:e=>e.thetaLength*Fn,setter:(e,r)=>e.setAttr("thetaLength",r*jt)},{label:"分段",key:"segments",type:I.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,r)=>this.setVector2(e,"segments",r)}],this.pipeAttrs=[{label:"半径",key:"radius",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,r)=>e.setAttr("radius",r)}],this.ambientLightAttrs=[{label:"颜色",key:"color",type:I.COLOR,disableAlpha:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("color"),setter:(e,r)=>e.setAttr("color",r)},{label:"强度",key:"intensity",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("intensity"),setter:(e,r)=>e.setAttr("intensity",r)}],this.directionalLightAttrs=[...this.ambientLightAttrs,{label:"阴影范围",key:"shadowCameraSize",type:I.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:2,min:.1,step:.1,getter:e=>e.getAttr("shadowCameraSize"),setter:(e,r)=>e.setAttr("shadowCameraSize",r)},{label:"阴影偏移",key:"shadowBias",type:I.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,r)=>e.setAttr("shadowBias",r)},{label:"阴影尺寸",key:"shadowMapSize",type:I.ENUM,group:p.SHADOW.key,groupName:p.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,r)=>e.setAttr("shadowMapSize",r)}],this.hemisphereLightAttrs=[...this.ambientLightAttrs,{label:"底部颜色",key:"groundColor",type:I.COLOR,disableAlpha:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("groundColor"),setter:(e,r)=>e.setAttr("groundColor",r)}],this.spotLightAttrs=[...this.ambientLightAttrs,{label:"最远距离",key:"distance",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("distance"),setter:(e,r)=>e.setAttr("distance",r)},{label:"范围角度",key:"angle",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:1,min:0,max:90,getter:e=>e.getAttr("angle")*Fn,setter:(e,r)=>{const i=r;e.setAttr("angle",i*jt)}},{label:"半影衰减",key:"penumbra",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,max:1,step:.1,getter:e=>e.getAttr("penumbra"),setter:(e,r)=>e.setAttr("penumbra",r)},{label:"光照衰减",key:"decay",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("decay"),setter:(e,r)=>e.setAttr("decay",r)},{label:"阴影偏移",key:"shadowBias",type:I.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,r)=>e.setAttr("shadowBias",r)},{label:"阴影尺寸",key:"shadowMapSize",type:I.ENUM,group:p.SHADOW.key,groupName:p.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,r)=>e.setAttr("shadowMapSize",r)}],this.pointLightAttrs=[...this.ambientLightAttrs,{label:"最远距离",key:"distance",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("distance"),setter:(e,r)=>e.setAttr("distance",r)},{label:"光照衰减",key:"decay",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("decay"),setter:(e,r)=>e.setAttr("decay",r)},{label:"阴影偏移",key:"shadowBias",type:I.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,r)=>e.setAttr("shadowBias",r)},{label:"阴影尺寸",key:"shadowMapSize",type:I.ENUM,group:p.SHADOW.key,groupName:p.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,r)=>e.setAttr("shadowMapSize",r)}],this.perspectiveCameraAttrs=[{label:"视角",key:"fov",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:1,min:.1,step:.1,getter:e=>e.getAttr("fov"),setter:(e,r)=>e.setAttr("fov",r)},{label:"近平面",key:"near",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("near"),setter:(e,r)=>e.setAttr("near",r)},{label:"远平面",key:"far",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("far"),setter:(e,r)=>e.setAttr("far",r)}],this.orthographicCameraAttrs=[{label:"正交尺寸",key:"frustumSize",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:1,min:.1,step:.1,getter:e=>e.getAttr("frustumSize"),setter:(e,r)=>e.setAttr("frustumSize",r)},{label:"近平面",key:"near",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("near"),setter:(e,r)=>e.setAttr("near",r)},{label:"远平面",key:"far",step:.1,type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,getter:e=>e.getAttr("far"),setter:(e,r)=>e.setAttr("far",r)}],this.modelAttrs=[{label:"模型ID",key:"modelCode",type:I.STRING,disabled:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("modelCode"),setter:(e,r)=>e.setAttr("modelCode",r)}],this.symbolAttrs=[{label:"图符路径",key:"symbolPath",type:I.STRING,disabled:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("symbolPath"),setter:(e,r)=>e.setAttr("symbolPath",r)},{label:"显示模式",key:"mode",type:I.ENUM,options:[{label:"2D",value:"2d"},{label:"3D",value:"3d"}],group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("mode"),setter:(e,r)=>e.setAttr("mode",r)}],this.textAttrs=[{label:"尺寸",key:"size",type:I.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.size.toArray(),setter:(e,r)=>this.setVector2(e,"size",r)},{label:"文本",key:"text",type:I.STRING,group:p.TEXT.key,groupName:p.TEXT.name,getter:e=>e.getAttr("text"),setter:(e,r)=>e.setAttr("text",r)},{label:"颜色",key:"fill",type:I.COLOR,group:p.TEXT.key,groupName:p.TEXT.name,getter:e=>e.getAttr("fill"),setter:(e,r)=>e.setAttr("fill",r)},{label:"字体",key:"fontFamily",type:I.ENUM,group:p.TEXT.key,groupName:p.TEXT.name,options:om,getter:e=>e.getAttr("fontFamily"),setter:(e,r)=>e.setAttr("fontFamily",r)},{label:"字体大小",key:"fontSize",type:I.NUMBER,group:p.TEXT.key,groupName:p.TEXT.name,min:12,precision:0,getter:e=>e.getAttr("fontSize"),setter:(e,r)=>e.setAttr("fontSize",r)},{label:"字体样式",key:"fontStyle",type:I.ENUM,group:p.TEXT.key,groupName:p.TEXT.name,options:sm,getter:e=>e.getAttr("fontStyle"),setter:(e,r)=>e.setAttr("fontStyle",r)},{label:"对齐方式",key:"align",type:I.ENUM,group:p.TEXT.key,groupName:p.TEXT.name,options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],getter:e=>e.getAttr("align"),setter:(e,r)=>e.setAttr("align",r)}]}setVector2(t,e,r,i){const a=t.getAttr(e).toArray(),[o,s,l]=r;switch(l){case"x":a[0]=i?i(o):o;break;case"y":a[1]=i?i(s):s;break;default:a[0]=i?i(o):o,a[1]=i?i(s):s;break}t.setAttr(e,Fc.fromArray(a))}setVector3(t,e,r){const i=t.getAttr(e).toArray(),[a,o,s,l]=r;switch(l){case"x":i[0]=a;break;case"y":i[1]=o;break;case"z":i[2]=s;break;default:i[0]=a,i[1]=o,i[2]=s;break}t.setAttr(e,Ke.fromArray(i))}setEuler(t,e){const r=t.rotation.toArray(),[i,a,o,s]=e;switch(s){case"x":r[0]=i*jt;break;case"y":r[1]=a*jt;break;case"z":r[2]=o*jt;break;default:r[0]=i*jt,r[1]=a*jt,r[2]=o*jt;break}oi.fromArray(r),t.setAttr("rotation",oi)}}const uf=[Pe.AmbientLight,Pe.DirectionalLight,Pe.HemisphereLight],df=["rotation","scale"];class hf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"customAttrs");C(this,"activeGroups");C(this,"getGroups",t=>{const e=[];for(const r of t.components)switch(r.type){case me.SimpleScript:e.push({editor:this.editor,type:Kt.Component,group:`component-${r.id}`,groupName:pt[me.SimpleScript],attributes:this.getScriptComponentAttrs(r),meta:{component:r}});break;case me.OrbitControls:e.push({editor:this.editor,type:Kt.Component,group:`component-${r.id}`,groupName:pt[me.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(r),meta:{component:r}});break;case me.PointerLockControls:e.push({editor:this.editor,type:Kt.Component,group:`component-${r.id}`,groupName:pt[me.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(r),meta:{component:r}});break}return e});this.editor=t,this.activeGroups=[p.BASE.key];const{commonAttrs:e,planeAttrs:r,boxAttrs:i,coneAttrs:a,cylinderAttrs:o,sphereAttrs:s,pipeAttrs:l,ambientLightAttrs:u,directionalLightAttrs:d,hemisphereLightAttrs:h,spotLightAttrs:v,pointLightAttrs:m,perspectiveCameraAttrs:y,orthographicCameraAttrs:S,modelAttrs:g,symbolAttrs:f,textAttrs:b}=new cf(this.editor);this.commonAttrs=this.createAttributes(e),this.customAttrs=new Map([[Pe.Plane,this.createAttributes(r)],[Pe.Box,this.createAttributes(i)],[Pe.Cone,this.createAttributes(a)],[Pe.Cylinder,this.createAttributes(o)],[Pe.Sphere,this.createAttributes(s)],[Pe.Pipe,this.createAttributes(l)],[Pe.AmbientLight,this.createAttributes(u)],[Pe.DirectionalLight,this.createAttributes(d)],[Pe.HemisphereLight,this.createAttributes(h)],[Pe.SpotLight,this.createAttributes(v)],[Pe.PointLight,this.createAttributes(m)],[Pe.PerspectiveCamera,this.createAttributes(y)],[Pe.OrthographicCamera,this.createAttributes(S)],[Pe.Model,this.createAttributes(g)],[Pe.Symbol,this.createAttributes(f)],[Pe.Text,this.createAttributes(b)]])}createAttributes(t){return t.map(e=>new ln(this.editor,e,[]))}getAttributes(t){const e=this.customAttrs.get(t.type)||[];let r=[...this.commonAttrs];return uf.includes(t.type)&&(r=r.filter(i=>!df.includes(i.key))),[...r,...e]}getScriptComponentAttrs(t){const e=[];return e.push({label:"组件名称",key:"component-name",type:I.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,i)=>t.setAttr("name",i)},{label:"启用",key:"enabled",type:I.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,i)=>t.setAttr("_enabled",i)},{label:"脚本",key:"component-script",type:I.SCRIPT,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("script"),setter:(r,i)=>t.setAttr("script",i)}),e.map(r=>new ln(this.editor,r,[]))}getOrbitControlsComponentAttrs(t){const e=[];return e.push({label:"组件名称",key:"component-name",type:I.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,i)=>t.setAttr("name",i)},{label:"启用",key:"enabled",type:I.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,i)=>t.setAttr("_enabled",i)},{label:"焦点距离",key:"distance",type:I.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("distance"),setter:(r,i)=>t.setAttr("distance",i)}),e.map(r=>new ln(this.editor,r,[]))}getPointerLockControlsComponentAttrs(t){const e=[];return e.push({label:"组件名称",key:"component-name",type:I.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,i)=>t.setAttr("name",i)},{label:"启用",key:"enabled",type:I.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,i)=>t.setAttr("_enabled",i)},{label:"移动速度",key:"moveSpeed",type:I.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("moveSpeed"),setter:(r,i)=>t.setAttr("moveSpeed",i)}),e.map(r=>new ln(this.editor,r,[]))}}const Ui=100;class pf{constructor(t){C(this,"editor");C(this,"attributes");this.editor=t,this.attributes=[{label:"调试信息",key:"debug",type:I.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("debug"),setter:(e,r)=>e.setAttr("debug",r)},{label:"场景编码",key:"code",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,disabled:!0,getter:e=>e.getAttr("code"),setter:()=>{}},{label:"场景名称",key:"name",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,max:Ui,getter:e=>e.getAttr("name"),setter:(e,r)=>e.setAttr("name",r)},{label:"描述",key:"desc",max:256,type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("desc"),setter:(e,r)=>e.setAttr("desc",r)},{label:"版本",key:"ver",disabled:!0,type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("ver"),setter:(e,r)=>e.setAttr("ver",r)},{label:"作者",key:"author",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,max:Ui,getter:e=>e.getAttr("author"),setter:(e,r)=>e.setAttr("author",r)},{label:"公司",key:"company",type:I.STRING,max:Ui,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("company"),setter:(e,r)=>e.setAttr("company",r)},{label:"最新更新日期",key:"date",disabled:!0,type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("date"),setter:(e,r)=>e.setAttr("date",r)},{label:"背景颜色",key:"backgroundColor",type:I.COLOR,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,disableAlpha:!0,getter:e=>e.getAttr("backgroundColor"),setter:(e,r)=>e.setAttr("backgroundColor",r)},{label:"背景贴图",key:"backgroundTexture",type:I.TEXTURE,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,getter:e=>e.getAttr("backgroundTexture"),setter:(e,r)=>e.setAttr("backgroundTexture",r)},{label:"背景模糊",key:"backgroundBlurriness",type:I.NUMBER,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,min:0,max:1,precision:1,step:.1,getter:e=>e.getAttr("backgroundBlurriness"),setter:(e,r)=>e.setAttr("backgroundBlurriness",r)},{label:"背景强度",key:"backgroundIntensity",type:I.NUMBER,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,min:0,precision:1,step:.1,getter:e=>e.getAttr("backgroundIntensity"),setter:(e,r)=>e.setAttr("backgroundIntensity",r)},{label:"背景旋转",key:"backgroundRotation",type:I.NUMBER,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,min:-180,max:180,precision:1,getter:e=>e.getAttr("backgroundRotation"),setter:(e,r)=>e.setAttr("backgroundRotation",r)},{label:"环境贴图",key:"environmentTexture",type:I.TEXTURE,group:p.ENVIRONMENT.key,groupName:p.ENVIRONMENT.name,getter:e=>e.getAttr("environmentTexture"),setter:(e,r)=>e.setAttr("environmentTexture",r)},{label:"环境贴图强度",key:"environmentIntensity",type:I.NUMBER,group:p.ENVIRONMENT.key,groupName:p.ENVIRONMENT.name,min:0,precision:1,step:.1,getter:e=>e.getAttr("environmentIntensity"),setter:(e,r)=>e.setAttr("environmentIntensity",r)},{label:"环境贴图旋转",key:"environmentRotation",type:I.NUMBER,group:p.ENVIRONMENT.key,groupName:p.ENVIRONMENT.name,min:-180,max:180,precision:1,getter:e=>e.getAttr("environmentRotation"),setter:(e,r)=>e.setAttr("environmentRotation",r)},{label:"开启雾效",key:"fogEnable",type:I.BOOLEAN,group:p.FOG.key,groupName:p.FOG.name,getter:e=>e.getAttr("fogEnable"),setter:(e,r)=>e.setAttr("fogEnable",r)},{label:"雾气颜色",key:"fogColor",type:I.COLOR,disableAlpha:!0,group:p.FOG.key,groupName:p.FOG.name,getter:e=>e.getAttr("fogColor"),setter:(e,r)=>e.setAttr("fogColor",r)},{label:"雾气近端",key:"fogNear",type:I.NUMBER,group:p.FOG.key,groupName:p.FOG.name,min:0,precision:1,getter:e=>e.getAttr("fogNear"),setter:(e,r)=>e.setAttr("fogNear",r)},{label:"雾气远端",key:"fogFar",type:I.NUMBER,group:p.FOG.key,groupName:p.FOG.name,min:0,precision:1,getter:e=>e.getAttr("fogFar"),setter:(e,r)=>e.setAttr("fogFar",r)},{label:"开启阴影",key:"shadowMapEnabled",type:I.BOOLEAN,group:p.SHADOW.key,groupName:p.SHADOW.name,getter:e=>e.getAttr("shadowMapEnabled"),setter:(e,r)=>e.setAttr("shadowMapEnabled",r)},{label:"阴影类型",key:"shadowMapType",type:I.ENUM,options:[{value:0,label:"Basic"},{value:1,label:"PCF "},{value:2,label:"PCF Soft"}],group:p.SHADOW.key,groupName:p.SHADOW.name,getter:e=>e.getAttr("shadowMapType"),setter:(e,r)=>e.setAttr("shadowMapType",r)},{label:"开启后处理",key:"effectEnabled",type:I.BOOLEAN,group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectEnabled"),setter:(e,r)=>e.setAttr("effectEnabled",r)},{label:"抗锯齿等级",key:"effectMultisampling",type:I.ENUM,options:[{value:0,label:"无"},{value:2,label:"2级 "},{value:4,label:"4级"},{value:8,label:"8级"},{value:16,label:"16级"}],group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectMultisampling"),setter:(e,r)=>e.setAttr("effectMultisampling",r)},{label:"光晕强度",key:"effectBloomIntensity",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomIntensity"),setter:(e,r)=>e.setAttr("effectBloomIntensity",r)},{label:"光晕阈值",key:"effectBloomLuminanceThreshold",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomLuminanceThreshold"),setter:(e,r)=>e.setAttr("effectBloomLuminanceThreshold",r)},{label:"光晕平滑值",key:"effectBloomLuminanceSmoothing",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.01,precision:3,getter:e=>e.getAttr("effectBloomLuminanceSmoothing"),setter:(e,r)=>e.setAttr("effectBloomLuminanceSmoothing",r)},{label:"光晕半径",key:"effectBloomRadius",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomRadius"),setter:(e,r)=>e.setAttr("effectBloomRadius",r)},{label:"AO降采样",key:"effectN8aoHalfRes",type:I.BOOLEAN,group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectN8aoHalfRes"),setter:(e,r)=>e.setAttr("effectN8aoHalfRes",r)},{label:"AO质量模式",key:"effectN8aoQualityMode",type:I.ENUM,group:p.EFFECT.key,groupName:p.EFFECT.name,options:[{label:"性能",value:"Performance"},{label:"低",value:"Low"},{label:"中",value:"Medium"},{label:"高",value:"High"},{label:"超高",value:"Ultra"}],getter:e=>e.getAttr("effectN8aoQualityMode"),setter:(e,r)=>e.setAttr("effectN8aoQualityMode",r)},{label:"AO强度",key:"effectN8aoIntensity",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectN8aoIntensity"),setter:(e,r)=>e.setAttr("effectN8aoIntensity",r)},{label:"AO半径",key:"effectN8aoRadius",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectN8aoRadius"),setter:(e,r)=>e.setAttr("effectN8aoRadius",r)},{label:"AO距离衰减",key:"effectN8aoDistanceFalloff",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectN8aoDistanceFalloff"),setter:(e,r)=>e.setAttr("effectN8aoDistanceFalloff",r)},{label:"AO颜色",key:"effectN8aoColor",type:I.COLOR,group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectN8aoColor"),setter:(e,r)=>e.setAttr("effectN8aoColor",r)},{label:"晕映技术",key:"effectVignetteTechnique",type:I.ENUM,group:p.EFFECT.key,groupName:p.EFFECT.name,options:[{label:"DEFAULT",value:0},{label:"ESKIL",value:1}],getter:e=>e.getAttr("effectVignetteTechnique"),setter:(e,r)=>e.setAttr("effectVignetteTechnique",r)},{label:"晕映偏移",key:"effectVignetteOffset",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,max:1,step:.1,precision:2,getter:e=>e.getAttr("effectVignetteOffset"),setter:(e,r)=>e.setAttr("effectVignetteOffset",r)},{label:"晕映暗度",key:"effectVignetteDarkness",type:I.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,max:1,step:.1,precision:2,getter:e=>e.getAttr("effectVignetteDarkness"),setter:(e,r)=>e.setAttr("effectVignetteDarkness",r)},{label:"色调映射",key:"effectToneMappingMode",type:I.ENUM,options:[{value:0,label:"LINEAR"},{value:1,label:"REINHARD "},{value:2,label:"REINHARD2"},{value:3,label:"REINHARD2_ADAPTIVE"},{value:4,label:"OPTIMIZED_CINEON"},{value:5,label:"CINEON"},{value:6,label:"ACES_FILMIC"},{value:7,label:"AGX"},{value:8,label:"NEUTRAL"}],group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectToneMappingMode"),setter:(e,r)=>e.setAttr("effectToneMappingMode",r)},{label:"开启网格",key:"gridEnable",type:I.BOOLEAN,group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridEnable"),setter:(e,r)=>e.setAttr("gridEnable",r)},{label:"网格尺寸",key:"gridSize",type:I.ENUM,options:[{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:1e3,label:"1000"}],group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridSize"),setter:(e,r)=>e.setAttr("gridSize",r)},{label:"网格颜色1",key:"gridColor1",type:I.COLOR,disableAlpha:!0,group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridColor1"),setter:(e,r)=>e.setAttr("gridColor1",r)},{label:"网格颜色2",key:"gridColor2",type:I.COLOR,disableAlpha:!0,group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridColor2"),setter:(e,r)=>e.setAttr("gridColor2",r)}]}}class gf{constructor(t){C(this,"editor");C(this,"attributes");C(this,"activeGroups");C(this,"getGroups",t=>{const e=[];for(const r of t.components)switch(r.type){case me.SimpleScript:e.push({editor:this.editor,type:Kt.Component,group:`component-${r.id}`,groupName:pt[me.SimpleScript],attributes:this.getScriptComponentAttrs(r),meta:{component:r}});break;case me.OrbitControls:e.push({editor:this.editor,type:Kt.Component,group:`component-${r.id}`,groupName:pt[me.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(r),meta:{component:r}});break;case me.PointerLockControls:e.push({editor:this.editor,type:Kt.Component,group:`component-${r.id}`,groupName:pt[me.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(r),meta:{component:r}});break}return e});this.editor=t,this.activeGroups=[p.BASE.key];const{attributes:e}=new pf(this.editor);this.attributes=this.createAttributes(e)}createAttributes(t){return t.map(e=>new ln(this.editor,e,[]))}getAttributes(){return this.attributes}getScriptComponentAttrs(t){const e=[];return e.push({label:"组件名称",key:"component-name",type:I.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,i)=>t.setAttr("name",i)},{label:"启用",key:"enabled",type:I.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,i)=>t.setAttr("_enabled",i)},{label:"脚本",key:"component-script",type:I.SCRIPT,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("script"),setter:(r,i)=>t.setAttr("script",i)}),e.map(r=>new ln(this.editor,r,[]))}getOrbitControlsComponentAttrs(t){const e=[];return e.push({label:"组件名称",key:"component-name",type:I.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,i)=>t.setAttr("name",i)},{label:"启用",key:"enabled",type:I.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,i)=>t.setAttr("_enabled",i)},{label:"焦点距离",key:"distance",type:I.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("distance"),setter:(r,i)=>t.setAttr("distance",i)}),e.map(r=>new ln(this.editor,r,[]))}getPointerLockControlsComponentAttrs(t){const e=[];return e.push({label:"组件名称",key:"component-name",type:I.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("name"),setter:(r,i)=>t.setAttr("name",i)},{label:"启用",key:"enabled",type:I.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>t.getAttr("_enabled"),setter:(r,i)=>t.setAttr("_enabled",i)},{label:"移动速度",key:"moveSpeed",type:I.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>t.getAttr("moveSpeed"),setter:(r,i)=>t.setAttr("moveSpeed",i)}),e.map(r=>new ln(this.editor,r,[]))}}const mf=Math.PI/180,ff=180/Math.PI,vf=[{label:"正面",value:0},{label:"背面",value:1},{label:"双面",value:2}],yf=[{label:"无",value:0},{label:"正常",value:1},{label:"相加",value:2},{label:"相减",value:3},{label:"相乘",value:4}],bf=[{label:"UV映射",value:300},{label:"等距反射映射",value:303},{label:"等距折射映射",value:304}],Eo=[{label:"重复",value:1e3},{label:"扩展边缘",value:1001},{label:"镜像重复",value:1002}],Sf=[{label:"无",value:""},{label:"RGB色彩空间",value:"srgb"},{label:"线性RGB色彩空间",value:"srgb-linear"}],Cf=[{label:"通道0",value:0},{label:"通道1",value:1},{label:"通道2",value:2},{label:"通道3",value:3}],xf=[ft.Basic,ft.Phong],Ef=[ft.Standard,ft.Physical],Af=[ft.Phong,ft.Standard,ft.Physical],De=n=>n.type===ft.Physical,pr=n=>Ef.includes(n.type),Ao=n=>n.type===ft.Phong,Gi=n=>n.type===ft.Shader,vn=n=>n.type!=ft.Shader,Wi=n=>xf.includes(n.type),Wt=n=>Af.includes(n.type);class wf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"activeGroups");this.editor=t,this.activeGroups=[p.BASE.key],this.commonAttrs=[{label:"ID",key:"id",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,disabled:!0,getter:e=>e.getAttr("id"),setter:(e,r)=>e.setAttr("id",r)},{label:"类型",key:"type",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,disabled:!0,getter:e=>e.getAttr("type"),setter:(e,r)=>e.setAttr("type",r)},{label:"名称",key:"name",type:I.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("name"),setter:(e,r)=>e.setAttr("name",r)},{label:"透明性",key:"transparent",type:I.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("transparent"),setter:(e,r)=>e.setAttr("transparent",r)},{label:"透明度",key:"opacity",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,min:0,max:1,step:.1,precision:1,getter:e=>e.getAttr("opacity"),setter:(e,r)=>e.setAttr("opacity",r)},{label:"透明测试",key:"alphaTest",type:I.NUMBER,group:p.BASE.key,groupName:p.BASE.name,min:0,max:1,step:.1,precision:1,getter:e=>e.getAttr("alphaTest"),setter:(e,r)=>e.setAttr("alphaTest",r)},{label:"深度测试",key:"depthTest",type:I.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("depthTest"),setter:(e,r)=>e.setAttr("depthTest",r)},{label:"深度写入",key:"depthWrite",type:I.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("depthWrite"),setter:(e,r)=>e.setAttr("depthWrite",r)},{label:"面",key:"side",type:I.ENUM,group:p.BASE.key,groupName:p.BASE.name,options:vf,getter:e=>e.getAttr("side"),setter:(e,r)=>e.setAttr("side",r)},{label:"混合",key:"blending",type:I.ENUM,group:p.BASE.key,groupName:p.BASE.name,options:yf,getter:e=>e.getAttr("blending"),setter:(e,r)=>e.setAttr("blending",r)},{label:"颜色",key:"color",type:I.COLOR,disableAlpha:!0,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:vn,getter:e=>e.getAttr("color"),setter:(e,r)=>e.setAttr("color",r)},...this.createMap("map",p.DIFFUSE_MAP,vn),{label:"高光",key:"specular",type:I.COLOR,disableAlpha:!0,visible:Ao,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,getter:e=>e.getAttr("specular"),setter:(e,r)=>e.setAttr("specular",r)},{label:"光泽度",key:"shininess",type:I.NUMBER,min:0,precision:2,step:1,visible:Ao,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,getter:e=>e.getAttr("shininess"),setter:(e,r)=>e.setAttr("shininess",r)},...this.createMap("specularMap",p.SPECULAR_MAP,Wi),{label:"金属度",key:"metalness",min:0,step:.1,precision:2,type:I.NUMBER,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:pr,getter:e=>e.getAttr("metalness"),setter:(e,r)=>e.setAttr("metalness",r)},...this.createMap("metalnessMap",p.METALLNESS_MAP,pr),{label:"粗糙度",key:"roughness",min:0,step:.1,precision:2,type:I.NUMBER,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:pr,getter:e=>e.getAttr("roughness"),setter:(e,r)=>e.setAttr("roughness",r)},...this.createMap("roughnessMap",p.ROUGHNESS_MAP,pr),{label:"法线强度",key:"normalScale",min:-1,max:1,step:.1,precision:2,type:I.VECTOR2,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Wt,getter:e=>e.getAttr("normalScale"),setter:(e,r)=>e.setAttr("normalScale",r)},...this.createMap("normalMap",p.NORMAL_MAP,Wt),{label:"环境光遮蔽强度",key:"aoMapIntensity",min:0,step:.1,precision:2,type:I.NUMBER,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:vn,getter:e=>e.getAttr("aoMapIntensity"),setter:(e,r)=>e.setAttr("aoMapIntensity",r)},...this.createMap("aoMap",p.AO_MAP,vn),{label:"反射率",key:"reflectivity",min:0,step:.1,precision:2,type:I.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:Wi,getter:e=>e.getAttr("reflectivity"),setter:(e,r)=>e.setAttr("reflectivity",r)},{label:"折射率",key:"refractionRatio",min:0,step:.1,precision:2,type:I.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:Wi,getter:e=>e.getAttr("refractionRatio"),setter:(e,r)=>e.setAttr("refractionRatio",r)},{label:"环境光强度",key:"envMapIntensity",min:0,step:.1,precision:2,type:I.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:pr,getter:e=>e.getAttr("envMapIntensity"),setter:(e,r)=>e.setAttr("envMapIntensity",r)},...this.createMap("envMap",p.ENV_MAP,vn),{label:"自发光",key:"emissive",type:I.COLOR,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Wt,getter:e=>e.getAttr("emissive"),setter:(e,r)=>e.setAttr("emissive",r)},{label:"自发光强度",key:"emissiveIntensity",min:0,step:.1,precision:2,type:I.NUMBER,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Wt,getter:e=>e.getAttr("emissiveIntensity"),setter:(e,r)=>e.setAttr("emissiveIntensity",r)},...this.createMap("emissiveMap",p.EMISSIVE_MAP,Wt),...this.createMap("alphaMap",p.ALPHA_MAP,vn),{label:"凹凸贴图强度",key:"bumpScale",min:0,step:.1,precision:2,type:I.NUMBER,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Wt,getter:e=>e.getAttr("bumpScale"),setter:(e,r)=>e.setAttr("bumpScale",r)},...this.createMap("bumpMap",p.BUMP_MAP,Wt),{label:"置换贴图强度",key:"displacementScale",min:0,step:.1,precision:2,type:I.NUMBER,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Wt,getter:e=>e.getAttr("displacementScale"),setter:(e,r)=>e.setAttr("displacementScale",r)},{label:"置换贴图偏移",key:"displacementBias",step:.1,precision:2,type:I.NUMBER,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Wt,getter:e=>e.getAttr("displacementBias"),setter:(e,r)=>e.setAttr("displacementBias",r)},...this.createMap("displacementMap",p.DISPLACEMENT_MAP,Wt),{label:"光照贴图强度",key:"lightMapIntensity",min:0,step:.1,precision:2,type:I.NUMBER,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:vn,getter:e=>e.getAttr("lightMapIntensity"),setter:(e,r)=>e.setAttr("lightMapIntensity",r)},...this.createMap("lightMap",p.LIGHT_MAP,vn),{label:"各向异性强度",key:"anisotropy",min:0,step:.1,precision:2,type:I.NUMBER,group:p.ANISOTROPY_MAP.key,groupName:p.ANISOTROPY_MAP.name,visible:De,getter:e=>e.getAttr("anisotropy"),setter:(e,r)=>e.setAttr("anisotropy",r)},{label:"各向异性旋转",key:"anisotropyRotation",step:.1,precision:2,type:I.NUMBER,group:p.ANISOTROPY_MAP.key,groupName:p.ANISOTROPY_MAP.name,visible:De,getter:e=>e.getAttr("anisotropyRotation"),setter:(e,r)=>e.setAttr("anisotropyRotation",r)},...this.createMap("anisotropyMap",p.ANISOTROPY_MAP,De),{label:"衰减颜色",key:"attenuationColor",type:I.COLOR,group:p.CLEARCOAT_MAP.key,groupName:p.CLEARCOAT_MAP.name,visible:De,getter:e=>e.getAttr("attenuationColor"),setter:(e,r)=>e.setAttr("attenuationColor",r)},{label:"衰减距离",key:"attenuationDistance",type:I.NUMBER,min:.01,step:.1,precision:2,group:p.CLEARCOAT_MAP.key,groupName:p.CLEARCOAT_MAP.name,visible:De,getter:e=>e.getAttr("attenuationDistance"),setter:(e,r)=>e.setAttr("attenuationDistance",r)},{label:"清漆强度",key:"clearcoat",type:I.NUMBER,min:0,step:.1,precision:2,group:p.CLEARCOAT_MAP.key,groupName:p.CLEARCOAT_MAP.name,visible:De,getter:e=>e.getAttr("clearcoat"),setter:(e,r)=>e.setAttr("clearcoat",r)},...this.createMap("clearcoatMap",p.CLEARCOAT_MAP,De),{label:"清漆法线强度",key:"clearcoatNormalScale",type:I.VECTOR2,step:.1,precision:2,group:p.CLEARCOAT_NORMAL_MAP.key,groupName:p.CLEARCOAT_NORMAL_MAP.name,visible:De,getter:e=>e.getAttr("clearcoatNormalScale"),setter:(e,r)=>e.setAttr("clearcoatNormalScale",r)},...this.createMap("clearcoatNormalMap",p.CLEARCOAT_NORMAL_MAP,De),{label:"清漆粗糙度",key:"clearcoatRoughness",type:I.NUMBER,min:0,step:.1,precision:2,group:p.CLEARCOAT_ROUGHNESS_MAP.key,groupName:p.CLEARCOAT_ROUGHNESS_MAP.name,visible:De,getter:e=>e.getAttr("clearcoatRoughness"),setter:(e,r)=>e.setAttr("clearcoatRoughness",r)},...this.createMap("clearcoatRoughnessMap",p.CLEARCOAT_ROUGHNESS_MAP,De),{label:"虹彩强度",key:"iridescence",type:I.NUMBER,min:0,step:.1,precision:2,group:p.IRIDESCENE_MAP.key,groupName:p.IRIDESCENE_MAP.name,visible:De,getter:e=>e.getAttr("iridescence"),setter:(e,r)=>e.setAttr("iridescence",r)},{label:"虹彩色移强度",key:"iridescenceIOR",type:I.NUMBER,min:1,max:2.333,step:.1,precision:3,group:p.IRIDESCENE_MAP.key,groupName:p.IRIDESCENE_MAP.name,visible:De,getter:e=>e.getAttr("iridescenceIOR"),setter:(e,r)=>e.setAttr("iridescenceIOR",r)},...this.createMap("iridescenceMap",p.IRIDESCENE_MAP,De),{label:"虹彩厚度",key:"iridescenceThicknessRange",type:I.VECTOR2,min:0,step:1,precision:1,group:p.IRIDESCENE_THICKNESS_MAP.key,groupName:p.IRIDESCENE_THICKNESS_MAP.name,visible:De,getter:e=>e.getAttr("iridescenceThicknessRange"),setter:(e,r)=>e.setAttr("iridescenceThicknessRange",r)},...this.createMap("iridescenceThicknessMap",p.IRIDESCENE_THICKNESS_MAP,De),{label:"光泽强度",key:"sheen",type:I.NUMBER,min:0,step:.1,precision:2,group:p.SHEEN_COLOR_MAP.key,groupName:p.SHEEN_COLOR_MAP.name,visible:De,getter:e=>e.getAttr("sheen"),setter:(e,r)=>e.setAttr("sheen",r)},{label:"光泽颜色",key:"sheenColor",type:I.COLOR,group:p.SHEEN_COLOR_MAP.key,groupName:p.SHEEN_COLOR_MAP.name,visible:De,getter:e=>e.getAttr("sheenColor"),setter:(e,r)=>e.setAttr("sheenColor",r)},...this.createMap("sheenColorMap",p.SHEEN_COLOR_MAP,De),{label:"光泽粗糙度",key:"sheenRoughness",type:I.NUMBER,min:0,step:.1,precision:2,group:p.SHEEN_ROUGHNESS_MAP.key,groupName:p.SHEEN_ROUGHNESS_MAP.name,visible:De,getter:e=>e.getAttr("sheenRoughness"),setter:(e,r)=>e.setAttr("sheenRoughness",r)},...this.createMap("sheenRoughnessMap",p.SHEEN_ROUGHNESS_MAP,De),{label:"高光反射颜色",key:"specularColor",type:I.COLOR,group:p.SPECULAR_COLOR_MAP.key,groupName:p.SPECULAR_COLOR_MAP.name,visible:De,getter:e=>e.getAttr("specularColor"),setter:(e,r)=>e.setAttr("specularColor",r)},...this.createMap("specularColorMap",p.SPECULAR_COLOR_MAP,De),{label:"高光反射强度",key:"specularIntensity",type:I.NUMBER,min:0,step:.1,precision:2,group:p.SPECULAR_INTENSITY_MAP.key,groupName:p.SPECULAR_INTENSITY_MAP.name,visible:De,getter:e=>e.getAttr("specularIntensity"),setter:(e,r)=>e.setAttr("specularIntensity",r)},...this.createMap("specularIntensityMap",p.SPECULAR_INTENSITY_MAP,De),{label:"色散",key:"dispersion",type:I.NUMBER,min:0,step:.1,precision:2,group:p.TRANSMISSION_MAP.key,groupName:p.TRANSMISSION_MAP.name,visible:De,getter:e=>e.getAttr("dispersion"),setter:(e,r)=>e.setAttr("dispersion",r)},{label:"折射率",key:"ior",type:I.NUMBER,min:1,max:2.333,step:.1,precision:3,group:p.TRANSMISSION_MAP.key,groupName:p.TRANSMISSION_MAP.name,visible:De,getter:e=>e.getAttr("ior"),setter:(e,r)=>e.setAttr("ior",r)},{label:"反射率",key:"reflectivity",type:I.NUMBER,min:0,max:1,step:.1,precision:2,tip:"当metalness为1.0时，此属性无效",group:p.TRANSMISSION_MAP.key,groupName:p.TRANSMISSION_MAP.name,visible:De,getter:e=>e.getAttr("reflectivity"),setter:(e,r)=>e.setAttr("reflectivity",r)},{label:"透光率",key:"transmission",type:I.NUMBER,min:0,max:1,step:.1,precision:2,tip:"当透光率不为0的时候, opacity透明度应设置为1",group:p.TRANSMISSION_MAP.key,groupName:p.TRANSMISSION_MAP.name,visible:De,getter:e=>e.getAttr("transmission"),setter:(e,r)=>e.setAttr("transmission",r)},...this.createMap("transmissionMap",p.TRANSMISSION_MAP,De),{label:"厚度",key:"thickness",type:I.NUMBER,min:0,max:1,step:.1,precision:2,tip:"表面下体积的厚度。该值在网格的坐标空间中给出。如果该值为 0，则材料为薄壁。否则，材质将成为体积边界。默认值为 0。",group:p.THICKNESS_MAP.key,groupName:p.THICKNESS_MAP.name,visible:De,getter:e=>e.getAttr("thickness"),setter:(e,r)=>e.setAttr("thickness",r)},...this.createMap("thicknessMap",p.THICKNESS_MAP,De),{label:"Uniforms",key:"uniforms",type:I.UNIFORMS,group:p.CUSTOM_SHADER.key,groupName:p.CUSTOM_SHADER.name,visible:Gi,getter:e=>e.getAttr("uniforms"),setter:(e,r)=>e.setAttr("uniforms",r)},{label:"顶点着色器",key:"vertexShader",type:I.VERTEX_SHADER,group:p.CUSTOM_SHADER.key,groupName:p.CUSTOM_SHADER.name,visible:Gi,getter:e=>e.getAttr("vertexShader"),setter:(e,r)=>e.setAttr("vertexShader",r)},{label:"片元着色器",key:"fragmentShader",type:I.FRAGEMENT_SHADER,group:p.CUSTOM_SHADER.key,groupName:p.CUSTOM_SHADER.name,visible:Gi,getter:e=>e.getAttr("fragmentShader"),setter:(e,r)=>e.setAttr("fragmentShader",r)}]}getRotation(t,e){return t.getAttr(e)*ff}setRotation(t,e,r){t.setAttr(e,r*mf)}createMap(t,e,r){const i=`${t}.image`,a=`${t}.mapping`,o=`${t}.wrapS`,s=`${t}.wrapT`,l=`${t}.offset`,u=`${t}.repeat`,d=`${t}.center`,h=`${t}.rotation`,v=`${t}.flipY`,m=`${t}.colorSpace`,y=`${t}.channel`;return[{label:"贴图",key:i,type:I.TEXTURE,group:e.key,groupName:e.name,visible:r,getter:g=>g.getAttr(i),setter:(g,f)=>g.setAttr(i,f)},{label:"映射方式",key:a,type:I.ENUM,group:e.key,groupName:e.name,options:bf,visible:r,getter:g=>g.getAttr(a),setter:(g,f)=>g.setAttr(a,f)},{label:"水平包裹模式",key:o,type:I.ENUM,group:e.key,groupName:e.name,options:Eo,visible:r,getter:g=>g.getAttr(o),setter:(g,f)=>g.setAttr(o,f)},{label:"垂直包裹模式",key:s,type:I.ENUM,group:e.key,groupName:e.name,options:Eo,visible:r,getter:g=>g.getAttr(s),setter:(g,f)=>g.setAttr(s,f)},{label:"贴图偏移",key:l,step:.1,precision:2,min:0,max:1,type:I.VECTOR2,group:e.key,groupName:e.name,visible:r,getter:g=>g.getAttr(l),setter:(g,f)=>g.setAttr(l,f)},{label:"贴图缩放",key:u,step:.1,precision:2,type:I.VECTOR2,group:e.key,groupName:e.name,visible:r,getter:g=>g.getAttr(u),setter:(g,f)=>g.setAttr(u,f)},{label:"贴图中心",key:d,min:0,max:1,step:.1,precision:2,type:I.VECTOR2,group:e.key,groupName:e.name,visible:r,getter:g=>g.getAttr(d),setter:(g,f)=>g.setAttr(d,f)},{label:"贴图旋转",key:h,min:0,max:360,step:1,precision:1,type:I.NUMBER,group:e.key,groupName:e.name,visible:r,getter:g=>this.getRotation(g,h),setter:(g,f)=>this.setRotation(g,h,f)},{label:"Y轴反转",key:v,type:I.BOOLEAN,group:e.key,groupName:e.name,visible:r,getter:g=>g.getAttr(v),setter:(g,f)=>g.setAttr(v,f)},{label:"色彩空间",key:m,type:I.ENUM,group:e.key,groupName:e.name,options:Sf,visible:r,getter:g=>g.getAttr(m),setter:(g,f)=>g.setAttr(m,f)},{label:"通道",key:y,type:I.ENUM,group:e.key,groupName:e.name,options:Cf,visible:r,getter:g=>g.getAttr(y),setter:(g,f)=>g.setAttr(y,f)}]}}class Mf{constructor(t){C(this,"editor");C(this,"commonAttrs");C(this,"activeGroups");C(this,"getGroups",()=>[]);this.editor=t,this.activeGroups=[p.BASE.key];const{commonAttrs:e}=new wf(this.editor);this.commonAttrs=this.createAttributes(e)}createAttributes(t){return t.map(e=>new ln(this.editor,e,[]))}getAttributes(){return[...this.commonAttrs]}}const Nf=[{key:"copy",label:"拷贝",action:n=>{n.copyManager.copy()},visible:n=>n.selectionManager.getSelection().length>0},{key:"cut",label:"剪切",action:n=>{n.copyManager.cut()},visible:n=>n.selectionManager.getSelection().length>0},{key:"paste",label:"粘贴",action:n=>{n.copyManager.paste()},visible:n=>n.copyManager.canPaste()},{key:"delete",label:"删除",action:n=>{const t=n.selectionManager.getSelection();n.historyManager.beginTransaction(),n.core.select([]),t.forEach(e=>n.core.removeEntity(e)),n.historyManager.endTransaction()},visible:n=>n.selectionManager.getSelection().length>0},{key:"material",label:"材质",action:()=>{},visible:n=>n.selectionManager.getSelection().length>0,children:[{key:"copy-material",label:"拷贝",action:n=>{n.copyManager.copyMaterial()},visible:()=>!0},{key:"paste-material",label:"粘贴",action:n=>{n.copyManager.pasteMaterial()},visible:n=>n.copyManager.canPasteMaterial()},{key:"replace-material",label:"替换",action:()=>{},visible:n=>n.selectionManager.getSelection().length>0,children:[{key:"basic-material",label:"基础材质",action:n=>{n.materialManager.changeMaterial(ft.Basic)},visible:()=>!0},{key:"phong-material",label:"Phong材质",action:n=>{n.materialManager.changeMaterial(ft.Phong)},visible:()=>!0},{key:"standard-material",label:"标准材质",action:n=>{n.materialManager.changeMaterial(ft.Standard)},visible:()=>!0},{key:"physical-material",label:"物理材质",action:n=>{n.materialManager.changeMaterial(ft.Physical)},visible:()=>!0},{key:"shader-material",label:"自定义材质",action:n=>{n.materialManager.changeMaterial(ft.Shader)},visible:()=>!0}]}]},{key:"component",label:"组件",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:pt[me.SimpleScript],action:n=>{const t=kn(me.SimpleScript),e=[...n.selectionManager.getSelection()];e.length===0&&e.push(n.selectionManager.getView()),n.historyManager.beginTransaction(),e.forEach(r=>{const{entityManager:i}=n.core,a=i.createComponent(t,r);n.core.addComponent(a,r)}),n.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:pt[me.OrbitControls],action:n=>{const t=kn(me.OrbitControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(r=>{const{entityManager:i}=n.core,a=i.createComponent(t,r);n.core.addComponent(a,r)}),n.historyManager.endTransaction()},visible:n=>{const t=n.selectionManager.getSelection(),e=t.filter(r=>r instanceof Jn);return e.length>0&&e.length===t.length}},{key:"compoent_pointer_lock_controls",label:pt[me.PointerLockControls],action:n=>{const t=kn(me.PointerLockControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(r=>{const{entityManager:i}=n.core,a=i.createComponent(t,r);n.core.addComponent(a,r)}),n.historyManager.endTransaction()},visible:n=>{const t=n.selectionManager.getSelection(),e=t.filter(r=>r instanceof Jn);return e.length>0&&e.length===t.length}}]}],Of=[{key:"copy",label:"拷贝",action:n=>{n.copyManager.copy()},visible:n=>n.selectionManager.getSelection().length>0},{key:"cut",label:"剪切",action:n=>{n.copyManager.cut()},visible:n=>n.selectionManager.getSelection().length>0},{key:"paste",label:"粘贴",action:n=>{n.copyManager.paste()},visible:n=>n.copyManager.canPaste()},{key:"delete",label:"删除",action:n=>{const t=n.selectionManager.getSelection();n.historyManager.beginTransaction(),n.core.select([]),t.forEach(e=>n.core.removeEntity(e)),n.historyManager.endTransaction()},visible:n=>n.selectionManager.getSelection().length>0},{key:"component",label:"组件",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:"脚本",action:n=>{const t=kn(me.SimpleScript),e=[...n.selectionManager.getSelection()];e.length===0&&e.push(n.selectionManager.getView()),n.historyManager.beginTransaction(),e.forEach(r=>{const{entityManager:i}=n.core,a=i.createComponent(t,r);n.core.addComponent(a,r)}),n.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:"轨道控制",action:n=>{const t=kn(me.OrbitControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(r=>{const{entityManager:i}=n.core,a=i.createComponent(t,r);n.core.addComponent(a,r)}),n.historyManager.endTransaction()},visible:n=>{const t=n.selectionManager.getSelection(),e=t.filter(r=>r instanceof Jn);return e.length>0&&e.length===t.length}},{key:"compoent_pointer_lock_controls",label:pt[me.PointerLockControls],action:n=>{const t=kn(me.PointerLockControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(r=>{const{entityManager:i}=n.core,a=i.createComponent(t,r);n.core.addComponent(a,r)}),n.historyManager.endTransaction()},visible:n=>{const t=n.selectionManager.getSelection(),e=t.filter(r=>r instanceof Jn);return e.length>0&&e.length===t.length}}]}],If=[{key:"DELETE",label:"删除",action:n=>{var r;const e=(r=n.contextMenuManager.meta.group.meta)==null?void 0:r.component;e&&n.core.removeComponent(e)},visible:()=>!0}];class Pf{constructor(){C(this,"core");C(this,"historyManager");C(this,"hotkeyManager");C(this,"attrManager");C(this,"contextMenuManager");C(this,"nodeManager");C(this,"selectionManager");C(this,"toolManager");C(this,"dropManager");C(this,"copyManager");C(this,"dataManager");C(this,"componentManager");C(this,"materialManager");C(this,"bus");C(this,"dirty");this.core=new Uc({}),this.bus=Gc(),this.dirty=!1,this.core.use(new Zn(this.core)),this.core.use(new Jo(this.core)),this.core.use(new Wc(this.core)),this.core.use(new Xc(this.core)),this.core.use(new rm(this.core)),this.core.use(new rr(this.core)),this.core.use(new es(this.core)),this.core.use(new Fs(this.core)),this.core.use(new Us(this.core)),this.core.use(new Gs(this.core)),this.core.use(new ei(this.core)),this.core.use(new dn(this.core)),this.core.use(new ga(this.core)),this.core.use(new am(this.core));const t=new hf(this),e=new gf(this),r=new Mf(this);this.hotkeyManager=new cm(this,of),this.attrManager=new lm(this,t,e),this.materialManager=new af(this,r),this.contextMenuManager=new rf(this),this.historyManager=new tf(this),this.nodeManager=new um(this),this.selectionManager=new Lm(this),this.toolManager=new Dm(this),this.dropManager=new zm(this),this.copyManager=new jm(this),this.dataManager=new Jm(this),this.componentManager=new nf(this)}initContextMenus(){const{GRAPH:t,HIERARCHY:e,ATTR_COMPONENT:r}=Si;this.contextMenuManager.addContextMenu(t,Nf),this.contextMenuManager.addContextMenu(e,Of),this.contextMenuManager.addContextMenu(r,If)}initListeners(){this.core.bus.on("ENTITY_ADDED",()=>{this.bus.emit("NODE_ADD",this)}),this.core.bus.on("ENTITY_REMOVED",()=>{this.bus.emit("NODE_REMOVE",this)}),this.core.bus.on("ENTITY_MOVED",()=>{this.attrManager.update(),this.bus.emit("NODE_MOVE",this)}),this.core.bus.on("ENTITY_SELECTED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("ENTITY_CHANGED",t=>{this.attrManager.update(),t.key==="name"?this.bus.emit("GRAPH_CHANGE",this):t.key==="material"&&this.bus.emit("MATERIAL_CHANGE",this)}),this.core.bus.on("COMPONENT_ADDED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_REMOVED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_CHANGED",()=>{this.attrManager.update()}),this.core.bus.on("MATERIAL_CHANGED",()=>{this.materialManager.update()}),this.core.bus.on("TEXTURE_CHANGED",()=>{this.materialManager.update()}),this.core.bus.on("HISTORY_CHANGE",()=>{this.dirty=!0,this.bus.emit("TAB_DIRTY",this)}),this.core.bus.on("DESERIALIZE",()=>{this.bus.emit("DESERIALIZATED",this)})}async mount(t){this.core.mount(t),this.toolManager.mount(),this.initContextMenus(),this.initListeners(),this.bus.emit("TAB_MOUNT",this)}resize(){this.core.resize()}active(){this.hotkeyManager.active(),this.core.active(),this.resize()}deactive(){this.hotkeyManager.deactive(),this.core.deactive()}unmount(){this.attrManager.dispose(),this.hotkeyManager.dispose(),this.historyManager.dispose(),this.toolManager.dispose(),this.contextMenuManager.dispose(),this.core.unmount()}async open(t){const e=await Gl(t);e&&(await this.core.deserialize(e.content),console.log(`Welcome to use V Design, Version: ${this.core.entityManager.root.ver}`))}async save(){const e=await this.core.getPlugin(Zn).toImage(),r=this.core.entityManager.root.code,i=this.core.serialize(),a=await Wl(r,e,i);this.historyManager.pause(),this.core.entityManager.root.setAttr("date",a==null?void 0:a.scene.date),this.historyManager.resume(),this.bus.emit("MESSAGE",{message:"保存成功",type:"success"}),window.sessionStorage.setItem("scene",i)}preview(){const t=this.core.entityManager.root.code;window.open(`#/preview?id=${t}`,`#/preview?id=${t}`)}async reload(){this.historyManager.pause(),this.core.clear(),this.dirty=!1,this.open(this.core.entityManager.root.code),this.historyManager.dispose(),this.historyManager.resume(),this.bus.emit("TAB_DIRTY",this)}}const Rf=(n,t)=>{const[e,r]=c.useState(n.item);return c.useEffect(()=>{n.item&&(n.item.listen(t),t(n.item.getter()))},[]),n.update=i=>{e==null||e.unlisten(t),r(i),i&&(i.listen(t),t(i.getter()))},n.destroy=()=>{e==null||e.unlisten(t)},e},kf=n=>{const{attribute:t,value:e,onChange:r}=n,[i,a]=c.useState(""),[o,s]=c.useState(!1);c.useEffect(()=>{a(e)},[e]);const l=d=>{a(d.target.value),s(!0)},u=()=>{o&&(r(i),s(!1))};return z.jsx(yi,{style:{borderRadius:"4px"},disabled:t==null?void 0:t.disabled,value:i,onChange:l,onPressEnter:u,onBlur:u})},qn=n=>{const{style:t,attribute:e,value:r,onChange:i}=n,[a,o]=c.useState(0),[s,l]=c.useState(!1);c.useEffect(()=>{o(r)},[r]);const u=v=>{o(v||0),l(!0)},d=()=>{s&&(i(a),l(!1))},h=v=>{l(!1),o(v||0),i(v)};return z.jsx(Ca,{style:{borderRadius:"4px",...t},disabled:e==null?void 0:e.disabled,min:e==null?void 0:e.min,max:e==null?void 0:e.max,precision:e==null?void 0:e.precision,step:e==null?void 0:e.step,value:a,onChange:u,onPressEnter:d,onBlur:d,onStep:h})},_f=n=>{const{attribute:t,value:e,onChange:r}=n,i=a=>{r(a.target.checked)};return z.jsx(ma,{disabled:t==null?void 0:t.disabled,checked:e,onChange:i})},Tf=n=>{const{attribute:t,value:e,onChange:r}=n,[i,a]=c.useState(e);c.useEffect(()=>{a(e)},[e]);const o=s=>{r(s.toHexString())};return z.jsx(Ea,{style:{borderRadius:"4px"},disabled:t==null?void 0:t.disabled,disabledAlpha:t==null?void 0:t.disableAlpha,showText:!0,value:i,onChange:a,onChangeComplete:o})},$f=n=>{const{attribute:t,value:e,onChange:r}=n,[i,a]=c.useState("");c.useEffect(()=>{a(e)},[e]);const o=s=>{r(s)};return z.jsx(Yo,{style:{width:"100%",borderRadius:"4px"},disabled:t==null?void 0:t.disabled,options:t==null?void 0:t.options,value:i,onChange:o})},Df=n=>{const{attribute:t,value:e,onChange:r}=n,[i,a]=c.useState(0),[o,s]=c.useState(0);c.useEffect(()=>{const[d,h]=e||[];a(d),s(h)},[e]);const l=d=>{r([d,o,"x"])},u=d=>{r([i,d,"y"])};return z.jsxs(Ko,{gutter:4,children:[z.jsx(fr,{span:8,children:z.jsx(qn,{style:{width:"unset"},attribute:t,value:i,onChange:l})}),z.jsx(fr,{span:8,children:z.jsx(qn,{style:{width:"unset"},attribute:t,value:o,onChange:u})})]})},Lf=n=>{const{attribute:t,value:e,onChange:r}=n,[i,a]=c.useState(0),[o,s]=c.useState(0),[l,u]=c.useState(0);c.useEffect(()=>{const[m,y,S]=e||[];a(m),s(y),u(S)},[e]);const d=m=>{r([m,o,l,"x"])},h=m=>{r([i,m,l,"y"])},v=m=>{r([i,o,m,"z"])};return z.jsxs(Ko,{gutter:4,children:[z.jsx(fr,{span:8,children:z.jsx(qn,{style:{width:"unset"},attribute:t,value:i,onChange:d})}),z.jsx(fr,{span:8,children:z.jsx(qn,{style:{width:"unset"},attribute:t,value:o,onChange:h})}),z.jsx(fr,{span:8,children:z.jsx(qn,{style:{width:"unset"},attribute:t,value:l,onChange:v})})]})};function zf(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function wo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Mo(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?wo(Object(e),!0).forEach(function(r){zf(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):wo(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function jf(n,t){if(n==null)return{};var e={},r=Object.keys(n),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function Bf(n,t){if(n==null)return{};var e=jf(n,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(n);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(e[r]=n[r])}return e}function Hf(n,t){return Vf(n)||Ff(n,t)||Uf(n,t)||Gf()}function Vf(n){if(Array.isArray(n))return n}function Ff(n,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var e=[],r=!0,i=!1,a=void 0;try{for(var o=n[Symbol.iterator](),s;!(r=(s=o.next()).done)&&(e.push(s.value),!(t&&e.length===t));r=!0);}catch(l){i=!0,a=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw a}}return e}}function Uf(n,t){if(n){if(typeof n=="string")return No(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return No(n,t)}}function No(n,t){(t==null||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function Gf(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wf(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Oo(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,r)}return e}function Io(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Oo(Object(e),!0).forEach(function(r){Wf(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Oo(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}function Xf(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];return function(r){return t.reduceRight(function(i,a){return a(i)},r)}}function mr(n){return function t(){for(var e=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.length>=n.length?n.apply(this,i):function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return t.apply(e,[].concat(i,s))}}}function ui(n){return{}.toString.call(n).includes("Object")}function Yf(n){return!Object.keys(n).length}function xr(n){return typeof n=="function"}function Kf(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function qf(n,t){return ui(t)||Sn("changeType"),Object.keys(t).some(function(e){return!Kf(n,e)})&&Sn("changeField"),t}function Zf(n){xr(n)||Sn("selectorType")}function Qf(n){xr(n)||ui(n)||Sn("handlerType"),ui(n)&&Object.values(n).some(function(t){return!xr(t)})&&Sn("handlersType")}function Jf(n){n||Sn("initialIsRequired"),ui(n)||Sn("initialType"),Yf(n)&&Sn("initialContent")}function ev(n,t){throw new Error(n[t]||n.default)}var tv={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Sn=mr(ev)(tv),Zr={changes:qf,selector:Zf,handler:Qf,initial:Jf};function nv(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Zr.initial(n),Zr.handler(t);var e={current:n},r=mr(av)(e,t),i=mr(iv)(e),a=mr(Zr.changes)(n),o=mr(rv)(e);function s(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return Zr.selector(u),u(e.current)}function l(u){Xf(r,i,a,o)(u)}return[s,l]}function rv(n,t){return xr(t)?t(n.current):t}function iv(n,t){return n.current=Io(Io({},n.current),t),t}function av(n,t,e){return xr(t)?t(n.current):Object.keys(e).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,n.current[r])}),e}var ov={create:nv},sv={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function lv(n){return function t(){for(var e=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.length>=n.length?n.apply(this,i):function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return t.apply(e,[].concat(i,s))}}}function cv(n){return{}.toString.call(n).includes("Object")}function uv(n){return n||Po("configIsRequired"),cv(n)||Po("configType"),n.urls?(dv(),{paths:{vs:n.urls.monacoBase}}):n}function dv(){console.warn(Ws.deprecation)}function hv(n,t){throw new Error(n[t]||n.default)}var Ws={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Po=lv(hv)(Ws),pv={config:uv},gv=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return e.reduceRight(function(a,o){return o(a)},i)}};function Xs(n,t){return Object.keys(t).forEach(function(e){t[e]instanceof Object&&n[e]&&Object.assign(t[e],Xs(n[e],t[e]))}),Mo(Mo({},n),t)}var mv={type:"cancelation",msg:"operation is manually canceled"};function Xi(n){var t=!1,e=new Promise(function(r,i){n.then(function(a){return t?i(mv):r(a)}),n.catch(i)});return e.cancel=function(){return t=!0},e}var fv=ov.create({config:sv,isInitialized:!1,resolve:null,reject:null,monaco:null}),Ys=Hf(fv,2),Nr=Ys[0],Ci=Ys[1];function vv(n){var t=pv.config(n),e=t.monaco,r=Bf(t,["monaco"]);Ci(function(i){return{config:Xs(i.config,r),monaco:e}})}function yv(){var n=Nr(function(t){var e=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:e,isInitialized:r,resolve:i}});if(!n.isInitialized){if(Ci({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Xi(Yi);if(window.monaco&&window.monaco.editor)return Ks(window.monaco),n.resolve(window.monaco),Xi(Yi);gv(bv,Cv)(xv)}return Xi(Yi)}function bv(n){return document.body.appendChild(n)}function Sv(n){var t=document.createElement("script");return n&&(t.src=n),t}function Cv(n){var t=Nr(function(r){var i=r.config,a=r.reject;return{config:i,reject:a}}),e=Sv("".concat(t.config.paths.vs,"/loader.js"));return e.onload=function(){return n()},e.onerror=t.reject,e}function xv(){var n=Nr(function(e){var r=e.config,i=e.resolve,a=e.reject;return{config:r,resolve:i,reject:a}}),t=window.require;t.config(n.config),t(["vs/editor/editor.main"],function(e){Ks(e),n.resolve(e)},function(e){n.reject(e)})}function Ks(n){Nr().monaco||Ci({monaco:n})}function Ev(){return Nr(function(n){var t=n.monaco;return t})}var Yi=new Promise(function(n,t){return Ci({resolve:n,reject:t})}),qs={config:vv,init:yv,__getMonacoInstance:Ev},Av={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Ki=Av,wv={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Mv=wv;function Nv({children:n}){return L.createElement("div",{style:Mv.container},n)}var Ov=Nv,Iv=Ov;function Pv({width:n,height:t,isEditorReady:e,loading:r,_ref:i,className:a,wrapperProps:o}){return L.createElement("section",{style:{...Ki.wrapper,width:n,height:t},...o},!e&&L.createElement(Iv,null,r),L.createElement("div",{ref:i,style:{...Ki.fullWidth,...!e&&Ki.hide},className:a}))}var Rv=Pv,Zs=c.memo(Rv);function kv(n){c.useEffect(n,[])}var Qs=kv;function _v(n,t,e=!0){let r=c.useRef(!0);c.useEffect(r.current||!e?()=>{r.current=!1}:n,t)}var Pt=_v;function yr(){}function Xn(n,t,e,r){return Tv(n,r)||$v(n,t,e,r)}function Tv(n,t){return n.editor.getModel(Js(n,t))}function $v(n,t,e,r){return n.editor.createModel(t,e,r?Js(n,r):void 0)}function Js(n,t){return n.Uri.parse(t)}function Dv({original:n,modified:t,language:e,originalLanguage:r,modifiedLanguage:i,originalModelPath:a,modifiedModelPath:o,keepCurrentOriginalModel:s=!1,keepCurrentModifiedModel:l=!1,theme:u="light",loading:d="Loading...",options:h={},height:v="100%",width:m="100%",className:y,wrapperProps:S={},beforeMount:g=yr,onMount:f=yr}){let[b,A]=c.useState(!1),[x,E]=c.useState(!0),R=c.useRef(null),M=c.useRef(null),O=c.useRef(null),$=c.useRef(f),N=c.useRef(g),k=c.useRef(!1);Qs(()=>{let P=qs.init();return P.then(H=>(M.current=H)&&E(!1)).catch(H=>(H==null?void 0:H.type)!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>R.current?D():P.cancel()}),Pt(()=>{if(R.current&&M.current){let P=R.current.getOriginalEditor(),H=Xn(M.current,n||"",r||e||"text",a||"");H!==P.getModel()&&P.setModel(H)}},[a],b),Pt(()=>{if(R.current&&M.current){let P=R.current.getModifiedEditor(),H=Xn(M.current,t||"",i||e||"text",o||"");H!==P.getModel()&&P.setModel(H)}},[o],b),Pt(()=>{let P=R.current.getModifiedEditor();P.getOption(M.current.editor.EditorOption.readOnly)?P.setValue(t||""):t!==P.getValue()&&(P.executeEdits("",[{range:P.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),P.pushUndoStop())},[t],b),Pt(()=>{var P,H;(H=(P=R.current)==null?void 0:P.getModel())==null||H.original.setValue(n||"")},[n],b),Pt(()=>{let{original:P,modified:H}=R.current.getModel();M.current.editor.setModelLanguage(P,r||e||"text"),M.current.editor.setModelLanguage(H,i||e||"text")},[e,r,i],b),Pt(()=>{var P;(P=M.current)==null||P.editor.setTheme(u)},[u],b),Pt(()=>{var P;(P=R.current)==null||P.updateOptions(h)},[h],b);let _=c.useCallback(()=>{var V;if(!M.current)return;N.current(M.current);let P=Xn(M.current,n||"",r||e||"text",a||""),H=Xn(M.current,t||"",i||e||"text",o||"");(V=R.current)==null||V.setModel({original:P,modified:H})},[e,t,i,n,r,a,o]),j=c.useCallback(()=>{var P;!k.current&&O.current&&(R.current=M.current.editor.createDiffEditor(O.current,{automaticLayout:!0,...h}),_(),(P=M.current)==null||P.editor.setTheme(u),A(!0),k.current=!0)},[h,u,_]);c.useEffect(()=>{b&&$.current(R.current,M.current)},[b]),c.useEffect(()=>{!x&&!b&&j()},[x,b,j]);function D(){var H,V,q,K;let P=(H=R.current)==null?void 0:H.getModel();s||((V=P==null?void 0:P.original)==null||V.dispose()),l||((q=P==null?void 0:P.modified)==null||q.dispose()),(K=R.current)==null||K.dispose()}return L.createElement(Zs,{width:m,height:v,isEditorReady:b,loading:d,_ref:O,className:y,wrapperProps:S})}var Lv=Dv;c.memo(Lv);function zv(n){let t=c.useRef();return c.useEffect(()=>{t.current=n},[n]),t.current}var jv=zv,Qr=new Map;function Bv({defaultValue:n,defaultLanguage:t,defaultPath:e,value:r,language:i,path:a,theme:o="light",line:s,loading:l="Loading...",options:u={},overrideServices:d={},saveViewState:h=!0,keepCurrentModel:v=!1,width:m="100%",height:y="100%",className:S,wrapperProps:g={},beforeMount:f=yr,onMount:b=yr,onChange:A,onValidate:x=yr}){let[E,R]=c.useState(!1),[M,O]=c.useState(!0),$=c.useRef(null),N=c.useRef(null),k=c.useRef(null),_=c.useRef(b),j=c.useRef(f),D=c.useRef(),P=c.useRef(r),H=jv(a),V=c.useRef(!1),q=c.useRef(!1);Qs(()=>{let G=qs.init();return G.then(Z=>($.current=Z)&&O(!1)).catch(Z=>(Z==null?void 0:Z.type)!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>N.current?ue():G.cancel()}),Pt(()=>{var Z,Q,ne,X;let G=Xn($.current,n||r||"",t||i||"",a||e||"");G!==((Z=N.current)==null?void 0:Z.getModel())&&(h&&Qr.set(H,(Q=N.current)==null?void 0:Q.saveViewState()),(ne=N.current)==null||ne.setModel(G),h&&((X=N.current)==null||X.restoreViewState(Qr.get(a))))},[a],E),Pt(()=>{var G;(G=N.current)==null||G.updateOptions(u)},[u],E),Pt(()=>{!N.current||r===void 0||(N.current.getOption($.current.editor.EditorOption.readOnly)?N.current.setValue(r):r!==N.current.getValue()&&(q.current=!0,N.current.executeEdits("",[{range:N.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),N.current.pushUndoStop(),q.current=!1))},[r],E),Pt(()=>{var Z,Q;let G=(Z=N.current)==null?void 0:Z.getModel();G&&i&&((Q=$.current)==null||Q.editor.setModelLanguage(G,i))},[i],E),Pt(()=>{var G;s!==void 0&&((G=N.current)==null||G.revealLine(s))},[s],E),Pt(()=>{var G;(G=$.current)==null||G.editor.setTheme(o)},[o],E);let K=c.useCallback(()=>{var G;if(!(!k.current||!$.current)&&!V.current){j.current($.current);let Z=a||e,Q=Xn($.current,r||n||"",t||i||"",Z||"");N.current=(G=$.current)==null?void 0:G.editor.create(k.current,{model:Q,automaticLayout:!0,...u},d),h&&N.current.restoreViewState(Qr.get(Z)),$.current.editor.setTheme(o),s!==void 0&&N.current.revealLine(s),R(!0),V.current=!0}},[n,t,e,r,i,a,u,d,h,o,s]);c.useEffect(()=>{E&&_.current(N.current,$.current)},[E]),c.useEffect(()=>{!M&&!E&&K()},[M,E,K]),P.current=r,c.useEffect(()=>{var G,Z;E&&A&&((G=D.current)==null||G.dispose(),D.current=(Z=N.current)==null?void 0:Z.onDidChangeModelContent(Q=>{q.current||A(N.current.getValue(),Q)}))},[E,A]),c.useEffect(()=>{if(E){let G=$.current.editor.onDidChangeMarkers(Z=>{var ne;let Q=(ne=N.current.getModel())==null?void 0:ne.uri;if(Q&&Z.find(X=>X.path===Q.path)){let X=$.current.editor.getModelMarkers({resource:Q});x==null||x(X)}});return()=>{G==null||G.dispose()}}return()=>{}},[E,x]);function ue(){var G,Z;(G=D.current)==null||G.dispose(),v?h&&Qr.set(a,N.current.saveViewState()):(Z=N.current.getModel())==null||Z.dispose(),N.current.dispose()}return L.createElement(Zs,{width:m,height:y,isEditorReady:E,loading:l,_ref:k,className:S,wrapperProps:g})}var Hv=Bv,Vv=c.memo(Hv),xi=Vv;const Fv=n=>{const{value:t,onChange:e}=n,[r,i]=c.useState(""),[a,o]=c.useState(!1);c.useEffect(()=>{i(t)},[t]);const s=()=>{i(t),o(!0)},l=()=>{e(r),o(!1)},u=()=>{o(!1)},d=h=>{i(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(vi,{onClick:s,children:"编辑"}),z.jsx(Er,{width:"80%",title:"脚本",open:a,onOk:l,onCancel:u,children:z.jsx(xi,{theme:"vs-dark",height:"70vh",defaultLanguage:"javascript",value:r,onChange:d})})]})},Uv="_canvas_1hcte_1",Gv="_container_1hcte_7",qi={canvas:Uv,container:Gv,delete:"_delete_1hcte_10"},Wv=["jpg","jpeg","png","hdr","webp"],Xv=n=>{const{attribute:t,value:e,onChange:r}=n,i=c.useRef(null),[a,o]=c.useState(!1),[s,l]=c.useState(),u=()=>{const y=i.current.getContext("2d"),{width:S,height:g}=i.current;y.clearRect(0,0,S,g)};c.useEffect(()=>{if(u(),!e||!t)return;const y=t.editor.core.textureManager.renderTexture(i.current,e);l(y)},[e,t]);const d=async y=>{y.preventDefault(),y.stopPropagation();const S=y.dataTransfer.getData("text");try{const g=JSON.parse(S);if(!g||!Wv.includes(g.type))return;const f=await(t==null?void 0:t.editor.core.textureManager.loadTexture(g.item.code));r(f)}catch(g){console.error(g)}},h=y=>{y.preventDefault(),y.dataTransfer.dropEffect="copy"},v=()=>r(void 0),m=()=>o(!0);return z.jsxs("div",{className:qi.container,children:[z.jsx("canvas",{className:qi.canvas,ref:i,width:100,height:50,onDragOver:h,onDrop:d,onClick:m}),z.jsx(yp,{className:qi.delete,onClick:v}),z.jsx(ks,{style:{display:"none"},preview:{visible:a,src:s,onVisibleChange:y=>o(y)}})]})},Yv=n=>{const{value:t={},onChange:e}=n,[r,i]=c.useState(""),[a,o]=c.useState(!1);c.useEffect(()=>{i(JSON.stringify(t,void 0,2))},[t]);const s=()=>{o(!0)},l=()=>{e==null||e(JSON.parse(r)),o(!1)},u=()=>{o(!1)},d=h=>{i(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(vi,{onClick:s,children:"编辑"}),z.jsx(Er,{width:"80%",title:"Uniforms",open:a,onOk:l,onCancel:u,children:z.jsx(xi,{theme:"vs-dark",height:"70vh",language:"json",options:{tabSize:2},value:r,onChange:d})})]})},Kv=n=>{const{value:t="",onChange:e}=n,[r,i]=c.useState(""),[a,o]=c.useState(!1);c.useEffect(()=>{i(t)},[t]);const s=()=>{i(t),o(!0)},l=()=>{e==null||e(r),o(!1)},u=()=>{o(!1)},d=h=>{i(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(vi,{onClick:s,children:"编辑"}),z.jsx(Er,{width:"80%",title:"顶点着色器",open:a,onOk:l,onCancel:u,children:z.jsx(xi,{theme:"vs-dark",height:"70vh",value:r,onChange:d})})]})},qv=n=>{const{value:t="",onChange:e}=n,[r,i]=c.useState(""),[a,o]=c.useState(!1);c.useEffect(()=>{i(t)},[t]);const s=()=>{i(t),o(!0)},l=()=>{e==null||e(r),o(!1)},u=()=>{o(!1)},d=h=>{i(h??"")};return z.jsxs(z.Fragment,{children:[z.jsx(vi,{onClick:s,children:"编辑"}),z.jsx(Er,{width:"80%",title:"片元着色器",open:a,onOk:l,onCancel:u,children:z.jsx(xi,{theme:"vs-dark",height:"70vh",value:r,onChange:d})})]})},Zv=n=>{const{root:t}=n,[e,r]=c.useState(),i=Rf(t,r),a=c.useMemo(()=>(i==null?void 0:i.attribute.type)??"string",[i]),o=s=>i==null?void 0:i.setter(s);switch(a){case I.STRING:return z.jsx(kf,{attribute:i,value:e,onChange:o});case I.NUMBER:return z.jsx(qn,{attribute:i,value:e,onChange:o});case I.BOOLEAN:return z.jsx(_f,{attribute:i,value:e,onChange:o});case I.COLOR:return z.jsx(Tf,{attribute:i,value:e,onChange:o});case I.ENUM:return z.jsx($f,{attribute:i,value:e,onChange:o});case I.VECTOR2:return z.jsx(Df,{attribute:i,value:e,onChange:o});case I.VECTOR3:return z.jsx(Lf,{attribute:i,value:e,onChange:o});case I.SCRIPT:return z.jsx(Fv,{attribute:i,value:e,onChange:o});case I.TEXTURE:return z.jsx(Xv,{value:e,attribute:i,onChange:o});case I.UNIFORMS:return z.jsx(Yv,{value:e,onChange:o});case I.VERTEX_SHADER:return z.jsx(Kv,{value:e,onChange:o});case I.FRAGEMENT_SHADER:return z.jsx(qv,{value:e,onChange:o});default:return null}};class Qv{constructor(t){this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item-value",this.root=Xl(this.container),this.root.render(z.jsx(Yl,{children:z.jsx(Zv,{root:this})})),this.parent.body.appendChild(this.container)}hide(){var t;(t=this.destroy)==null||t.call(this),this.container.style.display="none"}show(t){var e;this.item=t,(e=this.update)==null||e.call(this,t),this.container.className="attribute-item-value",this.container.style.display="flex"}dispose(){var t;(t=this.destroy)==null||t.call(this),setTimeout(()=>this.root.unmount(),0),this.container.remove()}}class Jv{constructor(t){this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-item",this.label=new Kg(this),this.body=document.createElement("div"),this.body.className="attribute-item-value-container",this.container.appendChild(this.label.container),this.container.appendChild(this.body),this.components={}}get visible(){return this.container.style.display==="flex"}hide(){this.label.hide(),Object.values(this.components).forEach(t=>t.hide()),this.container.style.display="none"}show(t){const{attribute:e,visible:r}=t,{type:i}=e;this.label.show(t),Object.values(this.components).forEach(o=>o.hide());const a=this.getAttribute(i);a==null||a.show(t),this.container.style.display=r?"flex":"none"}dispose(){this.label.dispose(),Object.values(this.components).forEach(t=>t.dispose()),this.container.remove()}getAttribute(t){let e=this.components[t];if(!e)try{e=new Qv(this),this.components[t]=e}catch(r){console.error(r)}return e}}var el={};Object.defineProperty(el,"__esModule",{value:!0});function At(n){return typeof n=="function"?n():n}function Ei(n){return tl(n)||nl(n)||Or(n)}function tl(n){return n.hasOwnProperty("action")}function nl(n){return n.hasOwnProperty("href")}function ua(n){return n.hasOwnProperty("isDivider")}function Or(n){return n.hasOwnProperty("subMenu")}function e0(n){return n.hasOwnProperty("html")||n.hasOwnProperty("element")}function t0(n){return!Ei(n)&&!ua(n)&&!e0(n)}function Ai(n){return Ei(n)&&At(n.disabled)||Or(n)&&At(n.subMenu).length===0}function Ro(n,t){var e;n.addEventListener("mouseenter",function(r){e=setTimeout(function(){return t(r)},150)}),n.addEventListener("mouseleave",function(){return clearTimeout(e)})}function n0(n){var t=document.createElement("ul");return t.className="ctxmenu",t.append.apply(t,n.map(r0)),n.length||(t.style.display="none"),t.addEventListener("contextmenu",function(e){e.stopPropagation(),e.preventDefault()}),t.addEventListener("click",function(e){return void e.stopPropagation()}),t}function r0(n){var t=document.createElement("li");return i0([[ua,"divider",!1],[function(e){return e.icon},"icon",!0],[t0,"heading",!1],[Or,"submenu",!0],[Ai,"disabled",!1],[Ei,"interactive",!0]],n,t),ua(n)||[a0,o0,s0,l0,c0].forEach(function(e){return e.call(null,n,t)}),t}function i0(n,t,e){n.filter(function(r){var i=r[0];return i(t)}).every(function(r){r[0];var i=r[1],a=r[2];return!void e.classList.add(i)&&a})}function a0(n,t){var e,r=n.html,i=n.text,a=n.element,o=At(a);o?t.append(o):t.innerHTML=(e=At(r))!==null&&e!==void 0?e:"<span>".concat(At(i),"</span>")}function o0(n,t){var e=n.tooltip,r=n.style,i=n.attributes;t.title=At(e)||"",r&&t.setAttribute("style",At(r)),i&&Object.entries(At(i)).forEach(function(a){var o=a[0],s=a[1];t.setAttribute(o,s)})}function s0(n,t){var e=n.icon;e&&(t.innerHTML+='<img class="icon" src="'.concat(At(e),'" />'))}function l0(n,t){for(var e=0,r=Object.entries(At(n.events)||{});e<r.length;e++){var i=r[e],a=i[0],o=i[1],s=typeof o=="function"?{listener:o,options:{}}:o,l=s.listener,u=s.options;t.addEventListener(a,l,u)}Ai(n)||Or(n)||(tl(n)&&t.addEventListener("click",n.action),Ei(n)&&t.addEventListener("click",function(){return il.hide()}))}function c0(n,t){if(!(!nl(n)||Ai(n))){var e=n.href,r=n.download,i=n.target,a=document.createElement("a");a.innerHTML=t.innerHTML,a.href=At(e),r!==void 0&&(a.download=At(r)),i&&(a.target=At(i)),t.replaceChildren(a)}}var Yn="r",br="d";function u0(){Yn="r",br="d"}function d0(n,t){var e=rl(),r=window.visualViewport,i=r.width,a=r.height;Object.assign(n.style,{maxHeight:a/e.y+"px",maxWidth:i/e.x+"px"});var o=h0(n);o.width=Math.trunc(o.width)+1,o.height=Math.trunc(o.height)+1;var s={x:0,y:0};if(t instanceof Element){var l=Na(t),u=l.x,d=l.width,h=l.y;s={x:Yn==="r"?u+d:u-o.width,y:h},t.className.includes("submenu")&&(s.y+=br==="d"?4:-12);var v=Zi(o,s);s.x!==v.x&&(Yn=Yn==="r"?"l":"r",s.x=Yn==="r"?u+d:u-o.width),s.y!==v.y&&(br=br==="u"?"d":"u",s.y=v.y),s=Zi(o,s)}else{var m=document.body.style.transform!=="",y=m?document.body.getBoundingClientRect():{x:0,y:0};s=Zi(o,{x:(t.clientX-y.x)/e.x,y:(t.clientY-y.y)/e.y})}Object.assign(n.style,{left:s.x+"px",top:s.y+"px",width:o.width+"px",height:o.height+"px"})}function Zi(n,t){var e=window.visualViewport,r=e.width,i=e.height,a=document.body.style.transform!=="",o=a?document.body.getBoundingClientRect():{left:0,top:0},s=o.left,l=o.top,u=rl(),d=-s/u.x,h=-l/u.y,v=(r-s)/u.x,m=(i-l)/u.y;return{x:Yn==="r"?t.x+n.width>v?v-n.width:t.x:t.x<d?d:t.x,y:br==="d"?t.y+n.height>m?m-n.height:t.y:t.y<h?h:t.y+n.height>m?m-n.height:t.y}}function h0(n){var t=n.cloneNode(!0);t.style.visibility="hidden",document.body.appendChild(t);var e=Na(t);return document.body.removeChild(t),e}function Na(n){var t=n.offsetLeft,e=n.offsetTop,r=n.offsetHeight,i=n.offsetWidth;if(n.offsetParent instanceof HTMLElement){var a=Na(n.offsetParent);return{x:t+a.x,y:e+a.y,width:i,height:r}}return{x:t,y:e,width:i,height:r}}function rl(){var n=document.body,t=n.getBoundingClientRect();return{x:t.width/n.offsetWidth,y:t.height/n.offsetHeight}}var p0='html{min-height:100%}.ctxmenu{position:fixed;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana,sans-serif;box-sizing:border-box}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,.1)}.ctxmenu li.submenu::after{content:"";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border:solid #000;border-width:1px 1px 0 0;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}';/*! ctxMenu v2.0.2 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/var g0=function(){function n(){var t=this;this.cache={},this.preventCloseOnScroll=!1,window.addEventListener("click",function(){return void t.hide()}),window.addEventListener("resize",function(){return void t.hide()});var e=0;window.addEventListener("wheel",function(){clearTimeout(e),e=setTimeout(function(){if(t.preventCloseOnScroll){t.preventCloseOnScroll=!1;return}t.hide()})},{passive:!0}),window.addEventListener("keydown",function(r){r.key==="Escape"&&t.hide()}),n.addStylesToDom()}return n.getInstance=function(){n.instance||(n.instance=new n);var t=n.instance;return{attach:t.attach.bind(t),delete:t.delete.bind(t),hide:t.hide.bind(t),show:t.show.bind(t),update:t.update.bind(t)}},n.prototype.attach=function(t,e,r){var i=this;r===void 0&&(r={});var a=document.querySelector(t);if(this.cache[t]!==void 0){console.error("target element ".concat(t," already has a context menu assigned. Use ContextMenu.update() intstead."));return}if(!a){console.error("target element ".concat(t," not found"));return}var o=function(s){i.show(e,s,r)};this.cache[t]={ctxMenu:e,handler:o,config:r},a.addEventListener("contextmenu",o)},n.prototype.update=function(t,e,r){r===void 0&&(r={});var i=this.cache[t],a=Object.assign({},i==null?void 0:i.config,r),o=document.querySelector(t);i&&(o==null||o.removeEventListener("contextmenu",i.handler)),delete this.cache[t],this.attach(t,e||(i==null?void 0:i.ctxMenu)||[],a)},n.prototype.delete=function(t){var e=this.cache[t];if(!e)return console.error("no context menu for target element ".concat(t," found"));delete this.cache[t];var r=document.querySelector(t);if(!r)return console.error("target element ".concat(t," does not exist (anymore)"));r.removeEventListener("contextmenu",e.handler)},n.prototype.show=function(t,e,r){var i=this,a,o,s;r===void 0&&(r={}),e instanceof MouseEvent&&(e.stopImmediatePropagation(),e.preventDefault()),this.hide(),this.onHide=r.onHide,this.onBeforeHide=r.onBeforeHide;var l=(o=(a=r.onBeforeShow)===null||a===void 0?void 0:a.call(r,t.slice(),e instanceof MouseEvent?e:void 0))!==null&&o!==void 0?o:t;this.menu=this.generateDOM(l,e,r.attributes),document.body.appendChild(this.menu),(s=r.onShow)===null||s===void 0||s.call(r,this.menu),this.menu.addEventListener("wheel",function(){i.preventCloseOnScroll=!0},{passive:!0})},n.prototype.hide=function(){this._hide(this.menu)},n.prototype._hide=function(t){var e,r;(e=this.onBeforeHide)===null||e===void 0||e.call(this,t),u0(),t&&(t.remove(),(r=this.onHide)===null||r===void 0||r.call(this,t),t===this.menu&&(delete this.menu,this.onBeforeHide=void 0,this.onHide=void 0))},n.prototype.generateDOM=function(t,e,r){var i=this;r===void 0&&(r={});var a=n0(t);return d0(a,e),t.forEach(function(o,s){var l=a.children[s];Ro(l,function(){var u,d=(u=l.parentElement)===null||u===void 0?void 0:u.querySelector("ul");d&&d.parentElement!==l&&i._hide(d)}),!Ai(o)&&Or(o)&&Ro(l,function(){l.querySelector("ul")||l.appendChild(i.generateDOM(At(o.subMenu),l,At(o.subMenuAttributes)))})}),Object.entries(r).forEach(function(o){var s=o[0],l=o[1];return a.setAttribute(s,l)}),a},n.addStylesToDom=function(){if(document.readyState==="loading")return document.addEventListener("readystatechange",this.addStylesToDom,{once:!0});var t=document.createElement("style");t.innerHTML=p0,document.head.insertBefore(t,document.head.childNodes[0])},n}(),il=g0.getInstance(),al=el.ctxmenu=il;const ol=n=>{const{items:t,event:e}=n;al.show(t,e)},m0=()=>{al.hide()};class f0{constructor(t){this.onClick=()=>{this.body.style.display==="none"?this.open():this.close()},this.onContextMenu=r=>{var a;if(((a=this.group)==null?void 0:a.type)!==Kt.Component)return;r.preventDefault();const i=this.group.editor.contextMenuManager.getContextMenu(Si.ATTR_COMPONENT);i.length!==0&&(this.group.editor.contextMenuManager.meta={group:this.group},ol({event:r,items:i}))},this.parent=t,this.container=document.createElement("div"),this.container.className="attribute-group-container",this.head=document.createElement("div"),this.head.className="attribute-group",this.head.addEventListener("click",this.onClick),this.label=document.createElement("div"),this.label.className="attribute-group-name",this.label.addEventListener("contextmenu",this.onContextMenu),this.head.appendChild(this.label);const e=document.createElement("div");this.head.appendChild(e),this.suffix=document.createElement("div"),this.suffix.className="attribute-group-close",e.appendChild(this.suffix),this.body=document.createElement("div"),this.container.appendChild(this.head),this.container.appendChild(this.body),this.attributes=[]}hide(){this.attributes.forEach(t=>t.hide()),this.container.style.display="none"}show(t){const{group:e,groupName:r,attributes:i}=t,a=i.filter(o=>o.visible).length;this.group=t,this.label.textContent=r,this.container.style.display=a?"block":"none",this.parent.activeGroups.has(e)?this.open():this.close()}open(){if(this.body.style.display="block",this.suffix.className="attribute-group-close",!this.group)return;const{attributes:t}=this.group,e=t.length-this.attributes.length;for(let r=0;r<e;r++){const i=new Jv(this);this.body.appendChild(i.container),this.attributes.push(i)}this.attributes.forEach(r=>r.hide()),t.forEach((r,i)=>this.attributes[i].show(r)),this.parent.addActiveGroup(this.group.group)}close(){this.body.style.display="none",this.suffix.className="attribute-group-close attribute-group-rotate",this.group&&this.parent.removeActiveGroup(this.group.group)}dispose(){this.head.removeEventListener("click",this.onClick),this.label.removeEventListener("contextmenu",this.onContextMenu),this.attributes.forEach(t=>t.dispose()),this.container.remove(),this.attributes=[],delete this.group}}class ko{constructor(t,e){this.editor=t,this.groups=[],this.activeGroups=new Set(["base"]),this.container=e}update(t){const e=t.length-this.groups.length;for(let r=0;r<e;r++){const i=new f0(this);this.container.appendChild(i.container),this.groups.push(i)}this.groups.forEach(r=>r.hide()),t.forEach((r,i)=>this.groups[i].show(r))}setActiveGroups(t){t.forEach(e=>this.activeGroups.add(e))}addActiveGroup(t){this.activeGroups.add(t)}removeActiveGroup(t){this.activeGroups.delete(t)}dispose(){this.groups.forEach(t=>t.dispose()),this.groups=[]}}const v0=n=>{const{editor:t}=n,e=c.useRef(null),r=c.useRef(null),[i,a]=c.useState("base");return c.useEffect(()=>{const o=new ko(t,e.current),s=new ko(t,r.current),l=()=>{const d=t.attrManager.refresh(),h=t.materialManager.refresh();o.update(d),s.update(h),h.length===0&&a("base")},u=()=>{const d=t.materialManager.refresh();s.update(d)};return t.bus.on("NODE_SELECT",l),t.bus.on("DESERIALIZATED",l),t.bus.on("MATERIAL_CHANGE",u),()=>{t.bus.off("NODE_SELECT",l),t.bus.off("DESERIALIZATED",l),t.bus.off("MATERIAL_CHANGE",u),o.dispose(),s.dispose()}},[t]),z.jsxs("div",{className:Mn.container,children:[z.jsxs("div",{className:Mn.title,children:[z.jsx("div",{className:`iconfont icon-inspector ${Mn.icon} ${i==="base"?Mn.active:""}`,onClick:()=>a("base")}),z.jsx("div",{className:`iconfont icon-material ${Mn.icon} ${i==="material"?Mn.active:""}`,onClick:()=>a("material")})]}),z.jsxs("div",{className:Mn.body,children:[z.jsx("div",{ref:e,style:{display:i==="base"?"block":"none"}}),z.jsx("div",{ref:r,style:{display:i==="material"?"block":"none"}})]})]})},y0="_container_t8w3l_1",b0="_left_t8w3l_16",S0="_right_t8w3l_20",C0="_tool_t8w3l_24",x0="_active_t8w3l_37",Nn={container:y0,left:b0,right:S0,tool:C0,active:x0},E0=n=>{const{editor:t}=n,[e,r]=c.useState([]),[i,a]=c.useState([]);c.useEffect(()=>{const s=()=>{const{left:l,right:u}=t.toolManager.tools;r([...l]),a([...u])};return t.bus.on("TOOL_UPDATE",s),s(),()=>{t.bus.off("TOOL_UPDATE",s)}},[t]);const o=s=>{t.toolManager.select(s)};return z.jsxs("div",{className:Nn.container,children:[z.jsx("div",{className:Nn.left,children:e.map(s=>z.jsx("span",{className:`iconfont icon-${s.icon} ${Nn.tool} ${s.actived?Nn.active:""}`,title:s.title,onClick:()=>o(s)},s.key))}),z.jsx("div",{className:Nn.right,children:i.map(s=>z.jsx("span",{className:`iconfont icon-${s.icon} ${Nn.tool} ${s.actived?Nn.active:""}`,title:s.title,onClick:()=>o(s)},s.key))})]})},A0="_container_1xb2c_1",w0="_title_1xb2c_12",M0="_body_1xb2c_18",Qi={container:A0,title:w0,body:M0},N0="_container_pj1iu_1",O0="_selected_pj1iu_13",I0="_icon_pj1iu_17",P0="_name_pj1iu_22",Jr={container:N0,selected:O0,icon:I0,name:P0},R0={AmbientLight:"ambient-light",DirectionalLight:"directional-light",PerspectiveCamera:"perspective-camera",OrthographicCamera:"orthographic-camera",Plane:"plane",Box:"box",Sphere:"sphere",Cone:"cone",Cylinder:"cylinder",Pipe:"pipe",HemisphereLight:"hemisphere-light",SpotLight:"spot-light",PointLight:"point-light",Model:"model",Text:"text"},sl=n=>{const{node:t,editor:e,level:r=0}=n,[i,a]=c.useState(!1),[o,s]=c.useState(!0);c.useEffect(()=>{const u=()=>{a(e.core.selections.some(d=>d.id===t.id))};return e.bus.on("NODE_SELECT",u),()=>{e.bus.off("NODE_SELECT",u)}},[e]);const l=u=>{u.stopPropagation(),e.selectionManager.setSelections([t.id])};return z.jsxs(z.Fragment,{children:[z.jsxs("div",{className:`${Jr.container} ${i?Jr.selected:""}`,style:{paddingLeft:`${r*10+10}px`},onClick:l,children:[o&&t.children.length>0&&z.jsx(su,{onClick:()=>s(!1)}),!o&&t.children.length>0&&z.jsx(Cp,{onClick:()=>s(!0)}),z.jsx("span",{className:`iconfont icon-${R0[t.type]} ${Jr.icon}`}),z.jsx("span",{className:Jr.name,children:t.name})]}),!o&&t.children.map(u=>z.jsx(sl,{node:u,editor:e,level:r+1},u.id))]})},k0=n=>{const{editor:t}=n,[e,r]=c.useState([]);c.useEffect(()=>{const a=()=>r(t.nodeManager.refresh());return t.bus.on("DESERIALIZATED",a),t.bus.on("NODE_ADD",a),t.bus.on("NODE_REMOVE",a),t.bus.on("NODE_MOVE",a),t.bus.on("GRAPH_CHANGE",a),a(),()=>{t.bus.off("DESERIALIZATED",a),t.bus.off("NODE_ADD",a),t.bus.off("NODE_REMOVE",a),t.bus.off("NODE_MOVE",a),t.bus.off("GRAPH_CHANGE",a)}},[t]);const i=()=>{t.core.select([])};return z.jsxs("div",{className:Qi.container,children:[z.jsxs("div",{className:Qi.title,children:[z.jsx("span",{className:"iconfont icon-hierarchy"}),z.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Hierarchy"})]}),z.jsx("div",{className:Qi.body,onClick:i,children:e.map(a=>z.jsx(sl,{node:a,editor:t},a.id))})]})},_0=()=>{const n=navigator.userAgent.toLowerCase(),t=/macintosh|mac os x/i.test(navigator.userAgent);if(n.indexOf("win32")>=0||n.indexOf("wow32")>=0)return"win32";if(n.indexOf("win64")>=0||n.indexOf("wow64")>=0)return"win64";if(t)return"mac"},_o=()=>_0()==="mac",V0=()=>{const[n]=Kl(),t=c.useRef(null),e=Yc(t),[r,i]=c.useState(),[a,o]=c.useState(),s=c.useRef({x:0,y:0}),[l,u]=Cr.useMessage();c.useEffect(()=>{const g=n.get("id");g&&o(g)},[n]),c.useEffect(()=>{const g=new Pf;return g.mount(t.current),g.active(),i(g),()=>{g.deactive(),g.unmount(),i(void 0)}},[]),c.useEffect(()=>{r==null||r.resize()},[r,e]),c.useEffect(()=>{if(!r)return;const g=f=>{l.success(f.message)};return r.bus.on("MESSAGE",g),()=>{r.bus.off("MESSAGE",g)}},[r]),c.useEffect(()=>{a&&(r==null||r.open(a))},[a,r]);const d=g=>{const{clientX:f,clientY:b}=g;if((f-s.current.x)**2+(b-s.current.y)**2>2||!r)return;const x=r.contextMenuManager.getContextMenu(Si.GRAPH);x.length!==0&&ol({event:g,items:x})},h=g=>{m0();const{clientX:f,clientY:b}=g;s.current.x=f,s.current.y=b},v=g=>{_o()&&d(g)},m=g=>{g.preventDefault(),!_o()&&d(g)},y=g=>{g.preventDefault()},S=g=>{r==null||r.dropManager.onDrop(g)};return z.jsxs("div",{className:oo.container,children:[u,z.jsxs(wn,{separator:!0,children:[z.jsx(wn.Pane,{preferredSize:"15%",maxSize:500,minSize:0,children:r&&z.jsx(k0,{editor:r})}),z.jsx(wn.Pane,{preferredSize:"68%",minSize:250,children:z.jsxs(wn,{vertical:!0,separator:!0,children:[z.jsx(wn.Pane,{preferredSize:"75%",minSize:500,children:z.jsx("div",{className:oo.view,ref:t,onDragOver:y,onDrop:S,onPointerDown:h,onPointerUp:v,onContextMenu:m,children:r&&z.jsx(E0,{editor:r})})}),z.jsx(wn.Pane,{preferredSize:"25%",minSize:0,children:z.jsx(Fg,{})})]})}),z.jsx(wn.Pane,{preferredSize:"17%",minSize:0,children:r&&z.jsx(v0,{editor:r})})]})]})};export{V0 as default};
