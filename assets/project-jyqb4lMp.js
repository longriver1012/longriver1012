import{bG as c,bK as i,bJ as d}from"./index-B5G4TnQQ.js";const l="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let u=(e=21)=>{let o="",t=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)o+=l[t[e]&63];return o};const m={document:{ver:"1.0.0",name:"新建场景",code:"code",author:"",company:"",desc:"desc",date:"",scene:{id:0,name:"新建场景",type:"Scene",visible:!0,selectable:!0,transformable:!0,position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],children:[],components:[],index:4,code:"",desc:"",ver:"1.0.0",company:"",author:"",date:"",refreshCycle:1e3,debug:!1,backgroundColor:"rgb(53, 53, 53)",backgroundTexture:"",backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:0,environmentTexture:"",environmentIntensity:1,environmentRotation:0,fogEnable:!1,fogColor:"#000000",fogNear:10,fogFar:100,gridEnable:!0,gridSize:50,gridColor1:"#444444",gridColor2:"#888888"},elements:[{parent:0,id:1,name:"环境光-1",type:"AmbientLight",visible:!0,selectable:!0,transformable:!0,position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],children:[],components:[],color:"#ffffff",intensity:1},{parent:0,id:2,name:"平行光-2",type:"DirectionalLight",visible:!0,selectable:!0,transformable:!0,position:[4,6,3],rotation:[0,0,0],scale:[1,1,1],children:[],components:[],color:"#ffffff",intensity:3},{parent:0,id:3,name:"透视相机-3",type:"PerspectiveCamera",visible:!0,selectable:!0,transformable:!0,position:[0,15,30],rotation:[-26.6,0,0],scale:[1,1,1],children:[],components:[{id:1,type:"OrbitControls",name:"轨道控制"}],fov:45,near:.01,far:1e3}]}},p=async()=>(await c).getAll("scenes"),f=async e=>await(await c).get("scenes",e),g=async(e,o)=>{const t=d(m),r=u(),n=i();t.document.code=r,t.document.name=e,t.document.desc=o,t.document.date=n.format("YYYY-MM-DD");const a={code:r,name:e,cover:"",content:JSON.stringify(t),createTime:n.valueOf(),updateTime:n.valueOf()};return await(await c).put("scenes",a,r),r},y=async(e,o,t)=>{const r=await c,n=await r.get("scenes",e);if(!n)return;const a=i(),s=JSON.parse(t);return s.document.date=a.format("YYYY-MM-DD"),s.document.scene.date=a.format("YYYY-MM-DD"),n.cover=o,n.content=JSON.stringify(s),n.updateTime=a.valueOf(),await r.put("scenes",n,e),s};export{g as a,p as b,f as g,u as n,y as u};
