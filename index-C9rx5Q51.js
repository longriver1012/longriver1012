import{ah as e,aA as I,aB as Y,aC as H,aD as b,d,aE as E,aj as F,aF as A,an as N,aw as y,aG as R,aH as B,aI as T,aJ as z,aK as G}from"./index-BcOHRoHf.js";import{F as v,M as L,I as f,v as w,S as O}from"./FileSaver.min-D3wL3msd.js";const V="_container_n78rt_1",q="_right_n78rt_8",k={container:V,right:q},J="_container_1ag6p_1",K="_logo_1ag6p_5",Q="_item_1ag6p_9",U="_label_1ag6p_22",c={container:J,logo:K,item:Q,label:U},W=o=>{const{onClick:t}=o;return e.jsxs("div",{className:c.container,children:[e.jsx("div",{className:c.logo,children:e.jsx("img",{src:I,style:{width:"70%",marginTop:"-5px"}})}),e.jsxs("div",{className:c.item,onClick:()=>t("projects"),children:[e.jsx("span",{className:"iconfont icon-project"}),e.jsx("span",{className:c.label,children:"项目"})]}),e.jsxs("div",{className:c.item,onClick:()=>t("templates"),children:[e.jsx("span",{className:"iconfont icon-template"}),e.jsx("span",{className:c.label,children:"示例"})]}),e.jsxs("div",{className:c.item,onClick:()=>t("documents"),children:[e.jsx("span",{className:"iconfont icon-doc"}),e.jsx("span",{className:c.label,children:"文档"})]})]})},X="_title-container_121nn_1",Z="_title_121nn_1",ee="_container_121nn_12",se="_body_121nn_18",te="_projects_121nn_38",_={titleContainer:X,title:Z,container:ee,body:se,projects:te},oe=Y()(H(o=>({setService:t=>{b.set("service",t),o({service:t})},service:b.get("service")||"local"}))),ne={labelCol:{xs:{span:8},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:20}}},ce=o=>{const{visible:t,setVisible:i,onConfirm:a}=o,[l]=v.useForm(),[m,r]=d.useState(!1),j=()=>{l.submit()},n=()=>{i(!1)},p=async x=>{r(!0);const{name:u,desc:C}=x,g=await E(u,C);r(!1),i(!1),a(g)};return e.jsx(L,{title:"创建3D项目",open:t,loading:m,onOk:j,onCancel:n,children:e.jsxs(v,{form:l,...ne,onFinish:p,children:[e.jsx(v.Item,{label:"项目名称",name:"name",rules:[{required:!0,message:"请输入项目名称"}],children:e.jsx(f,{})}),e.jsx(v.Item,{label:"项目描述",name:"desc",children:e.jsx(f.TextArea,{})})]})})},ae="_project_16x4a_1",ie="_cover_16x4a_18",le="_actived_16x4a_28",re="_name_16x4a_32",h={project:ae,cover:ie,actived:le,name:re},de=[{label:"复制",key:"copy"},{label:"导出",key:"export"},{label:"删除",key:"delete"}],me=o=>{const{item:t,actived:i,onClick:a,onDoubleClick:l,onDelete:m,onCopy:r}=o,j=async({key:n})=>{if(n==="delete")m();else if(n==="export"){const p=await A(t.code),x=N().format("YYYY-MM-DD HH-mm-ss");w(p,`projects-${x}.zip`)}else n==="copy"&&r(t.code)};return e.jsx(F,{menu:{items:de,onClick:j},trigger:["contextMenu"],children:e.jsxs("div",{className:h.project,onClick:a,onContextMenu:a,onDoubleClick:l,children:[e.jsx("div",{className:`${h.cover} ${i===t.code?h.actived:""}`,style:{backgroundImage:`url(${t.cover})`}}),e.jsx("div",{className:h.name,children:t.name})]})})},je=[{label:"本地服务",value:"local"},{label:"远端服务",value:"remote"}],pe=()=>{const[o,t]=d.useState([]),[i,a]=d.useState(!1),[l,m]=d.useState(""),{service:r,setService:j}=oe(),n=async()=>{const s=await R();t(s)};d.useEffect(()=>{n()},[]);const p=s=>{window.open(`#/editor?id=${s.code}`,`#/editor?id=${s.code}`)},x=async s=>{await G(s.code),await n()},u=()=>{a(!0)},C=s=>{n(),window.open(`#/editor?id=${s}`,`#/editor?id=${s}`)},g=s=>{j(s),n()},P=async()=>{await B(),await n()},$=async()=>{const s=await T(o.map(M=>M.code)),S=N().format("YYYY-MM-DD HH-mm-ss");w(s,`projects-${S}.zip`)},D=async s=>{await z(s),await n()};return e.jsxs("div",{className:_.container,children:[e.jsxs("div",{className:_.titleContainer,children:[e.jsx("div",{className:_.title,children:"项目"}),e.jsxs("div",{children:[e.jsx(O,{options:je,style:{width:"100px",marginRight:8},value:r,onChange:g}),e.jsx(y,{style:{marginRight:8},onClick:P,children:"导入项目"}),e.jsx(y,{style:{marginRight:8},onClick:$,children:"导出项目"}),e.jsx(y,{type:"primary",onClick:u,children:"新建项目"})]})]}),e.jsx("div",{className:_.body,children:e.jsx("div",{className:_.projects,children:o.map(s=>e.jsx(me,{item:s,actived:l,onClick:()=>m(s.code),onDoubleClick:()=>p(s),onDelete:()=>x(s),onCopy:D},s.code))})}),e.jsx(ce,{visible:i,setVisible:a,onConfirm:C})]})},ve=()=>{const[o,t]=d.useState("projects");return e.jsxs("div",{className:k.container,children:[e.jsx(W,{onClick:t}),e.jsx("div",{className:k.right,children:o==="projects"&&e.jsx(pe,{})})]})};export{ve as default};
