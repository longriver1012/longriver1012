import{d as i,I as D,n as R,al as e,aE as Y,aF as E,aG as H,aH as y,aI as O,am as A,an as F,aJ as G,ar as w,aA as u,aK as z,aL as B,aM as L,aN as T,aO as V}from"./index-DrcdmFms.js";import{F as _,M as q,I as f,s as N,S as J}from"./FileSaver.min-r9kRxgah.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"}}]},name:"github",theme:"outlined"},Q=function(t,a){return i.createElement(D,R({},t,{ref:a,icon:K}))},U=i.forwardRef(Q);const W="_container_n78rt_1",X="_right_n78rt_8",k={container:W,right:X},Z="_container_1ag6p_1",ee="_logo_1ag6p_5",se="_item_1ag6p_9",te="_label_1ag6p_22",c={container:Z,logo:ee,item:se,label:te},ne=n=>{const{onClick:t}=n;return e.jsxs("div",{className:c.container,children:[e.jsx("div",{className:c.logo,children:e.jsx("img",{src:Y,style:{width:"70%",marginTop:"-5px"}})}),e.jsxs("div",{className:c.item,onClick:()=>t("projects"),children:[e.jsx("span",{className:"iconfont icon-project"}),e.jsx("span",{className:c.label,children:"项目"})]}),e.jsxs("div",{className:c.item,onClick:()=>t("templates"),children:[e.jsx("span",{className:"iconfont icon-template"}),e.jsx("span",{className:c.label,children:"示例"})]}),e.jsxs("div",{className:c.item,onClick:()=>t("documents"),children:[e.jsx("span",{className:"iconfont icon-doc"}),e.jsx("span",{className:c.label,children:"文档"})]})]})},oe="_title-container_121nn_1",ae="_title_121nn_1",ce="_container_121nn_12",ie="_body_121nn_18",le="_projects_121nn_38",v={titleContainer:oe,title:ae,container:ce,body:ie,projects:le},re=E()(H(n=>({setService:t=>{y.set("service",t),n({service:t})},service:y.get("service")||"local"}))),de={labelCol:{xs:{span:8},sm:{span:4}},wrapperCol:{xs:{span:16},sm:{span:20}}},me=n=>{const{visible:t,setVisible:a,onConfirm:l}=n,[r]=_.useForm(),[m,d]=i.useState(!1),p=()=>{r.submit()},o=()=>{a(!1)},j=async x=>{d(!0);const{name:b,desc:C}=x,h=await O(b,C);h===-1?A.error("项目名称已存在，请更换名称"):(a(!1),l(h)),d(!1)};return e.jsx(q,{title:"创建3D项目",open:t,loading:m,onOk:p,onCancel:o,children:e.jsxs(_,{form:r,...de,onFinish:j,children:[e.jsx(_.Item,{label:"项目名称",name:"name",rules:[{required:!0,message:"请输入项目名称"}],children:e.jsx(f,{})}),e.jsx(_.Item,{label:"项目描述",name:"desc",children:e.jsx(f.TextArea,{})})]})})},pe="_project_16x4a_1",je="_cover_16x4a_18",xe="_actived_16x4a_28",ve="_name_16x4a_32",g={project:pe,cover:je,actived:xe,name:ve},he=[{label:"复制",key:"copy"},{label:"导出",key:"export"},{label:"删除",key:"delete"}],ue=n=>{const{item:t,actived:a,onClick:l,onDoubleClick:r,onDelete:m,onCopy:d}=n,p=async({key:o})=>{if(o==="delete")m();else if(o==="export"){const j=await G(t.code),x=w().format("YYYY-MM-DD HH-mm-ss");N(j,`projects-${x}.zip`)}else o==="copy"&&d(t.code)};return e.jsx(F,{menu:{items:he,onClick:p},trigger:["contextMenu"],children:e.jsxs("div",{className:g.project,onClick:l,onContextMenu:l,onDoubleClick:r,children:[e.jsx("div",{className:`${g.cover} ${a===t.code?g.actived:""}`,style:{backgroundImage:`url(${t.cover})`}}),e.jsx("div",{className:g.name,children:t.name})]})})},_e=[{label:"本地服务",value:"local"},{label:"远端服务",value:"remote"}],ge=()=>{const[n,t]=i.useState([]),[a,l]=i.useState(!1),[r,m]=i.useState(""),{service:d,setService:p}=re(),o=async()=>{const s=await z();t(s)};i.useEffect(()=>{o()},[]);const j=s=>{window.open(`#/editor?id=${s.code}`,`#/editor?id=${s.code}`)},x=async s=>{await V(s.code),await o()},b=()=>{l(!0)},C=s=>{o(),window.open(`#/editor?id=${s}`,`#/editor?id=${s}`)},h=s=>{p(s),o()},P=async()=>{await B(),await o()},$=async()=>{const s=await L(n.map(I=>I.code)),S=w().format("YYYY-MM-DD HH-mm-ss");N(s,`projects-${S}.zip`)},M=async s=>{await T(s),await o()};return e.jsxs("div",{className:v.container,children:[e.jsxs("div",{className:v.titleContainer,children:[e.jsx("div",{className:v.title,children:"项目"}),e.jsxs("div",{children:[e.jsx(u,{type:"link",icon:e.jsx(U,{style:{fontSize:20,marginRight:8,color:"#fff",verticalAlign:"-0.25rem"}}),onClick:()=>window.open("https://github.com/longriver1012/visual-engine","_blank")}),e.jsx(J,{options:_e,style:{width:"100px",marginRight:8},value:d,onChange:h}),e.jsx(u,{style:{marginRight:8},onClick:P,children:"导入项目"}),e.jsx(u,{style:{marginRight:8},onClick:$,children:"导出项目"}),e.jsx(u,{type:"primary",style:{marginRight:8},onClick:b,children:"新建项目"})]})]}),e.jsx("div",{className:v.body,children:e.jsx("div",{className:v.projects,children:n.map(s=>e.jsx(ue,{item:s,actived:r,onClick:()=>m(s.code),onDoubleClick:()=>j(s),onDelete:()=>x(s),onCopy:M},s.code))})}),e.jsx(me,{visible:a,setVisible:l,onConfirm:C})]})},ye=()=>{const[n,t]=i.useState("projects");return e.jsxs("div",{className:k.container,children:[e.jsx(ne,{onClick:t}),e.jsx("div",{className:k.right,children:n==="projects"&&e.jsx(ge,{})})]})};export{ye as default};
