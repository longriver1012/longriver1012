var Yl=Object.defineProperty;var ql=(n,r,e)=>r in n?Yl(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var x=(n,r,e)=>ql(n,typeof r!="symbol"?r+"":r,e);import{g as br,m as ur,i as Xl,a as Zl,r as nr,P as Ql,b as Jl,c as ec,d,C as ar,e as oe,f as tc,u as Wt,T as hs,h as fi,j as Fn,K as qe,_ as $t,k as be,l as B,n as Fe,o as de,I as zr,p as Sr,w as _t,q as Mn,s as Xe,t as Oa,v as te,x as gs,W as z,F as Ia,D as Yn,y as An,z as rc,A as nc,B as Pi,E as Ta,G as ms,H as fs,J as qn,R as ac,L as ic,M as Oi,N as Ii,O as kn,Q as Pn,S as vs,U as mr,V as Lr,X as _a,Y as oc,Z as sc,$ as wr,a0 as Wa,a1 as vi,a2 as ys,a3 as Ti,a4 as yi,a5 as lc,a6 as cc,a7 as uc,a8 as dc,a9 as _i,aa as pc,ab as bs,ac as ee,ad as hc,ae as gc,af as mc,ag as fc,ah as D,ai as Ss,aj as Cs,ak as Es,al as vc,am as no,an as ao,ao as yc,ap as bc,aq as Sc,ar as Cc,as as Ec,at as Mc,au as Ac,av as xc,aw as Un,ax as Nc,ay as wc,az as kc}from"./index-BcOHRoHf.js";import{B as Pc,t as Oc,i as Ic,a as Tc,g as Ms,b as _c,c as Rc,d as $c,e as Dc,f as Lc,h as Bc,j as jc,u as As,k as Aa,l as xs,I as Ra,S as Ri,L as zc,m as Hc,n as Vc,o as Kc,p as Fc,q as Uc,r as Gc,D as Wc,s as Yc,R as Xn,C as Vt,v as io,M as $a,F as Gr}from"./FileSaver.min-D3wL3msd.js";import{O as oo,V as jt,C as pa,R as qc,a as Ns,b as Xc,c as Zc,M as Ya,S as pn,d as Qc,Q as qa,E as hn,e as ws,f as Jc,g as eu,h as tu,i as Oe,j as It,k as Dn,l as ru,P as On,m as Ke,n as nu,o as so,p as au,T as ut,q as lo,r as xa,s as iu,t as nn,u as xn,B as ks,v as ou,w as su,D as In,x as Re,y as vr,z as K,A as Kt,F as ft,G as je,H as ze,I as He,J as Ve,K as yr,L as st,N as Ft,U as lu,W as yt,X as bt,Y as St,Z as Ct,_ as Br,$ as cu,a0 as Nn,a1 as uu,a2 as du,a3 as pu,a4 as hu,a5 as Ps,a6 as Tn,a7 as Os,a8 as gu,a9 as mu,aa as Xa,ab as fu,ac as vu,ad as ha,ae as yu,af as bu,ag as Su,ah as Cu,ai as Eu,aj as Mu,ak as Au,al as xu,am as Nu,an as $i,ao as wn,ap as wu,aq as Sa,ar as ku,as as Pu,at as jr,au as Ou,av as Iu,aw as Tu,ax as _u,ay as Ru}from"./useSize-itydIo4R.js";const Na=n=>n?typeof n=="function"?n():n:null,$u=n=>{const{componentCls:r,popoverColor:e,titleMinWidth:t,fontWeightStrong:a,innerPadding:i,boxShadowSecondary:l,colorTextHeading:o,borderRadiusLG:s,zIndexPopup:c,titleMarginBottom:u,colorBgElevated:h,popoverBg:m,titleBorderBottom:g,innerContentPadding:b,titlePadding:y}=n;return[{[r]:Object.assign(Object.assign({},nr(n)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:c,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"--antd-arrow-background-color":h,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${r}-content`]:{position:"relative"},[`${r}-inner`]:{backgroundColor:m,backgroundClip:"padding-box",borderRadius:s,boxShadow:l,padding:i},[`${r}-title`]:{minWidth:t,marginBottom:u,color:o,fontWeight:a,borderBottom:g,padding:y},[`${r}-inner-content`]:{color:e,padding:b}})},Zl(n,"var(--antd-arrow-background-color)"),{[`${r}-pure`]:{position:"relative",maxWidth:"none",margin:n.sizePopupArrow,display:"inline-block",[`${r}-content`]:{display:"inline-block"}}}]},Du=n=>{const{componentCls:r}=n;return{[r]:Ql.map(e=>{const t=n[`${e}6`];return{[`&${r}-${e}`]:{"--antd-arrow-background-color":t,[`${r}-inner`]:{backgroundColor:t},[`${r}-arrow`]:{background:"transparent"}}}})}},Lu=n=>{const{lineWidth:r,controlHeight:e,fontHeight:t,padding:a,wireframe:i,zIndexPopupBase:l,borderRadiusLG:o,marginXS:s,lineType:c,colorSplit:u,paddingSM:h}=n,m=e-t,g=m/2,b=m/2-r,y=a;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:l+30},Jl(n)),ec({contentRadius:o,limitVerticalRadius:!0})),{innerPadding:i?0:12,titleMarginBottom:i?0:s,titlePadding:i?`${g}px ${y}px ${b}px`:0,titleBorderBottom:i?`${r}px ${c} ${u}`:"none",innerContentPadding:i?`${h}px ${y}px`:0})},Is=br("Popover",n=>{const{colorBgElevated:r,colorText:e}=n,t=ur(n,{popoverBg:r,popoverColor:e});return[$u(t),Du(t),Xl(t,"zoom-big")]},Lu,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var Bu=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const Ts=n=>{let{title:r,content:e,prefixCls:t}=n;return!r&&!e?null:d.createElement(d.Fragment,null,r&&d.createElement("div",{className:`${t}-title`},r),e&&d.createElement("div",{className:`${t}-inner-content`},e))},ju=n=>{const{hashId:r,prefixCls:e,className:t,style:a,placement:i="top",title:l,content:o,children:s}=n,c=Na(l),u=Na(o),h=oe(r,e,`${e}-pure`,`${e}-placement-${i}`,t);return d.createElement("div",{className:h,style:a},d.createElement("div",{className:`${e}-arrow`}),d.createElement(tc,Object.assign({},n,{className:r,prefixCls:e}),s||d.createElement(Ts,{prefixCls:e,title:c,content:u})))},zu=n=>{const{prefixCls:r,className:e}=n,t=Bu(n,["prefixCls","className"]),{getPrefixCls:a}=d.useContext(ar),i=a("popover",r),[l,o,s]=Is(i);return l(d.createElement(ju,Object.assign({},t,{prefixCls:i,hashId:o,className:oe(e,s)})))};var Hu=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const Vu=d.forwardRef((n,r)=>{var e,t;const{prefixCls:a,title:i,content:l,overlayClassName:o,placement:s="top",trigger:c="hover",children:u,mouseEnterDelay:h=.1,mouseLeaveDelay:m=.1,onOpenChange:g,overlayStyle:b={}}=n,y=Hu(n,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:f}=d.useContext(ar),v=f("popover",a),[S,C,M]=Is(v),E=f(),w=oe(o,C,M),[k,P]=Wt(!1,{value:(e=n.open)!==null&&e!==void 0?e:n.visible,defaultValue:(t=n.defaultOpen)!==null&&t!==void 0?t:n.defaultVisible}),_=($,O)=>{P($,!0),g==null||g($,O)},I=$=>{$.keyCode===qe.ESC&&_(!1,$)},L=$=>{_($)},T=Na(i),j=Na(l);return S(d.createElement(hs,Object.assign({placement:s,trigger:c,mouseEnterDelay:h,mouseLeaveDelay:m,overlayStyle:b},y,{prefixCls:v,overlayClassName:w,ref:r,open:k,onOpenChange:L,overlay:T||j?d.createElement(Ts,{prefixCls:v,title:T,content:j}):null,transitionName:fi(E,"zoom-big",y.transitionName),"data-popover-inject":!0}),Fn(u,{onKeyDown:$=>{var O,H;d.isValidElement(u)&&((H=u==null?void 0:(O=u.props).onKeyDown)===null||H===void 0||H.call(O,$)),I($)}})))}),_s=Vu;_s._InternalPanelDoNotUseOrYouWillBeFired=zu;var Ku=["prefixCls","className","style","checked","disabled","defaultChecked","type","title","onChange"],Fu=d.forwardRef(function(n,r){var e=n.prefixCls,t=e===void 0?"rc-checkbox":e,a=n.className,i=n.style,l=n.checked,o=n.disabled,s=n.defaultChecked,c=s===void 0?!1:s,u=n.type,h=u===void 0?"checkbox":u,m=n.title,g=n.onChange,b=$t(n,Ku),y=d.useRef(null),f=d.useRef(null),v=Wt(c,{value:l}),S=be(v,2),C=S[0],M=S[1];d.useImperativeHandle(r,function(){return{focus:function(P){var _;(_=y.current)===null||_===void 0||_.focus(P)},blur:function(){var P;(P=y.current)===null||P===void 0||P.blur()},input:y.current,nativeElement:f.current}});var E=oe(t,a,B(B({},"".concat(t,"-checked"),C),"".concat(t,"-disabled"),o)),w=function(P){o||("checked"in n||M(P.target.checked),g==null||g({target:de(de({},n),{},{type:h,checked:P.target.checked}),stopPropagation:function(){P.stopPropagation()},preventDefault:function(){P.preventDefault()},nativeEvent:P.nativeEvent}))};return d.createElement("span",{className:E,title:m,style:i,ref:f},d.createElement("input",Fe({},b,{className:"".concat(t,"-input"),ref:y,onChange:w,disabled:o,checked:!!C,type:h})),d.createElement("span",{className:"".concat(t,"-inner")}))}),Uu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Gu=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:Uu}))},Rs=d.forwardRef(Gu);function Ht(n,r){return n[r]}var Wu=["children"];function $s(n,r){return"".concat(n,"-").concat(r)}function Yu(n){return n&&n.type&&n.type.isTreeNode}function Zn(n,r){return n??r}function wa(n){var r=n||{},e=r.title,t=r._title,a=r.key,i=r.children,l=e||"title";return{title:l,_title:t||[l],key:a||"key",children:i||"children"}}function qu(n){function r(e){var t=Oa(e);return t.map(function(a){if(!Yu(a))return _t(!a,"Tree/TreeNode can only accept TreeNode as children."),null;var i=a.key,l=a.props,o=l.children,s=$t(l,Wu),c=de({key:i},s),u=r(o);return u.length&&(c.children=u),c}).filter(function(a){return a})}return r(n)}function Za(n,r,e){var t=wa(e),a=t._title,i=t.key,l=t.children,o=new Set(r===!0?[]:r),s=[];function c(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return u.map(function(m,g){for(var b=$s(h?h.pos:"0",g),y=Zn(m[i],b),f,v=0;v<a.length;v+=1){var S=a[v];if(m[S]!==void 0){f=m[S];break}}var C=Object.assign(Mn(m,[].concat(Xe(a),[i,l])),{title:f,key:y,parent:h,pos:b,children:null,data:m,isStart:[].concat(Xe(h?h.isStart:[]),[g===0]),isEnd:[].concat(Xe(h?h.isEnd:[]),[g===u.length-1])});return s.push(C),r===!0||o.has(y)?C.children=c(m[l]||[],C):C.children=[],C})}return c(n),s}function Xu(n,r,e){var t={};Sr(e)==="object"?t=e:t={externalGetKey:e},t=t||{};var a=t,i=a.childrenPropName,l=a.externalGetKey,o=a.fieldNames,s=wa(o),c=s.key,u=s.children,h=i||u,m;l?typeof l=="string"?m=function(y){return y[l]}:typeof l=="function"&&(m=function(y){return l(y)}):m=function(y,f){return Zn(y[c],f)};function g(b,y,f,v){var S=b?b[h]:n,C=b?$s(f.pos,y):"0",M=b?[].concat(Xe(v),[b]):[];if(b){var E=m(b,C),w={node:b,index:y,pos:C,key:E,parentPos:f.node?f.pos:null,level:f.level+1,nodes:M};r(w)}S&&S.forEach(function(k,P){g(k,P,{node:b,pos:C,level:f?f.level+1:-1},M)})}g(null)}function Ds(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=r.initWrapper,t=r.processEntity,a=r.onProcessFinished,i=r.externalGetKey,l=r.childrenPropName,o=r.fieldNames,s=arguments.length>2?arguments[2]:void 0,c=i||s,u={},h={},m={posEntities:u,keyEntities:h};return e&&(m=e(m)||m),Xu(n,function(g){var b=g.node,y=g.index,f=g.pos,v=g.key,S=g.parentPos,C=g.level,M=g.nodes,E={node:b,nodes:M,index:y,key:v,pos:f,level:C},w=Zn(v,f);u[f]=E,h[w]=E,E.parent=u[S],E.parent&&(E.parent.children=E.parent.children||[],E.parent.children.push(E)),t&&t(E,m)},{externalGetKey:c,childrenPropName:l,fieldNames:o}),a&&a(m),m}function jn(n,r){var e=r.expandedKeys,t=r.selectedKeys,a=r.loadedKeys,i=r.loadingKeys,l=r.checkedKeys,o=r.halfCheckedKeys,s=r.dragOverNodeKey,c=r.dropPosition,u=r.keyEntities,h=Ht(u,n),m={eventKey:n,expanded:e.indexOf(n)!==-1,selected:t.indexOf(n)!==-1,loaded:a.indexOf(n)!==-1,loading:i.indexOf(n)!==-1,checked:l.indexOf(n)!==-1,halfChecked:o.indexOf(n)!==-1,pos:String(h?h.pos:""),dragOver:s===n&&c===0,dragOverGapTop:s===n&&c===-1,dragOverGapBottom:s===n&&c===1};return m}function xt(n){var r=n.data,e=n.expanded,t=n.selected,a=n.checked,i=n.loaded,l=n.loading,o=n.halfChecked,s=n.dragOver,c=n.dragOverGapTop,u=n.dragOverGapBottom,h=n.pos,m=n.active,g=n.eventKey,b=de(de({},r),{},{expanded:e,selected:t,checked:a,loaded:i,loading:l,halfChecked:o,dragOver:s,dragOverGapTop:c,dragOverGapBottom:u,pos:h,active:m,key:g});return"props"in b||Object.defineProperty(b,"props",{get:function(){return _t(!1,"Second param return from event is node data instead of TreeNode instance. Please read value directly instead of reading from `props`."),n}}),b}function Ls(n,r){var e=new Set;return n.forEach(function(t){r.has(t)||e.add(t)}),e}function Zu(n){var r=n||{},e=r.disabled,t=r.disableCheckbox,a=r.checkable;return!!(e||t)||a===!1}function Qu(n,r,e,t){for(var a=new Set(n),i=new Set,l=0;l<=e;l+=1){var o=r.get(l)||new Set;o.forEach(function(h){var m=h.key,g=h.node,b=h.children,y=b===void 0?[]:b;a.has(m)&&!t(g)&&y.filter(function(f){return!t(f.node)}).forEach(function(f){a.add(f.key)})})}for(var s=new Set,c=e;c>=0;c-=1){var u=r.get(c)||new Set;u.forEach(function(h){var m=h.parent,g=h.node;if(!(t(g)||!h.parent||s.has(h.parent.key))){if(t(h.parent.node)){s.add(m.key);return}var b=!0,y=!1;(m.children||[]).filter(function(f){return!t(f.node)}).forEach(function(f){var v=f.key,S=a.has(v);b&&!S&&(b=!1),!y&&(S||i.has(v))&&(y=!0)}),b&&a.add(m.key),y&&i.add(m.key),s.add(m.key)}})}return{checkedKeys:Array.from(a),halfCheckedKeys:Array.from(Ls(i,a))}}function Ju(n,r,e,t,a){for(var i=new Set(n),l=new Set(r),o=0;o<=t;o+=1){var s=e.get(o)||new Set;s.forEach(function(m){var g=m.key,b=m.node,y=m.children,f=y===void 0?[]:y;!i.has(g)&&!l.has(g)&&!a(b)&&f.filter(function(v){return!a(v.node)}).forEach(function(v){i.delete(v.key)})})}l=new Set;for(var c=new Set,u=t;u>=0;u-=1){var h=e.get(u)||new Set;h.forEach(function(m){var g=m.parent,b=m.node;if(!(a(b)||!m.parent||c.has(m.parent.key))){if(a(m.parent.node)){c.add(g.key);return}var y=!0,f=!1;(g.children||[]).filter(function(v){return!a(v.node)}).forEach(function(v){var S=v.key,C=i.has(S);y&&!C&&(y=!1),!f&&(C||l.has(S))&&(f=!0)}),y||i.delete(g.key),f&&l.add(g.key),c.add(g.key)}})}return{checkedKeys:Array.from(i),halfCheckedKeys:Array.from(Ls(l,i))}}function Sn(n,r,e,t){var a=[],i;i=Zu;var l=new Set(n.filter(function(u){var h=!!Ht(e,u);return h||a.push(u),h})),o=new Map,s=0;Object.keys(e).forEach(function(u){var h=e[u],m=h.level,g=o.get(m);g||(g=new Set,o.set(m,g)),g.add(h),s=Math.max(s,m)}),_t(!a.length,"Tree missing follow keys: ".concat(a.slice(0,100).map(function(u){return"'".concat(u,"'")}).join(", ")));var c;return r===!0?c=Qu(l,o,s,i):c=Ju(l,r.halfCheckedKeys,o,s,i),c}const ed=n=>{const{checkboxCls:r}=n,e=`${r}-wrapper`;return[{[`${r}-group`]:Object.assign(Object.assign({},nr(n)),{display:"inline-flex",flexWrap:"wrap",columnGap:n.marginXS,[`> ${n.antCls}-row`]:{flex:1}}),[e]:Object.assign(Object.assign({},nr(n)),{display:"inline-flex",alignItems:"baseline",cursor:"pointer","&:after":{display:"inline-block",width:0,overflow:"hidden",content:"'\\a0'"},[`& + ${e}`]:{marginInlineStart:0},[`&${e}-in-form-item`]:{'input[type="checkbox"]':{width:14,height:14}}}),[r]:Object.assign(Object.assign({},nr(n)),{position:"relative",whiteSpace:"nowrap",lineHeight:1,cursor:"pointer",borderRadius:n.borderRadiusSM,alignSelf:"center",[`${r}-input`]:{position:"absolute",inset:0,zIndex:1,cursor:"pointer",opacity:0,margin:0,[`&:focus-visible + ${r}-inner`]:Object.assign({},gs(n))},[`${r}-inner`]:{boxSizing:"border-box",display:"block",width:n.checkboxSize,height:n.checkboxSize,direction:"ltr",backgroundColor:n.colorBgContainer,border:`${te(n.lineWidth)} ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,borderCollapse:"separate",transition:`all ${n.motionDurationSlow}`,"&:after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"25%",display:"table",width:n.calc(n.checkboxSize).div(14).mul(5).equal(),height:n.calc(n.checkboxSize).div(14).mul(8).equal(),border:`${te(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`}},"& + span":{paddingInlineStart:n.paddingXS,paddingInlineEnd:n.paddingXS}})},{[`
        ${e}:not(${e}-disabled),
        ${r}:not(${r}-disabled)
      `]:{[`&:hover ${r}-inner`]:{borderColor:n.colorPrimary}},[`${e}:not(${e}-disabled)`]:{[`&:hover ${r}-checked:not(${r}-disabled) ${r}-inner`]:{backgroundColor:n.colorPrimaryHover,borderColor:"transparent"},[`&:hover ${r}-checked:not(${r}-disabled):after`]:{borderColor:n.colorPrimaryHover}}},{[`${r}-checked`]:{[`${r}-inner`]:{backgroundColor:n.colorPrimary,borderColor:n.colorPrimary,"&:after":{opacity:1,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`all ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`}}},[`
        ${e}-checked:not(${e}-disabled),
        ${r}-checked:not(${r}-disabled)
      `]:{[`&:hover ${r}-inner`]:{backgroundColor:n.colorPrimaryHover,borderColor:"transparent"}}},{[r]:{"&-indeterminate":{[`${r}-inner`]:{backgroundColor:`${n.colorBgContainer} !important`,borderColor:`${n.colorBorder} !important`,"&:after":{top:"50%",insetInlineStart:"50%",width:n.calc(n.fontSizeLG).div(2).equal(),height:n.calc(n.fontSizeLG).div(2).equal(),backgroundColor:n.colorPrimary,border:0,transform:"translate(-50%, -50%) scale(1)",opacity:1,content:'""'}},[`&:hover ${r}-inner`]:{backgroundColor:`${n.colorBgContainer} !important`,borderColor:`${n.colorPrimary} !important`}}}},{[`${e}-disabled`]:{cursor:"not-allowed"},[`${r}-disabled`]:{[`&, ${r}-input`]:{cursor:"not-allowed",pointerEvents:"none"},[`${r}-inner`]:{background:n.colorBgContainerDisabled,borderColor:n.colorBorder,"&:after":{borderColor:n.colorTextDisabled}},"&:after":{display:"none"},"& + span":{color:n.colorTextDisabled},[`&${r}-indeterminate ${r}-inner::after`]:{background:n.colorTextDisabled}}}]};function Di(n,r){const e=ur(r,{checkboxCls:`.${n}`,checkboxSize:r.controlInteractiveSize});return[ed(e)]}const Bs=br("Checkbox",(n,r)=>{let{prefixCls:e}=r;return[Di(e,n)]}),js=z.createContext(null);var td=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const rd=(n,r)=>{var e;const{prefixCls:t,className:a,rootClassName:i,children:l,indeterminate:o=!1,style:s,onMouseEnter:c,onMouseLeave:u,skipGroup:h=!1,disabled:m}=n,g=td(n,["prefixCls","className","rootClassName","children","indeterminate","style","onMouseEnter","onMouseLeave","skipGroup","disabled"]),{getPrefixCls:b,direction:y,checkbox:f}=d.useContext(ar),v=d.useContext(js),{isFormItemInput:S}=d.useContext(Ia),C=d.useContext(Yn),M=(e=(v==null?void 0:v.disabled)||m)!==null&&e!==void 0?e:C,E=d.useRef(g.value);d.useEffect(()=>{v==null||v.registerValue(g.value)},[]),d.useEffect(()=>{if(!h)return g.value!==E.current&&(v==null||v.cancelValue(E.current),v==null||v.registerValue(g.value),E.current=g.value),()=>v==null?void 0:v.cancelValue(g.value)},[g.value]);const w=b("checkbox",t),k=An(w),[P,_,I]=Bs(w,k),L=Object.assign({},g);v&&!h&&(L.onChange=function(){g.onChange&&g.onChange.apply(g,arguments),v.toggleOption&&v.toggleOption({label:l,value:g.value})},L.name=v.name,L.checked=v.value.includes(g.value));const T=oe(`${w}-wrapper`,{[`${w}-rtl`]:y==="rtl",[`${w}-wrapper-checked`]:L.checked,[`${w}-wrapper-disabled`]:M,[`${w}-wrapper-in-form-item`]:S},f==null?void 0:f.className,a,i,I,k,_),j=oe({[`${w}-indeterminate`]:o},rc,_),$=o?"mixed":void 0;return P(d.createElement(nc,{component:"Checkbox",disabled:M},d.createElement("label",{className:T,style:Object.assign(Object.assign({},f==null?void 0:f.style),s),onMouseEnter:c,onMouseLeave:u},d.createElement(Fu,Object.assign({"aria-checked":$},L,{prefixCls:w,className:j,disabled:M,ref:r})),l!==void 0&&d.createElement("span",null,l))))},zs=d.forwardRef(rd);var nd=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const ad=d.forwardRef((n,r)=>{const{defaultValue:e,children:t,options:a=[],prefixCls:i,className:l,rootClassName:o,style:s,onChange:c}=n,u=nd(n,["defaultValue","children","options","prefixCls","className","rootClassName","style","onChange"]),{getPrefixCls:h,direction:m}=d.useContext(ar),[g,b]=d.useState(u.value||e||[]),[y,f]=d.useState([]);d.useEffect(()=>{"value"in u&&b(u.value||[])},[u.value]);const v=d.useMemo(()=>a.map(O=>typeof O=="string"||typeof O=="number"?{label:O,value:O}:O),[a]),S=O=>{f(H=>H.filter(V=>V!==O))},C=O=>{f(H=>[].concat(Xe(H),[O]))},M=O=>{const H=g.indexOf(O.value),V=Xe(g);H===-1?V.push(O.value):V.splice(H,1),"value"in u||b(V),c==null||c(V.filter(Y=>y.includes(Y)).sort((Y,X)=>{const pe=v.findIndex(Q=>Q.value===Y),W=v.findIndex(Q=>Q.value===X);return pe-W}))},E=h("checkbox",i),w=`${E}-group`,k=An(E),[P,_,I]=Bs(E,k),L=Mn(u,["value","disabled"]),T=a.length?v.map(O=>d.createElement(zs,{prefixCls:E,key:O.value.toString(),disabled:"disabled"in O?O.disabled:u.disabled,value:O.value,checked:g.includes(O.value),onChange:O.onChange,className:`${w}-item`,style:O.style,title:O.title,id:O.id,required:O.required},O.label)):t,j={toggleOption:M,value:g,disabled:u.disabled,name:u.name,registerValue:C,cancelValue:S},$=oe(w,{[`${w}-rtl`]:m==="rtl"},l,o,I,k,_);return P(d.createElement("div",Object.assign({className:$,style:s},L,{ref:r}),d.createElement(js.Provider,{value:j},T)))}),Li=zs;Li.Group=ad;Li.__ANT_CHECKBOX=!0;var Hs=z.forwardRef(function(n,r){var e=n.prefixCls,t=n.forceRender,a=n.className,i=n.style,l=n.children,o=n.isActive,s=n.role,c=z.useState(o||t),u=be(c,2),h=u[0],m=u[1];return z.useEffect(function(){(t||o)&&m(!0)},[t,o]),h?z.createElement("div",{ref:r,className:oe("".concat(e,"-content"),B(B({},"".concat(e,"-content-active"),o),"".concat(e,"-content-inactive"),!o),a),style:i,role:s},z.createElement("div",{className:"".concat(e,"-content-box")},l)):null});Hs.displayName="PanelContent";var id=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],Vs=z.forwardRef(function(n,r){var e=n.showArrow,t=e===void 0?!0:e,a=n.headerClass,i=n.isActive,l=n.onItemClick,o=n.forceRender,s=n.className,c=n.prefixCls,u=n.collapsible,h=n.accordion,m=n.panelKey,g=n.extra,b=n.header,y=n.expandIcon,f=n.openMotion,v=n.destroyInactivePanel,S=n.children,C=$t(n,id),M=u==="disabled",E=u==="header",w=u==="icon",k=g!=null&&typeof g!="boolean",P=function(){l==null||l(m)},_=function(O){(O.key==="Enter"||O.keyCode===qe.ENTER||O.which===qe.ENTER)&&P()},I=typeof y=="function"?y(n):z.createElement("i",{className:"arrow"});I&&(I=z.createElement("div",{className:"".concat(c,"-expand-icon"),onClick:["header","icon"].includes(u)?P:void 0},I));var L=oe(B(B(B({},"".concat(c,"-item"),!0),"".concat(c,"-item-active"),i),"".concat(c,"-item-disabled"),M),s),T=oe(a,B(B(B({},"".concat(c,"-header"),!0),"".concat(c,"-header-collapsible-only"),E),"".concat(c,"-icon-collapsible-only"),w)),j={className:T,"aria-expanded":i,"aria-disabled":M,onKeyDown:_};return!E&&!w&&(j.onClick=P,j.role=h?"tab":"button",j.tabIndex=M?-1:0),z.createElement("div",Fe({},C,{ref:r,className:L}),z.createElement("div",j,t&&I,z.createElement("span",{className:"".concat(c,"-header-text"),onClick:u==="header"?P:void 0},b),k&&z.createElement("div",{className:"".concat(c,"-extra")},g)),z.createElement(Pi,Fe({visible:i,leavedClassName:"".concat(c,"-content-hidden")},f,{forceRender:o,removeOnLeave:v}),function($,O){var H=$.className,V=$.style;return z.createElement(Hs,{ref:O,prefixCls:c,className:H,style:V,isActive:i,forceRender:o,role:h?"tabpanel":void 0},S)}))}),od=["children","label","key","collapsible","onItemClick","destroyInactivePanel"],sd=function(r,e){var t=e.prefixCls,a=e.accordion,i=e.collapsible,l=e.destroyInactivePanel,o=e.onItemClick,s=e.activeKey,c=e.openMotion,u=e.expandIcon;return r.map(function(h,m){var g=h.children,b=h.label,y=h.key,f=h.collapsible,v=h.onItemClick,S=h.destroyInactivePanel,C=$t(h,od),M=String(y??m),E=f??i,w=S??l,k=function(I){E!=="disabled"&&(o(I),v==null||v(I))},P=!1;return a?P=s[0]===M:P=s.indexOf(M)>-1,z.createElement(Vs,Fe({},C,{prefixCls:t,key:M,panelKey:M,isActive:P,accordion:a,openMotion:c,expandIcon:u,header:b,collapsible:E,onItemClick:k,destroyInactivePanel:w}),g)})},ld=function(r,e,t){if(!r)return null;var a=t.prefixCls,i=t.accordion,l=t.collapsible,o=t.destroyInactivePanel,s=t.onItemClick,c=t.activeKey,u=t.openMotion,h=t.expandIcon,m=r.key||String(e),g=r.props,b=g.header,y=g.headerClass,f=g.destroyInactivePanel,v=g.collapsible,S=g.onItemClick,C=!1;i?C=c[0]===m:C=c.indexOf(m)>-1;var M=v??l,E=function(P){M!=="disabled"&&(s(P),S==null||S(P))},w={key:m,panelKey:m,header:b,headerClass:y,isActive:C,prefixCls:a,destroyInactivePanel:f??o,openMotion:u,accordion:i,children:r.props.children,onItemClick:E,expandIcon:h,collapsible:M};return typeof r.type=="string"?r:(Object.keys(w).forEach(function(k){typeof w[k]>"u"&&delete w[k]}),z.cloneElement(r,w))};function cd(n,r,e){return Array.isArray(n)?sd(n,e):Oa(r).map(function(t,a){return ld(t,a,e)})}function ud(n){var r=n;if(!Array.isArray(r)){var e=Sr(r);r=e==="number"||e==="string"?[r]:[]}return r.map(function(t){return String(t)})}var dd=z.forwardRef(function(n,r){var e=n.prefixCls,t=e===void 0?"rc-collapse":e,a=n.destroyInactivePanel,i=a===void 0?!1:a,l=n.style,o=n.accordion,s=n.className,c=n.children,u=n.collapsible,h=n.openMotion,m=n.expandIcon,g=n.activeKey,b=n.defaultActiveKey,y=n.onChange,f=n.items,v=oe(t,s),S=Wt([],{value:g,onChange:function(_){return y==null?void 0:y(_)},defaultValue:b,postState:ud}),C=be(S,2),M=C[0],E=C[1],w=function(_){return E(function(){if(o)return M[0]===_?[]:[_];var I=M.indexOf(_),L=I>-1;return L?M.filter(function(T){return T!==_}):[].concat(Xe(M),[_])})};_t(!c,"[rc-collapse] `children` will be removed in next major version. Please use `items` instead.");var k=cd(f,c,{prefixCls:t,accordion:o,openMotion:h,expandIcon:m,collapsible:u,destroyInactivePanel:i,onItemClick:w,activeKey:M});return z.createElement("div",Fe({ref:r,className:v,style:l,role:o?"tablist":void 0},Ta(n,{aria:!0,data:!0})),k)});const Bi=Object.assign(dd,{Panel:Vs});Bi.Panel;const pd=d.forwardRef((n,r)=>{const{getPrefixCls:e}=d.useContext(ar),{prefixCls:t,className:a,showArrow:i=!0}=n,l=e("collapse",t),o=oe({[`${l}-no-arrow`]:!i},a);return d.createElement(Bi.Panel,Object.assign({ref:r},n,{prefixCls:l,className:o}))}),hd=n=>{const{componentCls:r,contentBg:e,padding:t,headerBg:a,headerPadding:i,collapseHeaderPaddingSM:l,collapseHeaderPaddingLG:o,collapsePanelBorderRadius:s,lineWidth:c,lineType:u,colorBorder:h,colorText:m,colorTextHeading:g,colorTextDisabled:b,fontSizeLG:y,lineHeight:f,lineHeightLG:v,marginSM:S,paddingSM:C,paddingLG:M,paddingXS:E,motionDurationSlow:w,fontSizeIcon:k,contentPadding:P,fontHeight:_,fontHeightLG:I}=n,L=`${te(c)} ${u} ${h}`;return{[r]:Object.assign(Object.assign({},nr(n)),{backgroundColor:a,border:L,borderRadius:s,"&-rtl":{direction:"rtl"},[`& > ${r}-item`]:{borderBottom:L,"&:last-child":{[`
            &,
            & > ${r}-header`]:{borderRadius:`0 0 ${te(s)} ${te(s)}`}},[`> ${r}-header`]:{position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:i,color:g,lineHeight:f,cursor:"pointer",transition:`all ${w}, visibility 0s`,[`> ${r}-header-text`]:{flex:"auto"},"&:focus":{outline:"none"},[`${r}-expand-icon`]:{height:_,display:"flex",alignItems:"center",paddingInlineEnd:S},[`${r}-arrow`]:Object.assign(Object.assign({},fs()),{fontSize:k,transition:`transform ${w}`,svg:{transition:`transform ${w}`}}),[`${r}-header-text`]:{marginInlineEnd:"auto"}},[`${r}-icon-collapsible-only`]:{cursor:"unset",[`${r}-expand-icon`]:{cursor:"pointer"}}},[`${r}-content`]:{color:m,backgroundColor:e,borderTop:L,[`& > ${r}-content-box`]:{padding:P},"&-hidden":{display:"none"}},"&-small":{[`> ${r}-item`]:{[`> ${r}-header`]:{padding:l,paddingInlineStart:E,[`> ${r}-expand-icon`]:{marginInlineStart:n.calc(C).sub(E).equal()}},[`> ${r}-content > ${r}-content-box`]:{padding:C}}},"&-large":{[`> ${r}-item`]:{fontSize:y,lineHeight:v,[`> ${r}-header`]:{padding:o,paddingInlineStart:t,[`> ${r}-expand-icon`]:{height:I,marginInlineStart:n.calc(M).sub(t).equal()}},[`> ${r}-content > ${r}-content-box`]:{padding:M}}},[`${r}-item:last-child`]:{borderBottom:0,[`> ${r}-content`]:{borderRadius:`0 0 ${te(s)} ${te(s)}`}},[`& ${r}-item-disabled > ${r}-header`]:{"\n          &,\n          & > .arrow\n        ":{color:b,cursor:"not-allowed"}},[`&${r}-icon-position-end`]:{[`& > ${r}-item`]:{[`> ${r}-header`]:{[`${r}-expand-icon`]:{order:1,paddingInlineEnd:0,paddingInlineStart:S}}}}})}},gd=n=>{const{componentCls:r}=n,e=`> ${r}-item > ${r}-header ${r}-arrow`;return{[`${r}-rtl`]:{[e]:{transform:"rotate(180deg)"}}}},md=n=>{const{componentCls:r,headerBg:e,paddingXXS:t,colorBorder:a}=n;return{[`${r}-borderless`]:{backgroundColor:e,border:0,[`> ${r}-item`]:{borderBottom:`1px solid ${a}`},[`
        > ${r}-item:last-child,
        > ${r}-item:last-child ${r}-header
      `]:{borderRadius:0},[`> ${r}-item:last-child`]:{borderBottom:0},[`> ${r}-item > ${r}-content`]:{backgroundColor:"transparent",borderTop:0},[`> ${r}-item > ${r}-content > ${r}-content-box`]:{paddingTop:t}}}},fd=n=>{const{componentCls:r,paddingSM:e}=n;return{[`${r}-ghost`]:{backgroundColor:"transparent",border:0,[`> ${r}-item`]:{borderBottom:0,[`> ${r}-content`]:{backgroundColor:"transparent",border:0,[`> ${r}-content-box`]:{paddingBlock:e}}}}}},vd=n=>({headerPadding:`${n.paddingSM}px ${n.padding}px`,headerBg:n.colorFillAlter,contentPadding:`${n.padding}px 16px`,contentBg:n.colorBgContainer}),yd=br("Collapse",n=>{const r=ur(n,{collapseHeaderPaddingSM:`${te(n.paddingXS)} ${te(n.paddingSM)}`,collapseHeaderPaddingLG:`${te(n.padding)} ${te(n.paddingLG)}`,collapsePanelBorderRadius:n.borderRadiusLG});return[hd(r),md(r),fd(r),gd(r),ms(r)]},vd),bd=d.forwardRef((n,r)=>{const{getPrefixCls:e,direction:t,collapse:a}=d.useContext(ar),{prefixCls:i,className:l,rootClassName:o,style:s,bordered:c=!0,ghost:u,size:h,expandIconPosition:m="start",children:g,expandIcon:b}=n,y=qn(L=>{var T;return(T=h??L)!==null&&T!==void 0?T:"middle"}),f=e("collapse",i),v=e(),[S,C,M]=yd(f),E=d.useMemo(()=>m==="left"?"start":m==="right"?"end":m,[m]),w=b??(a==null?void 0:a.expandIcon),k=d.useCallback(function(){let L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const T=typeof w=="function"?w(L):d.createElement(ac,{rotate:L.isActive?90:void 0,"aria-label":L.isActive?"expanded":"collapsed"});return Fn(T,()=>{var j;return{className:oe((j=T==null?void 0:T.props)===null||j===void 0?void 0:j.className,`${f}-arrow`)}})},[w,f]),P=oe(`${f}-icon-position-${E}`,{[`${f}-borderless`]:!c,[`${f}-rtl`]:t==="rtl",[`${f}-ghost`]:!!u,[`${f}-${y}`]:y!=="middle"},a==null?void 0:a.className,l,o,C,M),_=Object.assign(Object.assign({},ic(v)),{motionAppear:!1,leavedClassName:`${f}-content-hidden`}),I=d.useMemo(()=>g?Oa(g).map((L,T)=>{var j,$;if(!((j=L.props)===null||j===void 0)&&j.disabled){const O=($=L.key)!==null&&$!==void 0?$:String(T),{disabled:H,collapsible:V}=L.props,Y=Object.assign(Object.assign({},Mn(L.props,["disabled"])),{key:O,collapsible:V??(H?"disabled":void 0)});return Fn(L,Y)}return L}):null,[g]);return S(d.createElement(Bi,Object.assign({ref:r,openMotion:_},Mn(n,["rootClassName"]),{expandIcon:k,prefixCls:f,className:P,style:Object.assign(Object.assign({},a==null?void 0:a.style),s)}),I))}),Sd=Object.assign(bd,{Panel:pd});var Cd=["b"],Ed=["v"],Qa=function(r){return Math.round(Number(r||0))},Md=function(r){if(r instanceof vs)return r;if(r&&Sr(r)==="object"&&"h"in r&&"b"in r){var e=r,t=e.b,a=$t(e,Cd);return de(de({},a),{},{v:t})}return typeof r=="string"&&/hsb/.test(r)?r.replace(/hsb/,"hsv"):r},cr=function(n){Oi(e,n);var r=Ii(e);function e(t){return kn(this,e),r.call(this,Md(t))}return Pn(e,[{key:"toHsbString",value:function(){var a=this.toHsb(),i=Qa(a.s*100),l=Qa(a.b*100),o=Qa(a.h),s=a.a,c="hsb(".concat(o,", ").concat(i,"%, ").concat(l,"%)"),u="hsba(".concat(o,", ").concat(i,"%, ").concat(l,"%, ").concat(s.toFixed(s===0?0:2),")");return s===1?c:u}},{key:"toHsb",value:function(){var a=this.toHsv(),i=a.v,l=$t(a,Ed);return de(de({},l),{},{b:i,a:this.a})}}]),e}(vs),Ad="rc-color-picker",Cn=function(r){return r instanceof cr?r:new cr(r)},xd=Cn("#1677ff"),Ks=function(r){var e=r.offset,t=r.targetRef,a=r.containerRef,i=r.color,l=r.type,o=a.current.getBoundingClientRect(),s=o.width,c=o.height,u=t.current.getBoundingClientRect(),h=u.width,m=u.height,g=h/2,b=m/2,y=(e.x+g)/s,f=1-(e.y+b)/c,v=i.toHsb(),S=y,C=(e.x+g)/s*360;if(l)switch(l){case"hue":return Cn(de(de({},v),{},{h:C<=0?0:C}));case"alpha":return Cn(de(de({},v),{},{a:S<=0?0:S}))}return Cn({h:v.h,s:y<=0?0:y,b:f>=1?1:f,a:v.a})},Fs=function(r,e){var t=r.toHsb();switch(e){case"hue":return{x:t.h/360*100,y:50};case"alpha":return{x:r.a*100,y:50};default:return{x:t.s*100,y:(1-t.b)*100}}},ji=function(r){var e=r.color,t=r.prefixCls,a=r.className,i=r.style,l=r.onClick,o="".concat(t,"-color-block");return z.createElement("div",{className:oe(o,a),style:i,onClick:l},z.createElement("div",{className:"".concat(o,"-inner"),style:{background:e}}))};function Nd(n){var r="touches"in n?n.touches[0]:n,e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,t=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return{pageX:r.pageX-e,pageY:r.pageY-t}}function Us(n){var r=n.targetRef,e=n.containerRef,t=n.direction,a=n.onDragChange,i=n.onDragChangeComplete,l=n.calculate,o=n.color,s=n.disabledDrag,c=d.useState({x:0,y:0}),u=be(c,2),h=u[0],m=u[1],g=d.useRef(null),b=d.useRef(null);d.useEffect(function(){m(l())},[o]),d.useEffect(function(){return function(){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",b.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",b.current),g.current=null,b.current=null}},[]);var y=function(M){var E=Nd(M),w=E.pageX,k=E.pageY,P=e.current.getBoundingClientRect(),_=P.x,I=P.y,L=P.width,T=P.height,j=r.current.getBoundingClientRect(),$=j.width,O=j.height,H=$/2,V=O/2,Y=Math.max(0,Math.min(w-_,L))-H,X=Math.max(0,Math.min(k-I,T))-V,pe={x:Y,y:t==="x"?h.y:X};if($===0&&O===0||$!==O)return!1;a==null||a(pe)},f=function(M){M.preventDefault(),y(M)},v=function(M){M.preventDefault(),document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",b.current),document.removeEventListener("touchmove",g.current),document.removeEventListener("touchend",b.current),g.current=null,b.current=null,i==null||i()},S=function(M){document.removeEventListener("mousemove",g.current),document.removeEventListener("mouseup",b.current),!s&&(y(M),document.addEventListener("mousemove",f),document.addEventListener("mouseup",v),document.addEventListener("touchmove",f),document.addEventListener("touchend",v),g.current=f,b.current=v)};return[h,S]}var Gs=function(r){var e=r.size,t=e===void 0?"default":e,a=r.color,i=r.prefixCls;return z.createElement("div",{className:oe("".concat(i,"-handler"),B({},"".concat(i,"-handler-sm"),t==="small")),style:{backgroundColor:a}})},Ws=function(r){var e=r.children,t=r.style,a=r.prefixCls;return z.createElement("div",{className:"".concat(a,"-palette"),style:de({position:"relative"},t)},e)},Ys=d.forwardRef(function(n,r){var e=n.children,t=n.x,a=n.y;return z.createElement("div",{ref:r,style:{position:"absolute",left:"".concat(t,"%"),top:"".concat(a,"%"),zIndex:1,transform:"translate(-50%, -50%)"}},e)}),wd=function(r){var e=r.color,t=r.onChange,a=r.prefixCls,i=r.onChangeComplete,l=r.disabled,o=d.useRef(),s=d.useRef(),c=d.useRef(e),u=mr(function(y){var f=Ks({offset:y,targetRef:s,containerRef:o,color:e});c.current=f,t(f)}),h=Us({color:e,containerRef:o,targetRef:s,calculate:function(){return Fs(e)},onDragChange:u,onDragChangeComplete:function(){return i==null?void 0:i(c.current)},disabledDrag:l}),m=be(h,2),g=m[0],b=m[1];return z.createElement("div",{ref:o,className:"".concat(a,"-select"),onMouseDown:b,onTouchStart:b},z.createElement(Ws,{prefixCls:a},z.createElement(Ys,{x:g.x,y:g.y,ref:s},z.createElement(Gs,{color:e.toRgbString(),prefixCls:a})),z.createElement("div",{className:"".concat(a,"-saturation"),style:{backgroundColor:"hsl(".concat(e.toHsb().h,",100%, 50%)"),backgroundImage:"linear-gradient(0deg, #000, transparent),linear-gradient(90deg, #fff, hsla(0, 0%, 100%, 0))"}})))},kd=function(r,e){var t=Wt(r,{value:e}),a=be(t,2),i=a[0],l=a[1],o=d.useMemo(function(){return Cn(i)},[i]);return[o,l]},Pd=function(r){var e=r.colors,t=r.children,a=r.direction,i=a===void 0?"to right":a,l=r.type,o=r.prefixCls,s=d.useMemo(function(){return e.map(function(c,u){var h=Cn(c);return l==="alpha"&&u===e.length-1&&(h=new cr(h.setA(1))),h.toRgbString()}).join(",")},[e,l]);return z.createElement("div",{className:"".concat(o,"-gradient"),style:{position:"absolute",inset:0,background:"linear-gradient(".concat(i,", ").concat(s,")")}},t)},Od=function(r){var e=r.prefixCls,t=r.colors,a=r.disabled,i=r.onChange,l=r.onChangeComplete,o=r.color,s=r.type,c=d.useRef(),u=d.useRef(),h=d.useRef(o),m=function(E){return s==="hue"?E.getHue():E.a*100},g=mr(function(M){var E=Ks({offset:M,targetRef:u,containerRef:c,color:o,type:s});h.current=E,i(m(E))}),b=Us({color:o,targetRef:u,containerRef:c,calculate:function(){return Fs(o,s)},onDragChange:g,onDragChangeComplete:function(){l(m(h.current))},direction:"x",disabledDrag:a}),y=be(b,2),f=y[0],v=y[1],S=z.useMemo(function(){if(s==="hue"){var M=o.toHsb();M.s=1,M.b=1,M.a=1;var E=new cr(M);return E}return o},[o,s]),C=z.useMemo(function(){return t.map(function(M){return"".concat(M.color," ").concat(M.percent,"%")})},[t]);return z.createElement("div",{ref:c,className:oe("".concat(e,"-slider"),"".concat(e,"-slider-").concat(s)),onMouseDown:v,onTouchStart:v},z.createElement(Ws,{prefixCls:e},z.createElement(Ys,{x:f.x,y:f.y,ref:u},z.createElement(Gs,{size:"small",color:S.toHexString(),prefixCls:e})),z.createElement(Pd,{colors:C,type:s,prefixCls:e})))};function Id(n){return d.useMemo(function(){var r=n||{},e=r.slider;return[e||Od]},[n])}var Td=[{color:"rgb(255, 0, 0)",percent:0},{color:"rgb(255, 255, 0)",percent:17},{color:"rgb(0, 255, 0)",percent:33},{color:"rgb(0, 255, 255)",percent:50},{color:"rgb(0, 0, 255)",percent:67},{color:"rgb(255, 0, 255)",percent:83},{color:"rgb(255, 0, 0)",percent:100}],_d=d.forwardRef(function(n,r){var e=n.value,t=n.defaultValue,a=n.prefixCls,i=a===void 0?Ad:a,l=n.onChange,o=n.onChangeComplete,s=n.className,c=n.style,u=n.panelRender,h=n.disabledAlpha,m=h===void 0?!1:h,g=n.disabled,b=g===void 0?!1:g,y=n.components,f=Id(y),v=be(f,1),S=v[0],C=kd(t||xd,e),M=be(C,2),E=M[0],w=M[1],k=d.useMemo(function(){return E.setA(1).toRgbString()},[E]),P=function(X,pe){e||w(X),l==null||l(X,pe)},_=function(X){return new cr(E.setHue(X))},I=function(X){return new cr(E.setA(X/100))},L=function(X){P(_(X),{type:"hue",value:X})},T=function(X){P(I(X),{type:"alpha",value:X})},j=function(X){o&&o(_(X))},$=function(X){o&&o(I(X))},O=oe("".concat(i,"-panel"),s,B({},"".concat(i,"-panel-disabled"),b)),H={prefixCls:i,disabled:b,color:E},V=z.createElement(z.Fragment,null,z.createElement(wd,Fe({onChange:P},H,{onChangeComplete:o})),z.createElement("div",{className:"".concat(i,"-slider-container")},z.createElement("div",{className:oe("".concat(i,"-slider-group"),B({},"".concat(i,"-slider-group-disabled-alpha"),m))},z.createElement(S,Fe({},H,{type:"hue",colors:Td,min:0,max:359,value:E.getHue(),onChange:L,onChangeComplete:j})),!m&&z.createElement(S,Fe({},H,{type:"alpha",colors:[{percent:0,color:"rgba(255, 0, 4, 0)"},{percent:100,color:k}],min:0,max:100,value:E.a*100,onChange:T,onChangeComplete:$}))),z.createElement(ji,{color:E.toRgbString(),prefixCls:i})));return z.createElement("div",{className:O,style:c,ref:r},typeof u=="function"?u(V):V)});const Ln=(n,r)=>(n==null?void 0:n.replace(/[^\w/]/gi,"").slice(0,r?8:6))||"",Rd=(n,r)=>n?Ln(n,r):"";let rr=function(){function n(r){kn(this,n);var e;if(this.cleared=!1,r instanceof n){this.metaColor=r.metaColor.clone(),this.colors=(e=r.colors)===null||e===void 0?void 0:e.map(a=>({color:new n(a.color),percent:a.percent})),this.cleared=r.cleared;return}const t=Array.isArray(r);t&&r.length?(this.colors=r.map(a=>{let{color:i,percent:l}=a;return{color:new n(i),percent:l}}),this.metaColor=new cr(this.colors[0].color.metaColor)):this.metaColor=new cr(t?"":r),(!r||t&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Pn(n,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return Rd(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:e}=this;return e?`linear-gradient(90deg, ${e.map(a=>`${a.color.toRgbString()} ${a.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(e){return!e||this.isGradient()!==e.isGradient()?!1:this.isGradient()?this.colors.length===e.colors.length&&this.colors.every((t,a)=>{const i=e.colors[a];return t.percent===i.percent&&t.color.equals(i.color)}):this.toHexString()===e.toHexString()}}])}();const $d=n=>{const{componentCls:r,sizePaddingEdgeHorizontal:e,colorSplit:t,lineWidth:a,textPaddingInline:i,orientationMargin:l,verticalMarginInline:o}=n;return{[r]:Object.assign(Object.assign({},nr(n)),{borderBlockStart:`${te(a)} solid ${t}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",marginInline:o,marginBlock:0,verticalAlign:"middle",borderTop:0,borderInlineStart:`${te(a)} solid ${t}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${te(n.dividerHorizontalGutterMargin)} 0`},[`&-horizontal${r}-with-text`]:{display:"flex",alignItems:"center",margin:`${te(n.dividerHorizontalWithTextGutterMargin)} 0`,color:n.colorTextHeading,fontWeight:500,fontSize:n.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${t}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${te(a)} solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${r}-with-text-left`]:{"&::before":{width:`calc(${l} * 100%)`},"&::after":{width:`calc(100% - ${l} * 100%)`}},[`&-horizontal${r}-with-text-right`]:{"&::before":{width:`calc(100% - ${l} * 100%)`},"&::after":{width:`calc(${l} * 100%)`}},[`${r}-inner-text`]:{display:"inline-block",paddingBlock:0,paddingInline:i},"&-dashed":{background:"none",borderColor:t,borderStyle:"dashed",borderWidth:`${te(a)} 0 0`},[`&-horizontal${r}-with-text${r}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${r}-dashed`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},"&-dotted":{background:"none",borderColor:t,borderStyle:"dotted",borderWidth:`${te(a)} 0 0`},[`&-horizontal${r}-with-text${r}-dotted`]:{"&::before, &::after":{borderStyle:"dotted none none"}},[`&-vertical${r}-dotted`]:{borderInlineStartWidth:a,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${r}-with-text`]:{color:n.colorText,fontWeight:"normal",fontSize:n.fontSize},[`&-horizontal${r}-with-text-left${r}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${r}-inner-text`]:{paddingInlineStart:e}},[`&-horizontal${r}-with-text-right${r}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${r}-inner-text`]:{paddingInlineEnd:e}}})}},Dd=n=>({textPaddingInline:"1em",orientationMargin:.05,verticalMarginInline:n.marginXS}),Ld=br("Divider",n=>{const r=ur(n,{dividerHorizontalWithTextGutterMargin:n.margin,dividerHorizontalGutterMargin:n.marginLG,sizePaddingEdgeHorizontal:0});return[$d(r)]},Dd,{unitless:{orientationMargin:!0}});var Bd=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const jd=n=>{const{getPrefixCls:r,direction:e,divider:t}=d.useContext(ar),{prefixCls:a,type:i="horizontal",orientation:l="center",orientationMargin:o,className:s,rootClassName:c,children:u,dashed:h,variant:m="solid",plain:g,style:b}=n,y=Bd(n,["prefixCls","type","orientation","orientationMargin","className","rootClassName","children","dashed","variant","plain","style"]),f=r("divider",a),[v,S,C]=Ld(f),M=!!u,E=l==="left"&&o!=null,w=l==="right"&&o!=null,k=oe(f,t==null?void 0:t.className,S,C,`${f}-${i}`,{[`${f}-with-text`]:M,[`${f}-with-text-${l}`]:M,[`${f}-dashed`]:!!h,[`${f}-${m}`]:m!=="solid",[`${f}-plain`]:!!g,[`${f}-rtl`]:e==="rtl",[`${f}-no-default-orientation-margin-left`]:E,[`${f}-no-default-orientation-margin-right`]:w},s,c),P=d.useMemo(()=>typeof o=="number"?o:/^\d+$/.test(o)?Number(o):o,[o]),_=Object.assign(Object.assign({},E&&{marginLeft:P}),w&&{marginRight:P});return v(d.createElement("div",Object.assign({className:k,style:Object.assign(Object.assign({},t==null?void 0:t.style),b)},y,{role:"separator"}),u&&i!=="vertical"&&d.createElement("span",{className:`${f}-inner-text`,style:_},u)))};var co=function(r){return r?{left:r.offsetLeft,right:r.parentElement.clientWidth-r.clientWidth-r.offsetLeft,width:r.clientWidth}:null},gn=function(r){return r!==void 0?"".concat(r,"px"):void 0};function zd(n){var r=n.prefixCls,e=n.containerRef,t=n.value,a=n.getValueIndex,i=n.motionName,l=n.onMotionStart,o=n.onMotionEnd,s=n.direction,c=d.useRef(null),u=d.useState(t),h=be(u,2),m=h[0],g=h[1],b=function(j){var $,O=a(j),H=($=e.current)===null||$===void 0?void 0:$.querySelectorAll(".".concat(r,"-item"))[O];return(H==null?void 0:H.offsetParent)&&H},y=d.useState(null),f=be(y,2),v=f[0],S=f[1],C=d.useState(null),M=be(C,2),E=M[0],w=M[1];Lr(function(){if(m!==t){var T=b(m),j=b(t),$=co(T),O=co(j);g(t),S($),w(O),T&&j?l():o()}},[t]);var k=d.useMemo(function(){return gn(s==="rtl"?-(v==null?void 0:v.right):v==null?void 0:v.left)},[s,v]),P=d.useMemo(function(){return gn(s==="rtl"?-(E==null?void 0:E.right):E==null?void 0:E.left)},[s,E]),_=function(){return{transform:"translateX(var(--thumb-start-left))",width:"var(--thumb-start-width)"}},I=function(){return{transform:"translateX(var(--thumb-active-left))",width:"var(--thumb-active-width)"}},L=function(){S(null),w(null),o()};return!v||!E?null:d.createElement(Pi,{visible:!0,motionName:i,motionAppear:!0,onAppearStart:_,onAppearActive:I,onVisibleChanged:L},function(T,j){var $=T.className,O=T.style,H=de(de({},O),{},{"--thumb-start-left":k,"--thumb-start-width":gn(v==null?void 0:v.width),"--thumb-active-left":P,"--thumb-active-width":gn(E==null?void 0:E.width)}),V={ref:_a(c,j),style:H,className:oe("".concat(r,"-thumb"),$)};return d.createElement("div",V)})}var Hd=["prefixCls","direction","options","disabled","defaultValue","value","onChange","className","motionName"];function Vd(n){if(typeof n.title<"u")return n.title;if(Sr(n.label)!=="object"){var r;return(r=n.label)===null||r===void 0?void 0:r.toString()}}function Kd(n){return n.map(function(r){if(Sr(r)==="object"&&r!==null){var e=Vd(r);return de(de({},r),{},{title:e})}return{label:r==null?void 0:r.toString(),title:r==null?void 0:r.toString(),value:r}})}var Fd=function(r){var e=r.prefixCls,t=r.className,a=r.disabled,i=r.checked,l=r.label,o=r.title,s=r.value,c=r.onChange,u=function(m){a||c(m,s)};return d.createElement("label",{className:oe(t,B({},"".concat(e,"-item-disabled"),a))},d.createElement("input",{className:"".concat(e,"-item-input"),type:"radio",disabled:a,checked:i,onChange:u}),d.createElement("div",{className:"".concat(e,"-item-label"),title:o},l))},Ud=d.forwardRef(function(n,r){var e,t,a=n.prefixCls,i=a===void 0?"rc-segmented":a,l=n.direction,o=n.options,s=o===void 0?[]:o,c=n.disabled,u=n.defaultValue,h=n.value,m=n.onChange,g=n.className,b=g===void 0?"":g,y=n.motionName,f=y===void 0?"thumb-motion":y,v=$t(n,Hd),S=d.useRef(null),C=d.useMemo(function(){return _a(S,r)},[S,r]),M=d.useMemo(function(){return Kd(s)},[s]),E=Wt((e=M[0])===null||e===void 0?void 0:e.value,{value:h,defaultValue:u}),w=be(E,2),k=w[0],P=w[1],_=d.useState(!1),I=be(_,2),L=I[0],T=I[1],j=function(H,V){c||(P(V),m==null||m(V))},$=Mn(v,["children"]);return d.createElement("div",Fe({},$,{className:oe(i,(t={},B(t,"".concat(i,"-rtl"),l==="rtl"),B(t,"".concat(i,"-disabled"),c),t),b),ref:C}),d.createElement("div",{className:"".concat(i,"-group")},d.createElement(zd,{prefixCls:i,value:k,containerRef:S,motionName:"".concat(i,"-").concat(f),direction:l,getValueIndex:function(H){return M.findIndex(function(V){return V.value===H})},onMotionStart:function(){T(!0)},onMotionEnd:function(){T(!1)}}),M.map(function(O){return d.createElement(Fd,Fe({},O,{key:O.value,prefixCls:i,className:oe(O.className,"".concat(i,"-item"),B({},"".concat(i,"-item-selected"),O.value===k&&!L)),checked:O.value===k,onChange:j,disabled:!!c||!!O.disabled}))})))}),Gd=Ud;function uo(n,r){return{[`${n}, ${n}:hover, ${n}:focus`]:{color:r.colorTextDisabled,cursor:"not-allowed"}}}function po(n){return{backgroundColor:n.itemSelectedBg,boxShadow:n.boxShadowTertiary}}const Wd=Object.assign({overflow:"hidden"},oc),Yd=n=>{const{componentCls:r}=n,e=n.calc(n.controlHeight).sub(n.calc(n.trackPadding).mul(2)).equal(),t=n.calc(n.controlHeightLG).sub(n.calc(n.trackPadding).mul(2)).equal(),a=n.calc(n.controlHeightSM).sub(n.calc(n.trackPadding).mul(2)).equal();return{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nr(n)),{display:"inline-block",padding:n.trackPadding,color:n.itemColor,background:n.trackBg,borderRadius:n.borderRadius,transition:`all ${n.motionDurationMid} ${n.motionEaseInOut}`,[`${r}-group`]:{position:"relative",display:"flex",alignItems:"stretch",justifyItems:"flex-start",width:"100%"},[`&${r}-rtl`]:{direction:"rtl"},[`&${r}-block`]:{display:"flex"},[`&${r}-block ${r}-item`]:{flex:1,minWidth:0},[`${r}-item`]:{position:"relative",textAlign:"center",cursor:"pointer",transition:`color ${n.motionDurationMid} ${n.motionEaseInOut}`,borderRadius:n.borderRadiusSM,transform:"translateZ(0)","&-selected":Object.assign(Object.assign({},po(n)),{color:n.itemSelectedColor}),"&::after":{content:'""',position:"absolute",zIndex:-1,width:"100%",height:"100%",top:0,insetInlineStart:0,borderRadius:"inherit",transition:`background-color ${n.motionDurationMid}`,pointerEvents:"none"},[`&:hover:not(${r}-item-selected):not(${r}-item-disabled)`]:{color:n.itemHoverColor,"&::after":{backgroundColor:n.itemHoverBg}},[`&:active:not(${r}-item-selected):not(${r}-item-disabled)`]:{color:n.itemHoverColor,"&::after":{backgroundColor:n.itemActiveBg}},"&-label":Object.assign({minHeight:e,lineHeight:te(e),padding:`0 ${te(n.segmentedPaddingHorizontal)}`},Wd),"&-icon + *":{marginInlineStart:n.calc(n.marginSM).div(2).equal()},"&-input":{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:0,opacity:0,pointerEvents:"none"}},[`${r}-thumb`]:Object.assign(Object.assign({},po(n)),{position:"absolute",insetBlockStart:0,insetInlineStart:0,width:0,height:"100%",padding:`${te(n.paddingXXS)} 0`,borderRadius:n.borderRadiusSM,[`& ~ ${r}-item:not(${r}-item-selected):not(${r}-item-disabled)::after`]:{backgroundColor:"transparent"}}),[`&${r}-lg`]:{borderRadius:n.borderRadiusLG,[`${r}-item-label`]:{minHeight:t,lineHeight:te(t),padding:`0 ${te(n.segmentedPaddingHorizontal)}`,fontSize:n.fontSizeLG},[`${r}-item, ${r}-thumb`]:{borderRadius:n.borderRadius}},[`&${r}-sm`]:{borderRadius:n.borderRadiusSM,[`${r}-item-label`]:{minHeight:a,lineHeight:te(a),padding:`0 ${te(n.segmentedPaddingHorizontalSM)}`},[`${r}-item, ${r}-thumb`]:{borderRadius:n.borderRadiusXS}}}),uo(`&-disabled ${r}-item`,n)),uo(`${r}-item-disabled`,n)),{[`${r}-thumb-motion-appear-active`]:{transition:`transform ${n.motionDurationSlow} ${n.motionEaseInOut}, width ${n.motionDurationSlow} ${n.motionEaseInOut}`,willChange:"transform, width"}})}},qd=n=>{const{colorTextLabel:r,colorText:e,colorFillSecondary:t,colorBgElevated:a,colorFill:i,lineWidthBold:l,colorBgLayout:o}=n;return{trackPadding:l,trackBg:o,itemColor:r,itemHoverColor:e,itemHoverBg:t,itemSelectedBg:a,itemActiveBg:i,itemSelectedColor:e}},Xd=br("Segmented",n=>{const{lineWidth:r,calc:e}=n,t=ur(n,{segmentedPaddingHorizontal:e(n.controlPaddingHorizontal).sub(r).equal(),segmentedPaddingHorizontalSM:e(n.controlPaddingHorizontalSM).sub(r).equal()});return[Yd(t)]},qd);var ho=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};function Zd(n){return typeof n=="object"&&!!(n!=null&&n.icon)}const Qd=d.forwardRef((n,r)=>{const{prefixCls:e,className:t,rootClassName:a,block:i,options:l=[],size:o="middle",style:s}=n,c=ho(n,["prefixCls","className","rootClassName","block","options","size","style"]),{getPrefixCls:u,direction:h,segmented:m}=d.useContext(ar),g=u("segmented",e),[b,y,f]=Xd(g),v=qn(o),S=d.useMemo(()=>l.map(E=>{if(Zd(E)){const{icon:w,label:k}=E,P=ho(E,["icon","label"]);return Object.assign(Object.assign({},P),{label:d.createElement(d.Fragment,null,d.createElement("span",{className:`${g}-item-icon`},w),k&&d.createElement("span",null,k))})}return E}),[l,g]),C=oe(t,a,m==null?void 0:m.className,{[`${g}-block`]:i,[`${g}-sm`]:v==="small",[`${g}-lg`]:v==="large"},y,f),M=Object.assign(Object.assign({},m==null?void 0:m.style),s);return b(d.createElement(Gd,Object.assign({},c,{className:C,style:M,options:S,ref:r,prefixCls:g,direction:h})))}),Jd=Qd,qs=z.createContext({}),Xs=z.createContext({}),Rt=n=>n instanceof rr?n:new rr(n),Ca=n=>Math.round(Number(n||0)),zi=n=>Ca(n.toHsb().a*100),Ea=(n,r)=>{const e=n.toHsb();return e.a=1,Rt(e)},Zs=(n,r)=>{const e=[{percent:0,color:n[0].color}].concat(Xe(n),[{percent:100,color:n[n.length-1].color}]);for(let t=0;t<e.length-1;t+=1){const a=e[t].percent,i=e[t+1].percent,l=e[t].color,o=e[t+1].color;if(a<=r&&r<=i){const s=i-a;if(s===0)return l;const c=(r-a)/s*100,u=new cr(l),h=new cr(o);return u.mix(h,c).toRgbString()}}return""},Qs=n=>{let{prefixCls:r,value:e,onChange:t}=n;const a=()=>{if(t&&e&&!e.cleared){const i=e.toHsb();i.a=0;const l=Rt(i);l.cleared=!0,t(l)}};return z.createElement("div",{className:`${r}-clear`,onClick:a})};var $r;(function(n){n.hex="hex",n.rgb="rgb",n.hsb="hsb"})($r||($r={}));var ep={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M890.5 755.3L537.9 269.2c-12.8-17.6-39-17.6-51.7 0L133.5 755.3A8 8 0 00140 768h75c5.1 0 9.9-2.5 12.9-6.6L512 369.8l284.1 391.6c3 4.1 7.8 6.6 12.9 6.6h75c6.5 0 10.3-7.4 6.5-12.7z"}}]},name:"up",theme:"outlined"},tp=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:ep}))},rp=d.forwardRef(tp);function bi(){return typeof BigInt=="function"}function Js(n){return!n&&n!==0&&!Number.isNaN(n)||!String(n).trim()}function Jr(n){var r=n.trim(),e=r.startsWith("-");e&&(r=r.slice(1)),r=r.replace(/(\.\d*[^0])0*$/,"$1").replace(/\.0*$/,"").replace(/^0+/,""),r.startsWith(".")&&(r="0".concat(r));var t=r||"0",a=t.split("."),i=a[0]||"0",l=a[1]||"0";i==="0"&&l==="0"&&(e=!1);var o=e?"-":"";return{negative:e,negativeStr:o,trimStr:t,integerStr:i,decimalStr:l,fullStr:"".concat(o).concat(t)}}function Hi(n){var r=String(n);return!Number.isNaN(Number(r))&&r.includes("e")}function Qr(n){var r=String(n);if(Hi(n)){var e=Number(r.slice(r.indexOf("e-")+2)),t=r.match(/\.(\d+)/);return t!=null&&t[1]&&(e+=t[1].length),e}return r.includes(".")&&Vi(r)?r.length-r.indexOf(".")-1:0}function Da(n){var r=String(n);if(Hi(n)){if(n>Number.MAX_SAFE_INTEGER)return String(bi()?BigInt(n).toString():Number.MAX_SAFE_INTEGER);if(n<Number.MIN_SAFE_INTEGER)return String(bi()?BigInt(n).toString():Number.MIN_SAFE_INTEGER);r=n.toFixed(Qr(r))}return Jr(r).fullStr}function Vi(n){return typeof n=="number"?!Number.isNaN(n):n?/^\s*-?\d+(\.\d+)?\s*$/.test(n)||/^\s*-?\d+\.\s*$/.test(n)||/^\s*-?\.\d+\s*$/.test(n):!1}var np=function(){function n(r){if(kn(this,n),B(this,"origin",""),B(this,"negative",void 0),B(this,"integer",void 0),B(this,"decimal",void 0),B(this,"decimalLen",void 0),B(this,"empty",void 0),B(this,"nan",void 0),Js(r)){this.empty=!0;return}if(this.origin=String(r),r==="-"||Number.isNaN(r)){this.nan=!0;return}var e=r;if(Hi(e)&&(e=Number(e)),e=typeof e=="string"?e:Da(e),Vi(e)){var t=Jr(e);this.negative=t.negative;var a=t.trimStr.split(".");this.integer=BigInt(a[0]);var i=a[1]||"0";this.decimal=BigInt(i),this.decimalLen=i.length}else this.nan=!0}return Pn(n,[{key:"getMark",value:function(){return this.negative?"-":""}},{key:"getIntegerStr",value:function(){return this.integer.toString()}},{key:"getDecimalStr",value:function(){return this.decimal.toString().padStart(this.decimalLen,"0")}},{key:"alignDecimal",value:function(e){var t="".concat(this.getMark()).concat(this.getIntegerStr()).concat(this.getDecimalStr().padEnd(e,"0"));return BigInt(t)}},{key:"negate",value:function(){var e=new n(this.toString());return e.negative=!e.negative,e}},{key:"cal",value:function(e,t,a){var i=Math.max(this.getDecimalStr().length,e.getDecimalStr().length),l=this.alignDecimal(i),o=e.alignDecimal(i),s=t(l,o).toString(),c=a(i),u=Jr(s),h=u.negativeStr,m=u.trimStr,g="".concat(h).concat(m.padStart(c+1,"0"));return new n("".concat(g.slice(0,-c),".").concat(g.slice(-c)))}},{key:"add",value:function(e){if(this.isInvalidate())return new n(e);var t=new n(e);return t.isInvalidate()?this:this.cal(t,function(a,i){return a+i},function(a){return a})}},{key:"multi",value:function(e){var t=new n(e);return this.isInvalidate()||t.isInvalidate()?new n(NaN):this.cal(t,function(a,i){return a*i},function(a){return a*2})}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return this.nan}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toString()===(e==null?void 0:e.toString())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.isNaN()?NaN:Number(this.toString())}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":Jr("".concat(this.getMark()).concat(this.getIntegerStr(),".").concat(this.getDecimalStr())).fullStr:this.origin}}]),n}(),ap=function(){function n(r){if(kn(this,n),B(this,"origin",""),B(this,"number",void 0),B(this,"empty",void 0),Js(r)){this.empty=!0;return}this.origin=String(r),this.number=Number(r)}return Pn(n,[{key:"negate",value:function(){return new n(-this.toNumber())}},{key:"add",value:function(e){if(this.isInvalidate())return new n(e);var t=Number(e);if(Number.isNaN(t))return this;var a=this.number+t;if(a>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var i=Math.max(Qr(this.number),Qr(t));return new n(a.toFixed(i))}},{key:"multi",value:function(e){var t=Number(e);if(this.isInvalidate()||Number.isNaN(t))return new n(NaN);var a=this.number*t;if(a>Number.MAX_SAFE_INTEGER)return new n(Number.MAX_SAFE_INTEGER);if(a<Number.MIN_SAFE_INTEGER)return new n(Number.MIN_SAFE_INTEGER);var i=Math.max(Qr(this.number),Qr(t));return new n(a.toFixed(i))}},{key:"isEmpty",value:function(){return this.empty}},{key:"isNaN",value:function(){return Number.isNaN(this.number)}},{key:"isInvalidate",value:function(){return this.isEmpty()||this.isNaN()}},{key:"equals",value:function(e){return this.toNumber()===(e==null?void 0:e.toNumber())}},{key:"lessEquals",value:function(e){return this.add(e.negate().toString()).toNumber()<=0}},{key:"toNumber",value:function(){return this.number}},{key:"toString",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e?this.isInvalidate()?"":Da(this.number):this.origin}}]),n}();function sr(n){return bi()?new np(n):new ap(n)}function Ma(n,r,e){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(n==="")return"";var a=Jr(n),i=a.negativeStr,l=a.integerStr,o=a.decimalStr,s="".concat(r).concat(o),c="".concat(i).concat(l);if(e>=0){var u=Number(o[e]);if(u>=5&&!t){var h=sr(n).add("".concat(i,"0.").concat("0".repeat(e)).concat(10-u));return Ma(h.toString(),r,e,t)}return e===0?c:"".concat(c).concat(r).concat(o.padEnd(e,"0").slice(0,e))}return s===".0"?c:"".concat(c).concat(s)}function ip(n,r){return typeof Proxy<"u"&&n?new Proxy(n,{get:function(t,a){if(r[a])return r[a];var i=t[a];return typeof i=="function"?i.bind(t):i}}):n}function op(n,r){var e=d.useRef(null);function t(){try{var i=n.selectionStart,l=n.selectionEnd,o=n.value,s=o.substring(0,i),c=o.substring(l);e.current={start:i,end:l,value:o,beforeTxt:s,afterTxt:c}}catch{}}function a(){if(n&&e.current&&r)try{var i=n.value,l=e.current,o=l.beforeTxt,s=l.afterTxt,c=l.start,u=i.length;if(i.startsWith(o))u=o.length;else if(i.endsWith(s))u=i.length-e.current.afterTxt.length;else{var h=o[c-1],m=i.indexOf(h,c-1);m!==-1&&(u=m+1)}n.setSelectionRange(u,u)}catch(g){_t(!1,"Something warning of cursor restore. Please fire issue about this: ".concat(g.message))}}return[t,a]}var sp=function(){var r=d.useState(!1),e=be(r,2),t=e[0],a=e[1];return Lr(function(){a(sc())},[]),t},lp=200,cp=600;function up(n){var r=n.prefixCls,e=n.upNode,t=n.downNode,a=n.upDisabled,i=n.downDisabled,l=n.onStep,o=d.useRef(),s=d.useRef([]),c=d.useRef();c.current=l;var u=function(){clearTimeout(o.current)},h=function(C,M){C.preventDefault(),u(),c.current(M);function E(){c.current(M),o.current=setTimeout(E,lp)}o.current=setTimeout(E,cp)};d.useEffect(function(){return function(){u(),s.current.forEach(function(S){return wr.cancel(S)})}},[]);var m=sp();if(m)return null;var g="".concat(r,"-handler"),b=oe(g,"".concat(g,"-up"),B({},"".concat(g,"-up-disabled"),a)),y=oe(g,"".concat(g,"-down"),B({},"".concat(g,"-down-disabled"),i)),f=function(){return s.current.push(wr(u))},v={unselectable:"on",role:"button",onMouseUp:f,onMouseLeave:f};return d.createElement("div",{className:"".concat(g,"-wrap")},d.createElement("span",Fe({},v,{onMouseDown:function(C){h(C,!0)},"aria-label":"Increase Value","aria-disabled":a,className:b}),e||d.createElement("span",{unselectable:"on",className:"".concat(r,"-handler-up-inner")})),d.createElement("span",Fe({},v,{onMouseDown:function(C){h(C,!1)},"aria-label":"Decrease Value","aria-disabled":i,className:y}),t||d.createElement("span",{unselectable:"on",className:"".concat(r,"-handler-down-inner")})))}function go(n){var r=typeof n=="number"?Da(n):Jr(n).fullStr,e=r.includes(".");return e?Jr(r.replace(/(\d)\.(\d)/g,"$1$2.")).fullStr:n+"0"}const dp=function(){var n=d.useRef(0),r=function(){wr.cancel(n.current)};return d.useEffect(function(){return r},[]),function(e){r(),n.current=wr(function(){e()})}};var pp=["prefixCls","className","style","min","max","step","defaultValue","value","disabled","readOnly","upHandler","downHandler","keyboard","changeOnWheel","controls","classNames","stringMode","parser","formatter","precision","decimalSeparator","onChange","onInput","onPressEnter","onStep","changeOnBlur","domRef"],hp=["disabled","style","prefixCls","value","prefix","suffix","addonBefore","addonAfter","className","classNames"],mo=function(r,e){return r||e.isEmpty()?e.toString():e.toNumber()},fo=function(r){var e=sr(r);return e.isInvalidate()?null:e},gp=d.forwardRef(function(n,r){var e=n.prefixCls,t=n.className,a=n.style,i=n.min,l=n.max,o=n.step,s=o===void 0?1:o,c=n.defaultValue,u=n.value,h=n.disabled,m=n.readOnly,g=n.upHandler,b=n.downHandler,y=n.keyboard,f=n.changeOnWheel,v=f===void 0?!1:f,S=n.controls,C=S===void 0?!0:S;n.classNames;var M=n.stringMode,E=n.parser,w=n.formatter,k=n.precision,P=n.decimalSeparator,_=n.onChange,I=n.onInput,L=n.onPressEnter,T=n.onStep,j=n.changeOnBlur,$=j===void 0?!0:j,O=n.domRef,H=$t(n,pp),V="".concat(e,"-input"),Y=d.useRef(null),X=d.useState(!1),pe=be(X,2),W=pe[0],Q=pe[1],re=d.useRef(!1),ne=d.useRef(!1),U=d.useRef(!1),ie=d.useState(function(){return sr(u??c)}),ce=be(ie,2),G=ce[0],q=ce[1];function J(ae){u===void 0&&q(ae)}var le=d.useCallback(function(ae,se){if(!se)return k>=0?k:Math.max(Qr(ae),Qr(s))},[k,s]),Ue=d.useCallback(function(ae){var se=String(ae);if(E)return E(se);var Ie=se;return P&&(Ie=Ie.replace(P,".")),Ie.replace(/[^\w.-]+/g,"")},[E,P]),Qe=d.useRef(""),et=d.useCallback(function(ae,se){if(w)return w(ae,{userTyping:se,input:String(Qe.current)});var Ie=typeof ae=="number"?Da(ae):ae;if(!se){var ye=le(Ie,se);if(Vi(Ie)&&(P||ye>=0)){var Mt=P||".";Ie=Ma(Ie,Mt,ye)}}return Ie},[w,le,P]),Ce=d.useState(function(){var ae=c??u;return G.isInvalidate()&&["string","number"].includes(Sr(ae))?Number.isNaN(ae)?"":ae:et(G.toString(),!1)}),Je=be(Ce,2),Ee=Je[0],Ze=Je[1];Qe.current=Ee;function Me(ae,se){Ze(et(ae.isInvalidate()?ae.toString(!1):ae.toString(!se),se))}var ge=d.useMemo(function(){return fo(l)},[l,k]),we=d.useMemo(function(){return fo(i)},[i,k]),$e=d.useMemo(function(){return!ge||!G||G.isInvalidate()?!1:ge.lessEquals(G)},[ge,G]),Ge=d.useMemo(function(){return!we||!G||G.isInvalidate()?!1:G.lessEquals(we)},[we,G]),Ae=op(Y.current,W),ve=be(Ae,2),Be=ve[0],xe=ve[1],ue=function(se){return ge&&!se.lessEquals(ge)?ge:we&&!we.lessEquals(se)?we:null},Te=function(se){return!ue(se)},We=function(se,Ie){var ye=se,Mt=Te(ye)||ye.isEmpty();if(!ye.isEmpty()&&!Ie&&(ye=ue(ye)||ye,Mt=!0),!m&&!h&&Mt){var Dt=ye.toString(),Pt=le(Dt,Ie);return Pt>=0&&(ye=sr(Ma(Dt,".",Pt)),Te(ye)||(ye=sr(Ma(Dt,".",Pt,!0)))),ye.equals(G)||(J(ye),_==null||_(ye.isEmpty()?null:mo(M,ye)),u===void 0&&Me(ye,Ie)),ye}return G},at=dp(),kt=function ae(se){if(Be(),Qe.current=se,Ze(se),!ne.current){var Ie=Ue(se),ye=sr(Ie);ye.isNaN()||We(ye,!0)}I==null||I(se),at(function(){var Mt=se;E||(Mt=se.replace(/。/g,".")),Mt!==se&&ae(Mt)})},At=function(){ne.current=!0},Ot=function(){ne.current=!1,kt(Y.current.value)},lt=function(se){kt(se.target.value)},De=function(se){var Ie;if(!(se&&$e||!se&&Ge)){re.current=!1;var ye=sr(U.current?go(s):s);se||(ye=ye.negate());var Mt=(G||sr(0)).add(ye.toString()),Dt=We(Mt,!1);T==null||T(mo(M,Dt),{offset:U.current?go(s):s,type:se?"up":"down"}),(Ie=Y.current)===null||Ie===void 0||Ie.focus()}},gt=function(se){var Ie=sr(Ue(Ee)),ye;Ie.isNaN()?ye=We(G,se):ye=We(Ie,se),u!==void 0?Me(G,!1):ye.isNaN()||Me(ye,!1)},dr=function(){re.current=!0},Yt=function(se){var Ie=se.key,ye=se.shiftKey;re.current=!0,U.current=ye,Ie==="Enter"&&(ne.current||(re.current=!1),gt(!1),L==null||L(se)),y!==!1&&!ne.current&&["Up","ArrowUp","Down","ArrowDown"].includes(Ie)&&(De(Ie==="Up"||Ie==="ArrowUp"),se.preventDefault())},Nt=function(){re.current=!1,U.current=!1};d.useEffect(function(){if(v&&W){var ae=function(ye){De(ye.deltaY<0),ye.preventDefault()},se=Y.current;if(se)return se.addEventListener("wheel",ae,{passive:!1}),function(){return se.removeEventListener("wheel",ae)}}});var Et=function(){$&&gt(!1),Q(!1),re.current=!1};return Wa(function(){G.isInvalidate()||Me(G,!1)},[k,w]),Wa(function(){var ae=sr(u);q(ae);var se=sr(Ue(Ee));(!ae.equals(se)||!re.current||w)&&Me(ae,re.current)},[u]),Wa(function(){w&&xe()},[Ee]),d.createElement("div",{ref:O,className:oe(e,t,B(B(B(B(B({},"".concat(e,"-focused"),W),"".concat(e,"-disabled"),h),"".concat(e,"-readonly"),m),"".concat(e,"-not-a-number"),G.isNaN()),"".concat(e,"-out-of-range"),!G.isInvalidate()&&!Te(G))),style:a,onFocus:function(){Q(!0)},onBlur:Et,onKeyDown:Yt,onKeyUp:Nt,onCompositionStart:At,onCompositionEnd:Ot,onBeforeInput:dr},C&&d.createElement(up,{prefixCls:e,upNode:g,downNode:b,upDisabled:$e,downDisabled:Ge,onStep:De}),d.createElement("div",{className:"".concat(V,"-wrap")},d.createElement("input",Fe({autoComplete:"off",role:"spinbutton","aria-valuemin":i,"aria-valuemax":l,"aria-valuenow":G.isInvalidate()?null:G.toString(),step:s},H,{ref:_a(Y,r),className:V,value:Ee,onChange:lt,disabled:h,readOnly:m}))))}),mp=d.forwardRef(function(n,r){var e=n.disabled,t=n.style,a=n.prefixCls,i=a===void 0?"rc-input-number":a,l=n.value,o=n.prefix,s=n.suffix,c=n.addonBefore,u=n.addonAfter,h=n.className,m=n.classNames,g=$t(n,hp),b=d.useRef(null),y=d.useRef(null),f=d.useRef(null),v=function(C){f.current&&Oc(f.current,C)};return d.useImperativeHandle(r,function(){return ip(f.current,{nativeElement:b.current.nativeElement||y.current})}),d.createElement(Pc,{className:h,triggerFocus:v,prefixCls:i,value:l,disabled:e,style:t,prefix:o,suffix:s,addonAfter:u,addonBefore:c,classNames:m,components:{affixWrapper:"div",groupWrapper:"div",wrapper:"div",groupAddon:"div"},ref:b},d.createElement(gp,Fe({prefixCls:i,disabled:e,ref:f,domRef:y,className:m==null?void 0:m.input},g)))});const fp=n=>{var r;const e=(r=n.handleVisible)!==null&&r!==void 0?r:"auto";return Object.assign(Object.assign({},Ic(n)),{controlWidth:90,handleWidth:n.controlHeightSM-n.lineWidth*2,handleFontSize:n.fontSize/2,handleVisible:e,handleActiveBg:n.colorFillAlter,handleBg:n.colorBgContainer,filledHandleBg:new vi(n.colorFillSecondary).onBackground(n.colorBgContainer).toHexString(),handleHoverColor:n.colorPrimary,handleBorderColor:n.colorBorder,handleOpacity:e===!0?1:0})},vo=(n,r)=>{let{componentCls:e,borderRadiusSM:t,borderRadiusLG:a}=n;const i=r==="lg"?a:t;return{[`&-${r}`]:{[`${e}-handler-wrap`]:{borderStartEndRadius:i,borderEndEndRadius:i},[`${e}-handler-up`]:{borderStartEndRadius:i},[`${e}-handler-down`]:{borderEndEndRadius:i}}}},vp=n=>{const{componentCls:r,lineWidth:e,lineType:t,borderRadius:a,inputFontSizeSM:i,inputFontSizeLG:l,controlHeightLG:o,controlHeightSM:s,colorError:c,paddingInlineSM:u,paddingBlockSM:h,paddingBlockLG:m,paddingInlineLG:g,colorTextDescription:b,motionDurationMid:y,handleHoverColor:f,handleOpacity:v,paddingInline:S,paddingBlock:C,handleBg:M,handleActiveBg:E,colorTextDisabled:w,borderRadiusSM:k,borderRadiusLG:P,controlWidth:_,handleBorderColor:I,filledHandleBg:L,lineHeightLG:T,calc:j}=n;return[{[r]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},nr(n)),Ms(n)),{display:"inline-block",width:_,margin:0,padding:0,borderRadius:a}),_c(n,{[`${r}-handler-wrap`]:{background:M,[`${r}-handler-down`]:{borderBlockStart:`${te(e)} ${t} ${I}`}}})),Rc(n,{[`${r}-handler-wrap`]:{background:L,[`${r}-handler-down`]:{borderBlockStart:`${te(e)} ${t} ${I}`}},"&:focus-within":{[`${r}-handler-wrap`]:{background:M}}})),$c(n)),{"&-rtl":{direction:"rtl",[`${r}-input`]:{direction:"rtl"}},"&-lg":{padding:0,fontSize:l,lineHeight:T,borderRadius:P,[`input${r}-input`]:{height:j(o).sub(j(e).mul(2)).equal(),padding:`${te(m)} ${te(g)}`}},"&-sm":{padding:0,fontSize:i,borderRadius:k,[`input${r}-input`]:{height:j(s).sub(j(e).mul(2)).equal(),padding:`${te(h)} ${te(u)}`}},"&-out-of-range":{[`${r}-input-wrap`]:{input:{color:c}}},"&-group":Object.assign(Object.assign(Object.assign({},nr(n)),Lc(n)),{"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",textAlign:"start",verticalAlign:"top",[`${r}-affix-wrapper`]:{width:"100%"},"&-lg":{[`${r}-group-addon`]:{borderRadius:P,fontSize:n.fontSizeLG}},"&-sm":{[`${r}-group-addon`]:{borderRadius:k}}},Bc(n)),jc(n)),{[`&:not(${r}-compact-first-item):not(${r}-compact-last-item)${r}-compact-item`]:{[`${r}, ${r}-group-addon`]:{borderRadius:0}},[`&:not(${r}-compact-last-item)${r}-compact-first-item`]:{[`${r}, ${r}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${r}-compact-first-item)${r}-compact-last-item`]:{[`${r}, ${r}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})}),[`&-disabled ${r}-input`]:{cursor:"not-allowed"},[r]:{"&-input":Object.assign(Object.assign(Object.assign(Object.assign({},nr(n)),{width:"100%",padding:`${te(C)} ${te(S)}`,textAlign:"start",backgroundColor:"transparent",border:0,borderRadius:a,outline:0,transition:`all ${y} linear`,appearance:"textfield",fontSize:"inherit"}),Dc(n.colorTextPlaceholder)),{'&[type="number"]::-webkit-inner-spin-button, &[type="number"]::-webkit-outer-spin-button':{margin:0,webkitAppearance:"none",appearance:"none"}})},[`&:hover ${r}-handler-wrap, &-focused ${r}-handler-wrap`]:{width:n.handleWidth,opacity:1}})},{[r]:Object.assign(Object.assign(Object.assign({[`${r}-handler-wrap`]:{position:"absolute",insetBlockStart:0,insetInlineEnd:0,width:0,opacity:v,height:"100%",borderStartStartRadius:0,borderStartEndRadius:a,borderEndEndRadius:a,borderEndStartRadius:0,display:"flex",flexDirection:"column",alignItems:"stretch",transition:`all ${y}`,overflow:"hidden",[`${r}-handler`]:{display:"flex",alignItems:"center",justifyContent:"center",flex:"auto",height:"40%",[`
              ${r}-handler-up-inner,
              ${r}-handler-down-inner
            `]:{marginInlineEnd:0,fontSize:n.handleFontSize}}},[`${r}-handler`]:{height:"50%",overflow:"hidden",color:b,fontWeight:"bold",lineHeight:0,textAlign:"center",cursor:"pointer",borderInlineStart:`${te(e)} ${t} ${I}`,transition:`all ${y} linear`,"&:active":{background:E},"&:hover":{height:"60%",[`
              ${r}-handler-up-inner,
              ${r}-handler-down-inner
            `]:{color:f}},"&-up-inner, &-down-inner":Object.assign(Object.assign({},fs()),{color:b,transition:`all ${y} linear`,userSelect:"none"})},[`${r}-handler-up`]:{borderStartEndRadius:a},[`${r}-handler-down`]:{borderEndEndRadius:a}},vo(n,"lg")),vo(n,"sm")),{"&-disabled, &-readonly":{[`${r}-handler-wrap`]:{display:"none"},[`${r}-input`]:{color:"inherit"}},[`
          ${r}-handler-up-disabled,
          ${r}-handler-down-disabled
        `]:{cursor:"not-allowed"},[`
          ${r}-handler-up-disabled:hover &-handler-up-inner,
          ${r}-handler-down-disabled:hover &-handler-down-inner
        `]:{color:w}})}]},yp=n=>{const{componentCls:r,paddingBlock:e,paddingInline:t,inputAffixPadding:a,controlWidth:i,borderRadiusLG:l,borderRadiusSM:o,paddingInlineLG:s,paddingInlineSM:c,paddingBlockLG:u,paddingBlockSM:h,motionDurationMid:m}=n;return{[`${r}-affix-wrapper`]:Object.assign(Object.assign({[`input${r}-input`]:{padding:`${te(e)} 0`}},Ms(n)),{position:"relative",display:"inline-flex",alignItems:"center",width:i,padding:0,paddingInlineStart:t,"&-lg":{borderRadius:l,paddingInlineStart:s,[`input${r}-input`]:{padding:`${te(u)} 0`}},"&-sm":{borderRadius:o,paddingInlineStart:c,[`input${r}-input`]:{padding:`${te(h)} 0`}},[`&:not(${r}-disabled):hover`]:{zIndex:1},"&-focused, &:focus":{zIndex:1},[`&-disabled > ${r}-disabled`]:{background:"transparent"},[`> div${r}`]:{width:"100%",border:"none",outline:"none",[`&${r}-focused`]:{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[`${r}-handler-wrap`]:{zIndex:2},[r]:{position:"static",color:"inherit","&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center",pointerEvents:"none"},"&-prefix":{marginInlineEnd:a},"&-suffix":{insetBlockStart:0,insetInlineEnd:0,height:"100%",marginInlineEnd:t,marginInlineStart:a,transition:`margin ${m}`}},[`&:hover ${r}-handler-wrap, &-focused ${r}-handler-wrap`]:{width:n.handleWidth,opacity:1},[`&:hover ${r}-suffix`]:{marginInlineEnd:n.calc(n.handleWidth).add(t).equal()}})}},bp=br("InputNumber",n=>{const r=ur(n,Tc(n));return[vp(r),yp(r),ys(r)]},fp,{unitless:{handleOpacity:!0}});var Sp=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const el=d.forwardRef((n,r)=>{const{getPrefixCls:e,direction:t}=d.useContext(ar),a=d.useRef(null);d.useImperativeHandle(r,()=>a.current);const{className:i,rootClassName:l,size:o,disabled:s,prefixCls:c,addonBefore:u,addonAfter:h,prefix:m,suffix:g,bordered:b,readOnly:y,status:f,controls:v,variant:S}=n,C=Sp(n,["className","rootClassName","size","disabled","prefixCls","addonBefore","addonAfter","prefix","suffix","bordered","readOnly","status","controls","variant"]),M=e("input-number",c),E=An(M),[w,k,P]=bp(M,E),{compactSize:_,compactItemClassnames:I}=Ti(M,t);let L=d.createElement(rp,{className:`${M}-handler-up-inner`}),T=d.createElement(lc,{className:`${M}-handler-down-inner`});const j=typeof v=="boolean"?v:void 0;typeof v=="object"&&(L=typeof v.upIcon>"u"?L:d.createElement("span",{className:`${M}-handler-up-inner`},v.upIcon),T=typeof v.downIcon>"u"?T:d.createElement("span",{className:`${M}-handler-down-inner`},v.downIcon));const{hasFeedback:$,status:O,isFormItemInput:H,feedbackIcon:V}=d.useContext(Ia),Y=xs(O,f),X=qn(G=>{var q;return(q=o??_)!==null&&q!==void 0?q:G}),pe=d.useContext(Yn),W=s??pe,[Q,re]=As("inputNumber",S,b),ne=$&&d.createElement(d.Fragment,null,V),U=oe({[`${M}-lg`]:X==="large",[`${M}-sm`]:X==="small",[`${M}-rtl`]:t==="rtl",[`${M}-in-form-item`]:H},k),ie=`${M}-group`,ce=d.createElement(mp,Object.assign({ref:a,disabled:W,className:oe(P,E,i,l,I),upHandler:L,downHandler:T,prefixCls:M,readOnly:y,controls:j,prefix:m,suffix:ne||g,addonBefore:u&&d.createElement(yi,{form:!0,space:!0},u),addonAfter:h&&d.createElement(yi,{form:!0,space:!0},h),classNames:{input:U,variant:oe({[`${M}-${Q}`]:re},Aa(M,Y,$)),affixWrapper:oe({[`${M}-affix-wrapper-sm`]:X==="small",[`${M}-affix-wrapper-lg`]:X==="large",[`${M}-affix-wrapper-rtl`]:t==="rtl"},k),wrapper:oe({[`${ie}-rtl`]:t==="rtl"},k),groupWrapper:oe({[`${M}-group-wrapper-sm`]:X==="small",[`${M}-group-wrapper-lg`]:X==="large",[`${M}-group-wrapper-rtl`]:t==="rtl",[`${M}-group-wrapper-${Q}`]:re},Aa(`${M}-group-wrapper`,Y,$),k)}},C));return w(ce)}),Qn=el,Cp=n=>d.createElement(cc,{theme:{components:{InputNumber:{handleVisible:!0}}}},d.createElement(el,Object.assign({},n)));Qn._InternalPanelDoNotUseOrYouWillBeFired=Cp;const en=n=>{let{prefixCls:r,min:e=0,max:t=100,value:a,onChange:i,className:l,formatter:o}=n;const s=`${r}-steppers`,[c,u]=d.useState(a);return d.useEffect(()=>{Number.isNaN(a)||u(a)},[a]),z.createElement(Qn,{className:oe(s,l),min:e,max:t,value:c,formatter:o,size:"small",onChange:h=>{a||u(h||0),i==null||i(h)}})},Ep=n=>{let{prefixCls:r,value:e,onChange:t}=n;const a=`${r}-alpha-input`,[i,l]=d.useState(Rt(e||"#000"));d.useEffect(()=>{e&&l(e)},[e]);const o=s=>{const c=i.toHsb();c.a=(s||0)/100;const u=Rt(c);e||l(u),t==null||t(u)};return z.createElement(en,{value:zi(i),prefixCls:r,formatter:s=>`${s}%`,className:a,onChange:o})},Mp=/(^#[\da-f]{6}$)|(^#[\da-f]{8}$)/i,Ap=n=>Mp.test(`#${n}`),xp=n=>{let{prefixCls:r,value:e,onChange:t}=n;const a=`${r}-hex-input`,[i,l]=d.useState(()=>e?Ln(e.toHexString()):void 0);d.useEffect(()=>{e&&l(Ln(e.toHexString()))},[e]);const o=s=>{const c=s.target.value;l(Ln(c)),Ap(Ln(c,!0))&&(t==null||t(Rt(c)))};return z.createElement(Ra,{className:a,value:i,prefix:"#",onChange:o,size:"small"})},Np=n=>{let{prefixCls:r,value:e,onChange:t}=n;const a=`${r}-hsb-input`,[i,l]=d.useState(Rt(e||"#000"));d.useEffect(()=>{e&&l(e)},[e]);const o=(s,c)=>{const u=i.toHsb();u[c]=c==="h"?s:(s||0)/100;const h=Rt(u);e||l(h),t==null||t(h)};return z.createElement("div",{className:a},z.createElement(en,{max:360,min:0,value:Number(i.toHsb().h),prefixCls:r,className:a,formatter:s=>Ca(s||0).toString(),onChange:s=>o(Number(s),"h")}),z.createElement(en,{max:100,min:0,value:Number(i.toHsb().s)*100,prefixCls:r,className:a,formatter:s=>`${Ca(s||0)}%`,onChange:s=>o(Number(s),"s")}),z.createElement(en,{max:100,min:0,value:Number(i.toHsb().b)*100,prefixCls:r,className:a,formatter:s=>`${Ca(s||0)}%`,onChange:s=>o(Number(s),"b")}))},wp=n=>{let{prefixCls:r,value:e,onChange:t}=n;const a=`${r}-rgb-input`,[i,l]=d.useState(Rt(e||"#000"));d.useEffect(()=>{e&&l(e)},[e]);const o=(s,c)=>{const u=i.toRgb();u[c]=s||0;const h=Rt(u);e||l(h),t==null||t(h)};return z.createElement("div",{className:a},z.createElement(en,{max:255,min:0,value:Number(i.toRgb().r),prefixCls:r,className:a,onChange:s=>o(Number(s),"r")}),z.createElement(en,{max:255,min:0,value:Number(i.toRgb().g),prefixCls:r,className:a,onChange:s=>o(Number(s),"g")}),z.createElement(en,{max:255,min:0,value:Number(i.toRgb().b),prefixCls:r,className:a,onChange:s=>o(Number(s),"b")}))},kp=[$r.hex,$r.hsb,$r.rgb].map(n=>({value:n,label:n.toLocaleUpperCase()})),Pp=n=>{const{prefixCls:r,format:e,value:t,disabledAlpha:a,onFormatChange:i,onChange:l}=n,[o,s]=Wt($r.hex,{value:e,onChange:i}),c=`${r}-input`,u=m=>{s(m)},h=d.useMemo(()=>{const m={value:t,prefixCls:r,onChange:l};switch(o){case $r.hsb:return z.createElement(Np,Object.assign({},m));case $r.rgb:return z.createElement(wp,Object.assign({},m));default:return z.createElement(xp,Object.assign({},m))}},[o,r,t,l]);return z.createElement("div",{className:`${c}-container`},z.createElement(Ri,{value:o,variant:"borderless",getPopupContainer:m=>m,popupMatchSelectWidth:68,placement:"bottomRight",onChange:u,className:`${r}-format-select`,size:"small",options:kp}),z.createElement("div",{className:c},h),!a&&z.createElement(Ep,{prefixCls:r,value:t,onChange:l}))};function Si(n,r,e){return(n-r)/(e-r)}function Ki(n,r,e,t){var a=Si(r,e,t),i={};switch(n){case"rtl":i.right="".concat(a*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(a*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(a*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(a*100,"%"),i.transform="translateX(-50%)";break}return i}function Zr(n,r){return Array.isArray(n)?n[r]:n}var an=d.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0,styles:{},classNames:{}}),tl=d.createContext({}),Op=["prefixCls","value","valueIndex","onStartMove","onDelete","style","render","dragging","draggingDelete","onOffsetChange","onChangeComplete","onFocus","onMouseEnter"],yo=d.forwardRef(function(n,r){var e=n.prefixCls,t=n.value,a=n.valueIndex,i=n.onStartMove,l=n.onDelete,o=n.style,s=n.render,c=n.dragging,u=n.draggingDelete,h=n.onOffsetChange,m=n.onChangeComplete,g=n.onFocus,b=n.onMouseEnter,y=$t(n,Op),f=d.useContext(an),v=f.min,S=f.max,C=f.direction,M=f.disabled,E=f.keyboard,w=f.range,k=f.tabIndex,P=f.ariaLabelForHandle,_=f.ariaLabelledByForHandle,I=f.ariaRequired,L=f.ariaValueTextFormatterForHandle,T=f.styles,j=f.classNames,$="".concat(e,"-handle"),O=function(U){M||i(U,a)},H=function(U){g==null||g(U,a)},V=function(U){b(U,a)},Y=function(U){if(!M&&E){var ie=null;switch(U.which||U.keyCode){case qe.LEFT:ie=C==="ltr"||C==="btt"?-1:1;break;case qe.RIGHT:ie=C==="ltr"||C==="btt"?1:-1;break;case qe.UP:ie=C!=="ttb"?1:-1;break;case qe.DOWN:ie=C!=="ttb"?-1:1;break;case qe.HOME:ie="min";break;case qe.END:ie="max";break;case qe.PAGE_UP:ie=2;break;case qe.PAGE_DOWN:ie=-2;break;case qe.BACKSPACE:case qe.DELETE:l(a);break}ie!==null&&(U.preventDefault(),h(ie,a))}},X=function(U){switch(U.which||U.keyCode){case qe.LEFT:case qe.RIGHT:case qe.UP:case qe.DOWN:case qe.HOME:case qe.END:case qe.PAGE_UP:case qe.PAGE_DOWN:m==null||m();break}},pe=Ki(C,t,v,S),W={};if(a!==null){var Q;W={tabIndex:M?null:Zr(k,a),role:"slider","aria-valuemin":v,"aria-valuemax":S,"aria-valuenow":t,"aria-disabled":M,"aria-label":Zr(P,a),"aria-labelledby":Zr(_,a),"aria-required":Zr(I,a),"aria-valuetext":(Q=Zr(L,a))===null||Q===void 0?void 0:Q(t),"aria-orientation":C==="ltr"||C==="rtl"?"horizontal":"vertical",onMouseDown:O,onTouchStart:O,onFocus:H,onMouseEnter:V,onKeyDown:Y,onKeyUp:X}}var re=d.createElement("div",Fe({ref:r,className:oe($,B(B(B({},"".concat($,"-").concat(a+1),a!==null&&w),"".concat($,"-dragging"),c),"".concat($,"-dragging-delete"),u),j.handle),style:de(de(de({},pe),o),T.handle)},W,y));return s&&(re=s(re,{index:a,prefixCls:e,value:t,dragging:c,draggingDelete:u})),re}),Ip=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","activeHandleRender","draggingIndex","draggingDelete","onFocus"],Tp=d.forwardRef(function(n,r){var e=n.prefixCls,t=n.style,a=n.onStartMove,i=n.onOffsetChange,l=n.values,o=n.handleRender,s=n.activeHandleRender,c=n.draggingIndex,u=n.draggingDelete,h=n.onFocus,m=$t(n,Ip),g=d.useRef({}),b=d.useState(!1),y=be(b,2),f=y[0],v=y[1],S=d.useState(-1),C=be(S,2),M=C[0],E=C[1],w=function(L){E(L),v(!0)},k=function(L,T){w(T),h==null||h(L)},P=function(L,T){w(T)};d.useImperativeHandle(r,function(){return{focus:function(L){var T;(T=g.current[L])===null||T===void 0||T.focus()},hideHelp:function(){uc.flushSync(function(){v(!1)})}}});var _=de({prefixCls:e,onStartMove:a,onOffsetChange:i,render:o,onFocus:k,onMouseEnter:P},m);return d.createElement(d.Fragment,null,l.map(function(I,L){var T=c===L;return d.createElement(yo,Fe({ref:function($){$?g.current[L]=$:delete g.current[L]},dragging:T,draggingDelete:T&&u,style:Zr(t,L),key:L,value:I,valueIndex:L},_))}),s&&f&&d.createElement(yo,Fe({key:"a11y"},_,{value:l[M],valueIndex:null,dragging:c!==-1,draggingDelete:u,render:s,style:{pointerEvents:"none"},tabIndex:null,"aria-hidden":!0})))}),_p=function(r){var e=r.prefixCls,t=r.style,a=r.children,i=r.value,l=r.onClick,o=d.useContext(an),s=o.min,c=o.max,u=o.direction,h=o.includedStart,m=o.includedEnd,g=o.included,b="".concat(e,"-text"),y=Ki(u,i,s,c);return d.createElement("span",{className:oe(b,B({},"".concat(b,"-active"),g&&h<=i&&i<=m)),style:de(de({},y),t),onMouseDown:function(v){v.stopPropagation()},onClick:function(){l(i)}},a)},Rp=function(r){var e=r.prefixCls,t=r.marks,a=r.onClick,i="".concat(e,"-mark");return t.length?d.createElement("div",{className:i},t.map(function(l){var o=l.value,s=l.style,c=l.label;return d.createElement(_p,{key:o,prefixCls:i,style:s,value:o,onClick:a},c)})):null},$p=function(r){var e=r.prefixCls,t=r.value,a=r.style,i=r.activeStyle,l=d.useContext(an),o=l.min,s=l.max,c=l.direction,u=l.included,h=l.includedStart,m=l.includedEnd,g="".concat(e,"-dot"),b=u&&h<=t&&t<=m,y=de(de({},Ki(c,t,o,s)),typeof a=="function"?a(t):a);return b&&(y=de(de({},y),typeof i=="function"?i(t):i)),d.createElement("span",{className:oe(g,B({},"".concat(g,"-active"),b)),style:y})},Dp=function(r){var e=r.prefixCls,t=r.marks,a=r.dots,i=r.style,l=r.activeStyle,o=d.useContext(an),s=o.min,c=o.max,u=o.step,h=d.useMemo(function(){var m=new Set;if(t.forEach(function(b){m.add(b.value)}),a&&u!==null)for(var g=s;g<=c;)m.add(g),g+=u;return Array.from(m)},[s,c,u,a,t]);return d.createElement("div",{className:"".concat(e,"-step")},h.map(function(m){return d.createElement($p,{prefixCls:e,key:m,value:m,style:i,activeStyle:l})}))},bo=function(r){var e=r.prefixCls,t=r.style,a=r.start,i=r.end,l=r.index,o=r.onStartMove,s=r.replaceCls,c=d.useContext(an),u=c.direction,h=c.min,m=c.max,g=c.disabled,b=c.range,y=c.classNames,f="".concat(e,"-track"),v=Si(a,h,m),S=Si(i,h,m),C=function(k){!g&&o&&o(k,-1)},M={};switch(u){case"rtl":M.right="".concat(v*100,"%"),M.width="".concat(S*100-v*100,"%");break;case"btt":M.bottom="".concat(v*100,"%"),M.height="".concat(S*100-v*100,"%");break;case"ttb":M.top="".concat(v*100,"%"),M.height="".concat(S*100-v*100,"%");break;default:M.left="".concat(v*100,"%"),M.width="".concat(S*100-v*100,"%")}var E=s||oe(f,B(B({},"".concat(f,"-").concat(l+1),l!==null&&b),"".concat(e,"-track-draggable"),o),y.track);return d.createElement("div",{className:E,style:de(de({},M),t),onMouseDown:C,onTouchStart:C})},Lp=function(r){var e=r.prefixCls,t=r.style,a=r.values,i=r.startPoint,l=r.onStartMove,o=d.useContext(an),s=o.included,c=o.range,u=o.min,h=o.styles,m=o.classNames,g=d.useMemo(function(){if(!c){if(a.length===0)return[];var y=i??u,f=a[0];return[{start:Math.min(y,f),end:Math.max(y,f)}]}for(var v=[],S=0;S<a.length-1;S+=1)v.push({start:a[S],end:a[S+1]});return v},[a,c,i,u]);if(!s)return null;var b=g!=null&&g.length&&(m.tracks||h.tracks)?d.createElement(bo,{index:null,prefixCls:e,start:g[0].start,end:g[g.length-1].end,replaceCls:oe(m.tracks,"".concat(e,"-tracks")),style:h.tracks}):null;return d.createElement(d.Fragment,null,b,g.map(function(y,f){var v=y.start,S=y.end;return d.createElement(bo,{index:f,prefixCls:e,style:de(de({},Zr(t,f)),h.track),start:v,end:S,key:f,onStartMove:l})}))},Bp=130;function So(n){var r="targetTouches"in n?n.targetTouches[0]:n;return{pageX:r.pageX,pageY:r.pageY}}function jp(n,r,e,t,a,i,l,o,s,c,u){var h=d.useState(null),m=be(h,2),g=m[0],b=m[1],y=d.useState(-1),f=be(y,2),v=f[0],S=f[1],C=d.useState(!1),M=be(C,2),E=M[0],w=M[1],k=d.useState(e),P=be(k,2),_=P[0],I=P[1],L=d.useState(e),T=be(L,2),j=T[0],$=T[1],O=d.useRef(null),H=d.useRef(null),V=d.useRef(null),Y=d.useContext(tl),X=Y.onDragStart,pe=Y.onDragChange;Lr(function(){v===-1&&I(e)},[e,v]),d.useEffect(function(){return function(){document.removeEventListener("mousemove",O.current),document.removeEventListener("mouseup",H.current),V.current&&(V.current.removeEventListener("touchmove",O.current),V.current.removeEventListener("touchend",H.current))}},[]);var W=function(ie,ce,G){ce!==void 0&&b(ce),I(ie);var q=ie;G&&(q=ie.filter(function(J,le){return le!==v})),l(q),pe&&pe({rawValues:ie,deleteIndex:G?v:-1,draggingIndex:v,draggingValue:ce})},Q=mr(function(U,ie,ce){if(U===-1){var G=j[0],q=j[j.length-1],J=t-G,le=a-q,Ue=ie*(a-t);Ue=Math.max(Ue,J),Ue=Math.min(Ue,le);var Qe=i(G+Ue);Ue=Qe-G;var et=j.map(function(Ze){return Ze+Ue});W(et)}else{var Ce=(a-t)*ie,Je=Xe(_);Je[U]=j[U];var Ee=s(Je,Ce,U,"dist");W(Ee.values,Ee.value,ce)}}),re=function(ie,ce,G){ie.stopPropagation();var q=G||e,J=q[ce];S(ce),b(J),$(q),I(q),w(!1);var le=So(ie),Ue=le.pageX,Qe=le.pageY,et=!1;X&&X({rawValues:q,draggingIndex:ce,draggingValue:J});var Ce=function(Ze){Ze.preventDefault();var Me=So(Ze),ge=Me.pageX,we=Me.pageY,$e=ge-Ue,Ge=we-Qe,Ae=n.current.getBoundingClientRect(),ve=Ae.width,Be=Ae.height,xe,ue;switch(r){case"btt":xe=-Ge/Be,ue=$e;break;case"ttb":xe=Ge/Be,ue=$e;break;case"rtl":xe=-$e/ve,ue=Ge;break;default:xe=$e/ve,ue=Ge}et=c?Math.abs(ue)>Bp&&u<_.length:!1,w(et),Q(ce,xe,et)},Je=function Ee(Ze){Ze.preventDefault(),document.removeEventListener("mouseup",Ee),document.removeEventListener("mousemove",Ce),V.current&&(V.current.removeEventListener("touchmove",O.current),V.current.removeEventListener("touchend",H.current)),O.current=null,H.current=null,V.current=null,o(et),S(-1),w(!1)};document.addEventListener("mouseup",Je),document.addEventListener("mousemove",Ce),ie.currentTarget.addEventListener("touchend",Je),ie.currentTarget.addEventListener("touchmove",Ce),O.current=Ce,H.current=Je,V.current=ie.currentTarget},ne=d.useMemo(function(){var U=Xe(e).sort(function(J,le){return J-le}),ie=Xe(_).sort(function(J,le){return J-le}),ce={};ie.forEach(function(J){ce[J]=(ce[J]||0)+1}),U.forEach(function(J){ce[J]=(ce[J]||0)-1});var G=c?1:0,q=Object.values(ce).reduce(function(J,le){return J+Math.abs(le)},0);return q<=G?_:e},[e,_,c]);return[v,g,E,ne,re]}function zp(n,r,e,t,a,i){var l=d.useCallback(function(g){return Math.max(n,Math.min(r,g))},[n,r]),o=d.useCallback(function(g){if(e!==null){var b=n+Math.round((l(g)-n)/e)*e,y=function(C){return(String(C).split(".")[1]||"").length},f=Math.max(y(e),y(r),y(n)),v=Number(b.toFixed(f));return n<=v&&v<=r?v:null}return null},[e,n,r,l]),s=d.useCallback(function(g){var b=l(g),y=t.map(function(S){return S.value});e!==null&&y.push(o(g)),y.push(n,r);var f=y[0],v=r-n;return y.forEach(function(S){var C=Math.abs(b-S);C<=v&&(f=S,v=C)}),f},[n,r,t,e,l,o]),c=function g(b,y,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof y=="number"){var S,C=b[f],M=C+y,E=[];t.forEach(function(I){E.push(I.value)}),E.push(n,r),E.push(o(C));var w=y>0?1:-1;v==="unit"?E.push(o(C+w*e)):E.push(o(M)),E=E.filter(function(I){return I!==null}).filter(function(I){return y<0?I<=C:I>=C}),v==="unit"&&(E=E.filter(function(I){return I!==C}));var k=v==="unit"?C:M;S=E[0];var P=Math.abs(S-k);if(E.forEach(function(I){var L=Math.abs(I-k);L<P&&(S=I,P=L)}),S===void 0)return y<0?n:r;if(v==="dist")return S;if(Math.abs(y)>1){var _=Xe(b);return _[f]=S,g(_,y-w,f,v)}return S}else{if(y==="min")return n;if(y==="max")return r}},u=function(b,y,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",S=b[f],C=c(b,y,f,v);return{value:C,changed:C!==S}},h=function(b){return i===null&&b===0||typeof i=="number"&&b<i},m=function(b,y,f){var v=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",S=b.map(s),C=S[f],M=c(S,y,f,v);if(S[f]=M,a===!1){var E=i||0;f>0&&S[f-1]!==C&&(S[f]=Math.max(S[f],S[f-1]+E)),f<S.length-1&&S[f+1]!==C&&(S[f]=Math.min(S[f],S[f+1]-E))}else if(typeof i=="number"||i===null){for(var w=f+1;w<S.length;w+=1)for(var k=!0;h(S[w]-S[w-1])&&k;){var P=u(S,1,w);S[w]=P.value,k=P.changed}for(var _=f;_>0;_-=1)for(var I=!0;h(S[_]-S[_-1])&&I;){var L=u(S,-1,_-1);S[_-1]=L.value,I=L.changed}for(var T=S.length-1;T>0;T-=1)for(var j=!0;h(S[T]-S[T-1])&&j;){var $=u(S,-1,T-1);S[T-1]=$.value,j=$.changed}for(var O=0;O<S.length-1;O+=1)for(var H=!0;h(S[O+1]-S[O])&&H;){var V=u(S,1,O+1);S[O+1]=V.value,H=V.changed}}return{value:S[f],values:S}};return[s,m]}function Hp(n){return d.useMemo(function(){if(n===!0||!n)return[!!n,!1,!1,0];var r=n.editable,e=n.draggableTrack,t=n.minCount,a=n.maxCount;return[!0,r,!r&&e,t||0,a]},[n])}var Vp=d.forwardRef(function(n,r){var e=n.prefixCls,t=e===void 0?"rc-slider":e,a=n.className,i=n.style,l=n.classNames,o=n.styles,s=n.id,c=n.disabled,u=c===void 0?!1:c,h=n.keyboard,m=h===void 0?!0:h,g=n.autoFocus,b=n.onFocus,y=n.onBlur,f=n.min,v=f===void 0?0:f,S=n.max,C=S===void 0?100:S,M=n.step,E=M===void 0?1:M,w=n.value,k=n.defaultValue,P=n.range,_=n.count,I=n.onChange,L=n.onBeforeChange,T=n.onAfterChange,j=n.onChangeComplete,$=n.allowCross,O=$===void 0?!0:$,H=n.pushable,V=H===void 0?!1:H,Y=n.reverse,X=n.vertical,pe=n.included,W=pe===void 0?!0:pe,Q=n.startPoint,re=n.trackStyle,ne=n.handleStyle,U=n.railStyle,ie=n.dotStyle,ce=n.activeDotStyle,G=n.marks,q=n.dots,J=n.handleRender,le=n.activeHandleRender,Ue=n.track,Qe=n.tabIndex,et=Qe===void 0?0:Qe,Ce=n.ariaLabelForHandle,Je=n.ariaLabelledByForHandle,Ee=n.ariaRequired,Ze=n.ariaValueTextFormatterForHandle,Me=d.useRef(null),ge=d.useRef(null),we=d.useMemo(function(){return X?Y?"ttb":"btt":Y?"rtl":"ltr"},[Y,X]),$e=Hp(P),Ge=be($e,5),Ae=Ge[0],ve=Ge[1],Be=Ge[2],xe=Ge[3],ue=Ge[4],Te=d.useMemo(function(){return isFinite(v)?v:0},[v]),We=d.useMemo(function(){return isFinite(C)?C:100},[C]),at=d.useMemo(function(){return E!==null&&E<=0?1:E},[E]),kt=d.useMemo(function(){return typeof V=="boolean"?V?at:!1:V>=0?V:!1},[V,at]),At=d.useMemo(function(){return Object.keys(G||{}).map(function(he){var N=G[he],R={value:Number(he)};return N&&Sr(N)==="object"&&!d.isValidElement(N)&&("label"in N||"style"in N)?(R.style=N.style,R.label=N.label):R.label=N,R}).filter(function(he){var N=he.label;return N||typeof N=="number"}).sort(function(he,N){return he.value-N.value})},[G]),Ot=zp(Te,We,at,At,O,kt),lt=be(Ot,2),De=lt[0],gt=lt[1],dr=Wt(k,{value:w}),Yt=be(dr,2),Nt=Yt[0],Et=Yt[1],ae=d.useMemo(function(){var he=Nt==null?[]:Array.isArray(Nt)?Nt:[Nt],N=be(he,1),R=N[0],F=R===void 0?Te:R,Z=Nt===null?[]:[F];if(Ae){if(Z=Xe(he),_||Nt===void 0){var Ne=_>=0?_+1:2;for(Z=Z.slice(0,Ne);Z.length<Ne;){var me;Z.push((me=Z[Z.length-1])!==null&&me!==void 0?me:Te)}}Z.sort(function(Le,Pe){return Le-Pe})}return Z.forEach(function(Le,Pe){Z[Pe]=De(Le)}),Z},[Nt,Ae,Te,_,De]),se=function(N){return Ae?N:N[0]},Ie=mr(function(he){var N=Xe(he).sort(function(R,F){return R-F});I&&!dc(N,ae,!0)&&I(se(N)),Et(N)}),ye=mr(function(he){he&&Me.current.hideHelp();var N=se(ae);T==null||T(N),_t(!T,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),j==null||j(N)}),Mt=function(N){if(!(u||!ve||ae.length<=xe)){var R=Xe(ae);R.splice(N,1),L==null||L(se(R)),Ie(R);var F=Math.max(0,N-1);Me.current.hideHelp(),Me.current.focus(F)}},Dt=jp(ge,we,ae,Te,We,De,Ie,ye,gt,ve,xe),Pt=be(Dt,5),Hr=Pt[0],Vr=Pt[1],pr=Pt[2],hr=Pt[3],Kr=Pt[4],Fr=function(N,R){if(!u){var F=Xe(ae),Z=0,Ne=0,me=We-Te;ae.forEach(function(ot,Lt){var qt=Math.abs(N-ot);qt<=me&&(me=qt,Z=Lt),ot<N&&(Ne=Lt)});var Le=Z;ve&&me!==0&&(!ue||ae.length<ue)?(F.splice(Ne+1,0,N),Le=Ne+1):F[Z]=N,Ae&&!ae.length&&_===void 0&&F.push(N);var Pe=se(F);if(L==null||L(Pe),Ie(F),R){var it,pt;(it=document.activeElement)===null||it===void 0||(pt=it.blur)===null||pt===void 0||pt.call(it),Me.current.focus(Le),Kr(R,Le,F)}else T==null||T(Pe),_t(!T,"[rc-slider] `onAfterChange` is deprecated. Please use `onChangeComplete` instead."),j==null||j(Pe)}},Or=function(N){N.preventDefault();var R=ge.current.getBoundingClientRect(),F=R.width,Z=R.height,Ne=R.left,me=R.top,Le=R.bottom,Pe=R.right,it=N.clientX,pt=N.clientY,ot;switch(we){case"btt":ot=(Le-pt)/Z;break;case"ttb":ot=(pt-me)/Z;break;case"rtl":ot=(Pe-it)/F;break;default:ot=(it-Ne)/F}var Lt=Te+ot*(We-Te);Fr(De(Lt),N)},gr=d.useState(null),Cr=be(gr,2),Tt=Cr[0],sn=Cr[1],ir=function(N,R){if(!u){var F=gt(ae,N,R);L==null||L(se(ae)),Ie(F.values),sn(F.value)}};d.useEffect(function(){if(Tt!==null){var he=ae.indexOf(Tt);he>=0&&Me.current.focus(he)}sn(null)},[Tt]);var ln=d.useMemo(function(){return Be&&at===null?!1:Be},[Be,at]),cn=mr(function(he,N){Kr(he,N),L==null||L(se(ae))}),_e=Hr!==-1;d.useEffect(function(){if(!_e){var he=ae.lastIndexOf(Vr);Me.current.focus(he)}},[_e]);var ke=d.useMemo(function(){return Xe(hr).sort(function(he,N){return he-N})},[hr]),Ye=d.useMemo(function(){return Ae?[ke[0],ke[ke.length-1]]:[Te,ke[0]]},[ke,Ae,Te]),tt=be(Ye,2),wt=tt[0],dt=tt[1];d.useImperativeHandle(r,function(){return{focus:function(){Me.current.focus(0)},blur:function(){var N,R=document,F=R.activeElement;(N=ge.current)!==null&&N!==void 0&&N.contains(F)&&(F==null||F.blur())}}}),d.useEffect(function(){g&&Me.current.focus(0)},[]);var rt=d.useMemo(function(){return{min:Te,max:We,direction:we,disabled:u,keyboard:m,step:at,included:W,includedStart:wt,includedEnd:dt,range:Ae,tabIndex:et,ariaLabelForHandle:Ce,ariaLabelledByForHandle:Je,ariaRequired:Ee,ariaValueTextFormatterForHandle:Ze,styles:o||{},classNames:l||{}}},[Te,We,we,u,m,at,W,wt,dt,Ae,et,Ce,Je,Ee,Ze,o,l]);return d.createElement(an.Provider,{value:rt},d.createElement("div",{ref:ge,className:oe(t,a,B(B(B(B({},"".concat(t,"-disabled"),u),"".concat(t,"-vertical"),X),"".concat(t,"-horizontal"),!X),"".concat(t,"-with-marks"),At.length)),style:i,onMouseDown:Or,id:s},d.createElement("div",{className:oe("".concat(t,"-rail"),l==null?void 0:l.rail),style:de(de({},U),o==null?void 0:o.rail)}),Ue!==!1&&d.createElement(Lp,{prefixCls:t,style:re,values:ae,startPoint:Q,onStartMove:ln?cn:void 0}),d.createElement(Dp,{prefixCls:t,marks:At,dots:q,style:ie,activeStyle:ce}),d.createElement(Tp,{ref:Me,prefixCls:t,style:ne,values:hr,draggingIndex:Hr,draggingDelete:pr,onStartMove:cn,onOffsetChange:ir,onFocus:b,onBlur:y,handleRender:J,activeHandleRender:le,onChangeComplete:ye,onDelete:ve?Mt:void 0}),d.createElement(Rp,{prefixCls:t,marks:At,onClick:Fr})))});const Co=d.forwardRef((n,r)=>{const{open:e,draggingDelete:t}=n,a=d.useRef(null),i=e&&!t,l=d.useRef(null);function o(){wr.cancel(l.current),l.current=null}function s(){l.current=wr(()=>{var c;(c=a.current)===null||c===void 0||c.forceAlign(),l.current=null})}return d.useEffect(()=>(i?s():o(),o),[i,n.title]),d.createElement(hs,Object.assign({ref:_a(a,r)},n,{open:i}))}),Kp=n=>{const{componentCls:r,antCls:e,controlSize:t,dotSize:a,marginFull:i,marginPart:l,colorFillContentHover:o,handleColorDisabled:s,calc:c,handleSize:u,handleSizeHover:h,handleActiveColor:m,handleActiveOutlineColor:g,handleLineWidth:b,handleLineWidthHover:y,motionDurationMid:f}=n;return{[r]:Object.assign(Object.assign({},nr(n)),{position:"relative",height:t,margin:`${te(l)} ${te(i)}`,padding:0,cursor:"pointer",touchAction:"none","&-vertical":{margin:`${te(i)} ${te(l)}`},[`${r}-rail`]:{position:"absolute",backgroundColor:n.railBg,borderRadius:n.borderRadiusXS,transition:`background-color ${f}`},[`${r}-track,${r}-tracks`]:{position:"absolute",transition:`background-color ${f}`},[`${r}-track`]:{backgroundColor:n.trackBg,borderRadius:n.borderRadiusXS},[`${r}-track-draggable`]:{boxSizing:"content-box",backgroundClip:"content-box",border:"solid rgba(0,0,0,0)"},"&:hover":{[`${r}-rail`]:{backgroundColor:n.railHoverBg},[`${r}-track`]:{backgroundColor:n.trackHoverBg},[`${r}-dot`]:{borderColor:o},[`${r}-handle::after`]:{boxShadow:`0 0 0 ${te(b)} ${n.colorPrimaryBorderHover}`},[`${r}-dot-active`]:{borderColor:n.dotActiveBorderColor}},[`${r}-handle`]:{position:"absolute",width:u,height:u,outline:"none",userSelect:"none","&-dragging-delete":{opacity:0},"&::before":{content:'""',position:"absolute",insetInlineStart:c(b).mul(-1).equal(),insetBlockStart:c(b).mul(-1).equal(),width:c(u).add(c(b).mul(2)).equal(),height:c(u).add(c(b).mul(2)).equal(),backgroundColor:"transparent"},"&::after":{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:u,height:u,backgroundColor:n.colorBgElevated,boxShadow:`0 0 0 ${te(b)} ${n.handleColor}`,outline:"0px solid transparent",borderRadius:"50%",cursor:"pointer",transition:`
            inset-inline-start ${f},
            inset-block-start ${f},
            width ${f},
            height ${f},
            box-shadow ${f},
            outline ${f}
          `},"&:hover, &:active, &:focus":{"&::before":{insetInlineStart:c(h).sub(u).div(2).add(y).mul(-1).equal(),insetBlockStart:c(h).sub(u).div(2).add(y).mul(-1).equal(),width:c(h).add(c(y).mul(2)).equal(),height:c(h).add(c(y).mul(2)).equal()},"&::after":{boxShadow:`0 0 0 ${te(y)} ${m}`,outline:`6px solid ${g}`,width:h,height:h,insetInlineStart:n.calc(u).sub(h).div(2).equal(),insetBlockStart:n.calc(u).sub(h).div(2).equal()}}},[`&-lock ${r}-handle`]:{"&::before, &::after":{transition:"none"}},[`${r}-mark`]:{position:"absolute",fontSize:n.fontSize},[`${r}-mark-text`]:{position:"absolute",display:"inline-block",color:n.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:n.colorText}},[`${r}-step`]:{position:"absolute",background:"transparent",pointerEvents:"none"},[`${r}-dot`]:{position:"absolute",width:a,height:a,backgroundColor:n.colorBgElevated,border:`${te(b)} solid ${n.dotBorderColor}`,borderRadius:"50%",cursor:"pointer",transition:`border-color ${n.motionDurationSlow}`,pointerEvents:"auto","&-active":{borderColor:n.dotActiveBorderColor}},[`&${r}-disabled`]:{cursor:"not-allowed",[`${r}-rail`]:{backgroundColor:`${n.railBg} !important`},[`${r}-track`]:{backgroundColor:`${n.trackBgDisabled} !important`},[`
          ${r}-dot
        `]:{backgroundColor:n.colorBgElevated,borderColor:n.trackBgDisabled,boxShadow:"none",cursor:"not-allowed"},[`${r}-handle::after`]:{backgroundColor:n.colorBgElevated,cursor:"not-allowed",width:u,height:u,boxShadow:`0 0 0 ${te(b)} ${s}`,insetInlineStart:0,insetBlockStart:0},[`
          ${r}-mark-text,
          ${r}-dot
        `]:{cursor:"not-allowed !important"}},[`&-tooltip ${e}-tooltip-inner`]:{minWidth:"unset"}})}},rl=(n,r)=>{const{componentCls:e,railSize:t,handleSize:a,dotSize:i,marginFull:l,calc:o}=n,s=r?"paddingBlock":"paddingInline",c=r?"width":"height",u=r?"height":"width",h=r?"insetBlockStart":"insetInlineStart",m=r?"top":"insetInlineStart",g=o(t).mul(3).sub(a).div(2).equal(),b=o(a).sub(t).div(2).equal(),y=r?{borderWidth:`${te(b)} 0`,transform:`translateY(${te(o(b).mul(-1).equal())})`}:{borderWidth:`0 ${te(b)}`,transform:`translateX(${te(n.calc(b).mul(-1).equal())})`};return{[s]:t,[u]:o(t).mul(3).equal(),[`${e}-rail`]:{[c]:"100%",[u]:t},[`${e}-track,${e}-tracks`]:{[u]:t},[`${e}-track-draggable`]:Object.assign({},y),[`${e}-handle`]:{[h]:g},[`${e}-mark`]:{insetInlineStart:0,top:0,[m]:o(t).mul(3).add(r?0:l).equal(),[c]:"100%"},[`${e}-step`]:{insetInlineStart:0,top:0,[m]:t,[c]:"100%",[u]:t},[`${e}-dot`]:{position:"absolute",[h]:o(t).sub(i).div(2).equal()}}},Fp=n=>{const{componentCls:r,marginPartWithMark:e}=n;return{[`${r}-horizontal`]:Object.assign(Object.assign({},rl(n,!0)),{[`&${r}-with-marks`]:{marginBottom:e}})}},Up=n=>{const{componentCls:r}=n;return{[`${r}-vertical`]:Object.assign(Object.assign({},rl(n,!1)),{height:"100%"})}},Gp=n=>{const e=n.controlHeightLG/4,t=n.controlHeightSM/2,a=n.lineWidth+1,i=n.lineWidth+1*1.5,l=n.colorPrimary,o=new vi(l).setAlpha(.2).toRgbString();return{controlSize:e,railSize:4,handleSize:e,handleSizeHover:t,dotSize:8,handleLineWidth:a,handleLineWidthHover:i,railBg:n.colorFillTertiary,railHoverBg:n.colorFillSecondary,trackBg:n.colorPrimaryBorder,trackHoverBg:n.colorPrimaryBorderHover,handleColor:n.colorPrimaryBorder,handleActiveColor:l,handleActiveOutlineColor:o,handleColorDisabled:new vi(n.colorTextDisabled).onBackground(n.colorBgContainer).toHexShortString(),dotBorderColor:n.colorBorderSecondary,dotActiveBorderColor:n.colorPrimaryBorder,trackBgDisabled:n.colorBgContainerDisabled}},Wp=br("Slider",n=>{const r=ur(n,{marginPart:n.calc(n.controlHeight).sub(n.controlSize).div(2).equal(),marginFull:n.calc(n.controlSize).div(2).equal(),marginPartWithMark:n.calc(n.controlHeightLG).sub(n.controlSize).equal()});return[Kp(r),Fp(r),Up(r)]},Gp),nl=d.createContext({});function Ja(){const[n,r]=d.useState(!1),e=d.useRef(),t=()=>{wr.cancel(e.current)},a=i=>{t(),i?r(i):e.current=wr(()=>{r(i)})};return d.useEffect(()=>t,[]),[n,a]}var Yp=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};function qp(n,r){return n||n===null?n:r||r===null?r:e=>typeof e=="number"?e.toString():""}const Xp=z.forwardRef((n,r)=>{const{prefixCls:e,range:t,className:a,rootClassName:i,style:l,disabled:o,tooltipPrefixCls:s,tipFormatter:c,tooltipVisible:u,getTooltipPopupContainer:h,tooltipPlacement:m,tooltip:g={},onChangeComplete:b}=n,y=Yp(n,["prefixCls","range","className","rootClassName","style","disabled","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement","tooltip","onChangeComplete"]),{vertical:f}=n,{direction:v,slider:S,getPrefixCls:C,getPopupContainer:M}=z.useContext(ar),E=z.useContext(Yn),w=o??E,{handleRender:k,direction:P}=z.useContext(nl),I=(P||v)==="rtl",[L,T]=Ja(),[j,$]=Ja(),O=Object.assign({},g),{open:H,placement:V,getPopupContainer:Y,prefixCls:X,formatter:pe}=O,W=H??u,Q=(L||j)&&W!==!1,re=qp(pe,c),[ne,U]=Ja(),ie=Ee=>{b==null||b(Ee),U(!1)},ce=(Ee,Ze)=>Ee||(Ze?I?"left":"right":"top"),G=C("slider",e),[q,J,le]=Wp(G),Ue=oe(a,S==null?void 0:S.className,i,{[`${G}-rtl`]:I,[`${G}-lock`]:ne},J,le);I&&!y.vertical&&(y.reverse=!y.reverse),z.useEffect(()=>{const Ee=()=>{wr(()=>{$(!1)},1)};return document.addEventListener("mouseup",Ee),()=>{document.removeEventListener("mouseup",Ee)}},[]);const Qe=t&&!W,et=k||((Ee,Ze)=>{const{index:Me}=Ze,ge=Ee.props;function we(ve,Be,xe){var ue,Te,We,at;xe&&((Te=(ue=y)[ve])===null||Te===void 0||Te.call(ue,Be)),(at=(We=ge)[ve])===null||at===void 0||at.call(We,Be)}const $e=Object.assign(Object.assign({},ge),{onMouseEnter:ve=>{T(!0),we("onMouseEnter",ve)},onMouseLeave:ve=>{T(!1),we("onMouseLeave",ve)},onMouseDown:ve=>{$(!0),U(!0),we("onMouseDown",ve)},onFocus:ve=>{var Be;$(!0),(Be=y.onFocus)===null||Be===void 0||Be.call(y,ve),we("onFocus",ve,!0)},onBlur:ve=>{var Be;$(!1),(Be=y.onBlur)===null||Be===void 0||Be.call(y,ve),we("onBlur",ve,!0)}}),Ge=z.cloneElement(Ee,$e),Ae=(!!W||Q)&&re!==null;return Qe?Ge:z.createElement(Co,Object.assign({},O,{prefixCls:C("tooltip",X??s),title:re?re(Ze.value):"",open:Ae,placement:ce(V??m,f),key:Me,overlayClassName:`${G}-tooltip`,getPopupContainer:Y||h||M}),Ge)}),Ce=Qe?(Ee,Ze)=>{const Me=z.cloneElement(Ee,{style:Object.assign(Object.assign({},Ee.props.style),{visibility:"hidden"})});return z.createElement(Co,Object.assign({},O,{prefixCls:C("tooltip",X??s),title:re?re(Ze.value):"",open:re!==null&&Q,placement:ce(V??m,f),key:"tooltip",overlayClassName:`${G}-tooltip`,getPopupContainer:Y||h||M,draggingDelete:Ze.draggingDelete}),Me)}:void 0,Je=Object.assign(Object.assign({},S==null?void 0:S.style),l);return q(z.createElement(Vp,Object.assign({},y,{step:y.step,range:t,className:Ue,style:Je,disabled:w,ref:r,prefixCls:G,handleRender:et,activeHandleRender:Ce,onChangeComplete:ie})))});var Zp=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const al=n=>{const{prefixCls:r,colors:e,type:t,color:a,range:i=!1,className:l,activeIndex:o,onActive:s,onDragStart:c,onDragChange:u,onKeyDelete:h}=n,m=Zp(n,["prefixCls","colors","type","color","range","className","activeIndex","onActive","onDragStart","onDragChange","onKeyDelete"]),g=Object.assign(Object.assign({},m),{track:!1}),b=d.useMemo(()=>`linear-gradient(90deg, ${e.map(w=>`${w.color} ${w.percent}%`).join(", ")})`,[e]),y=d.useMemo(()=>!a||!t?null:t==="alpha"?a.toRgbString():`hsl(${a.toHsb().h}, 100%, 50%)`,[a,t]),f=mr(c),v=mr(u),S=d.useMemo(()=>({onDragStart:f,onDragChange:v}),[]),C=mr((E,w)=>{const{onFocus:k,style:P,className:_,onKeyDown:I}=E.props,L=Object.assign({},P);return t==="gradient"&&(L.background=Zs(e,w.value)),d.cloneElement(E,{onFocus:T=>{s==null||s(w.index),k==null||k(T)},style:L,className:oe(_,{[`${r}-slider-handle-active`]:o===w.index}),onKeyDown:T=>{(T.key==="Delete"||T.key==="Backspace")&&h&&h(w.index),I==null||I(T)}})}),M=d.useMemo(()=>({direction:"ltr",handleRender:C}),[]);return d.createElement(nl.Provider,{value:M},d.createElement(tl.Provider,{value:S},d.createElement(Xp,Object.assign({},g,{className:oe(l,`${r}-slider`),tooltip:{open:!1},range:{editable:i,minCount:2},styles:{rail:{background:b},handle:y?{background:y}:{}},classNames:{rail:`${r}-slider-rail`,handle:`${r}-slider-handle`}}))))},Qp=n=>{const{value:r,onChange:e,onChangeComplete:t}=n,a=l=>e(l[0]),i=l=>t(l[0]);return d.createElement(al,Object.assign({},n,{value:[r],onChange:a,onChangeComplete:i}))};function Eo(n){return Xe(n).sort((r,e)=>r.percent-e.percent)}const Jp=n=>{const{prefixCls:r,mode:e,onChange:t,onChangeComplete:a,onActive:i,activeIndex:l,onGradientDragging:o,colors:s}=n,c=e==="gradient",u=d.useMemo(()=>s.map(v=>({percent:v.percent,color:v.color.toRgbString()})),[s]),h=d.useMemo(()=>u.map(v=>v.percent),[u]),m=d.useRef(u),g=v=>{let{rawValues:S,draggingIndex:C,draggingValue:M}=v;if(S.length>u.length){const E=Zs(u,M),w=Xe(u);w.splice(C,0,{percent:M,color:E}),m.current=w}else m.current=u;o(!0),t(new rr(Eo(m.current)),!0)},b=v=>{let{deleteIndex:S,draggingIndex:C,draggingValue:M}=v,E=Xe(m.current);S!==-1?E.splice(S,1):(E[C]=Object.assign(Object.assign({},E[C]),{percent:M}),E=Eo(E)),t(new rr(E),!0)},y=v=>{const S=Xe(u);S.splice(v,1);const C=new rr(S);t(C),a(C)},f=v=>{a(new rr(u)),l>=v.length&&i(v.length-1),o(!1)};return c?d.createElement(al,{min:0,max:100,prefixCls:r,className:`${r}-gradient-slider`,colors:u,color:null,value:h,range:!0,onChangeComplete:f,disabled:!1,type:"gradient",activeIndex:l,onActive:i,onDragStart:g,onDragChange:b,onKeyDelete:y}):null},eh=d.memo(Jp);var th=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const rh={slider:Qp},Mo=()=>{const n=d.useContext(qs),{mode:r,onModeChange:e,modeOptions:t,prefixCls:a,allowClear:i,value:l,disabledAlpha:o,onChange:s,onClear:c,onChangeComplete:u,activeIndex:h,gradientDragging:m}=n,g=th(n,["mode","onModeChange","modeOptions","prefixCls","allowClear","value","disabledAlpha","onChange","onClear","onChangeComplete","activeIndex","gradientDragging"]),b=z.useMemo(()=>l.cleared?[{percent:0,color:new rr("")},{percent:100,color:new rr("")}]:l.getColors(),[l]),y=!l.isGradient(),[f,v]=z.useState(l);Lr(()=>{var P;y||v((P=b[h])===null||P===void 0?void 0:P.color)},[m,h]);const S=z.useMemo(()=>{var P;return y?l:m?f:(P=b[h])===null||P===void 0?void 0:P.color},[l,h,y,f,m]),C=P=>{if(r==="single")return P;const _=Xe(b);return _[h]=Object.assign(Object.assign({},_[h]),{color:P}),new rr(_)},M=(P,_,I)=>{let T=Rt(P);if(l.cleared){const j=T.toRgb();if(!j.r&&!j.g&&!j.b&&I){const{type:$,value:O=0}=I;T=new rr({h:$==="hue"?O:0,s:1,b:1,a:$==="alpha"?O/100:1})}else T=Ea(T)}s(C(T),_)},E=P=>{u(C(P))};let w=null;const k=t.length>1;return(i||k)&&(w=z.createElement("div",{className:`${a}-operation`},k&&z.createElement(Jd,{size:"small",options:t,value:r,onChange:e}),z.createElement(Qs,Object.assign({prefixCls:a,value:l,onChange:P=>{s(P),c==null||c()}},g)))),z.createElement(z.Fragment,null,w,z.createElement(eh,Object.assign({},n,{colors:b})),z.createElement(_d,{prefixCls:a,value:S==null?void 0:S.toHsb(),disabledAlpha:o,onChange:(P,_)=>{M(P,!0,_)},onChangeComplete:P=>{E(Rt(P))},components:rh}),z.createElement(Pp,Object.assign({value:S,onChange:M,prefixCls:a,disabledAlpha:o},g)))},ei=n=>n.map(r=>(r.colors=r.colors.map(Rt),r)),nh=(n,r)=>{const{r:e,g:t,b:a,a:i}=n.toRgb(),l=new cr(n.toRgbString()).onBackground(r).toHsv();return i<=.5?l.v>.5:e*.299+t*.587+a*.114>192},Ao=n=>{let{label:r}=n;return`panel-${r}`},ah=n=>{let{prefixCls:r,presets:e,value:t,onChange:a}=n;const[i]=_i("ColorPicker"),[,l]=pc(),[o]=Wt(ei(e),{value:ei(e),postState:ei}),s=`${r}-presets`,c=d.useMemo(()=>o.reduce((m,g)=>{const{defaultOpen:b=!0}=g;return b&&m.push(Ao(g)),m},[]),[o]),u=m=>{a==null||a(m)},h=o.map(m=>{var g;return{key:Ao(m),label:z.createElement("div",{className:`${s}-label`},m==null?void 0:m.label),children:z.createElement("div",{className:`${s}-items`},Array.isArray(m==null?void 0:m.colors)&&((g=m.colors)===null||g===void 0?void 0:g.length)>0?m.colors.map((b,y)=>z.createElement(ji,{key:`preset-${y}-${b.toHexString()}`,color:Rt(b).toRgbString(),prefixCls:r,className:oe(`${s}-color`,{[`${s}-color-checked`]:b.toHexString()===(t==null?void 0:t.toHexString()),[`${s}-color-bright`]:nh(b,l.colorBgElevated)}),onClick:()=>u(b)})):z.createElement("span",{className:`${s}-empty`},i.presetEmpty))}});return z.createElement("div",{className:s},z.createElement(Sd,{defaultActiveKey:c,ghost:!0,items:h}))},xo=()=>{const{prefixCls:n,value:r,presets:e,onChange:t}=d.useContext(Xs);return Array.isArray(e)?z.createElement(ah,{value:r,presets:e,prefixCls:n,onChange:t}):null},ih=n=>{const{prefixCls:r,presets:e,panelRender:t,value:a,onChange:i,onClear:l,allowClear:o,disabledAlpha:s,mode:c,onModeChange:u,modeOptions:h,onChangeComplete:m,activeIndex:g,onActive:b,format:y,onFormatChange:f,gradientDragging:v,onGradientDragging:S}=n,C=`${r}-inner`,M=z.useMemo(()=>({prefixCls:r,value:a,onChange:i,onClear:l,allowClear:o,disabledAlpha:s,mode:c,onModeChange:u,modeOptions:h,onChangeComplete:m,activeIndex:g,onActive:b,format:y,onFormatChange:f,gradientDragging:v,onGradientDragging:S}),[r,a,i,l,o,s,c,u,h,m,g,b,y,f,v,S]),E=z.useMemo(()=>({prefixCls:r,value:a,presets:e,onChange:i}),[r,a,e,i]),w=z.createElement("div",{className:`${C}-content`},z.createElement(Mo,null),Array.isArray(e)&&z.createElement(jd,null),z.createElement(xo,null));return z.createElement(qs.Provider,{value:M},z.createElement(Xs.Provider,{value:E},z.createElement("div",{className:C},typeof t=="function"?t(w,{components:{Picker:Mo,Presets:xo}}):w)))};var oh=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const sh=d.forwardRef((n,r)=>{const{color:e,prefixCls:t,open:a,disabled:i,format:l,className:o,showText:s,activeIndex:c}=n,u=oh(n,["color","prefixCls","open","disabled","format","className","showText","activeIndex"]),h=`${t}-trigger`,m=`${h}-text`,g=`${m}-cell`,[b]=_i("ColorPicker"),y=z.useMemo(()=>{if(!s)return"";if(typeof s=="function")return s(e);if(e.cleared)return b.transparent;if(e.isGradient())return e.getColors().map((C,M)=>{const E=c!==-1&&c!==M;return z.createElement("span",{key:M,className:oe(g,E&&`${g}-inactive`)},C.color.toRgbString()," ",C.percent,"%")});const v=e.toHexString().toUpperCase(),S=zi(e);switch(l){case"rgb":return e.toRgbString();case"hsb":return e.toHsbString();default:return S<100?`${v.slice(0,7)},${S}%`:v}},[e,l,s,c]),f=d.useMemo(()=>e.cleared?z.createElement(Qs,{prefixCls:t}):z.createElement(ji,{prefixCls:t,color:e.toCssString()}),[e,t]);return z.createElement("div",Object.assign({ref:r,className:oe(h,o,{[`${h}-active`]:a,[`${h}-disabled`]:i})},Ta(u)),f,s&&z.createElement("div",{className:m},y))});function lh(n,r,e){const[t]=_i("ColorPicker"),[a,i]=Wt(n,{value:r}),[l,o]=d.useState("single"),[s,c]=d.useMemo(()=>{const y=(Array.isArray(e)?e:[e]).filter(C=>C);y.length||y.push("single");const f=new Set(y),v=[],S=(C,M)=>{f.has(C)&&v.push({label:M,value:C})};return S("single",t.singleColor),S("gradient",t.gradientColor),[v,f]},[e]),[u,h]=d.useState(null),m=mr(y=>{h(y),i(y)}),g=d.useMemo(()=>{const y=Rt(a||"");return y.equals(u)?u:y},[a,u]),b=d.useMemo(()=>{var y;return c.has(l)?l:(y=s[0])===null||y===void 0?void 0:y.value},[c,l,s]);return d.useEffect(()=>{o(g.isGradient()?"gradient":"single")},[g]),[g,m,b,o,s]}const il=(n,r)=>({backgroundImage:`conic-gradient(${r} 0 25%, transparent 0 50%, ${r} 0 75%, transparent 0)`,backgroundSize:`${n} ${n}`}),No=(n,r)=>{const{componentCls:e,borderRadiusSM:t,colorPickerInsetShadow:a,lineWidth:i,colorFillSecondary:l}=n;return{[`${e}-color-block`]:Object.assign(Object.assign({position:"relative",borderRadius:t,width:r,height:r,boxShadow:a,flex:"none"},il("50%",n.colorFillSecondary)),{[`${e}-color-block-inner`]:{width:"100%",height:"100%",boxShadow:`inset 0 0 0 ${te(i)} ${l}`,borderRadius:"inherit"}})}},ch=n=>{const{componentCls:r,antCls:e,fontSizeSM:t,lineHeightSM:a,colorPickerAlphaInputWidth:i,marginXXS:l,paddingXXS:o,controlHeightSM:s,marginXS:c,fontSizeIcon:u,paddingXS:h,colorTextPlaceholder:m,colorPickerInputNumberHandleWidth:g,lineWidth:b}=n;return{[`${r}-input-container`]:{display:"flex",[`${r}-steppers${e}-input-number`]:{fontSize:t,lineHeight:a,[`${e}-input-number-input`]:{paddingInlineStart:o,paddingInlineEnd:0},[`${e}-input-number-handler-wrap`]:{width:g}},[`${r}-steppers${r}-alpha-input`]:{flex:`0 0 ${te(i)}`,marginInlineStart:l},[`${r}-format-select${e}-select`]:{marginInlineEnd:c,width:"auto","&-single":{[`${e}-select-selector`]:{padding:0,border:0},[`${e}-select-arrow`]:{insetInlineEnd:0},[`${e}-select-selection-item`]:{paddingInlineEnd:n.calc(u).add(l).equal(),fontSize:t,lineHeight:te(s)},[`${e}-select-item-option-content`]:{fontSize:t,lineHeight:a},[`${e}-select-dropdown`]:{[`${e}-select-item`]:{minHeight:"auto"}}}},[`${r}-input`]:{gap:l,alignItems:"center",flex:1,width:0,[`${r}-hsb-input,${r}-rgb-input`]:{display:"flex",gap:l,alignItems:"center"},[`${r}-steppers`]:{flex:1},[`${r}-hex-input${e}-input-affix-wrapper`]:{flex:1,padding:`0 ${te(h)}`,[`${e}-input`]:{fontSize:t,textTransform:"uppercase",lineHeight:te(n.calc(s).sub(n.calc(b).mul(2)).equal())},[`${e}-input-prefix`]:{color:m}}}}}},uh=n=>{const{componentCls:r,controlHeightLG:e,borderRadiusSM:t,colorPickerInsetShadow:a,marginSM:i,colorBgElevated:l,colorFillSecondary:o,lineWidthBold:s,colorPickerHandlerSize:c}=n;return{userSelect:"none",[`${r}-select`]:{[`${r}-palette`]:{minHeight:n.calc(e).mul(4).equal(),overflow:"hidden",borderRadius:t},[`${r}-saturation`]:{position:"absolute",borderRadius:"inherit",boxShadow:a,inset:0},marginBottom:i},[`${r}-handler`]:{width:c,height:c,border:`${te(s)} solid ${l}`,position:"relative",borderRadius:"50%",cursor:"pointer",boxShadow:`${a}, 0 0 0 1px ${o}`}}},dh=n=>{const{componentCls:r,antCls:e,colorTextQuaternary:t,paddingXXS:a,colorPickerPresetColorSize:i,fontSizeSM:l,colorText:o,lineHeightSM:s,lineWidth:c,borderRadius:u,colorFill:h,colorWhite:m,marginXXS:g,paddingXS:b,fontHeightSM:y}=n;return{[`${r}-presets`]:{[`${e}-collapse-item > ${e}-collapse-header`]:{padding:0,[`${e}-collapse-expand-icon`]:{height:y,color:t,paddingInlineEnd:a}},[`${e}-collapse`]:{display:"flex",flexDirection:"column",gap:g},[`${e}-collapse-item > ${e}-collapse-content > ${e}-collapse-content-box`]:{padding:`${te(b)} 0`},"&-label":{fontSize:l,color:o,lineHeight:s},"&-items":{display:"flex",flexWrap:"wrap",gap:n.calc(g).mul(1.5).equal(),[`${r}-presets-color`]:{position:"relative",cursor:"pointer",width:i,height:i,"&::before":{content:'""',pointerEvents:"none",width:n.calc(i).add(n.calc(c).mul(4)).equal(),height:n.calc(i).add(n.calc(c).mul(4)).equal(),position:"absolute",top:n.calc(c).mul(-2).equal(),insetInlineStart:n.calc(c).mul(-2).equal(),borderRadius:u,border:`${te(c)} solid transparent`,transition:`border-color ${n.motionDurationMid} ${n.motionEaseInBack}`},"&:hover::before":{borderColor:h},"&::after":{boxSizing:"border-box",position:"absolute",top:"50%",insetInlineStart:"21.5%",display:"table",width:n.calc(i).div(13).mul(5).equal(),height:n.calc(i).div(13).mul(8).equal(),border:`${te(n.lineWidthBold)} solid ${n.colorWhite}`,borderTop:0,borderInlineStart:0,transform:"rotate(45deg) scale(0) translate(-50%,-50%)",opacity:0,content:'""',transition:`all ${n.motionDurationFast} ${n.motionEaseInBack}, opacity ${n.motionDurationFast}`},[`&${r}-presets-color-checked`]:{"&::after":{opacity:1,borderColor:m,transform:"rotate(45deg) scale(1) translate(-50%,-50%)",transition:`transform ${n.motionDurationMid} ${n.motionEaseOutBack} ${n.motionDurationFast}`},[`&${r}-presets-color-bright`]:{"&::after":{borderColor:"rgba(0, 0, 0, 0.45)"}}}}},"&-empty":{fontSize:l,color:t}}}},ph=n=>{const{componentCls:r,colorPickerInsetShadow:e,colorBgElevated:t,colorFillSecondary:a,lineWidthBold:i,colorPickerHandlerSizeSM:l,colorPickerSliderHeight:o,marginSM:s,marginXS:c}=n,u=n.calc(l).sub(n.calc(i).mul(2).equal()).equal(),h=n.calc(l).add(n.calc(i).mul(2).equal()).equal(),m={"&:after":{transform:"scale(1)",boxShadow:`${e}, 0 0 0 1px ${n.colorPrimaryActive}`}};return{[`${r}-slider`]:[il(te(o),n.colorFillSecondary),{margin:0,padding:0,height:o,borderRadius:n.calc(o).div(2).equal(),"&-rail":{height:o,borderRadius:n.calc(o).div(2).equal(),boxShadow:e},[`& ${r}-slider-handle`]:{width:u,height:u,top:0,borderRadius:"100%","&:before":{display:"block",position:"absolute",background:"transparent",left:{_skip_check_:!0,value:"50%"},top:"50%",transform:"translate(-50%, -50%)",width:h,height:h,borderRadius:"100%"},"&:after":{width:l,height:l,border:`${te(i)} solid ${t}`,boxShadow:`${e}, 0 0 0 1px ${a}`,outline:"none",insetInlineStart:n.calc(i).mul(-1).equal(),top:n.calc(i).mul(-1).equal(),background:"transparent",transition:"none"},"&:focus":m}}],[`${r}-slider-container`]:{display:"flex",gap:s,marginBottom:s,[`${r}-slider-group`]:{flex:1,flexDirection:"column",justifyContent:"space-between",display:"flex","&-disabled-alpha":{justifyContent:"center"}}},[`${r}-gradient-slider`]:{marginBottom:c,[`& ${r}-slider-handle`]:{"&:after":{transform:"scale(0.8)"},"&-active, &:focus":m}}}},Ci=(n,r,e)=>({borderInlineEndWidth:n.lineWidth,borderColor:r,boxShadow:`0 0 0 ${te(n.controlOutlineWidth)} ${e}`,outline:0}),hh=n=>{const{componentCls:r}=n;return{"&-rtl":{[`${r}-presets-color`]:{"&::after":{direction:"ltr"}},[`${r}-clear`]:{"&::after":{direction:"ltr"}}}}},wo=(n,r,e)=>{const{componentCls:t,borderRadiusSM:a,lineWidth:i,colorSplit:l,colorBorder:o,red6:s}=n;return{[`${t}-clear`]:Object.assign(Object.assign({width:r,height:r,borderRadius:a,border:`${te(i)} solid ${l}`,position:"relative",overflow:"hidden",cursor:"inherit",transition:`all ${n.motionDurationFast}`},e),{"&::after":{content:'""',position:"absolute",insetInlineEnd:n.calc(i).mul(-1).equal(),top:n.calc(i).mul(-1).equal(),display:"block",width:40,height:2,transformOrigin:"calc(100% - 1px) 1px",transform:"rotate(-45deg)",backgroundColor:s},"&:hover":{borderColor:o}})}},gh=n=>{const{componentCls:r,colorError:e,colorWarning:t,colorErrorHover:a,colorWarningHover:i,colorErrorOutline:l,colorWarningOutline:o}=n;return{[`&${r}-status-error`]:{borderColor:e,"&:hover":{borderColor:a},[`&${r}-trigger-active`]:Object.assign({},Ci(n,e,l))},[`&${r}-status-warning`]:{borderColor:t,"&:hover":{borderColor:i},[`&${r}-trigger-active`]:Object.assign({},Ci(n,t,o))}}},mh=n=>{const{componentCls:r,controlHeightLG:e,controlHeightSM:t,controlHeight:a,controlHeightXS:i,borderRadius:l,borderRadiusSM:o,borderRadiusXS:s,borderRadiusLG:c,fontSizeLG:u}=n;return{[`&${r}-lg`]:{minWidth:e,minHeight:e,borderRadius:c,[`${r}-color-block, ${r}-clear`]:{width:a,height:a,borderRadius:l},[`${r}-trigger-text`]:{fontSize:u}},[`&${r}-sm`]:{minWidth:t,minHeight:t,borderRadius:o,[`${r}-color-block, ${r}-clear`]:{width:i,height:i,borderRadius:s},[`${r}-trigger-text`]:{lineHeight:te(i)}}}},fh=n=>{const{antCls:r,componentCls:e,colorPickerWidth:t,colorPrimary:a,motionDurationMid:i,colorBgElevated:l,colorTextDisabled:o,colorText:s,colorBgContainerDisabled:c,borderRadius:u,marginXS:h,marginSM:m,controlHeight:g,controlHeightSM:b,colorBgTextActive:y,colorPickerPresetColorSize:f,colorPickerPreviewSize:v,lineWidth:S,colorBorder:C,paddingXXS:M,fontSize:E,colorPrimaryHover:w,controlOutline:k}=n;return[{[e]:Object.assign({[`${e}-inner`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({"&-content":{display:"flex",flexDirection:"column",width:t,[`& > ${r}-divider`]:{margin:`${te(m)} 0 ${te(h)}`}},[`${e}-panel`]:Object.assign({},uh(n))},ph(n)),No(n,v)),ch(n)),dh(n)),wo(n,f,{marginInlineStart:"auto"})),{[`${e}-operation`]:{display:"flex",justifyContent:"space-between",marginBottom:h}}),"&-trigger":Object.assign(Object.assign(Object.assign(Object.assign({minWidth:g,minHeight:g,borderRadius:u,border:`${te(S)} solid ${C}`,cursor:"pointer",display:"inline-flex",alignItems:"flex-start",justifyContent:"center",transition:`all ${i}`,background:l,padding:n.calc(M).sub(S).equal(),[`${e}-trigger-text`]:{marginInlineStart:h,marginInlineEnd:n.calc(h).sub(n.calc(M).sub(S)).equal(),fontSize:E,color:s,alignSelf:"center","&-cell":{"&:not(:last-child):after":{content:'", "'},"&-inactive":{color:o}}},"&:hover":{borderColor:w},[`&${e}-trigger-active`]:Object.assign({},Ci(n,a,k)),"&-disabled":{color:o,background:c,cursor:"not-allowed","&:hover":{borderColor:y},[`${e}-trigger-text`]:{color:o}}},wo(n,b)),No(n,b)),gh(n)),mh(n))},hh(n))},ys(n,{focusElCls:`${e}-trigger-active`})]},vh=br("ColorPicker",n=>{const{colorTextQuaternary:r,marginSM:e}=n,t=8,a=ur(n,{colorPickerWidth:234,colorPickerHandlerSize:16,colorPickerHandlerSizeSM:12,colorPickerAlphaInputWidth:44,colorPickerInputNumberHandleWidth:16,colorPickerPresetColorSize:24,colorPickerInsetShadow:`inset 0 0 1px 0 ${r}`,colorPickerSliderHeight:t,colorPickerPreviewSize:n.calc(t).mul(2).add(e).equal()});return[fh(a)]});var yh=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const La=n=>{const{mode:r,value:e,defaultValue:t,format:a,defaultFormat:i,allowClear:l=!1,presets:o,children:s,trigger:c="click",open:u,disabled:h,placement:m="bottomLeft",arrow:g=!0,panelRender:b,showText:y,style:f,className:v,size:S,rootClassName:C,prefixCls:M,styles:E,disabledAlpha:w=!1,onFormatChange:k,onChange:P,onClear:_,onOpenChange:I,onChangeComplete:L,getPopupContainer:T,autoAdjustOverflow:j=!0,destroyTooltipOnHide:$}=n,O=yh(n,["mode","value","defaultValue","format","defaultFormat","allowClear","presets","children","trigger","open","disabled","placement","arrow","panelRender","showText","style","className","size","rootClassName","prefixCls","styles","disabledAlpha","onFormatChange","onChange","onClear","onOpenChange","onChangeComplete","getPopupContainer","autoAdjustOverflow","destroyTooltipOnHide"]),{getPrefixCls:H,direction:V,colorPicker:Y}=d.useContext(ar),X=d.useContext(Yn),pe=h??X,[W,Q]=Wt(!1,{value:u,postState:lt=>!pe&&lt,onChange:I}),[re,ne]=Wt(a,{value:a,defaultValue:i,onChange:k}),U=H("color-picker",M),[ie,ce,G,q,J]=lh(t,e,r),le=d.useMemo(()=>zi(ie)<100,[ie]),[Ue,Qe]=z.useState(null),et=lt=>{if(L){let De=Rt(lt);w&&le&&(De=Ea(lt)),L(De)}},Ce=(lt,De)=>{let gt=Rt(lt);w&&le&&(gt=Ea(gt)),ce(gt),Qe(null),P&&P(gt,gt.toCssString()),De||et(gt)},[Je,Ee]=z.useState(0),[Ze,Me]=z.useState(!1),ge=lt=>{if(q(lt),lt==="single"&&ie.isGradient())Ee(0),Ce(new rr(ie.getColors()[0].color)),Qe(ie);else if(lt==="gradient"&&!ie.isGradient()){const De=le?Ea(ie):ie;Ce(new rr(Ue||[{percent:0,color:De},{percent:100,color:De}]))}},{status:we}=z.useContext(Ia),{compactSize:$e,compactItemClassnames:Ge}=Ti(U,V),Ae=qn(lt=>{var De;return(De=S??$e)!==null&&De!==void 0?De:lt}),ve=An(U),[Be,xe,ue]=vh(U,ve),Te={[`${U}-rtl`]:V},We=oe(C,ue,ve,Te),at=oe(Aa(U,we),{[`${U}-sm`]:Ae==="small",[`${U}-lg`]:Ae==="large"},Ge,Y==null?void 0:Y.className,We,v,xe),kt=oe(U,We),At={open:W,trigger:c,placement:m,arrow:g,rootClassName:C,getPopupContainer:T,autoAdjustOverflow:j,destroyTooltipOnHide:$},Ot=Object.assign(Object.assign({},Y==null?void 0:Y.style),f);return Be(z.createElement(_s,Object.assign({style:E==null?void 0:E.popup,overlayInnerStyle:E==null?void 0:E.popupOverlayInner,onOpenChange:lt=>{(!lt||!pe)&&Q(lt)},content:z.createElement(yi,{form:!0},z.createElement(ih,{mode:G,onModeChange:ge,modeOptions:J,prefixCls:U,value:ie,allowClear:l,disabled:pe,disabledAlpha:w,presets:o,panelRender:b,format:re,onFormatChange:ne,onChange:Ce,onChangeComplete:et,onClear:_,activeIndex:Je,onActive:Ee,gradientDragging:Ze,onGradientDragging:Me})),overlayClassName:kt},At),s||z.createElement(sh,Object.assign({activeIndex:W?Je:-1,open:W,className:at,style:Ot,prefixCls:U,disabled:pe,showText:y,format:re},O,{color:ie}))))},bh=bs(La,"color-picker",n=>n,n=>Object.assign(Object.assign({},n),{placement:"bottom",autoAdjustOverflow:!1}));La._InternalPanelDoNotUseOrYouWillBeFired=bh;var Sh={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"},Ch=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:Sh}))},Eh=d.forwardRef(Ch),Mh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},Ah=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:Mh}))},xh=d.forwardRef(Ah),Nh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},wh=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:Nh}))},kh=d.forwardRef(wh),Ph={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"},Oh=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:Ph}))},Ih=d.forwardRef(Oh),Th={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"},_h=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:Th}))},Rh=d.forwardRef(_h),$h={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"},Dh=function(r,e){return d.createElement(zr,Fe({},r,{ref:e,icon:$h}))},Lh=d.forwardRef(Dh),Fi=d.createContext(null),Bh=function(r){for(var e=r.prefixCls,t=r.level,a=r.isStart,i=r.isEnd,l="".concat(e,"-indent-unit"),o=[],s=0;s<t;s+=1)o.push(d.createElement("span",{key:s,className:oe(l,B(B({},"".concat(l,"-start"),a[s]),"".concat(l,"-end"),i[s]))}));return d.createElement("span",{"aria-hidden":"true",className:"".concat(e,"-indent")},o)};const jh=d.memo(Bh);var zh=["eventKey","className","style","dragOver","dragOverGapTop","dragOverGapBottom","isLeaf","isStart","isEnd","expanded","selected","checked","halfChecked","loading","domRef","active","data","onMouseMove","selectable"],ko="open",Po="close",Hh="---",Vh=function(n){Oi(e,n);var r=Ii(e);function e(){var t;kn(this,e);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=r.call.apply(r,[this].concat(i)),B(ee(t),"state",{dragNodeHighlight:!1}),B(ee(t),"selectHandle",void 0),B(ee(t),"cacheIndent",void 0),B(ee(t),"onSelectorClick",function(o){var s=t.props.context.onNodeClick;s(o,xt(t.props)),t.isSelectable()?t.onSelect(o):t.onCheck(o)}),B(ee(t),"onSelectorDoubleClick",function(o){var s=t.props.context.onNodeDoubleClick;s(o,xt(t.props))}),B(ee(t),"onSelect",function(o){if(!t.isDisabled()){var s=t.props.context.onNodeSelect;s(o,xt(t.props))}}),B(ee(t),"onCheck",function(o){if(!t.isDisabled()){var s=t.props,c=s.disableCheckbox,u=s.checked,h=t.props.context.onNodeCheck;if(!(!t.isCheckable()||c)){var m=!u;h(o,xt(t.props),m)}}}),B(ee(t),"onMouseEnter",function(o){var s=t.props.context.onNodeMouseEnter;s(o,xt(t.props))}),B(ee(t),"onMouseLeave",function(o){var s=t.props.context.onNodeMouseLeave;s(o,xt(t.props))}),B(ee(t),"onContextMenu",function(o){var s=t.props.context.onNodeContextMenu;s(o,xt(t.props))}),B(ee(t),"onDragStart",function(o){var s=t.props.context.onNodeDragStart;o.stopPropagation(),t.setState({dragNodeHighlight:!0}),s(o,ee(t));try{o.dataTransfer.setData("text/plain","")}catch{}}),B(ee(t),"onDragEnter",function(o){var s=t.props.context.onNodeDragEnter;o.preventDefault(),o.stopPropagation(),s(o,ee(t))}),B(ee(t),"onDragOver",function(o){var s=t.props.context.onNodeDragOver;o.preventDefault(),o.stopPropagation(),s(o,ee(t))}),B(ee(t),"onDragLeave",function(o){var s=t.props.context.onNodeDragLeave;o.stopPropagation(),s(o,ee(t))}),B(ee(t),"onDragEnd",function(o){var s=t.props.context.onNodeDragEnd;o.stopPropagation(),t.setState({dragNodeHighlight:!1}),s(o,ee(t))}),B(ee(t),"onDrop",function(o){var s=t.props.context.onNodeDrop;o.preventDefault(),o.stopPropagation(),t.setState({dragNodeHighlight:!1}),s(o,ee(t))}),B(ee(t),"onExpand",function(o){var s=t.props,c=s.loading,u=s.context.onNodeExpand;c||u(o,xt(t.props))}),B(ee(t),"setSelectHandle",function(o){t.selectHandle=o}),B(ee(t),"getNodeState",function(){var o=t.props.expanded;return t.isLeaf()?null:o?ko:Po}),B(ee(t),"hasChildren",function(){var o=t.props.eventKey,s=t.props.context.keyEntities,c=Ht(s,o)||{},u=c.children;return!!(u||[]).length}),B(ee(t),"isLeaf",function(){var o=t.props,s=o.isLeaf,c=o.loaded,u=t.props.context.loadData,h=t.hasChildren();return s===!1?!1:s||!u&&!h||u&&c&&!h}),B(ee(t),"isDisabled",function(){var o=t.props.disabled,s=t.props.context.disabled;return!!(s||o)}),B(ee(t),"isCheckable",function(){var o=t.props.checkable,s=t.props.context.checkable;return!s||o===!1?!1:s}),B(ee(t),"syncLoadData",function(o){var s=o.expanded,c=o.loading,u=o.loaded,h=t.props.context,m=h.loadData,g=h.onNodeLoad;c||m&&s&&!t.isLeaf()&&!u&&g(xt(t.props))}),B(ee(t),"isDraggable",function(){var o=t.props,s=o.data,c=o.context.draggable;return!!(c&&(!c.nodeDraggable||c.nodeDraggable(s)))}),B(ee(t),"renderDragHandler",function(){var o=t.props.context,s=o.draggable,c=o.prefixCls;return s!=null&&s.icon?d.createElement("span",{className:"".concat(c,"-draggable-icon")},s.icon):null}),B(ee(t),"renderSwitcherIconDom",function(o){var s=t.props.switcherIcon,c=t.props.context.switcherIcon,u=s||c;return typeof u=="function"?u(de(de({},t.props),{},{isLeaf:o})):u}),B(ee(t),"renderSwitcher",function(){var o=t.props.expanded,s=t.props.context.prefixCls;if(t.isLeaf()){var c=t.renderSwitcherIconDom(!0);return c!==!1?d.createElement("span",{className:oe("".concat(s,"-switcher"),"".concat(s,"-switcher-noop"))},c):null}var u=oe("".concat(s,"-switcher"),"".concat(s,"-switcher_").concat(o?ko:Po)),h=t.renderSwitcherIconDom(!1);return h!==!1?d.createElement("span",{onClick:t.onExpand,className:u},h):null}),B(ee(t),"renderCheckbox",function(){var o=t.props,s=o.checked,c=o.halfChecked,u=o.disableCheckbox,h=t.props.context.prefixCls,m=t.isDisabled(),g=t.isCheckable();if(!g)return null;var b=typeof g!="boolean"?g:null;return d.createElement("span",{className:oe("".concat(h,"-checkbox"),s&&"".concat(h,"-checkbox-checked"),!s&&c&&"".concat(h,"-checkbox-indeterminate"),(m||u)&&"".concat(h,"-checkbox-disabled")),onClick:t.onCheck},b)}),B(ee(t),"renderIcon",function(){var o=t.props.loading,s=t.props.context.prefixCls;return d.createElement("span",{className:oe("".concat(s,"-iconEle"),"".concat(s,"-icon__").concat(t.getNodeState()||"docu"),o&&"".concat(s,"-icon_loading"))})}),B(ee(t),"renderSelector",function(){var o=t.state.dragNodeHighlight,s=t.props,c=s.title,u=c===void 0?Hh:c,h=s.selected,m=s.icon,g=s.loading,b=s.data,y=t.props.context,f=y.prefixCls,v=y.showIcon,S=y.icon,C=y.loadData,M=y.titleRender,E=t.isDisabled(),w="".concat(f,"-node-content-wrapper"),k;if(v){var P=m||S;k=P?d.createElement("span",{className:oe("".concat(f,"-iconEle"),"".concat(f,"-icon__customize"))},typeof P=="function"?P(t.props):P):t.renderIcon()}else C&&g&&(k=t.renderIcon());var _;typeof u=="function"?_=u(b):M?_=M(b):_=u;var I=d.createElement("span",{className:"".concat(f,"-title")},_);return d.createElement("span",{ref:t.setSelectHandle,title:typeof u=="string"?u:"",className:oe("".concat(w),"".concat(w,"-").concat(t.getNodeState()||"normal"),!E&&(h||o)&&"".concat(f,"-node-selected")),onMouseEnter:t.onMouseEnter,onMouseLeave:t.onMouseLeave,onContextMenu:t.onContextMenu,onClick:t.onSelectorClick,onDoubleClick:t.onSelectorDoubleClick},k,I,t.renderDropIndicator())}),B(ee(t),"renderDropIndicator",function(){var o=t.props,s=o.disabled,c=o.eventKey,u=t.props.context,h=u.draggable,m=u.dropLevelOffset,g=u.dropPosition,b=u.prefixCls,y=u.indent,f=u.dropIndicatorRender,v=u.dragOverNodeKey,S=u.direction,C=!!h,M=!s&&C&&v===c,E=y??t.cacheIndent;return t.cacheIndent=y,M?f({dropPosition:g,dropLevelOffset:m,indent:E,prefixCls:b,direction:S}):null}),t}return Pn(e,[{key:"componentDidMount",value:function(){this.syncLoadData(this.props)}},{key:"componentDidUpdate",value:function(){this.syncLoadData(this.props)}},{key:"isSelectable",value:function(){var a=this.props.selectable,i=this.props.context.selectable;return typeof a=="boolean"?a:i}},{key:"render",value:function(){var a,i=this.props,l=i.eventKey,o=i.className,s=i.style,c=i.dragOver,u=i.dragOverGapTop,h=i.dragOverGapBottom,m=i.isLeaf,g=i.isStart,b=i.isEnd,y=i.expanded,f=i.selected,v=i.checked,S=i.halfChecked,C=i.loading,M=i.domRef,E=i.active;i.data;var w=i.onMouseMove,k=i.selectable,P=$t(i,zh),_=this.props.context,I=_.prefixCls,L=_.filterTreeNode,T=_.keyEntities,j=_.dropContainerKey,$=_.dropTargetKey,O=_.draggingNodeKey,H=this.isDisabled(),V=Ta(P,{aria:!0,data:!0}),Y=Ht(T,l)||{},X=Y.level,pe=b[b.length-1],W=this.isDraggable(),Q=!H&&W,re=O===l,ne=k!==void 0?{"aria-selected":!!k}:void 0;return d.createElement("div",Fe({ref:M,className:oe(o,"".concat(I,"-treenode"),(a={},B(B(B(B(B(B(B(B(B(B(a,"".concat(I,"-treenode-disabled"),H),"".concat(I,"-treenode-switcher-").concat(y?"open":"close"),!m),"".concat(I,"-treenode-checkbox-checked"),v),"".concat(I,"-treenode-checkbox-indeterminate"),S),"".concat(I,"-treenode-selected"),f),"".concat(I,"-treenode-loading"),C),"".concat(I,"-treenode-active"),E),"".concat(I,"-treenode-leaf-last"),pe),"".concat(I,"-treenode-draggable"),W),"dragging",re),B(B(B(B(B(B(a,"drop-target",$===l),"drop-container",j===l),"drag-over",!H&&c),"drag-over-gap-top",!H&&u),"drag-over-gap-bottom",!H&&h),"filter-node",L&&L(xt(this.props))))),style:s,draggable:Q,"aria-grabbed":re,onDragStart:Q?this.onDragStart:void 0,onDragEnter:W?this.onDragEnter:void 0,onDragOver:W?this.onDragOver:void 0,onDragLeave:W?this.onDragLeave:void 0,onDrop:W?this.onDrop:void 0,onDragEnd:W?this.onDragEnd:void 0,onMouseMove:w},ne,V),d.createElement(jh,{prefixCls:I,level:X,isStart:g,isEnd:b}),this.renderDragHandler(),this.renderSwitcher(),this.renderCheckbox(),this.renderSelector())}}]),e}(d.Component),Gn=function(r){return d.createElement(Fi.Consumer,null,function(e){return d.createElement(Vh,Fe({},r,{context:e}))})};Gn.displayName="TreeNode";Gn.isTreeNode=1;function Ar(n,r){if(!n)return[];var e=n.slice(),t=e.indexOf(r);return t>=0&&e.splice(t,1),e}function _r(n,r){var e=(n||[]).slice();return e.indexOf(r)===-1&&e.push(r),e}function Ui(n){return n.split("-")}function Kh(n,r){var e=[],t=Ht(r,n);function a(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];i.forEach(function(l){var o=l.key,s=l.children;e.push(o),a(s)})}return a(t.children),e}function Fh(n){if(n.parent){var r=Ui(n.pos);return Number(r[r.length-1])===n.parent.children.length-1}return!1}function Uh(n){var r=Ui(n.pos);return Number(r[r.length-1])===0}function Oo(n,r,e,t,a,i,l,o,s,c){var u,h=n.clientX,m=n.clientY,g=n.target.getBoundingClientRect(),b=g.top,y=g.height,f=(c==="rtl"?-1:1)*(((a==null?void 0:a.x)||0)-h),v=(f-12)/t,S=s.filter(function(H){var V;return(V=o[H])===null||V===void 0||(V=V.children)===null||V===void 0?void 0:V.length}),C=Ht(o,e.props.eventKey);if(m<b+y/2){var M=l.findIndex(function(H){return H.key===C.key}),E=M<=0?0:M-1,w=l[E].key;C=Ht(o,w)}var k=C.key,P=C,_=C.key,I=0,L=0;if(!S.includes(k))for(var T=0;T<v&&Fh(C);T+=1)C=C.parent,L+=1;var j=r.props.data,$=C.node,O=!0;return Uh(C)&&C.level===0&&m<b+y/2&&i({dragNode:j,dropNode:$,dropPosition:-1})&&C.key===e.props.eventKey?I=-1:(P.children||[]).length&&S.includes(_)?i({dragNode:j,dropNode:$,dropPosition:0})?I=0:O=!1:L===0?v>-1.5?i({dragNode:j,dropNode:$,dropPosition:1})?I=1:O=!1:i({dragNode:j,dropNode:$,dropPosition:0})?I=0:i({dragNode:j,dropNode:$,dropPosition:1})?I=1:O=!1:i({dragNode:j,dropNode:$,dropPosition:1})?I=1:O=!1,{dropPosition:I,dropLevelOffset:L,dropTargetKey:C.key,dropTargetPos:C.pos,dragOverNodeKey:_,dropContainerKey:I===0?null:((u=C.parent)===null||u===void 0?void 0:u.key)||null,dropAllowed:O}}function Io(n,r){if(n){var e=r.multiple;return e?n.slice():n.length?[n[0]]:n}}function ti(n){if(!n)return null;var r;if(Array.isArray(n))r={checkedKeys:n,halfCheckedKeys:void 0};else if(Sr(n)==="object")r={checkedKeys:n.checked||void 0,halfCheckedKeys:n.halfChecked||void 0};else return _t(!1,"`checkedKeys` is not an array or an object"),null;return r}function To(n,r){var e=new Set;function t(a){if(!e.has(a)){var i=Ht(r,a);if(i){e.add(a);var l=i.parent,o=i.node;o.disabled||l&&t(l.key)}}}return(n||[]).forEach(function(a){t(a)}),Xe(e)}function Gh(n){var r=n.dropPosition,e=n.dropLevelOffset,t=n.indent,a={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(r){case-1:a.top=0,a.left=-e*t;break;case 1:a.bottom=0,a.left=-e*t;break;case 0:a.bottom=0,a.left=t;break}return d.createElement("div",{style:a})}function ol(n){if(n==null)throw new TypeError("Cannot destructure "+n)}function Wh(n,r){var e=d.useState(!1),t=be(e,2),a=t[0],i=t[1];Lr(function(){if(a)return n(),function(){r()}},[a]),Lr(function(){return i(!0),function(){i(!1)}},[])}var Yh=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],sl=function(r,e){var t=r.className,a=r.style,i=r.motion,l=r.motionNodes,o=r.motionType,s=r.onMotionStart,c=r.onMotionEnd,u=r.active,h=r.treeNodeRequiredProps,m=$t(r,Yh),g=d.useState(!0),b=be(g,2),y=b[0],f=b[1],v=d.useContext(Fi),S=v.prefixCls,C=l&&o!=="hide";Lr(function(){l&&C!==y&&f(C)},[l]);var M=function(){l&&s()},E=d.useRef(!1),w=function(){l&&!E.current&&(E.current=!0,c())};Wh(M,w);var k=function(_){C===_&&w()};return l?d.createElement(Pi,Fe({ref:e,visible:y},i,{motionAppear:o==="show",onVisibleChanged:k}),function(P,_){var I=P.className,L=P.style;return d.createElement("div",{ref:_,className:oe("".concat(S,"-treenode-motion"),I),style:L},l.map(function(T){var j=Object.assign({},(ol(T.data),T.data)),$=T.title,O=T.key,H=T.isStart,V=T.isEnd;delete j.children;var Y=jn(O,h);return d.createElement(Gn,Fe({},j,Y,{title:$,active:u,data:T.data,key:O,isStart:H,isEnd:V}))}))}):d.createElement(Gn,Fe({domRef:e,className:t,style:a},m,{active:u}))};sl.displayName="MotionTreeNode";var qh=d.forwardRef(sl);function Xh(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],e=n.length,t=r.length;if(Math.abs(e-t)!==1)return{add:!1,key:null};function a(i,l){var o=new Map;i.forEach(function(c){o.set(c,!0)});var s=l.filter(function(c){return!o.has(c)});return s.length===1?s[0]:null}return e<t?{add:!0,key:a(n,r)}:{add:!1,key:a(r,n)}}function _o(n,r,e){var t=n.findIndex(function(o){return o.key===e}),a=n[t+1],i=r.findIndex(function(o){return o.key===e});if(a){var l=r.findIndex(function(o){return o.key===a.key});return r.slice(i+1,l)}return r.slice(i+1)}var Zh=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],Ro={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Qh=function(){},rn="RC_TREE_MOTION_".concat(Math.random()),Ei={key:rn},ll={key:rn,level:0,index:0,pos:"0",node:Ei,nodes:[Ei]},$o={parent:null,children:[],pos:ll.pos,data:Ei,title:null,key:rn,isStart:[],isEnd:[]};function Do(n,r,e,t){return r===!1||!e?n:n.slice(0,Math.ceil(e/t)+1)}function Lo(n){var r=n.key,e=n.pos;return Zn(r,e)}function Jh(n){for(var r=String(n.data.key),e=n;e.parent;)e=e.parent,r="".concat(e.data.key," > ").concat(r);return r}var cl=d.forwardRef(function(n,r){var e=n.prefixCls,t=n.data;n.selectable,n.checkable;var a=n.expandedKeys,i=n.selectedKeys,l=n.checkedKeys,o=n.loadedKeys,s=n.loadingKeys,c=n.halfCheckedKeys,u=n.keyEntities,h=n.disabled,m=n.dragging,g=n.dragOverNodeKey,b=n.dropPosition,y=n.motion,f=n.height,v=n.itemHeight,S=n.virtual,C=n.focusable,M=n.activeItem,E=n.focused,w=n.tabIndex,k=n.onKeyDown,P=n.onFocus,_=n.onBlur,I=n.onActiveChange,L=n.onListChangeStart,T=n.onListChangeEnd,j=$t(n,Zh),$=d.useRef(null),O=d.useRef(null);d.useImperativeHandle(r,function(){return{scrollTo:function(we){$.current.scrollTo(we)},getIndentWidth:function(){return O.current.offsetWidth}}});var H=d.useState(a),V=be(H,2),Y=V[0],X=V[1],pe=d.useState(t),W=be(pe,2),Q=W[0],re=W[1],ne=d.useState(t),U=be(ne,2),ie=U[0],ce=U[1],G=d.useState([]),q=be(G,2),J=q[0],le=q[1],Ue=d.useState(null),Qe=be(Ue,2),et=Qe[0],Ce=Qe[1],Je=d.useRef(t);Je.current=t;function Ee(){var ge=Je.current;re(ge),ce(ge),le([]),Ce(null),T()}Lr(function(){X(a);var ge=Xh(Y,a);if(ge.key!==null)if(ge.add){var we=Q.findIndex(function(xe){var ue=xe.key;return ue===ge.key}),$e=Do(_o(Q,t,ge.key),S,f,v),Ge=Q.slice();Ge.splice(we+1,0,$o),ce(Ge),le($e),Ce("show")}else{var Ae=t.findIndex(function(xe){var ue=xe.key;return ue===ge.key}),ve=Do(_o(t,Q,ge.key),S,f,v),Be=t.slice();Be.splice(Ae+1,0,$o),ce(Be),le(ve),Ce("hide")}else Q!==t&&(re(t),ce(t))},[a,t]),d.useEffect(function(){m||Ee()},[m]);var Ze=y?ie:t,Me={expandedKeys:a,selectedKeys:i,loadedKeys:o,loadingKeys:s,checkedKeys:l,halfCheckedKeys:c,dragOverNodeKey:g,dropPosition:b,keyEntities:u};return d.createElement(d.Fragment,null,E&&M&&d.createElement("span",{style:Ro,"aria-live":"assertive"},Jh(M)),d.createElement("div",null,d.createElement("input",{style:Ro,disabled:C===!1||h,tabIndex:C!==!1?w:null,onKeyDown:k,onFocus:P,onBlur:_,value:"",onChange:Qh,"aria-label":"for screen reader"})),d.createElement("div",{className:"".concat(e,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden",border:0,padding:0}},d.createElement("div",{className:"".concat(e,"-indent")},d.createElement("div",{ref:O,className:"".concat(e,"-indent-unit")}))),d.createElement(zc,Fe({},j,{data:Ze,itemKey:Lo,height:f,fullHeight:!1,virtual:S,itemHeight:v,prefixCls:"".concat(e,"-list"),ref:$,onVisibleChange:function(we,$e){var Ge=new Set(we),Ae=$e.filter(function(ve){return!Ge.has(ve)});Ae.some(function(ve){return Lo(ve)===rn})&&Ee()}}),function(ge){var we=ge.pos,$e=Object.assign({},(ol(ge.data),ge.data)),Ge=ge.title,Ae=ge.key,ve=ge.isStart,Be=ge.isEnd,xe=Zn(Ae,we);delete $e.key,delete $e.children;var ue=jn(xe,Me);return d.createElement(qh,Fe({},$e,ue,{title:Ge,active:!!M&&Ae===M.key,pos:we,data:ge.data,isStart:ve,isEnd:Be,motion:y,motionNodes:Ae===rn?J:null,motionType:et,onMotionStart:L,onMotionEnd:Ee,treeNodeRequiredProps:Me,onMouseMove:function(){I(null)}}))}))});cl.displayName="NodeList";var eg=10,Gi=function(n){Oi(e,n);var r=Ii(e);function e(){var t;kn(this,e);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=r.call.apply(r,[this].concat(i)),B(ee(t),"destroyed",!1),B(ee(t),"delayedDragEnterLogic",void 0),B(ee(t),"loadingRetryTimes",{}),B(ee(t),"state",{keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:wa()}),B(ee(t),"dragStartMousePosition",null),B(ee(t),"dragNode",void 0),B(ee(t),"currentMouseOverDroppableNodeKey",null),B(ee(t),"listRef",d.createRef()),B(ee(t),"onNodeDragStart",function(o,s){var c=t.state,u=c.expandedKeys,h=c.keyEntities,m=t.props.onDragStart,g=s.props.eventKey;t.dragNode=s,t.dragStartMousePosition={x:o.clientX,y:o.clientY};var b=Ar(u,g);t.setState({draggingNodeKey:g,dragChildrenKeys:Kh(g,h),indent:t.listRef.current.getIndentWidth()}),t.setExpandedKeys(b),window.addEventListener("dragend",t.onWindowDragEnd),m==null||m({event:o,node:xt(s.props)})}),B(ee(t),"onNodeDragEnter",function(o,s){var c=t.state,u=c.expandedKeys,h=c.keyEntities,m=c.dragChildrenKeys,g=c.flattenNodes,b=c.indent,y=t.props,f=y.onDragEnter,v=y.onExpand,S=y.allowDrop,C=y.direction,M=s.props,E=M.pos,w=M.eventKey,k=ee(t),P=k.dragNode;if(t.currentMouseOverDroppableNodeKey!==w&&(t.currentMouseOverDroppableNodeKey=w),!P){t.resetDragState();return}var _=Oo(o,P,s,b,t.dragStartMousePosition,S,g,h,u,C),I=_.dropPosition,L=_.dropLevelOffset,T=_.dropTargetKey,j=_.dropContainerKey,$=_.dropTargetPos,O=_.dropAllowed,H=_.dragOverNodeKey;if(m.indexOf(T)!==-1||!O){t.resetDragState();return}if(t.delayedDragEnterLogic||(t.delayedDragEnterLogic={}),Object.keys(t.delayedDragEnterLogic).forEach(function(V){clearTimeout(t.delayedDragEnterLogic[V])}),P.props.eventKey!==s.props.eventKey&&(o.persist(),t.delayedDragEnterLogic[E]=window.setTimeout(function(){if(t.state.draggingNodeKey!==null){var V=Xe(u),Y=Ht(h,s.props.eventKey);Y&&(Y.children||[]).length&&(V=_r(u,s.props.eventKey)),"expandedKeys"in t.props||t.setExpandedKeys(V),v==null||v(V,{node:xt(s.props),expanded:!0,nativeEvent:o.nativeEvent})}},800)),P.props.eventKey===T&&L===0){t.resetDragState();return}t.setState({dragOverNodeKey:H,dropPosition:I,dropLevelOffset:L,dropTargetKey:T,dropContainerKey:j,dropTargetPos:$,dropAllowed:O}),f==null||f({event:o,node:xt(s.props),expandedKeys:u})}),B(ee(t),"onNodeDragOver",function(o,s){var c=t.state,u=c.dragChildrenKeys,h=c.flattenNodes,m=c.keyEntities,g=c.expandedKeys,b=c.indent,y=t.props,f=y.onDragOver,v=y.allowDrop,S=y.direction,C=ee(t),M=C.dragNode;if(M){var E=Oo(o,M,s,b,t.dragStartMousePosition,v,h,m,g,S),w=E.dropPosition,k=E.dropLevelOffset,P=E.dropTargetKey,_=E.dropContainerKey,I=E.dropAllowed,L=E.dropTargetPos,T=E.dragOverNodeKey;u.indexOf(P)!==-1||!I||(M.props.eventKey===P&&k===0?t.state.dropPosition===null&&t.state.dropLevelOffset===null&&t.state.dropTargetKey===null&&t.state.dropContainerKey===null&&t.state.dropTargetPos===null&&t.state.dropAllowed===!1&&t.state.dragOverNodeKey===null||t.resetDragState():w===t.state.dropPosition&&k===t.state.dropLevelOffset&&P===t.state.dropTargetKey&&_===t.state.dropContainerKey&&L===t.state.dropTargetPos&&I===t.state.dropAllowed&&T===t.state.dragOverNodeKey||t.setState({dropPosition:w,dropLevelOffset:k,dropTargetKey:P,dropContainerKey:_,dropTargetPos:L,dropAllowed:I,dragOverNodeKey:T}),f==null||f({event:o,node:xt(s.props)}))}}),B(ee(t),"onNodeDragLeave",function(o,s){t.currentMouseOverDroppableNodeKey===s.props.eventKey&&!o.currentTarget.contains(o.relatedTarget)&&(t.resetDragState(),t.currentMouseOverDroppableNodeKey=null);var c=t.props.onDragLeave;c==null||c({event:o,node:xt(s.props)})}),B(ee(t),"onWindowDragEnd",function(o){t.onNodeDragEnd(o,null,!0),window.removeEventListener("dragend",t.onWindowDragEnd)}),B(ee(t),"onNodeDragEnd",function(o,s){var c=t.props.onDragEnd;t.setState({dragOverNodeKey:null}),t.cleanDragState(),c==null||c({event:o,node:xt(s.props)}),t.dragNode=null,window.removeEventListener("dragend",t.onWindowDragEnd)}),B(ee(t),"onNodeDrop",function(o,s){var c,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,h=t.state,m=h.dragChildrenKeys,g=h.dropPosition,b=h.dropTargetKey,y=h.dropTargetPos,f=h.dropAllowed;if(f){var v=t.props.onDrop;if(t.setState({dragOverNodeKey:null}),t.cleanDragState(),b!==null){var S=de(de({},jn(b,t.getTreeNodeRequiredProps())),{},{active:((c=t.getActiveItem())===null||c===void 0?void 0:c.key)===b,data:Ht(t.state.keyEntities,b).node}),C=m.indexOf(b)!==-1;_t(!C,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var M=Ui(y),E={event:o,node:xt(S),dragNode:t.dragNode?xt(t.dragNode.props):null,dragNodesKeys:[t.dragNode.props.eventKey].concat(m),dropToGap:g!==0,dropPosition:g+Number(M[M.length-1])};u||v==null||v(E),t.dragNode=null}}}),B(ee(t),"cleanDragState",function(){var o=t.state.draggingNodeKey;o!==null&&t.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),t.dragStartMousePosition=null,t.currentMouseOverDroppableNodeKey=null}),B(ee(t),"triggerExpandActionExpand",function(o,s){var c=t.state,u=c.expandedKeys,h=c.flattenNodes,m=s.expanded,g=s.key,b=s.isLeaf;if(!(b||o.shiftKey||o.metaKey||o.ctrlKey)){var y=h.filter(function(v){return v.key===g})[0],f=xt(de(de({},jn(g,t.getTreeNodeRequiredProps())),{},{data:y.data}));t.setExpandedKeys(m?Ar(u,g):_r(u,g)),t.onNodeExpand(o,f)}}),B(ee(t),"onNodeClick",function(o,s){var c=t.props,u=c.onClick,h=c.expandAction;h==="click"&&t.triggerExpandActionExpand(o,s),u==null||u(o,s)}),B(ee(t),"onNodeDoubleClick",function(o,s){var c=t.props,u=c.onDoubleClick,h=c.expandAction;h==="doubleClick"&&t.triggerExpandActionExpand(o,s),u==null||u(o,s)}),B(ee(t),"onNodeSelect",function(o,s){var c=t.state.selectedKeys,u=t.state,h=u.keyEntities,m=u.fieldNames,g=t.props,b=g.onSelect,y=g.multiple,f=s.selected,v=s[m.key],S=!f;S?y?c=_r(c,v):c=[v]:c=Ar(c,v);var C=c.map(function(M){var E=Ht(h,M);return E?E.node:null}).filter(function(M){return M});t.setUncontrolledState({selectedKeys:c}),b==null||b(c,{event:"select",selected:S,node:s,selectedNodes:C,nativeEvent:o.nativeEvent})}),B(ee(t),"onNodeCheck",function(o,s,c){var u=t.state,h=u.keyEntities,m=u.checkedKeys,g=u.halfCheckedKeys,b=t.props,y=b.checkStrictly,f=b.onCheck,v=s.key,S,C={event:"check",node:s,checked:c,nativeEvent:o.nativeEvent};if(y){var M=c?_r(m,v):Ar(m,v),E=Ar(g,v);S={checked:M,halfChecked:E},C.checkedNodes=M.map(function(L){return Ht(h,L)}).filter(function(L){return L}).map(function(L){return L.node}),t.setUncontrolledState({checkedKeys:M})}else{var w=Sn([].concat(Xe(m),[v]),!0,h),k=w.checkedKeys,P=w.halfCheckedKeys;if(!c){var _=new Set(k);_.delete(v);var I=Sn(Array.from(_),{halfCheckedKeys:P},h);k=I.checkedKeys,P=I.halfCheckedKeys}S=k,C.checkedNodes=[],C.checkedNodesPositions=[],C.halfCheckedKeys=P,k.forEach(function(L){var T=Ht(h,L);if(T){var j=T.node,$=T.pos;C.checkedNodes.push(j),C.checkedNodesPositions.push({node:j,pos:$})}}),t.setUncontrolledState({checkedKeys:k},!1,{halfCheckedKeys:P})}f==null||f(S,C)}),B(ee(t),"onNodeLoad",function(o){var s,c=o.key,u=t.state.keyEntities,h=Ht(u,c);if(!(h!=null&&(s=h.children)!==null&&s!==void 0&&s.length)){var m=new Promise(function(g,b){t.setState(function(y){var f=y.loadedKeys,v=f===void 0?[]:f,S=y.loadingKeys,C=S===void 0?[]:S,M=t.props,E=M.loadData,w=M.onLoad;if(!E||v.indexOf(c)!==-1||C.indexOf(c)!==-1)return null;var k=E(o);return k.then(function(){var P=t.state.loadedKeys,_=_r(P,c);w==null||w(_,{event:"load",node:o}),t.setUncontrolledState({loadedKeys:_}),t.setState(function(I){return{loadingKeys:Ar(I.loadingKeys,c)}}),g()}).catch(function(P){if(t.setState(function(I){return{loadingKeys:Ar(I.loadingKeys,c)}}),t.loadingRetryTimes[c]=(t.loadingRetryTimes[c]||0)+1,t.loadingRetryTimes[c]>=eg){var _=t.state.loadedKeys;_t(!1,"Retry for `loadData` many times but still failed. No more retry."),t.setUncontrolledState({loadedKeys:_r(_,c)}),g()}b(P)}),{loadingKeys:_r(C,c)}})});return m.catch(function(){}),m}}),B(ee(t),"onNodeMouseEnter",function(o,s){var c=t.props.onMouseEnter;c==null||c({event:o,node:s})}),B(ee(t),"onNodeMouseLeave",function(o,s){var c=t.props.onMouseLeave;c==null||c({event:o,node:s})}),B(ee(t),"onNodeContextMenu",function(o,s){var c=t.props.onRightClick;c&&(o.preventDefault(),c({event:o,node:s}))}),B(ee(t),"onFocus",function(){var o=t.props.onFocus;t.setState({focused:!0});for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];o==null||o.apply(void 0,c)}),B(ee(t),"onBlur",function(){var o=t.props.onBlur;t.setState({focused:!1}),t.onActiveChange(null);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];o==null||o.apply(void 0,c)}),B(ee(t),"getTreeNodeRequiredProps",function(){var o=t.state,s=o.expandedKeys,c=o.selectedKeys,u=o.loadedKeys,h=o.loadingKeys,m=o.checkedKeys,g=o.halfCheckedKeys,b=o.dragOverNodeKey,y=o.dropPosition,f=o.keyEntities;return{expandedKeys:s||[],selectedKeys:c||[],loadedKeys:u||[],loadingKeys:h||[],checkedKeys:m||[],halfCheckedKeys:g||[],dragOverNodeKey:b,dropPosition:y,keyEntities:f}}),B(ee(t),"setExpandedKeys",function(o){var s=t.state,c=s.treeData,u=s.fieldNames,h=Za(c,o,u);t.setUncontrolledState({expandedKeys:o,flattenNodes:h},!0)}),B(ee(t),"onNodeExpand",function(o,s){var c=t.state.expandedKeys,u=t.state,h=u.listChanging,m=u.fieldNames,g=t.props,b=g.onExpand,y=g.loadData,f=s.expanded,v=s[m.key];if(!h){var S=c.indexOf(v),C=!f;if(_t(f&&S!==-1||!f&&S===-1,"Expand state not sync with index check"),C?c=_r(c,v):c=Ar(c,v),t.setExpandedKeys(c),b==null||b(c,{node:s,expanded:C,nativeEvent:o.nativeEvent}),C&&y){var M=t.onNodeLoad(s);M&&M.then(function(){var E=Za(t.state.treeData,c,m);t.setUncontrolledState({flattenNodes:E})}).catch(function(){var E=t.state.expandedKeys,w=Ar(E,v);t.setExpandedKeys(w)})}}}),B(ee(t),"onListChangeStart",function(){t.setUncontrolledState({listChanging:!0})}),B(ee(t),"onListChangeEnd",function(){setTimeout(function(){t.setUncontrolledState({listChanging:!1})})}),B(ee(t),"onActiveChange",function(o){var s=t.state.activeKey,c=t.props,u=c.onActiveChange,h=c.itemScrollOffset,m=h===void 0?0:h;s!==o&&(t.setState({activeKey:o}),o!==null&&t.scrollTo({key:o,offset:m}),u==null||u(o))}),B(ee(t),"getActiveItem",function(){var o=t.state,s=o.activeKey,c=o.flattenNodes;return s===null?null:c.find(function(u){var h=u.key;return h===s})||null}),B(ee(t),"offsetActiveKey",function(o){var s=t.state,c=s.flattenNodes,u=s.activeKey,h=c.findIndex(function(b){var y=b.key;return y===u});h===-1&&o<0&&(h=c.length),h=(h+o+c.length)%c.length;var m=c[h];if(m){var g=m.key;t.onActiveChange(g)}else t.onActiveChange(null)}),B(ee(t),"onKeyDown",function(o){var s=t.state,c=s.activeKey,u=s.expandedKeys,h=s.checkedKeys,m=s.fieldNames,g=t.props,b=g.onKeyDown,y=g.checkable,f=g.selectable;switch(o.which){case qe.UP:{t.offsetActiveKey(-1),o.preventDefault();break}case qe.DOWN:{t.offsetActiveKey(1),o.preventDefault();break}}var v=t.getActiveItem();if(v&&v.data){var S=t.getTreeNodeRequiredProps(),C=v.data.isLeaf===!1||!!(v.data[m.children]||[]).length,M=xt(de(de({},jn(c,S)),{},{data:v.data,active:!0}));switch(o.which){case qe.LEFT:{C&&u.includes(c)?t.onNodeExpand({},M):v.parent&&t.onActiveChange(v.parent.key),o.preventDefault();break}case qe.RIGHT:{C&&!u.includes(c)?t.onNodeExpand({},M):v.children&&v.children.length&&t.onActiveChange(v.children[0].key),o.preventDefault();break}case qe.ENTER:case qe.SPACE:{y&&!M.disabled&&M.checkable!==!1&&!M.disableCheckbox?t.onNodeCheck({},M,!h.includes(c)):!y&&f&&!M.disabled&&M.selectable!==!1&&t.onNodeSelect({},M);break}}}b==null||b(o)}),B(ee(t),"setUncontrolledState",function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!t.destroyed){var u=!1,h=!0,m={};Object.keys(o).forEach(function(g){if(g in t.props){h=!1;return}u=!0,m[g]=o[g]}),u&&(!s||h)&&t.setState(de(de({},m),c))}}),B(ee(t),"scrollTo",function(o){t.listRef.current.scrollTo(o)}),t}return Pn(e,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var a=this.props,i=a.activeKey,l=a.itemScrollOffset,o=l===void 0?0:l;i!==void 0&&i!==this.state.activeKey&&(this.setState({activeKey:i}),i!==null&&this.scrollTo({key:i,offset:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var a=this.state,i=a.focused,l=a.flattenNodes,o=a.keyEntities,s=a.draggingNodeKey,c=a.activeKey,u=a.dropLevelOffset,h=a.dropContainerKey,m=a.dropTargetKey,g=a.dropPosition,b=a.dragOverNodeKey,y=a.indent,f=this.props,v=f.prefixCls,S=f.className,C=f.style,M=f.showLine,E=f.focusable,w=f.tabIndex,k=w===void 0?0:w,P=f.selectable,_=f.showIcon,I=f.icon,L=f.switcherIcon,T=f.draggable,j=f.checkable,$=f.checkStrictly,O=f.disabled,H=f.motion,V=f.loadData,Y=f.filterTreeNode,X=f.height,pe=f.itemHeight,W=f.virtual,Q=f.titleRender,re=f.dropIndicatorRender,ne=f.onContextMenu,U=f.onScroll,ie=f.direction,ce=f.rootClassName,G=f.rootStyle,q=Ta(this.props,{aria:!0,data:!0}),J;return T&&(Sr(T)==="object"?J=T:typeof T=="function"?J={nodeDraggable:T}:J={}),d.createElement(Fi.Provider,{value:{prefixCls:v,selectable:P,showIcon:_,icon:I,switcherIcon:L,draggable:J,draggingNodeKey:s,checkable:j,checkStrictly:$,disabled:O,keyEntities:o,dropLevelOffset:u,dropContainerKey:h,dropTargetKey:m,dropPosition:g,dragOverNodeKey:b,indent:y,direction:ie,dropIndicatorRender:re,loadData:V,filterTreeNode:Y,titleRender:Q,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop}},d.createElement("div",{role:"tree",className:oe(v,S,ce,B(B(B({},"".concat(v,"-show-line"),M),"".concat(v,"-focused"),i),"".concat(v,"-active-focused"),c!==null)),style:G},d.createElement(cl,Fe({ref:this.listRef,prefixCls:v,style:C,data:l,disabled:O,selectable:P,checkable:!!j,motion:H,dragging:s!==null,height:X,itemHeight:pe,virtual:W,focusable:E,focused:i,tabIndex:k,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:ne,onScroll:U},this.getTreeNodeRequiredProps(),q))))}}],[{key:"getDerivedStateFromProps",value:function(a,i){var l=i.prevProps,o={prevProps:a};function s(w){return!l&&w in a||l&&l[w]!==a[w]}var c,u=i.fieldNames;if(s("fieldNames")&&(u=wa(a.fieldNames),o.fieldNames=u),s("treeData")?c=a.treeData:s("children")&&(_t(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),c=qu(a.children)),c){o.treeData=c;var h=Ds(c,{fieldNames:u});o.keyEntities=de(B({},rn,ll),h.keyEntities)}var m=o.keyEntities||i.keyEntities;if(s("expandedKeys")||l&&s("autoExpandParent"))o.expandedKeys=a.autoExpandParent||!l&&a.defaultExpandParent?To(a.expandedKeys,m):a.expandedKeys;else if(!l&&a.defaultExpandAll){var g=de({},m);delete g[rn],o.expandedKeys=Object.keys(g).map(function(w){return g[w].key})}else!l&&a.defaultExpandedKeys&&(o.expandedKeys=a.autoExpandParent||a.defaultExpandParent?To(a.defaultExpandedKeys,m):a.defaultExpandedKeys);if(o.expandedKeys||delete o.expandedKeys,c||o.expandedKeys){var b=Za(c||i.treeData,o.expandedKeys||i.expandedKeys,u);o.flattenNodes=b}if(a.selectable&&(s("selectedKeys")?o.selectedKeys=Io(a.selectedKeys,a):!l&&a.defaultSelectedKeys&&(o.selectedKeys=Io(a.defaultSelectedKeys,a))),a.checkable){var y;if(s("checkedKeys")?y=ti(a.checkedKeys)||{}:!l&&a.defaultCheckedKeys?y=ti(a.defaultCheckedKeys)||{}:c&&(y=ti(a.checkedKeys)||{checkedKeys:i.checkedKeys,halfCheckedKeys:i.halfCheckedKeys}),y){var f=y,v=f.checkedKeys,S=v===void 0?[]:v,C=f.halfCheckedKeys,M=C===void 0?[]:C;if(!a.checkStrictly){var E=Sn(S,!0,m);S=E.checkedKeys,M=E.halfCheckedKeys}o.checkedKeys=S,o.halfCheckedKeys=M}}return s("loadedKeys")&&(o.loadedKeys=a.loadedKeys),o}}]),e}(d.Component);B(Gi,"defaultProps",{prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:Gh,allowDrop:function(){return!0},expandAction:!1});B(Gi,"TreeNode",Gn);const tg=new hc("ant-tree-node-fx-do-not-use",{"0%":{opacity:0},"100%":{opacity:1}}),rg=(n,r)=>({[`.${n}-switcher-icon`]:{display:"inline-block",fontSize:10,verticalAlign:"baseline",svg:{transition:`transform ${r.motionDurationSlow}`}}}),ng=(n,r)=>({[`.${n}-drop-indicator`]:{position:"absolute",zIndex:1,height:2,backgroundColor:r.colorPrimary,borderRadius:1,pointerEvents:"none","&:after":{position:"absolute",top:-3,insetInlineStart:-6,width:8,height:8,backgroundColor:"transparent",border:`${te(r.lineWidthBold)} solid ${r.colorPrimary}`,borderRadius:"50%",content:'""'}}}),ag=(n,r)=>{const{treeCls:e,treeNodeCls:t,treeNodePadding:a,titleHeight:i,nodeSelectedBg:l,nodeHoverBg:o}=r,s=r.paddingXS;return{[e]:Object.assign(Object.assign({},nr(r)),{background:r.colorBgContainer,borderRadius:r.borderRadius,transition:`background-color ${r.motionDurationSlow}`,[`&${e}-rtl`]:{[`${e}-switcher`]:{"&_close":{[`${e}-switcher-icon`]:{svg:{transform:"rotate(90deg)"}}}}},[`&-focused:not(:hover):not(${e}-active-focused)`]:Object.assign({},gs(r)),[`${e}-list-holder-inner`]:{alignItems:"flex-start"},[`&${e}-block-node`]:{[`${e}-list-holder-inner`]:{alignItems:"stretch",[`${e}-node-content-wrapper`]:{flex:"auto"},[`${t}.dragging`]:{position:"relative","&:after":{position:"absolute",top:0,insetInlineEnd:0,bottom:a,insetInlineStart:0,border:`1px solid ${r.colorPrimary}`,opacity:0,animationName:tg,animationDuration:r.motionDurationSlow,animationPlayState:"running",animationFillMode:"forwards",content:'""',pointerEvents:"none"}}}},[t]:{display:"flex",alignItems:"flex-start",padding:`0 0 ${te(a)} 0`,outline:"none","&-rtl":{direction:"rtl"},"&-disabled":{[`${e}-node-content-wrapper`]:{color:r.colorTextDisabled,cursor:"not-allowed","&:hover":{background:"transparent"}}},[`&-active ${e}-node-content-wrapper`]:{background:r.controlItemBgHover},[`&:not(${t}-disabled).filter-node ${e}-title`]:{color:r.colorPrimary,fontWeight:500},"&-draggable":{cursor:"grab",[`${e}-draggable-icon`]:{flexShrink:0,width:i,lineHeight:te(i),textAlign:"center",visibility:"visible",opacity:.2,transition:`opacity ${r.motionDurationSlow}`,[`${t}:hover &`]:{opacity:.45}},[`&${t}-disabled`]:{[`${e}-draggable-icon`]:{visibility:"hidden"}}}},[`${e}-indent`]:{alignSelf:"stretch",whiteSpace:"nowrap",userSelect:"none","&-unit":{display:"inline-block",width:i}},[`${e}-draggable-icon`]:{visibility:"hidden"},[`${e}-switcher`]:Object.assign(Object.assign({},rg(n,r)),{position:"relative",flex:"none",alignSelf:"stretch",width:i,margin:0,lineHeight:te(i),textAlign:"center",cursor:"pointer",userSelect:"none",transition:`all ${r.motionDurationSlow}`,"&-noop":{cursor:"unset"},"&:before":{pointerEvents:"none",content:'""',width:i,height:i,position:"absolute",left:{_skip_check_:!0,value:0},top:0,borderRadius:r.borderRadius,transition:`all ${r.motionDurationSlow}`},[`&:not(${e}-switcher-noop):hover:before`]:{backgroundColor:r.colorBgTextHover},"&_close":{[`${e}-switcher-icon`]:{svg:{transform:"rotate(-90deg)"}}},"&-loading-icon":{color:r.colorPrimary},"&-leaf-line":{position:"relative",zIndex:1,display:"inline-block",width:"100%",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:r.calc(i).div(2).equal(),bottom:r.calc(a).mul(-1).equal(),marginInlineStart:-1,borderInlineEnd:`1px solid ${r.colorBorder}`,content:'""'},"&:after":{position:"absolute",width:r.calc(r.calc(i).div(2).equal()).mul(.8).equal(),height:r.calc(i).div(2).equal(),borderBottom:`1px solid ${r.colorBorder}`,content:'""'}}}),[`${e}-checkbox`]:{top:"initial",marginInlineEnd:s,alignSelf:"flex-start",marginTop:r.marginXXS},[`${e}-node-content-wrapper, ${e}-checkbox + span`]:{position:"relative",zIndex:"auto",minHeight:i,margin:0,padding:`0 ${te(r.calc(r.paddingXS).div(2).equal())}`,color:"inherit",lineHeight:te(i),background:"transparent",borderRadius:r.borderRadius,cursor:"pointer",transition:`all ${r.motionDurationMid}, border 0s, line-height 0s, box-shadow 0s`,"&:hover":{backgroundColor:o},[`&${e}-node-selected`]:{backgroundColor:l},[`${e}-iconEle`]:{display:"inline-block",width:i,height:i,lineHeight:te(i),textAlign:"center",verticalAlign:"top","&:empty":{display:"none"}}},[`${e}-unselectable ${e}-node-content-wrapper:hover`]:{backgroundColor:"transparent"},[`${e}-node-content-wrapper`]:Object.assign({lineHeight:te(i),userSelect:"none"},ng(n,r)),[`${t}.drop-container`]:{"> [draggable]":{boxShadow:`0 0 0 2px ${r.colorPrimary}`}},"&-show-line":{[`${e}-indent`]:{"&-unit":{position:"relative",height:"100%","&:before":{position:"absolute",top:0,insetInlineEnd:r.calc(i).div(2).equal(),bottom:r.calc(a).mul(-1).equal(),borderInlineEnd:`1px solid ${r.colorBorder}`,content:'""'},"&-end":{"&:before":{display:"none"}}}},[`${e}-switcher`]:{background:"transparent","&-line-icon":{verticalAlign:"-0.15em"}}},[`${t}-leaf-last`]:{[`${e}-switcher`]:{"&-leaf-line":{"&:before":{top:"auto !important",bottom:"auto !important",height:`${te(r.calc(i).div(2).equal())} !important`}}}}})}},ig=n=>{const{treeCls:r,treeNodeCls:e,treeNodePadding:t,directoryNodeSelectedBg:a,directoryNodeSelectedColor:i}=n;return{[`${r}${r}-directory`]:{[e]:{position:"relative","&:before":{position:"absolute",top:0,insetInlineEnd:0,bottom:t,insetInlineStart:0,transition:`background-color ${n.motionDurationMid}`,content:'""',pointerEvents:"none"},"&:hover":{"&:before":{background:n.controlItemBgHover}},"> *":{zIndex:1},[`${r}-switcher`]:{transition:`color ${n.motionDurationMid}`},[`${r}-node-content-wrapper`]:{borderRadius:0,userSelect:"none","&:hover":{background:"transparent"},[`&${r}-node-selected`]:{color:i,background:"transparent"}},"&-selected":{"\n            &:hover::before,\n            &::before\n          ":{background:a},[`${r}-switcher`]:{color:i},[`${r}-node-content-wrapper`]:{color:i,background:"transparent"}}}}}},ul=(n,r)=>{const e=`.${n}`,t=`${e}-treenode`,a=r.calc(r.paddingXS).div(2).equal(),i=ur(r,{treeCls:e,treeNodeCls:t,treeNodePadding:a});return[ag(n,i),ig(i)]},dl=n=>{const{controlHeightSM:r}=n;return{titleHeight:r,nodeHoverBg:n.controlItemBgHover,nodeSelectedBg:n.controlItemBgActive}},og=n=>{const{colorTextLightSolid:r,colorPrimary:e}=n;return Object.assign(Object.assign({},dl(n)),{directoryNodeSelectedColor:r,directoryNodeSelectedBg:e})};br("Tree",(n,r)=>{let{prefixCls:e}=r;return[{[n.componentCls]:Di(`${e}-checkbox`,n)},ul(e,n),ms(n)]},og);const sg=n=>{const{prefixCls:r,switcherIcon:e,treeNodeProps:t,showLine:a,switcherLoadingIcon:i}=n,{isLeaf:l,expanded:o,loading:s}=t;if(s)return d.isValidElement(i)?i:d.createElement(gc,{className:`${r}-switcher-loading-icon`});let c;if(a&&typeof a=="object"&&(c=a.showLeafIcon),l){if(!a)return null;if(typeof c!="boolean"&&c){const m=typeof c=="function"?c(t):c,g=`${r}-switcher-line-custom-icon`;return d.isValidElement(m)?Fn(m,{className:oe(m.props.className||"",g)}):m}return c?d.createElement(xh,{className:`${r}-switcher-line-icon`}):d.createElement("span",{className:`${r}-switcher-leaf-line`})}const u=`${r}-switcher-icon`,h=typeof e=="function"?e(t):e;return d.isValidElement(h)?Fn(h,{className:oe(h.props.className||"",u)}):h!==void 0?h:a?o?d.createElement(Rh,{className:`${r}-switcher-line-icon`}):d.createElement(Lh,{className:`${r}-switcher-line-icon`}):d.createElement(Eh,{className:u})},lg=function(n){var r=d.useRef({valueLabels:new Map});return d.useMemo(function(){var e=r.current.valueLabels,t=new Map,a=n.map(function(i){var l,o=i.value,s=(l=i.label)!==null&&l!==void 0?l:e.get(o);return t.set(o,s),de(de({},i),{},{label:s})});return r.current.valueLabels=t,[a]},[n])},cg=function(n,r,e,t){return d.useMemo(function(){var a=n.map(function(s){var c=s.value;return c}),i=r.map(function(s){var c=s.value;return c}),l=a.filter(function(s){return!t[s]});if(e){var o=Sn(a,!0,t);a=o.checkedKeys,i=o.halfCheckedKeys}return[Array.from(new Set([].concat(Xe(l),Xe(a)))),i]},[n,r,e,t])};function ug(n){return Array.isArray(n)?n:n!==void 0?[n]:[]}function dg(n){var r=n||{},e=r.label,t=r.value,a=r.children,i=t||"value";return{_title:e?[e]:["title","label"],value:i,key:i,children:a||"children"}}function Mi(n){return!n||n.disabled||n.disableCheckbox||n.checkable===!1}function pg(n,r){var e=[];function t(a){a.forEach(function(i){var l=i[r.children];l&&(e.push(i[r.value]),t(l))})}return t(n),e}function Bo(n){return n==null}const hg=function(n,r){return d.useMemo(function(){var e=Ds(n,{fieldNames:r,initWrapper:function(a){return de(de({},a),{},{valueEntities:new Map})},processEntity:function(a,i){var l=a.node[r.value];i.valueEntities.set(l,a)}});return e},[n,r])};var Wi=function(){return null},gg=["children","value"];function pl(n){return Oa(n).map(function(r){if(!d.isValidElement(r)||!r.type)return null;var e=r,t=e.key,a=e.props,i=a.children,l=a.value,o=$t(a,gg),s=de({key:t,value:l},o),c=pl(i);return c.length&&(s.children=c),s}).filter(function(r){return r})}function Ai(n){if(!n)return n;var r=de({},n);return"props"in r||Object.defineProperty(r,"props",{get:function(){return _t(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),r}}),r}function mg(n,r,e,t,a,i){var l=null,o=null;function s(){function c(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return u.map(function(g,b){var y="".concat(h,"-").concat(b),f=g[i.value],v=e.includes(f),S=c(g[i.children]||[],y,v),C=d.createElement(Wi,g,S.map(function(E){return E.node}));if(r===f&&(l=C),v){var M={pos:y,node:C,children:S};return m||o.push(M),M}return null}).filter(function(g){return g})}o||(o=[],c(t),o.sort(function(u,h){var m=u.node.props.value,g=h.node.props.value,b=e.indexOf(m),y=e.indexOf(g);return b-y}))}Object.defineProperty(n,"triggerNode",{get:function(){return _t(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),s(),l}}),Object.defineProperty(n,"allCheckedNodes",{get:function(){return _t(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),s(),a?o:o.map(function(u){var h=u.node;return h})}})}const fg=function(n,r,e){var t=e.treeNodeFilterProp,a=e.filterTreeNode,i=e.fieldNames,l=i.children;return d.useMemo(function(){if(!r||a===!1)return n;var o;if(typeof a=="function")o=a;else{var s=r.toUpperCase();o=function(h,m){var g=m[t];return String(g).toUpperCase().includes(s)}}function c(u){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return u.reduce(function(m,g){var b=g[l],y=h||o(r,Ai(g)),f=c(b||[],y);return(y||f.length)&&m.push(de(de({},g),{},B({isLeaf:void 0},l,f))),m},[])}return c(n)},[n,r,l,t,a])};function jo(n){var r=d.useRef();r.current=n;var e=d.useCallback(function(){return r.current.apply(r,arguments)},[]);return e}function vg(n,r){var e=r.id,t=r.pId,a=r.rootPId,i={},l=[],o=n.map(function(s){var c=de({},s),u=c[e];return i[u]=c,c.key=c.key||u,c});return o.forEach(function(s){var c=s[t],u=i[c];u&&(u.children=u.children||[],u.children.push(s)),(c===a||!u&&a===null)&&l.push(s)}),l}function yg(n,r,e){return d.useMemo(function(){return n?e?vg(n,de({id:"id",pId:"pId",rootPId:null},e!==!0?e:{})):n:pl(r)},[r,e,n])}var hl=d.createContext(null),gl=d.createContext(null),bg={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},Sg=function(r,e){var t=Hc(),a=t.prefixCls,i=t.multiple,l=t.searchValue,o=t.toggleOpen,s=t.open,c=t.notFoundContent,u=d.useContext(gl),h=u.virtual,m=u.listHeight,g=u.listItemHeight,b=u.listItemScrollOffset,y=u.treeData,f=u.fieldNames,v=u.onSelect,S=u.dropdownMatchSelectWidth,C=u.treeExpandAction,M=u.treeTitleRender,E=u.onPopupScroll,w=d.useContext(hl),k=w.checkable,P=w.checkedKeys,_=w.halfCheckedKeys,I=w.treeExpandedKeys,L=w.treeDefaultExpandAll,T=w.treeDefaultExpandedKeys,j=w.onTreeExpand,$=w.treeIcon,O=w.showTreeIcon,H=w.switcherIcon,V=w.treeLine,Y=w.treeNodeFilterProp,X=w.loadData,pe=w.treeLoadedKeys,W=w.treeMotion,Q=w.onTreeLoad,re=w.keyEntities,ne=d.useRef(),U=mc(function(){return y},[s,y],function(xe,ue){return ue[0]&&xe[1]!==ue[1]}),ie=d.useState(null),ce=be(ie,2),G=ce[0],q=ce[1],J=re[G],le=d.useMemo(function(){return k?{checked:P,halfChecked:_}:null},[k,P,_]);d.useEffect(function(){if(s&&!i&&P.length){var xe;(xe=ne.current)===null||xe===void 0||xe.scrollTo({key:P[0]}),q(P[0])}},[s]);var Ue=String(l).toLowerCase(),Qe=function(ue){return Ue?String(ue[Y]).toLowerCase().includes(Ue):!1},et=d.useState(T),Ce=be(et,2),Je=Ce[0],Ee=Ce[1],Ze=d.useState(null),Me=be(Ze,2),ge=Me[0],we=Me[1],$e=d.useMemo(function(){return I?Xe(I):l?ge:Je},[Je,ge,I,l]);d.useEffect(function(){l&&we(pg(y,f))},[l]);var Ge=function(ue){Ee(ue),we(ue),j&&j(ue)},Ae=function(ue){ue.preventDefault()},ve=function(ue,Te){var We=Te.node;k&&Mi(We)||(v(We.key,{selected:!P.includes(We.key)}),i||o(!1))};if(d.useImperativeHandle(e,function(){var xe;return{scrollTo:(xe=ne.current)===null||xe===void 0?void 0:xe.scrollTo,onKeyDown:function(Te){var We,at=Te.which;switch(at){case qe.UP:case qe.DOWN:case qe.LEFT:case qe.RIGHT:(We=ne.current)===null||We===void 0||We.onKeyDown(Te);break;case qe.ENTER:{if(J){var kt=(J==null?void 0:J.node)||{},At=kt.selectable,Ot=kt.value;At!==!1&&ve(null,{node:{key:G},selected:!P.includes(Ot)})}break}case qe.ESC:o(!1)}},onKeyUp:function(){}}}),U.length===0)return d.createElement("div",{role:"listbox",className:"".concat(a,"-empty"),onMouseDown:Ae},c);var Be={fieldNames:f};return pe&&(Be.loadedKeys=pe),$e&&(Be.expandedKeys=$e),d.createElement("div",{onMouseDown:Ae},J&&s&&d.createElement("span",{style:bg,"aria-live":"assertive"},J.node.value),d.createElement(Gi,Fe({ref:ne,focusable:!1,prefixCls:"".concat(a,"-tree"),treeData:U,height:m,itemHeight:g,itemScrollOffset:b,virtual:h!==!1&&S!==!1,multiple:i,icon:$,showIcon:O,switcherIcon:H,showLine:V,loadData:l?null:X,motion:W,activeKey:G,checkable:k,checkStrictly:!0,checkedKeys:le,selectedKeys:k?[]:P,defaultExpandAll:L,titleRender:M},Be,{onActiveChange:q,onSelect:ve,onCheck:ve,onExpand:Ge,onLoad:Q,filterTreeNode:Qe,expandAction:C,onScroll:E})))},Cg=d.forwardRef(Sg),Yi="SHOW_ALL",qi="SHOW_PARENT",Ba="SHOW_CHILD";function zo(n,r,e,t){var a=new Set(n);return r===Ba?n.filter(function(i){var l=e[i];return!(l&&l.children&&l.children.some(function(o){var s=o.node;return a.has(s[t.value])})&&l.children.every(function(o){var s=o.node;return Mi(s)||a.has(s[t.value])}))}):r===qi?n.filter(function(i){var l=e[i],o=l?l.parent:null;return!(o&&!Mi(o.node)&&a.has(o.key))}):n}var Eg=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","listItemScrollOffset","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion","treeTitleRender","onPopupScroll"];function Mg(n){return!n||Sr(n)!=="object"}var Ag=d.forwardRef(function(n,r){var e=n.id,t=n.prefixCls,a=t===void 0?"rc-tree-select":t,i=n.value,l=n.defaultValue,o=n.onChange,s=n.onSelect,c=n.onDeselect,u=n.searchValue,h=n.inputValue,m=n.onSearch,g=n.autoClearSearchValue,b=g===void 0?!0:g,y=n.filterTreeNode,f=n.treeNodeFilterProp,v=f===void 0?"value":f,S=n.showCheckedStrategy,C=n.treeNodeLabelProp,M=n.multiple,E=n.treeCheckable,w=n.treeCheckStrictly,k=n.labelInValue,P=n.fieldNames,_=n.treeDataSimpleMode,I=n.treeData,L=n.children,T=n.loadData,j=n.treeLoadedKeys,$=n.onTreeLoad,O=n.treeDefaultExpandAll,H=n.treeExpandedKeys,V=n.treeDefaultExpandedKeys,Y=n.onTreeExpand,X=n.treeExpandAction,pe=n.virtual,W=n.listHeight,Q=W===void 0?200:W,re=n.listItemHeight,ne=re===void 0?20:re,U=n.listItemScrollOffset,ie=U===void 0?0:U,ce=n.onDropdownVisibleChange,G=n.dropdownMatchSelectWidth,q=G===void 0?!0:G,J=n.treeLine,le=n.treeIcon,Ue=n.showTreeIcon,Qe=n.switcherIcon,et=n.treeMotion,Ce=n.treeTitleRender,Je=n.onPopupScroll,Ee=$t(n,Eg),Ze=Vc(e),Me=E&&!w,ge=E||w,we=w||k,$e=ge||M,Ge=Wt(l,{value:i}),Ae=be(Ge,2),ve=Ae[0],Be=Ae[1],xe=d.useMemo(function(){return E?S||Ba:Yi},[S,E]),ue=d.useMemo(function(){return dg(P)},[JSON.stringify(P)]),Te=Wt("",{value:u!==void 0?u:h,postState:function(ke){return ke||""}}),We=be(Te,2),at=We[0],kt=We[1],At=function(ke){kt(ke),m==null||m(ke)},Ot=yg(I,L,_),lt=hg(Ot,ue),De=lt.keyEntities,gt=lt.valueEntities,dr=d.useCallback(function(_e){var ke=[],Ye=[];return _e.forEach(function(tt){gt.has(tt)?Ye.push(tt):ke.push(tt)}),{missingRawValues:ke,existRawValues:Ye}},[gt]),Yt=fg(Ot,at,{fieldNames:ue,treeNodeFilterProp:v,filterTreeNode:y}),Nt=d.useCallback(function(_e){if(_e){if(C)return _e[C];for(var ke=ue._title,Ye=0;Ye<ke.length;Ye+=1){var tt=_e[ke[Ye]];if(tt!==void 0)return tt}}},[ue,C]),Et=d.useCallback(function(_e){var ke=ug(_e);return ke.map(function(Ye){return Mg(Ye)?{value:Ye}:Ye})},[]),ae=d.useCallback(function(_e){var ke=Et(_e);return ke.map(function(Ye){var tt=Ye.label,wt=Ye.value,dt=Ye.halfChecked,rt,he=gt.get(wt);if(he){var N;tt=Ce?Ce(he.node):(N=tt)!==null&&N!==void 0?N:Nt(he.node),rt=he.node.disabled}else if(tt===void 0){var R=Et(ve).find(function(F){return F.value===wt});tt=R.label}return{label:tt,value:wt,halfChecked:dt,disabled:rt}})},[gt,Nt,Et,ve]),se=d.useMemo(function(){return Et(ve===null?[]:ve)},[Et,ve]),Ie=d.useMemo(function(){var _e=[],ke=[];return se.forEach(function(Ye){Ye.halfChecked?ke.push(Ye):_e.push(Ye)}),[_e,ke]},[se]),ye=be(Ie,2),Mt=ye[0],Dt=ye[1],Pt=d.useMemo(function(){return Mt.map(function(_e){return _e.value})},[Mt]),Hr=cg(Mt,Dt,Me,De),Vr=be(Hr,2),pr=Vr[0],hr=Vr[1],Kr=d.useMemo(function(){var _e=zo(pr,xe,De,ue),ke=_e.map(function(dt){var rt,he;return(rt=(he=De[dt])===null||he===void 0||(he=he.node)===null||he===void 0?void 0:he[ue.value])!==null&&rt!==void 0?rt:dt}),Ye=ke.map(function(dt){var rt=Mt.find(function(N){return N.value===dt}),he=k?rt==null?void 0:rt.label:Ce==null?void 0:Ce(rt);return{value:dt,label:he}}),tt=ae(Ye),wt=tt[0];return!$e&&wt&&Bo(wt.value)&&Bo(wt.label)?[]:tt.map(function(dt){var rt;return de(de({},dt),{},{label:(rt=dt.label)!==null&&rt!==void 0?rt:dt.value})})},[ue,$e,pr,Mt,ae,xe,De]),Fr=lg(Kr),Or=be(Fr,1),gr=Or[0],Cr=jo(function(_e,ke,Ye){var tt=ae(_e);if(Be(tt),b&&kt(""),o){var wt=_e;if(Me){var dt=zo(_e,xe,De,ue);wt=dt.map(function(Pe){var it=gt.get(Pe);return it?it.node[ue.value]:Pe})}var rt=ke||{triggerValue:void 0,selected:void 0},he=rt.triggerValue,N=rt.selected,R=wt;if(w){var F=Dt.filter(function(Pe){return!wt.includes(Pe.value)});R=[].concat(Xe(R),Xe(F))}var Z=ae(R),Ne={preValue:Mt,triggerValue:he},me=!0;(w||Ye==="selection"&&!N)&&(me=!1),mg(Ne,he,_e,Ot,me,ue),ge?Ne.checked=N:Ne.selected=N;var Le=we?Z:Z.map(function(Pe){return Pe.value});o($e?Le:Le[0],we?null:Z.map(function(Pe){return Pe.label}),Ne)}}),Tt=d.useCallback(function(_e,ke){var Ye,tt=ke.selected,wt=ke.source,dt=De[_e],rt=dt==null?void 0:dt.node,he=(Ye=rt==null?void 0:rt[ue.value])!==null&&Ye!==void 0?Ye:_e;if(!$e)Cr([he],{selected:!0,triggerValue:he},"option");else{var N=tt?[].concat(Xe(Pt),[he]):pr.filter(function(it){return it!==he});if(Me){var R=dr(N),F=R.missingRawValues,Z=R.existRawValues,Ne=Z.map(function(it){return gt.get(it).key}),me;if(tt){var Le=Sn(Ne,!0,De);me=Le.checkedKeys}else{var Pe=Sn(Ne,{halfCheckedKeys:hr},De);me=Pe.checkedKeys}N=[].concat(Xe(F),Xe(me.map(function(it){return De[it].node[ue.value]})))}Cr(N,{selected:tt,triggerValue:he},wt||"option")}tt||!$e?s==null||s(he,Ai(rt)):c==null||c(he,Ai(rt))},[dr,gt,De,ue,$e,Pt,Cr,Me,s,c,pr,hr]),sn=d.useCallback(function(_e){if(ce){var ke={};Object.defineProperty(ke,"documentClickClose",{get:function(){return _t(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),ce(_e,ke)}},[ce]),ir=jo(function(_e,ke){var Ye=_e.map(function(tt){return tt.value});if(ke.type==="clear"){Cr(Ye,{},"selection");return}ke.values.length&&Tt(ke.values[0].value,{selected:!1,source:"selection"})}),ln=d.useMemo(function(){return{virtual:pe,dropdownMatchSelectWidth:q,listHeight:Q,listItemHeight:ne,listItemScrollOffset:ie,treeData:Yt,fieldNames:ue,onSelect:Tt,treeExpandAction:X,treeTitleRender:Ce,onPopupScroll:Je}},[pe,q,Q,ne,ie,Yt,ue,Tt,X,Ce,Je]),cn=d.useMemo(function(){return{checkable:ge,loadData:T,treeLoadedKeys:j,onTreeLoad:$,checkedKeys:pr,halfCheckedKeys:hr,treeDefaultExpandAll:O,treeExpandedKeys:H,treeDefaultExpandedKeys:V,onTreeExpand:Y,treeIcon:le,treeMotion:et,showTreeIcon:Ue,switcherIcon:Qe,treeLine:J,treeNodeFilterProp:v,keyEntities:De}},[ge,T,j,$,pr,hr,O,H,V,Y,le,et,Ue,Qe,J,v,De]);return d.createElement(gl.Provider,{value:ln},d.createElement(hl.Provider,{value:cn},d.createElement(Kc,Fe({ref:r},Ee,{id:Ze,prefixCls:a,mode:$e?"multiple":void 0,displayValues:gr,onDisplayValuesChange:ir,searchValue:at,onSearch:At,OptionList:Cg,emptyOptions:!Ot.length,onDropdownVisibleChange:sn,dropdownMatchSelectWidth:q}))))}),Jn=Ag;Jn.TreeNode=Wi;Jn.SHOW_ALL=Yi;Jn.SHOW_PARENT=qi;Jn.SHOW_CHILD=Ba;const xg=n=>{const{componentCls:r,treePrefixCls:e,colorBgElevated:t}=n,a=`.${e}`;return[{[`${r}-dropdown`]:[{padding:`${te(n.paddingXS)} ${te(n.calc(n.paddingXS).div(2).equal())}`},ul(e,ur(n,{colorBgContainer:t})),{[a]:{borderRadius:0,[`${a}-list-holder-inner`]:{alignItems:"stretch",[`${a}-treenode`]:{[`${a}-node-content-wrapper`]:{flex:"auto"}}}}},Di(`${e}-checkbox`,n),{"&-rtl":{direction:"rtl",[`${a}-switcher${a}-switcher_close`]:{[`${a}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function Ng(n,r,e){return br("TreeSelect",t=>{const a=ur(t,{treePrefixCls:r});return[xg(a)]},dl)(n,e)}var wg=function(n,r){var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&r.indexOf(t)<0&&(e[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(n);a<t.length;a++)r.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(n,t[a])&&(e[t[a]]=n[t[a]]);return e};const kg=(n,r)=>{var e;const{prefixCls:t,size:a,disabled:i,bordered:l=!0,className:o,rootClassName:s,treeCheckable:c,multiple:u,listHeight:h=256,listItemHeight:m=26,placement:g,notFoundContent:b,switcherIcon:y,treeLine:f,getPopupContainer:v,popupClassName:S,dropdownClassName:C,treeIcon:M=!1,transitionName:E,choiceTransitionName:w="",status:k,treeExpandAction:P,builtinPlacements:_,dropdownMatchSelectWidth:I,popupMatchSelectWidth:L,allowClear:T,variant:j,dropdownStyle:$,tagRender:O}=n,H=wg(n,["prefixCls","size","disabled","bordered","className","rootClassName","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","treeExpandAction","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","allowClear","variant","dropdownStyle","tagRender"]),{getPopupContainer:V,getPrefixCls:Y,renderEmpty:X,direction:pe,virtual:W,popupMatchSelectWidth:Q,popupOverflow:re}=d.useContext(ar),ne=Y(),U=Y("select",t),ie=Y("select-tree",t),ce=Y("tree-select",t),{compactSize:G,compactItemClassnames:q}=Ti(U,pe),J=An(U),le=An(ce),[Ue,Qe,et]=Fc(U,J),[Ce]=Ng(ce,ie,le),[Je,Ee]=As("treeSelect",j,l),Ze=oe(S||C,`${ce}-dropdown`,{[`${ce}-dropdown-rtl`]:pe==="rtl"},s,et,J,le,Qe),Me=!!(c||u),ge=Uc(n.suffixIcon,n.showArrow),we=(e=L??I)!==null&&e!==void 0?e:Q,{status:$e,hasFeedback:Ge,isFormItemInput:Ae,feedbackIcon:ve}=d.useContext(Ia),Be=xs($e,k),{suffixIcon:xe,removeIcon:ue,clearIcon:Te}=Gc(Object.assign(Object.assign({},H),{multiple:Me,showSuffixIcon:ge,hasFeedback:Ge,feedbackIcon:ve,prefixCls:U,componentName:"TreeSelect"})),We=T===!0?{clearIcon:Te}:T;let at;b!==void 0?at=b:at=(X==null?void 0:X("Select"))||d.createElement(Wc,{componentName:"Select"});const kt=Mn(H,["suffixIcon","removeIcon","clearIcon","itemIcon","switcherIcon"]),At=d.useMemo(()=>g!==void 0?g:pe==="rtl"?"bottomRight":"bottomLeft",[g,pe]),Ot=qn(Et=>{var ae;return(ae=a??G)!==null&&ae!==void 0?ae:Et}),lt=d.useContext(Yn),De=i??lt,gt=oe(!t&&ce,{[`${U}-lg`]:Ot==="large",[`${U}-sm`]:Ot==="small",[`${U}-rtl`]:pe==="rtl",[`${U}-${Je}`]:Ee,[`${U}-in-form-item`]:Ae},Aa(U,Be,Ge),q,o,s,et,J,le,Qe),dr=Et=>d.createElement(sg,{prefixCls:ie,switcherIcon:y,treeNodeProps:Et,showLine:f}),[Yt]=fc("SelectLike",$==null?void 0:$.zIndex),Nt=d.createElement(Jn,Object.assign({virtual:W,disabled:De},kt,{dropdownMatchSelectWidth:we,builtinPlacements:Yc(_,re),ref:r,prefixCls:U,className:gt,listHeight:h,listItemHeight:m,treeCheckable:c&&d.createElement("span",{className:`${U}-tree-checkbox-inner`}),treeLine:!!f,suffixIcon:xe,multiple:Me,placement:At,removeIcon:ue,allowClear:We,switcherIcon:dr,showTreeIcon:M,notFoundContent:at,getPopupContainer:v||V,treeMotion:null,dropdownClassName:Ze,dropdownStyle:Object.assign(Object.assign({},$),{zIndex:Yt}),choiceTransitionName:fi(ne,"",w),transitionName:fi(ne,"slide-up",E),treeExpandAction:P,tagRender:Me?O:void 0}));return Ue(Ce(Nt))},Pg=d.forwardRef(kg),on=Pg,Og=bs(on);on.TreeNode=Wi;on.SHOW_ALL=Yi;on.SHOW_PARENT=qi;on.SHOW_CHILD=Ba;on._InternalPanelDoNotUseOrYouWillBeFired=Og;function Ig(n){return n?!n.trim():!0}const ml=n=>{const e=n.split("/").pop();if(e===void 0||Ig(e))return"";const t=e.lastIndexOf(".");return t&&t!=-1?e.slice(t+1,e.length):""},Tg=["jpg","jpeg","png"],_g=n=>Tg.includes(n),fl=n=>{const{type:r,value:e,onChange:t,...a}=n,[i,l]=d.useState([]),o=d.useMemo(()=>r==null?void 0:r.split(","),[r]),s=h=>{if(h.type==="folder")return!0;const m=ml(h.title);return o?o.includes(m):!0},c=async h=>(await Ss(h)).map(b=>{const{code:y,type:f,name:v}=b;return{id:y,pId:h,value:y,title:v,isLeaf:f!=="folder",type:f,selectable:f!=="folder"}}).filter(s);d.useEffect(()=>{(async()=>{const m=await c("");l(m)})()},[]);const u=async({id:h})=>{const m=await c(h);l(i.concat(m))};return D.jsx(on,{treeDataSimpleMode:!0,style:{width:"100%"},value:e,dropdownStyle:{maxHeight:400,overflow:"auto"},onChange:t,loadData:u,treeData:i,...a})},zn=n=>{const{style:r,min:e,max:t,precision:a,step:i,disabled:l,value:o,onChange:s}=n,[c,u]=d.useState(0),[h,m]=d.useState(!1);d.useEffect(()=>{u(o)},[o]);const g=f=>{u(f||0),m(!0)},b=()=>{h&&(s(c),m(!1))},y=f=>{m(!1),u(f||0),s(f)};return D.jsx(Qn,{style:{borderRadius:"4px",...r},disabled:l,min:e,max:t,precision:a,step:i,value:c,onChange:g,onPressEnter:b,onBlur:b,onStep:y})},Rg=n=>{const{value:r,onChange:e,style:t,min:a,max:i,precision:l,step:o,disabled:s}=n,[c,u]=d.useState(0),[h,m]=d.useState(0);d.useEffect(()=>{const[y,f]=r||[];u(y),m(f)},[r]);const g=y=>{e==null||e([y,h])},b=y=>{e==null||e([c,y])};return D.jsxs(Xn,{gutter:4,style:t,children:[D.jsx(Vt,{span:12,children:D.jsx(zn,{style:{width:"unset"},disabled:s,min:a,max:i,precision:l,step:o,value:c,onChange:g})}),D.jsx(Vt,{span:12,children:D.jsx(zn,{style:{width:"unset"},disabled:s,min:a,max:i,precision:l,step:o,value:h,onChange:b})})]})},$g=n=>{const{value:r,onChange:e,min:t,max:a,precision:i,step:l,disabled:o}=n,[s,c]=d.useState(0),[u,h]=d.useState(0),[m,g]=d.useState(0);d.useEffect(()=>{const[v,S,C]=r||[];c(v),h(S),g(C)},[r]);const b=v=>{e==null||e([v,u,m])},y=v=>{e==null||e([s,v,m])},f=v=>{e==null||e([s,u,v])};return D.jsxs(Xn,{gutter:4,children:[D.jsx(Vt,{span:8,children:D.jsx(zn,{style:{width:"unset"},disabled:o,min:t,max:a,precision:i,step:l,value:s,onChange:b})}),D.jsx(Vt,{span:8,children:D.jsx(zn,{style:{width:"unset"},disabled:o,min:t,max:a,precision:i,step:l,value:u,onChange:y})}),D.jsx(Vt,{span:8,children:D.jsx(zn,{style:{width:"unset"},disabled:o,min:t,max:a,precision:i,step:l,value:m,onChange:f})})]})},Dg=n=>{const{disabled:r,disabledAlpha:e,value:t="#000000",onChange:a}=n,[i,l]=d.useState(t);d.useEffect(()=>{l(t)},[t]);const o=s=>{a==null||a(s.toHexString())};return D.jsx(La,{style:{borderRadius:"4px"},disabled:r,disabledAlpha:e,showText:!0,value:i,onChange:l,onChangeComplete:o})},Lg="_container_1bqyu_1",Bg="_view_1bqyu_9",Ho={container:Lg,view:Bg};function Hn(){return Hn=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n},Hn.apply(this,arguments)}var Rr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ea(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ri,vl={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/ri=vl,function(){var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if(i==="string"||i==="number")e.push(a);else if(Array.isArray(a)){if(a.length){var l=r.apply(null,a);l&&e.push(l)}}else if(i==="object")if(a.toString===Object.prototype.toString)for(var o in a)n.call(a,o)&&a[o]&&e.push(o);else e.push(a.toString())}}return e.join(" ")}ri.exports?(r.default=r,ri.exports=r):window.classNames=r}();var xi=ea(vl.exports),Vo=NaN,jg="[object Symbol]",zg=/^\s+|\s+$/g,Hg=/^[-+]0x[0-9a-f]+$/i,Vg=/^0b[01]+$/i,Kg=/^0o[0-7]+$/i,Fg=parseInt,Ug=Object.prototype.toString;function Ko(n){var r=typeof n;return!!n&&(r=="object"||r=="function")}function ni(n){if(typeof n=="number")return n;if(function(t){return typeof t=="symbol"||function(a){return!!a&&typeof a=="object"}(t)&&Ug.call(t)==jg}(n))return Vo;if(Ko(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=Ko(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=n.replace(zg,"");var e=Vg.test(n);return e||Kg.test(n)?Fg(n.slice(2),e?2:8):Hg.test(n)?Vo:+n}var lr=ea(function(n,r,e){return e===void 0&&(e=r,r=void 0),e!==void 0&&(e=(e=ni(e))==e?e:0),r!==void 0&&(r=(r=ni(r))==r?r:0),function(t,a,i){return t==t&&(i!==void 0&&(t=t<=i?t:i),a!==void 0&&(t=t>=a?t:a)),t}(ni(n),r,e)}),Ni={exports:{}};(function(n,r){var e="__lodash_hash_undefined__",t=1,a=2,i=9007199254740991,l="[object Arguments]",o="[object Array]",s="[object AsyncFunction]",c="[object Boolean]",u="[object Date]",h="[object Error]",m="[object Function]",g="[object GeneratorFunction]",b="[object Map]",y="[object Number]",f="[object Null]",v="[object Object]",S="[object Promise]",C="[object Proxy]",M="[object RegExp]",E="[object Set]",w="[object String]",k="[object Symbol]",P="[object Undefined]",_="[object WeakMap]",I="[object ArrayBuffer]",L="[object DataView]",T=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,$={};$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$[l]=$[o]=$[I]=$[c]=$[L]=$[u]=$[h]=$[m]=$[b]=$[y]=$[v]=$[M]=$[E]=$[w]=$[_]=!1;var O=typeof Rr=="object"&&Rr&&Rr.Object===Object&&Rr,H=typeof self=="object"&&self&&self.Object===Object&&self,V=O||H||Function("return this")(),Y=r&&!r.nodeType&&r,X=Y&&n&&!n.nodeType&&n,pe=X&&X.exports===Y,W=pe&&O.process,Q=function(){try{return W&&W.binding&&W.binding("util")}catch{}}(),re=Q&&Q.isTypedArray;function ne(N,R){for(var F=-1,Z=N==null?0:N.length;++F<Z;)if(R(N[F],F,N))return!0;return!1}function U(N){var R=-1,F=Array(N.size);return N.forEach(function(Z,Ne){F[++R]=[Ne,Z]}),F}function ie(N){var R=-1,F=Array(N.size);return N.forEach(function(Z){F[++R]=Z}),F}var ce,G,q,J=Array.prototype,le=Function.prototype,Ue=Object.prototype,Qe=V["__core-js_shared__"],et=le.toString,Ce=Ue.hasOwnProperty,Je=(ce=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||""))?"Symbol(src)_1."+ce:"",Ee=Ue.toString,Ze=RegExp("^"+et.call(Ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Me=pe?V.Buffer:void 0,ge=V.Symbol,we=V.Uint8Array,$e=Ue.propertyIsEnumerable,Ge=J.splice,Ae=ge?ge.toStringTag:void 0,ve=Object.getOwnPropertySymbols,Be=Me?Me.isBuffer:void 0,xe=(G=Object.keys,q=Object,function(N){return G(q(N))}),ue=gr(V,"DataView"),Te=gr(V,"Map"),We=gr(V,"Promise"),at=gr(V,"Set"),kt=gr(V,"WeakMap"),At=gr(Object,"create"),Ot=ir(ue),lt=ir(Te),De=ir(We),gt=ir(at),dr=ir(kt),Yt=ge?ge.prototype:void 0,Nt=Yt?Yt.valueOf:void 0;function Et(N){var R=-1,F=N==null?0:N.length;for(this.clear();++R<F;){var Z=N[R];this.set(Z[0],Z[1])}}function ae(N){var R=-1,F=N==null?0:N.length;for(this.clear();++R<F;){var Z=N[R];this.set(Z[0],Z[1])}}function se(N){var R=-1,F=N==null?0:N.length;for(this.clear();++R<F;){var Z=N[R];this.set(Z[0],Z[1])}}function Ie(N){var R=-1,F=N==null?0:N.length;for(this.__data__=new se;++R<F;)this.add(N[R])}function ye(N){var R=this.__data__=new ae(N);this.size=R.size}function Mt(N,R){var F=_e(N),Z=!F&&cn(N),Ne=!F&&!Z&&ke(N),me=!F&&!Z&&!Ne&&rt(N),Le=F||Z||Ne||me,Pe=Le?function(ot,Lt){for(var qt=-1,Bt=Array(ot);++qt<ot;)Bt[qt]=Lt(qt);return Bt}(N.length,String):[],it=Pe.length;for(var pt in N)!Ce.call(N,pt)||Le&&(pt=="length"||Ne&&(pt=="offset"||pt=="parent")||me&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||sn(pt,it))||Pe.push(pt);return Pe}function Dt(N,R){for(var F=N.length;F--;)if(ln(N[F][0],R))return F;return-1}function Pt(N){return N==null?N===void 0?P:f:Ae&&Ae in Object(N)?function(R){var F=Ce.call(R,Ae),Z=R[Ae];try{R[Ae]=void 0;var Ne=!0}catch{}var me=Ee.call(R);return Ne&&(F?R[Ae]=Z:delete R[Ae]),me}(N):function(R){return Ee.call(R)}(N)}function Hr(N){return dt(N)&&Pt(N)==l}function Vr(N,R,F,Z,Ne){return N===R||(N==null||R==null||!dt(N)&&!dt(R)?N!=N&&R!=R:function(me,Le,Pe,it,pt,ot){var Lt=_e(me),qt=_e(Le),Bt=Lt?o:Tt(me),Er=qt?o:Tt(Le),un=(Bt=Bt==l?v:Bt)==v,na=(Er=Er==l?v:Er)==v,dn=Bt==Er;if(dn&&ke(me)){if(!ke(Le))return!1;Lt=!0,un=!1}if(dn&&!un)return ot||(ot=new ye),Lt||rt(me)?Kr(me,Le,Pe,it,pt,ot):function(ct,nt,aa,Ir,Fa,Xt,Mr){switch(aa){case L:if(ct.byteLength!=nt.byteLength||ct.byteOffset!=nt.byteOffset)return!1;ct=ct.buffer,nt=nt.buffer;case I:return!(ct.byteLength!=nt.byteLength||!Xt(new we(ct),new we(nt)));case c:case u:case y:return ln(+ct,+nt);case h:return ct.name==nt.name&&ct.message==nt.message;case M:case w:return ct==nt+"";case b:var Tr=U;case E:var Rn=Ir&t;if(Tr||(Tr=ie),ct.size!=nt.size&&!Rn)return!1;var ia=Mr.get(ct);if(ia)return ia==nt;Ir|=a,Mr.set(ct,nt);var Ua=Kr(Tr(ct),Tr(nt),Ir,Fa,Xt,Mr);return Mr.delete(ct),Ua;case k:if(Nt)return Nt.call(ct)==Nt.call(nt)}return!1}(me,Le,Bt,Pe,it,pt,ot);if(!(Pe&t)){var _n=un&&Ce.call(me,"__wrapped__"),eo=na&&Ce.call(Le,"__wrapped__");if(_n||eo){var Gl=_n?me.value():me,Wl=eo?Le.value():Le;return ot||(ot=new ye),pt(Gl,Wl,Pe,it,ot)}}return dn?(ot||(ot=new ye),function(ct,nt,aa,Ir,Fa,Xt){var Mr=aa&t,Tr=Fr(ct),Rn=Tr.length,ia=Fr(nt),Ua=ia.length;if(Rn!=Ua&&!Mr)return!1;for(var oa=Rn;oa--;){var Ur=Tr[oa];if(!(Mr?Ur in nt:Ce.call(nt,Ur)))return!1}var to=Xt.get(ct);if(to&&Xt.get(nt))return to==nt;var sa=!0;Xt.set(ct,nt),Xt.set(nt,ct);for(var Ga=Mr;++oa<Rn;){var la=ct[Ur=Tr[oa]],ca=nt[Ur];if(Ir)var ro=Mr?Ir(ca,la,Ur,nt,ct,Xt):Ir(la,ca,Ur,ct,nt,Xt);if(!(ro===void 0?la===ca||Fa(la,ca,aa,Ir,Xt):ro)){sa=!1;break}Ga||(Ga=Ur=="constructor")}if(sa&&!Ga){var ua=ct.constructor,da=nt.constructor;ua==da||!("constructor"in ct)||!("constructor"in nt)||typeof ua=="function"&&ua instanceof ua&&typeof da=="function"&&da instanceof da||(sa=!1)}return Xt.delete(ct),Xt.delete(nt),sa}(me,Le,Pe,it,pt,ot)):!1}(N,R,F,Z,Vr,Ne))}function pr(N){return!(!wt(N)||function(R){return!!Je&&Je in R}(N))&&(Ye(N)?Ze:T).test(ir(N))}function hr(N){if(F=(R=N)&&R.constructor,Z=typeof F=="function"&&F.prototype||Ue,R!==Z)return xe(N);var R,F,Z,Ne=[];for(var me in Object(N))Ce.call(N,me)&&me!="constructor"&&Ne.push(me);return Ne}function Kr(N,R,F,Z,Ne,me){var Le=F&t,Pe=N.length,it=R.length;if(Pe!=it&&!(Le&&it>Pe))return!1;var pt=me.get(N);if(pt&&me.get(R))return pt==R;var ot=-1,Lt=!0,qt=F&a?new Ie:void 0;for(me.set(N,R),me.set(R,N);++ot<Pe;){var Bt=N[ot],Er=R[ot];if(Z)var un=Le?Z(Er,Bt,ot,R,N,me):Z(Bt,Er,ot,N,R,me);if(un!==void 0){if(un)continue;Lt=!1;break}if(qt){if(!ne(R,function(na,dn){if(_n=dn,!qt.has(_n)&&(Bt===na||Ne(Bt,na,F,Z,me)))return qt.push(dn);var _n})){Lt=!1;break}}else if(Bt!==Er&&!Ne(Bt,Er,F,Z,me)){Lt=!1;break}}return me.delete(N),me.delete(R),Lt}function Fr(N){return function(R,F,Z){var Ne=F(R);return _e(R)?Ne:function(me,Le){for(var Pe=-1,it=Le.length,pt=me.length;++Pe<it;)me[pt+Pe]=Le[Pe];return me}(Ne,Z(R))}(N,he,Cr)}function Or(N,R){var F,Z,Ne=N.__data__;return((Z=typeof(F=R))=="string"||Z=="number"||Z=="symbol"||Z=="boolean"?F!=="__proto__":F===null)?Ne[typeof R=="string"?"string":"hash"]:Ne.map}function gr(N,R){var F=function(Z,Ne){return Z==null?void 0:Z[Ne]}(N,R);return pr(F)?F:void 0}Et.prototype.clear=function(){this.__data__=At?At(null):{},this.size=0},Et.prototype.delete=function(N){var R=this.has(N)&&delete this.__data__[N];return this.size-=R?1:0,R},Et.prototype.get=function(N){var R=this.__data__;if(At){var F=R[N];return F===e?void 0:F}return Ce.call(R,N)?R[N]:void 0},Et.prototype.has=function(N){var R=this.__data__;return At?R[N]!==void 0:Ce.call(R,N)},Et.prototype.set=function(N,R){var F=this.__data__;return this.size+=this.has(N)?0:1,F[N]=At&&R===void 0?e:R,this},ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(N){var R=this.__data__,F=Dt(R,N);return!(F<0)&&(F==R.length-1?R.pop():Ge.call(R,F,1),--this.size,!0)},ae.prototype.get=function(N){var R=this.__data__,F=Dt(R,N);return F<0?void 0:R[F][1]},ae.prototype.has=function(N){return Dt(this.__data__,N)>-1},ae.prototype.set=function(N,R){var F=this.__data__,Z=Dt(F,N);return Z<0?(++this.size,F.push([N,R])):F[Z][1]=R,this},se.prototype.clear=function(){this.size=0,this.__data__={hash:new Et,map:new(Te||ae),string:new Et}},se.prototype.delete=function(N){var R=Or(this,N).delete(N);return this.size-=R?1:0,R},se.prototype.get=function(N){return Or(this,N).get(N)},se.prototype.has=function(N){return Or(this,N).has(N)},se.prototype.set=function(N,R){var F=Or(this,N),Z=F.size;return F.set(N,R),this.size+=F.size==Z?0:1,this},Ie.prototype.add=Ie.prototype.push=function(N){return this.__data__.set(N,e),this},Ie.prototype.has=function(N){return this.__data__.has(N)},ye.prototype.clear=function(){this.__data__=new ae,this.size=0},ye.prototype.delete=function(N){var R=this.__data__,F=R.delete(N);return this.size=R.size,F},ye.prototype.get=function(N){return this.__data__.get(N)},ye.prototype.has=function(N){return this.__data__.has(N)},ye.prototype.set=function(N,R){var F=this.__data__;if(F instanceof ae){var Z=F.__data__;if(!Te||Z.length<199)return Z.push([N,R]),this.size=++F.size,this;F=this.__data__=new se(Z)}return F.set(N,R),this.size=F.size,this};var Cr=ve?function(N){return N==null?[]:(N=Object(N),function(R,F){for(var Z=-1,Ne=R==null?0:R.length,me=0,Le=[];++Z<Ne;){var Pe=R[Z];F(Pe,Z,R)&&(Le[me++]=Pe)}return Le}(ve(N),function(R){return $e.call(N,R)}))}:function(){return[]},Tt=Pt;function sn(N,R){return!!(R=R??i)&&(typeof N=="number"||j.test(N))&&N>-1&&N%1==0&&N<R}function ir(N){if(N!=null){try{return et.call(N)}catch{}try{return N+""}catch{}}return""}function ln(N,R){return N===R||N!=N&&R!=R}(ue&&Tt(new ue(new ArrayBuffer(1)))!=L||Te&&Tt(new Te)!=b||We&&Tt(We.resolve())!=S||at&&Tt(new at)!=E||kt&&Tt(new kt)!=_)&&(Tt=function(N){var R=Pt(N),F=R==v?N.constructor:void 0,Z=F?ir(F):"";if(Z)switch(Z){case Ot:return L;case lt:return b;case De:return S;case gt:return E;case dr:return _}return R});var cn=Hr(function(){return arguments}())?Hr:function(N){return dt(N)&&Ce.call(N,"callee")&&!$e.call(N,"callee")},_e=Array.isArray,ke=Be||function(){return!1};function Ye(N){if(!wt(N))return!1;var R=Pt(N);return R==m||R==g||R==s||R==C}function tt(N){return typeof N=="number"&&N>-1&&N%1==0&&N<=i}function wt(N){var R=typeof N;return N!=null&&(R=="object"||R=="function")}function dt(N){return N!=null&&typeof N=="object"}var rt=re?function(N){return function(R){return N(R)}}(re):function(N){return dt(N)&&tt(N.length)&&!!$[Pt(N)]};function he(N){return(R=N)!=null&&tt(R.length)&&!Ye(R)?Mt(N):hr(N);var R}n.exports=function(N,R){return Vr(N,R)}})(Ni,Ni.exports);var Gg=ea(Ni.exports);function Fo(n,r,e){return n[r]?n[r][0]?n[r][0][e]:n[r][e]:r==="contentBoxSize"?n.contentRect[e==="inlineSize"?"width":"height"]:void 0}function Wg(n){n===void 0&&(n={});var r=n.onResize,e=d.useRef(void 0);e.current=r;var t=n.round||Math.round,a=d.useRef(),i=d.useState({width:void 0,height:void 0}),l=i[0],o=i[1],s=d.useRef(!1);d.useEffect(function(){return s.current=!1,function(){s.current=!0}},[]);var c=d.useRef({width:void 0,height:void 0}),u=function(h,m){var g=d.useRef(null),b=d.useRef(null);b.current=m;var y=d.useRef(null);d.useEffect(function(){f()});var f=d.useCallback(function(){var v=y.current,S=b.current,C=v||(S?S instanceof Element?S:S.current:null);g.current&&g.current.element===C&&g.current.subscriber===h||(g.current&&g.current.cleanup&&g.current.cleanup(),g.current={element:C,subscriber:h,cleanup:C?h(C):void 0})},[h]);return d.useEffect(function(){return function(){g.current&&g.current.cleanup&&(g.current.cleanup(),g.current=null)}},[]),d.useCallback(function(v){y.current=v,f()},[f])}(d.useCallback(function(h){return a.current&&a.current.box===n.box&&a.current.round===t||(a.current={box:n.box,round:t,instance:new ResizeObserver(function(m){var g=m[0],b=n.box==="border-box"?"borderBoxSize":n.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",y=Fo(g,b,"inlineSize"),f=Fo(g,b,"blockSize"),v=y?t(y):void 0,S=f?t(f):void 0;if(c.current.width!==v||c.current.height!==S){var C={width:v,height:S};c.current.width=v,c.current.height=S,e.current?e.current(C):s.current||o(C)}})}),a.current.instance.observe(h,{box:n.box}),function(){a.current&&a.current.instance.unobserve(h)}},[n.box,t]),n.ref);return d.useMemo(function(){return{ref:u,width:l.width,height:l.height}},[u,l.width,l.height])}var Yg="allotment-module_splitView__L-yRc",qg="allotment-module_sashContainer__fzwJF",Xg="allotment-module_splitViewContainer__rQnVa",yl="allotment-module_splitViewView__MGZ6O",Zg="allotment-module_vertical__WSwwa",Qg="allotment-module_horizontal__7doS8",Jg="allotment-module_separatorBorder__x-rDS";let $n,bl=!1,Sl=!1;typeof navigator=="object"&&($n=navigator.userAgent,Sl=$n.indexOf("Macintosh")>=0,bl=($n.indexOf("Macintosh")>=0||$n.indexOf("iPad")>=0||$n.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0);const Cl=bl,em=Sl,Uo=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?d.useLayoutEffect:d.useEffect;let tm=class{constructor(){this._size=void 0}getSize(){return this._size}setSize(r){this._size=r}};function ga(n,r){const e=n.length,t=e-r.length;return t>=0&&n.slice(t,e)===r}var El={exports:{}};(function(n){var r=Object.prototype.hasOwnProperty,e="~";function t(){}function a(s,c,u){this.fn=s,this.context=c,this.once=u||!1}function i(s,c,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var g=new a(u,h||s,m),b=e?e+c:c;return s._events[b]?s._events[b].fn?s._events[b]=[s._events[b],g]:s._events[b].push(g):(s._events[b]=g,s._eventsCount++),s}function l(s,c){--s._eventsCount==0?s._events=new t:delete s._events[c]}function o(){this._events=new t,this._eventsCount=0}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(e=!1)),o.prototype.eventNames=function(){var s,c,u=[];if(this._eventsCount===0)return u;for(c in s=this._events)r.call(s,c)&&u.push(e?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(s)):u},o.prototype.listeners=function(s){var c=e?e+s:s,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,m=u.length,g=new Array(m);h<m;h++)g[h]=u[h].fn;return g},o.prototype.listenerCount=function(s){var c=e?e+s:s,u=this._events[c];return u?u.fn?1:u.length:0},o.prototype.emit=function(s,c,u,h,m,g){var b=e?e+s:s;if(!this._events[b])return!1;var y,f,v=this._events[b],S=arguments.length;if(v.fn){switch(v.once&&this.removeListener(s,v.fn,void 0,!0),S){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,u),!0;case 4:return v.fn.call(v.context,c,u,h),!0;case 5:return v.fn.call(v.context,c,u,h,m),!0;case 6:return v.fn.call(v.context,c,u,h,m,g),!0}for(f=1,y=new Array(S-1);f<S;f++)y[f-1]=arguments[f];v.fn.apply(v.context,y)}else{var C,M=v.length;for(f=0;f<M;f++)switch(v[f].once&&this.removeListener(s,v[f].fn,void 0,!0),S){case 1:v[f].fn.call(v[f].context);break;case 2:v[f].fn.call(v[f].context,c);break;case 3:v[f].fn.call(v[f].context,c,u);break;case 4:v[f].fn.call(v[f].context,c,u,h);break;default:if(!y)for(C=1,y=new Array(S-1);C<S;C++)y[C-1]=arguments[C];v[f].fn.apply(v[f].context,y)}}return!0},o.prototype.on=function(s,c,u){return i(this,s,c,u,!1)},o.prototype.once=function(s,c,u){return i(this,s,c,u,!0)},o.prototype.removeListener=function(s,c,u,h){var m=e?e+s:s;if(!this._events[m])return this;if(!c)return l(this,m),this;var g=this._events[m];if(g.fn)g.fn!==c||h&&!g.once||u&&g.context!==u||l(this,m);else{for(var b=0,y=[],f=g.length;b<f;b++)(g[b].fn!==c||h&&!g[b].once||u&&g[b].context!==u)&&y.push(g[b]);y.length?this._events[m]=y.length===1?y[0]:y:l(this,m)}return this},o.prototype.removeAllListeners=function(s){var c;return s?(c=e?e+s:s,this._events[c]&&l(this,c)):(this._events=new t,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,n.exports=o})(El);var Xi=ea(El.exports);function Go(n,r){const e=n.indexOf(r);e>-1&&(n.splice(e,1),n.unshift(r))}function ai(n,r){const e=n.indexOf(r);e>-1&&(n.splice(e,1),n.push(r))}function Zt(n,r,e=1){const t=Math.max(0,Math.ceil((r-n)/e)),a=new Array(t);let i=-1;for(;++i<t;)a[i]=n+i*e;return a}var Wo=NaN,rm="[object Symbol]",nm=/^\s+|\s+$/g,am=/^[-+]0x[0-9a-f]+$/i,im=/^0b[01]+$/i,om=/^0o[0-7]+$/i,sm=parseInt,lm=typeof Rr=="object"&&Rr&&Rr.Object===Object&&Rr,cm=typeof self=="object"&&self&&self.Object===Object&&self,um=lm||cm||Function("return this")(),dm=Object.prototype.toString,pm=Math.max,hm=Math.min,ii=function(){return um.Date.now()};function wi(n){var r=typeof n;return!!n&&(r=="object"||r=="function")}function Yo(n){if(typeof n=="number")return n;if(function(t){return typeof t=="symbol"||function(a){return!!a&&typeof a=="object"}(t)&&dm.call(t)==rm}(n))return Wo;if(wi(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=wi(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=n.replace(nm,"");var e=im.test(n);return e||om.test(n)?sm(n.slice(2),e?2:8):am.test(n)?Wo:+n}var gm=ea(function(n,r,e){var t,a,i,l,o,s,c=0,u=!1,h=!1,m=!0;if(typeof n!="function")throw new TypeError("Expected a function");function g(S){var C=t,M=a;return t=a=void 0,c=S,l=n.apply(M,C)}function b(S){var C=S-s;return s===void 0||C>=r||C<0||h&&S-c>=i}function y(){var S=ii();if(b(S))return f(S);o=setTimeout(y,function(C){var M=r-(C-s);return h?hm(M,i-(C-c)):M}(S))}function f(S){return o=void 0,m&&t?g(S):(t=a=void 0,l)}function v(){var S=ii(),C=b(S);if(t=arguments,a=this,s=S,C){if(o===void 0)return function(M){return c=M,o=setTimeout(y,r),u?g(M):l}(s);if(h)return o=setTimeout(y,r),g(s)}return o===void 0&&(o=setTimeout(y,r)),l}return r=Yo(r)||0,wi(e)&&(u=!!e.leading,i=(h="maxWait"in e)?pm(Yo(e.maxWait)||0,r):i,m="trailing"in e?!!e.trailing:m),v.cancel=function(){o!==void 0&&clearTimeout(o),c=0,t=s=a=o=void 0},v.flush=function(){return o===void 0?l:f(ii())},v}),mm="sash-module_sash__K-9lB",fm="sash-module_disabled__Hm-wx",vm="sash-module_mac__Jf6OJ",qo="sash-module_vertical__pB-rs",ym="sash-module_minimum__-UKxp",bm="sash-module_maximum__TCWxD",Xo="sash-module_horizontal__kFbiw",oi="sash-module_hover__80W6I",si="sash-module_active__bJspD";let tr=function(n){return n.Vertical="VERTICAL",n.Horizontal="HORIZONTAL",n}({}),Ut=function(n){return n.Disabled="DISABLED",n.Minimum="MINIMUM",n.Maximum="MAXIMUM",n.Enabled="ENABLED",n}({}),Ml=Cl?20:8;const Al=new Xi;class Zo extends Xi{get state(){return this._state}set state(r){this._state!==r&&(this.el.classList.toggle(fm,r===Ut.Disabled),this.el.classList.toggle("sash-disabled",r===Ut.Disabled),this.el.classList.toggle(ym,r===Ut.Minimum),this.el.classList.toggle("sash-minimum",r===Ut.Minimum),this.el.classList.toggle(bm,r===Ut.Maximum),this.el.classList.toggle("sash-maximum",r===Ut.Maximum),this._state=r,this.emit("enablementChange",r))}constructor(r,e,t){var a;super(),this.el=void 0,this.layoutProvider=void 0,this.orientation=void 0,this.size=void 0,this.hoverDelay=300,this.hoverDelayer=gm(i=>i.classList.add("sash-hover",oi),this.hoverDelay),this._state=Ut.Enabled,this.onPointerStart=i=>{const l=i.pageX,o=i.pageY,s={startX:l,currentX:l,startY:o,currentY:o};this.el.classList.add("sash-active",si),this.emit("start",s),this.el.setPointerCapture(i.pointerId);const c=h=>{h.preventDefault();const m={startX:l,currentX:h.pageX,startY:o,currentY:h.pageY};this.emit("change",m)},u=h=>{h.preventDefault(),this.el.classList.remove("sash-active",si),this.hoverDelayer.cancel(),this.emit("end"),this.el.releasePointerCapture(h.pointerId),window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",u)};window.addEventListener("pointermove",c),window.addEventListener("pointerup",u)},this.onPointerDoublePress=()=>{this.emit("reset")},this.onMouseEnter=()=>{this.el.classList.contains(si)?(this.hoverDelayer.cancel(),this.el.classList.add("sash-hover",oi)):this.hoverDelayer(this.el)},this.onMouseLeave=()=>{this.hoverDelayer.cancel(),this.el.classList.remove("sash-hover",oi)},this.el=document.createElement("div"),this.el.classList.add("sash",mm),this.el.dataset.testid="sash",r.append(this.el),em&&this.el.classList.add("sash-mac",vm),this.el.addEventListener("pointerdown",this.onPointerStart),this.el.addEventListener("dblclick",this.onPointerDoublePress),this.el.addEventListener("mouseenter",this.onMouseEnter),this.el.addEventListener("mouseleave",this.onMouseLeave),typeof t.size=="number"?(this.size=t.size,t.orientation===tr.Vertical?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Ml,Al.on("onDidChangeGlobalSize",i=>{this.size=i,this.layout()})),this.layoutProvider=e,this.orientation=(a=t.orientation)!=null?a:tr.Vertical,this.orientation===tr.Horizontal?(this.el.classList.add("sash-horizontal",Xo),this.el.classList.remove("sash-vertical",qo)):(this.el.classList.remove("sash-horizontal",Xo),this.el.classList.add("sash-vertical",qo)),this.layout()}layout(){if(this.orientation===tr.Vertical){const r=this.layoutProvider;this.el.style.left=r.getVerticalSashLeft(this)-this.size/2+"px",r.getVerticalSashTop&&(this.el.style.top=r.getVerticalSashTop(this)+"px"),r.getVerticalSashHeight&&(this.el.style.height=r.getVerticalSashHeight(this)+"px")}else{const r=this.layoutProvider;this.el.style.top=r.getHorizontalSashTop(this)-this.size/2+"px",r.getHorizontalSashLeft&&(this.el.style.left=r.getHorizontalSashLeft(this)+"px"),r.getHorizontalSashWidth&&(this.el.style.width=r.getHorizontalSashWidth(this)+"px")}}dispose(){this.el.removeEventListener("pointerdown",this.onPointerStart),this.el.removeEventListener("dblclick",this.onPointerDoublePress),this.el.removeEventListener("mouseenter",this.onMouseEnter),this.el.removeEventListener("mouseleave",()=>this.onMouseLeave),this.el.remove()}}let ka;var li;(li=ka||(ka={})).Distribute={type:"distribute"},li.Split=function(n){return{type:"split",index:n}},li.Invisible=function(n){return{type:"invisible",cachedVisibleSize:n}};let xr=function(n){return n.Normal="NORMAL",n.Low="LOW",n.High="HIGH",n}({});class xl{constructor(r,e,t){this.container=void 0,this.view=void 0,this._size=void 0,this._cachedVisibleSize=void 0,this.container=r,this.view=e,this.container.classList.add("split-view-view",yl),this.container.dataset.testid="split-view-view",typeof t=="number"?(this._size=t,this._cachedVisibleSize=void 0,r.classList.add("split-view-view-visible")):(this._size=0,this._cachedVisibleSize=t.cachedVisibleSize)}set size(r){this._size=r}get size(){return this._size}get priority(){return this.view.priority}get snap(){return!!this.view.snap}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return this._cachedVisibleSize===void 0}setVisible(r,e){r!==this.visible&&(r?(this.size=lr(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof e=="number"?e:this.size,this.size=0),this.container.classList.toggle("split-view-view-visible",r),this.view.setVisible&&this.view.setVisible(r))}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}set enabled(r){this.container.style.pointerEvents=r?"":"none"}layout(r){this.layoutContainer(r),this.view.layout(this.size,r)}}let Sm=class extends xl{layoutContainer(r){this.container.style.left=`${r}px`,this.container.style.width=`${this.size}px`}},Cm=class extends xl{layoutContainer(r){this.container.style.top=`${r}px`,this.container.style.height=`${this.size}px`}};class Em extends Xi{get startSnappingEnabled(){return this._startSnappingEnabled}set startSnappingEnabled(r){this._startSnappingEnabled!==r&&(this._startSnappingEnabled=r,this.updateSashEnablement())}get endSnappingEnabled(){return this._endSnappingEnabled}set endSnappingEnabled(r){this._endSnappingEnabled!==r&&(this._endSnappingEnabled=r,this.updateSashEnablement())}constructor(r,e={},t,a,i){var l,o;if(super(),this.onDidChange=void 0,this.onDidDragStart=void 0,this.onDidDragEnd=void 0,this.orientation=void 0,this.sashContainer=void 0,this.size=0,this.contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.sashDragState=void 0,this.proportionalLayout=void 0,this.getSashOrthogonalSize=void 0,this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onSashEnd=s=>{this.emit("sashchange",s),this.saveProportions();for(const c of this.viewItems)c.enabled=!0},this.orientation=(l=e.orientation)!=null?l:tr.Vertical,this.proportionalLayout=(o=e.proportionalLayout)!=null?o:!0,this.getSashOrthogonalSize=e.getSashOrthogonalSize,t&&(this.onDidChange=t),a&&(this.onDidDragStart=a),i&&(this.onDidDragEnd=i),this.sashContainer=document.createElement("div"),this.sashContainer.classList.add("sash-container",qg),r.prepend(this.sashContainer),e.descriptor){this.size=e.descriptor.size;for(const[s,c]of e.descriptor.views.entries()){const u=c.size,h=c.container,m=c.view;this.addView(h,m,u,s,!0)}this.contentSize=this.viewItems.reduce((s,c)=>s+c.size,0),this.saveProportions()}}addView(r,e,t,a=this.viewItems.length,i){let l;l=typeof t=="number"?t:t.type==="split"?this.getViewSize(t.index)/2:t.type==="invisible"?{cachedVisibleSize:t.cachedVisibleSize}:e.minimumSize;const o=this.orientation===tr.Vertical?new Cm(r,e,l):new Sm(r,e,l);if(this.viewItems.splice(a,0,o),this.viewItems.length>1){const s=this.orientation===tr.Vertical?new Zo(this.sashContainer,{getHorizontalSashTop:h=>this.getSashPosition(h),getHorizontalSashWidth:this.getSashOrthogonalSize},{orientation:tr.Horizontal}):new Zo(this.sashContainer,{getVerticalSashLeft:h=>this.getSashPosition(h),getVerticalSashHeight:this.getSashOrthogonalSize},{orientation:tr.Vertical}),c=this.orientation===tr.Vertical?h=>({sash:s,start:h.startY,current:h.currentY}):h=>({sash:s,start:h.startX,current:h.currentX});s.on("start",h=>{var m;this.emit("sashDragStart"),this.onSashStart(c(h));const g=this.viewItems.map(b=>b.size);(m=this.onDidDragStart)==null||m.call(this,g)}),s.on("change",h=>this.onSashChange(c(h))),s.on("end",()=>{var h;this.emit("sashDragEnd"),this.onSashEnd(this.sashItems.findIndex(g=>g.sash===s));const m=this.viewItems.map(g=>g.size);(h=this.onDidDragEnd)==null||h.call(this,m)}),s.on("reset",()=>{const h=this.sashItems.findIndex(f=>f.sash===s),m=Zt(h,-1,-1),g=Zt(h+1,this.viewItems.length),b=this.findFirstSnapIndex(m),y=this.findFirstSnapIndex(g);(typeof b!="number"||this.viewItems[b].visible)&&(typeof y!="number"||this.viewItems[y].visible)&&this.emit("sashreset",h)});const u={sash:s};this.sashItems.splice(a-1,0,u)}i||this.relayout(),i||typeof t=="number"||t.type!=="distribute"||this.distributeViewSizes()}removeView(r,e){if(r<0||r>=this.viewItems.length)throw new Error("Index out of bounds");const t=this.viewItems.splice(r,1)[0].view;if(this.viewItems.length>=1){const a=Math.max(r-1,0);this.sashItems.splice(a,1)[0].sash.dispose()}return this.relayout(),e&&e.type==="distribute"&&this.distributeViewSizes(),t}moveView(r,e,t){const a=this.getViewCachedVisibleSize(e),i=a===void 0?this.getViewSize(e):ka.Invisible(a),l=this.removeView(e);this.addView(r,l,i,t)}getViewCachedVisibleSize(r){if(r<0||r>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[r].cachedVisibleSize}layout(r=this.size){const e=Math.max(this.size,this.contentSize);if(this.size=r,this.proportions)for(let t=0;t<this.viewItems.length;t++){const a=this.viewItems[t];a.size=lr(Math.round(this.proportions[t]*r),a.minimumSize,a.maximumSize)}else{const t=Zt(0,this.viewItems.length),a=t.filter(l=>this.viewItems[l].priority===xr.Low),i=t.filter(l=>this.viewItems[l].priority===xr.High);this.resize(this.viewItems.length-1,r-e,void 0,a,i)}this.distributeEmptySpace(),this.layoutViews()}resizeView(r,e){if(r<0||r>=this.viewItems.length)return;const t=Zt(0,this.viewItems.length).filter(o=>o!==r),a=[...t.filter(o=>this.viewItems[o].priority===xr.Low),r],i=t.filter(o=>this.viewItems[o].priority===xr.High),l=this.viewItems[r];e=Math.round(e),e=lr(e,l.minimumSize,Math.min(l.maximumSize,this.size)),l.size=e,this.relayout(a,i)}resizeViews(r){for(let e=0;e<r.length;e++){const t=this.viewItems[e];let a=r[e];a=Math.round(a),a=lr(a,t.minimumSize,Math.min(t.maximumSize,this.size)),t.size=a}this.contentSize=this.viewItems.reduce((e,t)=>e+t.size,0),this.saveProportions(),this.layout(this.size)}getViewSize(r){return r<0||r>=this.viewItems.length?-1:this.viewItems[r].size}isViewVisible(r){if(r<0||r>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[r].visible}setViewVisible(r,e){if(r<0||r>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[r].setVisible(e),this.distributeEmptySpace(r),this.layoutViews(),this.saveProportions()}distributeViewSizes(){const r=[];let e=0;for(const o of this.viewItems)o.maximumSize-o.minimumSize>0&&(r.push(o),e+=o.size);const t=Math.floor(e/r.length);for(const o of r)o.size=lr(t,o.minimumSize,o.maximumSize);const a=Zt(0,this.viewItems.length),i=a.filter(o=>this.viewItems[o].priority===xr.Low),l=a.filter(o=>this.viewItems[o].priority===xr.High);this.relayout(i,l)}dispose(){this.sashItems.forEach(r=>r.sash.dispose()),this.sashItems=[],this.sashContainer.remove()}relayout(r,e){const t=this.viewItems.reduce((a,i)=>a+i.size,0);this.resize(this.viewItems.length-1,this.size-t,void 0,r,e),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}onSashStart({sash:r,start:e}){const t=this.sashItems.findIndex(a=>a.sash===r);(a=>{const i=this.viewItems.map(S=>S.size);let l,o,s=Number.NEGATIVE_INFINITY,c=Number.POSITIVE_INFINITY;const u=Zt(t,-1,-1),h=Zt(t+1,this.viewItems.length),m=u.reduce((S,C)=>S+(this.viewItems[C].minimumSize-i[C]),0),g=u.reduce((S,C)=>S+(this.viewItems[C].viewMaximumSize-i[C]),0),b=h.length===0?Number.POSITIVE_INFINITY:h.reduce((S,C)=>S+(i[C]-this.viewItems[C].minimumSize),0),y=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((S,C)=>S+(i[C]-this.viewItems[C].viewMaximumSize),0);s=Math.max(m,y),c=Math.min(b,g);const f=this.findFirstSnapIndex(u),v=this.findFirstSnapIndex(h);if(typeof f=="number"){const S=this.viewItems[f],C=Math.floor(S.viewMinimumSize/2);l={index:f,limitDelta:S.visible?s-C:s+C,size:S.size}}if(typeof v=="number"){const S=this.viewItems[v],C=Math.floor(S.viewMinimumSize/2);o={index:v,limitDelta:S.visible?c+C:c-C,size:S.size}}this.sashDragState={start:a,current:a,index:t,sizes:i,minDelta:s,maxDelta:c,snapBefore:l,snapAfter:o}})(e)}onSashChange({current:r}){const{index:e,start:t,sizes:a,minDelta:i,maxDelta:l,snapBefore:o,snapAfter:s}=this.sashDragState;this.sashDragState.current=r;const c=r-t;this.resize(e,c,a,void 0,void 0,i,l,o,s),this.distributeEmptySpace(),this.layoutViews()}getSashPosition(r){let e=0;for(let t=0;t<this.sashItems.length;t++)if(e+=this.viewItems[t].size,this.sashItems[t].sash===r)return e;return 0}resize(r,e,t=this.viewItems.map(u=>u.size),a,i,l=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,s,c){if(r<0||r>=this.viewItems.length)return 0;const u=Zt(r,-1,-1),h=Zt(r+1,this.viewItems.length);if(i)for(const k of i)Go(u,k),Go(h,k);if(a)for(const k of a)ai(u,k),ai(h,k);const m=u.map(k=>this.viewItems[k]),g=u.map(k=>t[k]),b=h.map(k=>this.viewItems[k]),y=h.map(k=>t[k]),f=u.reduce((k,P)=>k+(this.viewItems[P].minimumSize-t[P]),0),v=u.reduce((k,P)=>k+(this.viewItems[P].maximumSize-t[P]),0),S=h.length===0?Number.POSITIVE_INFINITY:h.reduce((k,P)=>k+(t[P]-this.viewItems[P].minimumSize),0),C=h.length===0?Number.NEGATIVE_INFINITY:h.reduce((k,P)=>k+(t[P]-this.viewItems[P].maximumSize),0),M=Math.max(f,C,l),E=Math.min(S,v,o);let w=!1;if(s){const k=this.viewItems[s.index],P=e>=s.limitDelta;w=P!==k.visible,k.setVisible(P,s.size)}if(!w&&c){const k=this.viewItems[c.index],P=e<c.limitDelta;w=P!==k.visible,k.setVisible(P,c.size)}if(w)return this.resize(r,e,t,a,i,l,o);for(let k=0,P=e=lr(e,M,E);k<m.length;k++){const _=m[k],I=lr(g[k]+P,_.minimumSize,_.maximumSize);P-=I-g[k],_.size=I}for(let k=0,P=e;k<b.length;k++){const _=b[k],I=lr(y[k]-P,_.minimumSize,_.maximumSize);P+=I-y[k],_.size=I}return e}distributeEmptySpace(r){const e=this.viewItems.reduce((i,l)=>i+l.size,0);let t=this.size-e;const a=Zt(this.viewItems.length-1,-1,-1);typeof r=="number"&&ai(a,r);for(let i=0;t!==0&&i<a.length;i++){const l=this.viewItems[a[i]],o=lr(l.size+t,l.minimumSize,l.maximumSize);t-=o-l.size,l.size=o}}layoutViews(){var r;this.contentSize=this.viewItems.reduce((t,a)=>t+a.size,0);let e=0;for(const t of this.viewItems)t.layout(e),e+=t.size;(r=this.onDidChange)!=null&&r.call(this,this.viewItems.map(t=>t.size)),this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement()}saveProportions(){this.proportionalLayout&&this.contentSize>0&&(this.proportions=this.viewItems.map(r=>r.size/this.contentSize))}updateSashEnablement(){let r=!1;const e=this.viewItems.map(s=>r=s.size-s.minimumSize>0||r);r=!1;const t=this.viewItems.map(s=>r=s.maximumSize-s.size>0||r),a=[...this.viewItems].reverse();r=!1;const i=a.map(s=>r=s.size-s.minimumSize>0||r).reverse();r=!1;const l=a.map(s=>r=s.maximumSize-s.size>0||r).reverse();let o=0;for(let s=0;s<this.sashItems.length;s++){const{sash:c}=this.sashItems[s];o+=this.viewItems[s].size;const u=!(e[s]&&l[s+1]),h=!(t[s]&&i[s+1]);if(u&&h){const m=Zt(s,-1,-1),g=Zt(s+1,this.viewItems.length),b=this.findFirstSnapIndex(m),y=this.findFirstSnapIndex(g),f=typeof b=="number"&&!this.viewItems[b].visible,v=typeof y=="number"&&!this.viewItems[y].visible;f&&i[s]&&(o>0||this.startSnappingEnabled)?c.state=Ut.Minimum:v&&e[s]&&(o<this.contentSize||this.endSnappingEnabled)?c.state=Ut.Maximum:c.state=Ut.Disabled}else c.state=u&&!h?Ut.Minimum:!u&&h?Ut.Maximum:Ut.Enabled}}findFirstSnapIndex(r){for(const e of r){const t=this.viewItems[e];if(t.visible&&t.snap)return e}for(const e of r){const t=this.viewItems[e];if(t.visible&&t.maximumSize-t.minimumSize>0)return;if(!t.visible&&t.snap)return e}}}let mn=class{constructor(r){this.size=void 0,this.size=r}getPreferredSize(){return this.size}};class Qo{constructor(r,e){this.proportion=void 0,this.layoutService=void 0,this.proportion=r,this.layoutService=e}getPreferredSize(){return this.proportion*this.layoutService.getSize()}}class ma{getPreferredSize(){}}class Jo{get preferredSize(){return this.layoutStrategy.getPreferredSize()}set preferredSize(r){if(typeof r=="number")this.layoutStrategy=new mn(r);else if(typeof r=="string"){const e=r.trim();if(ga(e,"%")){const t=Number(e.slice(0,-1))/100;this.layoutStrategy=new Qo(t,this.layoutService)}else if(ga(e,"px")){const t=Number(e.slice(0,-2))/100;this.layoutStrategy=new mn(t)}else if(typeof Number.parseFloat(e)=="number"){const t=Number.parseFloat(e);this.layoutStrategy=new mn(t)}else this.layoutStrategy=new ma}else this.layoutStrategy=new ma}constructor(r,e){var t;if(this.minimumSize=0,this.maximumSize=Number.POSITIVE_INFINITY,this.element=void 0,this.priority=void 0,this.snap=void 0,this.layoutService=void 0,this.layoutStrategy=void 0,this.layoutService=r,this.element=e.element,this.minimumSize=typeof e.minimumSize=="number"?e.minimumSize:30,this.maximumSize=typeof e.maximumSize=="number"?e.maximumSize:Number.POSITIVE_INFINITY,typeof e.preferredSize=="number")this.layoutStrategy=new mn(e.preferredSize);else if(typeof e.preferredSize=="string"){const a=e.preferredSize.trim();if(ga(a,"%")){const i=Number(a.slice(0,-1))/100;this.layoutStrategy=new Qo(i,this.layoutService)}else if(ga(a,"px")){const i=Number(a.slice(0,-2));this.layoutStrategy=new mn(i)}else if(typeof Number.parseFloat(a)=="number"){const i=Number.parseFloat(a);this.layoutStrategy=new mn(i)}else this.layoutStrategy=new ma}else this.layoutStrategy=new ma;this.priority=(t=e.priority)!=null?t:xr.Normal,this.snap=typeof e.snap=="boolean"&&e.snap}layout(r){}}function es(n){return n.minSize!==void 0||n.maxSize!==void 0||n.preferredSize!==void 0||n.priority!==void 0||n.visible!==void 0}const Zi=d.forwardRef(({className:n,children:r},e)=>z.createElement("div",{ref:e,className:xi("split-view-view",yl,n)},r));Zi.displayName="Allotment.Pane";const Nl=d.forwardRef(({children:n,className:r,id:e,maxSize:t=1/0,minSize:a=30,proportionalLayout:i=!0,separator:l=!0,sizes:o,defaultSizes:s=o,snap:c=!1,vertical:u=!1,onChange:h,onReset:m,onVisibleChange:g,onDragStart:b,onDragEnd:y},f)=>{const v=d.useRef(null),S=d.useRef([]),C=d.useRef(new Map),M=d.useRef(null),E=d.useRef(new Map),w=d.useRef(new tm),k=d.useRef([]),[P,_]=d.useState(!1),I=d.useMemo(()=>z.Children.toArray(n).filter(z.isValidElement),[n]),L=d.useCallback(T=>{var j,$;const O=(j=k.current)==null?void 0:j[T];return typeof(O==null?void 0:O.preferredSize)=="number"&&(($=M.current)!=null&&$.resizeView(T,Math.round(O.preferredSize)),!0)},[]);return d.useImperativeHandle(f,()=>({reset:()=>{if(m)m();else{var T;(T=M.current)==null||T.distributeViewSizes();for(let j=0;j<k.current.length;j++)L(j)}},resize:T=>{var j;(j=M.current)==null||j.resizeViews(T)}})),Uo(()=>{let T=!0;s&&E.current.size!==s.length&&(T=!1,console.warn(`Expected ${s.length} children based on defaultSizes but found ${E.current.size}`)),T&&s&&(S.current=I.map(O=>O.key));const j=Hn({orientation:u?tr.Vertical:tr.Horizontal,proportionalLayout:i},T&&s&&{descriptor:{size:s.reduce((O,H)=>O+H,0),views:s.map((O,H)=>{var V,Y,X,pe;const W=C.current.get(S.current[H]),Q=new Jo(w.current,Hn({element:document.createElement("div"),minimumSize:(V=W==null?void 0:W.minSize)!=null?V:a,maximumSize:(Y=W==null?void 0:W.maxSize)!=null?Y:t,priority:(X=W==null?void 0:W.priority)!=null?X:xr.Normal},(W==null?void 0:W.preferredSize)&&{preferredSize:W==null?void 0:W.preferredSize},{snap:(pe=W==null?void 0:W.snap)!=null?pe:c}));return k.current.push(Q),{container:[...E.current.values()][H],size:O,view:Q}})}});M.current=new Em(v.current,j,h,b,y),M.current.on("sashDragStart",()=>{var O;(O=v.current)==null||O.classList.add("split-view-sash-dragging")}),M.current.on("sashDragEnd",()=>{var O;(O=v.current)==null||O.classList.remove("split-view-sash-dragging")}),M.current.on("sashchange",O=>{if(g&&M.current){const H=I.map(V=>V.key);for(let V=0;V<H.length;V++){const Y=C.current.get(H[V]);(Y==null?void 0:Y.visible)!==void 0&&Y.visible!==M.current.isViewVisible(V)&&g(V,M.current.isViewVisible(V))}}}),M.current.on("sashreset",O=>{if(m)m();else{var H;if(L(O)||L(O+1))return;(H=M.current)==null||H.distributeViewSizes()}});const $=M.current;return()=>{$.dispose()}},[]),Uo(()=>{if(P){const re=I.map(G=>G.key),ne=[...S.current],U=re.filter(G=>!S.current.includes(G)),ie=re.filter(G=>S.current.includes(G)),ce=S.current.map(G=>!re.includes(G));for(let G=ce.length-1;G>=0;G--){var T;ce[G]&&((T=M.current)!=null&&T.removeView(G),ne.splice(G,1),k.current.splice(G,1))}for(const G of U){var j,$,O,H,V;const q=C.current.get(G),J=new Jo(w.current,Hn({element:document.createElement("div"),minimumSize:(j=q==null?void 0:q.minSize)!=null?j:a,maximumSize:($=q==null?void 0:q.maxSize)!=null?$:t,priority:(O=q==null?void 0:q.priority)!=null?O:xr.Normal},(q==null?void 0:q.preferredSize)&&{preferredSize:q==null?void 0:q.preferredSize},{snap:(H=q==null?void 0:q.snap)!=null?H:c}));(V=M.current)!=null&&V.addView(E.current.get(G),J,ka.Distribute,re.findIndex(le=>le===G)),ne.splice(re.findIndex(le=>le===G),0,G),k.current.splice(re.findIndex(le=>le===G),0,J)}for(;!Gg(re,ne);)for(const[G,q]of re.entries()){const J=ne.findIndex(le=>le===q);if(J!==G){var Y;(Y=M.current)==null||Y.moveView(E.current.get(q),J,G);const le=ne[J];ne.splice(J,1),ne.splice(G,0,le);break}}for(const G of U){var X;const q=re.findIndex(le=>le===G),J=k.current[q].preferredSize;J!==void 0&&((X=M.current)==null||X.resizeView(q,J))}for(const G of[...U,...ie]){var pe,W;const q=C.current.get(G),J=re.findIndex(le=>le===G);q&&es(q)&&q.visible!==void 0&&((pe=M.current)==null?void 0:pe.isViewVisible(J))!==q.visible&&((W=M.current)==null||W.setViewVisible(J,q.visible))}for(const G of ie){const q=C.current.get(G),J=re.findIndex(le=>le===G);if(q&&es(q)){var Q;q.preferredSize!==void 0&&k.current[J].preferredSize!==q.preferredSize&&(k.current[J].preferredSize=q.preferredSize);let le=!1;q.minSize!==void 0&&k.current[J].minimumSize!==q.minSize&&(k.current[J].minimumSize=q.minSize,le=!0),q.maxSize!==void 0&&k.current[J].maximumSize!==q.maxSize&&(k.current[J].maximumSize=q.maxSize,le=!0),le&&((Q=M.current)==null||Q.layout())}}(U.length>0||ce.length>0)&&(S.current=re)}},[I,P,t,a,c]),d.useEffect(()=>{M.current&&(M.current.onDidChange=h)},[h]),d.useEffect(()=>{M.current&&(M.current.onDidDragStart=b)},[b]),d.useEffect(()=>{M.current&&(M.current.onDidDragEnd=y)},[y]),Wg({ref:v,onResize:({width:T,height:j})=>{var $;T&&j&&(($=M.current)!=null&&$.layout(u?j:T),w.current.setSize(u?j:T),_(!0))}}),d.useEffect(()=>{Cl&&Mm(20)},[]),z.createElement("div",{ref:v,className:xi("split-view",u?"split-view-vertical":"split-view-horizontal",{"split-view-separator-border":l},Yg,u?Zg:Qg,{[Jg]:l},r),id:e},z.createElement("div",{className:xi("split-view-container",Xg)},z.Children.toArray(n).map(T=>{if(!z.isValidElement(T))return null;const j=T.key;return T.type.displayName==="Allotment.Pane"?(C.current.set(j,T.props),z.cloneElement(T,{key:j,ref:$=>{const O=T.ref;O&&(O.current=$),$?E.current.set(j,$):E.current.delete(j)}})):z.createElement(Zi,{key:j,ref:$=>{$?E.current.set(j,$):E.current.delete(j)}},T)})))});function Mm(n){const r=lr(n,4,20),e=lr(n,1,8);document.documentElement.style.setProperty("--sash-size",r+"px"),document.documentElement.style.setProperty("--sash-hover-size",e+"px"),function(t){Ml=t,Al.emit("onDidChangeGlobalSize",t)}(r)}Nl.displayName="Allotment";var Wr=Object.assign(Nl,{Pane:Zi});const Am="_container_jgx61_1",xm="_title_jgx61_12",Nm="_body_jgx61_18",wm="_right_jgx61_44",fa={container:Am,title:xm,body:Nm,right:wm},km="_container_21aji_1",Pm="_content_21aji_19",ts={container:km,content:Pm},Om="_container_17mrb_1",Im="_item_17mrb_8",Tm="_active_17mrb_21",_m="_item-slash_17mrb_24",Yr={container:Om,item:Im,active:Tm,itemSlash:_m},Rm=n=>{const{parent:r,parents:e,onClick:t}=n;return D.jsxs("div",{className:Yr.container,children:[D.jsxs("div",{className:oe(Yr.item,{[Yr.active]:r===""}),onClick:()=>t(""),children:[D.jsx("span",{children:"Root"}),e.length>0&&D.jsx("span",{className:Yr.itemSlash,children:"/"})]}),e.map((a,i)=>D.jsxs("div",{className:oe(Yr.item,{[Yr.active]:r===a.code}),onClick:()=>t(a.code),children:[D.jsx("span",{children:a.name}),i!=e.length-1&&D.jsx("span",{className:Yr.itemSlash,children:"/"})]},a.code))]})},$m="_item_4xjdi_1",Dm="_item-cover_4xjdi_10",Lm="_item-cover-active_4xjdi_26",Bm="_item-image_4xjdi_29",jm="_item-name_4xjdi_36",zm="_item-name-active_4xjdi_52",fn={item:$m,itemCover:Dm,itemCoverActive:Lm,itemImage:Bm,itemName:jm,itemNameActive:zm},Hm="data:image/svg+xml,%3csvg%20width='597'%20height='478'%20viewBox='0%200%20597%20478'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0%2046.286V431.014C0%20456.47%2020.682%20477.297%2045.96%20477.297H550.658C575.936%20477.297%20596.618%20456.47%20596.618%20431.014V122.364C596.618%2096.9081%20575.936%2076.0808%20550.658%2076.0808H324.592C310.804%2076.0808%20297.591%2069.7168%20288.686%2058.7246L256.514%2018.5162C247.897%207.81324%20234.97%201.44932%20221.182%201.16005L46.2472%200.00297717C20.682%20-0.286292%200%2020.5411%200%2046.286Z'%20fill='%230091FF'/%3e%3cpath%20d='M0%20212.783V425.707C0%20454.097%2020.682%20477.325%2045.96%20477.325H550.658C575.936%20477.325%20596.618%20454.097%20596.618%20425.707V81.4798C596.618%2053.0899%20575.936%2029.8618%20550.658%2029.8618H369.116C358.488%2029.8618%20347.859%2034.0558%20339.816%2041.7985L223.48%20150.519C215.15%20158.262%20204.522%20162.456%20193.606%20162.456L46.2472%20160.842C20.682%20160.842%200%20184.071%200%20212.783Z'%20fill='%23B7D9F8'/%3e%3c/svg%3e",Vm="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886943620'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='12284'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M534%20352V136H232v752h560V394H576a42%2042%200%200%201-42-42z'%20fill='%23D9D9D9'%20p-id='12285'%3e%3c/path%3e%3cpath%20d='M854.6%20288.6L639.4%2073.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7%200-32%2014.3-32%2032v832c0%2017.7%2014.3%2032%2032%2032h640c17.7%200%2032-14.3%2032-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602%20137.8L790.2%20326H602V137.8zM792%20888H232V136h302v216a42%2042%200%200%200%2042%2042h216v494z'%20p-id='12286'%3e%3c/path%3e%3c/svg%3e",Km="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887095606'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='17156'%20width='170'%20height='170'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M648.76544%200c24.40704%200%2047.8208%209.68704%2065.09568%2026.9312l187.61728%20187.21792a92.16%2092.16%200%200%201%2027.05408%2065.2288v120.6272c44.2368%200%2080.09728%2035.85536%2080.10752%2080.08704v319.7952c0%2043.24864-34.3296%2078.6944-77.55776%2080.06656l-2.54976%200.03072v48.00512c0%2053.02272-43.02848%2096-96.12288%2096H191.5904c-53.0944%200-96.12288-42.97728-96.12288-96v-48.00512c-44.2368%200-80.09728-35.85536-80.10752-80.08704V480.1024c0-43.24864%2034.3296-78.6944%2077.55776-80.06656l2.54976-0.04096V96C95.46752%2042.97728%20138.496%200%20191.5904%200h457.17504z%20m183.64416%20879.99488H191.5904v17.28512a30.72%2030.72%200%200%200%2030.72%2030.72h579.3792a30.72%2030.72%200%200%200%2030.72-30.72v-17.28512z%20m-409.088-329.86112H297.984L267.75552%20721.92h38.33856l10.81344-61.68576h81.59232l6.144-34.16064H323.05152l7.12704-40.79616H417.1776l6.144-35.14368z%20m114.03264-0.24576h-84.7872L422.33856%20721.92h87.73632c36.864%200%2059.22816-12.288%2068.32128-40.30464%206.144-19.16928%200.49152-42.02496-19.90656-49.88928%2021.62688-9.33888%2029.98272-25.31328%2029.98272-42.27072%200-26.78784-21.38112-39.56736-51.11808-39.56736z%20m115.75296%200h-42.02496l-0.24576%201.72032%2043.74528%2083.06688-75.44832%2086.016-0.24576%201.2288h46.6944l48.16896-57.01632L703.73376%20721.92h42.51648l0.24576-1.2288-45.21984-83.31264%2075.44832-85.77024%200.24576-1.72032h-44.2368l-49.88928%2059.22816-29.73696-59.22816z%20m-133.44768%2098.79552c14.99136%200%2022.60992%206.88128%2022.60992%2016.95744%200%2013.5168-9.58464%2022.85568-29.24544%2022.85568h-47.18592l7.12704-39.81312h46.6944z%20m12.04224-65.61792c12.288%200%2017.44896%206.144%2017.44896%2013.5168%200%209.09312-8.35584%2020.15232-24.08448%2020.15232h-46.6944l6.144-33.66912h47.18592z%20m71.51616-494.7456H222.3104a30.72%2030.72%200%200%200-30.72%2030.72v280.95488h640.8192v-81.5616h-137.00096c-50.8928-0.01024-92.14976-41.2672-92.16-92.16l-0.03072-137.95328z%20m96.12288%2059.84256v58.91072a15.36%2015.36%200%200%200%2015.36%2015.36h59.0848l-74.4448-74.27072z'%20fill='%238a8a8a'%20p-id='17157'%3e%3c/path%3e%3c/svg%3e",Fm="/longriver1012/glb-CHfdM5il.svg",Um="/longriver1012/obj-BlhbR6Kx.svg",Gm="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740886774681'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='11289'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M881.503769%201009.728009a47.58397%2047.58397%200%200%201-33.919979%2014.271991H175.90421c-12.703992%200-24.895984-5.119997-33.919979-14.271991A49.183969%2049.183969%200%200%201%20128.00024%20975.23203V48.76861c0-12.927992%205.023997-25.343984%2014.047991-34.495979A47.58397%2047.58397%200%200%201%20175.93621%200.00064h412.095742c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l259.519838%20263.807835c8.991994%209.183994%2014.015991%2021.663986%2013.951991%2034.623979v662.655585c0%2012.927992-5.055997%2025.343984-14.079991%2034.495979z'%20fill='%23DCF3D1'%20p-id='11290'%3e%3c/path%3e%3cpath%20d='M32.0003%20544.0003h959.9994v319.9998c0%2016.959989-5.055997%2033.279979-14.079991%2045.247972-8.959994%2011.999993-21.183987%2018.751988-33.919979%2018.751988h-863.99946c-12.735992%200-24.959984-6.719996-33.919979-18.751988C37.024297%20897.280079%2032.0003%20880.960089%2032.0003%20864.0001V544.0003z'%20fill='%2352C41A'%20p-id='11291'%3e%3c/path%3e%3cpath%20d='M127.96824%20536.384305v-97.535939L32.0003%20536.384305h95.96794z%20m767.61552%200l0.96-97.535939L991.9997%20536.384305h-96.41594z'%20fill='%23389E0D'%20p-id='11292'%3e%3c/path%3e%3cpath%20d='M895.58376%20319.39244h-259.551838c-26.495983%200-47.99997-21.823986-47.99997-48.767969V0.00064c12.767992-0.064%2025.023984%205.023997%2034.079979%2014.143991l260.031838%20263.807835c8.799995%209.279994%2013.631991%2021.727986%2013.439991%2034.623979v6.815995z'%20fill='%2352C41A'%20opacity='.4'%20p-id='11293'%3e%3c/path%3e%3cpath%20d='M280.000145%20848.00011l4.479997-151.039906%2050.879968%20151.039906h37.759977l50.239968-150.399906%204.799997%20150.399906h43.199973l-14.71999-228.479857h-46.079972l-56.319964%20167.999895-56.319965-167.999895H251.520163L236.800172%20848.00011h43.199973z%20m313.919804%200v-186.879883h62.079961v-41.599974h-168.319895v41.599974h62.079961v186.879883h44.159973z%20m211.519868%200v-41.599974h-84.479948v-186.879883h-44.159972v228.479857h128.63992z'%20fill='%23FFFFFF'%20p-id='11294'%3e%3c/path%3e%3c/svg%3e",Wm="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1740887007250'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='14135'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='200'%20height='200'%3e%3cpath%20d='M120%20334a40%2040%200%200%201%2040%2040V476h80V374a40%2040%200%201%201%2080%200v284a40%2040%200%201%201-80%200V556H160v102a40%2040%200%201%201-80%200v-284a40%2040%200%200%201%2040-40zM984%20760a40%2040%200%200%201%2040%2040v64c0%2088.224-71.776%20160-160%20160H160c-88.224%200-160-71.776-160-160v-64a40%2040%200%201%201%2080%200v64c0%2044.112%2035.888%2080%2080%2080h704c44.112%200%2080-35.888%2080-80v-64a40%2040%200%200%201%2040-40zM864%200c88.224%200%20160%2071.776%20160%20160v72a40%2040%200%201%201-80%200v-72c0-44.112-35.888-80-80-80H160c-44.112%200-80%2035.888-80%2080v72a40%2040%200%201%201-80%200v-72C0%2071.776%2071.776%200%20160%200h704z%20m78%20460c0%2043.52-22.552%2081.84-56.56%20103.976l49.424%2071.224a40%2040%200%201%201-65.728%2045.6L801.968%20584H780v74a40%2040%200%201%201-80%200V376a40%2040%200%200%201%2040-40h78c68.376%200%20124%2055.624%20124%20124z%20m-124%2044c24.264%200%2044-19.736%2044-44s-19.736-44-44-44H780v88h38zM503%20698H430a40%2040%200%200%201-40-40v-284a40%2040%200%200%201%2040-40h73C574.128%20334%20632%20391.872%20632%20463v106c0%2071.128-57.872%20129-129%20129z%20m-33-284v204h33A49.056%2049.056%200%200%200%20552%20569v-106a49.056%2049.056%200%200%200-49-49H470z'%20fill='%234A90E2'%20p-id='14136'%3e%3c/path%3e%3c/svg%3e",Ym=[{label:"删除",key:"delete"},{label:"导出",key:"export"}],qm=n=>{const{draggable:r,asset:e,active:t,onClick:a,onDoubleClick:i,onRename:l,onDelete:o,onExport:s,onDragStart:c}=n,u=d.useRef(null),[h,m]=d.useState(!1),[g,b]=d.useState(""),y=d.useMemo(()=>{const C=ml(e.name);return e.cover?e.cover:e.type==="folder"?Hm:_g(C)?URL.createObjectURL(e.file):C==="fbx"?Km:C==="glb"?Fm:C==="obj"?Um:C==="mtl"?Gm:C==="hdr"?Wm:Vm},[e]);d.useEffect(()=>{b(e.name)},[e]);const f=()=>{t&&m(!0),setTimeout(()=>{var C;(C=u.current)==null||C.focus()},0)},v=()=>{m(!1),!(!g||g===e.name)&&l(e,g)},S=async({key:C})=>{C==="delete"?o(e):C==="export"&&s(e)};return D.jsx(Cs,{menu:{items:Ym,onClick:S},trigger:["contextMenu"],children:D.jsxs("div",{className:fn.item,draggable:r,onClick:()=>a(e),onDoubleClick:()=>i(e),onDragStart:c,onContextMenu:C=>C.stopPropagation(),children:[D.jsx("div",{className:oe(fn.itemCover,{[fn.itemCoverActive]:t}),children:D.jsx("img",{draggable:!1,className:fn.itemImage,src:y,alt:"cover"})}),D.jsx(Ra,{ref:u,value:g,style:{display:h?"block":"none"},onChange:C=>b(C.target.value),onBlur:v,onPressEnter:v}),D.jsx("div",{title:e.name,style:{display:h?"none":"block"},className:oe(fn.itemName,{[fn.itemNameActive]:t}),onClick:f,children:e.name})]})})},Xm=[{label:"新建文件夹",key:"folder"},{label:"导入",key:"import"},{label:"导出",key:"export"}],Zm=["glb","jpg","jpeg","png","hdr","webp"],Qm=()=>{const[n,r]=Es.useMessage(),[e,t]=d.useState([]),[a,i]=d.useState(""),[l,o]=d.useState(""),[s,c]=d.useState([]),u=async E=>{const w=await Ss(E);t(w)};d.useEffect(()=>{u("")},[]);const h=E=>{if(E!==l)if(!E)c([]),o(""),u("");else{const w=s.findIndex(k=>k.code===E);s.splice(w+1,s.length-1-w),c([...s]),o(E),u(E)}},m=async({key:E})=>{if(E==="folder")await vc(l,"文件夹"),await u(l),n.info("添加成功");else if(E==="export"){const w=await no(l),k=ao().format("YYYY-MM-DD HH-mm-ss");io(w,`assets-${k}.zip`)}else E==="import"&&(await yc(),await u(l))},g=E=>{E.preventDefault(),E.dataTransfer.dropEffect="copy"},b=async E=>{E.preventDefault();const w=Array.from(E.dataTransfer.files);w.length<=0||(await bc(w,l),await u(l),n.info("添加成功"))},y=E=>i(E.code),f=async E=>{E.type==="folder"&&(await u(E.code),s.push(E),c([...s]),o(E.code))},v=async(E,w)=>{await Cc(E.code,w),await u(l)},S=async E=>{await Sc(E.code),await u(l)},C=async E=>{const w=await no(E.code),k=ao().format("YYYY-MM-DD HH-mm-ss");io(w,`assets-${k}.zip`)},M=(E,w)=>{const k={type:w.type,item:w};E.dataTransfer.setData("text",JSON.stringify(k))};return D.jsxs(D.Fragment,{children:[r,D.jsx(Rm,{parent:l,parents:s,onClick:h}),D.jsx(Cs,{menu:{items:Xm,onClick:m},trigger:["contextMenu"],children:D.jsx("div",{className:ts.container,onDragOver:g,onDrop:b,children:D.jsx("div",{className:ts.content,children:e.map(E=>D.jsx(qm,{asset:E,active:a===E.code,draggable:Zm.includes(E.type),onClick:y,onDoubleClick:f,onRename:v,onDelete:S,onExport:C,onDragStart:w=>M(w,E)},E.code))})})})]})},Jm=()=>D.jsxs("div",{className:fa.container,children:[D.jsxs("div",{className:fa.title,children:[D.jsx("span",{className:"iconfont icon-assets"}),D.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Assets"})]}),D.jsx("div",{className:fa.body,children:D.jsx("div",{className:fa.right,children:D.jsx(Qm,{})})})]}),ef="_container_pv2t3_1",tf="_title_pv2t3_10",rf="_icon_pv2t3_16",nf="_active_pv2t3_19",af="_body_pv2t3_22",qr={container:ef,title:tf,icon:rf,active:nf,body:af};class of{constructor(r){this.parent=r,this.container=document.createElement("div"),this.container.className="attribute-item-label",this.label=document.createElement("div"),this.label.className="attribute-item-label-name",this.container.appendChild(this.label)}hide(){delete this.item}show(r){const{attribute:e,tip:t}=r,{label:a,hiddenLabel:i}=e;this.item=r,this.label.textContent=a,this.label.title=t||a,this.container.style.display=i?"none":"flex"}dispose(){delete this.item}}class sf extends oo{constructor(r,e){super(),this.isViewHelper=!0,this.animating=!1,this.center=new jt;const t=new pa("#ff4466"),a=new pa("#88ff44"),i=new pa("#4488ff"),l=new pa("#000000"),o={},s=[],c=new qc,u=new Ns,h=new oo,m=new Xc(-2,2,2,-2,0,4);m.position.set(0,0,2);const g=new Zc(.04,.04,.8,5).rotateZ(-Math.PI/2).translate(.4,0,0),b=new Ya(g,W(t)),y=new Ya(g,W(a)),f=new Ya(g,W(i));y.rotation.z=Math.PI/2,f.rotation.y=-Math.PI/2,this.add(b),this.add(f),this.add(y);const v=Q(t),S=Q(a),C=Q(i),M=Q(l),E=new pn(v),w=new pn(S),k=new pn(C),P=new pn(M),_=new pn(M),I=new pn(M);E.position.x=1,w.position.y=1,k.position.z=1,P.position.x=-1,_.position.y=-1,I.position.z=-1,P.material.opacity=.2,_.material.opacity=.2,I.material.opacity=.2,E.userData.type="posX",w.userData.type="posY",k.userData.type="posZ",P.userData.type="negX",_.userData.type="negY",I.userData.type="negZ",this.add(E),this.add(w),this.add(k),this.add(P),this.add(_),this.add(I),s.push(E),s.push(w),s.push(k),s.push(P),s.push(_),s.push(I);const L=new jt,T=128,j=2*Math.PI;this.render=function(ne){this.quaternion.copy(r.quaternion).invert(),this.updateMatrixWorld(),L.set(0,0,1),L.applyQuaternion(r.quaternion);const U=e.offsetWidth-T,ie=ne.isWebGPURenderer?e.offsetHeight-T:0;ne.clearDepth(),ne.getViewport(Y),ne.setViewport(U,ie,T,T),ne.render(this,m),ne.setViewport(Y.x,Y.y,Y.z,Y.w)};const $=new jt,O=new qa,H=new qa,V=new qa,Y=new Qc;let X=0;this.handleClick=function(ne){if(this.animating===!0)return!1;const U=e.getBoundingClientRect(),ie=U.left+(e.offsetWidth-T),ce=U.top+(e.offsetHeight-T);u.x=(ne.clientX-ie)/(U.right-ie)*2-1,u.y=-((ne.clientY-ce)/(U.bottom-ce))*2+1,c.setFromCamera(u,m);const G=c.intersectObjects(s);if(G.length>0){const J=G[0].object;return pe(J,this.center),this.animating=!0,!0}else return!1},this.setLabels=function(ne,U,ie){o.labelX=ne,o.labelY=U,o.labelZ=ie,re()},this.setLabelStyle=function(ne,U,ie){o.font=ne,o.color=U,o.radius=ie,re()},this.update=function(ne){const U=ne*j;H.rotateTowards(V,U),r.position.set(0,0,1).applyQuaternion(H).multiplyScalar(X).add(this.center),r.quaternion.rotateTowards(O,U),H.angleTo(V)===0&&(this.animating=!1)},this.dispose=function(){g.dispose(),b.material.dispose(),y.material.dispose(),f.material.dispose(),E.material.map.dispose(),w.material.map.dispose(),k.material.map.dispose(),P.material.map.dispose(),_.material.map.dispose(),I.material.map.dispose(),E.material.dispose(),w.material.dispose(),k.material.dispose(),P.material.dispose(),_.material.dispose(),I.material.dispose()};function pe(ne,U){switch(ne.userData.type){case"posX":$.set(1,0,0),O.setFromEuler(new hn(0,Math.PI*.5,0));break;case"posY":$.set(0,1,0),O.setFromEuler(new hn(-Math.PI*.5,0,0));break;case"posZ":$.set(0,0,1),O.setFromEuler(new hn);break;case"negX":$.set(-1,0,0),O.setFromEuler(new hn(0,-Math.PI*.5,0));break;case"negY":$.set(0,-1,0),O.setFromEuler(new hn(Math.PI*.5,0,0));break;case"negZ":$.set(0,0,-1),O.setFromEuler(new hn(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}X=r.position.distanceTo(U),$.multiplyScalar(X).add(U),h.position.copy(U),h.lookAt(r.position),H.copy(h.quaternion),h.lookAt($),V.copy(h.quaternion)}function W(ne){return new ws({color:ne,toneMapped:!1})}function Q(ne,U){const{font:ie="24px Arial",color:ce="#000000",radius:G=14}=o,q=document.createElement("canvas");q.width=64,q.height=64;const J=q.getContext("2d");J.beginPath(),J.arc(32,32,G,0,2*Math.PI),J.closePath(),J.fillStyle=ne.getStyle(),J.fill(),U&&(J.font=ie,J.textAlign="center",J.fillStyle=ce,J.fillText(U,32,41));const le=new Jc(q);return le.colorSpace=eu,new tu({map:le,toneMapped:!1})}function re(){E.material.map.dispose(),w.material.map.dispose(),k.material.map.dispose(),E.material.dispose(),w.material.dispose(),k.material.dispose(),E.material=Q(t,o.labelX),w.material=Q(a,o.labelY),k.material=Q(i,o.labelZ)}}}const tn=n=>{switch(n){case Oe.SimpleScript:return{id:Dn(),enabled:!0,name:It[Oe.SimpleScript],type:Oe.SimpleScript,script:ru};case Oe.Animator:return{id:Dn(),enabled:!0,name:It[Oe.Animator],type:Oe.Animator};case Oe.OrbitControls:return{id:Dn(),enabled:!0,name:It[Oe.OrbitControls],type:Oe.OrbitControls};case Oe.PointerLockControls:return{id:Dn(),enabled:!0,name:It[Oe.PointerLockControls],type:Oe.PointerLockControls};default:throw new Error(`未知组件类型: ${n}`)}};class wl extends On{constructor(r){super(r)}async paste(r){const e=r.map(l=>l.serialize()),t=[];Ec(e,"children").forEach(l=>{l.id=this.core.generateID(),l.components.forEach(o=>o.id=Dn()),l.type===Ke.Model&&t.push(this.core.modelManager.preloadModel(l))}),await Promise.all(t);const i=this.core.entityManager.createEntities(e,this.core.entityManager.root);this.core.select(i)}pasteMaterial(r){const e=this.core.lastSelection;if(!e||!e.material)return;const t=e.material.serialize();e.material.deserialize(r),this.core.bus.emit("MATERIAL_COPIED",{newValue:r,oldValue:t,material:e.material})}unmount(){}}class kl extends On{constructor(e){super(e);x(this,"mouse");x(this,"plane");x(this,"center");x(this,"normal");x(this,"position");x(this,"direction");this.plane=new nu,this.mouse=new Ns,this.center=new jt,this.normal=new jt(0,1,0),this.position=new jt,this.direction=new jt}get raycaster(){return this.core.render.raycaster}get camera(){return this.core.render.camera}async drop(e,t,a){if(!this.camera)return;const{clientX:i,clientY:l}=a,[o,s]=so(this.core.container,i,l);this.mouse.set(o*2-1,-(s*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera),this.raycaster.ray.intersectPlane(this.plane,this.position);const c={name:t,position:this.position.toArray(),modelCode:e},u=await au(this.core,c);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(u),this.core.select([u]),this.core.bus.emit("TRANSACTION_END")}async dropSymbol(e,t,a){if(!this.camera)return;const{clientX:i,clientY:l}=a,[o,s]=so(this.core.container,i,l);this.mouse.set(o*2-1,-(s*2)+1),this.plane.setFromNormalAndCoplanarPoint(this.normal,this.center),this.raycaster.setFromCamera(this.mouse,this.camera);const c=this.getObjects(),u=this.raycaster.intersectObjects(c,!1);if(u.length){const S=u[0];this.position.copy(S.point),this.direction.copy(S.normal)}else this.raycaster.ray.intersectPlane(this.plane,this.position),this.direction.set(0,0,1);this.direction.normalize(),ut.set(0,0,1),lo.setFromUnitVectors(ut,this.direction),xa.setFromQuaternion(lo);const[h,m,g]=xa.toArray(),b=t.lastIndexOf("/"),y=t.slice(b+1);this.core.symbolManager.symbolCache.delete(`${e}-${t}`);const f={name:y,position:this.position.toArray(),rotation:[h,m,g].map(nn.radToDeg),symbolCode:e,symbolPath:t},v=iu(this.core,f);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(v),this.core.select([v]),this.core.bus.emit("TRANSACTION_END")}getObjects(){const{scene:e}=this.core.render,t=[];return e.traverseVisible(a=>t.push(a)),t}}class Pl extends On{constructor(e){super(e);x(this,"box");x(this,"sphere");x(this,"center");x(this,"delta");x(this,"controls");const t=e.getPlugin(xn);this.controls=t.controls,this.box=new ks,this.sphere=new ou,this.center=new jt,this.delta=new jt}get camera(){return this.core.render.camera}focus(e){if(!this.camera)return;let t;const a=e.map(i=>i.object3d);if(this.box.makeEmpty(),su(a,this.box),this.box.isEmpty()){const i=a[a.length-1];this.center.setFromMatrixPosition(i.matrixWorld),t=1}else this.box.getCenter(this.center),t=this.box.getBoundingSphere(this.sphere).radius;this.delta.set(0,0,1),this.delta.applyQuaternion(this.camera.quaternion),this.delta.multiplyScalar(t*4),this.controls.target.copy(this.center),this.camera.position.copy(this.center).add(this.delta)}}class lf extends In{constructor(e){super(e);x(this,"onMouseUpPhase1",e=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.camera&&(this.moving=!1,this.updateMouse(e),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core))})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(e,t){Re.setFromUnitVectors(vr,this.normal),K.compose(e,Re,Kt),ft.copy(K).invert();let{x:a,y:i}=ut.copy(t).applyMatrix4(ft);const l=Math.max(Math.abs(a),Math.abs(i));this.isSquare&&(a=a>0?l:-l,i=i>0?l:-l),je.set(0,0,0).applyMatrix4(K),ze.set(a,0,0).applyMatrix4(K),He.set(a,i,0).applyMatrix4(K),Ve.set(0,i,0).applyMatrix4(K);const o=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray()];this.box.geometry.setAttribute("position",new yr(o,3)),this.box.visible=!0,this.width=st(Math.abs(a),2),this.height=st(Math.abs(i),2),this.center.set(a,i,0).multiplyScalar(.5).applyMatrix4(K),this.middlePosition.copy(ut.setX(a).setY(i).applyMatrix4(K))}createEntity(){const{x:e,y:t,z:a}=Ft.setFromQuaternion(Re),i={position:this.center.toArray(),rotation:[e,t,a].map(nn.radToDeg),size:[this.width,this.height]},l=lu(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(l),this.core.select([l]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class cf extends In{constructor(r){super(r)}drawPlane(r,e){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();let{x:t,y:a}=ut.copy(e).applyMatrix4(ft);const i=Math.max(Math.abs(t),Math.abs(a));this.isSquare&&(t=t>0?i:-i,a=a>0?i:-i),je.set(0,0,0).applyMatrix4(K),ze.set(t,0,0).applyMatrix4(K),He.set(t,a,0).applyMatrix4(K),Ve.set(0,a,0).applyMatrix4(K);const l=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray()];this.box.geometry.setAttribute("position",new yr(l,3)),this.box.visible=!0,this.width=st(Math.abs(t),2),this.height=st(Math.abs(a),2),this.center.set(t,a,0).multiplyScalar(.5).applyMatrix4(K),this.middlePosition.copy(ut.setX(t).setY(a).applyMatrix4(K))}drawBox(r,e,t){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();const{x:a,y:i}=ut.copy(e).applyMatrix4(ft),{z:l}=ut.copy(t).applyMatrix4(ft);je.set(0,0,0).applyMatrix4(K),ze.set(a,0,0).applyMatrix4(K),He.set(a,i,0).applyMatrix4(K),Ve.set(0,i,0).applyMatrix4(K),yt.set(0,0,l).applyMatrix4(K),bt.set(a,0,l).applyMatrix4(K),St.set(a,i,l).applyMatrix4(K),Ct.set(0,i,l).applyMatrix4(K);const o=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray(),...je.toArray(),...yt.toArray(),...ze.toArray(),...bt.toArray(),...He.toArray(),...St.toArray(),...Ve.toArray(),...Ct.toArray(),...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()];this.box.geometry.setAttribute("position",new yr(o,3)),this.box.visible=!0,this.width=st(Math.abs(a),2),this.height=st(Math.abs(i),2),this.depth=st(Math.abs(l),2),this.center.set(a,i,l).multiplyScalar(.5),Ft.set(Math.PI*.5,0,0),Re.setFromEuler(Ft),Br.compose(this.center,Re,Kt).premultiply(K)}createEntity(){Br.decompose(this.center,Re,ut);const{x:r,y:e,z:t}=Ft.setFromQuaternion(Re),a={position:this.center.toArray(),rotation:[r,e,t].map(nn.radToDeg),size:[this.width,this.depth,this.height]},i=cu(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class uf extends In{constructor(r){super(r)}drawPlane(r,e){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();let{x:t,y:a}=ut.copy(e).applyMatrix4(ft);const i=Math.max(Math.abs(t),Math.abs(a));t=t>0?i:-i,a=a>0?i:-i,je.set(0,0,0).applyMatrix4(K),ze.set(t,0,0).applyMatrix4(K),He.set(t,a,0).applyMatrix4(K),Ve.set(0,a,0).applyMatrix4(K);const l=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray()],o=t*.5,s=a*.5,c=new Nn;c.moveTo(o,s),c.arc(0,0,o,0,Math.PI*2);const u=c.getPoints().map(h=>{const m=new jt(h.x,h.y,0);return m.applyMatrix4(K),m});this.circle.geometry.setFromPoints(u),this.circle.visible=!0,yt.set(o,0,0).applyMatrix4(K),bt.set(o,a,0).applyMatrix4(K),St.set(0,s,0).applyMatrix4(K),Ct.set(t,s,0).applyMatrix4(K),l.push(...yt.toArray(),...bt.toArray(),...St.toArray(),...Ct.toArray()),this.box.geometry.setAttribute("position",new yr(l,3)),this.box.visible=!0,this.width=st(Math.abs(t),2),this.height=st(Math.abs(a),2),this.center.set(t,a,0).multiplyScalar(.5).applyMatrix4(K),this.middlePosition.copy(ut.setX(t).setY(a).applyMatrix4(K))}drawBox(r,e,t){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();const{x:a,y:i}=ut.copy(e).applyMatrix4(ft),{z:l}=ut.copy(t).applyMatrix4(ft);je.set(0,0,0).applyMatrix4(K),ze.set(a,0,0).applyMatrix4(K),He.set(a,i,0).applyMatrix4(K),Ve.set(0,i,0).applyMatrix4(K),yt.set(0,0,l).applyMatrix4(K),bt.set(a,0,l).applyMatrix4(K),St.set(a,i,l).applyMatrix4(K),Ct.set(0,i,l).applyMatrix4(K);const o=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray(),...je.toArray(),...yt.toArray(),...ze.toArray(),...bt.toArray(),...He.toArray(),...St.toArray(),...Ve.toArray(),...Ct.toArray(),...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()],s=a*.5,c=i*.5,u=new Nn;u.moveTo(s,c),u.arc(0,0,s,0,Math.PI*2);const h=u.getPoints().map(m=>{const g=new jt(m.x,m.y,0);return g.applyMatrix4(K),g});this.circle.geometry.setFromPoints(h),this.circle.visible=!0,je.set(s,0,0).applyMatrix4(K),ze.set(s,c,l).applyMatrix4(K),He.set(a,c,0).applyMatrix4(K),Ve.set(s,c,l).applyMatrix4(K),yt.set(s,i,0).applyMatrix4(K),bt.set(s,c,l).applyMatrix4(K),St.set(0,c,0).applyMatrix4(K),Ct.set(s,c,l).applyMatrix4(K),o.push(...je.toArray(),...ze.toArray(),...He.toArray(),...Ve.toArray(),...yt.toArray(),...bt.toArray(),...St.toArray(),...Ct.toArray()),this.box.geometry.setAttribute("position",new yr(o,3)),this.box.visible=!0,this.width=st(Math.abs(a),2),this.height=st(Math.abs(i),2),this.depth=st(Math.abs(l),2),this.center.set(a,i,l).multiplyScalar(.5),Ft.set(Math.PI*.5,0,0),Re.setFromEuler(Ft),Br.compose(this.center,Re,Kt).premultiply(K)}createEntity(){Br.decompose(this.center,Re,ut);const{x:r,y:e,z:t}=Ft.setFromQuaternion(Re),a={position:this.center.toArray(),rotation:[r,e,t].map(nn.radToDeg),radius:st(this.width*.5,2),height:this.depth},i=uu(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class df extends In{constructor(r){super(r)}drawPlane(r,e){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();let{x:t,y:a}=ut.copy(e).applyMatrix4(ft);const i=Math.max(Math.abs(t),Math.abs(a));t=t>0?i:-i,a=a>0?i:-i,je.set(0,0,0).applyMatrix4(K),ze.set(t,0,0).applyMatrix4(K),He.set(t,a,0).applyMatrix4(K),Ve.set(0,a,0).applyMatrix4(K);const l=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray()],o=t*.5,s=a*.5,c=new Nn;c.moveTo(o,s),c.arc(0,0,o,0,Math.PI*2);const u=c.getPoints().map(h=>{const m=new jt(h.x,h.y,0);return m.applyMatrix4(K),m});this.circle.geometry.setFromPoints(u),this.circle.visible=!0,this.box.geometry.setAttribute("position",new yr(l,3)),this.box.visible=!0,this.width=st(Math.abs(t),2),this.height=st(Math.abs(a),2),this.center.set(t,a,0).multiplyScalar(.5).applyMatrix4(K),this.middlePosition.copy(ut.setX(t).setY(a).applyMatrix4(K))}drawBox(r,e,t){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();const{x:a,y:i}=ut.copy(e).applyMatrix4(ft),{z:l}=ut.copy(t).applyMatrix4(ft);je.set(0,0,0).applyMatrix4(K),ze.set(a,0,0).applyMatrix4(K),He.set(a,i,0).applyMatrix4(K),Ve.set(0,i,0).applyMatrix4(K),yt.set(0,0,l).applyMatrix4(K),bt.set(a,0,l).applyMatrix4(K),St.set(a,i,l).applyMatrix4(K),Ct.set(0,i,l).applyMatrix4(K);const o=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray(),...je.toArray(),...yt.toArray(),...ze.toArray(),...bt.toArray(),...He.toArray(),...St.toArray(),...Ve.toArray(),...Ct.toArray(),...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()],s=a*.5,c=i*.5,u=new Nn;u.moveTo(s,c),u.arc(0,0,s,0,Math.PI*2);const h=u.getPoints().map(y=>{const f=new jt(y.x,y.y,0);return f.applyMatrix4(K),f}),[m,g,b]=this.center.set(s,c,l).applyMatrix4(K).toArray();this.circle.geometry.setFromPoints(h),this.circle.visible=!0,this.circle1.geometry.setFromPoints(h),this.circle1.geometry.center().translate(m,g,b),this.circle1.visible=!0,this.box.geometry.setAttribute("position",new yr(o,3)),this.box.visible=!0,this.width=st(Math.abs(a),2),this.height=st(Math.abs(i),2),this.depth=st(Math.abs(l),2),this.center.set(a,i,l).multiplyScalar(.5),Ft.set(Math.PI*.5,0,0),Re.setFromEuler(Ft),Br.compose(this.center,Re,Kt).premultiply(K)}createEntity(){Br.decompose(this.center,Re,ut);const{x:r,y:e,z:t}=Ft.setFromQuaternion(Re),a={position:this.center.toArray(),rotation:[r,e,t].map(nn.radToDeg),radiusTop:st(this.width*.5,2),radiusBottom:st(this.width*.5,2),height:this.depth},i=du(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class pf extends In{constructor(r){super(r)}drawPlane(r,e){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();let{x:t,y:a}=ut.copy(e).applyMatrix4(ft);const i=Math.max(Math.abs(t),Math.abs(a));t=t>0?i:-i,a=a>0?i:-i,je.set(0,0,0).applyMatrix4(K),ze.set(t,0,0).applyMatrix4(K),He.set(t,a,0).applyMatrix4(K),Ve.set(0,a,0).applyMatrix4(K);const l=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray()],o=t*.5,s=a*.5,c=new Nn;c.moveTo(o,s),c.arc(0,0,o,0,Math.PI*2);const u=c.getPoints().map(h=>{const m=new jt(h.x,h.y,0);return m.applyMatrix4(K),m});this.circle.geometry.setFromPoints(u),this.circle.visible=!0,yt.set(o,0,0).applyMatrix4(K),bt.set(o,a,0).applyMatrix4(K),St.set(0,s,0).applyMatrix4(K),Ct.set(t,s,0).applyMatrix4(K),l.push(...yt.toArray(),...bt.toArray(),...St.toArray(),...Ct.toArray()),this.box.geometry.setAttribute("position",new yr(l,3)),this.box.visible=!0,this.width=st(Math.abs(t),2),this.height=st(Math.abs(a),2),this.center.set(t,a,0).multiplyScalar(.5).applyMatrix4(K),this.middlePosition.copy(ut.setX(t).setY(a).applyMatrix4(K))}drawBox(r,e,t){Re.setFromUnitVectors(vr,this.normal),K.compose(r,Re,Kt),ft.copy(K).invert();const{x:a,y:i}=ut.copy(e).applyMatrix4(ft);let{z:l}=ut.copy(t).applyMatrix4(ft);l=l>0?Math.abs(a):-Math.abs(a),je.set(0,0,0).applyMatrix4(K),ze.set(a,0,0).applyMatrix4(K),He.set(a,i,0).applyMatrix4(K),Ve.set(0,i,0).applyMatrix4(K),yt.set(0,0,l).applyMatrix4(K),bt.set(a,0,l).applyMatrix4(K),St.set(a,i,l).applyMatrix4(K),Ct.set(0,i,l).applyMatrix4(K);const o=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray(),...je.toArray(),...yt.toArray(),...ze.toArray(),...bt.toArray(),...He.toArray(),...St.toArray(),...Ve.toArray(),...Ct.toArray(),...yt.toArray(),...bt.toArray(),...bt.toArray(),...St.toArray(),...St.toArray(),...Ct.toArray(),...Ct.toArray(),...yt.toArray()],s=a*.5,c=i*.5,u=new Nn;u.moveTo(s,c),u.arc(0,0,s,0,Math.PI*2);const h=u.getPoints().map(y=>{const f=new jt(y.x,y.y,l*.5);return f.applyMatrix4(K),f}),[m,g,b]=this.center.set(s,c,l*.5).applyMatrix4(K).toArray();this.circle.geometry.setFromPoints(h),this.circle1.geometry.setFromPoints(h),this.circle2.geometry.setFromPoints(h),this.circle.geometry.center().rotateX(-Math.PI*.5).translate(m,g,b),this.circle1.geometry.center().translate(m,g,b),this.circle2.geometry.center().rotateZ(-Math.PI*.5).translate(m,g,b),this.circle.visible=!0,this.circle1.visible=!0,this.circle2.visible=!0,this.box.geometry.setAttribute("position",new yr(o,3)),this.box.visible=!0,this.width=st(Math.abs(a),2),this.height=st(Math.abs(i),2),this.depth=st(Math.abs(l),2),this.center.set(a,i,l).multiplyScalar(.5),Ft.set(Math.PI*.5,0,0),Re.setFromEuler(Ft),Br.compose(this.center,Re,Kt).premultiply(K)}createEntity(){Br.decompose(this.center,Re,ut);const{x:r,y:e,z:t}=Ft.setFromQuaternion(Re),a={position:this.center.toArray(),rotation:[r,e,t].map(nn.radToDeg),radius:st(this.width*.5,2)},i=pu(this.core,a);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(i),this.core.select([i]),this.core.bus.emit("TRANSACTION_END")}}class hf extends In{constructor(e){super(e);x(this,"onMouseUpPhase1",e=>{if(this.drawPlugin.editorPlugin.controls.enabled=!0,!this.moving){this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp);return}this.camera&&(this.moving=!1,this.updateMouse(e),this.oldMouse.copy(this.mouse),this.eye.copy(this.middlePosition).sub(this.camera.position),this.speed=this.eye.length()*.5,this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp),this.createEntity(),this.box.visible=!1,this.continuous?this.drawPlugin.draw(this.drawPlugin.type):this.core.bus.emit("DRAW_FINISH",this.core))})}finish(){this.dom.removeEventListener("pointerdown",this.onMouseDownPhase1),this.dom.removeEventListener("pointerup",this.onMouseUpPhase1),this.dom.removeEventListener("pointermove",this.onMouseMovePhase1),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}drawPlane(e,t){Re.setFromUnitVectors(vr,this.normal),K.compose(e,Re,Kt),ft.copy(K).invert();let{x:a,y:i}=ut.copy(t).applyMatrix4(ft);const l=Math.max(Math.abs(a),Math.abs(i));this.isSquare&&(a=a>0?l:-l,i=i>0?l:-l),je.set(0,0,0).applyMatrix4(K),ze.set(a,0,0).applyMatrix4(K),He.set(a,i,0).applyMatrix4(K),Ve.set(0,i,0).applyMatrix4(K);const o=[...je.toArray(),...ze.toArray(),...ze.toArray(),...He.toArray(),...He.toArray(),...Ve.toArray(),...Ve.toArray(),...je.toArray()];this.box.geometry.setAttribute("position",new yr(o,3)),this.box.visible=!0,this.width=st(Math.abs(a),2),this.height=st(Math.abs(i),2),this.center.set(a,i,.002).multiplyScalar(.5).applyMatrix4(K),this.middlePosition.copy(ut.setX(a).setY(i).applyMatrix4(K))}createEntity(){const{x:e,y:t,z:a}=Ft.setFromQuaternion(Re),i={position:this.center.toArray(),rotation:[e,t,a].map(nn.radToDeg),size:[this.width,this.height]},l=hu(this.core,i);this.core.bus.emit("TRANSACTION_START"),this.core.addEntity(l),this.core.select([l]),this.core.bus.emit("TRANSACTION_END")}drawBox(){}}class kr extends On{constructor(e){super(e);x(this,"dom");x(this,"editorPlugin");x(this,"helperPlugin");x(this,"pivotPlugin");x(this,"selectionPlugin");x(this,"type");x(this,"continuous");x(this,"box");x(this,"circle");x(this,"circle1");x(this,"circle2");x(this,"grid");x(this,"tools");x(this,"objects");this.editorPlugin=e.getPlugin(xn),this.helperPlugin=e.getPlugin(Ps),this.pivotPlugin=e.getPlugin(Tn),this.selectionPlugin=e.getPlugin(Os),this.continuous=!1,this.type=Ke.Box,this.dom=e.render.container;const t=new gu,a=new ws({color:"#ffaa00"});this.box=new mu(t,a),this.circle=new Xa(t.clone(),a),this.circle1=new Xa(t.clone(),a),this.circle2=new Xa(t.clone(),a),this.helperPlugin.scene.add(this.box),this.helperPlugin.scene.add(this.circle),this.helperPlugin.scene.add(this.circle1),this.helperPlugin.scene.add(this.circle2),this.grid=new fu(this.core.render),this.helperPlugin.scene.add(this.grid.grid),this.tools={[Ke.Plane]:new lf(this),[Ke.Box]:new cf(this),[Ke.Cone]:new uf(this),[Ke.Cylinder]:new df(this),[Ke.Sphere]:new pf(this),[Ke.Pipe]:new vu(this),[Ke.Text]:new hf(this)},this.objects=[]}unmount(){ha(this.box),ha(this.circle),ha(this.circle1),ha(this.circle2),this.grid.dispose()}draw(e){this.type=e,this.objects=this.core.entityManager.getVisibleObjects(),this.pivotPlugin.setEnabled(!1),this.selectionPlugin.setEnabled(!1),this.tools[e].start()}finish(){this.box.visible=!1,this.circle.visible=!1,this.circle1.visible=!1,this.circle2.visible=!1,this.grid.hide(),this.pivotPlugin.setEnabled(!0),this.selectionPlugin.setEnabled(!0),this.tools[this.type].finish(),this.objects=[]}}class gf extends On{constructor(e){super(e);x(this,"editorPlugin");x(this,"viewHelper");x(this,"container");x(this,"changing");x(this,"onPointerUp",e=>{e.stopPropagation(),this.viewHelper.handleClick(e),this.changing=!0,this.editorPlugin.setPerspectiveCamera()});x(this,"onPointerDown",e=>{e.stopPropagation()});this.editorPlugin=e.getPlugin(xn);const{camera:t,controls:a}=this.editorPlugin;this.viewHelper=new sf(t,e.container),this.viewHelper.setLabels("X","Y","Z"),this.viewHelper.setLabelStyle(void 0,"#000",18),this.viewHelper.center=a.target,this.container=document.createElement("div"),this.container.style.position="absolute",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.width="128px",this.container.style.height="128px",e.container.appendChild(this.container),this.container.addEventListener("pointerup",this.onPointerUp),this.container.addEventListener("pointerdown",this.onPointerDown),this.changing=!1}render(e){this.viewHelper.animating?this.viewHelper.update(e):this.changing&&(this.editorPlugin.setOrthographicCamera(),this.changing=!1),this.viewHelper.render(this.core.render.renderer)}unmount(){this.viewHelper.dispose(),this.container.removeEventListener("pointerup",this.onPointerUp),this.container.removeEventListener("pointerdown",this.onPointerDown),this.container.remove()}}const mf=["position","rotation","scale"];class ff extends On{constructor(e){super(e);x(this,"outlines");x(this,"onEntitiesSelect",e=>{this.attach(e.entities)});x(this,"onEntityRendered",()=>{this.attach(this.core.selections)});x(this,"onEntityChange",e=>{const{entity:t,key:a}=e,i=this.outlines.get(t);i&&mf.includes(a)&&(t.object3d.updateMatrixWorld(),i.box.makeEmpty(),i.box.expandByObject(t.object3d))});this.outlines=new Map,e.bus.on("ENTITY_SELECTED",this.onEntitiesSelect),e.bus.on("ENTITY_RENDERED",this.onEntityRendered),e.bus.on("ENTITY_CHANGED",this.onEntityChange)}get scene(){return this.core.render.scene}attach(e){this.outlines.forEach(t=>t.visible=!1),e.forEach(t=>{let a=this.outlines.get(t);if(a==null){a=new yu(new ks),a.raycast=()=>{};const i=a.material;i.color.set("#396efe"),i.depthTest=!1,i.transparent=!0,this.scene.add(a),this.outlines.set(t,a)}t.object3d.updateMatrixWorld(),a.box.makeEmpty(),a.box.expandByObject(t.object3d),a.visible=!a.box.isEmpty()})}unmount(){this.outlines.forEach(e=>{e.dispose(),e.removeFromParent()}),this.outlines.clear(),this.core.bus.off("ENTITY_SELECTED",this.onEntitiesSelect),this.core.bus.off("ENTITY_RENDERED",this.onEntityRendered),this.core.bus.off("ENTITY_CHANGED",this.onEntityChange)}}const p={BASE:{key:"base",name:"基础"},COMPONENTS:{key:"components",name:"组件"},CONTROL:{key:"control",name:"控制"},BACKGROUND:{key:"background",name:"背景"},ENVIRONMENT:{key:"environment",name:"环境"},FOG:{key:"fog",name:"雾"},SHADOW:{key:"shadow",name:"阴影"},EFFECT:{key:"effect",name:"后处理"},GRID:{key:"grid",name:"网格"},TRANSFORM:{key:"transform",name:"变换"},TEXT:{key:"text",name:"文本"},DIFFUSE_MAP:{key:"diffuse_map",name:"漫反射"},SPECULAR_MAP:{key:"specular_map",name:"高光"},METALLNESS_MAP:{key:"metalness_map",name:"金属度"},ROUGHNESS_MAP:{key:"roughness_map",name:"粗糙度"},NORMAL_MAP:{key:"normal_map",name:"法线"},AO_MAP:{key:"ao_map",name:"环境光遮蔽"},ENV_MAP:{key:"env_map",name:"环境光"},EMISSIVE_MAP:{key:"emissive_map",name:"自发光"},ALPHA_MAP:{key:"alpha_map",name:"透明度"},BUMP_MAP:{key:"bump_map",name:"凹凸贴图"},DISPLACEMENT_MAP:{key:"displacement_map",name:"置换贴图"},LIGHT_MAP:{key:"light_map",name:"光照贴图"},CUSTOM_SHADER:{key:"custom_shader",name:"自定义材质"}},A={STRING:"string",NUMBER:"number",BOOLEAN:"boolean",ENUM:"enum",COLOR:"color",VECTOR2:"vector2",VECTOR3:"vector3",SCRIPT:"script",ASSET:"asset",TEXTURE:"texture",UNIFORMS:"uniforms",VERTEX_SHADER:"vertex-shader",FRAGEMENT_SHADER:"fragement-shader"},vf=["Arial","Arial Black","Arial Narrow","Algerian","Bookman Old Style","Bahnschrift Light","Baskerville Old Face","Bauhaus 93","Bell MT","Cursive","Century","Century Gothic","Comic Sans MS","Courier","Courier New","Calibri","Calibri Light","fantasy","Georgia","Gabriola","Garamond","Informal Roman","Impact","Lucida Bright","Lucida Console","Lucida Sans Unicode","monospace","Microsoft Uighur","Monotype Corsiva","MS Sans Serif","MS Serif","Palatino Linotype","serif","sans-serif","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","等线","等线 Light","仿宋","华文中宋","华文仿宋","华文宋体","华文彩云","华文新魏","华文楷体","华文琥珀","华文细黑","华文行楷","华文隶书","宋体","幼圆","微软雅黑","黑体","新宋体","方正姚体","方正舒体","楷体","隶书"].map(n=>({label:n,value:n})),yf=[{label:"常规",value:"normal"},{label:"粗体",value:"bold"},{label:"斜体",value:"italic"},{label:"粗斜体",value:"italic bold"}];var fr=(n=>(n.Default="Default",n.Component="Component",n))(fr||{}),ja=(n=>(n.GRAPH="graph",n.ATTR_COMPONENT="attrComponent",n.HIERARCHY="hierarchy",n))(ja||{});class Nr{constructor(r,e,t){x(this,"editor");x(this,"attribute");x(this,"callbacks");x(this,"targets");x(this,"target");x(this,"key");x(this,"bindCallback");this.editor=r,this.attribute=e,this.targets=t,this.target=t[t.length-1],this.key=e.key,this.callbacks=[]}setTargets(r){this.targets=r,this.target=r[r.length-1]}listen(r){this.callbacks.includes(r)||this.callbacks.push(r)}unlisten(r){const e=this.callbacks.indexOf(r);e>=0&&this.callbacks.splice(e,1)}update(){this.callbacks.forEach(r=>r(this.getter()))}getter(){return this.attribute.getter(this.target)}setter(r){this.editor.historyManager.beginTransaction();for(const e of this.targets)this.attribute.setter(e,r);this.editor.historyManager.endTransaction()}get visible(){const{visible:r}=this.attribute;return typeof r=="function"?r(this.target):r??!0}get group(){return this.attribute.group}get groupName(){return this.attribute.groupName}get disabled(){const{disabled:r}=this.attribute;return typeof r=="function"?r(this.target):r}get text(){return this.attribute.text}get options(){return this.attribute.options}get min(){const{min:r}=this.attribute;return typeof r=="function"?r(this.target):r}get max(){const{max:r}=this.attribute;return typeof r=="function"?r(this.target):r}get precision(){return this.attribute.precision}get step(){return this.attribute.step}get tip(){return this.attribute.tip}get assetType(){return this.attribute.assetType}get disableAlpha(){return this.attribute.disableAlpha}}class bf{constructor(r,e,t){x(this,"editor");x(this,"nodeAttr");x(this,"viewAttr");x(this,"groups");x(this,"activeGroups");this.editor=r,this.nodeAttr=e,this.viewAttr=t,this.groups=[],this.activeGroups=[]}refresh(){const r=[],e=[];let t=this.editor.selectionManager.getLastSelection();const a=[];t?(r.push(...this.editor.selectionManager.getSelection()),e.push(...this.nodeAttr.getAttributes(t)),a.push(...this.nodeAttr.getGroups(t)),this.activeGroups=[...this.nodeAttr.activeGroups]):(t=this.editor.selectionManager.getView(),r.push(t),e.push(...this.viewAttr.getAttributes(t)),a.push(...this.viewAttr.getGroups(t)),this.activeGroups=[...this.viewAttr.activeGroups]),a.forEach(i=>i.attributes.forEach(l=>l.setTargets(r))),this.groups=[];for(const i of e){i.setTargets(r);const l=this.groups.find(o=>o.group===i.group);if(l)l.attributes.push(i);else{const{group:o,groupName:s}=i;this.groups.push({editor:this.editor,group:o,groupName:s,type:fr.Default,attributes:[i]})}}return this.groups.push(...a),this.groups}update(){for(const r of this.groups)for(const e of r.attributes)e.update()}dispose(){this.groups=[]}}const rs=n=>{const{ctrlKey:r=!1,shiftKey:e=!1,altKey:t=!1,metaKey:a=!1}=n;return`${r?"ctrl+":""}${a?"meta+":""}${e?"shift+":""}${t?"alt+":""}${n.code}`};class Sf{constructor(r,e){x(this,"editor");x(this,"keyEvents");x(this,"handleAction",r=>{if(r.altKey&&r.preventDefault(),!(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)){for(const e of this.keyEvents)if(this.isKeyMatch(e.key,r)){r.preventDefault(),e.action(this.editor),console.log(`[${rs(r)}] => ${e.actionName}`);return}console.log(`[${rs(r)}] => no match`)}});this.editor=r,this.keyEvents=e}active(){document.addEventListener("keydown",this.handleAction)}deactive(){document.removeEventListener("keydown",this.handleAction)}isKeyMatch(r,e){if(Array.isArray(r))return r.some(o=>this.isKeyMatch(o,e));if(r.keyCode=="*")return!0;const{ctrlKey:t=!1,shiftKey:a=!1,altKey:i=!1,metaKey:l=!1}=r;return t==e.ctrlKey&&a==e.shiftKey&&i==e.altKey&&l==e.metaKey&&r.keyCode==e.code}dispose(){this.keyEvents=[],document.removeEventListener("keydown",this.handleAction)}}class Cf{constructor(r){x(this,"editor");this.editor=r}refresh(){const r=this.editor.core.entityManager.root;return this.getNodes(r.children)}getNodes(r){const e=[];return r.forEach(t=>{const{id:a,name:i,type:l,visible:o,children:s}=t,c={id:a,name:i,type:l,visible:o,children:this.getNodes(s)};e.push(c)}),e}getNode(r){return this.editor.core.entityManager.getEntity(r)}removeNode(r){const e=this.editor.core.entityManager.getEntity(r);e&&(this.editor.historyManager.beginTransaction(),this.editor.core.removeEntity(e),this.editor.core.select([]),this.editor.historyManager.endTransaction())}updateNode(r,e,t){const a=this.editor.core.entityManager.getEntity(r);a==null||a.setAttr(e,t)}moveNodes(r,e,t){this.editor.historyManager.beginTransaction(),t==="before"?r.forEach(a=>{this.moveNode(a,e,t)}):r.reverse().forEach(a=>{this.moveNode(a,e,t)}),this.editor.historyManager.endTransaction()}moveNode(r,e,t){const a=this.getNode(r),i=this.getNode(e);if(!a||!i)return;let l,o;const s=a.parent,c=i.parent,u=s.children.indexOf(a),h=c.children.indexOf(i);t==="body"?(l=i,o=i==null?void 0:i.children.length):t==="before"?(l=c,s===c?u>h?o=h+1:o=h:o=h+1):t==="after"&&(l=c,c===s?u>h?o=h:o=h-1:o=h),this.editor.core.moveEntity(a,l,o)}}class ht{constructor(r){x(this,"key");x(this,"editor");this.key=Mc(),this.editor=r}mount(){}deactive(){}}class Ef extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="恢复",this.icon="huifu"}active(){this.editor.historyManager.redo()}}class Mf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="撤销",this.icon="chexiao"}active(){this.editor.historyManager.undo()}}class Af extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");x(this,"actived");this.title="平面",this.icon="plane",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Plane)}deactive(){this.actived=!1,this.plugin.finish()}}class xf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"actived");x(this,"plugin");this.title="立方体",this.icon="box",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Box)}deactive(){this.actived=!1,this.plugin.finish()}}class Nf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");x(this,"actived");this.title="圆锥",this.icon="cone",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Cone)}deactive(){this.actived=!1,this.plugin.finish()}}class wf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");x(this,"actived");this.title="圆柱",this.icon="cylinder",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Cylinder)}deactive(){this.actived=!1,this.plugin.finish()}}class kf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");x(this,"actived");this.title="球体",this.icon="sphere",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Sphere)}deactive(){this.actived=!1,this.plugin.finish()}}class Pf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"actived");x(this,"plugin");this.title="管道",this.icon="pipe",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Pipe)}deactive(){this.actived=!1,this.plugin.finish()}}class Of extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="环境光",this.icon="ambient-light"}active(){const e=bu(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class If extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="平行光",this.icon="directional-light"}async active(){const e=Su(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Tf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="预览",this.icon="preview"}active(){this.editor.preview()}}class _f extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"doubleConfirm");this.title="重新加载",this.icon="reload",this.doubleConfirm=!0}active(){this.editor.reload()}}class Rf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="保存",this.icon="save"}active(){this.editor.save()}}class $f extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");this.title="移动",this.icon="translate",this.plugin=e.core.getPlugin(Tn)}get actived(){return this.plugin.controls.getMode()==="translate"}async active(){this.plugin.controls.setMode("translate")}}class Df extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");this.title="旋转",this.icon="rotate",this.plugin=e.core.getPlugin(Tn)}get actived(){return this.plugin.controls.getMode()==="rotate"}async active(){this.plugin.controls.setMode("rotate")}}class Lf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"plugin");this.title="缩放",this.icon="scale",this.plugin=e.core.getPlugin(Tn)}get actived(){return this.plugin.controls.getMode()==="scale"}async active(){this.plugin.controls.setMode("scale")}}class Bf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="半球光",this.icon="hemisphere-light"}active(){const e=Cu(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class jf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="透视相机",this.icon="perspective-camera"}active(){const e=Eu(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class zf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="正交相机",this.icon="orthographic-camera"}active(){const e=Mu(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Hf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"actived");x(this,"plugin");this.title="连续绘图",this.icon="draw",this.actived=!1,this.plugin=e.core.getPlugin(kr)}mount(){this.actived=this.plugin.continuous}active(){this.actived=!this.actived,this.plugin.continuous=this.actived}}class Vf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="组",this.icon="group"}active(){const e=Au(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Kf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="聚光灯",this.icon="spot-light"}active(){const e=xu(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Ff extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="点光源",this.icon="point-light"}active(){const e=Nu(this.editor.core,{});this.editor.historyManager.beginTransaction(),this.editor.core.addEntity(e),this.editor.core.select([e]),this.editor.historyManager.endTransaction()}}class Uf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");this.title="快捷键",this.icon="shortcut"}active(){this.editor.bus.emit("OPEN_SHORTCUT_DIALOG",this.editor)}}class Gf extends ht{constructor(e){super(e);x(this,"title");x(this,"icon");x(this,"actived");x(this,"plugin");this.title="文本",this.icon="text",this.actived=!1,this.plugin=e.core.getPlugin(kr)}active(){this.actived=!0,this.plugin.draw(Ke.Text)}deactive(){this.actived=!1,this.plugin.finish()}}class Wf{constructor(r){x(this,"editor");x(this,"tools");x(this,"editPlugin");x(this,"lastTool");x(this,"deselect",()=>{var r;(r=this.lastTool)==null||r.deactive(),this.editor.bus.emit("TOOL_UPDATE",this.editor)});this.editor=r,this.tools={left:[new Mf(r),new Ef(r),new Af(r),new xf(r),new Nf(r),new wf(r),new kf(r),new Pf(r),new Of(r),new If(r),new Bf(r),new Kf(r),new Ff(r),new jf(r),new zf(r),new Gf(r),new Vf(r),new $f(r),new Df(r),new Lf(r),new Hf(r)],right:[new Uf(r),new _f(r),new Rf(r),new Tf(r)]},this.editPlugin=r.core.getPlugin($i),this.editor.core.bus.on("DRAW_FINISH",this.deselect)}mount(){this.tools.left.forEach(r=>r.mount()),this.tools.right.forEach(r=>r.mount())}dispose(){this.editor.core.bus.off("DRAW_FINISH",this.deselect)}select(r,e){var t;this.editPlugin.exit(),(t=this.lastTool)==null||t.deactive(),this.lastTool=r,this.lastTool.active(e),this.editor.bus.emit("TOOL_UPDATE",this.editor)}}class Yf{constructor(r){x(this,"editor");x(this,"selections");this.editor=r,this.selections=[]}refresh(){return this.selections=this.editor.core.selections.map(r=>r.id),this.selections}setSelections(r){const e=this.editor.core.entityManager.getEntities(r);this.editor.core.select(e)}removeSelections(r){const e=[];if(r)for(const t of r){const a=this.editor.core.entityManager.getEntity(t);a&&e.push(a)}this.editor.core.select(e)}getLastSelection(){return this.editor.core.lastSelection}getSelection(){return this.editor.core.selections}getView(){return this.editor.core.entityManager.root}}class qf{constructor(r){x(this,"editor");x(this,"dropPlugin");this.editor=r,this.dropPlugin=r.core.getPlugin(kl)}onDrop(r){if(!r.dataTransfer)return;const e=r.dataTransfer.getData("text");let t;try{t=JSON.parse(e)}catch(a){console.error(a)}if(t)try{t.type==="glb"?this.dropPlugin.drop(t.item.code,t.item.name,r):t.type==="symbol"&&this.dropPlugin.dropSymbol(t.item.code,t.item.name,r)}catch{throw new Error(`加载模型出错: ${e}`)}}}class Xf{constructor(r){x(this,"editor");x(this,"copyPlugin");x(this,"nodes");x(this,"material");this.editor=r,this.nodes=[],this.copyPlugin=r.core.getPlugin(wl)}copy(){this.nodes=[...this.editor.core.selections].filter(r=>r.copiable)}cut(){const r=[...this.editor.core.selections];this.editor.historyManager.beginTransaction(),this.editor.core.select([]),r.forEach(e=>this.editor.core.removeEntity(e)),this.editor.historyManager.endTransaction(),this.nodes=r}async paste(){this.editor.historyManager.beginTransaction(),this.copyPlugin.paste(this.nodes),this.editor.historyManager.endTransaction()}canPaste(){return this.nodes.length>0}copyMaterial(){const r=this.editor.core.lastSelection;!r||!r.material||(this.material=r.material.serialize())}canPasteMaterial(){return!!this.material}pasteMaterial(){this.material&&(this.editor.historyManager.beginTransaction(),this.copyPlugin.pasteMaterial(this.material),this.editor.historyManager.endTransaction())}}class Pr{constructor(r){x(this,"editor");x(this,"core");this.editor=r,this.core=r.core}isSame(r){return this.constructor.name===r.constructor.name}}class za extends Pr{}class Zf extends Pr{constructor(e,t){super(e);x(this,"entity");x(this,"parent");x(this,"index");this.entity=t.entity,this.parent=t.parent,this.index=t.index}undo(){this.core.removeEntity(this.entity),this.core.select([])}redo(){this.core.addEntity(this.entity,this.parent,this.index),this.core.select([this.entity])}}class Qf extends Pr{constructor(e,t){super(e);x(this,"entity");x(this,"parent");x(this,"index");this.entity=t.entity,this.parent=t.parent,this.index=t.index}undo(){this.core.addEntity(this.entity,this.parent,this.index)}redo(){this.core.removeEntity(this.entity)}}class Jf extends Pr{constructor(e,t){super(e);x(this,"entity");x(this,"parent");x(this,"index");x(this,"oldParent");x(this,"oldIndex");this.entity=t.entity,this.parent=t.parent,this.index=t.index,this.oldParent=t.oldParent,this.oldIndex=t.oldIndex}undo(){this.core.moveEntity(this.entity,this.oldParent,this.oldIndex)}redo(){this.core.moveEntity(this.entity,this.parent,this.index)}}class ev extends Pr{constructor(e,t){super(e);x(this,"entities");x(this,"olds");this.entities=t.entities,this.olds=t.olds}undo(){this.core.select(this.olds)}redo(){this.core.select(this.entities)}}class tv extends za{constructor(e,t){super(e);x(this,"entity");x(this,"key");x(this,"newValue");x(this,"oldValue");this.entity=t.entity,this.key=t.key,this.newValue=t.newValue,this.oldValue=t.oldValue}undo(){this.entity.setAttr(this.key,this.oldValue)}redo(){this.entity.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.entity===e.entity&&this.key===e.key}update(e){this.newValue=e.newValue}}class rv extends Pr{constructor(e,t){super(e);x(this,"project");x(this,"oldProject");this.project=t.project,this.oldProject=t.oldProject}undo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.oldProject),this.editor.historyManager.resume()}redo(){this.editor.historyManager.pause(),this.core.clear(),this.core.deserialize(this.project),this.editor.historyManager.resume()}}class nv extends Pr{constructor(e,t){super(e);x(this,"component");x(this,"parent");x(this,"index");this.component=t.component,this.parent=t.parent,this.index=t.index}undo(){this.core.removeComponent(this.component)}redo(){this.core.addComponent(this.component,this.parent,this.index)}}class av extends Pr{constructor(e,t){super(e);x(this,"component");x(this,"parent");x(this,"index");this.component=t.component,this.parent=t.parent,this.index=t.index}undo(){this.core.addComponent(this.component,this.parent,this.index)}redo(){this.core.removeComponent(this.component)}}class iv extends za{constructor(e,t){super(e);x(this,"component");x(this,"key");x(this,"newValue");x(this,"oldValue");this.component=t.component,this.key=t.key,this.newValue=t.newValue,this.oldValue=t.oldValue}undo(){this.component.setAttr(this.key,this.oldValue)}redo(){this.component.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.component===e.component&&this.key===e.key}update(e){this.newValue=e.newValue}}class ov extends za{constructor(e,t){super(e);x(this,"material");x(this,"key");x(this,"newValue");x(this,"oldValue");this.material=t.material,this.key=t.key,this.newValue=t.newValue,this.oldValue=t.oldValue}undo(){this.material.setAttr(this.key,this.oldValue)}redo(){this.material.setAttr(this.key,this.newValue)}isSame(e){return super.isSame(e)&&this.material===e.material&&this.key===e.key}update(e){this.newValue=e.newValue}}class sv extends Pr{constructor(e,t){super(e);x(this,"material");x(this,"newValue");x(this,"oldValue");this.material=t.material,this.newValue=t.newValue,this.oldValue=t.oldValue}undo(){this.material.deserialize(this.oldValue)}redo(){this.material.deserialize(this.newValue)}}class lv{constructor(r){x(this,"editor");x(this,"project");this.editor=r}deserialize(r){const e=this.project,t=this.editor.core.entityManager.root.code;try{r=cv(r,t)}catch(l){console.error(l)}this.editor.historyManager.pause(),this.editor.core.clear(),this.editor.core.deserialize(r),this.editor.historyManager.resume();const a={oldProject:e,project:r},i=new rv(this.editor,a);this.editor.historyManager.addHistory([i])}serialize(r){return this.project=this.editor.core.serialize(r),this.project}}const cv=(n,r)=>{const e=JSON.parse(n);return e.document.code=r,JSON.stringify(e)};class uv{constructor(r){x(this,"editor");x(this,"core");x(this,"undos");x(this,"redos");x(this,"max");x(this,"paused");x(this,"transaction");x(this,"transactions");x(this,"onDeserialize",()=>{this.core.bus.off("DESERIALIZE",this.onDeserialize),this.core.bus.on("TRANSACTION_START",this.beginTransaction),this.core.bus.on("TRANSACTION_END",this.endTransaction),this.core.bus.on("ENTITY_ADDED",this.onEntityAdded),this.core.bus.on("ENTITY_REMOVED",this.onEntityRemoved),this.core.bus.on("ENTITY_MOVED",this.onEntityMoved),this.core.bus.on("ENTITY_CHANGED",this.onEntityChanged),this.core.bus.on("ENTITY_SELECTED",this.onEntitySelected),this.core.bus.on("COMPONENT_ADDED",this.onComponentAdded),this.core.bus.on("COMPONENT_REMOVED",this.onComponentRemoved),this.core.bus.on("COMPONENT_CHANGED",this.onComponentChanged),this.core.bus.on("MATERIAL_CHANGED",this.onMaterialChanged),this.core.bus.on("MATERIAL_COPIED",this.onMaterialCopied)});x(this,"beginTransaction",()=>{this.transaction=!0});x(this,"endTransaction",()=>{this.transaction=!1,this.addHistory(this.transactions),this.transactions=[]});x(this,"onEntityAdded",r=>{if(this.paused)return;const e=new Zf(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onEntityRemoved",r=>{if(this.paused)return;const e=new Qf(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onEntityMoved",r=>{if(this.paused)return;const e=new Jf(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onEntityChanged",r=>{if(this.paused)return;const e=new tv(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onEntitySelected",r=>{if(this.paused)return;const e=new ev(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onComponentAdded",r=>{if(this.paused)return;const e=new nv(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onComponentRemoved",r=>{if(this.paused)return;const e=new av(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onComponentChanged",r=>{if(this.paused)return;const e=new iv(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onMaterialChanged",r=>{if(this.paused)return;const e=new ov(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});x(this,"onMaterialCopied",r=>{if(this.paused)return;const e=new sv(this.editor,r);this.transaction?this.addTransaction(e):this.addHistory([e])});this.editor=r,this.core=r.core,this.undos=[],this.redos=[],this.max=200,this.paused=!1,this.transaction=!1,this.transactions=[],this.core.bus.on("DESERIALIZE",this.onDeserialize)}pause(){this.paused=!0}resume(){this.paused=!1}addTransaction(r){const e=this.transactions[this.transactions.length-1];e instanceof za&&(e!=null&&e.isSame(r))?e.update(r):this.transactions.push(r)}addHistory(r){this.redos=[],this.undos.length>=this.max&&this.undos.shift(),this.undos.push(r),this.core.bus.emit("HISTORY_CHANGE",this.core)}undo(){if(this.undos.length===0)return;this.pause();const r=this.undos.pop();r&&(this.redos.push(r),r.reverse().forEach(e=>e.undo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}redo(){if(this.redos.length===0)return;this.pause();const r=this.redos.pop();r&&(this.undos.push(r),r.reverse().forEach(e=>e.redo())),this.resume(),this.core.bus.emit("HISTORY_CHANGE",this.core)}dispose(){this.undos=[],this.redos=[],this.paused=!1,this.transaction=!1,this.transactions=[]}}class dv{constructor(r){x(this,"editor");this.editor=r}getComponents(){const r=this.editor.selectionManager.getSelection(),e=r.filter(a=>a instanceof wn),t=[{label:It[Oe.SimpleScript],value:Oe.SimpleScript}];return e.length>0&&e.length===r.length&&t.push({label:It[Oe.OrbitControls],value:Oe.OrbitControls},{label:It[Oe.PointerLockControls],value:Oe.PointerLockControls}),t}addComponent(r){const e=[...this.editor.selectionManager.getSelection()];e.length===0&&r===Oe.SimpleScript&&e.push(this.editor.selectionManager.getView());try{const t=tn(r);this.editor.historyManager.beginTransaction(),e.forEach(a=>{const{entityManager:i}=this.editor.core,l=i.createComponent(t,a);this.editor.core.addComponent(l,a)}),this.editor.historyManager.endTransaction()}catch(t){console.error(t)}}}class pv{constructor(r){x(this,"editor");x(this,"menus");x(this,"meta");this.editor=r,this.menus=new Map,this.meta={}}addContextMenu(r,e){this.menus.set(r,e)}getContextMenu(r){const e=this.menus.get(r)||[];return this.getContextEvent(e)}getContextEvent(r){return r.filter(e=>e.visible(this.editor)).map(e=>{const{label:t,children:a,action:i}=e,l=a?this.getContextEvent(a):void 0,o={text:t,subMenu:l,action:()=>i(this.editor)};return l||delete o.subMenu,o})}dispose(){this.meta={}}}class hv{constructor(r,e){x(this,"editor");x(this,"materialAttr");x(this,"groups");x(this,"activeGroups");this.editor=r,this.materialAttr=e,this.groups=[],this.activeGroups=[]}refresh(){const r=[],e=[];let t=this.editor.selectionManager.getLastSelection();if(!t||!(t instanceof wu))return[];const a=[];r.push(...this.editor.selectionManager.getSelection()),e.push(...this.materialAttr.getAttributes(t)),a.push(...this.materialAttr.getGroups(t)),this.activeGroups=[...this.materialAttr.activeGroups],a.forEach(i=>i.attributes.forEach(l=>l.setTargets(r))),this.groups=[];for(const i of e){i.setTargets(r);const l=this.groups.find(o=>o.group===i.group);if(l)l.attributes.push(i);else{const{group:o,groupName:s}=i;this.groups.push({editor:this.editor,group:o,groupName:s,type:fr.Default,attributes:[i]})}}return this.groups.push(...a),this.groups}update(){for(const r of this.groups)for(const e of r.attributes)e.update()}dispose(){this.groups=[]}}const gv=[{key:[{keyCode:"Backspace"},{keyCode:"Delete"}],action:n=>{const r=n.selectionManager.getSelection().filter(e=>e.deleteable);r.length&&(n.historyManager.beginTransaction(),n.core.select([]),r.forEach(e=>n.core.removeEntity(e)),n.historyManager.endTransaction())}},{key:{keyCode:"Escape"},action:n=>{n.toolManager.deselect()}},{key:{ctrlKey:!0,keyCode:"KeyC"},action:n=>{n.copyManager.copy()}},{key:{ctrlKey:!0,keyCode:"KeyX"},action:n=>{n.copyManager.cut()}},{key:{ctrlKey:!0,keyCode:"KeyV"},action:n=>{n.copyManager.paste()}},{key:{ctrlKey:!0,keyCode:"KeyZ"},action:n=>{n.historyManager.undo()}},{key:[{ctrlKey:!0,shiftKey:!0,keyCode:"KeyZ"},{ctrlKey:!0,keyCode:"KeyY"}],action:n=>{n.historyManager.redo()}},{key:{keyCode:"Tab"},action:n=>{const r=n.core.getPlugin($i);r==null||r.switch()}},{key:{ctrlKey:!0,keyCode:"KeyA"},action:n=>{const r=n.core.entityManager.entities.values();n.core.select(Array.from(r))}},{key:{keyCode:"KeyP"},action:n=>{const r=n.selectionManager.getSelection();if(r.length>=2){n.historyManager.beginTransaction();const e=r.slice(0,-1),t=r[r.length-1];e.forEach(a=>n.core.moveEntity(a,t,t.children.length)),n.historyManager.endTransaction()}}},{key:{altKey:!0,keyCode:"KeyP"},action:n=>{const r=n.selectionManager.getSelection();n.historyManager.beginTransaction(),r.forEach(e=>n.core.moveEntity(e)),n.historyManager.endTransaction()}},{key:{ctrlKey:!0,keyCode:"KeyP"},action:n=>{n.preview()}},{key:{ctrlKey:!0,keyCode:"KeyS"},action:n=>{n.save()}},{key:{keyCode:"KeyQ"},action:n=>{const r=n.core.getPlugin(Tn);r==null||r.toggleSpace()}},{key:{keyCode:"KeyF"},action:n=>{const r=n.selectionManager.getSelection();r.length&&n.core.getPlugin(Pl).focus(r)}},{key:{keyCode:"KeyG"},action:n=>{const r=n.selectionManager.getSelection();r.length&&n.core.getPlugin(Sa).start(r,"translate")}},{key:{keyCode:"KeyR"},action:n=>{const r=n.selectionManager.getSelection();r.length&&n.core.getPlugin(Sa).start(r,"rotate")}},{key:{keyCode:"KeyS"},action:n=>{const r=n.selectionManager.getSelection();r.length&&n.core.getPlugin(Sa).start(r,"scale")}},{key:{keyCode:"KeyL"},action:n=>{const e=n.selectionManager.getSelection().filter(t=>t instanceof wn);if(e.length){const t=n.core.getPlugin(xn),{position:a,rotation:i}=t.camera;n.historyManager.beginTransaction(),e.forEach(l=>{l.setAttr("position",a),l.setAttr("rotation",i)}),n.historyManager.endTransaction()}}}],or=Math.PI/180,vn=180/Math.PI,mv=1,fv=32;class vv{constructor(r){x(this,"editor");x(this,"commonAttrs");x(this,"planeAttrs");x(this,"boxAttrs");x(this,"coneAttrs");x(this,"cylinderAttrs");x(this,"sphereAttrs");x(this,"pipeAttrs");x(this,"ambientLightAttrs");x(this,"directionalLightAttrs");x(this,"hemisphereLightAttrs");x(this,"spotLightAttrs");x(this,"pointLightAttrs");x(this,"perspectiveCameraAttrs");x(this,"orthographicCameraAttrs");x(this,"modelAttrs");x(this,"symbolAttrs");x(this,"textAttrs");x(this,"activeGroups");this.editor=r,this.activeGroups=[p.BASE.key],this.commonAttrs=[{label:"可见",key:"visible",type:A.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("visible"),setter:(e,t)=>e.setAttr("visible",t)},{label:"可变换",key:"transformable",type:A.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("transformable"),setter:(e,t)=>e.setAttr("transformable",t)},{label:"可选中",key:"selectable",type:A.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("selectable"),setter:(e,t)=>e.setAttr("selectable",t)},{label:"投射阴影",key:"castShadow",type:A.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("castShadow"),setter:(e,t)=>e.setAttr("castShadow",t)},{label:"接收阴影",key:"receiveShadow",type:A.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("receiveShadow"),setter:(e,t)=>e.setAttr("receiveShadow",t)},{label:"名称",key:"name",type:A.STRING,group:p.BASE.key,min:mv,max:fv,groupName:p.BASE.name,getter:e=>e.getAttr("name"),setter:(e,t)=>e.setAttr("name",t)},{label:"类型",key:"type",type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,disabled:!0,getter:e=>ku[e.type]||"",setter:()=>{}},{label:"ID",key:"id",disabled:!0,type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("id"),setter:()=>{}},{label:"位置",key:"position",type:A.VECTOR3,group:p.TRANSFORM.key,groupName:p.TRANSFORM.name,precision:3,getter:e=>e.position.toArray(),setter:(e,t)=>this.setVector3(e,"position",t)},{label:"旋转",key:"rotation",type:A.VECTOR3,group:p.TRANSFORM.key,groupName:p.TRANSFORM.name,precision:1,getter:({rotation:{x:e,y:t,z:a}})=>[e,t,a].map(i=>i*vn),setter:(e,t)=>this.setEuler(e,t)},{label:"缩放",key:"scale",type:A.VECTOR3,group:p.TRANSFORM.key,groupName:p.TRANSFORM.name,precision:3,getter:e=>e.scale.toArray(),setter:(e,t)=>this.setVector3(e,"scale",t)}],this.planeAttrs=[{label:"尺寸",key:"size",type:A.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,getter:e=>e.size.toArray(),setter:(e,t)=>this.setVector2(e,"size",t)},{label:"分段",key:"segments",type:A.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,min:1,precision:0,max:100,getter:e=>e.segments.toArray(),setter:(e,t)=>this.setVector2(e,"segments",t)}],this.boxAttrs=[{label:"尺寸",key:"size",type:A.VECTOR3,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,getter:e=>e.size.toArray(),setter:(e,t)=>this.setVector3(e,"size",t)},{label:"分段",key:"segments",type:A.VECTOR3,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:1,max:100,getter:e=>e.segments.toArray(),setter:(e,t)=>this.setVector3(e,"segments",t)},{label:"圆角半径",key:"radius",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("radius"),setter:(e,t)=>e.setAttr("radius",t)}],this.coneAttrs=[{label:"半径",key:"radius",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,t)=>e.setAttr("radius",t)},{label:"高度",key:"height",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("height"),setter:(e,t)=>e.setAttr("height",t)},{label:"水平角度",key:"thetaLength",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:360,getter:e=>e.thetaLength*vn,setter:(e,t)=>e.setAttr("thetaLength",t*or)},{label:"底部开口",key:"openEnded",type:A.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("openEnded"),setter:(e,t)=>e.setAttr("openEnded",t)},{label:"分段",key:"segments",type:A.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,t)=>this.setVector2(e,"segments",t)}],this.cylinderAttrs=[{label:"顶部半径",key:"radiusTop",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radiusTop"),setter:(e,t)=>e.setAttr("radiusTop",t)},{label:"底部半径",key:"radiusBottom",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radiusBottom"),setter:(e,t)=>e.setAttr("radiusBottom",t)},{label:"高度",key:"height",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("height"),setter:(e,t)=>e.setAttr("height",t)},{label:"水平角度",key:"thetaLength",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:360,getter:e=>e.thetaLength*vn,setter:(e,t)=>e.setAttr("thetaLength",t*or)},{label:"底部开口",key:"openEnded",type:A.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("openEnded"),setter:(e,t)=>e.setAttr("openEnded",t)},{label:"分段",key:"segments",type:A.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,t)=>this.setVector2(e,"segments",t)}],this.sphereAttrs=[{label:"半径",key:"radius",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,t)=>e.setAttr("radius",t)},{label:"水平角度",key:"phiLength",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:360,getter:e=>e.phiLength*vn,setter:(e,t)=>e.setAttr("phiLength",t*or)},{label:"垂直角度",key:"thetaLength",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:0,max:180,getter:e=>e.thetaLength*vn,setter:(e,t)=>e.setAttr("thetaLength",t*or)},{label:"分段",key:"segments",type:A.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:0,min:3,max:100,getter:e=>e.segments.toArray(),setter:(e,t)=>this.setVector2(e,"segments",t)}],this.pipeAttrs=[{label:"半径",key:"radius",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("radius"),setter:(e,t)=>e.setAttr("radius",t)}],this.ambientLightAttrs=[{label:"颜色",key:"color",type:A.COLOR,disableAlpha:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("color"),setter:(e,t)=>e.setAttr("color",t)},{label:"强度",key:"intensity",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("intensity"),setter:(e,t)=>e.setAttr("intensity",t)}],this.directionalLightAttrs=[...this.ambientLightAttrs,{label:"阴影范围",key:"shadowCameraSize",type:A.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:2,min:.1,step:.1,getter:e=>e.getAttr("shadowCameraSize"),setter:(e,t)=>e.setAttr("shadowCameraSize",t)},{label:"阴影偏移",key:"shadowBias",type:A.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,t)=>e.setAttr("shadowBias",t)},{label:"阴影尺寸",key:"shadowMapSize",type:A.ENUM,group:p.SHADOW.key,groupName:p.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,t)=>e.setAttr("shadowMapSize",t)}],this.hemisphereLightAttrs=[...this.ambientLightAttrs,{label:"底部颜色",key:"groundColor",type:A.COLOR,disableAlpha:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("groundColor"),setter:(e,t)=>e.setAttr("groundColor",t)}],this.spotLightAttrs=[...this.ambientLightAttrs,{label:"最远距离",key:"distance",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("distance"),setter:(e,t)=>e.setAttr("distance",t)},{label:"范围角度",key:"angle",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:1,min:0,max:90,getter:e=>e.getAttr("angle")*vn,setter:(e,t)=>{const a=t;e.setAttr("angle",a*or)}},{label:"半影衰减",key:"penumbra",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,max:1,step:.1,getter:e=>e.getAttr("penumbra"),setter:(e,t)=>e.setAttr("penumbra",t)},{label:"光照衰减",key:"decay",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("decay"),setter:(e,t)=>e.setAttr("decay",t)},{label:"阴影偏移",key:"shadowBias",type:A.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,t)=>e.setAttr("shadowBias",t)},{label:"阴影尺寸",key:"shadowMapSize",type:A.ENUM,group:p.SHADOW.key,groupName:p.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,t)=>e.setAttr("shadowMapSize",t)}],this.pointLightAttrs=[...this.ambientLightAttrs,{label:"最远距离",key:"distance",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("distance"),setter:(e,t)=>e.setAttr("distance",t)},{label:"光照衰减",key:"decay",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:0,step:.1,getter:e=>e.getAttr("decay"),setter:(e,t)=>e.setAttr("decay",t)},{label:"阴影偏移",key:"shadowBias",type:A.NUMBER,group:p.SHADOW.key,groupName:p.SHADOW.name,precision:5,step:1e-5,getter:e=>e.getAttr("shadowBias"),setter:(e,t)=>e.setAttr("shadowBias",t)},{label:"阴影尺寸",key:"shadowMapSize",type:A.ENUM,group:p.SHADOW.key,groupName:p.SHADOW.name,options:[{label:"256",value:256},{label:"512",value:512},{label:"1024",value:1024},{label:"2048",value:2048},{label:"4096",value:4096}],getter:e=>e.getAttr("shadowMapSize"),setter:(e,t)=>e.setAttr("shadowMapSize",t)}],this.perspectiveCameraAttrs=[{label:"视角",key:"fov",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:1,min:.1,step:.1,getter:e=>e.getAttr("fov"),setter:(e,t)=>e.setAttr("fov",t)},{label:"近平面",key:"near",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("near"),setter:(e,t)=>e.setAttr("near",t)},{label:"远平面",key:"far",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("far"),setter:(e,t)=>e.setAttr("far",t)}],this.orthographicCameraAttrs=[{label:"正交尺寸",key:"frustumSize",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:1,min:.1,step:.1,getter:e=>e.getAttr("frustumSize"),setter:(e,t)=>e.setAttr("frustumSize",t)},{label:"近平面",key:"near",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.getAttr("near"),setter:(e,t)=>e.setAttr("near",t)},{label:"远平面",key:"far",step:.1,type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,getter:e=>e.getAttr("far"),setter:(e,t)=>e.setAttr("far",t)}],this.modelAttrs=[{label:"模型ID",key:"modelCode",type:A.STRING,disabled:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("modelCode"),setter:(e,t)=>e.setAttr("modelCode",t)}],this.symbolAttrs=[{label:"图符路径",key:"symbolPath",type:A.STRING,disabled:!0,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("symbolPath"),setter:(e,t)=>e.setAttr("symbolPath",t)},{label:"显示模式",key:"mode",type:A.ENUM,options:[{label:"2D",value:"2d"},{label:"3D",value:"3d"}],group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("mode"),setter:(e,t)=>e.setAttr("mode",t)}],this.textAttrs=[{label:"尺寸",key:"size",type:A.VECTOR2,group:p.BASE.key,groupName:p.BASE.name,precision:2,min:.01,step:.1,getter:e=>e.size.toArray(),setter:(e,t)=>this.setVector2(e,"size",t)},{label:"文本",key:"text",type:A.STRING,group:p.TEXT.key,groupName:p.TEXT.name,getter:e=>e.getAttr("text"),setter:(e,t)=>e.setAttr("text",t)},{label:"颜色",key:"fill",type:A.COLOR,group:p.TEXT.key,groupName:p.TEXT.name,getter:e=>e.getAttr("fill"),setter:(e,t)=>e.setAttr("fill",t)},{label:"字体",key:"fontFamily",type:A.ENUM,group:p.TEXT.key,groupName:p.TEXT.name,options:vf,getter:e=>e.getAttr("fontFamily"),setter:(e,t)=>e.setAttr("fontFamily",t)},{label:"字体大小",key:"fontSize",type:A.NUMBER,group:p.TEXT.key,groupName:p.TEXT.name,min:12,precision:0,getter:e=>e.getAttr("fontSize"),setter:(e,t)=>e.setAttr("fontSize",t)},{label:"字体样式",key:"fontStyle",type:A.ENUM,group:p.TEXT.key,groupName:p.TEXT.name,options:yf,getter:e=>e.getAttr("fontStyle"),setter:(e,t)=>e.setAttr("fontStyle",t)},{label:"对齐方式",key:"align",type:A.ENUM,group:p.TEXT.key,groupName:p.TEXT.name,options:[{label:"左对齐",value:"left"},{label:"居中",value:"center"},{label:"右对齐",value:"right"}],getter:e=>e.getAttr("align"),setter:(e,t)=>e.setAttr("align",t)}]}setVector2(r,e,t,a){const i=r.getAttr(e).toArray(),[l,o,s]=t;switch(s){case"x":i[0]=a?a(l):l;break;case"y":i[1]=a?a(o):o;break;default:i[0]=a?a(l):l,i[1]=a?a(o):o;break}r.setAttr(e,Pu.fromArray(i))}setVector3(r,e,t){const a=r.getAttr(e).toArray(),[i,l,o,s]=t;switch(s){case"x":a[0]=i;break;case"y":a[1]=l;break;case"z":a[2]=o;break;default:a[0]=i,a[1]=l,a[2]=o;break}r.setAttr(e,ut.fromArray(a))}setEuler(r,e){const t=r.rotation.toArray(),[a,i,l,o]=e;switch(o){case"x":t[0]=a*or;break;case"y":t[1]=i*or;break;case"z":t[2]=l*or;break;default:t[0]=a*or,t[1]=i*or,t[2]=l*or;break}xa.fromArray(t),r.setAttr("rotation",xa)}}const yv=[Ke.AmbientLight,Ke.DirectionalLight,Ke.HemisphereLight],bv=["rotation","scale"];class Sv{constructor(r){x(this,"editor");x(this,"commonAttrs");x(this,"customAttrs");x(this,"activeGroups");x(this,"getGroups",r=>{const e=[];for(const t of r.components)switch(t.type){case Oe.SimpleScript:e.push({editor:this.editor,type:fr.Component,group:`component-${t.id}`,groupName:It[Oe.SimpleScript],attributes:this.getScriptComponentAttrs(t),meta:{component:t}});break;case Oe.OrbitControls:e.push({editor:this.editor,type:fr.Component,group:`component-${t.id}`,groupName:It[Oe.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(t),meta:{component:t}});break;case Oe.PointerLockControls:e.push({editor:this.editor,type:fr.Component,group:`component-${t.id}`,groupName:It[Oe.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(t),meta:{component:t}});break}return e});this.editor=r,this.activeGroups=[p.BASE.key];const{commonAttrs:e,planeAttrs:t,boxAttrs:a,coneAttrs:i,cylinderAttrs:l,sphereAttrs:o,pipeAttrs:s,ambientLightAttrs:c,directionalLightAttrs:u,hemisphereLightAttrs:h,spotLightAttrs:m,pointLightAttrs:g,perspectiveCameraAttrs:b,orthographicCameraAttrs:y,modelAttrs:f,symbolAttrs:v,textAttrs:S}=new vv(this.editor);this.commonAttrs=this.createAttributes(e),this.customAttrs=new Map([[Ke.Plane,this.createAttributes(t)],[Ke.Box,this.createAttributes(a)],[Ke.Cone,this.createAttributes(i)],[Ke.Cylinder,this.createAttributes(l)],[Ke.Sphere,this.createAttributes(o)],[Ke.Pipe,this.createAttributes(s)],[Ke.AmbientLight,this.createAttributes(c)],[Ke.DirectionalLight,this.createAttributes(u)],[Ke.HemisphereLight,this.createAttributes(h)],[Ke.SpotLight,this.createAttributes(m)],[Ke.PointLight,this.createAttributes(g)],[Ke.PerspectiveCamera,this.createAttributes(b)],[Ke.OrthographicCamera,this.createAttributes(y)],[Ke.Model,this.createAttributes(f)],[Ke.Symbol,this.createAttributes(v)],[Ke.Text,this.createAttributes(S)]])}createAttributes(r){return r.map(e=>new Nr(this.editor,e,[]))}getAttributes(r){const e=this.customAttrs.get(r.type)||[];let t=[...this.commonAttrs];return yv.includes(r.type)&&(t=t.filter(a=>!bv.includes(a.key))),[...t,...e]}getScriptComponentAttrs(r){const e=[];return e.push({label:"组件名称",key:"component-name",type:A.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("name"),setter:(t,a)=>r.setAttr("name",a)},{label:"启用",key:"enabled",type:A.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("_enabled"),setter:(t,a)=>r.setAttr("_enabled",a)},{label:"脚本",key:"component-script",type:A.SCRIPT,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("script"),setter:(t,a)=>r.setAttr("script",a)}),e.map(t=>new Nr(this.editor,t,[]))}getOrbitControlsComponentAttrs(r){const e=[];return e.push({label:"组件名称",key:"component-name",type:A.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("name"),setter:(t,a)=>r.setAttr("name",a)},{label:"启用",key:"enabled",type:A.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("_enabled"),setter:(t,a)=>r.setAttr("_enabled",a)},{label:"焦点距离",key:"distance",type:A.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>r.getAttr("distance"),setter:(t,a)=>r.setAttr("distance",a)}),e.map(t=>new Nr(this.editor,t,[]))}getPointerLockControlsComponentAttrs(r){const e=[];return e.push({label:"组件名称",key:"component-name",type:A.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("name"),setter:(t,a)=>r.setAttr("name",a)},{label:"启用",key:"enabled",type:A.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("_enabled"),setter:(t,a)=>r.setAttr("_enabled",a)},{label:"移动速度",key:"moveSpeed",type:A.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>r.getAttr("moveSpeed"),setter:(t,a)=>r.setAttr("moveSpeed",a)}),e.map(t=>new Nr(this.editor,t,[]))}}const ci=100;class Cv{constructor(r){x(this,"editor");x(this,"attributes");this.editor=r,this.attributes=[{label:"调试信息",key:"debug",type:A.BOOLEAN,group:p.CONTROL.key,groupName:p.CONTROL.name,getter:e=>e.getAttr("debug"),setter:(e,t)=>e.setAttr("debug",t)},{label:"场景编码",key:"code",type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,disabled:!0,getter:e=>e.getAttr("code"),setter:()=>{}},{label:"场景名称",key:"name",type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,max:ci,getter:e=>e.getAttr("name"),setter:(e,t)=>e.setAttr("name",t)},{label:"描述",key:"desc",max:256,type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("desc"),setter:(e,t)=>e.setAttr("desc",t)},{label:"版本",key:"ver",disabled:!0,type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("ver"),setter:(e,t)=>e.setAttr("ver",t)},{label:"作者",key:"author",type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,max:ci,getter:e=>e.getAttr("author"),setter:(e,t)=>e.setAttr("author",t)},{label:"公司",key:"company",type:A.STRING,max:ci,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("company"),setter:(e,t)=>e.setAttr("company",t)},{label:"最新更新日期",key:"date",disabled:!0,type:A.STRING,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.getAttr("date"),setter:(e,t)=>e.setAttr("date",t)},{label:"背景颜色",key:"backgroundColor",type:A.COLOR,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,disableAlpha:!0,getter:e=>e.getAttr("backgroundColor"),setter:(e,t)=>e.setAttr("backgroundColor",t)},{label:"背景贴图",key:"backgroundTexture",type:A.ASSET,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,assetType:"png,jpeg,jpg,hdr,webp",getter:e=>e.getAttr("backgroundTexture"),setter:(e,t)=>e.setAttr("backgroundTexture",t)},{label:"背景模糊",key:"backgroundBlurriness",type:A.NUMBER,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,min:0,max:1,precision:1,step:.1,getter:e=>e.getAttr("backgroundBlurriness"),setter:(e,t)=>e.setAttr("backgroundBlurriness",t)},{label:"背景强度",key:"backgroundIntensity",type:A.NUMBER,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,min:0,precision:1,step:.1,getter:e=>e.getAttr("backgroundIntensity"),setter:(e,t)=>e.setAttr("backgroundIntensity",t)},{label:"背景旋转",key:"backgroundRotation",type:A.NUMBER,group:p.BACKGROUND.key,groupName:p.BACKGROUND.name,min:-180,max:180,precision:1,getter:e=>e.getAttr("backgroundRotation"),setter:(e,t)=>e.setAttr("backgroundRotation",t)},{label:"环境贴图",key:"environmentTexture",type:A.ASSET,group:p.ENVIRONMENT.key,groupName:p.ENVIRONMENT.name,assetType:"png,jpeg,jpg,hdr,webp",getter:e=>e.getAttr("environmentTexture"),setter:(e,t)=>e.setAttr("environmentTexture",t)},{label:"环境贴图强度",key:"environmentIntensity",type:A.NUMBER,group:p.ENVIRONMENT.key,groupName:p.ENVIRONMENT.name,min:0,precision:1,step:.1,getter:e=>e.getAttr("environmentIntensity"),setter:(e,t)=>e.setAttr("environmentIntensity",t)},{label:"环境贴图旋转",key:"environmentRotation",type:A.NUMBER,group:p.ENVIRONMENT.key,groupName:p.ENVIRONMENT.name,min:-180,max:180,precision:1,getter:e=>e.getAttr("environmentRotation"),setter:(e,t)=>e.setAttr("environmentRotation",t)},{label:"开启雾效",key:"fogEnable",type:A.BOOLEAN,group:p.FOG.key,groupName:p.FOG.name,getter:e=>e.getAttr("fogEnable"),setter:(e,t)=>e.setAttr("fogEnable",t)},{label:"雾气颜色",key:"fogColor",type:A.COLOR,disableAlpha:!0,group:p.FOG.key,groupName:p.FOG.name,getter:e=>e.getAttr("fogColor"),setter:(e,t)=>e.setAttr("fogColor",t)},{label:"雾气近端",key:"fogNear",type:A.NUMBER,group:p.FOG.key,groupName:p.FOG.name,min:0,precision:1,getter:e=>e.getAttr("fogNear"),setter:(e,t)=>e.setAttr("fogNear",t)},{label:"雾气远端",key:"fogFar",type:A.NUMBER,group:p.FOG.key,groupName:p.FOG.name,min:0,precision:1,getter:e=>e.getAttr("fogFar"),setter:(e,t)=>e.setAttr("fogFar",t)},{label:"开启阴影",key:"shadowMapEnabled",type:A.BOOLEAN,group:p.SHADOW.key,groupName:p.SHADOW.name,getter:e=>e.getAttr("shadowMapEnabled"),setter:(e,t)=>e.setAttr("shadowMapEnabled",t)},{label:"阴影类型",key:"shadowMapType",type:A.ENUM,options:[{value:0,label:"Basic"},{value:1,label:"PCF "},{value:2,label:"PCF Soft"}],group:p.SHADOW.key,groupName:p.SHADOW.name,getter:e=>e.getAttr("shadowMapType"),setter:(e,t)=>e.setAttr("shadowMapType",t)},{label:"开启后处理",key:"effectEnabled",type:A.BOOLEAN,group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectEnabled"),setter:(e,t)=>e.setAttr("effectEnabled",t)},{label:"抗锯齿等级",key:"effectMultisampling",type:A.ENUM,options:[{value:0,label:"无"},{value:2,label:"2级 "},{value:4,label:"4级"},{value:8,label:"8级"},{value:16,label:"16级"}],group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectMultisampling"),setter:(e,t)=>e.setAttr("effectMultisampling",t)},{label:"光晕强度",key:"effectBloomIntensity",type:A.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomIntensity"),setter:(e,t)=>e.setAttr("effectBloomIntensity",t)},{label:"光晕阈值",key:"effectBloomLuminanceThreshold",type:A.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomLuminanceThreshold"),setter:(e,t)=>e.setAttr("effectBloomLuminanceThreshold",t)},{label:"光晕平滑值",key:"effectBloomLuminanceSmoothing",type:A.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.01,precision:3,getter:e=>e.getAttr("effectBloomLuminanceSmoothing"),setter:(e,t)=>e.setAttr("effectBloomLuminanceSmoothing",t)},{label:"光晕半径",key:"effectBloomRadius",type:A.NUMBER,group:p.EFFECT.key,groupName:p.EFFECT.name,min:0,step:.1,precision:2,getter:e=>e.getAttr("effectBloomRadius"),setter:(e,t)=>e.setAttr("effectBloomRadius",t)},{label:"色调映射",key:"effectToneMappingMode",type:A.ENUM,options:[{value:0,label:"LINEAR"},{value:1,label:"REINHARD "},{value:2,label:"REINHARD2"},{value:3,label:"REINHARD2_ADAPTIVE"},{value:4,label:"OPTIMIZED_CINEON"},{value:5,label:"CINEON"},{value:6,label:"ACES_FILMIC"},{value:7,label:"AGX"},{value:8,label:"NEUTRAL"}],group:p.EFFECT.key,groupName:p.EFFECT.name,getter:e=>e.getAttr("effectToneMappingMode"),setter:(e,t)=>e.setAttr("effectToneMappingMode",t)},{label:"开启网格",key:"gridEnable",type:A.BOOLEAN,group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridEnable"),setter:(e,t)=>e.setAttr("gridEnable",t)},{label:"网格尺寸",key:"gridSize",type:A.ENUM,options:[{value:10,label:"10"},{value:50,label:"50"},{value:100,label:"100"},{value:200,label:"200"},{value:500,label:"500"},{value:1e3,label:"1000"}],group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridSize"),setter:(e,t)=>e.setAttr("gridSize",t)},{label:"网格颜色1",key:"gridColor1",type:A.COLOR,disableAlpha:!0,group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridColor1"),setter:(e,t)=>e.setAttr("gridColor1",t)},{label:"网格颜色2",key:"gridColor2",type:A.COLOR,disableAlpha:!0,group:p.GRID.key,groupName:p.GRID.name,getter:e=>e.getAttr("gridColor2"),setter:(e,t)=>e.setAttr("gridColor2",t)}]}}class Ev{constructor(r){x(this,"editor");x(this,"attributes");x(this,"activeGroups");x(this,"getGroups",r=>{const e=[];for(const t of r.components)switch(t.type){case Oe.SimpleScript:e.push({editor:this.editor,type:fr.Component,group:`component-${t.id}`,groupName:It[Oe.SimpleScript],attributes:this.getScriptComponentAttrs(t),meta:{component:t}});break;case Oe.OrbitControls:e.push({editor:this.editor,type:fr.Component,group:`component-${t.id}`,groupName:It[Oe.OrbitControls],attributes:this.getOrbitControlsComponentAttrs(t),meta:{component:t}});break;case Oe.PointerLockControls:e.push({editor:this.editor,type:fr.Component,group:`component-${t.id}`,groupName:It[Oe.PointerLockControls],attributes:this.getPointerLockControlsComponentAttrs(t),meta:{component:t}});break}return e});this.editor=r,this.activeGroups=[p.BASE.key];const{attributes:e}=new Cv(this.editor);this.attributes=this.createAttributes(e)}createAttributes(r){return r.map(e=>new Nr(this.editor,e,[]))}getAttributes(){return this.attributes}getScriptComponentAttrs(r){const e=[];return e.push({label:"组件名称",key:"component-name",type:A.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("name"),setter:(t,a)=>r.setAttr("name",a)},{label:"启用",key:"enabled",type:A.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("_enabled"),setter:(t,a)=>r.setAttr("_enabled",a)},{label:"脚本",key:"component-script",type:A.SCRIPT,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("script"),setter:(t,a)=>r.setAttr("script",a)}),e.map(t=>new Nr(this.editor,t,[]))}getOrbitControlsComponentAttrs(r){const e=[];return e.push({label:"组件名称",key:"component-name",type:A.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("name"),setter:(t,a)=>r.setAttr("name",a)},{label:"启用",key:"enabled",type:A.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("_enabled"),setter:(t,a)=>r.setAttr("_enabled",a)},{label:"焦点距离",key:"distance",type:A.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>r.getAttr("distance"),setter:(t,a)=>r.setAttr("distance",a)}),e.map(t=>new Nr(this.editor,t,[]))}getPointerLockControlsComponentAttrs(r){const e=[];return e.push({label:"组件名称",key:"component-name",type:A.STRING,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("name"),setter:(t,a)=>r.setAttr("name",a)},{label:"启用",key:"enabled",type:A.BOOLEAN,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,getter:()=>r.getAttr("_enabled"),setter:(t,a)=>r.setAttr("_enabled",a)},{label:"移动速度",key:"moveSpeed",type:A.NUMBER,group:p.COMPONENTS.key,groupName:p.COMPONENTS.name,min:.01,precision:2,getter:()=>r.getAttr("moveSpeed"),setter:(t,a)=>r.setAttr("moveSpeed",a)}),e.map(t=>new Nr(this.editor,t,[]))}}const Mv=[{label:"基础材质",value:"MeshBasicMaterial"},{label:"PBR材质",value:"MeshStandardMaterial"},{label:"Phong材质",value:"MeshPhongMaterial"},{label:"自定义材质",value:"ShaderMaterial"}],Av=[{label:"正面",value:0},{label:"背面",value:1},{label:"双面",value:2}],xv=[{label:"无",value:0},{label:"正常",value:1},{label:"相加",value:2},{label:"相减",value:3},{label:"相乘",value:4}],Qt=[{label:"UV映射",value:300},{label:"等距反射映射",value:303},{label:"等距折射映射",value:304}],mt=[{label:"重复",value:1e3},{label:"扩展边缘",value:1001},{label:"镜像重复",value:1002}],Jt=[{label:"无",value:""},{label:"RGB色彩空间",value:"srgb"},{label:"线性RGB色彩空间",value:"srgb-linear"}],vt=n=>n.material.type===jr.Stand,ns=n=>n.material.type===jr.Phong,ui=n=>n.material.type===jr.Shader,fe=n=>n.material.type!=jr.Shader,er=n=>[jr.Basic,jr.Phong].includes(n.material.type),Se=n=>[jr.Stand,jr.Phong].includes(n.material.type);class Nv{constructor(r){x(this,"editor");x(this,"commonAttrs");x(this,"activeGroups");this.editor=r,this.activeGroups=[p.BASE.key],this.commonAttrs=[{label:"材质类型",key:"type",type:A.ENUM,group:p.BASE.key,groupName:p.BASE.name,options:Mv,getter:e=>e.material.getAttr("type"),setter:(e,t)=>e.material.setAttr("type",t)},{label:"透明性",key:"transparent",type:A.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.material.getAttr("transparent"),setter:(e,t)=>e.material.setAttr("transparent",t)},{label:"透明度",key:"opacity",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,min:0,max:1,step:.1,precision:1,getter:e=>e.material.getAttr("opacity"),setter:(e,t)=>e.material.setAttr("opacity",t)},{label:"透明测试",key:"alphaTest",type:A.NUMBER,group:p.BASE.key,groupName:p.BASE.name,min:0,max:1,step:.1,precision:1,getter:e=>e.material.getAttr("alphaTest"),setter:(e,t)=>e.material.setAttr("alphaTest",t)},{label:"深度测试",key:"depthTest",type:A.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.material.getAttr("depthTest"),setter:(e,t)=>e.material.setAttr("depthTest",t)},{label:"深度写入",key:"depthWrite",type:A.BOOLEAN,group:p.BASE.key,groupName:p.BASE.name,getter:e=>e.material.getAttr("depthWrite"),setter:(e,t)=>e.material.setAttr("depthWrite",t)},{label:"面",key:"side",type:A.ENUM,group:p.BASE.key,groupName:p.BASE.name,options:Av,getter:e=>e.material.getAttr("side"),setter:(e,t)=>e.material.setAttr("side",t)},{label:"混合",key:"blending",type:A.ENUM,group:p.BASE.key,groupName:p.BASE.name,options:xv,getter:e=>e.material.getAttr("blending"),setter:(e,t)=>e.material.setAttr("blending",t)},{label:"颜色",key:"color",type:A.COLOR,disableAlpha:!0,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("color"),setter:(e,t)=>e.material.setAttr("color",t)},{label:"贴图",key:"mapImage",type:A.TEXTURE,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("mapImage"),setter:(e,t)=>e.material.setAttr("mapImage",t)},{label:"映射方式",key:"mapMapping",type:A.ENUM,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,options:Qt,visible:fe,getter:e=>e.material.getAttr("mapMapping"),setter:(e,t)=>e.material.setAttr("mapMapping",t)},{label:"水平包裹模式",key:"mapWrapS",type:A.ENUM,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("mapWrapS"),setter:(e,t)=>e.material.setAttr("mapWrapS",t)},{label:"垂直包裹模式",key:"mapWrapT",type:A.ENUM,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("mapWrapT"),setter:(e,t)=>e.material.setAttr("mapWrapT",t)},{label:"贴图偏移",key:"mapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("mapOffset"),setter:(e,t)=>e.material.setAttr("mapOffset",t)},{label:"贴图缩放",key:"mapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("mapRepeat"),setter:(e,t)=>e.material.setAttr("mapRepeat",t)},{label:"贴图中心",key:"mapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("mapCenter"),setter:(e,t)=>e.material.setAttr("mapCenter",t)},{label:"贴图旋转",key:"mapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("mapRotation"),setter:(e,t)=>e.material.setAttr("mapRotation",t)},{label:"Y轴反转",key:"mapFlipY",type:A.BOOLEAN,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,visible:fe,getter:e=>e.material.getAttr("mapFlipY"),setter:(e,t)=>e.material.setAttr("mapFlipY",t)},{label:"色彩空间",key:"mapColorSpace",type:A.ENUM,group:p.DIFFUSE_MAP.key,groupName:p.DIFFUSE_MAP.name,options:Jt,visible:fe,getter:e=>e.material.getAttr("mapColorSpace"),setter:(e,t)=>e.material.setAttr("mapColorSpace",t)},{label:"高光",key:"specular",type:A.COLOR,disableAlpha:!0,visible:ns,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,getter:e=>e.material.getAttr("specular"),setter:(e,t)=>e.material.setAttr("specular",t)},{label:"光泽度",key:"shininess",type:A.NUMBER,min:0,precision:2,step:1,visible:ns,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,getter:e=>e.material.getAttr("shininess"),setter:(e,t)=>e.material.setAttr("shininess",t)},{label:"贴图",key:"specularMapImage",type:A.TEXTURE,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,visible:er,getter:e=>e.material.getAttr("specularMapImage"),setter:(e,t)=>e.material.setAttr("specularMapImage",t)},{label:"映射方式",key:"specularMapMapping",type:A.ENUM,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,options:Qt,visible:er,getter:e=>e.material.getAttr("specularMapMapping"),setter:(e,t)=>e.material.setAttr("specularMapMapping",t)},{label:"水平包裹模式",key:"specularMapWrapS",type:A.ENUM,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,options:mt,visible:er,getter:e=>e.material.getAttr("specularMapWrapS"),setter:(e,t)=>e.material.setAttr("specularMapWrapS",t)},{label:"垂直包裹模式",key:"specularMapWrapT",type:A.ENUM,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,options:mt,visible:er,getter:e=>e.material.getAttr("specularMapWrapT"),setter:(e,t)=>e.material.setAttr("specularMapWrapT",t)},{label:"贴图偏移",key:"specularMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,visible:er,getter:e=>e.material.getAttr("specularMapOffset"),setter:(e,t)=>e.material.setAttr("specularMapOffset",t)},{label:"贴图缩放",key:"specularMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,visible:er,getter:e=>e.material.getAttr("specularMapRepeat"),setter:(e,t)=>e.material.setAttr("specularMapRepeat",t)},{label:"贴图中心",key:"specularMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,visible:er,getter:e=>e.material.getAttr("specularMapCenter"),setter:(e,t)=>e.material.setAttr("specularMapCenter",t)},{label:"贴图旋转",key:"specularMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,visible:er,getter:e=>e.material.getAttr("specularMapRotation"),setter:(e,t)=>e.material.setAttr("specularMapRotation",t)},{label:"Y轴反转",key:"specularMapFlipY",type:A.BOOLEAN,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,visible:er,getter:e=>e.material.getAttr("specularMapFlipY"),setter:(e,t)=>e.material.setAttr("specularMapFlipY",t)},{label:"色彩空间",key:"specularMapColorSpace",type:A.ENUM,group:p.SPECULAR_MAP.key,groupName:p.SPECULAR_MAP.name,options:Jt,visible:er,getter:e=>e.material.getAttr("specularMapColorSpace"),setter:(e,t)=>e.material.setAttr("specularMapColorSpace",t)},{label:"金属度",key:"metalness",min:0,step:.1,precision:2,type:A.NUMBER,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalness"),setter:(e,t)=>e.material.setAttr("metalness",t)},{label:"贴图",key:"metalnessMapImage",type:A.TEXTURE,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalnessMapImage"),setter:(e,t)=>e.material.setAttr("metalnessMapImage",t)},{label:"映射方式",key:"metalnessMapMapping",type:A.ENUM,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,options:Qt,visible:vt,getter:e=>e.material.getAttr("metalnessMapMapping"),setter:(e,t)=>e.material.setAttr("metalnessMapMapping",t)},{label:"水平包裹模式",key:"metalnessMapWrapS",type:A.ENUM,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,options:mt,visible:vt,getter:e=>e.material.getAttr("metalnessMapWrapS"),setter:(e,t)=>e.material.setAttr("metalnessMapWrapS",t)},{label:"垂直包裹模式",key:"metalnessMapWrapT",type:A.ENUM,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,options:mt,visible:vt,getter:e=>e.material.getAttr("metalnessMapWrapT"),setter:(e,t)=>e.material.setAttr("metalnessMapWrapT",t)},{label:"贴图偏移",key:"metalnessMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalnessMapOffset"),setter:(e,t)=>e.material.setAttr("metalnessMapOffset",t)},{label:"贴图缩放",key:"metalnessMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalnessMapRepeat"),setter:(e,t)=>e.material.setAttr("metalnessMapRepeat",t)},{label:"贴图中心",key:"metalnessMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalnessMapCenter"),setter:(e,t)=>e.material.setAttr("metalnessMapCenter",t)},{label:"贴图旋转",key:"metalnessMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalnessMapRotation"),setter:(e,t)=>e.material.setAttr("metalnessMapRotation",t)},{label:"Y轴反转",key:"metalnessMapFlipY",type:A.BOOLEAN,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("metalnessMapFlipY"),setter:(e,t)=>e.material.setAttr("metalnessMapFlipY",t)},{label:"色彩空间",key:"metalnessMapColorSpace",type:A.ENUM,group:p.METALLNESS_MAP.key,groupName:p.METALLNESS_MAP.name,options:Jt,visible:vt,getter:e=>e.material.getAttr("metalnessMapColorSpace"),setter:(e,t)=>e.material.setAttr("metalnessMapColorSpace",t)},{label:"粗糙度",key:"roughness",min:0,step:.1,precision:2,type:A.NUMBER,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughness"),setter:(e,t)=>e.material.setAttr("roughness",t)},{label:"贴图",key:"roughnessMapImage",type:A.TEXTURE,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughnessMapImage"),setter:(e,t)=>e.material.setAttr("roughnessMapImage",t)},{label:"映射方式",key:"roughnessMapMapping",type:A.ENUM,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,options:Qt,visible:vt,getter:e=>e.material.getAttr("roughnessMapMapping"),setter:(e,t)=>e.material.setAttr("roughnessMapMapping",t)},{label:"水平包裹模式",key:"roughnessMapWrapS",type:A.ENUM,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,options:mt,visible:vt,getter:e=>e.material.getAttr("roughnessMapWrapS"),setter:(e,t)=>e.material.setAttr("roughnessMapWrapS",t)},{label:"垂直包裹模式",key:"roughnessMapWrapT",type:A.ENUM,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,options:mt,visible:vt,getter:e=>e.material.getAttr("roughnessMapWrapT"),setter:(e,t)=>e.material.setAttr("roughnessMapWrapT",t)},{label:"贴图偏移",key:"roughnessMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughnessMapOffset"),setter:(e,t)=>e.material.setAttr("roughnessMapOffset",t)},{label:"贴图缩放",key:"roughnessMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughnessMapRepeat"),setter:(e,t)=>e.material.setAttr("roughnessMapRepeat",t)},{label:"贴图中心",key:"roughnessMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughnessMapCenter"),setter:(e,t)=>e.material.setAttr("roughnessMapCenter",t)},{label:"贴图旋转",key:"roughnessMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughnessMapRotation"),setter:(e,t)=>e.material.setAttr("roughnessMapRotation",t)},{label:"Y轴反转",key:"roughnessMapFlipY",type:A.BOOLEAN,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,visible:vt,getter:e=>e.material.getAttr("roughnessMapFlipY"),setter:(e,t)=>e.material.setAttr("roughnessMapFlipY",t)},{label:"色彩空间",key:"roughnessMapColorSpace",type:A.ENUM,group:p.ROUGHNESS_MAP.key,groupName:p.ROUGHNESS_MAP.name,options:Jt,visible:vt,getter:e=>e.material.getAttr("roughnessMapColorSpace"),setter:(e,t)=>e.material.setAttr("roughnessMapColorSpace",t)},{label:"法线强度",key:"normalScale",min:-1,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalScale"),setter:(e,t)=>e.material.setAttr("normalScale",t)},{label:"贴图",key:"normalMapImage",type:A.TEXTURE,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalMapImage"),setter:(e,t)=>e.material.setAttr("normalMapImage",t)},{label:"映射方式",key:"normalMapMapping",type:A.ENUM,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,options:Qt,visible:Se,getter:e=>e.material.getAttr("normalMapMapping"),setter:(e,t)=>e.material.setAttr("normalMapMapping",t)},{label:"水平包裹模式",key:"normalMapWrapS",type:A.ENUM,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("normalMapWrapS"),setter:(e,t)=>e.material.setAttr("normalMapWrapS",t)},{label:"垂直包裹模式",key:"normalMapWrapT",type:A.ENUM,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("normalMapWrapT"),setter:(e,t)=>e.material.setAttr("normalMapWrapT",t)},{label:"贴图偏移",key:"normalMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalMapOffset"),setter:(e,t)=>e.material.setAttr("normalMapOffset",t)},{label:"贴图缩放",key:"normalMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalMapRepeat"),setter:(e,t)=>e.material.setAttr("normalMapRepeat",t)},{label:"贴图中心",key:"normalMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalMapCenter"),setter:(e,t)=>e.material.setAttr("normalMapCenter",t)},{label:"贴图旋转",key:"normalMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalMapRotation"),setter:(e,t)=>e.material.setAttr("normalMapRotation",t)},{label:"Y轴反转",key:"normalMapFlipY",type:A.BOOLEAN,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,visible:Se,getter:e=>e.material.getAttr("normalMapFlipY"),setter:(e,t)=>e.material.setAttr("normalMapFlipY",t)},{label:"色彩空间",key:"normalMapColorSpace",type:A.ENUM,group:p.NORMAL_MAP.key,groupName:p.NORMAL_MAP.name,options:Jt,visible:Se,getter:e=>e.material.getAttr("normalMapColorSpace"),setter:(e,t)=>e.material.setAttr("normalMapColorSpace",t)},{label:"环境光遮蔽强度",key:"aoMapIntensity",min:0,step:.1,precision:2,type:A.NUMBER,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapIntensity"),setter:(e,t)=>e.material.setAttr("aoMapIntensity",t)},{label:"贴图",key:"aoMapImage",type:A.TEXTURE,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapImage"),setter:(e,t)=>e.material.setAttr("aoMapImage",t)},{label:"映射方式",key:"aoMapMapping",type:A.ENUM,group:p.AO_MAP.key,groupName:p.AO_MAP.name,options:Qt,visible:fe,getter:e=>e.material.getAttr("aoMapMapping"),setter:(e,t)=>e.material.setAttr("aoMapMapping",t)},{label:"水平包裹模式",key:"aoMapWrapS",type:A.ENUM,group:p.AO_MAP.key,groupName:p.AO_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("aoMapWrapS"),setter:(e,t)=>e.material.setAttr("aoMapWrapS",t)},{label:"垂直包裹模式",key:"aoMapWrapT",type:A.ENUM,group:p.AO_MAP.key,groupName:p.AO_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("aoMapWrapT"),setter:(e,t)=>e.material.setAttr("aoMapWrapT",t)},{label:"贴图偏移",key:"aoMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapOffset"),setter:(e,t)=>e.material.setAttr("aoMapOffset",t)},{label:"贴图缩放",key:"aoMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapRepeat"),setter:(e,t)=>e.material.setAttr("aoMapRepeat",t)},{label:"贴图中心",key:"aoMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapCenter"),setter:(e,t)=>e.material.setAttr("aoMapCenter",t)},{label:"贴图旋转",key:"aoMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapRotation"),setter:(e,t)=>e.material.setAttr("aoMapRotation",t)},{label:"Y轴反转",key:"aoMapFlipY",type:A.BOOLEAN,group:p.AO_MAP.key,groupName:p.AO_MAP.name,visible:fe,getter:e=>e.material.getAttr("aoMapFlipY"),setter:(e,t)=>e.material.setAttr("aoMapFlipY",t)},{label:"色彩空间",key:"aoMapColorSpace",type:A.ENUM,group:p.AO_MAP.key,groupName:p.AO_MAP.name,options:Jt,visible:fe,getter:e=>e.material.getAttr("aoMapColorSpace"),setter:(e,t)=>e.material.setAttr("aoMapColorSpace",t)},{label:"反射率",key:"reflectivity",min:0,step:.1,precision:2,type:A.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:er,getter:e=>e.material.getAttr("reflectivity"),setter:(e,t)=>e.material.setAttr("reflectivity",t)},{label:"折射率",key:"refractionRatio",min:0,step:.1,precision:2,type:A.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:er,getter:e=>e.material.getAttr("refractionRatio"),setter:(e,t)=>e.material.setAttr("refractionRatio",t)},{label:"环境光强度",key:"envMapIntensity",min:0,step:.1,precision:2,type:A.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:vt,getter:e=>e.material.getAttr("envMapIntensity"),setter:(e,t)=>e.material.setAttr("envMapIntensity",t)},{label:"贴图",key:"envMapImage",type:A.TEXTURE,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:fe,getter:e=>e.material.getAttr("envMapImage"),setter:(e,t)=>e.material.setAttr("envMapImage",t)},{label:"映射方式",key:"envMapMapping",type:A.ENUM,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,options:Qt,visible:fe,getter:e=>e.material.getAttr("envMapMapping"),setter:(e,t)=>e.material.setAttr("envMapMapping",t)},{label:"水平包裹模式",key:"envMapWrapS",type:A.ENUM,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("envMapWrapS"),setter:(e,t)=>e.material.setAttr("envMapWrapS",t)},{label:"垂直包裹模式",key:"envMapWrapT",type:A.ENUM,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("envMapWrapT"),setter:(e,t)=>e.material.setAttr("envMapWrapT",t)},{label:"贴图偏移",key:"envMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:fe,getter:e=>e.material.getAttr("envMapOffset"),setter:(e,t)=>e.material.setAttr("envMapOffset",t)},{label:"贴图缩放",key:"envMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:fe,getter:e=>e.material.getAttr("envMapRepeat"),setter:(e,t)=>e.material.setAttr("envMapRepeat",t)},{label:"贴图中心",key:"envMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:fe,getter:e=>e.material.getAttr("envMapCenter"),setter:(e,t)=>e.material.setAttr("envMapCenter",t)},{label:"贴图旋转",key:"envMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:fe,getter:e=>e.material.getAttr("envMapRotation"),setter:(e,t)=>e.material.setAttr("envMapRotation",t)},{label:"Y轴反转",key:"envMapFlipY",type:A.BOOLEAN,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,visible:Se,getter:e=>e.material.getAttr("envMapFlipY"),setter:(e,t)=>e.material.setAttr("envMapFlipY",t)},{label:"色彩空间",key:"envMapColorSpace",type:A.ENUM,group:p.ENV_MAP.key,groupName:p.ENV_MAP.name,options:Jt,visible:fe,getter:e=>e.material.getAttr("envMapColorSpace"),setter:(e,t)=>e.material.setAttr("envMapColorSpace",t)},{label:"自发光",key:"emissive",type:A.COLOR,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissive"),setter:(e,t)=>e.material.setAttr("emissive",t)},{label:"自发光强度",key:"emissiveIntensity",min:0,step:.1,precision:2,type:A.NUMBER,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveIntensity"),setter:(e,t)=>e.material.setAttr("emissiveIntensity",t)},{label:"贴图",key:"emissiveMapImage",type:A.TEXTURE,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveMapImage"),setter:(e,t)=>e.material.setAttr("emissiveMapImage",t)},{label:"映射方式",key:"emissiveMapMapping",type:A.ENUM,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,options:Qt,visible:Se,getter:e=>e.material.getAttr("emissiveMapMapping"),setter:(e,t)=>e.material.setAttr("emissiveMapMapping",t)},{label:"水平包裹模式",key:"emissiveMapWrapS",type:A.ENUM,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("emissiveMapWrapS"),setter:(e,t)=>e.material.setAttr("emissiveMapWrapS",t)},{label:"垂直包裹模式",key:"emissiveMapWrapT",type:A.ENUM,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("emissiveMapWrapT"),setter:(e,t)=>e.material.setAttr("emissiveMapWrapT",t)},{label:"贴图偏移",key:"emissiveMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveMapOffset"),setter:(e,t)=>e.material.setAttr("emissiveMapOffset",t)},{label:"贴图缩放",key:"emissiveMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveMapRepeat"),setter:(e,t)=>e.material.setAttr("emissiveMapRepeat",t)},{label:"贴图中心",key:"emissiveMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveMapCenter"),setter:(e,t)=>e.material.setAttr("emissiveMapCenter",t)},{label:"贴图旋转",key:"emissiveMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveMapRotation"),setter:(e,t)=>e.material.setAttr("emissiveMapRotation",t)},{label:"Y轴反转",key:"emissiveMapFlipY",type:A.BOOLEAN,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,visible:Se,getter:e=>e.material.getAttr("emissiveMapFlipY"),setter:(e,t)=>e.material.setAttr("emissiveMapFlipY",t)},{label:"色彩空间",key:"emissiveMapColorSpace",type:A.ENUM,group:p.EMISSIVE_MAP.key,groupName:p.EMISSIVE_MAP.name,options:Jt,visible:Se,getter:e=>e.material.getAttr("emissiveMapColorSpace"),setter:(e,t)=>e.material.setAttr("emissiveMapColorSpace",t)},{label:"贴图",key:"alphaMapImage",type:A.TEXTURE,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,visible:fe,getter:e=>e.material.getAttr("alphaMapImage"),setter:(e,t)=>e.material.setAttr("alphaMapImage",t)},{label:"映射方式",key:"alphaMapMapping",type:A.ENUM,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,options:Qt,visible:fe,getter:e=>e.material.getAttr("alphaMapMapping"),setter:(e,t)=>e.material.setAttr("alphaMapMapping",t)},{label:"水平包裹模式",key:"alphaMapWrapS",type:A.ENUM,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("alphaMapWrapS"),setter:(e,t)=>e.material.setAttr("alphaMapWrapS",t)},{label:"垂直包裹模式",key:"alphaMapWrapT",type:A.ENUM,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("alphaMapWrapT"),setter:(e,t)=>e.material.setAttr("alphaMapWrapT",t)},{label:"贴图偏移",key:"alphaMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,visible:fe,getter:e=>e.material.getAttr("alphaMapOffset"),setter:(e,t)=>e.material.setAttr("alphaMapOffset",t)},{label:"贴图缩放",key:"alphaMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,visible:fe,getter:e=>e.material.getAttr("alphaMapRepeat"),setter:(e,t)=>e.material.setAttr("alphaMapRepeat",t)},{label:"贴图中心",key:"alphaMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,visible:fe,getter:e=>e.material.getAttr("alphaMapCenter"),setter:(e,t)=>e.material.setAttr("alphaMapCenter",t)},{label:"贴图旋转",key:"alphaMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,visible:fe,getter:e=>e.material.getAttr("alphaMapRotation"),setter:(e,t)=>e.material.setAttr("alphaMapRotation",t)},{label:"Y轴反转",key:"alphaMapFlipY",type:A.BOOLEAN,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,visible:fe,getter:e=>e.material.getAttr("alphaMapFlipY"),setter:(e,t)=>e.material.setAttr("alphaMapFlipY",t)},{label:"色彩空间",key:"alphaMapColorSpace",type:A.ENUM,group:p.ALPHA_MAP.key,groupName:p.ALPHA_MAP.name,options:Jt,visible:fe,getter:e=>e.material.getAttr("alphaMapColorSpace"),setter:(e,t)=>e.material.setAttr("alphaMapColorSpace",t)},{label:"凹凸贴图强度",key:"bumpScale",min:0,step:.1,precision:2,type:A.NUMBER,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpScale"),setter:(e,t)=>e.material.setAttr("bumpScale",t)},{label:"贴图",key:"bumpMapImage",type:A.TEXTURE,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpMapImage"),setter:(e,t)=>e.material.setAttr("bumpMapImage",t)},{label:"映射方式",key:"bumpMapMapping",type:A.ENUM,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,options:Qt,visible:Se,getter:e=>e.material.getAttr("bumpMapMapping"),setter:(e,t)=>e.material.setAttr("bumpMapMapping",t)},{label:"水平包裹模式",key:"bumpMapWrapS",type:A.ENUM,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("bumpMapWrapS"),setter:(e,t)=>e.material.setAttr("bumpMapWrapS",t)},{label:"垂直包裹模式",key:"bumpMapWrapT",type:A.ENUM,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("bumpMapWrapT"),setter:(e,t)=>e.material.setAttr("bumpMapWrapT",t)},{label:"贴图偏移",key:"bumpMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpMapOffset"),setter:(e,t)=>e.material.setAttr("bumpMapOffset",t)},{label:"贴图缩放",key:"bumpMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpMapRepeat"),setter:(e,t)=>e.material.setAttr("bumpMapRepeat",t)},{label:"贴图中心",key:"bumpMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpMapCenter"),setter:(e,t)=>e.material.setAttr("bumpMapCenter",t)},{label:"贴图旋转",key:"bumpMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpMapRotation"),setter:(e,t)=>e.material.setAttr("bumpMapRotation",t)},{label:"Y轴反转",key:"bumpMapFlipY",type:A.BOOLEAN,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,visible:Se,getter:e=>e.material.getAttr("bumpMapFlipY"),setter:(e,t)=>e.material.setAttr("bumpMapFlipY",t)},{label:"色彩空间",key:"bumpMapColorSpace",type:A.ENUM,group:p.BUMP_MAP.key,groupName:p.BUMP_MAP.name,options:Jt,visible:Se,getter:e=>e.material.getAttr("bumpMapColorSpace"),setter:(e,t)=>e.material.setAttr("bumpMapColorSpace",t)},{label:"置换贴图强度",key:"displacementScale",min:0,step:.1,precision:2,type:A.NUMBER,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementScale"),setter:(e,t)=>e.material.setAttr("displacementScale",t)},{label:"置换贴图偏移",key:"displacementBias",step:.1,precision:2,type:A.NUMBER,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementBias"),setter:(e,t)=>e.material.setAttr("displacementBias",t)},{label:"贴图",key:"displacementMapImage",type:A.TEXTURE,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementMapImage"),setter:(e,t)=>e.material.setAttr("displacementMapImage",t)},{label:"映射方式",key:"displacementMapMapping",type:A.ENUM,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,options:Qt,visible:Se,getter:e=>e.material.getAttr("displacementMapMapping"),setter:(e,t)=>e.material.setAttr("displacementMapMapping",t)},{label:"水平包裹模式",key:"displacementMapWrapS",type:A.ENUM,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("displacementMapWrapS"),setter:(e,t)=>e.material.setAttr("displacementMapWrapS",t)},{label:"垂直包裹模式",key:"displacementMapWrapT",type:A.ENUM,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,options:mt,visible:Se,getter:e=>e.material.getAttr("displacementMapWrapT"),setter:(e,t)=>e.material.setAttr("displacementMapWrapT",t)},{label:"贴图偏移",key:"displacementMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementMapOffset"),setter:(e,t)=>e.material.setAttr("displacementMapOffset",t)},{label:"贴图缩放",key:"displacementMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementMapRepeat"),setter:(e,t)=>e.material.setAttr("displacementMapRepeat",t)},{label:"贴图中心",key:"displacementMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementMapCenter"),setter:(e,t)=>e.material.setAttr("displacementMapCenter",t)},{label:"贴图旋转",key:"displacementMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementMapRotation"),setter:(e,t)=>e.material.setAttr("displacementMapRotation",t)},{label:"Y轴反转",key:"displacementMapFlipY",type:A.BOOLEAN,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,visible:Se,getter:e=>e.material.getAttr("displacementMapFlipY"),setter:(e,t)=>e.material.setAttr("displacementMapFlipY",t)},{label:"色彩空间",key:"displacementMapColorSpace",type:A.ENUM,group:p.DISPLACEMENT_MAP.key,groupName:p.DISPLACEMENT_MAP.name,options:Jt,visible:Se,getter:e=>e.material.getAttr("displacementMapColorSpace"),setter:(e,t)=>e.material.setAttr("displacementMapColorSpace",t)},{label:"光照贴图强度",key:"lightMapIntensity",min:0,step:.1,precision:2,type:A.NUMBER,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapIntensity"),setter:(e,t)=>e.material.setAttr("lightMapIntensity",t)},{label:"贴图",key:"lightMapImage",type:A.TEXTURE,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapImage"),setter:(e,t)=>e.material.setAttr("lightMapImage",t)},{label:"映射方式",key:"lightMapMapping",type:A.ENUM,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,options:Qt,visible:fe,getter:e=>e.material.getAttr("lightMapMapping"),setter:(e,t)=>e.material.setAttr("lightMapMapping",t)},{label:"水平包裹模式",key:"lightMapWrapS",type:A.ENUM,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("lightMapWrapS"),setter:(e,t)=>e.material.setAttr("lightMapWrapS",t)},{label:"垂直包裹模式",key:"lightMapWrapT",type:A.ENUM,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,options:mt,visible:fe,getter:e=>e.material.getAttr("lightMapWrapT"),setter:(e,t)=>e.material.setAttr("lightMapWrapT",t)},{label:"贴图偏移",key:"lightMapOffset",step:.1,precision:2,min:0,max:1,type:A.VECTOR2,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapOffset"),setter:(e,t)=>e.material.setAttr("lightMapOffset",t)},{label:"贴图缩放",key:"lightMapRepeat",step:.1,precision:2,type:A.VECTOR2,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapRepeat"),setter:(e,t)=>e.material.setAttr("lightMapRepeat",t)},{label:"贴图中心",key:"lightMapCenter",min:0,max:1,step:.1,precision:2,type:A.VECTOR2,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapCenter"),setter:(e,t)=>e.material.setAttr("lightMapCenter",t)},{label:"贴图旋转",key:"lightMapRotation",min:0,max:360,step:1,precision:1,type:A.NUMBER,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapRotation"),setter:(e,t)=>e.material.setAttr("lightMapRotation",t)},{label:"Y轴反转",key:"lightMapFlipY",type:A.BOOLEAN,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,visible:fe,getter:e=>e.material.getAttr("lightMapFlipY"),setter:(e,t)=>e.material.setAttr("lightMapFlipY",t)},{label:"色彩空间",key:"lightMapColorSpace",type:A.ENUM,group:p.LIGHT_MAP.key,groupName:p.LIGHT_MAP.name,options:Jt,visible:fe,getter:e=>e.material.getAttr("lightMapColorSpace"),setter:(e,t)=>e.material.setAttr("lightMapColorSpace",t)},{label:"Uniforms",key:"uniforms",type:A.UNIFORMS,group:p.CUSTOM_SHADER.key,groupName:p.CUSTOM_SHADER.name,visible:ui,getter:e=>e.material.getAttr("uniforms"),setter:(e,t)=>e.material.setAttr("uniforms",t)},{label:"顶点着色器",key:"vertexShader",type:A.VERTEX_SHADER,group:p.CUSTOM_SHADER.key,groupName:p.CUSTOM_SHADER.name,visible:ui,getter:e=>e.material.getAttr("vertexShader"),setter:(e,t)=>e.material.setAttr("vertexShader",t)},{label:"片元着色器",key:"fragmentShader",type:A.FRAGEMENT_SHADER,group:p.CUSTOM_SHADER.key,groupName:p.CUSTOM_SHADER.name,visible:ui,getter:e=>e.material.getAttr("fragmentShader"),setter:(e,t)=>e.material.setAttr("fragmentShader",t)}]}}class wv{constructor(r){x(this,"editor");x(this,"commonAttrs");x(this,"activeGroups");x(this,"getGroups",()=>[]);this.editor=r,this.activeGroups=[p.BASE.key];const{commonAttrs:e}=new Nv(this.editor);this.commonAttrs=this.createAttributes(e)}createAttributes(r){return r.map(e=>new Nr(this.editor,e,[]))}getAttributes(){return[...this.commonAttrs]}}const kv=[{key:"copy",label:"拷贝",action:n=>{n.copyManager.copy()},visible:n=>n.selectionManager.getSelection().length>0},{key:"cut",label:"剪切",action:n=>{n.copyManager.cut()},visible:n=>n.selectionManager.getSelection().length>0},{key:"paste",label:"粘贴",action:n=>{n.copyManager.paste()},visible:n=>n.copyManager.canPaste()},{key:"delete",label:"删除",action:n=>{const r=n.selectionManager.getSelection();n.historyManager.beginTransaction(),n.core.select([]),r.forEach(e=>n.core.removeEntity(e)),n.historyManager.endTransaction()},visible:n=>n.selectionManager.getSelection().length>0},{key:"copy-material",label:"拷贝材质",action:n=>{n.copyManager.copyMaterial()},visible:n=>n.selectionManager.getSelection().length>0},{key:"paste-material",label:"粘贴材质",action:n=>{n.copyManager.pasteMaterial()},visible:n=>n.copyManager.canPasteMaterial()},{key:"component",label:"组件",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:It[Oe.SimpleScript],action:n=>{const r=tn(Oe.SimpleScript),e=[...n.selectionManager.getSelection()];e.length===0&&e.push(n.selectionManager.getView()),n.historyManager.beginTransaction(),e.forEach(t=>{const{entityManager:a}=n.core,i=a.createComponent(r,t);n.core.addComponent(i,t)}),n.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:It[Oe.OrbitControls],action:n=>{const r=tn(Oe.OrbitControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(t=>{const{entityManager:a}=n.core,i=a.createComponent(r,t);n.core.addComponent(i,t)}),n.historyManager.endTransaction()},visible:n=>{const r=n.selectionManager.getSelection(),e=r.filter(t=>t instanceof wn);return e.length>0&&e.length===r.length}},{key:"compoent_pointer_lock_controls",label:It[Oe.PointerLockControls],action:n=>{const r=tn(Oe.PointerLockControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(t=>{const{entityManager:a}=n.core,i=a.createComponent(r,t);n.core.addComponent(i,t)}),n.historyManager.endTransaction()},visible:n=>{const r=n.selectionManager.getSelection(),e=r.filter(t=>t instanceof wn);return e.length>0&&e.length===r.length}}]}],Pv=[{key:"copy",label:"拷贝",action:n=>{n.copyManager.copy()},visible:n=>n.selectionManager.getSelection().length>0},{key:"cut",label:"剪切",action:n=>{n.copyManager.cut()},visible:n=>n.selectionManager.getSelection().length>0},{key:"paste",label:"粘贴",action:n=>{n.copyManager.paste()},visible:n=>n.copyManager.canPaste()},{key:"delete",label:"删除",action:n=>{const r=n.selectionManager.getSelection();n.historyManager.beginTransaction(),n.core.select([]),r.forEach(e=>n.core.removeEntity(e)),n.historyManager.endTransaction()},visible:n=>n.selectionManager.getSelection().length>0},{key:"component",label:"组件",action:()=>{},visible:()=>!0,children:[{key:"component_script",label:"脚本",action:n=>{const r=tn(Oe.SimpleScript),e=[...n.selectionManager.getSelection()];e.length===0&&e.push(n.selectionManager.getView()),n.historyManager.beginTransaction(),e.forEach(t=>{const{entityManager:a}=n.core,i=a.createComponent(r,t);n.core.addComponent(i,t)}),n.historyManager.endTransaction()},visible:()=>!0},{key:"component_orbit_controls",label:"轨道控制",action:n=>{const r=tn(Oe.OrbitControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(t=>{const{entityManager:a}=n.core,i=a.createComponent(r,t);n.core.addComponent(i,t)}),n.historyManager.endTransaction()},visible:n=>{const r=n.selectionManager.getSelection(),e=r.filter(t=>t instanceof wn);return e.length>0&&e.length===r.length}},{key:"compoent_pointer_lock_controls",label:It[Oe.PointerLockControls],action:n=>{const r=tn(Oe.PointerLockControls),e=n.selectionManager.getSelection();n.historyManager.beginTransaction(),e.forEach(t=>{const{entityManager:a}=n.core,i=a.createComponent(r,t);n.core.addComponent(i,t)}),n.historyManager.endTransaction()},visible:n=>{const r=n.selectionManager.getSelection(),e=r.filter(t=>t instanceof wn);return e.length>0&&e.length===r.length}}]}],Ov=[{key:"DELETE",label:"删除",action:n=>{var t;const e=(t=n.contextMenuManager.meta.group.meta)==null?void 0:t.component;e&&n.core.removeComponent(e)},visible:()=>!0}];class Iv{constructor(){x(this,"core");x(this,"historyManager");x(this,"hotkeyManager");x(this,"attrManager");x(this,"contextMenuManager");x(this,"nodeManager");x(this,"selectionManager");x(this,"toolManager");x(this,"dropManager");x(this,"copyManager");x(this,"dataManager");x(this,"componentManager");x(this,"materialManager");x(this,"bus");x(this,"dirty");this.core=new Ou({}),this.bus=Iu(),this.dirty=!1,this.core.use(new xn(this.core)),this.core.use(new Ps(this.core)),this.core.use(new Tu(this.core)),this.core.use(new _u(this.core)),this.core.use(new gf(this.core)),this.core.use(new Tn(this.core)),this.core.use(new Os(this.core)),this.core.use(new wl(this.core)),this.core.use(new kl(this.core)),this.core.use(new Pl(this.core)),this.core.use(new Sa(this.core)),this.core.use(new kr(this.core)),this.core.use(new $i(this.core)),this.core.use(new ff(this.core));const r=new Sv(this),e=new Ev(this),t=new wv(this);this.hotkeyManager=new Sf(this,gv),this.attrManager=new bf(this,r,e),this.materialManager=new hv(this,t),this.contextMenuManager=new pv(this),this.historyManager=new uv(this),this.nodeManager=new Cf(this),this.selectionManager=new Yf(this),this.toolManager=new Wf(this),this.dropManager=new qf(this),this.copyManager=new Xf(this),this.dataManager=new lv(this),this.componentManager=new dv(this)}initContextMenus(){const{GRAPH:r,HIERARCHY:e,ATTR_COMPONENT:t}=ja;this.contextMenuManager.addContextMenu(r,kv),this.contextMenuManager.addContextMenu(e,Pv),this.contextMenuManager.addContextMenu(t,Ov)}initListeners(){this.core.bus.on("ENTITY_ADDED",()=>{this.bus.emit("NODE_ADD",this)}),this.core.bus.on("ENTITY_REMOVED",()=>{this.bus.emit("NODE_REMOVE",this)}),this.core.bus.on("ENTITY_MOVED",()=>{this.attrManager.update(),this.bus.emit("NODE_MOVE",this)}),this.core.bus.on("ENTITY_SELECTED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("ENTITY_CHANGED",()=>{this.attrManager.update(),this.bus.emit("ATTR_CHANGE",this)}),this.core.bus.on("COMPONENT_ADDED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_REMOVED",()=>{this.bus.emit("NODE_SELECT",this)}),this.core.bus.on("COMPONENT_CHANGED",()=>{this.attrManager.update()}),this.core.bus.on("MATERIAL_CHANGED",r=>{this.materialManager.update(),r.key==="type"&&this.bus.emit("MATERIAL_CHANGE",this)}),this.core.bus.on("MATERIAL_COPIED",()=>{this.bus.emit("MATERIAL_CHANGE",this)}),this.core.bus.on("HISTORY_CHANGE",()=>{this.dirty=!0,this.bus.emit("TAB_DIRTY",this)}),this.core.bus.on("DESERIALIZE",()=>{this.bus.emit("DESERIALIZATED",this)})}async mount(r){this.core.mount(r),this.toolManager.mount(),this.initContextMenus(),this.initListeners(),this.bus.emit("TAB_MOUNT",this)}resize(){this.core.resize()}active(){this.hotkeyManager.active(),this.core.active(),this.resize()}deactive(){this.hotkeyManager.deactive(),this.core.deactive()}unmount(){this.attrManager.dispose(),this.hotkeyManager.dispose(),this.historyManager.dispose(),this.toolManager.dispose(),this.contextMenuManager.dispose(),this.core.unmount()}async open(r){const e=await Ac(r);e&&this.core.deserialize(e.content)}async save(){const e=await this.core.getPlugin(xn).toImage(),t=this.core.entityManager.root.code,a=this.core.serialize(),i=await xc(t,e,a);this.historyManager.pause(),this.core.entityManager.root.setAttr("date",i==null?void 0:i.document.date),this.historyManager.resume(),this.bus.emit("MESSAGE",{message:"保存成功",type:"success"})}preview(){const r=this.core.entityManager.root.code;window.open(`#/preview?id=${r}`,`#/preview?id=${r}`)}async reload(){this.historyManager.pause(),this.core.clear(),this.dirty=!1,this.open(this.core.entityManager.root.code),this.historyManager.dispose(),this.historyManager.resume(),this.bus.emit("TAB_DIRTY",this)}}const Tv=(n,r)=>{const[e,t]=d.useState(n.item);return d.useEffect(()=>{n.item&&(n.item.listen(r),r(n.item.getter()))},[]),n.update=a=>{e==null||e.unlisten(r),t(a),a&&(a.listen(r),r(a.getter()))},n.destroy=()=>{e==null||e.unlisten(r)},e},_v=n=>{const{attribute:r,value:e,onChange:t}=n,[a,i]=d.useState(""),[l,o]=d.useState(!1);d.useEffect(()=>{i(e)},[e]);const s=u=>{i(u.target.value),o(!0)},c=()=>{l&&(t(a),o(!1))};return D.jsx(Ra,{style:{borderRadius:"4px"},disabled:r==null?void 0:r.disabled,value:a,onChange:s,onPressEnter:c,onBlur:c})},En=n=>{const{style:r,attribute:e,value:t,onChange:a}=n,[i,l]=d.useState(0),[o,s]=d.useState(!1);d.useEffect(()=>{l(t)},[t]);const c=m=>{l(m||0),s(!0)},u=()=>{o&&(a(i),s(!1))},h=m=>{s(!1),l(m||0),a(m)};return D.jsx(Qn,{style:{borderRadius:"4px",...r},disabled:e==null?void 0:e.disabled,min:e==null?void 0:e.min,max:e==null?void 0:e.max,precision:e==null?void 0:e.precision,step:e==null?void 0:e.step,value:i,onChange:c,onPressEnter:u,onBlur:u,onStep:h})},Rv=n=>{const{attribute:r,value:e,onChange:t}=n,a=i=>{t(i.target.checked)};return D.jsx(Li,{disabled:r==null?void 0:r.disabled,checked:e,onChange:a})},$v=n=>{const{attribute:r,value:e,onChange:t}=n,[a,i]=d.useState(e);d.useEffect(()=>{i(e)},[e]);const l=o=>{t(o.toHexString())};return D.jsx(La,{style:{borderRadius:"4px"},disabled:r==null?void 0:r.disabled,disabledAlpha:r==null?void 0:r.disableAlpha,showText:!0,value:a,onChange:i,onChangeComplete:l})},Dv=n=>{const{attribute:r,value:e,onChange:t}=n,[a,i]=d.useState("");d.useEffect(()=>{i(e)},[e]);const l=o=>{t(o)};return D.jsx(Ri,{style:{width:"100%",borderRadius:"4px"},disabled:r==null?void 0:r.disabled,options:r==null?void 0:r.options,value:a,onChange:l})},Lv=n=>{const{attribute:r,value:e,onChange:t}=n,[a,i]=d.useState(0),[l,o]=d.useState(0);d.useEffect(()=>{const[u,h]=e||[];i(u),o(h)},[e]);const s=u=>{t([u,l,"x"])},c=u=>{t([a,u,"y"])};return D.jsxs(Xn,{gutter:4,children:[D.jsx(Vt,{span:8,children:D.jsx(En,{style:{width:"unset"},attribute:r,value:a,onChange:s})}),D.jsx(Vt,{span:8,children:D.jsx(En,{style:{width:"unset"},attribute:r,value:l,onChange:c})})]})},Bv=n=>{const{attribute:r,value:e,onChange:t}=n,[a,i]=d.useState(0),[l,o]=d.useState(0),[s,c]=d.useState(0);d.useEffect(()=>{const[g,b,y]=e||[];i(g),o(b),c(y)},[e]);const u=g=>{t([g,l,s,"x"])},h=g=>{t([a,g,s,"y"])},m=g=>{t([a,l,g,"z"])};return D.jsxs(Xn,{gutter:4,children:[D.jsx(Vt,{span:8,children:D.jsx(En,{style:{width:"unset"},attribute:r,value:a,onChange:u})}),D.jsx(Vt,{span:8,children:D.jsx(En,{style:{width:"unset"},attribute:r,value:l,onChange:h})}),D.jsx(Vt,{span:8,children:D.jsx(En,{style:{width:"unset"},attribute:r,value:s,onChange:m})})]})};function jv(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function as(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,t)}return e}function is(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?as(Object(e),!0).forEach(function(t){jv(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):as(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function zv(n,r){if(n==null)return{};var e={},t=Object.keys(n),a,i;for(i=0;i<t.length;i++)a=t[i],!(r.indexOf(a)>=0)&&(e[a]=n[a]);return e}function Hv(n,r){if(n==null)return{};var e=zv(n,r),t,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)t=i[a],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(n,t)&&(e[t]=n[t])}return e}function Vv(n,r){return Kv(n)||Fv(n,r)||Uv(n,r)||Gv()}function Kv(n){if(Array.isArray(n))return n}function Fv(n,r){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var e=[],t=!0,a=!1,i=void 0;try{for(var l=n[Symbol.iterator](),o;!(t=(o=l.next()).done)&&(e.push(o.value),!(r&&e.length===r));t=!0);}catch(s){a=!0,i=s}finally{try{!t&&l.return!=null&&l.return()}finally{if(a)throw i}}return e}}function Uv(n,r){if(n){if(typeof n=="string")return os(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);if(e==="Object"&&n.constructor&&(e=n.constructor.name),e==="Map"||e==="Set")return Array.from(n);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return os(n,r)}}function os(n,r){(r==null||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function Gv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wv(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function ss(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,t)}return e}function ls(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?ss(Object(e),!0).forEach(function(t){Wv(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):ss(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}function Yv(){for(var n=arguments.length,r=new Array(n),e=0;e<n;e++)r[e]=arguments[e];return function(t){return r.reduceRight(function(a,i){return i(a)},t)}}function Bn(n){return function r(){for(var e=this,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return a.length>=n.length?n.apply(this,a):function(){for(var l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];return r.apply(e,[].concat(a,o))}}}function Pa(n){return{}.toString.call(n).includes("Object")}function qv(n){return!Object.keys(n).length}function Wn(n){return typeof n=="function"}function Xv(n,r){return Object.prototype.hasOwnProperty.call(n,r)}function Zv(n,r){return Pa(r)||Dr("changeType"),Object.keys(r).some(function(e){return!Xv(n,e)})&&Dr("changeField"),r}function Qv(n){Wn(n)||Dr("selectorType")}function Jv(n){Wn(n)||Pa(n)||Dr("handlerType"),Pa(n)&&Object.values(n).some(function(r){return!Wn(r)})&&Dr("handlersType")}function ey(n){n||Dr("initialIsRequired"),Pa(n)||Dr("initialType"),qv(n)&&Dr("initialContent")}function ty(n,r){throw new Error(n[r]||n.default)}var ry={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Dr=Bn(ty)(ry),va={changes:Zv,selector:Qv,handler:Jv,initial:ey};function ny(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};va.initial(n),va.handler(r);var e={current:n},t=Bn(oy)(e,r),a=Bn(iy)(e),i=Bn(va.changes)(n),l=Bn(ay)(e);function o(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return va.selector(c),c(e.current)}function s(c){Yv(t,a,i,l)(c)}return[o,s]}function ay(n,r){return Wn(r)?r(n.current):r}function iy(n,r){return n.current=ls(ls({},n.current),r),r}function oy(n,r,e){return Wn(r)?r(n.current):Object.keys(e).forEach(function(t){var a;return(a=r[t])===null||a===void 0?void 0:a.call(r,n.current[t])}),e}var sy={create:ny},ly={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function cy(n){return function r(){for(var e=this,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return a.length>=n.length?n.apply(this,a):function(){for(var l=arguments.length,o=new Array(l),s=0;s<l;s++)o[s]=arguments[s];return r.apply(e,[].concat(a,o))}}}function uy(n){return{}.toString.call(n).includes("Object")}function dy(n){return n||cs("configIsRequired"),uy(n)||cs("configType"),n.urls?(py(),{paths:{vs:n.urls.monacoBase}}):n}function py(){console.warn(Ol.deprecation)}function hy(n,r){throw new Error(n[r]||n.default)}var Ol={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},cs=cy(hy)(Ol),gy={config:dy},my=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return function(a){return e.reduceRight(function(i,l){return l(i)},a)}};function Il(n,r){return Object.keys(r).forEach(function(e){r[e]instanceof Object&&n[e]&&Object.assign(r[e],Il(n[e],r[e]))}),is(is({},n),r)}var fy={type:"cancelation",msg:"operation is manually canceled"};function di(n){var r=!1,e=new Promise(function(t,a){n.then(function(i){return r?a(fy):t(i)}),n.catch(a)});return e.cancel=function(){return r=!0},e}var vy=sy.create({config:ly,isInitialized:!1,resolve:null,reject:null,monaco:null}),Tl=Vv(vy,2),ta=Tl[0],Ha=Tl[1];function yy(n){var r=gy.config(n),e=r.monaco,t=Hv(r,["monaco"]);Ha(function(a){return{config:Il(a.config,t),monaco:e}})}function by(){var n=ta(function(r){var e=r.monaco,t=r.isInitialized,a=r.resolve;return{monaco:e,isInitialized:t,resolve:a}});if(!n.isInitialized){if(Ha({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),di(pi);if(window.monaco&&window.monaco.editor)return _l(window.monaco),n.resolve(window.monaco),di(pi);my(Sy,Ey)(My)}return di(pi)}function Sy(n){return document.body.appendChild(n)}function Cy(n){var r=document.createElement("script");return n&&(r.src=n),r}function Ey(n){var r=ta(function(t){var a=t.config,i=t.reject;return{config:a,reject:i}}),e=Cy("".concat(r.config.paths.vs,"/loader.js"));return e.onload=function(){return n()},e.onerror=r.reject,e}function My(){var n=ta(function(e){var t=e.config,a=e.resolve,i=e.reject;return{config:t,resolve:a,reject:i}}),r=window.require;r.config(n.config),r(["vs/editor/editor.main"],function(e){_l(e),n.resolve(e)},function(e){n.reject(e)})}function _l(n){ta().monaco||Ha({monaco:n})}function Ay(){return ta(function(n){var r=n.monaco;return r})}var pi=new Promise(function(n,r){return Ha({resolve:n,reject:r})}),Rl={config:yy,init:by,__getMonacoInstance:Ay},xy={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},hi=xy,Ny={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},wy=Ny;function ky({children:n}){return z.createElement("div",{style:wy.container},n)}var Py=ky,Oy=Py;function Iy({width:n,height:r,isEditorReady:e,loading:t,_ref:a,className:i,wrapperProps:l}){return z.createElement("section",{style:{...hi.wrapper,width:n,height:r},...l},!e&&z.createElement(Oy,null,t),z.createElement("div",{ref:a,style:{...hi.fullWidth,...!e&&hi.hide},className:i}))}var Ty=Iy,$l=d.memo(Ty);function _y(n){d.useEffect(n,[])}var Dl=_y;function Ry(n,r,e=!0){let t=d.useRef(!0);d.useEffect(t.current||!e?()=>{t.current=!1}:n,r)}var Gt=Ry;function Vn(){}function yn(n,r,e,t){return $y(n,t)||Dy(n,r,e,t)}function $y(n,r){return n.editor.getModel(Ll(n,r))}function Dy(n,r,e,t){return n.editor.createModel(r,e,t?Ll(n,t):void 0)}function Ll(n,r){return n.Uri.parse(r)}function Ly({original:n,modified:r,language:e,originalLanguage:t,modifiedLanguage:a,originalModelPath:i,modifiedModelPath:l,keepCurrentOriginalModel:o=!1,keepCurrentModifiedModel:s=!1,theme:c="light",loading:u="Loading...",options:h={},height:m="100%",width:g="100%",className:b,wrapperProps:y={},beforeMount:f=Vn,onMount:v=Vn}){let[S,C]=d.useState(!1),[M,E]=d.useState(!0),w=d.useRef(null),k=d.useRef(null),P=d.useRef(null),_=d.useRef(v),I=d.useRef(f),L=d.useRef(!1);Dl(()=>{let O=Rl.init();return O.then(H=>(k.current=H)&&E(!1)).catch(H=>(H==null?void 0:H.type)!=="cancelation"&&console.error("Monaco initialization: error:",H)),()=>w.current?$():O.cancel()}),Gt(()=>{if(w.current&&k.current){let O=w.current.getOriginalEditor(),H=yn(k.current,n||"",t||e||"text",i||"");H!==O.getModel()&&O.setModel(H)}},[i],S),Gt(()=>{if(w.current&&k.current){let O=w.current.getModifiedEditor(),H=yn(k.current,r||"",a||e||"text",l||"");H!==O.getModel()&&O.setModel(H)}},[l],S),Gt(()=>{let O=w.current.getModifiedEditor();O.getOption(k.current.editor.EditorOption.readOnly)?O.setValue(r||""):r!==O.getValue()&&(O.executeEdits("",[{range:O.getModel().getFullModelRange(),text:r||"",forceMoveMarkers:!0}]),O.pushUndoStop())},[r],S),Gt(()=>{var O,H;(H=(O=w.current)==null?void 0:O.getModel())==null||H.original.setValue(n||"")},[n],S),Gt(()=>{let{original:O,modified:H}=w.current.getModel();k.current.editor.setModelLanguage(O,t||e||"text"),k.current.editor.setModelLanguage(H,a||e||"text")},[e,t,a],S),Gt(()=>{var O;(O=k.current)==null||O.editor.setTheme(c)},[c],S),Gt(()=>{var O;(O=w.current)==null||O.updateOptions(h)},[h],S);let T=d.useCallback(()=>{var V;if(!k.current)return;I.current(k.current);let O=yn(k.current,n||"",t||e||"text",i||""),H=yn(k.current,r||"",a||e||"text",l||"");(V=w.current)==null||V.setModel({original:O,modified:H})},[e,r,a,n,t,i,l]),j=d.useCallback(()=>{var O;!L.current&&P.current&&(w.current=k.current.editor.createDiffEditor(P.current,{automaticLayout:!0,...h}),T(),(O=k.current)==null||O.editor.setTheme(c),C(!0),L.current=!0)},[h,c,T]);d.useEffect(()=>{S&&_.current(w.current,k.current)},[S]),d.useEffect(()=>{!M&&!S&&j()},[M,S,j]);function $(){var H,V,Y,X;let O=(H=w.current)==null?void 0:H.getModel();o||((V=O==null?void 0:O.original)==null||V.dispose()),s||((Y=O==null?void 0:O.modified)==null||Y.dispose()),(X=w.current)==null||X.dispose()}return z.createElement($l,{width:g,height:m,isEditorReady:S,loading:u,_ref:P,className:b,wrapperProps:y})}var By=Ly;d.memo(By);function jy(n){let r=d.useRef();return d.useEffect(()=>{r.current=n},[n]),r.current}var zy=jy,ya=new Map;function Hy({defaultValue:n,defaultLanguage:r,defaultPath:e,value:t,language:a,path:i,theme:l="light",line:o,loading:s="Loading...",options:c={},overrideServices:u={},saveViewState:h=!0,keepCurrentModel:m=!1,width:g="100%",height:b="100%",className:y,wrapperProps:f={},beforeMount:v=Vn,onMount:S=Vn,onChange:C,onValidate:M=Vn}){let[E,w]=d.useState(!1),[k,P]=d.useState(!0),_=d.useRef(null),I=d.useRef(null),L=d.useRef(null),T=d.useRef(S),j=d.useRef(v),$=d.useRef(),O=d.useRef(t),H=zy(i),V=d.useRef(!1),Y=d.useRef(!1);Dl(()=>{let W=Rl.init();return W.then(Q=>(_.current=Q)&&P(!1)).catch(Q=>(Q==null?void 0:Q.type)!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>I.current?pe():W.cancel()}),Gt(()=>{var Q,re,ne,U;let W=yn(_.current,n||t||"",r||a||"",i||e||"");W!==((Q=I.current)==null?void 0:Q.getModel())&&(h&&ya.set(H,(re=I.current)==null?void 0:re.saveViewState()),(ne=I.current)==null||ne.setModel(W),h&&((U=I.current)==null||U.restoreViewState(ya.get(i))))},[i],E),Gt(()=>{var W;(W=I.current)==null||W.updateOptions(c)},[c],E),Gt(()=>{!I.current||t===void 0||(I.current.getOption(_.current.editor.EditorOption.readOnly)?I.current.setValue(t):t!==I.current.getValue()&&(Y.current=!0,I.current.executeEdits("",[{range:I.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),I.current.pushUndoStop(),Y.current=!1))},[t],E),Gt(()=>{var Q,re;let W=(Q=I.current)==null?void 0:Q.getModel();W&&a&&((re=_.current)==null||re.editor.setModelLanguage(W,a))},[a],E),Gt(()=>{var W;o!==void 0&&((W=I.current)==null||W.revealLine(o))},[o],E),Gt(()=>{var W;(W=_.current)==null||W.editor.setTheme(l)},[l],E);let X=d.useCallback(()=>{var W;if(!(!L.current||!_.current)&&!V.current){j.current(_.current);let Q=i||e,re=yn(_.current,t||n||"",r||a||"",Q||"");I.current=(W=_.current)==null?void 0:W.editor.create(L.current,{model:re,automaticLayout:!0,...c},u),h&&I.current.restoreViewState(ya.get(Q)),_.current.editor.setTheme(l),o!==void 0&&I.current.revealLine(o),w(!0),V.current=!0}},[n,r,e,t,a,i,c,u,h,l,o]);d.useEffect(()=>{E&&T.current(I.current,_.current)},[E]),d.useEffect(()=>{!k&&!E&&X()},[k,E,X]),O.current=t,d.useEffect(()=>{var W,Q;E&&C&&((W=$.current)==null||W.dispose(),$.current=(Q=I.current)==null?void 0:Q.onDidChangeModelContent(re=>{Y.current||C(I.current.getValue(),re)}))},[E,C]),d.useEffect(()=>{if(E){let W=_.current.editor.onDidChangeMarkers(Q=>{var ne;let re=(ne=I.current.getModel())==null?void 0:ne.uri;if(re&&Q.find(U=>U.path===re.path)){let U=_.current.editor.getModelMarkers({resource:re});M==null||M(U)}});return()=>{W==null||W.dispose()}}return()=>{}},[E,M]);function pe(){var W,Q;(W=$.current)==null||W.dispose(),m?h&&ya.set(i,I.current.saveViewState()):(Q=I.current.getModel())==null||Q.dispose(),I.current.dispose()}return z.createElement($l,{width:g,height:b,isEditorReady:E,loading:s,_ref:L,className:y,wrapperProps:f})}var Vy=Hy,Ky=d.memo(Vy),Qi=Ky;const Fy=n=>{const{value:r,onChange:e}=n,[t,a]=d.useState(""),[i,l]=d.useState(!1);d.useEffect(()=>{a(r)},[r]);const o=()=>{a(r),l(!0)},s=()=>{e(t),l(!1)},c=()=>{l(!1)},u=h=>{a(h??"")};return D.jsxs(D.Fragment,{children:[D.jsx(Un,{onClick:o,children:"编辑"}),D.jsx($a,{width:800,title:"脚本",open:i,onOk:s,onCancel:c,children:D.jsx(Qi,{theme:"vs-dark",height:"60vh",defaultLanguage:"javascript",value:t,onChange:u})})]})},Uy=n=>{const{attribute:r,value:e,onChange:t}=n;return D.jsx(fl,{allowClear:!0,type:r==null?void 0:r.assetType,value:e,onChange:t})},Gy="_canvas_a5mnr_1",Wy={canvas:Gy},Yy=["jpg","jpeg","png","hdr","webp"],qy=n=>{const{attribute:r,value:e,onChange:t}=n,a=d.useRef(null),i=()=>{const c=a.current.getContext("2d"),{width:u,height:h}=a.current;c.clearRect(0,0,u,h)},l=c=>{const u=a.current.getContext("2d"),h=a.current.width/c.width;u.drawImage(c,0,0,c.width*h,c.height*h)};d.useEffect(()=>{if(i(),!e)return;typeof e=="object"?(a.current.title="内置贴图",l(e)):(async u=>{const h=await(r==null?void 0:r.editor.core.textureManager.loadTexture(u));h&&l(h.image)})(e)},[e,r]);const o=c=>{c.preventDefault(),c.stopPropagation();const u=c.dataTransfer.getData("text");let h;try{h=JSON.parse(u)}catch(m){console.error(m)}h&&Yy.includes(h.type)&&t(h.item.code)},s=c=>{c.preventDefault(),c.dataTransfer.dropEffect="copy"};return D.jsx(D.Fragment,{children:D.jsx("canvas",{className:Wy.canvas,ref:a,width:44,height:22,onDragOver:s,onDrop:o})})},Xy=[{label:"数字",value:"number"},{label:"颜色",value:"color"},{label:"二维向量",value:"vector2"},{label:"三维向量",value:"vector3"},{label:"贴图",value:"texture"}],Zy=n=>{const{value:r,onChange:e}=n,[t]=Gr.useForm(),[a,i]=d.useState(!1),[l,o]=d.useState([]);d.useEffect(()=>{t.setFieldsValue({uniforms:r}),o((r==null?void 0:r.map(g=>g.type))??[])},[r]);const s=()=>t.submit(),c=()=>i(!1),u=g=>{e==null||e(g.uniforms??[]),i(!1)},h=(g,b)=>{l[b]=g,o([...l])},m=g=>{switch(l[g]){case"number":return D.jsx(Qn,{step:.1,precision:2,style:{width:"100%"}});case"color":return D.jsx(Dg,{disabledAlpha:!0});case"vector2":return D.jsx(Rg,{style:{width:"100%"},precision:2,step:.1});case"vector3":return D.jsx($g,{precision:2,step:.1});case"texture":return D.jsx(fl,{allowClear:!0,type:"png,jpeg,jpg,hdr,webp"})}};return D.jsxs(D.Fragment,{children:[D.jsx(Un,{onClick:()=>i(!0),children:"编辑"}),D.jsx($a,{title:"Uniforms",width:800,open:a,onOk:s,onCancel:c,children:D.jsx(Gr,{form:t,onFinish:u,children:D.jsx(Gr.List,{name:"uniforms",children:(g,{add:b,remove:y})=>D.jsxs(D.Fragment,{children:[g.map(({key:f,name:v,...S})=>D.jsxs(Xn,{align:"middle",gutter:8,children:[D.jsx(Vt,{span:8,children:D.jsx(Gr.Item,{...S,name:[v,"name"],label:"名称",rules:[{required:!0,message:"请输入Uniform名称"}],children:D.jsx(Ra,{})})}),D.jsx(Vt,{span:6,children:D.jsx(Gr.Item,{...S,name:[v,"type"],label:"类型",rules:[{required:!0,message:"请选择Uniform类型"}],children:D.jsx(Ri,{options:Xy,style:{width:"100%"},onChange:C=>h(C,f)})})}),D.jsx(Vt,{span:8,children:D.jsx(Gr.Item,{...S,name:[v,"value"],label:"值",rules:[{required:!0,message:"请输入Uniform值"}],children:m(f)})}),D.jsx(Vt,{span:2,children:D.jsx(kh,{style:{verticalAlign:"1.1rem"},onClick:()=>y(v)})})]},f)),D.jsx(Gr.Item,{children:D.jsx(Un,{type:"dashed",onClick:()=>{b({name:"name",type:"number",value:0}),o(f=>[...f,"number"])},block:!0,icon:D.jsx(Rs,{}),children:"添加"})})]})})})})]})},Qy=n=>{const{value:r="",onChange:e}=n,[t,a]=d.useState(""),[i,l]=d.useState(!1);d.useEffect(()=>{a(r)},[r]);const o=()=>{a(r),l(!0)},s=()=>{e==null||e(t),l(!1)},c=()=>{l(!1)},u=h=>{a(h??"")};return D.jsxs(D.Fragment,{children:[D.jsx(Un,{onClick:o,children:"编辑"}),D.jsx($a,{width:800,title:"顶点着色器",open:i,onOk:s,onCancel:c,children:D.jsx(Qi,{theme:"vs-dark",height:"60vh",value:t,onChange:u})})]})},Jy=n=>{const{value:r="",onChange:e}=n,[t,a]=d.useState(""),[i,l]=d.useState(!1);d.useEffect(()=>{a(r)},[r]);const o=()=>{a(r),l(!0)},s=()=>{e==null||e(t),l(!1)},c=()=>{l(!1)},u=h=>{a(h??"")};return D.jsxs(D.Fragment,{children:[D.jsx(Un,{onClick:o,children:"编辑"}),D.jsx($a,{width:800,title:"片元着色器",open:i,onOk:s,onCancel:c,children:D.jsx(Qi,{theme:"vs-dark",height:"60vh",value:t,onChange:u})})]})},eb=n=>{const{root:r}=n,[e,t]=d.useState(),a=Tv(r,t),i=d.useMemo(()=>(a==null?void 0:a.attribute.type)??"string",[a]),l=o=>a==null?void 0:a.setter(o);switch(i){case A.STRING:return D.jsx(_v,{attribute:a,value:e,onChange:l});case A.NUMBER:return D.jsx(En,{attribute:a,value:e,onChange:l});case A.BOOLEAN:return D.jsx(Rv,{attribute:a,value:e,onChange:l});case A.COLOR:return D.jsx($v,{attribute:a,value:e,onChange:l});case A.ENUM:return D.jsx(Dv,{attribute:a,value:e,onChange:l});case A.VECTOR2:return D.jsx(Lv,{attribute:a,value:e,onChange:l});case A.VECTOR3:return D.jsx(Bv,{attribute:a,value:e,onChange:l});case A.SCRIPT:return D.jsx(Fy,{attribute:a,value:e,onChange:l});case A.ASSET:return D.jsx(Uy,{attribute:a,value:e,onChange:l});case A.TEXTURE:return D.jsx(qy,{value:e,attribute:a,onChange:l});case A.UNIFORMS:return D.jsx(Zy,{value:e,attribute:a,onChange:l});case A.VERTEX_SHADER:return D.jsx(Qy,{value:e,onChange:l});case A.FRAGEMENT_SHADER:return D.jsx(Jy,{value:e,onChange:l});default:return null}};class tb{constructor(r){this.parent=r,this.container=document.createElement("div"),this.container.className="attribute-item-value",this.root=Nc(this.container),this.root.render(D.jsx(wc,{children:D.jsx(eb,{root:this})})),this.parent.body.appendChild(this.container)}hide(){var r;(r=this.destroy)==null||r.call(this),this.container.style.display="none"}show(r){var e;this.item=r,(e=this.update)==null||e.call(this,r),this.container.className="attribute-item-value",this.container.style.display="flex"}dispose(){var r;(r=this.destroy)==null||r.call(this),setTimeout(()=>this.root.unmount(),0),this.container.remove()}}class rb{constructor(r){this.parent=r,this.container=document.createElement("div"),this.container.className="attribute-item",this.label=new of(this),this.body=document.createElement("div"),this.body.className="attribute-item-value-container",this.container.appendChild(this.label.container),this.container.appendChild(this.body),this.components={}}get visible(){return this.container.style.display==="flex"}hide(){this.label.hide(),Object.values(this.components).forEach(r=>r.hide()),this.container.style.display="none"}show(r){const{attribute:e,visible:t}=r,{type:a}=e;this.label.show(r),Object.values(this.components).forEach(l=>l.hide());const i=this.getAttribute(a);i==null||i.show(r),this.container.style.display=t?"flex":"none"}dispose(){this.label.dispose(),Object.values(this.components).forEach(r=>r.dispose()),this.container.remove()}getAttribute(r){let e=this.components[r];if(!e)try{e=new tb(this),this.components[r]=e}catch(t){console.error(t)}return e}}var Bl={};Object.defineProperty(Bl,"__esModule",{value:!0});function zt(n){return typeof n=="function"?n():n}function Va(n){return jl(n)||zl(n)||ra(n)}function jl(n){return n.hasOwnProperty("action")}function zl(n){return n.hasOwnProperty("href")}function ki(n){return n.hasOwnProperty("isDivider")}function ra(n){return n.hasOwnProperty("subMenu")}function nb(n){return n.hasOwnProperty("html")||n.hasOwnProperty("element")}function ab(n){return!Va(n)&&!ki(n)&&!nb(n)}function Ka(n){return Va(n)&&zt(n.disabled)||ra(n)&&zt(n.subMenu).length===0}function us(n,r){var e;n.addEventListener("mouseenter",function(t){e=setTimeout(function(){return r(t)},150)}),n.addEventListener("mouseleave",function(){return clearTimeout(e)})}function ib(n){var r=document.createElement("ul");return r.className="ctxmenu",r.append.apply(r,n.map(ob)),n.length||(r.style.display="none"),r.addEventListener("contextmenu",function(e){e.stopPropagation(),e.preventDefault()}),r.addEventListener("click",function(e){return void e.stopPropagation()}),r}function ob(n){var r=document.createElement("li");return sb([[ki,"divider",!1],[function(e){return e.icon},"icon",!0],[ab,"heading",!1],[ra,"submenu",!0],[Ka,"disabled",!1],[Va,"interactive",!0]],n,r),ki(n)||[lb,cb,ub,db,pb].forEach(function(e){return e.call(null,n,r)}),r}function sb(n,r,e){n.filter(function(t){var a=t[0];return a(r)}).every(function(t){t[0];var a=t[1],i=t[2];return!void e.classList.add(a)&&i})}function lb(n,r){var e,t=n.html,a=n.text,i=n.element,l=zt(i);l?r.append(l):r.innerHTML=(e=zt(t))!==null&&e!==void 0?e:"<span>".concat(zt(a),"</span>")}function cb(n,r){var e=n.tooltip,t=n.style,a=n.attributes;r.title=zt(e)||"",t&&r.setAttribute("style",zt(t)),a&&Object.entries(zt(a)).forEach(function(i){var l=i[0],o=i[1];r.setAttribute(l,o)})}function ub(n,r){var e=n.icon;e&&(r.innerHTML+='<img class="icon" src="'.concat(zt(e),'" />'))}function db(n,r){for(var e=0,t=Object.entries(zt(n.events)||{});e<t.length;e++){var a=t[e],i=a[0],l=a[1],o=typeof l=="function"?{listener:l,options:{}}:l,s=o.listener,c=o.options;r.addEventListener(i,s,c)}Ka(n)||ra(n)||(jl(n)&&r.addEventListener("click",n.action),Va(n)&&r.addEventListener("click",function(){return Vl.hide()}))}function pb(n,r){if(!(!zl(n)||Ka(n))){var e=n.href,t=n.download,a=n.target,i=document.createElement("a");i.innerHTML=r.innerHTML,i.href=zt(e),t!==void 0&&(i.download=zt(t)),a&&(i.target=zt(a)),r.replaceChildren(i)}}var bn="r",Kn="d";function hb(){bn="r",Kn="d"}function gb(n,r){var e=Hl(),t=window.visualViewport,a=t.width,i=t.height;Object.assign(n.style,{maxHeight:i/e.y+"px",maxWidth:a/e.x+"px"});var l=mb(n);l.width=Math.trunc(l.width)+1,l.height=Math.trunc(l.height)+1;var o={x:0,y:0};if(r instanceof Element){var s=Ji(r),c=s.x,u=s.width,h=s.y;o={x:bn==="r"?c+u:c-l.width,y:h},r.className.includes("submenu")&&(o.y+=Kn==="d"?4:-12);var m=gi(l,o);o.x!==m.x&&(bn=bn==="r"?"l":"r",o.x=bn==="r"?c+u:c-l.width),o.y!==m.y&&(Kn=Kn==="u"?"d":"u",o.y=m.y),o=gi(l,o)}else{var g=document.body.style.transform!=="",b=g?document.body.getBoundingClientRect():{x:0,y:0};o=gi(l,{x:(r.clientX-b.x)/e.x,y:(r.clientY-b.y)/e.y})}Object.assign(n.style,{left:o.x+"px",top:o.y+"px",width:l.width+"px",height:l.height+"px"})}function gi(n,r){var e=window.visualViewport,t=e.width,a=e.height,i=document.body.style.transform!=="",l=i?document.body.getBoundingClientRect():{left:0,top:0},o=l.left,s=l.top,c=Hl(),u=-o/c.x,h=-s/c.y,m=(t-o)/c.x,g=(a-s)/c.y;return{x:bn==="r"?r.x+n.width>m?m-n.width:r.x:r.x<u?u:r.x,y:Kn==="d"?r.y+n.height>g?g-n.height:r.y:r.y<h?h:r.y+n.height>g?g-n.height:r.y}}function mb(n){var r=n.cloneNode(!0);r.style.visibility="hidden",document.body.appendChild(r);var e=Ji(r);return document.body.removeChild(r),e}function Ji(n){var r=n.offsetLeft,e=n.offsetTop,t=n.offsetHeight,a=n.offsetWidth;if(n.offsetParent instanceof HTMLElement){var i=Ji(n.offsetParent);return{x:r+i.x,y:e+i.y,width:a,height:t}}return{x:r,y:e,width:a,height:t}}function Hl(){var n=document.body,r=n.getBoundingClientRect();return{x:r.width/n.offsetWidth,y:r.height/n.offsetHeight}}var fb='html{min-height:100%}.ctxmenu{position:fixed;border:1px solid #999;padding:2px 0;box-shadow:#aaa 3px 3px 3px;background:#fff;margin:0;z-index:9999;overflow-y:auto;font:15px Verdana,sans-serif;box-sizing:border-box}.ctxmenu li{margin:1px 0;display:block;position:relative;user-select:none}.ctxmenu li.heading{font-weight:bold;margin-left:-5px}.ctxmenu li span{display:block;padding:2px 20px;cursor:default}.ctxmenu li a{color:inherit;text-decoration:none}.ctxmenu li.icon{padding-left:15px}.ctxmenu img.icon{position:absolute;width:18px;left:10px;top:2px}.ctxmenu li.disabled{color:#ccc}.ctxmenu li.divider{border-bottom:1px solid #aaa;margin:5px 0}.ctxmenu li.interactive:hover{background:rgba(0,0,0,.1)}.ctxmenu li.submenu::after{content:"";position:absolute;display:block;top:0;bottom:0;right:.4em;margin:auto .1rem auto auto;border:solid #000;border-width:1px 1px 0 0;transform:rotate(45deg);width:.3rem;height:.3rem}.ctxmenu li.submenu.disabled::after{border-color:#ccc}';/*! ctxMenu v2.0.2 | (c) Nikolaj Kappler | https://github.com/nkappler/ctxmenu/blob/master/LICENSE !*/var vb=function(){function n(){var r=this;this.cache={},this.preventCloseOnScroll=!1,window.addEventListener("click",function(){return void r.hide()}),window.addEventListener("resize",function(){return void r.hide()});var e=0;window.addEventListener("wheel",function(){clearTimeout(e),e=setTimeout(function(){if(r.preventCloseOnScroll){r.preventCloseOnScroll=!1;return}r.hide()})},{passive:!0}),window.addEventListener("keydown",function(t){t.key==="Escape"&&r.hide()}),n.addStylesToDom()}return n.getInstance=function(){n.instance||(n.instance=new n);var r=n.instance;return{attach:r.attach.bind(r),delete:r.delete.bind(r),hide:r.hide.bind(r),show:r.show.bind(r),update:r.update.bind(r)}},n.prototype.attach=function(r,e,t){var a=this;t===void 0&&(t={});var i=document.querySelector(r);if(this.cache[r]!==void 0){console.error("target element ".concat(r," already has a context menu assigned. Use ContextMenu.update() intstead."));return}if(!i){console.error("target element ".concat(r," not found"));return}var l=function(o){a.show(e,o,t)};this.cache[r]={ctxMenu:e,handler:l,config:t},i.addEventListener("contextmenu",l)},n.prototype.update=function(r,e,t){t===void 0&&(t={});var a=this.cache[r],i=Object.assign({},a==null?void 0:a.config,t),l=document.querySelector(r);a&&(l==null||l.removeEventListener("contextmenu",a.handler)),delete this.cache[r],this.attach(r,e||(a==null?void 0:a.ctxMenu)||[],i)},n.prototype.delete=function(r){var e=this.cache[r];if(!e)return console.error("no context menu for target element ".concat(r," found"));delete this.cache[r];var t=document.querySelector(r);if(!t)return console.error("target element ".concat(r," does not exist (anymore)"));t.removeEventListener("contextmenu",e.handler)},n.prototype.show=function(r,e,t){var a=this,i,l,o;t===void 0&&(t={}),e instanceof MouseEvent&&(e.stopImmediatePropagation(),e.preventDefault()),this.hide(),this.onHide=t.onHide,this.onBeforeHide=t.onBeforeHide;var s=(l=(i=t.onBeforeShow)===null||i===void 0?void 0:i.call(t,r.slice(),e instanceof MouseEvent?e:void 0))!==null&&l!==void 0?l:r;this.menu=this.generateDOM(s,e,t.attributes),document.body.appendChild(this.menu),(o=t.onShow)===null||o===void 0||o.call(t,this.menu),this.menu.addEventListener("wheel",function(){a.preventCloseOnScroll=!0},{passive:!0})},n.prototype.hide=function(){this._hide(this.menu)},n.prototype._hide=function(r){var e,t;(e=this.onBeforeHide)===null||e===void 0||e.call(this,r),hb(),r&&(r.remove(),(t=this.onHide)===null||t===void 0||t.call(this,r),r===this.menu&&(delete this.menu,this.onBeforeHide=void 0,this.onHide=void 0))},n.prototype.generateDOM=function(r,e,t){var a=this;t===void 0&&(t={});var i=ib(r);return gb(i,e),r.forEach(function(l,o){var s=i.children[o];us(s,function(){var c,u=(c=s.parentElement)===null||c===void 0?void 0:c.querySelector("ul");u&&u.parentElement!==s&&a._hide(u)}),!Ka(l)&&ra(l)&&us(s,function(){s.querySelector("ul")||s.appendChild(a.generateDOM(zt(l.subMenu),s,zt(l.subMenuAttributes)))})}),Object.entries(t).forEach(function(l){var o=l[0],s=l[1];return i.setAttribute(o,s)}),i},n.addStylesToDom=function(){if(document.readyState==="loading")return document.addEventListener("readystatechange",this.addStylesToDom,{once:!0});var r=document.createElement("style");r.innerHTML=fb,document.head.insertBefore(r,document.head.childNodes[0])},n}(),Vl=vb.getInstance(),Kl=Bl.ctxmenu=Vl;const Fl=n=>{const{items:r,event:e}=n;Kl.show(r,e)},yb=()=>{Kl.hide()};class bb{constructor(r){this.onClick=()=>{this.body.style.display==="none"?this.open():this.close()},this.onContextMenu=t=>{var i;if(((i=this.group)==null?void 0:i.type)!==fr.Component)return;t.preventDefault();const a=this.group.editor.contextMenuManager.getContextMenu(ja.ATTR_COMPONENT);a.length!==0&&(this.group.editor.contextMenuManager.meta={group:this.group},Fl({event:t,items:a}))},this.parent=r,this.container=document.createElement("div"),this.container.className="attribute-group-container",this.head=document.createElement("div"),this.head.className="attribute-group",this.head.addEventListener("click",this.onClick),this.label=document.createElement("div"),this.label.className="attribute-group-name",this.label.addEventListener("contextmenu",this.onContextMenu),this.head.appendChild(this.label);const e=document.createElement("div");this.head.appendChild(e),this.suffix=document.createElement("div"),this.suffix.className="attribute-group-close",e.appendChild(this.suffix),this.body=document.createElement("div"),this.container.appendChild(this.head),this.container.appendChild(this.body),this.attributes=[]}hide(){this.attributes.forEach(r=>r.hide()),this.container.style.display="none"}show(r){const{group:e,groupName:t,attributes:a}=r,i=a.filter(l=>l.visible).length;this.group=r,this.label.textContent=t,this.container.style.display=i?"block":"none",this.parent.activeGroups.has(e)?this.open():this.close()}open(){if(this.body.style.display="block",this.suffix.className="attribute-group-close",!this.group)return;const{attributes:r}=this.group,e=r.length-this.attributes.length;for(let t=0;t<e;t++){const a=new rb(this);this.body.appendChild(a.container),this.attributes.push(a)}this.attributes.forEach(t=>t.hide()),r.forEach((t,a)=>this.attributes[a].show(t)),this.parent.addActiveGroup(this.group.group)}close(){this.body.style.display="none",this.suffix.className="attribute-group-close attribute-group-rotate",this.group&&this.parent.removeActiveGroup(this.group.group)}dispose(){this.head.removeEventListener("click",this.onClick),this.label.removeEventListener("contextmenu",this.onContextMenu),this.attributes.forEach(r=>r.dispose()),this.container.remove(),this.attributes=[],delete this.group}}class ds{constructor(r,e){this.editor=r,this.groups=[],this.activeGroups=new Set(["base"]),this.container=e}update(r){const e=r.length-this.groups.length;for(let t=0;t<e;t++){const a=new bb(this);this.container.appendChild(a.container),this.groups.push(a)}this.groups.forEach(t=>t.hide()),r.forEach((t,a)=>this.groups[a].show(t))}setActiveGroups(r){r.forEach(e=>this.activeGroups.add(e))}addActiveGroup(r){this.activeGroups.add(r)}removeActiveGroup(r){this.activeGroups.delete(r)}dispose(){this.groups.forEach(r=>r.dispose()),this.groups=[]}}const Sb=n=>{const{editor:r}=n,e=d.useRef(null),t=d.useRef(null),[a,i]=d.useState("base");return d.useEffect(()=>{const l=new ds(r,e.current),o=new ds(r,t.current),s=()=>{const u=r.attrManager.refresh(),h=r.materialManager.refresh();l.update(u),o.update(h),h.length===0&&i("base")},c=()=>{const u=r.materialManager.refresh();o.update(u)};return r.bus.on("NODE_SELECT",s),r.bus.on("DESERIALIZATED",s),r.bus.on("MATERIAL_CHANGE",c),()=>{r.bus.off("NODE_SELECT",s),r.bus.off("DESERIALIZATED",s),r.bus.off("MATERIAL_CHANGE",c),l.dispose(),o.dispose()}},[r]),D.jsxs("div",{className:qr.container,children:[D.jsxs("div",{className:qr.title,children:[D.jsx("span",{className:`iconfont icon-inspector ${qr.icon} ${a==="base"?qr.active:""}`,onClick:()=>i("base")}),D.jsx("span",{className:`iconfont icon-material ${qr.icon} ${a==="material"?qr.active:""}`,style:{fontSize:14,verticalAlign:"0.05rem"},onClick:()=>i("material")})]}),D.jsxs("div",{className:qr.body,children:[D.jsx("div",{ref:e,style:{display:a==="base"?"block":"none"}}),D.jsx("div",{ref:t,style:{display:a==="material"?"block":"none"}})]})]})},Cb="_container_t8w3l_1",Eb="_left_t8w3l_16",Mb="_right_t8w3l_20",Ab="_tool_t8w3l_24",xb="_active_t8w3l_37",Xr={container:Cb,left:Eb,right:Mb,tool:Ab,active:xb},Nb=n=>{const{editor:r}=n,[e,t]=d.useState([]),[a,i]=d.useState([]);d.useEffect(()=>{const o=()=>{const{left:s,right:c}=r.toolManager.tools;t([...s]),i([...c])};return r.bus.on("TOOL_UPDATE",o),o(),()=>{r.bus.off("TOOL_UPDATE",o)}},[r]);const l=o=>{r.toolManager.select(o)};return D.jsxs("div",{className:Xr.container,children:[D.jsx("div",{className:Xr.left,children:e.map(o=>D.jsx("span",{className:`iconfont icon-${o.icon} ${Xr.tool} ${o.actived?Xr.active:""}`,title:o.title,onClick:()=>l(o)},o.key))}),D.jsx("div",{className:Xr.right,children:a.map(o=>D.jsx("span",{className:`iconfont icon-${o.icon} ${Xr.tool} ${o.actived?Xr.active:""}`,title:o.title,onClick:()=>l(o)},o.key))})]})},wb="_container_1xb2c_1",kb="_title_1xb2c_12",Pb="_body_1xb2c_18",mi={container:wb,title:kb,body:Pb},Ob="_container_pj1iu_1",Ib="_selected_pj1iu_13",Tb="_icon_pj1iu_17",_b="_name_pj1iu_22",ba={container:Ob,selected:Ib,icon:Tb,name:_b},Rb={AmbientLight:"ambient-light",DirectionalLight:"directional-light",PerspectiveCamera:"perspective-camera",OrthographicCamera:"orthographic-camera",Plane:"plane",Box:"box",Sphere:"sphere",Cone:"cone",Cylinder:"cylinder",Pipe:"pipe",HemisphereLight:"hemisphere-light",SpotLight:"spot-light",PointLight:"point-light",Model:"model",Text:"text"},Ul=n=>{const{node:r,editor:e,level:t=0}=n,[a,i]=d.useState(!1),[l,o]=d.useState(!0);d.useEffect(()=>{const c=()=>{i(e.core.selections.some(u=>u.id===r.id))};return e.bus.on("NODE_SELECT",c),()=>{e.bus.off("NODE_SELECT",c)}},[e]);const s=c=>{c.stopPropagation(),e.selectionManager.setSelections([r.id])};return D.jsxs(D.Fragment,{children:[D.jsxs("div",{className:`${ba.container} ${a?ba.selected:""}`,style:{paddingLeft:`${t*10+10}px`},onClick:s,children:[l&&r.children.length>0&&D.jsx(Rs,{onClick:()=>o(!1)}),!l&&r.children.length>0&&D.jsx(Ih,{onClick:()=>o(!0)}),D.jsx("span",{className:`iconfont icon-${Rb[r.type]} ${ba.icon}`}),D.jsx("span",{className:ba.name,children:r.name})]}),!l&&r.children.map(c=>D.jsx(Ul,{node:c,editor:e,level:t+1},c.id))]})},$b=n=>{const{editor:r}=n,[e,t]=d.useState([]);d.useEffect(()=>{const i=()=>{const l=r.nodeManager.refresh();t(l)};return r.bus.on("DESERIALIZATED",i),r.bus.on("NODE_ADD",i),r.bus.on("NODE_REMOVE",i),r.bus.on("NODE_MOVE",i),r.bus.on("ATTR_CHANGE",i),i(),()=>{r.bus.off("DESERIALIZATED",i),r.bus.off("NODE_ADD",i),r.bus.off("NODE_REMOVE",i),r.bus.off("NODE_MOVE",i),r.bus.off("ATTR_CHANGE",i)}},[r]);const a=()=>{r.core.select([])};return D.jsxs("div",{className:mi.container,children:[D.jsxs("div",{className:mi.title,children:[D.jsx("span",{className:"iconfont icon-hierarchy"}),D.jsx("span",{style:{marginLeft:4,fontSize:"12px",verticalAlign:"0.2em"},children:"Hierarchy"})]}),D.jsx("div",{className:mi.body,onClick:a,children:e.map(i=>D.jsx(Ul,{node:i,editor:r},i.id))})]})},Db=()=>{const n=navigator.userAgent.toLowerCase(),r=/macintosh|mac os x/i.test(navigator.userAgent);if(n.indexOf("win32")>=0||n.indexOf("wow32")>=0)return"win32";if(n.indexOf("win64")>=0||n.indexOf("wow64")>=0)return"win64";if(r)return"mac"},ps=()=>Db()==="mac",Ub=()=>{const[n]=kc(),r=d.useRef(null),e=Ru(r),[t,a]=d.useState(),[i,l]=d.useState(),o=d.useRef({x:0,y:0}),[s,c]=Es.useMessage();d.useEffect(()=>{const f=n.get("id");f&&l(f)},[n]),d.useEffect(()=>{const f=new Iv;return f.mount(r.current),f.active(),a(f),()=>{f.deactive(),f.unmount(),a(void 0)}},[]),d.useEffect(()=>{t==null||t.resize()},[t,e]),d.useEffect(()=>{if(!t)return;const f=v=>{s.success(v.message)};return t.bus.on("MESSAGE",f),()=>{t.bus.off("MESSAGE",f)}},[t]),d.useEffect(()=>{i&&(t==null||t.open(i))},[i,t]);const u=f=>{const{clientX:v,clientY:S}=f;if((v-o.current.x)**2+(S-o.current.y)**2>2||!t)return;const M=t.contextMenuManager.getContextMenu(ja.GRAPH);M.length!==0&&Fl({event:f,items:M})},h=f=>{yb();const{clientX:v,clientY:S}=f;o.current.x=v,o.current.y=S},m=f=>{ps()&&u(f)},g=f=>{f.preventDefault(),!ps()&&u(f)},b=f=>{f.preventDefault()},y=f=>{t==null||t.dropManager.onDrop(f)};return D.jsxs("div",{className:Ho.container,children:[c,D.jsxs(Wr,{separator:!0,children:[D.jsx(Wr.Pane,{preferredSize:"15%",maxSize:500,minSize:0,children:t&&D.jsx($b,{editor:t})}),D.jsx(Wr.Pane,{preferredSize:"68%",minSize:250,children:D.jsxs(Wr,{vertical:!0,separator:!0,children:[D.jsx(Wr.Pane,{preferredSize:"75%",minSize:500,children:D.jsx("div",{className:Ho.view,ref:r,onDragOver:b,onDrop:y,onPointerDown:h,onPointerUp:m,onContextMenu:g,children:t&&D.jsx(Nb,{editor:t})})}),D.jsx(Wr.Pane,{preferredSize:"25%",minSize:0,children:D.jsx(Jm,{})})]})}),D.jsx(Wr.Pane,{preferredSize:"17%",minSize:0,children:t&&D.jsx(Sb,{editor:t})})]})]})};export{Ub as default};
